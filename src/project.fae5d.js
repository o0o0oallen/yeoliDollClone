window.__require=function e(t,o,n){function r(i,s){if(!o[i]){if(!t[i]){var l=i.split("/");if(l=l[l.length-1],!t[l]){var c="function"==typeof __require&&__require;if(!s&&c)return c(l,!0);if(a)return a(l,!0);throw new Error("Cannot find module '"+i+"'")}}var u=o[i]={exports:{}};t[i][0].call(u.exports,function(e){return r(t[i][1][e]||e)},u,u.exports,e,t,o,n)}return o[i].exports}for(var a="function"==typeof __require&&__require,i=0;i<n.length;i++)r(n[i]);return r}({AnimNode:[function(e,t,o){"use strict";cc._RF.push(t,"6cd46+n/w9Ax4y5hTy4lY+2","AnimNode");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../utils/AsyncMonitor"),l=e("../../game/manager/mgrCfg"),c=e("../../game/manager/mgrDirector"),u=e("../utils/Tools"),d=e("../component/LifeCycleMonitor"),p=cc._decorator,h=p.ccclass,f=(p.property,function(e){function t(t,o){var n=e.call(this)||this;return n.loadCompletedCallback=o,n.animData=l.default.get("anim_node_db",t),n._monitor=new s.default(n),n.addComponent(d.default).setOnLoadCallback(n.onLoad.bind(n)),n}return n(t,e),t.prototype.onLoad=function(){this._loadResourceNode()},t.prototype._onPreDestroy=function(){if(cc.isValid(this.nodeResource)){var t=this.nodeResource.getComponent(cc.Animation);cc.isValid(t)&&t.stop()}e.prototype._onPreDestroy&&e.prototype._onPreDestroy.call(this)},t.prototype._loadResourceNode=function(){var e=this,t=this.animData;c.default.loadRes(t.prefabFileName,cc.Prefab,function(o,n){if(o)e.loadCompletedCallback&&e.loadCompletedCallback(t.id);else if(cc.isValid(e)){var r=cc.instantiate(n);r.parent=e,e._monitor.registerAsyncValue("nodeResource",r),e.loadCompletedCallback&&e.loadCompletedCallback(t.id)}else e.loadCompletedCallback&&e.loadCompletedCallback(t.id)})},t.prototype.reset=function(){return a(this,void 0,void 0,function(){var e,t;return i(this,function(o){switch(o.label){case 0:return this.active=!0,this.rotation=0,this.setPosition(0,0),this.scaleX=this.animData.scaleX,this.scaleY=this.animData.scaleY,this.setColorEx(cc.color(255,255,255)),this.opacity=255,this.nodeResource?[3,2]:[4,this.waitResourceLoaded()];case 1:o.sent(),o.label=2;case 2:if(!cc.isValid(this))return[2];for(e=this.nodeResource.getComponentsInChildren(cc.ParticleSystem),t=0;t<e.length;t++)e[t].resetSystem();return[2]}})})},t.prototype.play=function(e){return a(this,void 0,void 0,function(){var t,o;return i(this,function(n){switch(n.label){case 0:return this.nodeResource?[3,2]:[4,this.waitResourceLoaded()];case 1:n.sent(),n.label=2;case 2:return cc.isValid(this)?(t=this.nodeResource.getComponent(cc.Animation),cc.isValid(t)?(e||(o=t.getClips()).length>0&&(e=o[0].name),t.play(e),[2]):[2]):[2]}})})},t.prototype.registerEventCallback=function(e){return a(this,void 0,void 0,function(){var t;return i(this,function(o){switch(o.label){case 0:return this.nodeResource?[3,2]:[4,this.waitResourceLoaded()];case 1:o.sent(),o.label=2;case 2:return cc.isValid(this)?(this.unregisterEventCallback(),this.callback=e,(t=this.nodeResource.getComponent(cc.Animation))?(t.on("play",this.onAnimationPlay,this),t.on("stop",this.onAnimationStop,this),t.on("pause",this.onAnimationPause,this),t.on("resume",this.onAnimationResume,this),t.on("lastframe",this.onAnimationLastframe,this),t.on("finished",this.onAnimationFinished,this),[2]):[2]):[2]}})})},t.prototype.unregisterEventCallback=function(){return a(this,void 0,void 0,function(){var e;return i(this,function(t){return this.callback=null,(e=this.nodeResource.getComponent(cc.Animation))?(e.off("play",this.onAnimationPlay,this),e.off("stop",this.onAnimationStop,this),e.off("pause",this.onAnimationPause,this),e.off("resume",this.onAnimationResume,this),e.off("lastframe",this.onAnimationLastframe,this),e.off("finished",this.onAnimationFinished,this),[2]):[2]})})},t.prototype.waitResourceLoaded=function(){return this._monitor.monitorAsyncValueExists("nodeResource")},t.prototype._onEvent=function(e,t){if(cc.isValid(this.nodeResource)){var o=this.nodeResource.getComponent(cc.Animation).currentClip.name;"function"==typeof this.callback&&this.callback({name:t,clipName:o})}},t.prototype.onAnimationPlay=function(e){this._onEvent(e,"play")},t.prototype.onAnimationStop=function(e){this._onEvent(e,"stop")},t.prototype.onAnimationPause=function(e){this._onEvent(e,"pause")},t.prototype.onAnimationResume=function(e){this._onEvent(e,"resume")},t.prototype.onAnimationLastframe=function(e){this._onEvent(e,"lastframe")},t.prototype.onAnimationFinished=function(e){this._onEvent(e,"finished")},t.prototype.setColorEx=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return this.nodeResource?[3,2]:[4,this.waitResourceLoaded()];case 1:t.sent(),t.label=2;case 2:return cc.isValid(this)?(u.default.setCascadeColor(this,e),[2]):[2]}})})},t=r([h],t)}(cc.Node));o.default=f,cc._RF.pop()},{"../../game/manager/mgrCfg":"mgrCfg","../../game/manager/mgrDirector":"mgrDirector","../component/LifeCycleMonitor":"LifeCycleMonitor","../utils/AsyncMonitor":"AsyncMonitor","../utils/Tools":"Tools"}],AsyncMonitor:[function(e,t,o){"use strict";cc._RF.push(t,"0ac83nqI7ZFqojdc8gB41TB","AsyncMonitor");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./Tools"),a=cc._decorator,i=a.ccclass,s=(a.property,function(){function e(e){this.allListeners={},this.container=e||this}return e.prototype._getListeners=function(e){var t=this.allListeners[e];return null==t&&(t=[],this.allListeners[e]=t),t},e.prototype._addListener=function(e,t){var o=this._getListeners(e);o.indexOf(t)>=0||o.push(t)},e.prototype._removeListener=function(e,t){var o=this._getListeners(e),n=o.indexOf(t);n>=0&&o.splice(n,1)},e.prototype._triggerListener=function(e,t){for(var o=this._getListeners(e),n=[],r=0;r<o.length;r++)n.push(o[r]);for(r=0;r<n.length;r++){(0,n[r])(t)}},e.prototype.registerAsyncValue=function(e,t){this.container[e]=t,this._triggerListener(e,t)},e.prototype.unregisterAsyncValue=function(e){return this.registerAsyncValue(e,null)},e.prototype.getAsyncValue=function(e){var t=this;return new Promise(function(o,n){var a,i=t.container[e];null!=i?r.default.triggerPromiseResolve(o,i):(a=function(n){null!=n&&(t._removeListener(e,a),r.default.triggerPromiseResolve(o,n))},t._addListener(e,a))})},e.prototype.monitorAsyncValue=function(e,t){var o=this;if("function"==typeof t){var n=t;return new Promise(function(t,a){var i,s=o.container[e];n(s)?r.default.triggerPromiseResolve(t,!0):(i=function(a){n(a)&&(o._removeListener(e,i),r.default.triggerPromiseResolve(t,!0))},o._addListener(e,i))})}return new Promise(function(n,a){var i;o.container[e]==t?r.default.triggerPromiseResolve(n,!0):(i=function(a){a==t&&(o._removeListener(e,i),r.default.triggerPromiseResolve(n,!0))},o._addListener(e,i))})},e.prototype.monitorAsyncValueExists=function(e){return this.monitorAsyncValue(e,function(e){return null!=e})},e=n([i],e)}());o.default=s,cc._RF.pop()},{"./Tools":"Tools"}],Base64:[function(e,t,o){"use strict";cc._RF.push(t,"b84der7CppMXapFQITVgKSQ","Base64");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,i=(r.property,function(){function e(){}return e.encodeForUrl=function(e){var t=this.encode(e);return t?t=(t=t.replace("+","-")).replace("/","*"):null},e.decodeForUrl=function(e){return e?(e=(e=e.replace("-","+")).replace("*","/"),this.decode(e)):null},e.encode=function(e){var t,o,n,r,a,i,s,l="",c=0;for(e=this._utf8_encode(e);c<e.length;)r=(t=e.charCodeAt(c++))>>2,a=(3&t)<<4|(o=e.charCodeAt(c++))>>4,i=(15&o)<<2|(n=e.charCodeAt(c++))>>6,s=63&n,isNaN(o)?i=s=64:isNaN(n)&&(s=64),l=l+this._keyStr.charAt(r)+this._keyStr.charAt(a)+this._keyStr.charAt(i)+this._keyStr.charAt(s);return l},e.decode=function(e){var t,o,n,r,a,i,s="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)t=this._keyStr.indexOf(e.charAt(l++))<<2|(r=this._keyStr.indexOf(e.charAt(l++)))>>4,o=(15&r)<<4|(a=this._keyStr.indexOf(e.charAt(l++)))>>2,n=(3&a)<<6|(i=this._keyStr.indexOf(e.charAt(l++))),s+=String.fromCharCode(t),64!=a&&(s+=String.fromCharCode(o)),64!=i&&(s+=String.fromCharCode(n));return s=this._utf8_decode(s)},e._utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",o=0;o<e.length;o++){var n=e.charCodeAt(o);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},e._utf8_decode=function(e){for(var t="",o=0,n=0,r=0,a=0;o<e.length;)(n=e.charCodeAt(o))<128?(t+=String.fromCharCode(n),o++):n>191&&n<224?(r=e.charCodeAt(o+1),t+=String.fromCharCode((31&n)<<6|63&r),o+=2):(r=e.charCodeAt(o+1),a=e.charCodeAt(o+2),t+=String.fromCharCode((15&n)<<12|(63&r)<<6|63&a),o+=3);return t},e._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e=n([a],e)}());o.default=i,cc._RF.pop()},{}],CascadeColor:[function(e,t,o){"use strict";cc._RF.push(t,"909f95o1GBCloRavVqWh7YO","CascadeColor");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../utils/Tools"),i=cc._decorator,s=i.ccclass,l=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.update=function(e){var t=this;cc.isValid(this.node)&&(this._lastColor&&this.node.color.equals(this._lastColor)||(this._lastColor=this.node.color,a.default.recursionChildren(this.node,function(e){e.color=t.node.color})))},t=r([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../utils/Tools":"Tools"}],CfgParser:[function(e,t,o){"use strict";cc._RF.push(t,"28a48t7aL9M2aeRvb7tTw6M","CfgParser");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,i=(r.property,function(){function e(){}var t;return t=e,e.parseCfgByJsonObj=function(e,t,o){var n=this.preprocess(e,t);return this.formatDb(e,n,o,t.fields)},e.parseNumber=function(e){var t=parseFloat(e);return isNaN(t)&&(t=null),t},e.parseString=function(e){return e},e.parseArray=function(e){var t=null;try{(t=JSON.parse(e))instanceof Array||(t=null)}catch(e){}return t},e.parseObject=function(e){var t=null;try{(t=JSON.parse(e))instanceof Object||(t=null)}catch(e){}return t},e.parseBoolean=function(e){return"TRUE"==e||"true"==e},e.parseValue=function(e,t){var o=this.PARSE_FUNCTIONS[t];if(!o)return"";var n=o(e);if(null==n){var r=this.PARSE_DEFAULT_VALUES[t];return e.length>0&&cc.log("[\u8b66\u544a] CfgParser.parseValue \u89e3\u6790\u9519\u8bef\uff1atype="+t+", srcValue=["+e+"], \u9ed8\u8ba4\u503c=["+r+"]]"),r}return n},e.preprocess=function(e,t){var o=[],n=t.types||[],r=t.fields||[],a=t.values||[];if(!(a.length<=0)){if(n.length!=a[0].length||r.length!=a[0].length)return cc.log("[\u8b66\u544a] CfgParser.preprocessData  "+e+" \u6570\u636e\u957f\u5ea6\u4e0d\u5339\u914d\uff01"),[];for(var i=0;i<a.length;i++){for(var s=a[i],l={},c=0;c<s.length;c++){var u=n[c],d=r[c],p=s[c];l[d]=this.parseValue(p,u)}o.push(l)}return o}cc.log("[\u8b66\u544a] CfgParser.preprocessData "+e+" \u6570\u636e\u4e3a\u7a7a")},e.formatDb=function(e,t,o,n){for(var r=o.split(""),a={},i=0;i<t.length;i++){for(var s=t[i],l=a,c=0;c<r.length-1;c++){var u=l[p=s[n[c]]];u||(u=c==r.length-2&&"a"==r[r.length-1]?[]:{},l[p]=u),l=u}var d=r[r.length-1];if("m"==d){var p;if(null!=l[p=s[n[r.length-1]]]){var h="db";for(c=0;c<r.length;c++)h+="["+s[n[c]]+"]";cc.log("[\u8b66\u544a] CfgParser.formatDb  "+e+" \u5b57\u6bb5\u88ab\u8986\u76d6\uff01",h,l[p])}l[p]=s}else"a"==d&&(l instanceof Array||1==r.length&&(a=l=[]),l instanceof Array?l.push(s):cc.log("[\u8b66\u544a] CfgParser.formatDb  "+e+" a\u6a21\u5f0f\uff0c\u5bb9\u5668\u4e0d\u662f\u6570\u7ec4\uff01"))}return a},e.PARSE_FUNCTIONS={A:t.parseArray,O:t.parseObject,N:t.parseString,S:t.parseString,I:t.parseNumber,F:t.parseNumber,B:t.parseBoolean},e.PARSE_DEFAULT_VALUES={A:[],O:{},N:"",S:"",I:0,F:0,B:!1},e=t=n([a],e)}());o.default=i,cc._RF.pop()},{}],Const:[function(e,t,o){"use strict";cc._RF.push(t,"c54bf4JLl9PjLK3VwVekJ0m","Const");var n,r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a,i=cc._decorator.ccclass;(function(e){e.toutiao="toutiao",e.douyin="douyin",e.baidu="baidu",e.oppo="oppoqg",e.funheadline="funheadline",e.game4399="4399minigame",e.huawei="huawei",e.iqiyi="iqiyi",e.kaixin="kaixin",e.qq="qq",e.weixin="weixin",e.xiaomi="xiaomiqg",e.uc="uc",e.vivo="vivo",e.debug="debug"})(a=o.ChannelName||(o.ChannelName={})),function(e){e[e.HAIR=11]="HAIR",e[e.UP=13]="UP",e[e.DOWN=14]="DOWN",e[e.SOCK=15]="SOCK",e[e.SHOE=16]="SHOE",e[e.FACE=17]="FACE",e[e.HAIR_DECO=18]="HAIR_DECO",e[e.HAND_DECO=19]="HAND_DECO",e[e.SPECIAL=20]="SPECIAL",e[e.BODY=97]="BODY",e[e.SHADOW=99]="SHADOW",e[e.DISCOUNT=998]="DISCOUNT",e[e.PET=999]="PET"}(o.CPartType||(o.CPartType={})),function(e){e[e.SPRITE=1]="SPRITE",e[e.SPINE=2]="SPINE",e[e.ARMATURE=3]="ARMATURE",e[e.PARTICLE=4]="PARTICLE",e[e.DECORATION_GROUP=5]="DECORATION_GROUP",e[e.ANINODE=6]="ANINODE"}(o.CPartResType||(o.CPartResType={})),function(e){e[e.SPINE=1]="SPINE",e[e.ARMATURE=2]="ARMATURE",e[e.PARTICLE=3]="PARTICLE",e[e.STAGE=4]="STAGE",e[e.PATH=5]="PATH",e[e.TEXTURE=6]="TEXTURE",e[e.ANINODE=7]="ANINODE"}(o.CResType||(o.CResType={})),function(e){e[e.UNSTART=1]="UNSTART",e[e.LOADING=2]="LOADING",e[e.LOADED=3]="LOADED"}(o.ResLoadStatus||(o.ResLoadStatus={})),function(e){e[e.canSign=1]="canSign",e[e.signed=2]="signed",e[e.signOver=3]="signOver",e[e.waitGap=4]="waitGap"}(o.SignState||(o.SignState={})),function(e){e[e.canSign=1]="canSign",e[e.signed=2]="signed",e[e.signOver=3]="signOver",e[e.waitGap=4]="waitGap"}(o.OnlineState||(o.OnlineState={})),function(e){e[e.none_passAll=0]="none_passAll",e[e.none_blockkAll=1]="none_blockkAll",e[e.none_passHole=2]="none_passHole",e[e.mask_passAll=3]="mask_passAll",e[e.mask_blockAll=4]="mask_blockAll",e[e.mask_passHole=5]="mask_passHole"}(o.GuideMaskType||(o.GuideMaskType={})),function(e){e[e.form=1]="form",e[e.json=2]="json"}(o.HttpSendDataType||(o.HttpSendDataType={})),function(e){e[e.unknown=0]="unknown",e[e.rate1=1]="rate1",e[e.rate2=2]="rate2",e[e.rate3=3]="rate3",e[e.rate4=4]="rate4"}(o.StageRate||(o.StageRate={})),function(e){e[e.intersitial=1]="intersitial",e[e.video=2]="video",e[e.inject=3]="inject",e[e.banner_bototm=4]="banner_bototm",e[e.adh5=5]="adh5",e[e.banner_top=6]="banner_top"}(o.AdvIdType||(o.AdvIdType={})),function(e){e[e.normal=0]="normal",e[e.finished=1]="finished",e[e.received=2]="received"}(o.QuestState||(o.QuestState={})),function(e){e[e.unknown=0]="unknown",e[e.daily=1]="daily",e[e.achievement=2]="achievement",e[e.trigger=3]="trigger"}(o.QuestType||(o.QuestType={})),function(e){e[e.none=0]="none",e[e.pvp=1]="pvp",e[e.pkmirror=2]="pkmirror"}(o.RankFromUI||(o.RankFromUI={})),function(e){e[e.none=0]="none",e[e.quest=1]="quest"}(o.AchievementType||(o.AchievementType={})),function(e){e[e.good=0]="good",e[e.best=1]="best"}(o.GoodsRate||(o.GoodsRate={}));var s=function(){function e(){}return e.packageVersion="1.0.0",e.sdcardPath="",e.copChannelId="",e.ulsdkVersion="",e.cdkChannelId="",e.SERVER_HOST="http://rank.ultralisk.cn",e.SERVER_URL_FORMAT="%s/ultralisk/",e.SERVER_APP_ID=50,e.SERVER_RANK_ID=65,e.RES_SERVER_HOST="http://192.168.1.149:8080/resext/",e.B_PROMISE_RESOLVE_NEED_WAIT=!0,e.PROMISE_RESOLVE_WAIT_TIME=1,e.WARP_SCENE_MIN_LOAD_TIME=.5,e.LOCAL_PATCH_INFO=null,e.GAME_VERSION="1001",e.IS_OPEN_VIDEO_RECORD=!0,e.HAD_TIP_USER_LOGIN=!0,e.IS_SHOW_URL_AD_ICON=!1,e.IS_COP_OPEN_PAY=!1,e.IS_INHUB_FIRSTTIME=!0,e.PAY_CHANNEL=null,e.LOCAL_PUBLISH_CHANNEL="",e.ANDROID_SWITCH_THIRD_EXIT=!1,e.ANDROID_SWITCH_MORE_GAME=!1,e.ANDROID_SWITCH_ABOUT=!1,e.ANDROID_SWITCH_MUSIC_ENABLED=!1,e.PACKAGE_VERSION=null,e.B_SDK_HAS_WEB_VIEW=!0,e.COP_CHANNEL_ID=null,e.ULSDK_VERSION=null,e.B_UL_ANDROID_MORE_GAME=!1,e.IS_SHOW_MORE_WONDERFUL=!1,e.SDK_UUID=null,e.SDK_CARD_TYPE=null,e.MEGADATA_TYPE_ID_ARR=[20,20,20,20,20,20],e.FORCE_PATCH_CHANNEL_NAME_KEY="FORCE_PATCH_CHANNEL_NAME_KEY",e.ITEM_ID_RMB=1,e.ITEM_ID_GOLD=2,e.ITEM_ID_KEY=3,e.ITEM_ID_ENERGY=4,e.ITEM_ID_MAX_ENERGY=5,e.ITEM_ID_CANDY=6,e.ITEM_ID_OPEN_CHEST=8,e.ITEM_ID_HUMBER=9,e.ITEM_ID_SHARE_COUNT=10,e.ITEM_ID_MIRROR_ITEM=11,e.ITEM_ID_MIRROR_STAR=12,e.ITEM_ID_MIRROR_SILVER=13,e.ITEM_ID_VIDEO_SHARE_COUNT=14,e.ITEM_ID_HAPPY_FIVE_ONE_EXCHANGE_ITEM=16,e.ITEM_ID_AVATAR_ORDER=31,e.ITEM_ID_MAX_AVATAR_ORDER=32,e.ITEM_ID_AUTO_RECOVER_MAX_AVATAR_ORDER=33,e.ITEM_ID_TURNOVER=34,e.ITEM_ID_OPEN_SHOP_COUNT=35,e.ITEM_ID_ALERT_OPEN_SHOP_COUNT=36,e.ITEM_ID_QUEST_POWER=37,e.ITEM_ID_PVP_REWARD_CURR_NUM=38,e.ITEM_ID_ENTER_PRODUCT_RESULT_COUNT=39,e.ITEM_ID_STORE_RESULT_LOTTERY_READY_COUNT=40,e.ITEM_ID_BUILDING_STORE=91,e.ITEM_ID_DAILY_LOTTERY_COUNT=901,e.ITEM_ID_PKMIRROR_COUNT=902,e.ITEM_ID_PVP_LIKE_COUNT=903,e.ITEM_ID_PKMIRROR_CHANGE_ENEMY_COUNT=904,e.ITEM_FLAG_GLOD=1,e.ITEM_FLAG_PART=2,e.ITEM_FLAG_CHEST=3,e.ITEM_FLAG_PET_PART=4,e.ITEM_FLAG_COIN=5,e.GLOBAL_ORDER_DIALOG=1e4,e.GLOBAL_ORDER_TIP=11e3,e.GLOBAL_ORDER_GUIDE_VIEW=12e3,e.GLOBAL_ORDER_NATIVE_VIEW=13e3,e.GLOBAL_ORDER_WARP_BASE_MASK=29999,e.GLOBAL_ORDER_WARP_VIEW=3e4,e.SHOP_ID_PET_GIFT=110,e.RESOLUTION_RANGE={maxWidth:768,minWidth:576,maxHeight:1152,minHeight:1024},e.APP_NAME_2_BANNER_HEIGHT_DICT=((n={})[a.toutiao]=180,n[a.qq]=140,n[a.oppo]=110,n[a.vivo]=110,n),e.PET_ADVENTURE_ID_WORK=1,e.MAX_FLY_GOT_COUNT=15,e.CACHE_EDITOR_FILE_DATA=!0,e.AVATAR_GRID_SIZE=5,e.CPART_EYE_SUB_TYPES=[],e.CPART_EYE_SUB_TYPE_HASH={},e.CPART_TYPE_MODE_DRAW=1,e.ENABLED_MODE_LASH=!1,e.ENABLED_EYE_STATUS=!1,e.ENABLED_CHECK_MUTEX_TYPES=!0,e.FILE_STAGE_DATA="cfg/stage/stage_data.json",e.SUIT_EDITOR_STAGE_ID=9001,e.MID_AUTUMN_LOTTERY_MAX_COUNT=2,e.STAGE_MAP_NORMAL_HARD_LEVEL=1,e.STAGE_MAP_HARD_HARD_LEVEL=2,e.AD_VIDEO_VALID_COUNT=1,e.AD_BANNER_NAME="ad_common_banner_name",e.MAX_SHOW_SUBJECT_NUM=3,e.PVP_LIKE_MAX_COUNT=10,e.PVP_LIKE_COUNT_RECOVER_TIME=600,e.GUIDE_TYPE_MAIN=1,e.APP_NAME=null,e.OS_BAIDU=!1,e.PET_ID_2_SOUND_ID_DICT={601:341,602:318,603:331,604:351,605:329},e.SHOPER_SPINE_ARR=[{spineId:"shoper1",offsetCatchPos:cc.v2(12,-5),bMan:!0},{spineId:"shoper2",offsetCatchPos:cc.v2(6,-10),bMan:!1},{spineId:"shoper9",offsetCatchPos:cc.v2(10,-7),bMan:!1},{spineId:"shoper3",offsetCatchPos:cc.v2(6,0),bMan:!1},{spineId:"shoper10",offsetCatchPos:cc.v2(8,-5),bMan:!1},{spineId:"shoper4",offsetCatchPos:cc.v2(0,0),bMan:!0},{spineId:"shoper11",offsetCatchPos:cc.v2(10,5),bMan:!0},{spineId:"shoper5",offsetCatchPos:cc.v2(12,-5),bMan:!1},{spineId:"shoper12",offsetCatchPos:cc.v2(10,-5),bMan:!1},{spineId:"shoper6",offsetCatchPos:cc.v2(6,-8),bMan:!1},{spineId:"shoper13",offsetCatchPos:cc.v2(10,-5),bMan:!1},{spineId:"shoper7",offsetCatchPos:cc.v2(10,-20),bMan:!0},{spineId:"shoper14",offsetCatchPos:cc.v2(10,3),bMan:!0},{spineId:"shoper8",offsetCatchPos:cc.v2(10,-3),bMan:!1}],e=r([i],e)}();o.default=s,cc._RF.pop()},{}],DebugGrid:[function(e,t,o){"use strict";cc._RF.push(t,"ccd0c3VpAJDfLLPE29hM8hd","DebugGrid");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../game/view/node/LayerColor"),i=e("./ViewBase"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cells={},t.vLines={},t.hLines={},t}return n(t,e),t.prototype.clear=function(){for(var e in this.vLines){var t=this.vLines[e];cc.isValid(t)&&t.destroy()}this.vLines={};for(var e in this.hLines){t=this.hLines[e];cc.isValid(t)&&t.destroy()}this.hLines={};for(var o in this.cells)for(var n in this.cells[o]){var r=this.cells[o][n];cc.isValid(r)&&r.destroy()}this.cells={}},t.prototype.fill=function(){var e=this.context.cellSize||10,t=this.context.grid,o=t._calcBounds(),n=o[0],r=o[1],i=o[2],s=o[3],l=i-n+1,c=r-s+1;if(this.context.bLineEnabled){for(var u=n;u<=i+1;u++){var d=this.vLines[u];if(cc.isValid(d)&&d.__grid_height!=c&&(d.destroy(),d=null,this.vLines[u]=null),null==d){var p=void 0;p=0==u?cc.color(255,255,0,63):cc.color(255,255,255,31),(d=new a.default(p)).parent=this,d.setContentSize(1,c*e),d.setAnchorPoint(.5,0),d.setPosition(u*e,s*e),d.__grid_height=c,this.vLines[u]=d}}for(var h=s;h<=r+1;h++){d=this.hLines[h];if(cc.isValid(d)&&d.__grid_width!=l&&(d.destroy(),d=null,this.hLines[h]=null),null==d){p=void 0;p=0==h?cc.color(255,255,0,63):cc.color(255,255,255,31),(d=new a.default(p)).parent=this,d.setContentSize(l*e,1),d.setAnchorPoint(0,.5),d.setPosition(n*e,h*e),d.__grid_width=l,this.hLines[h]=d}}}var f=this.context.markedValue,g=this.cells,m=t.rows;for(var _ in m){var v=m[h=parseInt(_)],y=g[h]||[];g[h]=y;for(var C in v){var S=y[u=parseInt(C)];if(v[u]==f){if(null==S){p=this.context.color;(S=new a.default(this.context.color)).parent=this,S.setContentSize(e,e),S.setPosition(u*e,h*e),S.setAnchorPoint(0,0),y[u]=S}}else null!=S&&(cc.isValid(S)&&S.destroy(),y[u]=null)}}for(var _ in g){y=g[h=parseInt(_)];for(var C in y){S=y[u=parseInt(C)];t.getValue(u,h)!=f&&(cc.isValid(S)&&S.destroy(),y[u]=null)}}},t.prototype.convertToGridSpace=function(e){var t=this.convertToNodeSpace(e),o=this.context.cellSize,n=Math.floor(t.x/o),r=Math.floor(t.y/o);return cc.v2(n,r)},t=r([l],t)}(i.default));o.default=c,cc._RF.pop()},{"../../game/view/node/LayerColor":"LayerColor","./ViewBase":"ViewBase"}],DebugMenu:[function(e,t,o){"use strict";cc._RF.push(t,"c2312XTyQZI+6yxGda96ndc","DebugMenu");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../game/view/node/LayerColor"),i=e("../utils/Tools"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(t,o,n,r){void 0===r&&(r=4);var s=e.call(this)||this,l=o+2*r,c=n*t.length+r*(t.length+1),u=new a.default(cc.color(63,63,63,191));u.parent=s,u.setContentSize(l,c),u.setAnchorPoint(0,1);for(var d=-r,p=function(e){var s=t[e],l=s[0],c=s[1],p=new a.default(cc.color(0,0,0,63));p.parent=u,p.setContentSize(o,n),p.x=r+o/2,p.y=d-e*(r+n)-n/2;var h=new cc.Node;h.parent=p;var f=h.addComponent(cc.Label);f.fontSize=20,f.string=l,f.verticalAlign=cc.Label.VerticalAlign.CENTER,i.default.registerTouchHandler(p,function(e){"began"==e.name?h.color=cc.color(0,255,0):"ended"==e.name&&(h.color=cc.color(255,255,255),c())})},h=0;h<t.length;h++)p(h);return s}return n(t,e),t=r([l],t)}(cc.Node));o.default=c,cc._RF.pop()},{"../../game/view/node/LayerColor":"LayerColor","../utils/Tools":"Tools"}],DebugMouseControlNode:[function(e,t,o){"use strict";cc._RF.push(t,"bfaedijI1JElr+wGeM26gAa","DebugMouseControlNode");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,s=(a.property,cc.Event.EventMouse.BUTTON_RIGHT),l=cc.Event.EventMouse.BUTTON_MIDDLE,c=function(e){function t(){var t=e.call(this)||this;return t.registerEvents(),t}return n(t,e),t.prototype.cleanup=function(){this._listener&&cc.eventManager.removeListener(this._listener)},t.prototype.registerEvents=function(){this.mousePressd={},this.registerMouseListener()},t.prototype.registerMouseListener=function(){var e=this,t=cc.EventListener.create({event:cc.EventListener.MOUSE,onMouseUp:function(t){t.name="up",e.onMouseHandler(t)},onMouseMove:function(t){t.name="move",e.onMouseHandler(t)},onMouseDown:function(t){t.name="down",e.onMouseHandler(t)},onMouseScroll:function(t){t.name="scroll",e.onMouseHandler(t)}});cc.eventManager.addListener(t,this)},t.prototype.onCameraTranslation=function(e,t){this.bPressedCtrl&&(e*=.1,t*=.1);var o=this.x,n=this.y;this.setPosition(o+e,n+t)},t.prototype.onCameraZoom=function(e,t,o){e=Tools.clampf(e,-1,1),cc.sys.isBrowser&&(e*=-1),this.bPressedCtrl&&(e*=.1);var n=this.convertToNodeSpace(cc.v2(t,o)),r=this.scale;this.scale=Math.max(.5,r+.5*-e);var a=this.convertToWorldSpace(n),i=this.x,s=this.y;this.setPosition(i+(t-a.x),s+(o-a.y))},t.prototype.onMouseHandler=function(e){var t=e.getButton(),o=e.getLocation(),n=(e.getScrollX(),e.getScrollY());switch(e.name){case"down":this.mousePressd[t]=!0;break;case"move":this.mousePressd[s]&&this.onCameraTranslation(e.getDeltaX(),e.getDeltaY());break;case"up":this.mousePressd[t]=!1,t==l&&(this.setPosition(0,0),this.scale=1);break;case"scroll":this.onCameraZoom(n,o.x,o.y)}},t=r([i],t)}(cc.Node);o.default=c,cc._RF.pop()},{}],DialogBase:[function(e,t,o){"use strict";cc._RF.push(t,"1142doFnitPdpYq8C742uzP","DialogBase");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../game/manager/mgrDirector"),l=e("../../game/view/node/LayerColor"),c=e("../utils/Tools"),u=e("./ViewBase"),d=e("../../game/Const"),p=cc._decorator.ccclass,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bClosing=!1,t.DEFAULT_SHADOW_OPACITY=190,t.bClickShadowClose=!0,t.bOpenCompleted=!1,t}var o;return n(t,e),o=t,t.hasDialogExists=function(){return this.GLOBAL_DIALOG_COUNT>0},t.getDialogReferenceCount=function(e){return this.GOLBAL_DIALOG_NAME_DICT[ul.format("dialog/%s",e)]||0},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),o.GLOBAL_DIALOG_COUNT++;var t=this._getResourceName();t&&(cc.log("----dialog open name=",t),o.GOLBAL_DIALOG_NAME_DICT[t]=Math.max(o.GOLBAL_DIALOG_NAME_DICT[t]||0,0),o.GOLBAL_DIALOG_NAME_DICT[t]+=1),this.sendMsg("MSG_ONLOAD_DIALOG",{dialogName:t,dialog:this})},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),o.GLOBAL_DIALOG_COUNT--;var t=this._getResourceName();t&&(o.GOLBAL_DIALOG_NAME_DICT[t]=o.GOLBAL_DIALOG_NAME_DICT[t]||0,o.GOLBAL_DIALOG_NAME_DICT[t]=Math.max(0,o.GOLBAL_DIALOG_NAME_DICT[t]-1)),this.sendMsg("MSG_DESTROY_DIALOG",{dialogName:t})},t.prototype._onOpenDialogCompleted=function(){this.onOpenDialogCompleted(),this.bOpenCompleted=!0},t.prototype.onOpenDialogCompleted=function(){},t.prototype.onCloseDialogStart=function(){},t.prototype.openDialog=function(e){return void 0===e&&(e=!1),a(this,void 0,void 0,function(){var t,n,r,a=this;return i(this,function(i){return t=cc.director.getScene(),n=t.getChildByName("Canvas"),this.nodeRoot=new cc.Node,this.nodeRoot.parent=n,this.nodeRoot.zIndex=this.context.globalDialogzIndex||d.default.GLOBAL_ORDER_DIALOG,this.parent=this.nodeRoot,this.isShadowEnabled()&&((r=new l.default(cc.color(0,0,0,255))).opacity=this.getShadowOpacity(),r.setContentSize(cc.size(cc.winSize.width,cc.winSize.height+600)),r.zIndex=-1,r.parent=this.nodeRoot,r.active=!1,c.default.registerTouchHandler(r,this.onTouchLayerShadow.bind(this),!0),this.layerShadow=r),e=e||this.context.bImmediately,this.waitLoadingFinished(function(){if(e){if(!a.isResourceLoaded())return;a.layerShadow&&(a.layerShadow.active=!0),a._onOpenDialogCompleted()}else{if(a.layerShadow&&(a.layerShadow.active=!0,a.layerShadow.opacity=0,a.layerShadow.runAction(cc.fadeTo(.3,a.getShadowOpacity())).setTag(o.ACTION_TAG_OPEN)),!a.isResourceLoaded())return void a.closeDialog(!0);if(a.bClosing)return;var t=a.getComponent(cc.Animation);if(cc.isValid(t)){var n=t.play("defaultDialogOpen");n.speed=n.duration/.3,t.on("finished",function(){a._onOpenDialogCompleted(),t.targetOff(a)},a),t.setCurrentTime(1/60)}else a.scale=.5,a.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBackOut()),cc.callFunc(a._onOpenDialogCompleted.bind(a)))).setTag(o.ACTION_TAG_OPEN)}a.sendMsg("MSG_GUIDE_POINT",{id:"DialogBase.openDialog"})}),[2]})})},t.prototype.closeDialog=function(e,t){return void 0===e&&(e=!1),a(this,void 0,void 0,function(){var o=this;return i(this,function(n){return this.bClosing?[2]:(this.bClosing=!0,t?s.default.playFadeOut(function(){o.closeDialogEx(e)}):this.closeDialogEx(e),[2])})})},t.prototype.closeDialogEx=function(e){return a(this,void 0,void 0,function(){var t,n=this;return i(this,function(r){return this.sendMsg("MSG_GUIDE_POINT",{id:"DialogBase.closeDialog"}),this.onCloseDialogStart(),this.context.fOnDialogClose&&"function"==typeof this.context.fOnDialogClose&&this.context.fOnDialogClose(),cc.isValid(this.layerShadow)&&(c.default.unregisterTouchHandler(this.layerShadow),this.layerShadow.stopActionByTag(o.ACTION_TAG_OPEN)),this.stopActionByTag(o.ACTION_TAG_OPEN),cc.isValid(this.nodeRoot)&&(e?this.nodeRoot.destroy():(t=.2,this.layerShadow&&this.layerShadow.runAction(cc.fadeOut(t)).setTag(o.ACTION_TAG_CLOSE),this.runAction(cc.spawn(cc.scaleTo(t,1.2,0).easing(cc.easeBackIn()),cc.sequence(cc.delayTime(.7*t),cc.fadeOut(.4*t).easing(cc.easeOut(2)),cc.callFunc(function(){n.nodeRoot.destroy()})))).setTag(o.ACTION_TAG_CLOSE))),[2]})})},t.prototype.openedAsView=function(){this._onOpenDialogCompleted(),this.sendMsg("MSG_GUIDE_POINT",{id:"DialogBase.openDialog"})},t.prototype.closedAsView=function(){this.sendMsg("MSG_GUIDE_POINT",{id:"DialogBase.closeDialog"}),this.context.fOnDialogClose&&"function"==typeof this.context.fOnDialogClose&&this.context.fOnDialogClose()},t.prototype.isShadowEnabled=function(){return!0},t.prototype.setShadowOpacity=function(e){this.layerShadow&&(this.layerShadow.opacity=e||0),this.DEFAULT_SHADOW_OPACITY=e||0},t.prototype.getShadowOpacity=function(){return this.DEFAULT_SHADOW_OPACITY},t.prototype.isClickShadowClose=function(){return this.bClickShadowClose},t.prototype.setClickShadowClose=function(e){this.bClickShadowClose=e},t.prototype.playOpenDialogSound=function(){},t.prototype.isOpenCompleted=function(){return this.bOpenCompleted},t.prototype.onTouchLayerShadow=function(e){e.isClick()&&this.bOpenCompleted&&this.isClickShadowClose()&&this.closeDialog()},t.GLOBAL_DIALOG_COUNT=0,t.GOLBAL_DIALOG_NAME_DICT={},t.ACTION_TAG_OPEN=1,t.ACTION_TAG_CLOSE=2,r([u.default.requireResourceLoaded],t.prototype,"_onOpenDialogCompleted",null),t=o=r([p],t)}(u.default);o.default=h,cc._RF.pop()},{"../../game/Const":"Const","../../game/manager/mgrDirector":"mgrDirector","../../game/view/node/LayerColor":"LayerColor","../utils/Tools":"Tools","./ViewBase":"ViewBase"}],DraggableNode:[function(e,t,o){"use strict";cc._RF.push(t,"055b5En361AMbJtzX11xnEo","DraggableNode");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../game/manager/mgrDirector"),i=e("../utils/Tools"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(t){var o=e.call(this)||this;return o.minX=0,o.minY=0,o.maxX=0,o.maxY=0,o.minScale=1,o.maxScale=1,o.displayWidth=null,o.displayHeight=null,o._touchingPoints=[],o._touchingIds=[],o.bBanMouseEvent=!1,o.setAnchorPoint(0,0),t||(o.registerMouseListener(),i.default.registerTouchHandler(o,o.onTouchHandler.bind(o),!0)),o}return n(t,e),t.prototype.registerMouseListener=function(){var e=this,t=cc.EventListener.create({event:cc.EventListener.MOUSE,onMouseUp:function(e){},onMouseMove:function(e){},onMouseDown:function(e){},onMouseScroll:function(t){t.name="scroll";var o=t.getLocation(),n=t.getScrollY(),r=i.default.clampf(n,-.2,.2);cc.sys.isBrowser&&(r*=-1),e.zoomTo(e.scale-r,o.x,o.y)}});cc.eventManager.addListener(t,this)},t.prototype._updateCameraBound=function(){var e=this.scale,t=this.displayWidth||a.default.width,o=this.displayHeight||a.default.height;this.minX=t-this.width*e,this.minY=o-this.height*e,this.minScale=Math.max(t/this.width,o/this.height)},t.prototype.onTouchHandler=function(e){var t=this._touchingIds,o=this._touchingPoints,n=e.getID()||0,r=t.indexOf(n);if("began"==e.name){if(r>=0)return;t.push(n),o.push(e.getLocation()),r=t.length-1}else if("moved"==e.name){if(r<0)return;if(o[r]=e.getLocation(),1==t.length)this.moveTo(this.x+e.getDeltaX(),this.y+e.getDeltaY());else if(t.length>=2){var a=o[0],s=o[1],l=i.default.pDistance(a,s),c=this._touchScaleCenterPoint,u=this._touchScaleLastDistance;null==c&&(c=cc.v2((a.x+s.x)/2,(a.y+s.y)/2),this._touchScaleCenterPoint=c,u=l,this._touchScaleLastDistance=u);var d=l/u;this.zoomTo(this.scale*d,c.x,c.y),this._touchScaleLastDistance=l}}else{if(r<0)return;o.splice(r,1),t.splice(r,1),t.length<=1&&(this._touchScaleCenterPoint=null,this._touchScaleLastDistance=null)}0==r&&this.firstTouchHandler&&this.firstTouchHandler(e)},t.prototype.setMaxScale=function(e){this.maxScale=e,this._updateCameraBound()},t.prototype.getMaxScale=function(){return this.maxScale},t.prototype.getMinScale=function(){return this.minScale},t.prototype.setOnZoomChangedCallback=function(e){this.fOnZoomChanged=e},t.prototype.zoomTo=function(e,t,o,n){var r=this.convertToNodeSpace(cc.v2(t,o));this.scale=i.default.clampf(e,this.minScale,this.maxScale);var a=this.convertToWorldSpace(r);this._updateCameraBound(),this.moveTo(this.x+(t-a.x),this.y+(o-a.y)),n||"function"!=typeof this.fOnZoomChanged||this.fOnZoomChanged(this.scale)},t.prototype.zoomToRect=function(e,t,o,n,r){null==t&&(t=0);var s=e.x-t,l=e.y-t,c=e.width+2*t,u=e.height+2*t;o=o||this.displayWidth||a.default.width,n=n||this.displayHeight||a.default.height;var d=Math.min(o/c,n/u);d=i.default.clampf(d,this.minScale,this.maxScale),this.scale=d,this._updateCameraBound(),this.moveTo(-s*d+(o-c*d)/2,-l*d+(n-u*d)/2),r||"function"!=typeof this.fOnZoomChanged||this.fOnZoomChanged(this.scale)},t.prototype.moveTo=function(e,t){e=i.default.clampf(e,this.minX,this.maxX),t=i.default.clampf(t,this.minY,this.maxY),this.setPosition(e,t)},t.prototype.setContentSize=function(t,o){e.prototype.setContentSize.call(this,t,o),this._updateCameraBound(),this.moveTo(this.x,this.y)},t.prototype.setDisplaySize=function(e,t){e instanceof cc.Size&&(t=e.height,e=e.width),this.displayWidth=e,this.displayHeight=t,this._updateCameraBound()},t.prototype.setFirstTouchHandler=function(e){this.firstTouchHandler=e},t=r([l],t)}(cc.Node));o.default=c,cc._RF.pop()},{"../../game/manager/mgrDirector":"mgrDirector","../utils/Tools":"Tools"}],EventTouchEx:[function(e,t,o){"use strict";cc._RF.push(t,"c5c052Cml9LpJLJJGhORhUX","EventTouchEx");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,s=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.CLICK_RANGE_SQ=400,t.name="",t}return n(t,e),t.prototype.isClick=function(){return!1},t=r([i],t)}(cc.Event.EventTouch));o.default=s;cc.Event.EventTouch.prototype.isClick=function(){if("ended"!=this.name&&"cancelled"!=this.name)return!1;var e=this.getStartLocation(),t=this.getLocation();return function(e,t,o,n){o||(o=0),n||(n=0);var r=o-e,a=n-t;return r*r+a*a}(e.x,e.y,t.x,t.y)<=400},cc._RF.pop()},{}],FSMDialogBase:[function(e,t,o){"use strict";cc._RF.push(t,"866ab7ZAidDipAubYkti7rH","FSMDialogBase");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../utils/FSMObject"),i=e("./DialogBase"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this._fsmObject=new a.FSMObject,e.prototype.onLoad.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this._fsmObject&&this._fsmObject.update(t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fsmObject&&this._fsmObject.destroy()},t.prototype.getState=function(){return this._fsmObject.getState()},t.prototype.setNextState=function(e){this._fsmObject.setNextState(e)},t.prototype.removeState=function(e){this._fsmObject.removeState(e)},t.prototype.registerState=function(e,t,o,n){var r=null,a=null,i=null;t&&(r=this[t])&&(r=r.bind(this)),o&&(a=this[o])&&(a=a.bind(this)),n&&(i=this[n])&&(i=i.bind(this)),this._fsmObject.registerState(e,r,a,i)},t=r([l],t)}(i.default));o.default=c,cc._RF.pop()},{"../utils/FSMObject":"FSMObject","./DialogBase":"DialogBase"}],FSMObject:[function(e,t,o){"use strict";cc._RF.push(t,"78340ZFwntCqJb7oj6CQ375","FSMObject");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,i=(r.property,-1),s=function(){function e(){var e;this._currentStateID=i,this._nextStateID=i,this._states=((e={})[i]={leave:null,execute:null,enter:null},e)}return e.prototype.registerState=function(e,t,o,n){void 0===t&&(t=null),void 0===o&&(o=null),void 0===n&&(n=null),this._states[e],this._states[e]={enter:t,execute:o,leave:n}},e.prototype.removeState=function(e){this._states[e]=null},e.prototype.update=function(e){if(null!=this._nextStateID){var t=this._states[this._currentStateID].leave;t&&t(),this._currentStateID=this._nextStateID,this._nextStateID=null;var o=this._states[this._currentStateID].enter;if(o&&(o(),this._nextStateID))return this.update(e)}if(this._states){var n=this._states[this._currentStateID].execute;n&&n(e)}},e.prototype.setNextState=function(e){this._nextStateID=e},e.prototype.getState=function(){return this._currentStateID},e.prototype.destroy=function(){this._states=null},e=n([a],e)}();o.FSMObject=s,cc._RF.pop()},{}],Grid:[function(e,t,o){"use strict";cc._RF.push(t,"81eb77dLSlPtKUuefQqldev","Grid");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,i=(r.property,function(){function e(){this.rows={}}var t;return t=e,e.prototype.contructor=function(){},e.prototype._calcBounds=function(){var e=1e6,t=-1e6,o=-1e6,n=1e6,r=this.rows;for(var a in r){var i=r[a],s=parseInt(a);s<n&&(n=s),o<s&&(o=s);for(var l in i){var c=parseInt(l);c<e&&(e=c),t<c&&(t=c)}}return e>=1e6&&(e=0,o=-1,t=-1,n=0),[e,o,t,n]},e.prototype.clear=function(){this.rows={}},e.prototype.setValue=function(e,t,o){void 0===o&&(o=null);var n=!1,r=this.rows,a=r[t];return a||(a={},r[t]=a),a[e]!=o&&(n=!0),a[e]=o,n},e.prototype.removeRos=function(e){this.rows[e]=null},e.prototype.getValue=function(e,t){var o=this.rows[t];return null==o?null:o[e]},e.prototype.calcNums=function(e){var t=0,o=this.rows;for(var n in o){var r=o[n];for(var a in r){r[a]==e&&t++}}return t},e.prototype.calcIntersectionNums=function(e,t){var o=0;for(var n in this.rows){var r=this.rows[n],a=e.rows[n];if(a)for(var i in r){r[i]==t&&a[i]==t&&(o+=1)}}return o},e.prototype.calcCenterPoint=function(){var e=this._calcBounds(),t=e[0],o=e[1];return[(t+e[2])/2,(o+e[3])/2]},e.prototype.mergeGrid=function(e,t){var o=e.rows;for(var n in o){var r=parseInt(n),a=o[r];for(var i in a){var s=parseInt(i),l=a[s];l==t&&this.getValue(s,r)!=t&&this.setValue(s,r,l)}}},e.prototype.debugDump=function(e){var t=this._calcBounds(),o=t[0],n=t[1],r=t[2],a=t[3];if(!(r<o)){for(var i="",s=this.rows,l=n;l>=a;l--){l!=n&&(i+="\n");var c=s[l];if(null!=c)for(var u=o;u<=r;u++){i+=c[u]==e?"1":"0"}}cc.log(i)}},e.prototype.serializeToText=function(e){var t="",o=this._calcBounds(),n=o[0],r=o[1],a=o[2],i=o[3];t+=n,t+="|",t+=i,t+="|",t+=a-n+1,t+="|";for(var s=this.rows,l=i;l<=r;l++)for(var c=s[l]||[],u=n;u<=a;u++){t+=c[u]==e?"1":"0"}return t},e.prototype.fillBySerializeText=function(e,t){void 0===t&&(t=!0);this.rows;var o=e.split("|");if(!(o.length<4)){var n=parseInt(o[0])||0,r=parseInt(o[1])||0,a=parseInt(o[2])||0,i=o[3],s=Math.floor(i.length/a);if(a*s==i.length)for(var l=0;l<s;l++)for(var c=r+l,u=0;u<a;u++){var d=n+u,p=l*a+u;"1"==i.charAt(p)&&this.setValue(d,c,t)}}},e.prototype.trim=function(e){var o=new t,n=this.rows;for(var r in n){var a=parseInt(r),i=n[a];for(var s in i){var l=parseInt(s),c=i[l];c==e&&o.setValue(l,a,c)}}return o},e.prototype.hSplit=function(e){var o=new t,n=new t;for(var r in this.rows){var a=this.rows[r];for(var i in a){var s=a[i],l=parseInt(i);s==e&&(l<0?o.setValue(l,r,s):n.setValue(l,r,s))}}return[o,n]},e=t=n([a],e)}());o.default=i,cc._RF.pop()},{}],IAsyncMonitor:[function(e,t,o){"use strict";cc._RF.push(t,"b923dIJYh1LhIjnVoM+83Xu","IAsyncMonitor"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IMCPanel:[function(e,t,o){"use strict";cc._RF.push(t,"ad7f8tLcmpFt4BRlOOhAIDi","IMCPanel"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IReuseLayouter:[function(e,t,o){"use strict";cc._RF.push(t,"b30d6M0rXJDLLQUbIdDTyu1","IReuseLayouter"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],ISyncMonitor:[function(e,t,o){"use strict";cc._RF.push(t,"b8c8eD+WxRIZ6tKOgGSq32q","ISyncMonitor"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],LabelEx:[function(e,t,o){"use strict";cc._RF.push(t,"89fb6G7vHhAX6x85UI7lkXb","LabelEx"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../game/manager/mgrI18n");cc.sys.isNative,cc.Label.prototype.setLocalizedString=function(e){n.default.trySetLocalizedString(this,e)},cc._RF.pop()},{"../../game/manager/mgrI18n":"mgrI18n"}],LabelShadow:[function(e,t,o){"use strict";cc._RF.push(t,"870ac8JwCNFwYk0JijsHfEE","LabelShadow");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,s=a.property,l=a.disallowMultiple,c=a.executionOrder,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shadowColor=cc.color(127,127,127,255),t.shadowOffset=cc.v2(2,-2),t.shadowLabel=null,t}return n(t,e),t.prototype.setColorEx=function(e){this.shadowColor=e},t.prototype.setOffset=function(e){this.shadowOffset=e},r([s({tooltip:"Shadow Color"})],t.prototype,"shadowColor",void 0),r([s({tooltip:"Shadow Offset"})],t.prototype,"shadowOffset",void 0),t=r([i,c(100),l],t)}(cc.Component);o.LabelShadow=u,cc._RF.pop()},{}],LanguageData:[function(e,t,o){"use strict";cc._RF.push(t,"df8b5uA0+FN+bQ1PEWSFhc2","LanguageData");var n=e("polyglot.min"),r=null;function a(e){return cc.log("i18n.loadLanguageData",e),window.i18n.languages[e]}function i(e){cc.log("initPolyglot",e),e&&(r?r.replace(e):r=new n({phrases:e,allowMissing:!0}))}window.i18n||(window.i18n={languages:{},curLang:""}),t.exports={init:function(e){if(e!==window.i18n.curLang){cc.log("i18n.init",e);var t=a(e)||{};window.i18n.curLang=e,cc.log("window.i18n.curLang",window.i18n.curLang),i(t),this.inst=r}},t:function(e,t){if(r)return r.t(e,t)},getCurLang:function(){if(window.i18n.curLang)return window.i18n.curLang},inst:r,updateSceneRenderers:function(){var e=cc.director.getScene();if(cc.isValid(e)){var t=e.children;if(cc.isValid(t)){for(var o=[],n=0;n<t.length;++n){var r=t[n].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(o,r)}for(var a=0;a<o.length;++a){var i=o[a];i.node.active&&i.updateLabel()}for(var s=[],l=0;l<t.length;++l){var c=t[l].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(s,c)}for(var u=0;u<s.length;++u){var d=s[u];d.node.active&&d.updateSprite(window.i18n.curLang)}for(var p=[],h=0;h<t.length;++h){var f=t[h].getComponentsInChildren("LocalizedSpriteFixedUrl");Array.prototype.push.apply(p,f)}for(var g=0;g<p.length;++g){var m=p[g];m.node.active&&m.updateSprite(window.i18n.curLang)}}}}},cc._RF.pop()},{"polyglot.min":"polyglot.min"}],LayerColor:[function(e,t,o){"use strict";cc._RF.push(t,"873b0q956ZAkKnKGDJtd2z0","LayerColor");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../manager/mgrDirector"),i=cc._decorator.ccclass,s=function(e){function t(t){var o=e.call(this)||this,n=new cc.Node;n.parent=o;var r=t.getA();t.setA(255),n.color=t,n.opacity=r,t.setA(r),o.nodeSprite=n;var i=n.addComponent(cc.Sprite);return i.sizeMode=cc.Sprite.SizeMode.CUSTOM,a.default.loadRes("2d/default/white_dot",cc.SpriteFrame,function(e,t){if(!e&&cc.isValid(n)&&cc.isValid(i)){var o=n.getContentSize();i.spriteFrame=t,n.setContentSize(o)}}),o}return n(t,e),t.prototype.setContentSize=function(t,o){e.prototype.setContentSize.call(this,t,o),this.nodeSprite.setContentSize(t,o)},t.prototype.setAnchorPoint=function(t,o){e.prototype.setAnchorPoint.call(this,t,o),this.nodeSprite.setAnchorPoint(t,o)},Object.defineProperty(t.prototype,"color",{get:function(){return this.nodeSprite.color},set:function(e){this._color=e,this.nodeSprite.color=e},enumerable:!0,configurable:!0}),t=r([i],t)}(cc.Node);o.default=s,cc._RF.pop()},{"../../manager/mgrDirector":"mgrDirector"}],LifeCycleMonitor:[function(e,t,o){"use strict";cc._RF.push(t,"20ed8Gu2q1A3quCZsuyhsNt","LifeCycleMonitor");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,s=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fOnLoad=null,t.fStart=null,t.fUpdate=null,t.fOnDestroy=null,t}return n(t,e),t.prototype.onLoad=function(){this.fOnLoad&&this.fOnLoad()},t.prototype.start=function(){this.fStart&&this.fStart()},t.prototype.update=function(e){this.fUpdate&&this.fUpdate(e)},t.prototype.onDestroy=function(){this.fOnDestroy&&this.fOnDestroy()},t.prototype.setOnLoadCallback=function(e){this.fOnLoad=e},t.prototype.setUpdateCallback=function(e){this.fUpdate=e},t.prototype.setStartCallback=function(e){this.fStart=e},t.prototype.setOnDestroyCallback=function(e){this.fOnDestroy=e},t=r([i],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],ListView:[function(e,t,o){"use strict";cc._RF.push(t,"de416fK96pDm40hAG+p8WdJ","ListView");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./LayerColor"),i=e("../../../ulframework/utils/Tools"),s=cc._decorator.ccclass,l=function(e){function t(){var t=e.call(this)||this;return t.cells=[],t.bInit=!1,t.bDebugLineEnabled=!1,t.bClippingEnabled=!0,t.bElasticEnabled=!0,t.bOnTouchEvent=!0,t.bHorzontal=!1,t.bVertical=!1,t.wGap=0,t.hGap=0,t}return n(t,e),t.prototype.init=function(){if(this.bInit=!0,this.bDebugLineEnabled){var e=new a.default(cc.color(255,255,0,63));e.parent=this,e.zIndex=-1,e.setContentSize(this.getContentSize()),e.setAnchorPoint(this.getAnchorPoint())}var t=new cc.Node;t.setAnchorPoint(0,1),t.parent=this,this.nodeContainer=t;var o=this.addComponent(cc.ScrollView);if(o.horizontal=this.bHorzontal,o.vertical=this.bVertical,o.content=t,o.cancelInnerEvents=!1,o.elastic=this.bElasticEnabled,this.bClippingEnabled)this.addComponent(cc.Mask);this.on("scrolling",this.onScrolling,this),0==this.bOnTouchEvent&&i.default.unregisterTouchHandler(this)},t.prototype.refreshList=function(){this.bInit||this.init();var e=this.getContentSize(),t=this.getContainerSize(),o=Math.max(e.width,t.width),n=Math.max(e.height,t.height),r=this.getComponent(cc.ScrollView),a=r.getScrollOffset();this.nodeContainer.setContentSize(o,n),r.scrollToOffset(a),this.layoutItems(),this.onContainerMoved(),0==this.bOnTouchEvent&&i.default.unregisterTouchHandler(this)},t.prototype._calcPercentPos=function(e,t){var o=this.getContentSize(),n=this.nodeContainer.getContentSize(),r=e/(n.width-o.width),a=t/(n.height-o.height);return a=1-a,r=i.default.clampf(r,0,1),a=i.default.clampf(a,0,1),cc.v2(r,a)},t.prototype.layoutItems=function(){this.getContentSize();var e=this.nodeContainer.getContentSize(),t=this.cells.length,o=0,n=0;if(this.bHorzontal)for(var r=0;r<t;r++){var a=this.cells[r];o+=0!=r?this.wGap:a.width/2,n=-e.height/2,a.parent=this.nodeContainer,a.setAnchorPoint(.5,.5),a.position=cc.v2(o,n),o+=a.width}else for(r=0;r<t;r++){a=this.cells[r];0!=r?n-=this.hGap:n=-a.height/2,o=e.width/2,a.parent=this.nodeContainer,a.setAnchorPoint(.5,.5),a.position=cc.v2(o,n),n-=a.height}},t.prototype.setDebugLineEnabled=function(e){return this.bDebugLineEnabled=e,this},t.prototype.setClippingEnabled=function(e){return this.bClippingEnabled=e,this},t.prototype.setElasticEnabled=function(e){return this.bElasticEnabled=e,this},t.prototype.setOnContainerMoved=function(e){return this.fOnContainerMoved=e,this},t.prototype.getScrollOffset=function(){var e=this.getComponent(cc.ScrollView);return e?e.getScrollOffset():cc.v2(0,0)},t.prototype.setScrollOffset=function(e){var t=this.getComponent(cc.ScrollView);t&&t.scrollToOffset(e)},t.prototype.getContainerSize=function(){var e=this.cells.length,t=0,o=0;if(this.bHorzontal)for(var n=0;n<e;n++){t+=(r=this.cells[n]).width,o=Math.max(o,r.height),n!=e-1&&(t+=this.wGap)}else for(n=0;n<e;n++){var r=this.cells[n];t=Math.max(t,r.width),o+=r.height,n!=e-1&&(o+=this.hGap)}return cc.size(t,o)},t.prototype.setDirection=function(e){return void 0===e&&(e=!1),this.bHorzontal=e,this.bVertical=!e,this},t.prototype.setGaps=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),this.wGap=e,this.hGap=t,this},t.prototype.getGaps=function(){return[this.wGap,this.hGap]},t.prototype.pushItem=function(e){this.insertItem(e,this.cells.length)},t.prototype.insertItem=function(e,t){t=i.default.clampf(t,0,this.cells.length),this.cells.splice(t,0,e),this.refreshList()},t.prototype.getAllItems=function(){return this.cells},t.prototype.getItemByIndex=function(e){return this.cells[e]},t.prototype.removeItemByIndex=function(e){var t=this.cells[e];t&&(this.cells.splice(e,1),t.destroy(),this.refreshList())},t.prototype.removeAllItems=function(){for(var e=this.cells.length-1;e>=0;e--){var t=this.cells[e];t&&(this.cells.splice(e,1),t.destroy())}this.refreshList()},t.prototype.jumpToHead=function(){this.scrollToHead(0,!1)},t.prototype.jumpToTail=function(){this.scrollToTail(0,!1)},t.prototype.jumpToIndex=function(e,t){this.scrollToIndex(e,t,0,!1)},t.prototype.scrollToHead=function(e,t){void 0===e&&(e=.3),void 0===t&&(t=!0);var o=this.getComponent(cc.ScrollView);o.vertical&&o.horizontal?o.scrollToTopLeft(e,t):o.vertical?o.scrollToTop(e,t):o.horizontal&&o.scrollToLeft(e,t),e<=0&&this.onContainerMoved()},t.prototype.scrollToTail=function(e,t){void 0===e&&(e=.3),void 0===t&&(t=!0);var o=this.getComponent(cc.ScrollView);o.vertical&&o.horizontal?o.scrollToBottomRight(e,t):o.vertical?o.scrollToBottom(e,t):o.horizontal&&o.scrollToRight(e,t),e<=0&&this.onContainerMoved()},t.prototype.scrollToIndex=function(e,t,o,n){void 0===o&&(o=.3),void 0===n&&(n=!0);var r=this.getComponent(cc.ScrollView),a=this.cells[e];if(a){var i=a.x,s=a.y,l=this._calcPercentPos(i,s);r.stopAutoScroll(),r.scrollTo(l,o,n),this.onContainerMoved()}},t.prototype.closeTouchEvent=function(){this.bOnTouchEvent=!1},t.prototype.onContainerMoved=function(e){this.fOnContainerMoved&&this.fOnContainerMoved(e)},t.prototype.onScrolling=function(e){this.onContainerMoved(e)},t=r([s],t)}(cc.Node);o.default=l,cc._RF.pop()},{"../../../ulframework/utils/Tools":"Tools","./LayerColor":"LayerColor"}],LoadingTask:[function(e,t,o){"use strict";cc._RF.push(t,"859224YtodA6ILvctErU85S","LoadingTask"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Tools"),r=1,a=function(){function e(e,t){this.name="no name",this.bMultithreading=!1,this.state=r,this.fRunCallback=null,this.fCompletedCallback=null,this.beginTime=0,this.name=e,this.fRunCallback=t}return e.prototype.enableMultithreading=function(){this.bMultithreading=!0},e.prototype.setCompletedCallback=function(e){this.fCompletedCallback=e},e.prototype.run=function(){this.beginTime=n.default.time(),this.state=2;try{this.fRunCallback(this)}catch(e){console.log("LoadingTask has error!",e?e.message:"unknown"),this.triggerCompleted()}},e.prototype.triggerCompleted=function(){this.state=3;var e=n.default.time()-this.beginTime;this.fCompletedCallback&&this.fCompletedCallback(e)},e.prototype.isPending=function(){return this.state==r},e.prototype.isRunning=function(){return 2==this.state},e.prototype.isCompleted=function(){return 3==this.state},e}();o.LoadingTask=a,cc._RF.pop()},{"./Tools":"Tools"}],LocalizedLabel:[function(e,t,o){"use strict";cc._RF.push(t,"bff66OChC9Clq8DEwYeCv4+","LocalizedLabel");var n=e("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(e){this._dataID!==e&&(this._dataID=e,this.updateLabel())}},_dataID:""},onLoad:function(){n.inst||n.init(),this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Label);if(e)return this.label=e,void this.updateLabel()},updateLabel:function(){this.label?n.t(this.dataID)&&(this.label.string=n.t(this.dataID)):cc.error("Failed to update localized label, label component is invalid!")}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSpriteFixedUrl:[function(e,t,o){"use strict";cc._RF.push(t,"0bc7drrJHREPoU80eCvo749","LocalizedSpriteFixedUrl");var n=e("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedSpriteFixedUrl"},properties:{dataID:{get:function(){return this._dataID},set:function(e){this._dataID!==e&&(this._dataID=e,this.updateSprite())}},_dataID:""},onLoad:function(){n.inst||n.init(),this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Sprite);if(e)return this.sprite=e,void this.updateSprite()},updateSprite:function(){if(this.sprite){var e=n.getCurLang();if(e){var t=this._dataID,o="i18n/"+e+"/"+t.replace(".","/");if(t&&o)this.sprite.loadSpriteFrame(o);else this.sprite.spriteFrame=null}}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSprite:[function(e,t,o){"use strict";cc._RF.push(t,"a20d8F9OdBJd5dT9RZMUQru","LocalizedSprite");var n=e("SpriteFrameSet");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,inspector:"packages://i18n/inspector/localized-sprite.js",menu:"i18n/LocalizedSprite"},properties:{spriteFrameSet:{default:[],type:n}},onLoad:function(){this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Sprite);if(e)return this.sprite=e,void this.updateSprite(window.i18n.curLang)},getSpriteFrameByLang:function(e){for(var t=0;t<this.spriteFrameSet.length;++t)if(this.spriteFrameSet[t].language===e)return this.spriteFrameSet[t].spriteFrame},updateSprite:function(e){if(this.sprite){var t=this.getSpriteFrameByLang(e);!t&&this.spriteFrameSet[0]&&(t=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=t}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{SpriteFrameSet:"SpriteFrameSet"}],MCConsts:[function(e,t,o){"use strict";cc._RF.push(t,"59da1GvC6lFgqPwqbY2jOIK","MCConsts"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.COP_CITY_ID_2_NAME={"":"\u5173\u95ed\u57ce\u5e02\u6a21\u62df"},e}();o.default=n,cc._RF.pop()},{}],MCItem:[function(e,t,o){"use strict";cc._RF.push(t,"998dc5/R0BL07Pw9RBhJ5/M","MCItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.initByData=function(e){this.type=e.type,this.type=e.type||"newLine",this.name=e.name||"",this.text=e.text||"",this.width=e.width||0,this.height=e.height||0,this.fOnClick=e.onClick,this.fOnTextChanged=e.onTextChanged},e.prototype.setText=function(e){this.text=e,this.fOnTextChanged instanceof Function&&this.fOnTextChanged(e)},e.prototype.triggerOnClick=function(){this.fOnClick instanceof Function&&this.fOnClick()},e}();o.default=n,cc._RF.pop()},{}],MCPanelCreator:[function(e,t,o){"use strict";cc._RF.push(t,"88159Kkhn5MMqSIiluYIXc8","MCPanelCreator");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("./MCItem"),a=e("../utils/ULTools"),i=e("../utils/ULTimer"),s=window.cc,l=function(){function e(){this.nodeReferenceRects={}}return e.prototype.getNodeCanvas=function(){if(!s)return ULSDK.console.warn("MCPanelCreator.getNodeCanvas \u672a\u68c0\u6d4b\u5230creator\u73af\u5883\uff01"),null;var e=s.director.getScene();if(!e)return ULSDK.console.warn("MCPanelCreator.getNodeCanvas scene not found!"),null;var t=e.getChildByName("Canvas");return t||(ULSDK.console.warn("MCPanelCreator.getNodeCanvas nodeCanvas not found!"),null)},e.prototype.addFillerSprite=function(e,t){var o=e.getContentSize(),n=e.addComponent(s.Sprite);n.sizeMode=s.Sprite.SizeMode.CUSTOM,n.type=s.Sprite.Type.SIMPLE,s.loader.loadRes("_ulsdk_ui/white_dot",s.SpriteFrame,function(t,r){t?ULSDK.console.warn("MCPanelCreator.addFillerSprite err!",t):(n.spriteFrame=r,e.setContentSize(o))}),e.color=t,e.opacity=t.getA()},e.prototype.registerTouchHandler=function(e,t,o,n,r){void 0===o&&(o=!1),void 0===n&&(n=!0),void 0===r&&(r=!1);var a=e;if(a&&t){a.on(s.Node.EventType.TOUCH_START,function(e){var r=e.getID()||0;return!(!o&&null!=a.__touch_id||(e.name="began",n&&e.stopPropagation(),a.__touch_id=r,t(e),0))},null,r),a.on(s.Node.EventType.TOUCH_MOVE,function(e){var n=e.getID()||0;(o||n==a.__touch_id)&&(e.name="moved",t(e))},null,r),a.on(s.Node.EventType.TOUCH_END,function(e){var n=e.getID()||0;(o||n==a.__touch_id)&&(e.name="ended",a.__touch_id=null,t(e))},null,r),a.on(s.Node.EventType.TOUCH_CANCEL,function(e){var n=e.getID()||0;(o||n==a.__touch_id)&&(e.name="cancelled",a.__touch_id=null,t(e))},null,r)}},e.prototype.isTouchEventClick=function(e){if("ended"!=e.name&&"cancelled"!=e.name)return!1;var t=e.getStartLocation(),o=e.getLocation(),n=t.x-o.x,r=t.y-o.y;return n*n+r*r<=400},e.prototype.createItemByData=function(e){var t=this,o=new r.default;o.initByData(e);var n=this.nodeContainer;switch(e.type){case"label":var a=new s.Node;a.parent=n,a.setAnchorPoint(.5,.5),a.on(s.Node.EventType.SIZE_CHANGED,function(){o.width=a.width,o.height=a.height,t.onItemNodeResize()}),a.addComponent(s.Label).string=o.text,a.getComponent(s.Label).fontSize=20,a.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.LEFT,a.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.CENTER,o.renderNode=a;break;case"labelArea":var i=new s.Node;i.parent=n,i.setAnchorPoint(.5,.5),i.on(s.Node.EventType.SIZE_CHANGED,function(){o.width=i.width,o.height=i.height,t.onItemNodeResize()}),i.addComponent(s.Label).string=o.text,i.getComponent(s.Label).fontSize=20,i.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.LEFT,i.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.CENTER,i.getComponent(s.Label).overflow=s.Label.Overflow.RESIZE_HEIGHT,i.width=n.width-20,i.height=20,o.renderNode=i;break;case"button":var l=new s.Node;l.parent=n,l.on(s.Node.EventType.SIZE_CHANGED,function(){o.width=l.width,o.height=l.height,t.onItemNodeResize()}),l.width=o.width||150,l.height=o.height||40,(u=new s.Node).parent=l,u.setContentSize(u.parent.getContentSize()),this.addFillerSprite(u,s.color(200,200,200,255));var c=new s.Node;c.parent=l,c.setAnchorPoint(.5,.5),c.addComponent(s.Label).string=o.text,c.getComponent(s.Label).fontSize=20,c.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.CENTER,c.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.CENTER,c.getComponent(s.Label).overflow=s.Label.Overflow.SHRINK,c.width=l.width,c.height=l.height,c.color=s.Color.BLACK,this.registerTouchHandler(l,function(e){switch(e.name){case"began":c.color=s.Color.GREEN;break;case"moved":break;default:c.color=s.Color.BLACK}t.isTouchEventClick(e)&&o.triggerOnClick()}),o.renderNode=l;break;case"inputBox":var u,d=new s.Node;d.parent=n,d.on(s.Node.EventType.SIZE_CHANGED,function(){o.width=d.width,o.height=d.height,t.onItemNodeResize()}),d.width=o.width||150,d.height=o.height||40,(u=new s.Node).parent=d,u.setContentSize(u.parent.getContentSize()),this.addFillerSprite(u,s.color(200,200,200,255));var p=d.addComponent(s.EditBox);p.fontSize=20,p.fontColor=s.Color.BLACK,p.lineHeight=d.height,p.inputMode=s.EditBox.InputMode.SINGLE_LINE,p.maxLength=1024,p.placeholder="<<\u8f93\u5165\u6846>>",p.placeholderFontSize=20,p.placeholderFontColor=s.Color.GRAY;for(var h=d.getComponentsInChildren(s.Label),f=0;f<h.length;f++){h[f].verticalAlign=s.Label.VerticalAlign.CENTER}p.node.on("text-changed",function(){var e=p.string;o.setText(e)}),o.renderNode=d;break;case"newLine":o.width=n.width-20,o.height=20}return o},e.prototype.doLayout=function(){if(this.items){for(var e=this.nodePanel.width-20,t=[],o=10,n=-10,r=0,a=0;a<this.items.length;a++){var i=this.items[a],s=i.renderNode||{x:0,y:0};if(o+i.width>e){o=0;for(var l=0;l<t.length;l++){(t[l].renderNode||{x:0,y:0}).y=n-r/2}o=10,n-=r+4,t=[],r=0}r=Math.max(r,i.height),t.push(i),s.x=o+i.width/2,o+=i.width+4}for(a=0;a<t.length;a++){(s=t[a].renderNode||{x:0,y:0}).y=n-r/2}n-=r-10,this.nodeContainer.height=Math.max(this.nodePanel.height,-n)}},e.prototype.onItemNodeResize=function(){this.doLayout()},e.prototype.getItemByName=function(e){for(var t=0;t<this.items.length;t++){var o=this.items[t];if(o.name==e)return o}return null},e.prototype.show=function(e){var t=this,o=this.getNodeCanvas();if(o){var n=new s.Node;n.parent=o,n.setContentSize(o.getContentSize()),n.zIndex=s.macro.MAX_ZINDEX,this.nodePanel=n;var r=new s.Node;r.parent=n,r.setContentSize(r.parent.getContentSize()),this.addFillerSprite(r,s.color(0,0,0,191)),this.registerTouchHandler(this.nodePanel,function(e){t.isTouchEventClick(e)});var a=new s.Node;a.setAnchorPoint(0,1),a.parent=this.nodePanel,a.setContentSize(o.getContentSize()),this.nodeContainer=a;var i=this.nodePanel.addComponent(s.ScrollView);i.horizontal=!1,i.vertical=!0,i.content=a,i.cancelInnerEvents=!1,i.elastic=!0;for(var l=[],c=0;c<e.length;c++){var u=e[c],d=this.createItemByData(u);l.push(d)}this.items=l,this.doLayout()}},e.prototype.close=function(){s.isValid(this.nodePanel)&&this.nodePanel.destroy(),this.nodePanel=null,this.items=[]},e.prototype.getItemText=function(e){var t=this.getItemByName(e);return t?t.text:""},e.prototype.setItemText=function(e,t){var o=this.getItemByName(e);if(o){o.setText(t);var n=o.renderNode;if(n instanceof s.Node){var r=n.getComponent(s.Label)||n.getComponentInChildren(s.Label);r&&(r.string=t);var a=n.getComponent(s.EditBox)||n.getComponentInChildren(s.EditBox);a&&(a.string=t)}}},e.prototype.showMsgTip=function(e){var t=this.getNodeCanvas();if(t){var o=new s.Node;o.parent=t,o.width=t.width,o.height=20,o.zIndex=s.macro.MAX_ZINDEX;var n=o.addComponent(s.Label);n.string=e,n.fontSize=20,n.enableWrapText=!0,o.x=0,o.y=.25*t.height,o.runAction(s.sequence(s.moveBy(1.5,0,50),s.callFunc(function(){o.destroy()})))}},e.prototype.showPickerDialog=function(e,t,o,n){var r=this,i=this.getNodeCanvas();if(i){var l=a.default.scaleInRange(t.length,8.5,17.5,430,826),c=new s.Node;c.parent=i,c.setContentSize(i.getContentSize()),c.zIndex=s.macro.MAX_ZINDEX,this.registerTouchHandler(c,function(e){r.isTouchEventClick(e)&&c.destroy()});var u=new s.Node;u.parent=c,u.setContentSize(u.parent.getContentSize()),this.addFillerSprite(u,s.color(0,0,0,127));var d=new s.Node;d.parent=c,d.width=i.width-100,d.height=l,this.registerTouchHandler(d,function(e){}),(u=new s.Node).parent=d,u.setContentSize(u.parent.getContentSize()),this.addFillerSprite(u,s.color(167,167,167,255));var p=new s.Node;p.parent=d,p.y=d.height/2-25,p.x=0,p.addComponent(s.Label).string=e,p.getComponent(s.Label).overflow=s.Label.Overflow.SHRINK,p.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.CENTER,p.getComponent(s.Label).fontSize=40,p.width=d.width-10,p.height=40;var h=new s.Node;h.parent=d,h.width=d.width-10,h.height=d.height-50,h.x=0,h.y=-d.height/2+h.height/2+5,this.addFillerSprite(h,s.color(97,97,97,255));var f=new s.Node;f.parent=d,f.width=d.width-10,f.height=d.height-50,f.x=0,f.y=-d.height/2+f.height/2+5,f.addComponent(s.Mask);var g=new s.Node;g.setAnchorPoint(0,1),g.parent=f,g.setContentSize(f.getContentSize());var m=f.addComponent(s.ScrollView);m.horizontal=!1,m.vertical=!0,m.content=g,m.cancelInnerEvents=!1,m.elastic=!0;for(var _=0,v=function(e){var a=t[e],i=new s.Node;i.parent=g,i.width=f.width,i.height=40,i.x=g.width/2,i.y=_-i.height/2;var l=new s.Node;l.parent=i,l.setContentSize(l.parent.getContentSize()),y.addFillerSprite(l,s.color(0,0,0,63));var u=new s.Node;u.parent=i,u.setAnchorPoint(0,.5),u.x=-i.width/2+5,u.y=0;var d=u.addComponent(s.Label);d.fontSize=20,d.lineHeight=20,d.verticalAlign=s.Label.VerticalAlign.CENTER,d.horizontalAlign=s.Label.HorizontalAlign.LEFT,d.string=a.text,y.registerTouchHandler(i,function(e){r.isTouchEventClick(e)&&(o(a.value),n||c.destroy())}),_-=i.height+4},y=this,C=0;C<t.length;C++)v(C);g.height=Math.max(f.height,-_)}},e.prototype.showPromptDialog=function(e,t,o,n){var r=this,a=this.getNodeCanvas();if(!a)return ULSDK.console.warn("MCPanelCreator.showPromptDialog nodeCanvas not found!"),void i.default.callLater(.1,function(){r.showPromptDialog(e,t,o,n)});var l=new s.Node;l.parent=a,l.setContentSize(a.getContentSize()),l.zIndex=s.macro.MAX_ZINDEX,this.registerTouchHandler(l,function(e){r.isTouchEventClick(e)&&ULSDK.console.log("click bg")});var c=new s.Node;c.parent=l,c.setContentSize(c.parent.getContentSize()),this.addFillerSprite(c,s.color(0,0,0,127));var u=!1,d=new s.Node;d.parent=l,d.addComponent(s.Component).onDestroy=function(){ULSDK.console.log("MCPanelCreator.showPromptDialog triggerNode onDestroy",u),u||(ULSDK.console.log("MCPanelCreator.showPromptDialog nodeShadow\u88ab\u610f\u5916\u9500\u6bc1\uff0c0.1\u79d2\u540e\u5c1d\u8bd5\u91cd\u65b0\u521b\u5efa\u63d0\u793a"),i.default.callLater(.1,function(){r.showPromptDialog(e,t,o,n)}))};var p=new s.Node;p.parent=l,p.width=460,p.height=320,this.registerTouchHandler(p,function(e){});var h=new s.Node;h.parent=p,h.setContentSize(h.parent.getContentSize()),s.loader.loadRes("_ulsdk_ui/bg_01",s.SpriteFrame,function(e,t){if(e)ULSDK.console.warn("MCPanelCreator.showPromptDialog nodeDialogBg load sprite error",e);else{var o=h.getContentSize(),n=t.getOriginalSize();t.insetLeft=n.width/3,t.insetRight=n.width/3,t.insetTop=n.height/3,t.insetBottom=n.height/3;var r=h.addComponent(s.Sprite);r.spriteFrame=t,r.type=s.Sprite.Type.SLICED,r.sizeMode=s.Sprite.SizeMode.CUSTOM,h.setContentSize(o)}});var f=new s.Node;f.parent=p,f.y=p.height/2-45,f.x=0,f.color=s.color(38,38,38,255),f.addComponent(s.Label).string=e||"\u6807\u9898",f.getComponent(s.Label).overflow=s.Label.Overflow.SHRINK,f.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.CENTER,f.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.CENTER,f.getComponent(s.Label).fontSize=32,f.width=p.width-10,f.height=40;var g=new s.Node;g.parent=p,g.y=p.height/2-155,g.x=0,g.color=s.color(96,96,96,255),g.addComponent(s.Label).string=t||"\u5185\u5bb9",g.getComponent(s.Label).overflow=s.Label.Overflow.SHRINK,g.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.CENTER,g.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.CENTER,g.getComponent(s.Label).fontSize=24,g.width=p.width-50,g.height=160;for(var m=-(160*o.length+30*(o.length-1))/2,_=[],v=function(e){var t=o[e],a=new s.Node;a.parent=p,a.x=m+160*(e+.5)+30*e,a.y=-p.height/2+50,a.setContentSize(160,56),_.push(a);var i=new s.Node;i.parent=a,i.setContentSize(a.getContentSize()),s.loader.loadRes("_ulsdk_ui/btn_01",s.SpriteFrame,function(e,t){if(e)ULSDK.console.warn("MCPanelCreator.showPromptDialog nodeButtonBg load sprite error",e);else{var o=i.getContentSize(),n=t.getOriginalSize();t.insetLeft=n.width/3,t.insetRight=n.width/3,t.insetTop=n.height/3,t.insetBottom=n.height/3;var r=i.addComponent(s.Sprite);r.spriteFrame=t,r.type=s.Sprite.Type.SLICED,r.sizeMode=s.Sprite.SizeMode.CUSTOM,i.setContentSize(o)}});var c=new s.Node;c.parent=a,c.y=0,c.x=0,c.color=s.color(255,255,255,255),c.addComponent(s.Label).string=t||"\u6309\u94ae"+(e+1),c.getComponent(s.Label).overflow=s.Label.Overflow.SHRINK,c.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.CENTER,c.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.CENTER,c.getComponent(s.Label).fontSize=30,c.width=i.width-10,c.height=i.height-10,y.registerTouchHandler(a,function(t){if("began"==t.name?a.scale=1.1:"moved"==t.name||(a.scale=1),r.isTouchEventClick(t)){var o=n[e];if(o instanceof Function)o()||(u=!0,l.destroy());else u=!0,l.destroy()}})},y=this,C=0;C<o.length;C++)v(C)},e.prototype.showWebView=function(e,t){var o=this;this.closeWebView();var n=this.getNodeCanvas();if(n){var r=new s.Node;r.parent=n,r.setContentSize(2048,2048),r.zIndex=s.macro.MAX_ZINDEX,this.showWebViewNode=r;var i=new s.Node;i.parent=r,i.setContentSize(r.getContentSize()),this.addFillerSprite(i,s.color(0,0,0,127)),this.registerTouchHandler(i,function(e){o.isTouchEventClick(e)&&o.closeWebView()});var l=new s.Node;l.parent=r;var c=Math.min(.8*n.width,500),u=Math.min(.8*n.height,800);n.width>n.height&&(c=Math.min(.8*n.width,800),u=Math.min(.8*n.height,500)),l.setContentSize(c,u),s.loader.loadRes("_ulsdk_ui/bg_01",s.SpriteFrame,function(e,t){if(e)ULSDK.console.warn("MCPanelCreator.showPrivacyDialog nodeDialogBg load sprite error",e);else{var o=l.getContentSize(),n=t.getOriginalSize();t.insetLeft=n.width/3,t.insetRight=n.width/3,t.insetTop=n.height/3,t.insetBottom=n.height/3;var r=l.addComponent(s.Sprite);r.spriteFrame=t,r.type=s.Sprite.Type.SLICED,r.sizeMode=s.Sprite.SizeMode.CUSTOM,l.setContentSize(o)}});var d=new s.Node;d.parent=l,d.color=s.color(38,38,38,255),d.addComponent(s.Label).string=e,d.getComponent(s.Label).overflow=s.Label.Overflow.SHRINK,d.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.CENTER,d.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.CENTER,d.getComponent(s.Label).fontSize=32,d.width=c-10,d.height=40,d.y=u/2-40,d.x=0;var p=new s.Node;p.parent=l,p.setContentSize(c-50,u-80),p.x=0,p.y=-20;var h=p.addComponent(s.ScrollView);h.horizontal=!1,h.vertical=!0,h.cancelInnerEvents=!1,h.elastic=!0;var f=new s.Node;f.parent=p,f.setContentSize(p.getContentSize()),f.addComponent(s.Mask).type=s.Mask.Type.RECT,f.getComponent(s.Mask).inverted=!1;var g=new s.Node;g.parent=f,g.setAnchorPoint(.5,1),g.setContentSize(p.getContentSize()),g.addComponent(s.Layout).resizeMode=s.Layout.ResizeMode.CONTAINER,h.content=g,a.default.httpGet({url:t,timeoutMillisecond:5e3,success:function(e){var t=JSON.parse(e).policyText;ULSDK.console.log("content:",t);var o=new s.Node;o.color=s.color(0,0,0,255),o.parent=g,o.setAnchorPoint(.5,1),o.addComponent(s.Label).string=t,o.getComponent(s.Label).overflow=s.Label.Overflow.RESIZE_HEIGHT,o.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.TOP,o.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.LEFT,o.getComponent(s.Label).fontSize=18,o.getComponent(s.Label).lineHeight=26,o.setContentSize(g.getContentSize())},fail:function(){}})}},e.prototype.closeWebView=function(){s.isValid(this.showWebViewNode)&&(this.showWebViewNode.__b_manual_destroy=!0,this.showWebViewNode.destroy()),this.showWebViewNode=null},e.prototype.showPrivacyDialog=function(e,t,o,r){var a=this;if(ULSDK.console.log("MCPanelCreator.showPrivacyDialog"),!this.showPrivacyNode){var l=this.getNodeCanvas();if(!l)return ULSDK.console.warn("MCPanelCreator.showPrivacyDialog nodeCanvas not found!"),void i.default.callLater(.1,function(){a.showPrivacyDialog(e,t,o,r)});var c=new s.Node;c.parent=l,c.setContentSize(2048,2048),c.zIndex=s.macro.MAX_ZINDEX,this.showPrivacyNode=c;var u=new s.Node;u.parent=c,u.setContentSize(c.getContentSize()),this.addFillerSprite(u,s.color(0,0,0,127)),this.registerTouchHandler(u,function(e){a.isTouchEventClick(e)&&ULSDK.console.log("click bg")});var d=!1,p=new s.Node;p.parent=u,p.addComponent(s.Component).onDestroy=function(){ULSDK.console.log("MCPanelCreator.showPrivacyDialog triggerNode onDestroy",d),a.showPrivacyNode=null,d||(ULSDK.console.log("MCPanelCreator.showPrivacyDialog nodeShadow\u88ab\u610f\u5916\u9500\u6bc1\uff0c0.1\u79d2\u540e\u5c1d\u8bd5\u91cd\u65b0\u521b\u5efa\u63d0\u793a"),i.default.callLater(1/60,function(){ULSDK.console.log("ontimer"),a.showPrivacyDialog(e,t,o,r)}))};var h=new s.Node;h.parent=c;h.setContentSize(400,400),s.loader.loadRes("_ulsdk_ui/bg_01",s.SpriteFrame,function(e,t){if(e)ULSDK.console.warn("MCPanelCreator.showPrivacyDialog nodeDialogBg load sprite error",e);else{var o=h.getContentSize(),n=t.getOriginalSize();t.insetLeft=n.width/3,t.insetRight=n.width/3,t.insetTop=n.height/3,t.insetBottom=n.height/3;var r=h.addComponent(s.Sprite);r.spriteFrame=t,r.type=s.Sprite.Type.SLICED,r.sizeMode=s.Sprite.SizeMode.CUSTOM,h.setContentSize(o)}});var f=new s.Node;f.parent=h,f.color=s.color(0,0,0,255),f.addComponent(s.Label).string="\u9690\u79c1\u653f\u7b56",f.getComponent(s.Label).overflow=s.Label.Overflow.SHRINK,f.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.CENTER,f.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.CENTER,f.getComponent(s.Label).fontSize=32,f.width=390,f.height=40,f.y=160,f.x=0;var g=new s.Node;g.parent=h,g.setContentSize(350,260),g.x=0,g.y=3;var m=g.addComponent(s.ScrollView);m.horizontal=!1,m.vertical=!0,m.cancelInnerEvents=!1,m.elastic=!0;var _=new s.Node;_.parent=g,_.setContentSize(g.getContentSize()),_.addComponent(s.Mask).type=s.Mask.Type.RECT,_.getComponent(s.Mask).inverted=!1;var v=new s.Node;v.parent=_,v.setAnchorPoint(.5,1),v.setContentSize(g.getContentSize()),v.addComponent(s.Layout).resizeMode=s.Layout.ResizeMode.CONTAINER,m.content=v;for(var y=this,C="\u611f\u8c22\u60a8\u5bf9\u672c\u516c\u53f8\u6e38\u620f\u7684\u652f\u6301\uff0c\u5728\u4f53\u9a8c\u6211\u4eec\u7684\u6e38\u620f\u524d\uff0c\u8bf7\u4ed4\u7ec6\u9605\u8bfb\u5f00\u53d1\u5546\u7684",S={},b=0;b<t.length;b++){var R=t[b],T=R.name||"",A=R.url||"";S[T]=A,b>0&&(C+="\u3001"),C+='<color=#6495ED><outline color=#ffffff width=2><on click="onUserProtocolClicked" param="'+T+'">\u300a'+T+"\u300b</on></outline></color>"}C+="\u4e2d\u7684\u6240\u6709\u6761\u6b3e\uff0c\u5305\u62ec\n        1.\u4e3a\u4e86\u60a8\u6709\u826f\u597d\u7684\u6e38\u620f\u4f53\u9a8c\uff0c\u6211\u4eec\u4f1a\u57fa\u4e8e\u5177\u4f53\u7684\u573a\u666f\u6536\u96c6\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n        2.\u6211\u4eec\u4f1a\u57fa\u4e8e\u5148\u8fdb\u7684\u6280\u672f\u548c\u7ba1\u7406\u63aa\u65bd\u4fdd\u8bc1\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u5b89\u5168\n        3.\u57fa\u4e8e\u60a8\u7684\u6388\u6743\uff0c\u6211\u4eec\u4f1a\u6536\u96c6\u4ee5\u4e0b\u6743\u9650\n\u8bbe\u5907\u4fe1\u606f\uff1a\u5305\u62ec\u8bbe\u5907\u6807\u8bc6\u7b26\u3001MAC\u3001\u673a\u578b\u3001\u54c1\u724c\u3001App\u5305\u540d\u3001App\u7248\u672c\u53f7\u3001IP\u5730\u5740\u3001\u8bbe\u5907\u5206\u8fa8\u7387\u53ca\u50cf\u7d20\u5bc6\u5ea6\u3002\n\u7f51\u7edc\u4fe1\u606f\uff1a\u7f51\u7edc\u8fde\u63a5\u72b6\u6001\u3001\u63a5\u5165\u7f51\u7edc\u7684\u65b9\u5f0f\u548c\u7c7b\u578b\u3001IP\u5730\u5740\u3002\n\u4f7f\u7528\u4fe1\u606f\uff1a\u5305\u62ec\u5e7f\u544a\u5185\u5bb9\u7684\u5c55\u73b0\u3001\u70b9\u51fb\u3001\u4e0b\u8f7d\u3002\n        \u5982\u679c\u60a8\u5bf9\u672c\u9690\u79c1\u653f\u7b56\u6709\u4efb\u4f55\u7591\u95ee,\u8bf7\u901a\u8fc7kefu@ultralisk.cn\u4e0e\u6211\u4eec\u8054\u7cfb\u3002\n        ";var D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onUserProtocolClicked=function(e,t){y.showWebView(t,S[t]||"")},t}(s.RichText),I=new s.Node;I.color=s.color(0,0,0,255),I.parent=v,I.setAnchorPoint(.5,1),I.addComponent(D).string=C,I.getComponent(D).maxWidth=344,I.getComponent(D).fontSize=18,I.getComponent(D).lineHeight=26,I.setContentSize(v.getContentSize());var w=(h.width-20)/o.length,L=function(e){var t=o[e],n=new s.Node;n.parent=h,n.width=Math.min(.8*w,120),n.height=40,n.x=-(o.length/2-e)*w+w/2,n.y=(n.height-h.height)/2+20;var i=new s.Node;i.parent=n,i.addComponent(s.Label).string=t,i.getComponent(s.Label).overflow=s.Label.Overflow.SHRINK,i.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.CENTER,i.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.CENTER,i.getComponent(s.Label).fontSize=22,i.width=n.width,i.height=n.height,1==o.length||e%2==1?(P.addFillerSprite(n,s.color(100,149,237,255)),i.color=s.color(255,255,255,255)):(P.addFillerSprite(n,s.color(230,230,230,255)),i.color=s.color(156,176,222,255),i.addComponent(s.LabelOutline),i.getComponent(s.LabelOutline),i.getComponent(s.LabelOutline).width=1,i.getComponent(s.LabelOutline).color=s.color(230,230,230,255)),P.registerTouchHandler(i,function(t){if(a.isTouchEventClick(t)){var o=r[e];if(o instanceof Function)o()||(d=!0,a.showPrivacyNode.destroy(),a.showPrivacyNode=null);else d=!0,a.showPrivacyNode.destroy(),a.showPrivacyNode=null}})},P=this;for(b=0;b<o.length;b++)L(b)}},e.prototype.getCanvasSize=function(){var e=this.getNodeCanvas();return{width:e.width,height:e.height}},e.prototype.getCanvasOriginSize=function(){var e=0,t=0,o=this.getNodeCanvas(),n=(o.getComponent(s.Canvas),s.view.getFrameSize()),r=n.width/n.height,a=o.width/o.height;return e=o.width,t=o.height,r<a?t=Math.floor(t*a/r):e=Math.floor(e*r/a),{width:e,height:t}},e.prototype.showReferenceRect=function(e,t,o,n,r,a,l){var c=this;ULSDK.console.log("MCPanelCreator.showReferenceRect",e,t,o,n,r);var u=s.view.getFrameSize(),d=t*u.width,p=u.height-o*u.height;ULSDK.console.log("  center",d,p);var h=this.getNodeCanvas(),f=this.getCanvasSize(),g=this.getCanvasOriginSize(),m=d/u.width*g.width-(g.width-f.width)/2,_=g.height-p/u.height*g.height-(g.height-f.height)/2,v=h.convertToNodeSpaceAR(s.v2(m,_));ULSDK.console.log("  pInWorld",v),this.hideReferenceRect(e),s.loader.loadRes("_ulsdk_ui/white_dot",s.SpriteFrame,function(u,d){var p=new s.Node;p.parent=h,p.addComponent(s.Sprite).spriteFrame=d,p.setAnchorPoint(null==a?.5:a,null==l?.5:l),p.color=s.color(0,0,0,127),p.opacity=127,p.position=v,p.width=n,p.height=r,p.zIndex=s.macro.MAX_ZINDEX;var f=new s.Node;f.parent=p;var g=f.addComponent(s.Label);g.string=e,g.fontSize=18,g.verticalAlign=s.Label.VerticalAlign.CENTER,g.horizontalAlign=s.Label.HorizontalAlign.CENTER;var m=f.addComponent(s.Widget);m.isAlignVerticalCenter=!0,m.isAlignHorizontalCenter=!0,c.nodeReferenceRects[e]=p,p.__b_manual_destroy=!1;var _=new s.Node;_.parent=p,_.addComponent(s.Component).onDestroy=function(){ULSDK.console.log("MCPanelCreator.showReferenceRect triggerNode onDestroy",p.__b_manual_destroy),p.__b_manual_destroy||(ULSDK.console.log("MCPanelCreator.showReferenceRect nodeRect\u88ab\u610f\u5916\u9500\u6bc1\uff0c0.1\u79d2\u540e\u5c1d\u8bd5\u91cd\u65b0\u521b\u5efa\u63d0\u793a"),i.default.callLater(.1,function(){c.showReferenceRect(e,t,o,n,r)}))}})},e.prototype.showReferenceRectFromViewPoint=function(e,t,o,n,r,a,i){ULSDK.console.log("MCPanelCreator.showReferenceRectFromViewPoint",e,t,o,n,r);var l=s.view.getFrameSize(),c=t/l.width,u=1-o/l.height;this.showReferenceRect(e,c,u,n,r,a,i)},e.prototype.hideReferenceRect=function(e){ULSDK.console.log("MCPanelCreator.hideReferenceRect",e);var t=this.nodeReferenceRects[e];s.isValid(t)&&(t.__b_manual_destroy=!0,t.destroy(),t=null,delete this.nodeReferenceRects[e])},e.prototype.hideAllReferenceRects=function(){var e=this;ULSDK.console.log("MCPanelCreator.hideAllReferenceRects"),a.default.forEachMap(this.nodeReferenceRects,function(t,o){e.hideReferenceRect(t)})},e.prototype.showNationBanner=function(e,t){var o=this;void 0===t&&(t=1),ULSDK.console.log("MCPanelCreator.showNationBanner"),e=e||{nationData:{title:null,desc:null,icon:null,url:null,targetTitle:null},onShow:null,onError:null,onClick:null,onClose:null};var n=this.getNodeCanvas();if(!n)return ULSDK.console.warn("MCPanelCreator.showNationBanner nodeCanvas not found!"),void(e.onError&&e.onError("nodeCanvas not found!"));if(this.bannerRootNode)return ULSDK.console.warn("MCPanelCreator.showNationBanner \u5df2\u7ecf\u6709 banner \u6b63\u5728\u5c55\u793a\u4e2d"),void(e.onError&&e.onError("\u5df2\u7ecf\u6709 banner \u6b63\u5728\u5c55\u793a\u4e2d"));this.bannerShowingObj=e;var r=this.getCanvasSize(),a=Math.min(r.width,r.height)*t,i=a/3.5,l=new s.Node;l.parent=n,l.setContentSize(a,i),l.zIndex=s.macro.MAX_ZINDEX-10,l.y=(i-r.height)/2,l.x=0,this.addFillerSprite(l,s.color(255,255,255,255)),this.bannerRootNode=l,this.registerTouchHandler(l,function(t){o.isTouchEventClick(t)&&(ULSDK.console.log("MCPanelCreator:click nationBanner"),e.onClick&&e.onClick())});var c=new s.Node;c.parent=l,c.setContentSize(34*t,34*t),c.y=(l.height-c.height)/2,c.x=(l.width-c.width)/2,s.loader.loadRes("_ulsdk_ui/native_adv_close",s.SpriteFrame,function(e,t){if(e)ULSDK.console.warn("MCPanelCreator.showNationBanner closeButton load sprite error",e);else{var o=c.getContentSize();c.addComponent(s.Sprite).spriteFrame=t,c.setContentSize(o)}}),this.registerTouchHandler(c,function(e){o.isTouchEventClick(e)&&o.closeNationBanner()});var u=new s.Node;u.parent=l,u.setContentSize(44*t,24*t),u.y=(u.height-l.height)/2,u.x=(l.width-u.width)/2,s.loader.loadRes("_ulsdk_ui/native_adv_tag",s.SpriteFrame,function(e,t){if(e)ULSDK.console.warn("MCPanelCreator.showNationBanner advTag load sprite error",e);else{var o=u.getContentSize();u.addComponent(s.Sprite).spriteFrame=t,u.setContentSize(o)}});var d=new s.Node;d.parent=l,d.setContentSize(i/9*16,i);var p=e.nationData.url||null;p&&s.loader.load({url:p,type:"png"},function(e,t){if(e)ULSDK.console.warn("MCPanelCreator.showNationBanner imageNode load sprite error",e);else{var o=d.getContentSize(),n=d.addComponent(s.Sprite),r=new s.SpriteFrame;r.setTexture(t),n.spriteFrame=r,d.setContentSize(o)}});var h=d.getContentSize(),f=.6*Math.min(i,(a-h.width)/2),g=f,m={width:f,height:f/16*5},_=new s.Node;_.parent=l,_.setContentSize(f,g),_.y=m.height/2,_.x=-(a-h.width)/4-h.width/2;var v=e.nationData.icon||null;v?s.loader.load({url:v,type:"png"},function(e,t){if(e)ULSDK.console.warn("MCPanelCreator.showNationBanner iconNode load sprite error",e);else{var o=_.getContentSize(),n=_.addComponent(s.Sprite),r=new s.SpriteFrame;r.setTexture(t),n.spriteFrame=r,_.setContentSize(o)}}):this.addFillerSprite(_,s.color(220,0,50,255));var y=new s.Node;y.parent=l,y.setContentSize(m.width,m.height),y.y=-i/2+((i-g)/2+_.y)/2,y.x=_.x,this.addFillerSprite(y,s.color(100,220,50,255));var C=new s.Node;C.parent=y,C.addComponent(s.Label).string=e.nationData.targetTitle||"\u70b9\u51fb\u67e5\u770b",C.getComponent(s.Label).overflow=s.Label.Overflow.SHRINK,C.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.CENTER,C.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.CENTER,C.getComponent(s.Label).fontSize=18,C.addComponent(s.LabelOutline),C.getComponent(s.LabelOutline),C.getComponent(s.LabelOutline).width=1,C.getComponent(s.LabelOutline).color=s.color(100,220,50,255),C.setContentSize(m.width,m.height);var S=(a-h.width)/2*.8,b=new s.Node;b.parent=l,b.color=s.color(0,0,0,255),b.addComponent(s.Label).string=e.nationData.title||"",b.getComponent(s.Label).overflow=s.Label.Overflow.SHRINK,b.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.CENTER,b.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.LEFT,b.getComponent(s.Label).fontSize=24,b.getComponent(s.Label).lineHeight=24,b.setContentSize(S,36*t),b.y=(_.height-36*t)/2,b.x=+(a-h.width)/4+h.width/2;var R=new s.Node;R.parent=l,R.color=s.color(0,0,0,255),R.addComponent(s.Label).string=e.nationData.desc||"",R.getComponent(s.Label).overflow=s.Label.Overflow.SHRINK,R.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.TOP,R.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.LEFT,R.getComponent(s.Label).fontSize=18,R.getComponent(s.Label).lineHeight=20,R.setContentSize(S,80*t),R.y=(_.height-80*t)/2-b.height,R.x=+(a-h.width)/4+h.width/2,e.onShow&&e.onShow()},e.prototype.closeNationBanner=function(){this.bannerRootNode&&(this.bannerRootNode.destroy(),this.bannerRootNode=null,ULSDK.console.log("MCPanelCreator:close nationBanner"),this.bannerShowingObj&&this.bannerShowingObj.onClose&&this.bannerShowingObj.onClose(),this.bannerShowingObj=null)},e.prototype.showNationInter=function(e){var t=this;ULSDK.console.log("MCPanelCreator.showNationInter"),e=e||{nationData:{title:null,desc:null,icon:null,url:null,targetTitle:null},onShow:null,onError:null,onClick:null,onClose:null};var o=this.getNodeCanvas();if(!o)return ULSDK.console.warn("MCPanelCreator.showNationInter nodeCanvas not found!"),void(e.onError&&e.onError("nodeCanvas not found!"));if(this.interRootNode)return ULSDK.console.warn("MCPanelCreator.showNationInter \u5df2\u7ecf\u6709 inter \u6b63\u5728\u5c55\u793a\u4e2d"),void(e.onError&&e.onError("\u5df2\u7ecf\u6709 inter \u6b63\u5728\u5c55\u793a\u4e2d"));this.interShowingObj=e;var n=this.getCanvasSize(),r=new s.Node;r.parent=o,r.setContentSize(n.width,n.height),r.zIndex=s.macro.MAX_ZINDEX-11,this.interRootNode=r;var a=new s.Node;a.parent=r,a.setContentSize(r.getContentSize()),this.addFillerSprite(a,s.color(0,0,0,127)),this.registerTouchHandler(a,function(e){t.isTouchEventClick(e)&&console.log("MCPanelCreator:click nationInter bg")});var i=.86*Math.min(n.width,n.height),l=i,c=new s.Node;c.parent=r,c.setContentSize(i,l),this.registerTouchHandler(c,function(e){t.isTouchEventClick(e)&&console.log("MCPanelCreator:click contentNode bg")});var u=new s.Node;u.parent=c,u.setContentSize(i,i/16*9),u.y=(c.height-u.height)/2,u.x=(u.width-c.width)/2,this.addFillerSprite(u,s.color(255,255,255,255));var d=e.nationData.url||null;if(d){var p=new s.Node;p.parent=u,p.setContentSize(i,i/16*9),s.loader.load({url:d,type:"png"},function(e,t){if(e)ULSDK.console.warn("MCPanelCreator.showNationInter imageNode load sprite error",e);else{var o=p.getContentSize(),n=p.addComponent(s.Sprite),r=new s.SpriteFrame;r.setTexture(t),n.spriteFrame=r,p.setContentSize(o)}})}this.registerTouchHandler(u,function(o){t.isTouchEventClick(o)&&(ULSDK.console.log("MCPanelCreator:click nationInter"),e.onClick&&e.onClick(),t.closeNationInter())});var h=new s.Node;h.parent=u,h.setContentSize(34,34),h.y=(u.height-h.height)/2,h.x=(u.width-h.width)/2,s.loader.loadRes("_ulsdk_ui/native_adv_close",s.SpriteFrame,function(e,t){if(e)ULSDK.console.warn("MCPanelCreator.showNationBanner closeButton load sprite error",e);else{var o=h.getContentSize();h.addComponent(s.Sprite).spriteFrame=t,h.setContentSize(o)}}),this.registerTouchHandler(h,function(e){t.isTouchEventClick(e)&&t.closeNationInter()});var f=new s.Node;f.parent=u,f.setContentSize(44,24),f.y=(f.height-u.height)/2,f.x=(u.width-f.width)/2,s.loader.loadRes("_ulsdk_ui/native_adv_tag",s.SpriteFrame,function(e,t){if(e)ULSDK.console.warn("MCPanelCreator.showNationBanner advTag load sprite error",e);else{var o=f.getContentSize();f.addComponent(s.Sprite).spriteFrame=t,f.setContentSize(o)}});var g=i/7,m=g,_=new s.Node;_.parent=u,_.setContentSize(g,m),_.y=(u.height-m)/2-.02*l,_.x=(g-u.width)/2+.02*i;var v=e.nationData.icon||null;v?s.loader.load({url:v,type:"png"},function(e,t){if(e)ULSDK.console.warn("MCPanelCreator.showNationInter iconNode load sprite error",e);else{var o=_.getContentSize(),n=_.addComponent(s.Sprite),r=new s.SpriteFrame;r.setTexture(t),n.spriteFrame=r,_.setContentSize(o)}}):this.addFillerSprite(_,s.color(220,0,50,255));var y=new s.Node;y.parent=r,y.color=s.color(255,255,255,255),y.addComponent(s.Label).string=e.nationData.desc||e.nationData.title||"",y.getComponent(s.Label).overflow=s.Label.Overflow.SHRINK,y.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.TOP,y.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.CENTER,y.getComponent(s.Label).fontSize=24,y.getComponent(s.Label).lineHeight=24,y.addComponent(s.LabelOutline),y.getComponent(s.LabelOutline),y.getComponent(s.LabelOutline).width=1,y.getComponent(s.LabelOutline).color=s.color(0,0,0,255),y.setContentSize(c.width,36),y.y=(c.height-y.height)/2-u.height-10;var C=i/2.5,S=new s.Node;S.parent=c,S.setContentSize(C,C/16*5),S.y=(c.height-S.height)/2-u.height-10-y.height-10,this.addFillerSprite(S,s.color(100,220,50,255));var b=new s.Node;b.parent=S,b.addComponent(s.Label).string=e.nationData.targetTitle||"\u70b9\u51fb\u67e5\u770b",b.getComponent(s.Label).overflow=s.Label.Overflow.SHRINK,b.getComponent(s.Label).verticalAlign=s.Label.VerticalAlign.CENTER,b.getComponent(s.Label).horizontalAlign=s.Label.HorizontalAlign.CENTER,b.getComponent(s.Label).fontSize=24,b.addComponent(s.LabelOutline),b.getComponent(s.LabelOutline),b.getComponent(s.LabelOutline).width=1,b.getComponent(s.LabelOutline).color=s.color(100,220,50,255),b.width=S.width,b.height=S.height,this.registerTouchHandler(b,function(o){t.isTouchEventClick(o)&&(ULSDK.console.log("MCPanelCreator:click nationInter"),e.onClick&&e.onClick(),t.closeNationInter())}),e.onShow&&e.onShow()},e.prototype.closeNationInter=function(){this.interRootNode&&(this.interRootNode.destroy(),this.interRootNode=null,ULSDK.console.log("MCPanelCreator:close nationInter"),this.interShowingObj&&this.interShowingObj.onClose&&this.interShowingObj.onClose(),this.interShowingObj=null)},e}();o.default=l,cc._RF.pop()},{"../utils/ULTimer":"ULTimer","../utils/ULTools":"ULTools","./MCItem":"MCItem"}],MCPanelLaya:[function(e,t,o){"use strict";cc._RF.push(t,"57c4ftc4DhObpYUHGQ3z+3A","MCPanelLaya");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("./MCItem"),a=e("../utils/ULTools"),i=e("../utils/ULTimer"),s=e("../ULConsts"),l=20,c=function(){function e(){this.nodeReferenceRects={}}return e.prototype.getRootNode=function(){return Laya.stage.getChildByName("__ulsdk_ui_node_root__")},e.prototype.registerTouchHander=function(e,t){var o,n;e.on(Laya.Event.MOUSE_DOWN,e,function(r){e.__b_touch=!0,o=r.stageX,n=r.stageY,t({name:"began",pos:{x:r.stageX,y:r.stageY}})}),e.on(Laya.Event.MOUSE_UP,e,function(o){e.__b_touch&&(e.__b_touch=!1,t({name:"ended",pos:{x:o.stageX,y:o.stageY}}))}),e.on(Laya.Event.MOUSE_MOVE,e,function(o){1==e.__b_touch&&t({name:"moved",pos:{x:o.stageX,y:o.stageY}})}),e.on(Laya.Event.MOUSE_OUT,e,function(o){e.__b_touch&&(e.__b_touch=!1,t({name:"cancelled",pos:{x:o.stageX,y:o.stageY}}))}),e.on(Laya.Event.CLICK,e,function(e){if(e.stopPropagation(),null!=o&&null!=n){var r=e.stageX-o,a=e.stageY-n;if(r*r+a*a>=400)return}t({name:"click",pos:{x:e.stageX,y:e.stageY}})})},e.prototype.createItemByData=function(e){var t=new r.default;t.initByData(e);var o=this.nodeContainer;switch(s.default.B_INNER_DEBUG&&ULSDK.console.log("createItemByData",e),e.type){case"label":(n=o.addChild(new Laya.Label)).fontSize=l,n.align="left",n.color="#ffffff",n.text=t.text,s.default.B_INNER_DEBUG&&ULSDK.console.log("createLabel",n.width,n.height),t.width=n.width,t.height=n.height,t.renderNode=n;break;case"labelArea":var n;(n=o.addChild(new Laya.Label)).width=o.width-20,n.wordWrap=!0,n.fontSize=l,n.align="left",n.color="#ffffff",n.text=t.text,s.default.B_INNER_DEBUG&&ULSDK.console.log("createLabel",n.width,n.height),t.width=n.width,t.height=n.height,t.renderNode=n;break;case"button":(i=o.addChild(new Laya.Sprite)).size(150,40),i.graphics.drawRect(0,0,150,40,"#c8c8c8ff");var a=i.addChild(new Laya.Label);a.fontSize=l,a.color="#000000",a.align="center",a.text=t.text,a.pos(75-a.width/2,20-a.height/2),this.registerTouchHander(i,function(e){s.default.B_INNER_DEBUG&&ULSDK.console.log("onTouch button",t.text,e.name),"began"==e.name?(a.color="#00ff00",a._tf.isChanged=!0):"moved"==e.name||(a.color="#000000",a._tf.isChanged=!0),s.default.B_INNER_DEBUG&&ULSDK.console.log("  label.color",a.color),"click"==e.name&&t.triggerOnClick()}),t.width=i.width,t.height=i.height,t.renderNode=i;break;case"inputBox":var i;(i=o.addChild(new Laya.Sprite)).size(t.width||150,t.height||40),i.graphics.drawRect(0,0,150,40,"#c8c8c8ff");var c=i.addChild(new Laya.TextInput);c.size(i.width-4,i.height),c.pos(2,0),c.fontSize=l,c.color="#000000",c.align="left",c.on("keyup",this,function(e){t.setText(c.text)}),i.textInput=c,t.width=i.width,t.height=i.height,t.renderNode=i;break;case"newLine":t.width=o.width-20,t.height=20}return t},e.prototype.doLayout=function(){if(this.items){s.default.B_INNER_DEBUG&&ULSDK.console.log("MCPanelCreator.doLayout"),s.default.B_INNER_DEBUG&&ULSDK.console.log("  items",this.items);for(var e=this.nodePanel.width-20,t=[],o=10,n=10,r=0,a=0;a<this.items.length;a++){var i=this.items[a],l=i.renderNode||{x:0,y:0};if(o+i.width>e){o=0,s.default.B_INNER_DEBUG&&ULSDK.console.log("\u6e05\u7a7a\u4e00\u884c"),s.default.B_INNER_DEBUG&&ULSDK.console.log("  rowHeight",r);for(var c=0;c<t.length;c++){var u=t[c].renderNode||{x:0,y:0};u.y=n+r/2-u.height/2,s.default.B_INNER_DEBUG&&ULSDK.console.log("  set y",c,u.y)}o=10,n+=r+4,t=[],r=0}r=Math.max(r,i.height),t.push(i),l.x=o,o+=i.width+4}for(a=0;a<t.length;a++){(l=t[a].renderNode||{x:0,y:0}).y=n}n+=r+10,s.default.B_INNER_DEBUG&&ULSDK.console.log("finish"),s.default.B_INNER_DEBUG&&ULSDK.console.log("  rowTop",n),this.nodeContainer.height=Math.max(this.nodePanel.height,n)}},e.prototype.onItemNodeResize=function(){this.doLayout()},e.prototype.getItemByName=function(e){for(var t=0;t<this.items.length;t++){var o=this.items[t];if(o.name==e)return o}return null},e.prototype.show=function(e){s.default.B_INNER_DEBUG&&ULSDK.console.log("MCPanelLaya.show",e);var t=this.getRootNode();if(t){var o=Laya.stage.width,n=Laya.stage.height,r=t.addChild(new Laya.Sprite);r.size(o,n),r.pos(-o/2,-n/2),this.nodePanel=r;var a=r.addChild(new Laya.Sprite);a.size(o,n),a.graphics.drawRect(0,0,o,n,"#000000BF",null,null),this.registerTouchHander(a,function(e){"click"==e.name&&s.default.B_INNER_DEBUG&&ULSDK.console.log("click spriteBg")});var i=r.addChild(new Laya.Panel);i.size(o,n),this.registerTouchHander(i,function(e){if("began"==e.name)i._downX=i.x,i._downY=i.y,i._downTouchX=e.pos.x,i._downTouchY=e.pos.y;else if("moved"==e.name){var t=e.pos.x-i._downTouchX,o=e.pos.y-i._downTouchY,n=i._downY+o;n=Math.min(0,n),s.default.B_INNER_DEBUG&&ULSDK.console.log("move",t,o,n),i.y=n}}),this.nodeContainer=i;for(var l=[],c=0;c<e.length;c++){var u=e[c],d=this.createItemByData(u);l.push(d)}this.items=l,this.doLayout()}},e.prototype.close=function(){s.default.B_INNER_DEBUG&&ULSDK.console.log("MCPanelLaya.close"),this.nodePanel&&this.nodePanel.destroy(),this.nodePanel=null,this.items=[]},e.prototype.showPickerDialog=function(e,t,o,r){var i=this.getRootNode();if(i){var c=Laya.stage.width,u=Laya.stage.height,d=a.default.scaleInRange(t.length,8.5,17.5,430,826),p=i.addChild(new Laya.Sprite);p.size(c,u),p.pos(-c/2,-u/2),p.graphics.drawRect(0,0,c,u,"#00000080"),this.registerTouchHander(p,function(e){"click"==e.name&&(s.default.B_INNER_DEBUG&&ULSDK.console.log("click nodeShadow"),p.destroy())});var h=p.addChild(new Laya.Sprite);h.size(c-100,d),h.pos(c/2-h.width/2,u/2-h.height/2),h.graphics.drawRect(0,0,h.width,h.height,"#a7a7a7ff"),this.registerTouchHander(h,function(e){"click"==e.name&&s.default.B_INNER_DEBUG&&ULSDK.console.log("click nodeDialog")});var f=h.addChild(new Laya.Label);f.fontSize=36,f.align="left",f.pos(5,10),f.text=e||"\u6807\u9898";var g=h.addChild(new Laya.Sprite);g.size(h.width-10,h.height-55),g.pos(5,50),g.graphics.drawRect(0,0,g.width,g.height,"#616161ff");var m=g.width,_=40,v=this,y=function(e){function t(){var t=e.call(this)||this;s.default.B_INNER_DEBUG&&ULSDK.console.log("item.construct",t),t.size(m,_),t.graphics.drawRect(0,0,m,_,"#0000003f");var n=t.addChild(new Laya.Label);return n.fontSize=l,n.align="left",n.color="#ffffff",n.text="\u6587\u5b57",n.pos(5,_/2-n.height/2),v.registerTouchHander(t,function(e){"click"==e.name&&(o(t.data.value),r||p.destroy())}),t.label=n,t}return n(t,e),t.prototype.fillData=function(e){this.label.text=e.text,this.label.y=_/2-this.label.height/2,this.data=e},t}(Laya.Box),C=g.addChild(new Laya.List);C.itemRender=y,C.vScrollBarSkin="",C.spaceY=4,C.array=t,C.pos(0,0),C.size(g.width,g.height),C.selectEnable=!0,C.selectHandler=new Laya.Handler(this,function(e,t,o){s.default.B_INNER_DEBUG&&ULSDK.console.log("selectHander",e,t,o)}),C.renderHandler=new Laya.Handler(this,function(e,t){s.default.B_INNER_DEBUG&&ULSDK.console.log("renderHandler",e,t),e.fillData(e._dataSource)})}},e.prototype.getItemText=function(e){var t=this.getItemByName(e);return t?t.renderNode.textInput.text?t.renderNode.textInput.text:t.text:""},e.prototype.setItemText=function(e,t){var o=this.getItemByName(e);if(s.default.B_INNER_DEBUG&&ULSDK.console.log("MCPanelCreator.setItemText",e,t,o),o){o.setText(t);var n=o.renderNode;n instanceof Laya.Label?(n.text=t,o.width=n.width,o.height=n.height,this.onItemNodeResize()):n.textInput instanceof Laya.TextInput&&(n.textInput.text=t)}},e.prototype.showMsgTip=function(e){var t=this;s.default.B_INNER_DEBUG&&ULSDK.console.log("MCPanelLaya.showMsgTip");var o=this.getRootNode();if(o){var n=Laya.stage.width,r=Laya.stage.height,a=o.addChild(new Laya.Label);a.width=n-10,a.wordWrap=!0,a.fontSize=20,a.align="center",a.color="#ffffff",a.text=e,a.pos(-n/2,.25*-r),Laya.Tween.to(a,{y:.25*-r-100},1e3,null,new Laya.Handler(this,function(){Laya.Tween.to(a,{alpha:0,y:.25*-r-150},500,null,new Laya.Handler(t,function(){a.destroy()}))}))}},e.prototype.showPromptDialog=function(e,t,o,n){var r=this;s.default.B_INNER_DEBUG&&ULSDK.console.log("MCPanelLaya.showPromptDialog");var a=this.getRootNode();if(!a)return ULSDK.console.warn("MCPanelLaya.showPromptDialog nodeRoot not found!"),void i.default.callLater(.1,function(){r.showPromptDialog(e,t,o,n)});var l=Laya.stage.width,c=Laya.stage.height,u=a.addChild(new Laya.Sprite);u.size(l,c),u.pos(-l/2,-c/2),u.graphics.drawRect(0,0,l,c,"#00000080"),this.registerTouchHander(u,function(e){"click"==e.name&&s.default.B_INNER_DEBUG&&ULSDK.console.log("click nodeShadow")});var d=u.addChild(new Laya.Image);d.skin="res/_ulsdk_ui/bg_01.png",d.sizeGrid="40,40,40,40,0",d.size(460,320),d.pos(l/2-d.width/2,c/2-d.height/2);var p=d.addChild(new Laya.Label);p.fontSize=32,p.align="center",p.color="#262626",p.text=e||"\u6807\u9898",p._tf.isChanged=!0,p.pos(d.width/2-p.width/2,20);var h=d.addChild(new Laya.Label);h.fontSize=24,h.align="center",h.color="#606060",h.wordWrap=!0,h.width=d.width-50,h.text=t||"\u6b63\u6587",h._tf.isChanged=!0,h.pos(d.width/2-h.width/2,145-h.height/2);for(var f=-(160*o.length+30*(o.length-1))/2,g=function(e){var t=o[e],r=d.addChild(new Laya.Image);r.pos(d.width/2+f+160*(e+.5)+30*e,d.height-50),r.skin="res/_ulsdk_ui/btn_01.png",r.sizeGrid="27,27,27,27,1",r.size(160,56),r.anchorX=.5,r.anchorY=.5;var a=r.addChild(new Laya.Label);a.fontSize=30,a.align="center",a.text=t||"\u6309\u94ae"+(e+1),a.color="#ffffff",a.pos(r.width/2-a.width/2,r.height/2-a.height/2),m.registerTouchHander(r,function(t){if("began"==t.name?r.scale(1.1,1.1):"moved"==t.name||r.scale(1,1),"click"==t.name){var o=n[e];if(o instanceof Function)o()||u.destroy();else u.destroy()}})},m=this,_=0;_<o.length;_++)g(_)},e.prototype.showWebView=function(e,t){var o=this;this.closeWebView();var r=this.getRootNode();if(r){var i=Laya.stage.width,l=Laya.stage.height,c=r.addChild(new Laya.Sprite);c.size(i,l),c.pos(-i/2,-l/2),c.graphics.drawRect(0,0,i,l,"#0000007F"),this.showWebViewNode=c,this.registerTouchHander(c,function(e){"click"==e.name&&(s.default.B_INNER_DEBUG&&ULSDK.console.log("click nodeShadow"),c.destroy())});var u=Math.min(.8*i,500),d=Math.min(.8*l,800);i>l&&(u=Math.min(.8*i,800),d=Math.min(.8*l,500));var p=c.addChild(new Laya.Image);p.skin="res/_ulsdk_ui/bg_01.png",p.sizeGrid="40,40,40,40,0",p.size(u,d),p.pos(i/2-p.width/2,l/2-p.height/2);var h=p.addChild(new Laya.Label);h.fontSize=32,h.align="center",h.color="#262626",h.text=e||"\u6807\u9898",h._tf.isChanged=!0,h.pos(p.width/2-h.width/2,20),a.default.httpGet({url:t,timeoutMillisecond:5e3,success:function(e){var t=JSON.parse(e).policyText,r=function(e){function o(){var o=e.call(this)||this;s.default.B_INNER_DEBUG&&ULSDK.console.log("item.construct",o);var n=o.addChild(new Laya.Label);return n.fontSize=18,n.leading=8,n.align="left",n.color="#606060",n.wordWrap=!0,n.width=u-50,n.text=t,n.pos(0,2),n._tf.isChanged=!0,o}return n(o,e),o}(Laya.Box),a=p.addChild(new Laya.List);a.repeatY=1,a.itemRender=r,a.vScrollBarSkin="",a.spaceY=4,a.array=["\u6b63\u6587"],a.pos(25,65),a.size(u-50,d-70),a.selectEnable=!0,a.selectHandler=new Laya.Handler(o,function(e,t,o){s.default.B_INNER_DEBUG&&ULSDK.console.log("selectHander",e,t,o)})},fail:function(){}})}},e.prototype.closeWebView=function(){this.showWebViewNode&&(this.showWebViewNode.destroy(),this.showWebViewNode=null)},e.prototype.showPrivacyDialog=function(e,t,o,r){var a=this;if(s.default.B_INNER_DEBUG&&ULSDK.console.log("MCPanelLaya.showPrivacyDialog"),!this.showPrivacyNode){var l=this.getRootNode();if(!l)return ULSDK.console.warn("MCPanelLaya.showPrivacyDialog nodeRoot not found!"),void i.default.callLater(.1,function(){return a.showPrivacyDialog(e,t,o,r)});var c=Laya.stage.width,u=Laya.stage.height,d=l.addChild(new Laya.Sprite);d.size(c,u),d.pos(-c/2,-u/2),d.graphics.drawRect(0,0,c,u,"#0000007F"),this.showPrivacyNode=d;var p=400,h=d.addChild(new Laya.Image);h.skin="res/_ulsdk_ui/bg_01.png",h.sizeGrid="40,40,40,40,0",h.size(p,400),h.pos(c/2-h.width/2,u/2-h.height/2);var f=h.addChild(new Laya.Label);f.fontSize=32,f.align="center",f.color="#606060",f.text=e||"\u6807\u9898",f._tf.isChanged=!0,f.pos(h.width/2-f.width/2,20);for(var g="\u611f\u8c22\u60a8\u5bf9\u672c\u516c\u53f8\u6e38\u620f\u7684\u652f\u6301\uff0c\u5728\u4f53\u9a8c\u6211\u4eec\u7684\u6e38\u620f\u524d\uff0c\u8bf7\u4ed4\u7ec6\u9605\u8bfb\u5f00\u53d1\u5546\u7684",m=[],_={},v=0;v<t.length;v++){var y=t[v],C=y.name||"",S=y.url||"";m.push(C),_[C]=S}var b="\u4e2d\u7684\u6240\u6709\u6761\u6b3e\uff0c\u5305\u62ec\n        1.\u4e3a\u4e86\u60a8\u6709\u826f\u597d\u7684\u6e38\u620f\u4f53\u9a8c\uff0c\u6211\u4eec\u4f1a\u57fa\u4e8e\u5177\u4f53\u7684\u573a\u666f\u6536\u96c6\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n        2.\u6211\u4eec\u4f1a\u57fa\u4e8e\u5148\u8fdb\u7684\u6280\u672f\u548c\u7ba1\u7406\u63aa\u65bd\u4fdd\u8bc1\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u5b89\u5168\n        3.\u57fa\u4e8e\u60a8\u7684\u6388\u6743\uff0c\u6211\u4eec\u4f1a\u6536\u96c6\u4ee5\u4e0b\u6743\u9650\n\u8bbe\u5907\u4fe1\u606f\uff1a\u5305\u62ec\u8bbe\u5907\u6807\u8bc6\u7b26\u3001MAC\u3001\u673a\u578b\u3001\u54c1\u724c\u3001App\u5305\u540d\u3001App\u7248\u672c\u53f7\u3001IP\u5730\u5740\u3001\u8bbe\u5907\u5206\u8fa8\u7387\u53ca\u50cf\u7d20\u5bc6\u5ea6\u3002\n\u7f51\u7edc\u4fe1\u606f\uff1a\u7f51\u7edc\u8fde\u63a5\u72b6\u6001\u3001\u63a5\u5165\u7f51\u7edc\u7684\u65b9\u5f0f\u548c\u7c7b\u578b\u3001IP\u5730\u5740\u3002\n\u4f7f\u7528\u4fe1\u606f\uff1a\u5305\u62ec\u5e7f\u544a\u5185\u5bb9\u7684\u5c55\u73b0\u3001\u70b9\u51fb\u3001\u4e0b\u8f7d\u3002\n        \u5982\u679c\u60a8\u5bf9\u672c\u9690\u79c1\u653f\u7b56\u6709\u4efb\u4f55\u7591\u95ee,\u8bf7\u901a\u8fc7kefu@ultralisk.cn\u4e0e\u6211\u4eec\u8054\u7cfb\u3002\n        ",R=this,T=function(e){function t(){var t=e.call(this)||this;s.default.B_INNER_DEBUG&&ULSDK.console.log("item.construct",t);var o=t.addChild(new Laya.Label);o.fontSize=18,o.leading=8,o.align="left",o.color="#606060",o.wordWrap=!0,o.width=p-50,o.text=g,o.pos(0,2),o._tf.isChanged=!0;for(var n=o.height,r=function(e){var t=m[e],o=a.addChild(new Laya.Label);o.fontSize=18,o.leading=8,o.align="left",o.color="#6495ED",o.wordWrap=!0,o.width=p-50,o.text="\u300a"+t+"\u300b",o.pos(0,n),o._tf.isChanged=!0,n+=o.height,R.registerTouchHander(o,function(e){"click"==e.name&&R.showWebView(t,_[t])})},a=this,i=0;i<m.length;i++)r(i);var l=t.addChild(new Laya.Label);return l.fontSize=18,l.leading=8,l.align="left",l.color="#606060",l.wordWrap=!0,l.width=p-50,l.text=b,l.pos(0,n),l._tf.isChanged=!0,t}return n(t,e),t}(Laya.Box),A=h.addChild(new Laya.List);A.repeatY=1,A.itemRender=T,A.vScrollBarSkin="",A.spaceY=4,A.array=["\u6b63\u6587"],A.pos(25,65),A.size(p-50,260),A.selectEnable=!0,A.selectHandler=new Laya.Handler(this,function(e,t,o){s.default.B_INNER_DEBUG&&ULSDK.console.log("selectHander",e,t,o)});for(var D=(p-20)/o.length,I=function(e){var t=o[e],n=h.addChild(new Laya.Label);n.fontSize=22,n.align="center",n.valign="middle",n.text=t,1==o.length||e%2==1?(n.color="#ffffff",n.bgColor="#6495ED"):(n.color="#9CB0DE",n.bgColor="#E6E6E6"),n.width=Math.min(.8*D,120),n.height=40,n.x=D*e+(D-n.width)/2+10,n.y=h.height-60,w.registerTouchHander(n,function(t){if("click"==t.name){var o=r[e];if(o instanceof Function)o()||(a.showPrivacyNode.destroy(),a.showPrivacyNode=null);else a.showPrivacyNode.destroy(),a.showPrivacyNode=null}})},w=this,L=0;L<o.length;L++)I(L)}},e.prototype.showReferenceRect=function(e,t,o,n,r,a,l){var c=this;s.default.B_INNER_DEBUG&&ULSDK.console.log("MCPanelLaya.showReferenceRect",e,t,o,n,r,a,l);var u=this.getRootNode();if(!u)return ULSDK.console.warn("MCPanelLaya.showReferenceRect nodeRoot not found!"),void i.default.callLater(.1,function(){c.showReferenceRect(e,t,o,n,r,a,l)});null==a&&(a=.5),null==l&&(l=.5),this.hideReferenceRect(e);var d=Laya.stage.width,p=Laya.stage.height,h=t*d,f=p-o*p,g=u.addChild(new Laya.Sprite);g.size(n,r),g.pivot(n*a,r*(1-l));var m=u.globalToLocal(new Laya.Point(h,f));g.pos(m.x,m.y),g.graphics.drawRect(0,0,n,r,"#00000080");var _=g.addChild(new Laya.Label);_.fontSize=30,_.align="center",_.text=e,_.color="#ffffff",_.pos(g.width/2-_.width/2,g.height/2-_.height/2),this.nodeReferenceRects[e]=g},e.prototype.showReferenceRectFromViewPoint=function(e,t,o,n,r,a,i){s.default.B_INNER_DEBUG&&ULSDK.console.log("MCPanelLaya.showReferenceRectFromViewPoint",e,t,o,n,r,a,i),s.default.B_INNER_DEBUG&&ULSDK.console.log("Laya.Browser.clientWidth",Laya.Browser.clientWidth),s.default.B_INNER_DEBUG&&ULSDK.console.log("Laya.Browser.clientHeight",Laya.Browser.clientHeight),s.default.B_INNER_DEBUG&&ULSDK.console.log("Laya.Browser.pixelRatio",Laya.Browser.pixelRatio),s.default.B_INNER_DEBUG&&ULSDK.console.log("Laya.Browser.width",Laya.Browser.width),s.default.B_INNER_DEBUG&&ULSDK.console.log("Laya.Browser.height",Laya.Browser.height),s.default.B_INNER_DEBUG&&ULSDK.console.log("Laya.stage.width",Laya.stage.width),s.default.B_INNER_DEBUG&&ULSDK.console.log("Laya.stage.height",Laya.stage.height);var l=Laya.Browser.clientWidth/Laya.stage.width,c=Laya.Browser.clientHeight/Laya.stage.height,u=Math.min(l,c);s.default.B_INNER_DEBUG&&ULSDK.console.log("widthRatio",l),s.default.B_INNER_DEBUG&&ULSDK.console.log("heightRatio",c),s.default.B_INNER_DEBUG&&ULSDK.console.log("ratio",u);var d=Laya.stage.width*u,p=Laya.stage.height*u;s.default.B_INNER_DEBUG&&ULSDK.console.log("viewWidth",d),s.default.B_INNER_DEBUG&&ULSDK.console.log("viewHeight",p);var h=t/d,f=1-o/p;this.showReferenceRect(e,h,f,n,r,a,i)},e.prototype.hideReferenceRect=function(e){s.default.B_INNER_DEBUG&&ULSDK.console.log("MCPanelLaya.hideReferenceRect",e);var t=this.nodeReferenceRects[e];t&&!t.destroyed&&t.destroy(),delete this.nodeReferenceRects[e]},e.prototype.hideAllReferenceRects=function(){var e=this;s.default.B_INNER_DEBUG&&ULSDK.console.log("MCPanelLaya.hideAllReferenceRects"),a.default.forEachMap(this.nodeReferenceRects,function(t,o){e.hideReferenceRect(t)})},e.prototype.showNationBanner=function(e,t){var o=this;void 0===t&&(t=1),ULSDK.console.log("MCPanelLaya showNationBanner"),e=e||{nationData:{title:null,desc:null,icon:null,url:null,targetTitle:null},onShow:null,onError:null,onClick:null,onClose:null};var n=this.getRootNode();if(!n)return ULSDK.console.warn("MCPanelLaya.showNationBanner nodeCanvas not found!"),void(e.onError&&e.onError("nodeCanvas not found!"));if(this.bannerRootNode)return ULSDK.console.warn("MCPanelLaya.showNationBanner \u5df2\u7ecf\u6709 banner \u6b63\u5728\u5c55\u793a\u4e2d"),void(e.onError&&e.onError("\u5df2\u7ecf\u6709 banner \u6b63\u5728\u5c55\u793a\u4e2d"));this.bannerShowingObj=e;var r={width:Laya.stage.width,height:Laya.stage.height},a=Math.min(r.width,r.height)*t,i=a/3.5,s=n.addChild(new Laya.Sprite);s.zOrder=1010,s.size(a,i),s.pos(-a/2,r.height/2-i),s.graphics.drawRect(0,0,a,i,"#FFFFFFFF"),this.bannerRootNode=s,this.registerTouchHander(s,function(t){"click"==t.name&&(ULSDK.console.log("MCPanelLaya:click nationBanner"),e.onClick&&e.onClick())});var l={width:34*t,height:34*t},c=s.addChild(new Laya.Image);c.skin="res/_ulsdk_ui/native_adv_close.png",c.size(l.width,l.height),c.pos(a-l.width,0),this.registerTouchHander(c,function(e){"click"==e.name&&o.closeNationBanner()});var u={width:44*t,height:24*t},d=s.addChild(new Laya.Image);d.skin="res/_ulsdk_ui/native_adv_tag.png",d.size(u.width,u.height),d.pos(a-u.width,i-u.height);var p={width:i/9*16,height:i},h=s.addChild(new Laya.Image);h.size(p.width,p.height),h.pos((a-p.width)/2,0);var f=e.nationData.url||null;f&&(h.skin=f);var g=.6*Math.min(i,(a-p.width)/2),m=g,_={width:g,height:g/16*5},v=s.addChild(new Laya.Image);v.size(g,m),v.pos(((a-p.width)/2-g)/2,(i-m)/2-_.height/2);var y=e.nationData.icon||null;y?v.skin=y:v.graphics.drawRect(0,0,g,m,"#DC0032FF");var C=s.addChild(new Laya.Label);C.fontSize=18*t,C.align="center",C.valign="middle",C.color="#ffffff",C.bgColor="#64DC32",C.text=e.nationData.targetTitle||"\u70b9\u51fb\u67e5\u770b",C.size(_.width,_.height),C.pos(((a-p.width)/2-g)/2,(i+m+v.y)/2-_.height/2);var S={width:(a-p.width)/2*.8,height:36*t},b=s.addChild(new Laya.Label);b.fontSize=24*t,b.align="left",b.valign="middle",b.color="#000000",b.text=e.nationData.title||"",b.size(S.width,S.height),b.pos(((a-p.width)/2-S.width)/2+a/2+p.width/2,(i-m)/2);var R={width:S.width,height:80*t},T=s.addChild(new Laya.Label);T.fontSize=18*t,T.wordWrap=!0,T.align="left",T.valign="top",T.color="#000000",T.text=e.nationData.desc||"",T.size(R.width,R.height),T.pos(((a-p.width)/2-S.width)/2+a/2+p.width/2,(i-m)/2+S.height),e.onShow&&e.onShow()},e.prototype.closeNationBanner=function(){this.bannerRootNode&&(this.bannerRootNode.destroy(),this.bannerRootNode=null,ULSDK.console.log("MCPanelLaya:close nationBanner"),this.bannerShowingObj&&this.bannerShowingObj.onClose&&this.bannerShowingObj.onClose(),this.bannerShowingObj=null)},e.prototype.showNationInter=function(e){var t=this;console.log("MCPanelLaya showNationInter"),e=e||{nationData:{title:null,desc:null,icon:null,url:null,targetTitle:null},onShow:null,onError:null,onClick:null,onClose:null};var o=this.getRootNode();if(!o)return ULSDK.console.warn("MCPanelLaya.showNationInter nodeCanvas not found!"),void(e.onError&&e.onError("nodeCanvas not found!"));if(this.interRootNode)return ULSDK.console.warn("MCPanelLaya.showNationInter \u5df2\u7ecf\u6709 inter \u6b63\u5728\u5c55\u793a\u4e2d"),void(e.onError&&e.onError("\u5df2\u7ecf\u6709 inter \u6b63\u5728\u5c55\u793a\u4e2d"));this.interShowingObj=e;var n={width:Laya.stage.width,height:Laya.stage.height},r=o.addChild(new Laya.Sprite);r.zOrder=1e3,r.size(n.width,n.height),r.pos(-n.width/2,-n.height/2),r.graphics.drawRect(0,0,n.width,n.height,"#0000007F"),this.interRootNode=r,this.registerTouchHander(r,function(e){"click"==e.name&&ULSDK.console.log("MCPanelLaya:click nationInter bg")});var a=.86*Math.min(n.width,n.height),i=a,s=r.addChild(new Laya.Sprite);s.size(a,i),s.pos((n.width-a)/2,(n.height-i)/2);var l={width:a,height:a/16*9},c=s.addChild(new Laya.Image);c.size(l.width,l.height),c.pos(0,0);var u=e.nationData.url||null;u?c.skin=u:c.graphics.drawRect(0,0,l.width,l.height,"#FFFFFF"),this.registerTouchHander(c,function(o){"click"==o.name&&(ULSDK.console.log("MCPanelLaya:click nationInter"),e.onClick&&e.onClick(),t.closeNationInter())});var d=34,p=34,h=s.addChild(new Laya.Image);h.skin="res/_ulsdk_ui/native_adv_close.png",h.size(d,p),h.pos(a-d,0),this.registerTouchHander(h,function(e){"click"==e.name&&t.closeNationInter()});var f=44,g=24,m=s.addChild(new Laya.Image);m.skin="res/_ulsdk_ui/native_adv_tag.png",m.size(f,g),m.pos(a-f,l.height-g);var _={width:a/7,height:a/7},v=s.addChild(new Laya.Image);v.size(_.width,_.height),v.pos(.02*a,.02*i);var y=e.nationData.icon||null;y?v.skin=y:v.graphics.drawRect(0,0,_.width,_.height,"#DC0032FF");var C={width:a,height:36},S=s.addChild(new Laya.Label);S.fontSize=24,S.align="center",S.valign="middle",S.color="#FFFFFF",S.text=e.nationData.desc||e.nationData.title||"desc",S.size(C.width,C.height),S.pos(0,c.height+10);var b={width:a/2.5,height:a/2.5/16*5},R=s.addChild(new Laya.Label);R.fontSize=24,R.align="center",R.valign="middle",R.color="#ffffff",R.bgColor="#64DC32",R.text=e.nationData.targetTitle||"\u70b9\u51fb\u67e5\u770b",R.size(b.width,b.height),R.pos((a-b.width)/2,l.height+C.height+20),this.registerTouchHander(R,function(o){"click"==o.name&&(ULSDK.console.log("MCPanelLaya:click nationInter"),e.onClick&&e.onClick(),t.closeNationInter())}),e.onShow&&e.onShow()},e.prototype.closeNationInter=function(){this.interRootNode&&(this.interRootNode.destroy(),this.interRootNode=null,ULSDK.console.log("MCPanelLaya:close nationInter"),this.interShowingObj&&this.interShowingObj.onClose&&this.interShowingObj.onClose(),this.interShowingObj=null)},e}();o.default=c,cc._RF.pop()},{"../ULConsts":"ULConsts","../utils/ULTimer":"ULTimer","../utils/ULTools":"ULTools","./MCItem":"MCItem"}],Manager:[function(e,t,o){"use strict";cc._RF.push(t,"bb517iTiWxAha7AbPfnKLLw","Manager");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../utils/MsgHandler"),a=e("../utils/Tools"),i=cc._decorator,s=i.ccclass,l=(i.property,function(){function e(){}var t;return t=e,e.loadAllManagers=function(){for(var e=0;e<this._managerInstances.length;e++){var t=this._managerInstances[e];try{t.onLoad()}catch(e){console.log("Manager.loadAllManager has error",e?e.message:"unknown")}}},e.init=function(){t._managerInstances.push(this),this._msgHander=new r.default,this._msgHander.startProcMsg()},e.onLoad=function(){this.registerListeners({MSG_RECORD_RESET:this.loadRecord,MSG_LOGIN_UID_CHANGED:this.loadUserRecord}),this._bNetworkResponseRegistered||(this._bNetworkResponseRegistered=!0,this.onRegisterNetworkResponseListeners())},e.loadRecord=function(){},e.saveRecord=function(){},e.loadUserRecord=function(){},e.saveUserRecord=function(){},e.onRegisterNetworkResponseListeners=function(){},e.registerListeners=function(e){var t=this;a.default.forEachMap(e,function(o,n){e[o]=n.bind(t)}),this._msgHander.registerListeners(e)},e.startProcMsg=function(){this._msgHander.startProcMsg()},e.stopProcMsg=function(){this._msgHander.stopProcMsg()},e.sendMsg=function(e,t){this._msgHander.sendMsg(e,t)},e._managerInstances=[],e._bNetworkResponseRegistered=!1,e=t=n([s],e)}());o.default=l,cc._RF.pop()},{"../utils/MsgHandler":"MsgHandler","../utils/Tools":"Tools"}],Math:[function(e,t,o){"use strict";cc._RF.push(t,"b112b9pr2BAEabu9B++9GPt","Math");var n=Math.atan2,r=Math.sqrt,a=Math.cos,i=Math.sin,s=Math.PI,l=180/s,c=Math;c.rotation=function(e,t,o,r){return n(r-t,o-e)*l},c.rotationDelta=function(e,t){for(;e<0||t<0;)e+=360,t+=360;var o=e-t,n=e+360-t;return c.abs(o)<c.abs(n)?o:n},c._wrong_angle3D=function(e,t,o,r,a,i){var s=c.distance(e,o,r,i);return[n(t-a,s)*l,n(o-i,r-e)*l,0]},c.distance=function(e,t,o,n){o||(o=0),n||(n=0);var a=o-e,i=n-t;return r(a*a+i*i)},c.distanceSQ=function(e,t,o,n){o||(o=0),n||(n=0);var r=o-e,a=n-t;return r*r+a*a},c.distance3D=function(e,t,o,n,a,i){n||(n=0),a||(a=0),i||(i=0);var s=n-e,l=a-t,c=i-o;return r(s*s+l*l+c*c)},c.normalize=function(e,t){var o=c.distance(e,t);return 0==o?[0,0]:[e/o,t/o]},c.clamp=function(e,t,o){return e<t?t:e>o?o:e},c.calcPointOnArc=function(e,t,o,n){var r=n*s/180;return[a(r)*o+e,i(r)*o+t]},c.scaleInRange=function(e,t,o,n,r){return t<o?(e<t&&(e=t),e>o&&(e=o)):(e<o&&(e=o),e>t&&(e=t)),(e-t)/(o-t)*(r-n)+n},Math=c,cc._RF.pop()},{}],MsgHandler:[function(e,t,o){"use strict";cc._RF.push(t,"0852c+vjjFK2r/FdcXtbrUO","MsgHandler");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./Tools"),a=cc._decorator,i=a.ccclass,s=(a.property,function(){function e(){this.registeredListeners={},this.startedListeners={},this.bStarted=!1}return e.prototype.registerListeners=function(e){var t=this;r.default.forEachMap(e,function(e,o){null!=t.registeredListeners[e]&&cc.log("[\u8b66\u544a] MsgHandler.registerListeners msg\u91cd\u590d\u6ce8\u518c\uff01 msgName="+e);t.registeredListeners[e]=function(e){try{o(e)}catch(e){console.log("MsgHandler.listener has error!",e.message)}}}),this.bStarted&&this.startProcMsg()},e.prototype.startProcMsg=function(){var e=this;this.bStarted=!0,r.default.forEachMap(this.registeredListeners,function(t,o){if(!e.startedListeners[t]){var n=e.registeredListeners[t];cc.game.on(t,n,e),e.startedListeners[t]=n}})},e.prototype.stopProcMsg=function(){var e=this;r.default.forEachMap(this.startedListeners,function(t,o){cc.game.off(t,o,e)}),this.bStarted=!1,this.startedListeners={}},e.prototype.sendMsg=function(e,t){try{cc.game.emit(e,t)}catch(e){console.log("MsgHandler.sendMsg has exception",e?e.message:"unknown")}},e=n([i],e)}());o.default=s,cc._RF.pop()},{"./Tools":"Tools"}],NetworkAdapterBase:[function(e,t,o){"use strict";cc._RF.push(t,"19f10Ph5gxPjZVUGeVhqU2/","NetworkAdapterBase");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../utils/Tools"),a=e("../utils/Timer"),i=cc._decorator,s=i.ccclass,l=(i.property,function(){function e(){}return e.prototype.setReceiveCallback=function(e){return this.fOnReceive=e,this},e.prototype.setFaildCallback=function(e){return this.fOnFaild=e,this},e.prototype.setTimeOutCallback=function(e){return this.fOnTimeOut=e,this},e.prototype.triggerReceiveCallback=function(e){this.fOnReceive&&this.fOnReceive(e)},e.prototype.triggerFaildCallback=function(e){this.fOnFaild&&this.fOnFaild(e)},e.prototype.triggerTimeOutCallback=function(e){void 0===e&&(e=""),this.fOnTimeOut&&this.fOnTimeOut(e)},e.prototype.send=function(e){var t=this;a.default.callLater(.1,function(o){if("CMD_1"==e.cmd){var n={cmd:e.cmd,info:"response."+e.info};t.triggerReceiveCallback(n)}else if("CMD_2"==e.cmd)if(r.default.random(100)<50){n={cmd:e.cmd,info:"response."+e.info};t.triggerReceiveCallback(n)}else t.triggerFaildCallback("random faild")})},e.prototype.connect=function(){},e.prototype.disconnect=function(){},e.prototype.update=function(e){},e=n([s],e)}());o.NetworkAdapterBase=l,cc._RF.pop()},{"../utils/Timer":"Timer","../utils/Tools":"Tools"}],NetworkAdapterHttpUlServer:[function(e,t,o){"use strict";cc._RF.push(t,"ba6a3sqZGhIbanIFIQ9RJtc","NetworkAdapterHttpUlServer");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./NetworkAdapterBase"),i=e("../utils/Timer"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeout=5e3,t}return n(t,e),t.prototype.setHost=function(e){this.host=e},t.prototype.setUrlFormat=function(e){this.urlFormat=e},t.prototype.setUlServerArg=function(e,t,o,n){this.signkey=e,this.platform=t,this.appid=o,this.channel=n},t.prototype.setTimeout=function(e){this.timeout=e},t.prototype.send=function(e){var t=JSON.stringify(e);t=encodeURIComponent(t);var o=ul.format("signkey=%s&platform=%s&appid=%s&channel=%s&data=%s",this.signkey,this.platform,this.appid,this.channel,t),n=ul.format(this.urlFormat,this.host),r=cc.loader.getXMLHttpRequest();r.onreadystatechange=this.onReadyStateChange.bind(this),r.open("POST",n),r.timeout=1e3*this.timeout,this.xhr=r,this.startTimeoutTimer(),r.send(o)},t.prototype.onReadyStateChange=function(){var e=this.xhr;if(e&&4==e.readyState){if(200==e.status){var t=e.response||"",o={str:null},n=void 0;try{n=JSON.parse(t||"{}")}catch(e){}n?o=n:o.str=t,this.triggerReceiveCallback(o)}else this.triggerFaildCallback(ul.format("http error: readyState=[%s], status=[%s]",e.readyState,e.status));this.stopTimeoutTimer(),this.disconnect()}},t.prototype.disconnect=function(){this.xhr&&(this.xhr.abort(),this.xhr=null)},t.prototype.startTimeoutTimer=function(){var e=this;this.stopTimeoutTimer();var t=new i.default(this.timeout,1,function(){e.stopTimeoutTimer(),e.disconnect(),e.triggerTimeOutCallback()});t.start(),this.timeoutTimer=t},t.prototype.stopTimeoutTimer=function(){this.timeoutTimer&&(this.timeoutTimer.stop(),this.timeoutTimer=null)},t=r([l],t)}(a.NetworkAdapterBase));o.NetworkAdapterHttpUlServer=c,cc._RF.pop()},{"../utils/Timer":"Timer","./NetworkAdapterBase":"NetworkAdapterBase"}],NetworkAdapterHttp:[function(e,t,o){"use strict";cc._RF.push(t,"fd376cjprVCg6tz28Mt+EGm","NetworkAdapterHttp");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./NetworkAdapterBase"),i=e("../utils/Timer"),s=e("../../game/Const"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeout=5e3,t}return n(t,e),t.prototype.setTimeout=function(e){this.timeout=e},t.prototype.send=function(e){var t=e.url;if(t){var o=e.requestType||"GET",n=e.postData||{},r=cc.loader.getXMLHttpRequest();if(r.open(o,t),"POST"==o)(e.sendDataType||s.HttpSendDataType.form)===s.HttpSendDataType.form?r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):r.setRequestHeader("Content-type","application/json;charset=UTF-8"),r.send(n);else r.send();r.onreadystatechange=this.onReadyStateChange.bind(this),r.timeout=this.timeout,this.xhr=r,this.startTimeoutTimer()}},t.prototype.onReadyStateChange=function(){var e=this.xhr;if(e&&4==e.readyState){if(200==e.status){var t={response:e.response||""};this.triggerReceiveCallback(t)}else this.triggerFaildCallback(ul.format("http error: readyState=[%s], status=[%s]",e.readyState,e.status));this.stopTimeoutTimer(),this.disconnect()}},t.prototype.disconnect=function(){if(this.xhr)try{this.xhr.abort(),this.xhr=null}catch(e){console.log("disconnect error1"),this.xhr=null}},t.prototype.startTimeoutTimer=function(){var e=this;this.stopTimeoutTimer();var t=new i.default(this.timeout,1,function(){e.stopTimeoutTimer(),e.disconnect(),e.triggerTimeOutCallback()});t.start(),this.timeoutTimer=t},t.prototype.stopTimeoutTimer=function(){this.timeoutTimer&&(this.timeoutTimer.stop(),this.timeoutTimer=null)},t=r([c],t)}(a.NetworkAdapterBase));o.NetworkAdapterHttp=u,cc._RF.pop()},{"../../game/Const":"Const","../utils/Timer":"Timer","./NetworkAdapterBase":"NetworkAdapterBase"}],NetworkManager:[function(e,t,o){"use strict";cc._RF.push(t,"33b8bnH9ttOA7UWhgWmkZ7E","NetworkManager");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../utils/FSMObject"),i=e("./NetworkTask"),s=cc._decorator,l=s.ccclass,c=(s.property,1),u=2,d=3,p=4,h=function(e){function t(t){var o=e.call(this)||this;return o.bAutoDoNextTask=!0,o.currTask=null,o.tasks=[],o.adapter=null,o.adapter=t,t.setReceiveCallback(o.onReceive.bind(o)),t.setFaildCallback(o.onFaild.bind(o)),o.registerState(c,o.onEnterStandby.bind(o),o.onExecuteStandby.bind(o),null),o.registerState(u,o.onEnterRequest.bind(o),o.onExecuteRequest.bind(o),null),o.registerState(d,o.onEnterResponse.bind(o),o.onExecuteResponse.bind(o),null),o.registerState(p,o.onEnterFaild.bind(o),null,null),o.setNextState(c),o}return n(t,e),t.prototype.setAutoDoNextTaskEnabled=function(e){this.bAutoDoNextTask=e},t.prototype.update=function(t){e.prototype.update.call(this,t),this.adapter.update(t)},t.prototype.onEnterStandby=function(){0},t.prototype.onExecuteStandby=function(){},t.prototype.onEnterRequest=function(){},t.prototype.onExecuteRequest=function(){},t.prototype.onEnterResponse=function(){},t.prototype.onExecuteResponse=function(){this.bAutoDoNextTask&&this.doNextTask()},t.prototype.onEnterFaild=function(){},t.prototype.onReceive=function(e){if(this.getState()==u){var t=this.currTask;t&&(t.setResponseData(e),this.setNextState(d))}},t.prototype.onFaild=function(e){if(this.getState()==u){var t=this.currTask;t&&(t.setFaildMsg(e),this.setNextState(p))}},t.prototype.addTask=function(e,t,o,n,r){if(e){var a=new i.NetworkTask;a.setRequestData(e),a.setOnReceiveCallback(t),a.setOnFaildCallback(o),a.setOnRequestCallback(n),a.setBackgroundEnabled(r),this.tasks.push(a)}},t.prototype.getCurrentTask=function(){return this.tasks[0]},t.prototype.getTasks=function(){return this.tasks},t.prototype.retryCurrentTask=function(){this.getState()==p&&this.setNextState(c)},t.prototype.stopAllTasks=function(){this.tasks=[],this.currTask=null,this.adapter.disconnect(),this.setNextState(c)},t.prototype.doNextTask=function(){this.currTask&&(this.currTask=null,this.tasks.shift(),this.setNextState(c))},t=r([l],t)}(a.FSMObject);o.NetworkManager=h,cc._RF.pop()},{"../utils/FSMObject":"FSMObject","./NetworkTask":"NetworkTask"}],NetworkTask:[function(e,t,o){"use strict";cc._RF.push(t,"fef47QyITxJGal2U1lUImfJ","NetworkTask");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,i=(r.property,function(){function e(){this.fOnRequest=null,this.fOnFaild=null,this.fOnReceive=null,this.faildMsg="",this.responseData=null,this.requestData={}}return e.prototype.setBackgroundEnabled=function(e){return this.bBackgroundEnabled=e,this},e.prototype.isBackgroundEnabled=function(){return this.bBackgroundEnabled},e.prototype.setRequestData=function(e){return this.requestData=e,this},e.prototype.getRequestData=function(){return this.requestData},e.prototype.setResponseData=function(e){return this.responseData=e,this},e.prototype.getResponseData=function(){return this.responseData},e.prototype.setFaildMsg=function(e){return this.faildMsg=e,this},e.prototype.getFaildMsg=function(){return this.faildMsg},e.prototype.setOnRequestCallback=function(e){return this.fOnRequest=e,this},e.prototype.setOnReceiveCallback=function(e){return this.fOnReceive=e,this},e.prototype.setOnFaildCallback=function(e){return this.fOnFaild=e,this},e.prototype.triggerRequestCallback=function(){this.fOnRequest&&this.fOnRequest(this)},e.prototype.triggerResponseCallback=function(){this.fOnReceive&&this.fOnReceive(this)},e.prototype.triggerFaildCallback=function(){this.fOnFaild&&this.fOnFaild(this)},e=n([a],e)}());o.NetworkTask=i,cc._RF.pop()},{}],NodeEx:[function(e,t,o){"use strict";cc._RF.push(t,"339ebTksfFKJowCbg31H2L/","NodeEx"),cc.Node.prototype.calcRecursiveScale=function(){var e=1,t=this;do{e*=t.getScale(),t=t.parent}while(null!=t);return e},cc._RF.pop()},{}],PartResLoadingPipe:[function(e,t,o){"use strict";cc._RF.push(t,"1488fMlHuRG/6MN0DN8dk9r","PartResLoadingPipe");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../manager/mgrCfg"),a=e("./../manager/mgrPool"),i=e("../Const"),s=e("../manager/mgrDirector"),l=e("../../ulframework/utils/Tools"),c=cc._decorator.ccclass,u=function(){function e(e,t){this.resType=null,this.resId=null,this.state=i.ResLoadStatus.UNSTART,this.preloadLimitEndTime=0,this.PRELOAD_LIMIT_TIME_GAP=2,this.resType=e,this.resId=t}return e.prototype.run=function(){this.state=i.ResLoadStatus.LOADING;try{this.doLoad(this.resType,this.resId)}catch(e){}},e.prototype.doLoad=function(e,t){var o=this;if(this.preloadLimitEndTime=l.default.time()+this.PRELOAD_LIMIT_TIME_GAP,e==i.CPartResType.SPRITE)s.default.loadRes(t,cc.SpriteFrame,function(e,t){o.markLoaded()});else if(e==i.CPartResType.SPINE){if(!r.default.get("spine_db",t))return void this.markLoaded();var n=a.default.get("spine",t);this.spine=n}else e==i.CPartResType.ARMATURE?this.markLoaded():e==i.CPartResType.PARTICLE?this.markLoaded():(i.CPartResType.ANINODE,this.markLoaded())},e.prototype.markLoaded=function(){this.state=i.ResLoadStatus.LOADED},e.prototype.isCompleted=function(){return this.spine&&this.state!=i.ResLoadStatus.LOADED?(this.spine.isLoaded()||this.spine.isErrored())&&(this.spine.isLoaded()&&a.default.put(this.spine),this.spine=null,this.markLoaded()):l.default.time()>=this.preloadLimitEndTime&&(this.spine=null,this.markLoaded()),this.state==i.ResLoadStatus.LOADED},e=n([c],e)}();o.default=u,cc._RF.pop()},{"../../ulframework/utils/Tools":"Tools","../Const":"Const","../manager/mgrCfg":"mgrCfg","../manager/mgrDirector":"mgrDirector","./../manager/mgrPool":"mgrPool"}],Particle:[function(e,t,o){"use strict";cc._RF.push(t,"a10b8ZLs3ZDqYswx11SLC3c","Particle");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../game/manager/mgrCfg"),a=e("../../game/manager/mgrDirector"),i=e("../utils/AsyncMonitor"),s=cc._decorator,l=(s.ccclass,s.property,function(e){function t(t,o){var n=e.call(this)||this;return n.bLoaded=!1,n.loadCompletedCallback=o,n._monitor=new i.default(n),n.particleData=r.default.get("particle_db",t),n._loadParticle(),n}return n(t,e),t.prototype._loadParticle=function(){var e=this,t=this.particleData;a.default.loadRes(t.filename,cc.ParticleAsset,function(o,n){if(o)e.loadCompletedCallback&&e.loadCompletedCallback(t.id);else{if(!cc.isValid(e))return cc.loader.release(n),void(e.loadCompletedCallback&&e.loadCompletedCallback(t.id));var r=e.addComponent(cc.ParticleSystem);r.file=n,""!=t.positionType&&(r.positionType=parseInt(t.positionType)),e.bAutoRemoveOnFinish=t.bPlayOnce,e._monitor.registerAsyncValue("bLoaded",!0),e.loadCompletedCallback&&e.loadCompletedCallback(t.id)}})},t.prototype.reset=function(){var e=this.getComponent(cc.ParticleSystem);e&&(e.autoRemoveOnFinish=this.bAutoRemoveOnFinish,e.resetSystem())},t.prototype.stop=function(){var e=this.getComponent(cc.ParticleSystem);e&&(e.autoRemoveOnFinish=this.bAutoRemoveOnFinish,e.stopSystem())},t.prototype.setAutoRemoveOnFinish=function(e){this.bAutoRemoveOnFinish=e;var t=this.getComponent(cc.ParticleSystem);t&&(t.autoRemoveOnFinish=this.bAutoRemoveOnFinish)},t}(cc.Node));o.default=l,cc._RF.pop()},{"../../game/manager/mgrCfg":"mgrCfg","../../game/manager/mgrDirector":"mgrDirector","../utils/AsyncMonitor":"AsyncMonitor"}],PoolManager:[function(e,t,o){"use strict";cc._RF.push(t,"a121cUYpppN0Zm8VXjSKZa4","PoolManager");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./Tools"),a=e("./Timer"),i=cc._decorator,s=i.ccclass,l=(i.property,function(){function e(){this.pools={},this.poolConfigs={}}return e.prototype._getPool=function(e,t){var o=this.pools[e];o||(o={},this.pools[e]=o);var n=o[t];return n||(n=[],o[t]=n),n},e.prototype._safeRelease=function(e){},e.prototype.register=function(e,t,o,n,r,a){this.poolConfigs[e]={creator:t,resetter:o,cleanuper:n,destroyer:r,maxCount:a}},e.prototype.get=function(e,t,o){if(e){var n=this.poolConfigs[e];if(n){null==t&&(t="__default__");var r=this._getPool(e,t).shift();r&&r.parent&&(r=null);var i=function(e){o&&a.default.callLater(.06,function(){o(e)})},s=!1;return r||((r=n.creator(t,i))&&(r.__pool_id=e,r.__pool_key=t),s=!0),r&&(n.resetter&&n.resetter(r),r.__pool_flag_inpool=null),!s&&o&&i(t),r}o&&o(t)}else o&&o(t)},e.prototype.put=function(e){if(e){var t=e.__pool_id,o=e.__pool_key;if(t&&o&&cc.isValid(e)){var n=this.poolConfigs[t];if(n&&!e.__pool_flag_inpool){var r=this._getPool(t,o);r.length<n.maxCount?(n.cleanuper&&n.cleanuper(e),e.__pool_flag_inpool=!0,r.push(e)):(n.destroyer&&n.destroyer(e),this._safeRelease(e))}}}},e.prototype.clean=function(e,t){var o=this;r.default.forEachMap(this.pools,function(n,a){if(!e||e==n){var i=o.poolConfigs[n].destroyer;r.default.forEachMap(a,function(e,n){if(!t||t==e){for(var r=0;r<n.length;r++){var s=n[r];i&&i(s),o._safeRelease(s)}a[e]=null}})}})},e.prototype.contain=function(e,t){if(e&&t&&this.poolConfigs[e]){var o=this._getPool(e,t);if(o&&!(o.length<=0)){var n=o[o.length-1];if(!n||!n.parent)return!0}}},e=n([s],e)}());o.default=l,cc._RF.pop()},{"./Timer":"Timer","./Tools":"Tools"}],ResourceNode:[function(e,t,o){"use strict";cc._RF.push(t,"1e3fduvswlAOKI4jgT4uj0C","ResourceNode");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../game/Const"),i=e("../../game/manager/mgrPool"),s=e("../../game/manager/mgrDirector"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(t,o,n){var r,a,i=e.call(this)||this;t instanceof Array?(r=t[0],a=t[1]):(r=t,a=o);new cc.Node;return i.resType=r,i.resId=a,i.movName=n,i.loadRes(),i}return n(t,e),t.prototype._onPreDestroy=function(){this.unloadRes(),e.prototype._onPreDestroy&&e.prototype._onPreDestroy.call(this)},t.prototype.loadRes=function(){this.unloadRes();var e=this.resType,t=this.resId;if(e==a.CPartResType.SPRITE){var o=s.default.createSpriteNode(t);o.parent=this,this.nodeSprite=o}else if(e==a.CPartResType.SPINE){var n=i.default.get("spine",t);n&&(n.parent=this,this.spine=n,this.movName&&this.spine.play(this.movName,!0))}else if(e==a.CPartResType.PARTICLE){var r=i.default.get("particle",t);r&&(r.parent=this,this.particle=r)}else if(e==a.CPartResType.ANINODE){var l=i.default.get("animNode",t);l&&(l.parent=this,l.play())}},t.prototype.unloadRes=function(){var e=this.resType;this.resId;e==a.CPartResType.SPRITE?(cc.isValid(this.nodeSprite)&&this.nodeSprite.destroy(),this.nodeSprite=null):e==a.CPartResType.SPINE&&(cc.isValid(this.spine)&&(this.spine.removeFromParent(),i.default.put(this.spine)),this.spine=null)},t.prototype.tryPlaySpineMov=function(e,t){cc.isValid(this.spine)&&this.spine.play(e,t)},t=r([c],t)}(cc.Node));o.default=u,cc._RF.pop()},{"../../game/Const":"Const","../../game/manager/mgrDirector":"mgrDirector","../../game/manager/mgrPool":"mgrPool"}],ReuseLayouterHBox:[function(e,t,o){"use strict";cc._RF.push(t,"80ad6lBxMFIz5G/a2oiNaax","ReuseLayouterHBox");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,i=(r.property,function(){function e(){this.cellSize=cc.size(0,0),this.gap=0,this.pending=0,this.containerHeight=0,this.cellTop=0}return e.prototype.setCellSize=function(e,t){return e instanceof cc.Size?this.cellSize=e:this.cellSize=cc.size(e,t||0),this.tryBuildHeight(),this},e.prototype.setGap=function(e){return this.gap=e,this},e.prototype.setPending=function(e){return this.pending=e,this},e.prototype.setContainerHeight=function(e){return this.containerHeight=e,this.tryBuildHeight(),this},e.prototype.tryBuildHeight=function(){var e=this.cellSize.height,t=this.containerHeight;0!=e&&0!=t&&(this.cellTop=Math.floor((t-e)/2))},e.prototype.getPos=function(e){var t=this.pending+e*(this.cellSize.width+this.gap),o=-this.cellTop;return t+=this.cellSize.width/2,o-=this.cellSize.height/2,cc.v2(t,o)},e.prototype.getCellSize=function(){return this.cellSize},e.prototype.setListSize=function(e){this.setContainerHeight(e.height)},e.prototype.getContainerSize=function(e){var t=2*this.pending+this.cellSize.width*e+this.gap*(e-1);return cc.size(t,this.containerHeight)},e.prototype.getPending=function(){return this.pending},e.prototype.getJumpOffset=function(){return cc.v2(-this.pending,0)},e.prototype.isHorizontalScroll=function(){return!0},e.prototype.isVerticalScroll=function(){return!1},e=n([a],e)}());o.default=i,cc._RF.pop()},{}],ReuseLayouterHGrid:[function(e,t,o){"use strict";cc._RF.push(t,"35f5czwDvtMA6NDCYUSl2jj","ReuseLayouterHGrid");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,i=(r.property,function(){function e(){this.cellSize=cc.size(0,0),this.rows=0,this.hgap=0,this.vgap=0,this.pending=0,this.containerHeight=0,this.cellTop=0}return e.prototype.setCellSize=function(e,t){return e instanceof cc.Size?this.cellSize=e:this.cellSize=cc.size(e,t||0),this.tryBuildTop(),this},e.prototype.setRows=function(e){return this.rows=e,this.tryBuildTop(),this},e.prototype.setGap=function(e,t){return this.hgap=e,this.vgap=t,this},e.prototype.setPending=function(e){return this.pending=e,this},e.prototype.setContainerHeight=function(e){return this.containerHeight=e,this.tryBuildTop(),this},e.prototype.tryBuildTop=function(){var e=this.rows,t=this.cellSize.height,o=this.containerHeight,n=this.vgap;if(0!=e&&0!=t&&0!=o){var r=e*t+(e-1)*n;this.cellTop=Math.floor((o-r)/2)}},e.prototype.getPos=function(e){var t=Math.floor(e/this.rows),o=e%this.rows,n=this.pending+t*(this.cellSize.width+this.hgap),r=-this.cellTop-o*(this.cellSize.height+this.vgap);return n+=this.cellSize.width/2,r-=this.cellSize.height/2,cc.v2(n,r)},e.prototype.getCellSize=function(){return this.cellSize},e.prototype.setListSize=function(e){this.setContainerHeight(e.height)},e.prototype.getContainerSize=function(e){var t=Math.ceil(e/this.rows),o=2*this.pending+this.cellSize.width*t+this.hgap*(t-1);return cc.size(o,this.containerHeight)},e.prototype.getPending=function(){return this.pending},e.prototype.getJumpOffset=function(){return cc.v2(-this.pending,0)},e.prototype.isHorizontalScroll=function(){return!0},e.prototype.isVerticalScroll=function(){return!1},e=n([a],e)}());o.default=i,cc._RF.pop()},{}],ReuseLayouterVBox:[function(e,t,o){"use strict";cc._RF.push(t,"b1de5hw1QtHOp9XvYtOMMAS","ReuseLayouterVBox");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,i=(r.property,function(){function e(){this.cellSize=cc.size(0,0),this.gap=0,this.pending=0,this.containerWidth=0,this.cellLeft=0}return e.prototype.setCellSize=function(e,t){return e instanceof cc.Size?this.cellSize=e:this.cellSize=cc.size(e,t||0),this.tryBuildLeft(),this},e.prototype.setGap=function(e){return this.gap=e,this},e.prototype.setPending=function(e){return this.pending=e,this},e.prototype.setContainerWidth=function(e){return this.containerWidth=e,this.tryBuildLeft(),this},e.prototype.tryBuildLeft=function(){var e=this.cellSize.width,t=this.containerWidth;0!=e&&0!=t&&(this.cellLeft=Math.floor((t-e)/2))},e.prototype.getPos=function(e){var t=this.cellLeft,o=-this.pending-e*(this.cellSize.height+this.gap);return t+=this.cellSize.width/2,o-=this.cellSize.height/2,cc.v2(t,o)},e.prototype.getCellSize=function(){return this.cellSize},e.prototype.setListSize=function(e){this.setContainerWidth(e.width)},e.prototype.getContainerSize=function(e){var t=2*this.pending+this.cellSize.height*e+this.gap*(e-1);return cc.size(this.containerWidth,t)},e.prototype.getPending=function(){return this.pending},e.prototype.getJumpOffset=function(){return cc.v2(0,-this.pending)},e.prototype.isHorizontalScroll=function(){return!1},e.prototype.isVerticalScroll=function(){return!0},e=n([a],e)}());o.default=i,cc._RF.pop()},{}],ReuseLayouterVGrid:[function(e,t,o){"use strict";cc._RF.push(t,"103774IVeNDcKnA1XUhN5I/","ReuseLayouterVGrid");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,i=(r.property,function(){function e(){this.cellSize=cc.size(0,0),this.cols=0,this.hgap=0,this.vgap=0,this.pending=0,this.containerWidth=0,this.cellLeft=0}return e.prototype.setCellSize=function(e,t){return e instanceof cc.Size?this.cellSize=e:this.cellSize=cc.size(e,t||0),this.tryBuildLeft(),this},e.prototype.setCols=function(e){return this.cols=e,this.tryBuildLeft(),this},e.prototype.setGap=function(e,t){return this.hgap=e,this.vgap=t,this},e.prototype.setPending=function(e){return this.pending=e,this},e.prototype.setContainerWidth=function(e){return this.containerWidth=e,this.tryBuildLeft(),this},e.prototype.tryBuildLeft=function(){var e=this.cols,t=this.cellSize.width,o=this.containerWidth,n=this.hgap;if(0!=e&&0!=t&&0!=o){var r=e*t+(e-1)*n;this.cellLeft=Math.floor((o-r)/2)}},e.prototype.getPos=function(e){var t=e%this.cols,o=Math.floor(e/this.cols),n=this.cellLeft+t*(this.cellSize.width+this.hgap),r=-this.pending-o*(this.cellSize.height+this.vgap);return n+=this.cellSize.width/2,r-=this.cellSize.height/2,cc.v2(n,r)},e.prototype.getCellSize=function(){return this.cellSize},e.prototype.setListSize=function(e){this.setContainerWidth(e.width)},e.prototype.getContainerSize=function(e){var t=Math.ceil(e/this.cols),o=2*this.pending+this.cellSize.height*t+this.vgap*(t-1);return cc.size(this.containerWidth,o)},e.prototype.getPending=function(){return this.pending},e.prototype.getJumpOffset=function(){return cc.v2(0,-this.pending)},e.prototype.isHorizontalScroll=function(){return!1},e.prototype.isVerticalScroll=function(){return!0},e=n([a],e)}());o.default=i,cc._RF.pop()},{}],ReuseList:[function(e,t,o){"use strict";cc._RF.push(t,"4aa41F5bWpCm4a0dSfgUa1x","ReuseList");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../game/view/node/LayerColor"),i=e("../utils/Timer"),s=e("./ViewBase"),l=e("../utils/Tools"),c=e("../utils/SyncMonitor"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){var t=e.call(this)||this;return t._CELL_ID=0,t.datas=[],t.cells=[],t.cellPool=[],t.bInit=!1,t.bDebugLineEnabled=!1,t.bClippingEnabled=!0,t.bReuseEnabled=!0,t.bElasticEnabled=!0,t.bTouchScrollEnabled=!0,t.bAsyncSetterEnabled=!1,t.fOnContainerMoved=null,t.monitor=new c.default(t),t}return n(t,e),t.prototype.onAsyncTimerSpan=function(e){var t=this.asyncSetterTasks;if(null!=t&&t.length>0){var o=t[0];t.splice(0,1);var n=o[0],r=o[1];this.setter(n,r),n.active=!0}},t.prototype.init=function(){var e=this,t=this.layouter,o=this.getContentSize();if(t.setListSize(o),this.bDebugLineEnabled){var n=new a.default(cc.color(255,255,0,63));n.parent=this,n.setContentSize(this.getContentSize()),n.setAnchorPoint(this.getAnchorPoint())}var r=new cc.Node;r.setAnchorPoint(0,1),r.parent=this,this.nodeContainer=r;var i=this.addComponent(cc.ScrollView);i.horizontal=t.isHorizontalScroll(),i.vertical=t.isVerticalScroll(),i.content=r,i.cancelInnerEvents=!1,i.elastic=this.bElasticEnabled;var s=i.onEnable;if(i.onEnabled=function(){s(),e._tryApplayTouchScrollEnabled()},this._tryApplayTouchScrollEnabled(),this.bClippingEnabled)this.addComponent(cc.Mask);this.on("scrolling",this.onScrolling,this)},t.prototype.reloadList=function(){var e=this;this.layouter,this.creator,this.setter;var t=!1;this.bInit||(this.bInit=!0,this.init(),t=!0);var o=this.layouter,n=this.datas,r=(this.cells,this.getContentSize()),a=o.getContainerSize(n.length),s=Math.max(r.width,a.width),l=Math.max(r.height,a.height),c=this.getComponent(cc.ScrollView),u=c.getScrollOffset();t&&(u=cc.v2(0,0),i.default.callLater(.1,function(){cc.isValid(c)&&(c.scrollToOffset(cc.v2(0,0),0),e.onContainerMoved(),e.monitor.registerAsyncValue("bAdjusted",!0))},this)),this.nodeContainer.setContentSize(s,l),c.scrollToOffset(u,0);for(var d=0;d<this.cells.length;d++){var p=this.cells[d];this.putCellToPool(p)}this.cells=[],this.onContainerMoved()},t.prototype.updateCellState=function(){for(var e=this,t=this.layouter,o=this.nodeContainer,n=this.datas,r=this.cells,a=this.width*this.anchorX,i=this.height*this.anchorY,s=o.x+a,l=o.y+i,c=this.getContentSize(),u=-(l-c.height),d=-l,p=-s,h=-s+c.width,f=t.getCellSize(),g=f.width,m=f.height,_=function(o){if(!e.bReuseEnabled)return!0;var n=t.getPos(o);return d<n.y+m/2&&n.y-m/2<u&&p<n.x+g/2&&n.x-g/2<h},v=[],y=0;y<r.length;y++){if(_(R=(S=r[y]).__data_index))break;v.push(y)}for(var C=v.length-1;C>=0;C--){var S=r[y=v[C]];r.splice(y,1),this.putCellToPool(S)}var b=r[0];if(b)for(var R=b.__data_index-1;R>=0&&_(R);R--){S=this.getCellFromPool();r.splice(0,0,S);var T=n[R];this._callCellSetter(S,T),S.__data_index=R,S.zIndex=R,S.data=T,S.setPosition(t.getPos(R))}else for(R=0;R<n.length;R++)if(_(R)){S=this.getCellFromPool();r.push(S);T=n[R];this._callCellSetter(S,T),S.__data_index=R,S.zIndex=R,S.data=T,S.setPosition(t.getPos(R))}for(y=r.length-1;y>=0;y--){if(_(R=(S=r[y]).__data_index))break;this.putCellToPool(S),r.splice(y,1)}var A=r[r.length-1];if(A)for(R=A.__data_index+1;R<n.length;R++)if(_(R)){S=this.getCellFromPool();r.push(S);T=n[R];this._callCellSetter(S,T),S.__data_index=R,S.zIndex=R,S.data=T,S.setPosition(t.getPos(R))}},t.prototype.getCellFromPool=function(){var e=this.cellPool,t=null;if(e.length>0&&(t=e.splice(0,1)[0]),!t){var o=this.layouter.getCellSize();if(this._CELL_ID++,(t=new s.default).parent=this.nodeContainer,t.setContentSize(o),t.__cell_id=this._CELL_ID,this.creator(t),this.bDebugLineEnabled){var n=new cc.Node;n.setContentSize(o),n.parent=t;var r=n.addComponent(cc.Graphics);r.clear(),r.lineWidth=2,r.strokeColor=cc.color(255,255,0,255),r.rect(0,0,o.width,o.height),r.stroke();var a=new cc.Node;a.parent=t;var i=a.addComponent(cc.Label);i.string=t.__cell_id.toString(),i.fontSize=14,a.setAnchorPoint(0,1),a.setPosition(-o.width/2+2,o.height/2-2),a.color=cc.color(255,255,0,255)}}return t.active=!0,t},t.prototype.putCellToPool=function(e){e.active=!1,this.cellPool.push(e)},t.prototype._calcPercentPos=function(e,t){var o=this.getContentSize(),n=this.nodeContainer.getContentSize(),r=e/(n.width-o.width),a=t/(n.height-o.height);return a=1-a,r=l.default.clampf(r,0,1),a=l.default.clampf(a,0,1),cc.v2(r,a)},t.prototype._callCellSetter=function(e,t){if(this.bAsyncSetterEnabled){var o=this.asyncSetterTasks;null==o&&(o=[],this.asyncSetterTasks=o),e.active=!1;for(var n=o.length-1;n>=0;n--){o[n][0]==e&&o.splice(n,1)}o.push([e,t])}else this.setter(e,t)},t.prototype.setLayouter=function(e){return this.layouter=e,this},t.prototype.setCreator=function(e){return this.creator=e,this},t.prototype.setSetter=function(e){return this.setter=e,this},t.prototype.setDatas=function(e){return this.datas=e,this.reloadList(),this},t.prototype.getDatas=function(){return this.datas},t.prototype.getActiveCellsByFilter=function(e){for(var t=[],o=0;o<this.cells.length;o++){var n=this.cells[o];e(n)&&t.push(n)}return t},t.prototype.setDebugLineEnabled=function(e){return this.bDebugLineEnabled=e,this},t.prototype.setReuseEnabled=function(e){return this.bReuseEnabled=e,this},t.prototype.setClippingEnabled=function(e){return this.bClippingEnabled=e,this},t.prototype.setElasticEnabled=function(e){return this.bElasticEnabled=e,this},t.prototype.setTouchScrollEnabled=function(e){return this.bTouchScrollEnabled=e,this._tryApplayTouchScrollEnabled(),this},t.prototype._tryApplayTouchScrollEnabled=function(){var e=this.getComponent(cc.ScrollView);cc.isValid(e)&&(this.bTouchScrollEnabled?e._registerEvent():e._unregisterEvent())},t.prototype.setAsyncSetterEnabled=function(e){return this.bAsyncSetterEnabled=e,e?null==this.asyncTimer&&(this.asyncTimer=new i.default(1/60,-1,this.onAsyncTimerSpan.bind(this)),this.asyncTimer.startAndBindToNode(this)):null!=this.asyncTimer&&this.asyncTimer.stop(),this},t.prototype.setOnContainerMoved=function(e){return this.fOnContainerMoved=e,this},t.prototype.refreshActiveCells=function(){for(var e=this.cells,t=this.datas,o=0;o<e.length;o++){var n=e[o],r=t[n.__data_index];this._callCellSetter(n,r)}},t.prototype.jumpToHead=function(){this.scrollToHead(0,!1)},t.prototype.jumpToTail=function(){this.scrollToTail(0,!1)},t.prototype.jumpToIndex=function(e,t){this.scrollToIndex(e,t,0,!1)},t.prototype.jumpToData=function(e,t){this.scrollToData(e,t,0,!1)},t.prototype.scrollToHead=function(e,t){var o=this;void 0===e&&(e=.3),void 0===t&&(t=!0);var n=this.getComponent(cc.ScrollView);this.monitor.monitorAsyncValue("bAdjusted",!0,function(){n.stopAutoScroll(),n.vertical&&n.horizontal?n.scrollToTopLeft(e,t):n.vertical?n.scrollToTop(e,t):n.horizontal&&n.scrollToLeft(e,t),e<=0&&o.onContainerMoved()})},t.prototype.scrollToTail=function(e,t){var o=this;void 0===e&&(e=.3),void 0===t&&(t=!0);var n=this.getComponent(cc.ScrollView);this.monitor.monitorAsyncValue("bAdjusted",!0,function(){n.stopAutoScroll(),n.vertical&&n.horizontal?n.scrollToBottomRight(e,t):n.vertical?n.scrollToBottom(e,t):n.horizontal&&n.scrollToRight(e,t),e<=0&&o.onContainerMoved()})},t.prototype.scrollToIndex=function(e,t,o,n){var r=this;void 0===o&&(o=.3),void 0===n&&(n=!0);var a=this.getComponent(cc.ScrollView),i=this.layouter.getPos(e),s=this.layouter.getCellSize(),l=i.x,c=-i.y,u=this.layouter.getJumpOffset();l+=-s.width/2+u.x,c+=-s.height/2+u.y,t&&(l+=t.x,c+=t.y);var d=this._calcPercentPos(l,c);this.monitor.monitorAsyncValue("bAdjusted",!0,function(){a.stopAutoScroll(),a.scrollTo(d,o,n),r.onContainerMoved()})},t.prototype.scrollToData=function(e,t,o,n){void 0===o&&(o=.3),void 0===n&&(n=!0);var r=this.datas.indexOf(e);r<0||this.scrollToIndex(r,t,o,n)},t.prototype.onContainerMoved=function(e){this.updateCellState(),this.fOnContainerMoved&&this.fOnContainerMoved(this,this.cells)},t.prototype.onScrolling=function(e){this.onContainerMoved(e)},t=r([d],t)}(cc.Node));o.default=p,cc._RF.pop()},{"../../game/view/node/LayerColor":"LayerColor","../utils/SyncMonitor":"SyncMonitor","../utils/Timer":"Timer","../utils/Tools":"Tools","./ViewBase":"ViewBase"}],ReusePageViewEx:[function(e,t,o){"use strict";cc._RF.push(t,"5ea1eD/akNGAK/7R5fJ7sLP","ReusePageViewEx");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ReuseList"),i=e("../utils/Tools"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){var t=e.call(this)||this;return t.fOnCellMoved=null,t.indexWhenBegan=0,t.touchBeganTime=0,i.default.registerTouchHandler(t,t.onTouchHandler.bind(t)),t}return n(t,e),t.prototype.onTouchHandler=function(e){if("began"==e.name){var t=this.calcNearestIndex();this.indexWhenBegan=t,this.touchBeganTime=(new Date).getTime()}else if("ended"==e.name||"cancelled"==e.name){var o=!0;this.layouter&&(o=this.layouter.isHorizontalScroll());t=this.calcNearestIndex();var n=e.getStartLocation(),r=e.getLocation(),a=((new Date).getTime()-this.touchBeganTime)/100,i=(n.x-r.x)/a;i=o?(n.x-r.x)/a:(n.y-r.y)/a;var s=this.datas.length-1;t>=0&&(t==this.indexWhenBegan&&(i>=50&&t<s?t+=1:i<=-50&&t>0&&(t-=1)),0==t&&0==this.indexWhenBegan&&i<0||t==s&&this.indexWhenBegan==s&&i>0||this.scrollToIndex(t,null,.5,!0))}},t.prototype.calcNearestIndex=function(){var e=!0;return this.layouter&&(e=this.layouter.isHorizontalScroll()),e?this.calcNearestIndexHorizontal():this.calcNearestIndexVertical()},t.prototype.calcNearestIndexHorizontal=function(){for(var e=this.getListCenterInScrollX(),t=Number.POSITIVE_INFINITY,o=-1,n=0;n<this.cells.length;n++){var r=this.cells[n],a=(r.getContentSize(),r.getPosition().x),i=Math.abs(e-a);i<t&&(t=i,o=r.__data_index)}return o},t.prototype.calcNearestIndexVertical=function(){for(var e=this.getListCenterInScrollY(),t=Number.POSITIVE_INFINITY,o=-1,n=0;n<this.cells.length;n++){var r=this.cells[n],a=(r.getContentSize(),r.getPosition().y),i=Math.abs(a-e);i<t&&(t=i,o=r.__data_index)}return o-1},t.prototype.getCellByDataIndex=function(e){for(var t=0;t<this.cells.length;t++){var o=this.cells[t];if(o.__data_index==e)return o}},t.prototype.getListCenterInScrollX=function(){var e=this.getComponent(cc.ScrollView).getScrollOffset();return this.getContentSize().width/2-e.x},t.prototype.getListCenterInScrollY=function(){var e=this.getComponent(cc.ScrollView).getScrollOffset(),t=-(this.getContentSize().height/2)-e.y;return this.layouter&&(t+=this.layouter.getCellSize().height/2),t},t.prototype.onContainerMoved=function(t){if(e.prototype.onContainerMoved.call(this),this.fOnCellMoved){var o=!0;if(this.layouter&&(o=this.layouter.isHorizontalScroll()),o)for(var n=this.getListCenterInScrollX(),r=0;r<this.cells.length;r++){var a=(p=this.cells[r]).getContentSize(),s=p.getPosition().x,l=Math.abs(n-s),c=i.default.scaleInRange(l,5,a.width,0,Math.PI/2),u=i.default.scaleInRange(Math.sin(c),0,1,1,0);this.fOnCellMoved(p,u,l)}else{var d=this.getListCenterInScrollY();for(r=0;r<this.cells.length;r++){a=(p=this.cells[r]).getContentSize();var p,h=p.getPosition().y+a.height/2;l=Math.abs(h-d),c=i.default.scaleInRange(l,5,a.height,0,Math.PI/2),u=i.default.scaleInRange(Math.sin(c),0,1,1,0);this.fOnCellMoved(p,u,l)}}}},t.prototype.setOnCellMovedListener=function(e){this.fOnCellMoved=e},t=r([l],t)}(a.default));o.default=c,cc._RF.pop()},{"../utils/Tools":"Tools","./ReuseList":"ReuseList"}],ReusePageView:[function(e,t,o){"use strict";cc._RF.push(t,"c367eE6q3VNTZkEoa927dK1","ReusePageView");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ReuseList"),i=e("../utils/Tools"),s=e("../utils/Timer"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=e.call(this)||this;return t.fOnCellMoved=null,t.indexWhenBegan=0,t.touchBeganTime=0,i.default.registerTouchHandler(t,t.onTouchHandler.bind(t),null,!1,!0),t}return n(t,e),t.prototype.onTouchHandler=function(e){var t=this;if("began"==e.name){var o=this.calcNearestIndex();this.indexWhenBegan=o,this.touchBeganTime=(new Date).getTime()}else if("ended"==e.name||"cancelled"==e.name){var n=this.calcNearestIndex(),r=e.getStartLocation(),a=e.getLocation(),i=((new Date).getTime()-this.touchBeganTime)/100,l=(r.x-a.x)/i,c=this.datas.length-1;n>=0&&(n==this.indexWhenBegan&&(l>=50&&n<c?n+=1:l<=-50&&n>0&&(n-=1)),0==n&&0==this.indexWhenBegan&&l<0||n==c&&this.indexWhenBegan==c&&l>0||s.default.callLater(1/60,function(){t.scrollToIndex(n,null,.5,!0)},this))}},t.prototype.calcNearestIndex=function(){for(var e=this.getListCenterInScrollX(),t=Number.POSITIVE_INFINITY,o=-1,n=0;n<this.cells.length;n++){var r=this.cells[n],a=(r.getContentSize(),r.getPosition().x),i=Math.abs(e-a);i<t&&(t=i,o=r.__data_index)}return o},t.prototype.getCellByDataIndex=function(e){for(var t=0;t<this.cells.length;t++){var o=this.cells[t];if(o.__data_index==e)return o}},t.prototype.getListCenterInScrollX=function(){var e=this.getComponent(cc.ScrollView).getScrollOffset();return this.getContentSize().width/2-e.x},t.prototype.getListCenterInScrollY=function(){var e=this.getComponent(cc.ScrollView).getScrollOffset(),t=-(this.getContentSize().height/2)-e.y;return this.layouter&&(t+=this.layouter.getCellSize().height/2),t},t.prototype.onContainerMoved=function(t){if(e.prototype.onContainerMoved.call(this),this.fOnCellMoved){var o=!0;if(this.layouter&&(o=this.layouter.isHorizontalScroll()),o)for(var n=this.getListCenterInScrollX(),r=0;r<this.cells.length;r++){var a=(p=this.cells[r]).getContentSize(),s=p.getPosition().x,l=Math.abs(n-s),c=i.default.scaleInRange(l,5,a.width,0,Math.PI/2),u=i.default.scaleInRange(Math.sin(c),0,1,1,0);this.fOnCellMoved(p,u,l)}else{var d=this.getListCenterInScrollY();for(r=0;r<this.cells.length;r++){a=(p=this.cells[r]).getContentSize();var p,h=p.getPosition().y;l=Math.abs(h-d),c=i.default.scaleInRange(l,5,a.height,0,Math.PI/2),u=i.default.scaleInRange(Math.sin(c),0,1,1,0);this.fOnCellMoved(p,u,l)}}}},t.prototype.setOnCellMovedListener=function(e){this.fOnCellMoved=e},t=r([c],t)}(a.default));o.default=u,cc._RF.pop()},{"../utils/Timer":"Timer","../utils/Tools":"Tools","./ReuseList":"ReuseList"}],SceneBase:[function(e,t,o){"use strict";cc._RF.push(t,"5b505L37y1I6Zz2EV3Ib1Z3","SceneBase");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ViewBase"),i=cc._decorator,s=i.ccclass,l=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.refreshSize(),this.registerListeners({MSG_VIEW_RESIZE:this.onMsgViewResize}),this.sendMsg("MSG_SCENE_LOADED")},t.prototype.refreshSize=function(){var e=cc.director.getScene().getChildByName("Canvas"),t=this.nodeResource.getContentSize();t=e.getContentSize(),this.setContentSize(t),this.nodeResource.setContentSize(t);for(var o=this.nodeResource.getComponentsInChildren(cc.Widget),n=0;n<o.length;n++){o[n].updateAlignment()}},t.prototype.onMsgViewResize=function(){this.refreshSize()},t=r([s],t)}(a.default));o.default=l,cc._RF.pop()},{"./ViewBase":"ViewBase"}],ScleableButton:[function(e,t,o){"use strict";cc._RF.push(t,"d73bdn/VphF27UW9pqVYirD","ScleableButton");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../utils/Tools"),i=cc._decorator,s=i.ccclass,l=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fOnTouchCallback=null,t._bFocused=!1,t.isAction=!0,t.bEnableSound=!0,t.bEnableSingleTouch=!0,t.preTouchTime=0,t.signTouchGap=.5,t}var o;return n(t,e),o=t,t.setSoundPlayHandler=function(e){this.soundPlayHandler=e},t.setTouchListenerHandler=function(e){this.touchListenerHandler=e},t.prototype.onLoad=function(){},t.prototype.onEnable=function(){a.default.registerTouchHandler(this.node,this.onTouchHandler.bind(this))},t.prototype.onDisable=function(){a.default.unregisterTouchHandler(this.node)},t.prototype.registerOnTouchCallback=function(e){this.fOnTouchCallback=e},t.prototype.triggerOnTouchCallback=function(e){this.fOnTouchCallback&&this.fOnTouchCallback(e)},t.prototype._doDownAction=function(e,t){if(0!=this.isAction){var o=this.node;o.stopAllActions(),o.runAction(cc.scaleTo(.1,.85*e,.85*t).easing(cc.easeIn(2)))}},t.prototype._doUpAction=function(e,t){if(0!=this.isAction){var o=this.node;o.stopAllActions(),o.runAction(cc.sequence(cc.scaleTo(.1,1.1*e,1.1*t).easing(cc.easeIn(2)),cc.scaleTo(.075,.95*e,.95*t),cc.scaleTo(.03,1*e,1*t)))}},t.prototype._doCancellAction=function(e,t){if(0!=this.isAction){var o=this.node;o.stopAllActions(),o.runAction(cc.sequence(cc.scaleTo(.15,1.05*e,1.05*t).easing(cc.easeQuadraticActionInOut()),cc.scaleTo(.1,1*e,1*t).easing(cc.easeOut(2))))}},t.prototype.setActionEnable=function(e){this.isAction=e},t.prototype.setSoundEnable=function(e){this.bEnableSound=e},t.prototype.setSingleTouchEnable=function(e){this.bEnableSingleTouch=e},t.prototype.setSingleTouchGap=function(e){this.signTouchGap=e||0},t.prototype.onTouchHandler=function(e){if(o.touchListenerHandler&&"function"==typeof o.touchListenerHandler&&o.touchListenerHandler(),"began"==e.name||this.bValidTouch){if("began"==e.name){if(this.bValidTouch=!1,this.bEnableSingleTouch?(!this.preTouchTime||a.default.time()-this.preTouchTime>=this.signTouchGap)&&(this.bValidTouch=!0):this.bValidTouch=!0,!this.bValidTouch)return;this.touchDownRect=a.default.calcNodeBoundingBoxToWorld(this.node),this._doDownAction(1,1),this._bFocused=!0,this.bEnableSound&&"function"==typeof o.soundPlayHandler&&o.soundPlayHandler()}else if("moved"==e.name){var t=this.touchDownRect.contains(e.getLocation());this._bFocused?t||(this._bFocused=!1,this._doCancellAction(1,1)):t&&(this._bFocused=!0,this._doDownAction(1,1))}else this._bFocused&&(this._bFocused=!1,this._doUpAction(1,1)),this.preTouchTime=a.default.time();this.triggerOnTouchCallback(e)}},t.soundPlayHandler=null,t.touchListenerHandler=null,t=o=r([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../utils/Tools":"Tools"}],Spine:[function(e,t,o){"use strict";cc._RF.push(t,"70a27a8rPxBe6fHsejteGfY","Spine");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../utils/AsyncMonitor"),l=e("../../game/manager/mgrCfg"),c=e("../../game/manager/mgrDirector"),u=e("../utils/Tools"),d=cc._decorator,p=d.ccclass,h=(d.property,function(e){function t(t,o){var n=e.call(this)||this;n.bLoaded=!1,n.waitPlayParamsArr=[],n.loadCompletedCallback=o,n.spineData=l.default.get("spine_db",t),n._monitor=new s.default(n);n.addComponent(sp.Skeleton);return n._loadSkeletonData(),n}return n(t,e),t.prototype._loadSkeletonData=function(){var e=this,t=this.spineData;c.default.loadRes(t.jsonFileName,sp.SkeletonData,function(o,n){if(o)return e.bErrored=!0,void(e.loadCompletedCallback&&e.loadCompletedCallback(e.spineData.id));if(!e||!cc.isValid(e))return e.bErrored=!0,void(e.loadCompletedCallback&&e.loadCompletedCallback(e.spineData.id));var r=e.getComponent(sp.Skeleton);r&&(r.skeletonData=n,r.defaultSkin="normal",r.defaultAnimation=t.mov_1,r.premultipliedAlpha=1==t.bPremultipliedAlpha,r._updateSkeletonData(),e._monitor.registerAsyncValue("bLoaded",!0),r.timeScale=1,r.setToSetupPose(),e.setMovMix(),e.tryDoPlay(),e.loadCompletedCallback&&e.loadCompletedCallback(e.spineData.id))})},t.prototype.isLoaded=function(){return this.bLoaded},t.prototype.isErrored=function(){return this.bErrored},t.prototype.getSpineId=function(){return this.spineData?this.spineData.id:null},t.prototype.reset=function(){return a(this,void 0,void 0,function(){var e;return i(this,function(t){return this.active=!0,this.rotation=0,this.setPosition(0,0),this.scaleX=this.spineData.scaleX||1,this.scaleY=this.spineData.scaleY||1,this.color=cc.color(255,255,255),this.opacity=255,this.bLoaded?((e=this.getComponent(sp.Skeleton)).timeScale=1,e.setToSetupPose(),[2]):[2]})})},t.prototype.play=function(e,t){return a(this,void 0,void 0,function(){return i(this,function(o){return e instanceof Array||(e=[e]),null==t&&(t=!0),e.length<=0?[2]:(this.waitPlayParamsArr.push({movNames:e,bLoop:t}),this.tryDoPlay(),[2])})})},t.prototype.setMovMix=function(){var e=this.spineData,t=this.getComponent(sp.Skeleton);if(e&&t&&e.bMix)for(var o=0;o<10;o++){var n="mov_"+o;if(!e[n])break;for(var r=e[n],a=0;a<10;a++)if(o!=a){var i="mov_"+a;if(!e[i])break;var s=e[i];t.setMix(r,s,.2),t.setMix(s,r,.2)}}},t.prototype.tryDoPlay=function(){if(this.waitPlayParamsArr&&0!=this.waitPlayParamsArr.length&&this.bLoaded&&!this.bDoingPlay){this.bDoingPlay=!0;var e=this.waitPlayParamsArr.length,t=this.waitPlayParamsArr[e-1],o={};for(var n in t)o[n]=t[n];this.waitPlayParamsArr.splice(0,e);var r=o.movNames||[],a=o.bLoop;this.doPlay(r,a),this.bDoingPlay=!1,this.tryDoPlay()}},t.prototype.doPlay=function(e,t){for(var o=this.spineData,n=this.getComponent(sp.Skeleton),r=null,a=e.length-1;a>=0;a--){if(o[s=e[a]]){r=o[s];break}}if(r)for(var i=0;i<e.length;i++){var s;if(o[s=e[i]]){s=o[s];var l=!!t&&i==e.length-1;0==i?(n.defaultAnimation=r,n.setAnimation(0,s,l)):n.addAnimation(0,s,l)}}},t.prototype.setTimeScale=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return this.bLoaded?[3,2]:[4,this.waitLoaded()];case 1:t.sent(),t.label=2;case 2:return cc.isValid(this)?(this.getComponent(sp.Skeleton).timeScale=e,[2]):[2]}})})},t.prototype.registerEventCallback=function(e){var t=this;if(this.unregisterEventCallback(),e){var o=function(o,n){var r=o.animation,a=r?r.name:"unknown",i="unknown";u.default.forEachMap(t.spineData,function(e,t){if(t==a)return i=e,!0});var s={name:n,movName:a,movKey:i,bLoop:o.loop};e(s)},n=this.getComponent(sp.Skeleton);n.setStartListener(function(e){o(e,"start")}),n.setEndListener(function(e){o(e,"end")}),n.setCompleteListener(function(e){o(e,"complete")}),n.setEventListener(function(e){o(e,"event")})}},t.prototype.unregisterEventCallback=function(){var e=this.getComponent(sp.Skeleton);e.setStartListener(function(e){}),e.setEndListener(function(e){}),e.setCompleteListener(function(e){}),e.setEventListener(function(e){})},t.prototype.waitLoaded=function(){return this._monitor.monitorAsyncValue("bLoaded",!0)},t=r([p],t)}(cc.Node));o.default=h,cc._RF.pop()},{"../../game/manager/mgrCfg":"mgrCfg","../../game/manager/mgrDirector":"mgrDirector","../utils/AsyncMonitor":"AsyncMonitor","../utils/Tools":"Tools"}],SpriteEx:[function(e,t,o){"use strict";cc._RF.push(t,"2ebb8PW5WZNko0gGOLpZht+","SpriteEx"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../game/manager/mgrDirector");cc.Sprite.prototype.loadSpriteFrame=function(e){var t=this;n.default.loadRes(e,cc.SpriteFrame,function(e,o){e||cc.isValid(t)&&(t.spriteFrame=o)})},cc.Sprite.prototype.loadSpriteFrameAndKeepSize=function(e){var t=this,o=this.node;o&&n.default.loadRes(e,cc.SpriteFrame,function(e,n){if(!e&&cc.isValid(t)){t.__origin_width||(t.__origin_width=o.width*o.scaleX,t.__origin_height=o.height*o.scaleY);var r=t.__origin_width,a=t.__origin_height;t.spriteFrame=n,o.scale=Math.min(r/o.width,a/o.height)}})},cc.Sprite.prototype.setSpriteFrameAndKeepSize=function(e){var t=this.node;if(t&&cc.isValid(e)){this.__origin_width||(this.__origin_width=t.width*t.scaleX,this.__origin_height=t.height*t.scaleY);var o=this.__origin_width,n=this.__origin_height;this.spriteFrame=e,t.scale=Math.min(o/t.width,n/t.height)}},cc._RF.pop()},{"../../game/manager/mgrDirector":"mgrDirector"}],SpriteFrameSet:[function(e,t,o){"use strict";cc._RF.push(t,"ede1cUn5ndGEqYLyd5DSMoQ","SpriteFrameSet");var n=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});t.exports=n,cc._RF.pop()},{}],StageScriptBase:[function(e,t,o){"use strict";cc._RF.push(t,"8bf1dA2MKVMrKsJTi3GXjGu","StageScriptBase");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../manager/mgrCosmetic"),a=e("../manager/mgrDirector"),i=e("../manager/mgrPlayer"),s=e("../manager/mgrSound"),l=e("../manager/mgrStage"),c=e("../manager/mgrTip"),u=e("../manager/mgrStatics"),d=e("../Const"),p=e("../manager/mgrPacking"),h=e("../manager/mgrI18n"),f=cc._decorator.ccclass,g=function(){function e(){this.listPartRegisteredNodes={}}return e.prototype.onRoomSceneLoaded=function(e){e.labelTitle.node.active=!1,e.spriteSubmitNormal.node.active=!0,e.spriteSubmitPvp.node.active=!1,s.default.play(407),cc.log("----gameScene.context=",e.context);var t=r.default.getSubjectByPackingId(e.context.packingId);e.nodeSubjectModeBase.active=!0,l.default.addSubjectNodes([t],e.nodeSubjectMode)},e.prototype.onRoomSceneFinishStage=function(e,t){void 0===t&&(t=null);e.stage;a.default.warpDialogWithSmallEffect("vProductResultDialog",{bImmediately:!0,packingId:e.context.packingId,stageId:e.context.stageId,structAvatar:e.structAvatar,backSceneName:e.context.backSceneName,backSceneContext:e.context.backSceneContext,bOnlyCloseRoom:e.context.bOnlyCloseRoom,fCloseRoom:function(){e.closeDialog(!0)}},function(){})},e.prototype.onResultDress=function(e){},e.prototype.showShopDialog=function(e){e.sendMsg("MSG_GUIDE_POINT",{id:"vRoomScene.buttonShop.click"});var t=e.selectedPartType,o=i.default.getItemAmount(12127)<=0?1:0;a.default.warpDialogWithSmallEffect("vShopDialog",{focusPartType:t,bGuideFlag:o,fOnDialogClose:function(){e.tryGuide()}})},e.prototype.onResultSceneFinished=function(e){if(cc.log("----resultScene.context=",e.context),e.context.bOnlyCloseRoom)e.sendMsg("MSG_SHOW_BILDING_STORE_SOFTLY",{resultDialog:e}),e.context.fCloseRoom&&e.context.fCloseRoom();else if(e.context.backSceneName)e.context.backSceneContext=e.context.backSceneContext||{},e.context.backSceneContext.bFromGame=!0,a.default.warpDialogWithEffect(e.context.backSceneName,e.context.backSceneContext);else{i.default.getItemAmount(d.default.ITEM_ID_AVATAR_ORDER)>=i.default.getItemAmount(d.default.ITEM_ID_MAX_AVATAR_ORDER)*(2/3)?a.default.warpDialogWithEffect("vBuildingStoreDialog"):a.default.warpDialogWithEffect("vHudDialog",{bFromGame:!0})}},e.prototype.onMsgNetworkResponse=function(e,t){},e.prototype.isAutoSelectPart=function(){return!0},e.prototype.isEnableRecordVideo=function(){return!0},e.prototype.isAutoSave=function(){return!0},e.prototype.getCommitButtonText=function(){return h.default.getText("StageScriptBase.1")},e.prototype.onListTypeLoaded=function(e){},e.prototype.onListPartLoaded=function(e){},e.prototype.onListPetLoaded=function(e){},e.prototype.onPartSelected=function(e,t){e.sendMsg("MSG_GUIDE_POINT",{id:ul.format("vRoomDialog.nodePart%d.click",t)})},e.prototype.onSelectPartAmountCheck=function(e,t){if(i.default.getItemAmount(t)<=0)return c.default.showMsgTip(h.default.getText("StageScriptBase.2")),c.default.showItemDetailDialog(t,1,{bCanBuy:!0,reason:"\u70b9\u51fb_\u623f\u95f4\u754c\u9762\u8d2d\u4e70\u90e8\u4ef6"}),!0},e.prototype.onBeforeSelectPart=function(e,t){return!1},e.prototype.onTypeSelected=function(e,t){e.sendMsg("MSG_GUIDE_POINT",{id:ul.format("vRoomDialog.nodePartType%d.click",t)})},e.prototype.onPetSelected=function(e,t){},e.prototype.onTouchButtonBack=function(e){c.default.alertPrompt2(h.default.getText("StageScriptBase.3"),h.default.getText("StageScriptBase.4"),h.default.getText("StageScriptBase.5"),h.default.getText("StageScriptBase.6"),function(){},function(){var t=e.stage||{};ul.format("\u9000\u51fa\u5173\u5361\u6362\u88c5_\u76f8\u518c");u.default.statisOnStageEnd(t.id,!1),e.context.bOnlyCloseRoom?(e.sendMsg("MSG_SHOW_BILDING_STORE_SOFTLY"),e.closeDialog()):e.context.backSceneName?(e.context.backSceneContext=e.context.backSceneContext||{},e.context.backSceneContext.bFromGame=!0,a.default.warpDialogWithEffect(e.context.backSceneName,e.context.backSceneContext)):a.default.warpDialogWithEffect("vHudDialog",{bFromGame:!0})},"ad_banner_back_pass_dialog")},e.prototype.checkSellPacking=function(e){var t=e.structAvatar.serializeToText();if(!p.default.isUnpackAvatar(t))return c.default.alertPrompt(h.default.getText("StageScriptBase.3"),h.default.getText("StageScriptBase.7"),h.default.getText("StageScriptBase.8"),function(){},"ad_banner_check_sell_packing"),!0},e=n([f],e)}();o.default=g,cc._RF.pop()},{"../Const":"Const","../manager/mgrCosmetic":"mgrCosmetic","../manager/mgrDirector":"mgrDirector","../manager/mgrI18n":"mgrI18n","../manager/mgrPacking":"mgrPacking","../manager/mgrPlayer":"mgrPlayer","../manager/mgrSound":"mgrSound","../manager/mgrStage":"mgrStage","../manager/mgrStatics":"mgrStatics","../manager/mgrTip":"mgrTip"}],StageScriptFree:[function(e,t,o){"use strict";cc._RF.push(t,"43609+yA+hL7ahWCdmj4m2f","StageScriptFree");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../manager/mgrCosmetic"),i=e("../manager/mgrDirector"),s=e("../manager/mgrOfflinePvp"),l=e("../manager/mgrPlayer"),c=e("../manager/mgrTip"),u=e("./StageScriptBase"),d=e("../manager/mgrStatics"),p=e("../manager/mgrI18n"),h=cc._decorator.ccclass,f=function(e){function t(){return e.call(this)||this}return n(t,e),t.prototype._refreshPvpData=function(e){e.nodeSubject.active=!1,e.buttonSubmit.active=!1,e.labelTitle.node.active=!0,e.labelTitle.string="\u81ea\u7531\u642d\u914d"},t.prototype.onRoomSceneLoaded=function(e){e.buttonSubmit.active=!1,this._refreshPvpData(e)},t.prototype.onRoomSceneFinishStage=function(e,t){void 0===t&&(t=null);var o=function(){c.default.alertPrompt2(p.default.getText("StageScriptFree.1"),p.default.getText("StageScriptFree.2"),p.default.getText("StageScriptFree.3"),p.default.getText("StageScriptFree.4"),function(){i.default.warpDialogWithEffect("vHudDialog")},function(){l.default.addItemAmount(915,1,"\u4efb\u52a1\u7269\u54c1"),a.default.saveLastAvatar(e.structAvatar),s.default.replacePlayerData(e.structAvatar.serializeToText(),1,e)},"ad_banner_room_scene_finish")};l.default.getName()?o():i.default.openDialog("vInputNameDialog",{fOnDialogClose:function(){o()}})},t.prototype.onMsgNetworkResponse=function(e,t){this._refreshPvpData(e)},t.prototype.onTouchButtonBack=function(e){c.default.alertPrompt2(p.default.getText("StageScriptFree.1"),p.default.getText("StageScriptFree.5"),p.default.getText("StageScriptFree.3"),p.default.getText("StageScriptFree.6"),function(){},function(){var t=e.stage;ul.format("\u9000\u51fa\u5173\u5361\u6362\u88c5_\u81ea\u7531");d.default.statisOnStageEnd(t.id,!1),i.default.warpDialogWithEffect("vHudDialog",{bFromGame:!0})},"ad_banner_back_free_pass_dialog")},t.prototype.isEnableRecordVideo=function(){return!1},t.prototype.getCommitButtonText=function(){return p.default.getText("StageScriptFree.7")},t=r([h],t)}(u.default);o.default=f,cc._RF.pop()},{"../manager/mgrCosmetic":"mgrCosmetic","../manager/mgrDirector":"mgrDirector","../manager/mgrI18n":"mgrI18n","../manager/mgrOfflinePvp":"mgrOfflinePvp","../manager/mgrPlayer":"mgrPlayer","../manager/mgrStatics":"mgrStatics","../manager/mgrTip":"mgrTip","./StageScriptBase":"StageScriptBase"}],StageScriptGuide1:[function(e,t,o){"use strict";cc._RF.push(t,"31837oVPdFB8oV6Hj5FwtMt","StageScriptGuide1");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./StageScriptBase"),i=cc._decorator.ccclass,s=function(e){function t(){var t=e.call(this)||this;return t.listPartRegisteredNodes={},t.listTypeRegisteredNodes={},t}return n(t,e),t.prototype.onRoomSceneLoaded=function(e){e.labelTitle.node.active=!1,e.buttonBack.node.active=!0},t.prototype.isAutoSelectPart=function(){return!1},t.prototype.onListPartLoaded=function(e){},t.prototype.onListTypeLoaded=function(e){},t.prototype.onTypeSelected=function(e,t){e.sendMsg("MSG_GUIDE_POINT",{id:ul.format("vRoomDialog.nodePartType%d.click",t)})},t.prototype.onPartSelected=function(e,t){e.sendMsg("MSG_GUIDE_POINT",{id:ul.format("vRoomDialog.nodePart%d.click",t)})},t.prototype.onPartChanged=function(e){},t=r([i],t)}(a.default);o.default=s,cc._RF.pop()},{"./StageScriptBase":"StageScriptBase"}],StageScriptPkMirror:[function(e,t,o){"use strict";cc._RF.push(t,"d5a62IVE+1NVrGiYNao3z2n","StageScriptPkMirror");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../manager/mgrCosmetic"),i=e("../manager/mgrDirector"),s=e("../manager/mgrPkMirror"),l=e("../manager/mgrPlayer"),c=e("../manager/mgrTip"),u=e("./StageScriptBase"),d=e("../manager/mgrStatics"),p=e("../manager/mgrStage"),h=e("../manager/mgrSound"),f=e("../manager/mgrAd"),g=e("../manager/mgrI18n"),m=cc._decorator.ccclass,_=function(e){function t(){var t=e.call(this)||this;return t.listPartRegisteredNodes={},t.listTypeRegisteredNodes={},t}return n(t,e),t.prototype.onRoomSceneLoaded=function(e){e.buttonSubmit.active=!1,e.labelTitle.node.active=!1,e.nodeSubjectModeBase.active=!0,p.default.addStageSubject(s.default.seasonSubjectStageId,e.nodeSubjectMode),h.default.play(163)},t.prototype.onRoomSceneFinishStage=function(e,t){var o=function(){var t=e.stage,o=e.context.targetStruct,n=a.default.calcGrade(t,e.structAvatar).score,r=a.default.calcGrade(t,o).score,c=e.structAvatar.calcWeight(),u=c+n;r=o.calcWeight()+r;var d=s.default.finishStage(t.id,u,r),p=d.newStarNum||0,h=e.structAvatar.serializeToText();s.default.replacePlayerData(h,c,p),a.default.saveLastAvatar(e.structAvatar),l.default.addItemAmount(912,1,"\u4efb\u52a1\u7269\u54c1"),d.bSuccess&&l.default.addItemAmount(913,1,"\u4efb\u52a1\u7269\u54c1"),i.default.warpDialogWithEffect("vPkMirrorResultDialog",{stageId:t.id,structAvatar:e.structAvatar,result:d,targetStruct:o,targetName:e.context.targetName,gameSceneContext:e.context,usedTime:e.getViewDisplayedTime()},function(){e.closeDialog()})};l.default.getName()?o():i.default.warpDialogWithSmallEffect("vInputNameDialog",{fOnDialogClose:function(){o()}})},t.prototype.onResultSceneFinished=function(e){i.default.warpDialogWithEffect("vPkMirrorDialog",{bFromGame:!0},function(){e.closeDialog()})},t.prototype.onSelectPartAmountCheck=function(e,t){if(l.default.getItemAmount(t)<=0&&!e.trialingPartDict[t])return c.default.showMsgTip(g.default.getText("StageScriptPkMirror.1")),f.default.triggerAdEvent("video_room_trail_part",null,!0),!0},t.prototype.onMsgNetworkResponse=function(e,t){},t.prototype.onTouchButtonBack=function(e){c.default.alertPrompt2(g.default.getText("StageScriptPkMirror.2"),g.default.getText("StageScriptPkMirror.3"),g.default.getText("StageScriptPkMirror.4"),g.default.getText("StageScriptPkMirror.5"),function(){},function(){var t=e.stage;ul.format("\u9000\u51fa\u5173\u5361\u6362\u88c5_\u955c\u50cf");d.default.statisOnStageEnd(t.id,!1),e.closeDialog(!0),i.default.warpDialogWithEffect("vPkMirrorDialog",{bFromGame:!0},function(){e.closeDialog()})},"ad_banner_back_mirror_pass_dialog")},t.prototype.isEnableRecordVideo=function(){return!1},t.prototype.getCommitButtonText=function(){return g.default.getText("StageScriptPkMirror.6")},t.prototype.checkSellPacking=function(e){return!1},t=r([m],t)}(u.default);o.default=_,cc._RF.pop()},{"../manager/mgrAd":"mgrAd","../manager/mgrCosmetic":"mgrCosmetic","../manager/mgrDirector":"mgrDirector","../manager/mgrI18n":"mgrI18n","../manager/mgrPkMirror":"mgrPkMirror","../manager/mgrPlayer":"mgrPlayer","../manager/mgrSound":"mgrSound","../manager/mgrStage":"mgrStage","../manager/mgrStatics":"mgrStatics","../manager/mgrTip":"mgrTip","./StageScriptBase":"StageScriptBase"}],StageScriptPvp:[function(e,t,o){"use strict";cc._RF.push(t,"c9ddeBnyjZAf6nvzshl6ASB","StageScriptPvp");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../manager/mgrCfg"),i=e("../manager/mgrCosmetic"),s=e("../manager/mgrDirector"),l=e("../manager/mgrGuide"),c=e("../manager/mgrOfflinePvp"),u=e("../manager/mgrPlayer"),d=e("../manager/mgrSound"),p=e("../manager/mgrTip"),h=e("./StageScriptBase"),f=e("../manager/mgrStatics"),g=e("../manager/mgrAd"),m=e("../manager/mgrI18n"),_=cc._decorator.ccclass,v=function(e){function t(){var t=e.call(this)||this;return t.listPartRegisteredNodes={},t.listTypeRegisteredNodes={},t}return n(t,e),t.prototype._refreshPvpData=function(e){var t="\u81ea\u7531\u642d\u914d";(cc.log("------------------mgrOfflinePvp.seasonSubjectId=",c.default.seasonSubjectId),c.default.seasonSubjectId)?(e.nodeSubject.active=!0,e.buttonSubmit.active=!0,t=(a.default.get("pvp_offline_subject_db",c.default.seasonSubjectId)||{}).name||t):(e.nodeSubject.active=!1,e.buttonSubmit.active=!1);e.labelTitle.node.active=!0,e.labelTitle.string=t},t.prototype.onRoomSceneLoaded=function(e){e.buttonSubmit.active=!1,this._refreshPvpData(e),e.buttonBack.node.active=!!c.default.getPlayerData(),d.default.play(704),l.default.registerGuideNode("vRoomDialog.nodeSubjectArea",e.nodeSubjectArea)},t.prototype.onRoomSceneFinishStage=function(e,t){void 0===t&&(t=null);var o=function(){p.default.alertPrompt2(m.default.getText("StageScriptPvp.1"),m.default.getText("StageScriptPvp.2"),m.default.getText("StageScriptPvp.3"),m.default.getText("StageScriptPvp.4"),null,function(){u.default.addItemAmount(915,1,"\u4efb\u52a1\u7269\u54c1"),i.default.saveLastAvatar(e.structAvatar),c.default.replacePlayerData(e.structAvatar.serializeToText(),e.structAvatar.calcWeight(),e)},"ad_banner_room_scene_finish_pvp")};u.default.getName()?o():s.default.openDialog("vInputNameDialog",{fOnDialogClose:function(){o()}})},t.prototype.onSelectPartAmountCheck=function(e,t){if(u.default.getItemAmount(t)<=0&&!e.trialingPartDict[t])return p.default.showMsgTip(m.default.getText("StageScriptPvp.5")),g.default.triggerAdEvent("video_room_trail_part",null,!0),!0},t.prototype.onMsgNetworkResponse=function(e,t){this._refreshPvpData(e)},t.prototype.onTouchButtonBack=function(e){cc.log("----gameScene.context=",e.context),p.default.alertPrompt2(m.default.getText("StageScriptPvp.1"),m.default.getText("StageScriptPvp.6"),m.default.getText("StageScriptPvp.3"),m.default.getText("StageScriptPvp.7"),function(){},function(){var t=e.stage;ul.format("\u9000\u51fa\u5173\u5361\u6362\u88c5_\u5468\u8d5b");f.default.statisOnStageEnd(t.id,!1),e.context.backSceneName?s.default.warpDialogWithEffect(e.context.backSceneName,{bFromGame:!0}):s.default.warpDialogWithEffect("vPvpPkDialog",{bFromGame:!0},function(){e.closeDialog()})},"ad_banner_back_pvp_pass_dialog")},t.prototype.isEnableRecordVideo=function(){return!1},t.prototype.isAutoSave=function(){return!1},t.prototype.getCommitButtonText=function(){return m.default.getText("StageScriptPvp.8")},t.prototype.checkSellPacking=function(e){return!1},t=r([_],t)}(h.default);o.default=v,cc._RF.pop()},{"../manager/mgrAd":"mgrAd","../manager/mgrCfg":"mgrCfg","../manager/mgrCosmetic":"mgrCosmetic","../manager/mgrDirector":"mgrDirector","../manager/mgrGuide":"mgrGuide","../manager/mgrI18n":"mgrI18n","../manager/mgrOfflinePvp":"mgrOfflinePvp","../manager/mgrPlayer":"mgrPlayer","../manager/mgrSound":"mgrSound","../manager/mgrStatics":"mgrStatics","../manager/mgrTip":"mgrTip","./StageScriptBase":"StageScriptBase"}],SyncMonitor:[function(e,t,o){"use strict";cc._RF.push(t,"0b58d7tK/tEBoGUgJV8oyre","SyncMonitor");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,i=(r.property,function(){function e(e){this.allListeners={},this.container=e||this}return e.prototype._getListeners=function(e){var t=this.allListeners[e];return null==t&&(t=[],this.allListeners[e]=t),t},e.prototype._addListener=function(e,t){var o=this._getListeners(e);o.indexOf(t)>=0||o.push(t)},e.prototype._removeListener=function(e,t){var o=this._getListeners(e),n=o.indexOf(t);n>=0&&o.splice(n,1)},e.prototype._triggerListener=function(e,t){for(var o=this._getListeners(e),n=[],r=0;r<o.length;r++)n.push(o[r]);for(r=0;r<n.length;r++){(0,n[r])(t)}},e.prototype.registerAsyncValue=function(e,t){this.container[e]=t,this._triggerListener(e,t)},e.prototype.unregisterAsyncValue=function(e){return this.registerAsyncValue(e,null)},e.prototype.getCurrentAsyncValue=function(e){return this.container[e]},e.prototype.monitorAsyncValue=function(e,t,o){var n=this;if("function"==typeof o)if("function"==typeof t){var r,a=t,i=this.container[e];if(a(i))o(i);else r=function(t){a(t)&&(n._removeListener(e,r),o(t))},this._addListener(e,r)}else{var s;if((i=this.container[e])==t)o(i);else s=function(r){r==t&&(n._removeListener(e,s),o(r))},this._addListener(e,s)}},e.prototype.monitorAsyncValueExists=function(e,t){this.monitorAsyncValue(e,function(e){return null!=e},t)},e=n([a],e)}());o.default=i,cc._RF.pop()},{}],Timer:[function(e,t,o){"use strict";cc._RF.push(t,"f3111ePoeBAwIQ8CGVyY16w","Timer");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,i=(r.property,function(){function e(e,t,o){this._repeatCount=-1,this._span=1,this._callback=null,this._intervalId=null,this._count=0,this._span=e,this._repeatCount=t,this._callback=o}var t;return t=e,e.callLater=function(e,o,n){var r=new t(e,1,o);return n?r.startAndBindToNode(n):r.start(),r},e.callLoop=function(e,o,n){var r=new t(e,-1,o);if(1==n){var a=n;r.start(a)}else n instanceof cc.Node?r.startAndBindToNode(n):r.start();return r},e.prototype._onSpan=function(){if(this._count++,this._callback)try{this._callback(this)}catch(e){cc.warn("\u8b66\u544a] Timer._onSpan callback has error",e)}this._repeatCount>=0&&this._count>=this._repeatCount&&this.stop()},e.prototype.isRunning=function(){return null!=this._intervalId},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"span",{get:function(){return this._span},enumerable:!0,configurable:!0}),e.prototype.startAndBindToNode=function(e){var t=this,o=new cc.Node,n=o.addComponent(cc.Component);return 0==n._isOnLoadCalled?n.onLoad=function(){t.start(!0)}:this.start(!0),n.onDestroy=function(){t.stop()},o.parent=e,this._bindingNode=o,this},e.prototype.start=function(e){return void 0===e&&(e=!1),this.stop(),this._callback?(!e&&this._repeatCount,this._count=0,this._intervalId=setInterval(this._onSpan.bind(this),1e3*this.span),this):this},e.prototype.stop=function(){return null!=this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),this},e=t=n([a],e)}());o.default=i,cc._RF.pop()},{}],ToggleButton:[function(e,t,o){"use strict";cc._RF.push(t,"fc77exoHPxAqbzs3a2jFTTr","ToggleButton");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../utils/Tools"),i=cc._decorator,s=i.ccclass,l=i.property,c=i.executeInEditMode,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeNormal=null,t.nodePressed=null,t.defaultIsPressed=!1,t.fOnTouchCallback=null,t._bFocused=!1,t.isAction=!0,t.fPressedHandler=null,t.fUnpressedHandler=null,t}var o;return n(t,e),o=t,t.setSoundPlayHandler=function(e){this.soundPlayHandler=e},t.prototype.onLoad=function(){this.updateDefaultStatus()},t.prototype.onEnable=function(){a.default.registerTouchHandler(this.node,this.onTouchHandler.bind(this))},t.prototype.onDisable=function(){a.default.unregisterTouchHandler(this.node)},t.prototype.update=function(){0},t.prototype.registerOnTouchCallback=function(e){this.fOnTouchCallback=e},t.prototype.triggerOnTouchCallback=function(e){this.fOnTouchCallback&&this.fOnTouchCallback(e)},t.prototype.getNormalStatusNode=function(){return this.nodeNormal},t.prototype.getPressedStatusNode=function(){return this.nodePressed},t.prototype.registerPressedHandler=function(e){this.fPressedHandler=e},t.prototype.registerUnpressedHandler=function(e){this.fUnpressedHandler=e},t.prototype.setPressStatus=function(e){this.nodePressed&&(this.nodePressed.active=!!e),this.nodeNormal&&(this.nodeNormal.active=!e)},t.prototype.isPressed=function(){return this.nodePressed?!!this.nodePressed.active:this.nodeNormal?!this.nodeNormal.active:void 0},t.prototype._doDownAction=function(){this.fPressedHandler&&this.fPressedHandler()},t.prototype._doUpAction=function(){var e=this.isPressed();this.nodePressed&&(this.nodePressed.active=!e),this.nodeNormal&&(this.nodeNormal.active=e),this.fUnpressedHandler&&this.fUnpressedHandler()},t.prototype._doCancellAction=function(){this._doUpAction()},t.prototype.updateDefaultStatus=function(){this.nodePressed&&(this.nodePressed.active=this.defaultIsPressed),this.nodeNormal&&(this.nodeNormal.active=!this.defaultIsPressed)},t.prototype.onTouchHandler=function(e){if("began"==e.name)this.touchDownRect=a.default.calcNodeBoundingBoxToWorld(this.node),this._doDownAction(),this._bFocused=!0,"function"==typeof o.soundPlayHandler&&o.soundPlayHandler();else if("moved"==e.name){var t=this.touchDownRect.contains(e.getLocation());this._bFocused?t||(this._bFocused=!1,this._doCancellAction()):t&&(this._bFocused=!0,this._doDownAction())}else this._bFocused&&(this._bFocused=!1,this._doUpAction());this.triggerOnTouchCallback(e)},t.soundPlayHandler=null,r([l({tooltip:"\u6b63\u5e38\u663e\u793a\u8282\u70b9",type:cc.Node})],t.prototype,"nodeNormal",void 0),r([l({tooltip:"\u6309\u4e0b\u663e\u793a\u8282\u70b9",type:cc.Node})],t.prototype,"nodePressed",void 0),r([l({tooltip:"\u9ed8\u8ba4\u662f\u5426\u662f\u6309\u4e0b\u72b6\u6001"})],t.prototype,"defaultIsPressed",void 0),t=o=r([s,c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../utils/Tools":"Tools"}],Tools:[function(e,t,o){"use strict";cc._RF.push(t,"ddcc2p3lQhKBYTlLASMxtxW","Tools");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../game/Const"),a=cc._decorator,i=a.ccclass,s=(a.property,function(){function e(){}var t;return t=e,e.time=function(){return null!=this._debugTime?this._debugTime:(new Date).getTime()/1e3},e.clone=function(e){if(t.isArray(e)){var o=[];for(var n in e)o.push(e[n]);return o}var r={};for(var a in e)r[a]=e[a];return r},e.booleanArrayToFlagsNumber=function(e){for(var t=0,o=Math.max(e.length,32),n=0;n<o;n++){t|=(e[n]?1:0)<<n}return t},e._setDebugTime=function(e){this._debugTime=e},e.isOneDay=function(e,t){var o=new Date(1e3*e),n=new Date(1e3*t);return o.getFullYear()==n.getFullYear()&&o.getMonth()==n.getMonth()&&o.getDate()==n.getDate()},e.isArray=function(e){return!!e&&"[object Array]"==Object.prototype.toString.call(e)},e.isNull=function(e){return!e&&void 0!==e&&0!=e},e.isZero=function(e){return!e&&!isNaN(e)&&"number"==typeof e&&0==e},e.clampf=function(e,t,o){return e<t?t:e>o?o:e},e.distance=function(e,t,o,n){o||(o=0),n||(n=0);var r=o-e,a=n-t;return Math.sqrt(r*r+a*a)},e.distanceSQ=function(e,t,o,n){o||(o=0),n||(n=0);var r=o-e,a=n-t;return r*r+a*a},e.pDistance=function(e,o){return t.distance(e.x,e.y,o.x,o.y)},e.pDistanceSQ=function(e,o){return t.distanceSQ(e.x,e.y,o.x,o.y)},e.registerTouchHandler=function(e,t,o,n,r){void 0===o&&(o=!1),void 0===n&&(n=!0),void 0===r&&(r=!1);var a=e;if(a&&t){a.on(cc.Node.EventType.TOUCH_START,function(e){var r=e.getID()||0;return!(!o&&null!=a.__touch_id||(e.name="began",n&&e.stopPropagation(),a.__touch_id=r,t(e),0))},null,r),a.on(cc.Node.EventType.TOUCH_MOVE,function(e){var n=e.getID()||0;(o||n==a.__touch_id)&&(e.name="moved",t(e))},null,r),a.on(cc.Node.EventType.TOUCH_END,function(e){var n=e.getID()||0;(o||n==a.__touch_id)&&(e.name="ended",a.__touch_id=null,t(e))},null,r),a.on(cc.Node.EventType.TOUCH_CANCEL,function(e){var n=e.getID()||0;(o||n==a.__touch_id)&&(e.name="cancelled",a.__touch_id=null,t(e))},null,r)}},e.unregisterTouchHandler=function(e){e&&cc.isValid(e)&&(e.off(cc.Node.EventType.TOUCH_START,null),e.off(cc.Node.EventType.TOUCH_MOVE,null),e.off(cc.Node.EventType.TOUCH_END,null),e.off(cc.Node.EventType.TOUCH_CANCEL,null))},e.getTableCount=function(e){if(!e)return 0;if(e instanceof Array)return e.length;var t=0;for(var o in e)t++;return t},e.random=function(e,t){return null==e&&null==t?Math.random():null==t?Math.floor(Math.random()*e+1):Math.floor(Math.random()*(t-e+1)+e)},e.randomGetListArr=function(e,o,n){for(var r=o-e,a=Math.min(r,n),i={},s=Math.min(10*a,1e4),l=0,c=0;l<s;){l+=1;var u=t.random(e,o);if(!i[u]&&(c+=1,i[u]=!0,c==n))break}var d=[];for(var p in i)d.push(parseInt(p));return d},e.scaleInRange=function(e,t,o,n,r){return t<o?(e<t&&(e=t),e>o&&(e=o)):(e<o&&(e=o),e>t&&(e=t)),(e-t)/(o-t)*(r-n)+n},e.layoutChildren=function(e,t,o){void 0===o&&(o=0);var n=0,r=0,a=e.children||[];for(var i in a){var s=a[i];if(s.active){s.setPosition(n,r);var l=s.getContentSize();"left"==t?n=n-l.width-o:"right"==t?n=n+l.width+o:"up"==t?r=r+l.height+o:"down"==t&&(r=r-l.height-o)}}},e.layoutNodesHorizonCenter=function(e,t){void 0===t&&(t=2),t=t||2;var o=0;for(var n in e){if((s=e[n]).active){var r=Math.abs(s.scaleX),a=s.getContentSize();o+=l=Math.floor(a.width*r)}}var i=-(o+=(e.length-1)*t)/2;for(var n in e){var s;if((s=e[n]).active){r=Math.abs(s.scaleX),a=s.getContentSize();var l=Math.floor(a.width*r);s.setPosition(i+l/2,0),i=i+l+t}}},e.layoutNodesVerticalCenter=function(e,t){void 0===t&&(t=2),t=t||2;var o=0;for(var n in e){if((s=e[n]).active){var r=Math.abs(s.scaleY),a=s.getContentSize();o+=l=Math.floor(a.height*r)}}var i=(o+=(e.length-1)*t)/2;for(var n in e){var s;if((s=e[n]).active){r=Math.abs(s.scaleY),a=s.getContentSize();var l=Math.floor(a.height*r);s.setPosition(0,i-l/2),i=i-l-t}}},e.isWorldLocaInNode=function(e,o,n){var r=t.calcNodeBoundingBoxToWorld(e);return null!=n&&(r.x-=n,r.y-=n,r.width+=2*n,r.height+=2*n),r.contains(o)},e.isWorldLocaInNodeAR=function(e,t,o){e.convertToNodeSpaceAR(t);var n=e.getContentSize(),r=cc.rect(0,0,n.width,n.height);return null!=o&&(r.x-=o,r.y-=o,r.width+=2*o,r.height+=2*o),r.contains(t)},e.calcRecursiveScale=function(e){var t=1;do{t*=e.scaleX,e=e.parent}while(null!=e);return t},e.calcWheelTarget=function(e,t){for(var o=0,n=0;n<e.length;n++){var r=e[n],a=parseInt(r[t]);if(isNaN(a))return null;o+=a}var i=this.random(o);for(n=0;n<e.length;n++){r=e[n];if(i<=(a=parseInt(r[t])))return r;i-=a}return null},e.sortArrayByField=function(e,t){t="string"==typeof t?[t]:t;var o=[];for(var n in t){if((s=t[n])&&""!=s)if("-"===s.substring(0,1)){var r=s.substring(1,s.length);r&&""!=r&&o.push([r,!0])}else o.push([s,!1])}for(var a=[],i=0;i<e.length;i++){var s=e[i];a.push(s)}return a.sort(function(e,t){var n=0;for(var r in o){var a=o[r],i=a[0],s=a[1],l=e[i],c=t[i];if(null!=l&&0!=(n=s?c-l:l-c))return n}return n}),a},e.bubbleSort=function(e,t){for(var o=e.length,n=0;n<o;n++)for(var r=0;r<o-1-n;r++){if(t(e[r],e[r+1])>0){var a=e[r+1];e[r+1]=e[r],e[r]=a}}return e},e.forEachMap=function(e,t){if(e)for(var o=Object.keys(e),n=0;n<o.length;n++){var r=o[n],a=e[r];if(null!=a&&t(r,a))break}},e._origin_sortTiles=function(e){for(var t=function(e,t){return t.right>e.x&&t.top>e.y},o=[],n=e.length,r=0;r<n;r++)for(var a=e[r],i=o.indexOf(a),s=0,l=e.length;s<l;s++)if(r!=s){var c=e[s];if(t(a,c)){var u=o.indexOf(c);i<0&&(o.push(a),i=o.length-1),u<0&&(o.push(c),u=o.length-1),u<i&&(o.splice(i,1),o.splice(u,0,a),i=u)}}for(r=0;r<e.length;r++){a=e[r];o.indexOf(a)<0&&o.push(a)}return o},e.sortTiles=function(e){for(var t=function(e,t){return t.right>e.x&&t.top>e.y},o=0;o<e.length;o++){e[o]._id=o}var n=[],r={},a=e.length;for(o=0;o<a;o++)for(var i=r[(d=e[o])._id],s=0;s<a;s++)if(o!=s){var l=e[s];if(t(d,l)){var c=r[l._id];if(null==i&&(n.push(d),i=n.length-1,r[d._id]=i),null==c&&(n.push(l),c=n.length-1,r[l._id]=c),c<i){for(var u=c;u<i;u++){r[n[u]._id]++}n.splice(i,1),n.splice(c,0,d),i=c,r[d._id]=i}}}for(o=0;o<e.length;o++){var d;null==r[(d=e[o])._id]&&n.push(d)}return n},e.convertRectToNodeSpace=function(e,t){if(!t)return null;var o=cc.v2(t.xMin,t.yMin),n=cc.v2(t.xMax,t.yMax);o=e.convertToNodeSpaceAR(o),n=e.convertToNodeSpaceAR(n);var r=Math.min(o.x,n.x),a=Math.min(o.y,n.y),i=Math.max(o.x,n.x)-r,s=Math.max(o.y,n.y)-a;return new cc.Rect(r,a,i,s)},e.convertRectToWorldSpace=function(e,t){if(!t)return null;var o=cc.v2(t.xMin,t.yMin),n=cc.v2(t.xMax,t.yMax);o=e.convertToWorldSpaceAR(o),n=e.convertToWorldSpaceAR(n);var r=Math.min(o.x,n.x),a=Math.min(o.y,n.y),i=Math.max(o.x,n.x)-r,s=Math.max(o.y,n.y)-a;return new cc.Rect(r,a,i,s)},e.getCircleBorderPosArr=function(e,t,o){void 0===o&&(o=2);for(var n=[],r=0;r<360;r+=o){var a=Math.floor(e.x+t*Math.cos(3.14*r/180)),i=Math.floor(e.y+t*Math.sin(3.14*r/180));n.push(cc.v2(a,i))}return n},e.getStrByteLen=function(e){if(!e)return 0;for(var t=0,o=0;o<e.length;o++){var n=e.charCodeAt(o);t+=n>=0&&n<=128?1:2}return t},e.calcNodeBoundingBoxToWorld=function(e,o){var n=e.getBoundingBox();return o&&(n.x-=o,n.y-=o,n.width+=2*o,n.height+=2*o),t.convertRectToWorldSpace(e.parent,n)},e.formatTime=function(e,t){var o=Math.floor(e/3600),n=Math.floor(e/60)%60,r=Math.floor(e)%60;return t.match("%h")&&(t=t.replace("%h",o.toString())),t.match("%H")&&(t=t.replace("%H",ul.format("%02d",o))),t.match("%m")&&(t=t.replace("%m",n.toString())),t.match("%M")&&(t=t.replace("%M",ul.format("%02d",n))),t.match("%s")&&(t=t.replace("%s",r.toString())),t.match("%S")&&(t=t.replace("%S",ul.format("%02d",r))),t},e.setCascadeColor=function(e,t){e.color=t;for(var o=0;o<e.children.length;o++){var n=e.children[o];this.setCascadeColor(n,t)}},e.triggerPromiseResolve=function(e,t){r.default.B_PROMISE_RESOLVE_NEED_WAIT?setTimeout(function(){e(t)},r.default.PROMISE_RESOLVE_WAIT_TIME):e(t)},e.randomGotOneArrayData=function(e){return(this.randomGotArrayDatas(e,1)||[])[0]},e.randomGotArrayDatas=function(e,o){if(!e||e.length<=0||!o||o<0)return[];var n=[];o=Math.min(o,e.length);for(var r=[],a=0;a<e.length;a++)r.push(a);for(var i=0;i<o;){var s=t.random(0,r.length-1),l=e[r[s]];n.push(l),r.splice(s,1),i+=1}return n},e.randomRemoveArrayDatas=function(e,o){if(!e||e.length<=0||!o||o<0)return[];var n=[];if(o>=e.length){for(var r=e.length-1;r>=0;r--)n.push(e[r]),e.splice(r,1);return n}for(var a=[],i=0;i<e.length;i++)a.push(i);for(var s=[],l=0;l<o;){var c=a[r=t.random(0,a.length-1)],u=e[c];n.push(u),a.splice(r,1),s.push({index:c}),l+=1}if(l>0){s=this.sortArrayByField(s,"-index");for(var d=0;d<l;d++){u=s[d];e.splice(u.index,1)}}return n},e.getRawUrlUuid=function(e){if(!e)return"";var t=e.lastIndexOf("."),o=e.substring(0,t),n=o.lastIndexOf("/");return n<0?"":o.substring(n+1,o.length)},e._debugTime=null,e=t=n([i],e)}());o.default=s,cc._RF.pop()},{"../../game/Const":"Const"}],TouchHoldButton:[function(e,t,o){"use strict";cc._RF.push(t,"4b573h8nSZMo7/I3hRteW6U","TouchHoldButton");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ScleableButton"),i=cc._decorator,s=i.ccclass,l=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.holdTime=0,t.gap=0,t.triggerRemainTime=0,t}return n(t,e),t.prototype.update=function(e){this._bFocused&&(this.holdTime+=e,this.holdTime<=.8||(this.triggerRemainTime-=e,this.triggerRemainTime<=0&&(this.triggerClickEvent(),this.triggerRemainTime=this.gap),this.gap=Tools.clampf(this.gap-.05*e,.05,.2)))},t.prototype.triggerClickEvent=function(){this.cachedEvent.isClick=function(){return!0},this.triggerOnTouchCallback(this.cachedEvent)},t.prototype.onTouchHandler=function(t){"began"==t.name?(this.holdTime=0,this.gap=.2,this.triggerRemainTime=this.gap,this.cachedEvent=t):"moved"==t.name?this.cachedEvent=t:this.cachedEvent=null,e.prototype.onTouchHandler.call(this,t)},t=r([s],t)}(a.default));o.default=l,cc._RF.pop()},{"./ScleableButton":"ScleableButton"}],ULAdViewBase:[function(e,t,o){"use strict";cc._RF.push(t,"a8341Y8+mxHNK8zzMyKsz3s","ULAdViewBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=window.cc,r=window.Laya,a=function(){function e(){this.ENGINE_COCOS="cocos",this.ENGINE_LAYA="laya",this.engine=null}return e.prototype.init=function(){},e.prototype.onAdvShow=function(){ULSDK.console.log("ULAdViewBase.show")},e.prototype.onAdvClose=function(){ULSDK.console.log("ULAdViewBase.hide")},e.prototype.onAdvDestroy=function(){ULSDK.console.log("ULAdViewBase.destroy")},e.prototype.onAdvClicked=function(){ULSDK.console.log("ULAdViewBase.click")},e.prototype.getCanvasSize=function(){if(n){var e=this.getNodeCanvas();return e?{width:e.width,height:e.height}:(ULSDK.console.warn("ULAdViewBase.getCanvasSize nodeCanvas not found!"),{width:0,height:0})}return r?{width:r.stage.width,height:r.stage.height}:{width:0,height:0}},e.prototype.getNodeCanvas=function(){if(!n)return ULSDK.console.warn("ULAdViewBase.getNodeCanvas \u672a\u68c0\u6d4b\u5230creator\u73af\u5883\uff01"),null;var e=n.director.getScene();if(!e)return ULSDK.console.warn("ULAdViewBase.getNodeCanvas scene not found!"),null;var t=e.getChildByName("Canvas");return t||(ULSDK.console.warn("ULAdViewBase.getNodeCanvas nodeCanvas not found!"),null)},e.prototype.registerCocosTouchHandler=function(e,t,o,r,a){void 0===o&&(o=!1),void 0===r&&(r=!0),void 0===a&&(a=!1);var i=e;if(i&&t){i.on(n.Node.EventType.TOUCH_START,function(e){var n=e.getID()||0;return!(!o&&null!=i.__touch_id||(e.name="began",r&&e.stopPropagation(),i.__touch_id=n,t(e),0))},null,a),i.on(n.Node.EventType.TOUCH_MOVE,function(e){var n=e.getID()||0;(o||n==i.__touch_id)&&(e.name="moved",t(e))},null,a),i.on(n.Node.EventType.TOUCH_END,function(e){var n=e.getID()||0;(o||n==i.__touch_id)&&(e.name="ended",i.__touch_id=null,t(e))},null,a),i.on(n.Node.EventType.TOUCH_CANCEL,function(e){var n=e.getID()||0;(o||n==i.__touch_id)&&(e.name="cancelled",i.__touch_id=null,t(e))},null,a)}},e.prototype.isTouchEventClick=function(e){if("ended"!=e.name&&"cancelled"!=e.name)return!1;var t=e.getStartLocation(),o=e.getLocation(),n=t.x-o.x,r=t.y-o.y;return n*n+r*r<=400},e.prototype.getRootNode=function(){return r.stage.getChildByName("__ulsdk_ui_node_root__")},e.prototype.registerLayaTouchHander=function(e,t){var o,n;e.on(r.Event.MOUSE_DOWN,e,function(r){e.__b_touch=!0,o=r.stageX,n=r.stageY,t({name:"began",pos:{x:r.stageX,y:r.stageY}})}),e.on(r.Event.MOUSE_UP,e,function(o){e.__b_touch&&(e.__b_touch=!1,t({name:"ended",pos:{x:o.stageX,y:o.stageY}}))}),e.on(r.Event.MOUSE_MOVE,e,function(o){1==e.__b_touch&&t({name:"moved",pos:{x:o.stageX,y:o.stageY}})}),e.on(r.Event.MOUSE_OUT,e,function(o){e.__b_touch&&(e.__b_touch=!1,t({name:"cancelled",pos:{x:o.stageX,y:o.stageY}}))}),e.on(r.Event.CLICK,e,function(e){if(null!=o&&null!=n){var r=e.stageX-o,a=e.stageY-n;if(r*r+a*a>=400)return}t({name:"click",pos:{x:e.stageX,y:e.stageY}})})},e}();o.default=a,cc._RF.pop()},{}],ULAdvBase:[function(e,t,o){"use strict";cc._RF.push(t,"b7c57e0OtZKKoavhYeVXged","ULAdvBase");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../events/ULEventDispatcher"),a=e("../ULConsts"),i=e("./ULConfig"),s=e("./ULModuleBase"),l=e("../utils/ULTools"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.videoPriority=-1,t.interPriority=-1,t.bannerPriority=-1,t.embeddedPriority=-1,t.urlPriority=-1,t.pasterPriority=-1,t}return n(t,e),t.prototype.init=function(){"ULAdvBase"==this.name&&ULSDK.console.warn("ULAdvBase.init \u8bf7\u5728\u5b50\u7c7b\u4e2d\u4fee\u6539this.name!"),r.default.getInstance().addListener(a.default.CMD_SDK_ON_COP_CHANGED,1,this.onCopChanged.bind(this)),this.refreshPriority(),this.registerListeners()},t.prototype.refreshPriority=function(){var e=i.default.getConfig();this.videoPriority=this.calcPriority(e.s_sdk_adv_show_video_list,this.name),this.interPriority=this.calcPriority(e.s_sdk_adv_show_inter_list,this.name),this.bannerPriority=this.calcPriority(e.s_sdk_adv_show_banner_list,this.name),this.embeddedPriority=this.calcPriority(e.s_sdk_adv_show_embedded_list,this.name),this.urlPriority=this.calcPriority(e.s_sdk_adv_show_url_list,this.name),this.pasterPriority=this.calcPriority(e.s_sdk_adv_show_paster_list,this.name),this.fShowVideoCallback=this.processShowAdvCallback("video",this.showVideoAdv.bind(this)),this.fShowInterCallback=this.processShowAdvCallback("interstitial",this.showInterAdv.bind(this)),this.fShowBannerCallback=this.processShowAdvCallback("banner",this.showBannerAdv.bind(this)),this.fShowEmbeddedCallback=this.processShowAdvCallback("embedded",this.showEmbeddedAdv.bind(this)),this.fShowUrlCallback=this.processShowAdvCallback("url",this.showUrlAdv.bind(this)),this.fShowPasterCallback=this.processShowAdvCallback("paster",this.showPasterAdv.bind(this)),ULSDK.console.log("ULAdvBase.refreshPriority",this.name),this.videoPriority<=a.default.PRIORITY_DISABLE?ULSDK.console.warn(l.default.format("  %s_\u89c6\u9891\u5e7f\u544a\u88ab\u7981\u7528\uff01\u914d\u7f6e[s_sdk_adv_show_video_list]=[%s]",this.name,e.s_sdk_adv_show_video_list)):ULSDK.console.log("  videoPriority",this.videoPriority),this.interPriority<=a.default.PRIORITY_DISABLE?ULSDK.console.warn(l.default.format("  %s_\u63d2\u5c4f\u5e7f\u544a\u88ab\u7981\u7528\uff01\u914d\u7f6e[s_sdk_adv_show_inter_list]=[%s]",this.name,e.s_sdk_adv_show_inter_list)):ULSDK.console.log("  interPriority",this.interPriority),this.bannerPriority<=a.default.PRIORITY_DISABLE?ULSDK.console.warn(l.default.format("  %s_\u6a2a\u5e45\u5e7f\u544a\u88ab\u7981\u7528\uff01\u914d\u7f6e[s_sdk_adv_show_banner_list]=[%s]",this.name,e.s_sdk_adv_show_banner_list)):ULSDK.console.log("  bannerPriority",this.bannerPriority),this.embeddedPriority<=a.default.PRIORITY_DISABLE?ULSDK.console.warn(l.default.format("  %s_\u5d4c\u5165\u5e7f\u544a\u88ab\u7981\u7528\uff01\u914d\u7f6e[s_sdk_adv_show_embedded_list]=[%s]",this.name,e.s_sdk_adv_show_embedded_list)):ULSDK.console.log("  embeddedPriority",this.embeddedPriority),this.urlPriority<=a.default.PRIORITY_DISABLE?ULSDK.console.warn(l.default.format("  %s_\u4e92\u52a8\u5e7f\u544a\u88ab\u7981\u7528\uff01\u914d\u7f6e[s_sdk_adv_show_url_list]=[%s]",this.name,e.s_sdk_adv_show_url_list)):ULSDK.console.log("  urlPriority",this.urlPriority),this.pasterPriority<=a.default.PRIORITY_DISABLE?ULSDK.console.warn(l.default.format("  %s_\u4e92\u52a8\u5e7f\u544a\u88ab\u7981\u7528\uff01\u914d\u7f6e[s_sdk_adv_show_paster_list]=[%s]",this.name,e.s_sdk_adv_show_paster_list)):ULSDK.console.log("  urlPriority",this.pasterPriority)},t.prototype.processShowAdvCallback=function(e,t){var o=this;return function(n){var r=n.data;r?(r.showAdvType=e,r.showChannelName=o.name||"",t(n)):ULSDK.console.warn("ULAdvBase.on showAdvCallback advItem not found!",e)}},t.prototype.registerListeners=function(){var e=this;r.default.getInstance().addListener(a.default.CMD_SDK_PREPARE_SHOW_VIDEO_ADV,a.default.PRIORITY_NONE,function(t){ULSDK.console.log("ULAdvBase on prepare video",e.name,e.videoPriority),r.default.getInstance().once(a.default.CMD_SDK_SHOW_VIDEO_ADV,e.videoPriority,e.fShowVideoCallback)}),r.default.getInstance().addListener(a.default.CMD_SDK_PREPARE_SHOW_INTER_ADV,a.default.PRIORITY_NONE,function(t){ULSDK.console.log("ULAdvBase on prepare inter",e.name,e.interPriority),r.default.getInstance().once(a.default.CMD_SDK_SHOW_INTER_ADV,e.interPriority,e.fShowInterCallback)}),r.default.getInstance().addListener(a.default.CMD_SDK_PREPARE_SHOW_BANNER_ADV,a.default.PRIORITY_NONE,function(t){ULSDK.console.log("ULAdvBase on prepare banner",e.name,e.bannerPriority),r.default.getInstance().once(a.default.CMD_SDK_SHOW_BANNER_ADV,e.bannerPriority,e.fShowBannerCallback)}),r.default.getInstance().addListener(a.default.CMD_SDK_PREPARE_SHOW_EMBEDDED_ADV,a.default.PRIORITY_NONE,function(t){ULSDK.console.log("ULAdvBase on prepare embedded",e.name,e.embeddedPriority),r.default.getInstance().once(a.default.CMD_SDK_SHOW_EMBEDDED_ADV,e.embeddedPriority,e.fShowEmbeddedCallback)}),r.default.getInstance().addListener(a.default.CMD_SDK_PREPARE_SHOW_URL_ADV,a.default.PRIORITY_NONE,function(t){ULSDK.console.log("ULAdvBase on prepare url",e.name,e.urlPriority),r.default.getInstance().once(a.default.CMD_SDK_SHOW_URL_ADV,e.urlPriority,e.fShowUrlCallback)}),r.default.getInstance().addListener(a.default.CMD_SDK_PREPARE_SHOW_PASTER_ADV,a.default.PRIORITY_NONE,function(t){ULSDK.console.log("ULAdvBase on prepare paster",e.name,e.pasterPriority),r.default.getInstance().once(a.default.CMD_SDK_SHOW_PASTER_ADV,e.pasterPriority,e.fShowPasterCallback)}),r.default.getInstance().addListener(a.default.CMD_SDK_CLOSE_VIDEO_ADV,a.default.PRIORITY_NONE,this.closeVideoAdv.bind(this)),r.default.getInstance().addListener(a.default.CMD_SDK_CLOSE_INTER_ADV,a.default.PRIORITY_NONE,this.closeInterAdv.bind(this)),r.default.getInstance().addListener(a.default.CMD_SDK_CLOSE_BANNER_ADV,a.default.PRIORITY_NONE,this.closeBannerAdv.bind(this)),r.default.getInstance().addListener(a.default.CMD_SDK_CLOSE_EMBEDDED_ADV,a.default.PRIORITY_NONE,this.closeEmbeddedAdv.bind(this)),r.default.getInstance().addListener(a.default.CMD_SDK_CLOSE_URL_ADV,a.default.PRIORITY_NONE,this.closeUrlAdv.bind(this)),r.default.getInstance().addListener(a.default.CMD_SDK_CLOSE_Paster_ADV,a.default.PRIORITY_NONE,this.closePasterAdv.bind(this)),r.default.getInstance().addListener(a.default.CMD_SDK_CLICK_NATIVE_ADV,a.default.PRIORITY_NONE,this.onClickNativeAdv.bind(this)),r.default.getInstance().addListener(a.default.CMD_SDK_CLOSE_NATIVE_ADV,a.default.PRIORITY_NONE,this.onCloseNativeAdv.bind(this))},t.prototype.calcPriority=function(e,t){if(!e)return a.default.PRIORITY_DISABLE;for(var o=e.split("_"),n=0;n<o.length;n++){if(o[n]==t)return o.length-n}return a.default.PRIORITY_DISABLE},t.prototype.onCopChanged=function(e){this.refreshPriority()},t.prototype.showVideoAdv=function(e){ULSDK.console.log("ULAdvBase.showVideoAdv",this.name)},t.prototype.showInterAdv=function(e){ULSDK.console.log("ULAdvBase.showInterAdv",this.name)},t.prototype.showBannerAdv=function(e){ULSDK.console.log("ULAdvBase.showBannerAdv",this.name)},t.prototype.showEmbeddedAdv=function(e){ULSDK.console.log("ULAdvBase.showEmbeddedAdv",this.name)},t.prototype.showUrlAdv=function(e){ULSDK.console.log("ULAdvBase.showUrlAdv",this.name)},t.prototype.showPasterAdv=function(e){ULSDK.console.log("ULAdvBase.showPasterAdv",this.name)},t.prototype.closeVideoAdv=function(e){ULSDK.console.log("ULAdvBase.closeVideoAdv",this.name)},t.prototype.closeInterAdv=function(e){ULSDK.console.log("ULAdvBase.closeInterAdv",this.name)},t.prototype.closeBannerAdv=function(e){ULSDK.console.log("ULAdvBase.closeBannerAdv",this.name)},t.prototype.closeEmbeddedAdv=function(e){ULSDK.console.log("ULAdvBase.closeEmbeddedAdv",this.name)},t.prototype.closeUrlAdv=function(e){ULSDK.console.log("ULAdvBase.closeUrlAdv",this.name)},t.prototype.closePasterAdv=function(e){ULSDK.console.log("ULAdvBase.closePasterAdv",this.name)},t.prototype.onClickNativeAdv=function(e){ULSDK.console.log("ULAdvBase.onClickNativeAdv",this.name)},t.prototype.onCloseNativeAdv=function(e){ULSDK.console.log("ULAdvBase.onCloseNativeAdv",this.name)},t}(s.default);o.default=c,cc._RF.pop()},{"../ULConsts":"ULConsts","../events/ULEventDispatcher":"ULEventDispatcher","../utils/ULTools":"ULTools","./ULConfig":"ULConfig","./ULModuleBase":"ULModuleBase"}],ULAdvFacebook:[function(e,t,o){"use strict";cc._RF.push(t,"21574e1/7BP56nz0Mc/5vGM","ULAdvFacebook");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../core/ULAdvBase"),a=e("../../core/ULSdkManager"),i=e("../../core/ULConfig"),s=e("../../ULConsts"),l=e("../../events/ULEventDispatcher"),c=e("../../utils/ULTools"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="ULAdvFaceBook",t.interAdPreloadArray=[],t.videoAdPreloadArray=[],t.interAdArray=[],t.videoAdArray=[],t.bannerIsShowing=!1,t}return n(t,e),t.prototype.init=function(){var t=this;e.prototype.init.call(this),this.startTime=c.default.time(),ULSDK.console.log("ULAdvFaceBook.init....\u5373\u5c06\u5f00\u59cb\u5e7f\u544a\u9884\u52a0\u8f7d"),setTimeout(function(){t.preLoadAd()},1e4)},t.prototype.preLoadAd=function(){var e=this;this.videoAdArray.length+this.videoAdPreloadArray.length<3&&this.getVideoAd(),this.interAdArray.length+this.interAdPreloadArray.length<3&&this.getInterAd(),setTimeout(function(){e.preLoadAd()},3e4)},t.prototype.getVideoAd=function(){var e=this,t=i.default.getConfig();0!=(t.s_sdk_facebook_videoId||"").replace(/(^\s*)|(\s*$)/g,"").length?window.FBInstant&&window.FBInstant.getRewardedVideoAsync(t.s_sdk_facebook_videoId).then(function(t){ULSDK.console.log("ULAdvFaceBook.getVideoAd....\u5b9e\u4f8b\u52a0\u8f7d\u6210\u529f: "),e.videoAdPreloadArray.push(t),e.videoADLoadData(t,0)}).catch(function(e){ULSDK.console.error("ULAdvFaceBook.getVideoAd....\u52a0\u8f7d\u5931\u8d25: ",e,e.message)}):ULSDK.console.log("ULAdvFaceBook s_sdk_facebook_videoId \u4e3a\u7a7a")},t.prototype.getInterAd=function(){var e=this,t=i.default.getConfig();0!=(t.s_sdk_facebook_interId||"").replace(/(^\s*)|(\s*$)/g,"").length?window.FBInstant&&window.FBInstant.getInterstitialAdAsync(t.s_sdk_facebook_interId).then(function(t){ULSDK.console.log("ULAdvFaceBook.getInterAd....\u5b9e\u4f8b\u52a0\u8f7d\u6210\u529f "),e.interAdPreloadArray.push(t),e.interADLoadData(t,0)}).catch(function(e){ULSDK.console.error("ULAdvFaceBook.getInterAd....\u52a0\u8f7d\u5931\u8d25: "+e.message)}):ULSDK.console.log("ULAdvFaceBook s_sdk_facebook_interId \u4e3a\u7a7a")},t.prototype.videoADLoadData=function(e,t){var o=this;e.loadAsync().then(function(){ULSDK.console.log("ULAdvFaceBook.videoADLoadData.videoAd.loadAsync.then \u52a0\u8f7d\u6210\u529f "),o.videoAdArray.push(e);var t=o.videoAdPreloadArray.indexOf(e);t>=0&&o.videoAdPreloadArray.splice(t,1)}).catch(function(n){if(ULSDK.console.error("ULAdvFaceBook.videoADLoadData....\u52a0\u8f7d\u5931\u8d25: "+n.message),t>3){var r=o.videoAdPreloadArray.indexOf(e);r>=0&&o.videoAdPreloadArray.splice(r,1)}else setTimeout(function(){o.videoADLoadData(e,t+1)},2e4)})},t.prototype.interADLoadData=function(e,t){var o=this;e.loadAsync().then(function(){ULSDK.console.log("ULAdvFaceBook.interADLoadData.videoAd.loadAsync.then \u52a0\u8f7d\u6210\u529f "),o.interAdArray.push(e);var t=o.interAdPreloadArray.indexOf(e);t>=0&&o.interAdPreloadArray.splice(t,1)}).catch(function(n){if(ULSDK.console.error("ULAdvFaceBook.interADLoadData....\u52a0\u8f7d\u5931\u8d25: "+n.message),t>3){var r=o.interAdPreloadArray.indexOf(e);r>=0&&o.interAdPreloadArray.splice(r,1)}else setTimeout(function(){o.interADLoadData(e,t+1)},2e4)})},t.prototype.showVideoAdv=function(e){var t=this;e.stopImmediatePropagation();var o=e.data,n=i.default.getConfig(),r=n.s_sdk_facebook_videoId||"";ULSDK.console.log("ULAdvFaceBook.showVideoAdv",o.advId,o.advType,o.serialId),a.default.getInstance().statisManager.reportAdvBranchRequest(o,this.name,r);var c=this.videoAdArray.shift();if(!c)return ULSDK.console.log("ULAdvFaceBook.showVideoAdv......\u672a\u9884\u52a0\u8f7d\u597d"),void a.default.getInstance().advManager.showNextAdv(o,s.default.ENGLISH_ADV_FAIL_TIP_NOAD);a.default.getInstance().advManager.onAdvShow(o),c.showAsync().then(function(){ULSDK.console.log("ULAdvFaceBook.showVideoAdv....show.then....\u6fc0\u52b1\u89c6\u9891\u5c55\u793a\u6210\u529f"),t.getVideoAd(),l.default.getInstance().dispatch(s.default.CMD_SDK_CHANNEL_MEGADATA_POST,[n.s_sdk_miniplay_user_open_video_event_id,"1"]),l.default.getInstance().dispatch(s.default.CMD_SDK_CHANNEL_MEGADATA_POST,[n.s_sdk_miniplay_video_success_show_event_id]),a.default.getInstance().advManager.onAdvClose(o)}).catch(function(e){ULSDK.console.error("ULAdvFaceBook.showVideoAdv....show.catch....\u89c6\u9891\u5c55\u793a\u5931\u8d25....err: ",e.message),t.getVideoAd(),a.default.getInstance().advManager.showNextAdv(o,null,e),l.default.getInstance().dispatch(s.default.CMD_SDK_CHANNEL_MEGADATA_POST,[n.s_sdk_miniplay_user_open_video_event_id,"2"])})},t.prototype.showInterAdv=function(e){var t=this;e.stopImmediatePropagation();var o=e.data,n=i.default.getConfig(),r=n.s_sdk_facebook_interId||"",l=c.default.time(),u=n.i_sdk_adv_inter_launch_cd||0,d=Math.max(30,u/1e3);if(l-this.startTime<d)return ULSDK.console.log("ULAdvFaceBook.showInterAdv:\u672a\u8fbe\u5230\u8bf7\u6c42\u542f\u52a8cd\u9650\u5236\uff0c\u65e0\u6cd5\u5c55\u793a\u5e7f\u544a"),void a.default.getInstance().advManager.showNextAdv(o,"\u8bf7\u6c42cd\u9650\u5236\u4e2d");var p=n.i_sdk_adv_inter_cd||0,h=Math.max(30,p/1e3);if(l-this.lastShowInterTime<h)return ULSDK.console.log("ULAdvFaceBook.showInterAdv:\u672a\u8fbe\u5230\u5c55\u793acd\u9650\u5236\uff0c\u65e0\u6cd5\u5c55\u793a\u5e7f\u544a"),void a.default.getInstance().advManager.showNextAdv(o,"\u8bf7\u6c42cd\u9650\u5236\u4e2d");ULSDK.console.log("ULAdvFaceBook.showInterAdv",o.advId,o.advType,o.serialId),a.default.getInstance().statisManager.reportAdvBranchRequest(o,this.name,r);var f=this.interAdArray.shift();if(!f)return ULSDK.console.log("ULAdvFaceBook.showInterAdv......\u672a\u9884\u52a0\u8f7d\u597d"),void a.default.getInstance().advManager.showNextAdv(o,s.default.ENGLISH_ADV_FAIL_TIP_NOAD);f.showAsync().then(function(){ULSDK.console.log("ULAdvFaceBook.showInterAdv....show.then....\u63d2\u5c4f\u5c55\u793a\u6210\u529f"),t.getInterAd(),a.default.getInstance().advManager.onAdvShow(o),t.lastShowInterTime=c.default.time()}).catch(function(e){ULSDK.console.error("ULAdvFaceBook.showInterAdv....show.catch....\u63d2\u5c4f\u5c55\u793a\u5931\u8d25....err: ",e.message),t.getInterAd(),a.default.getInstance().advManager.showNextAdv(o,null,e)})},t.prototype.showBannerAdv=function(e){var t=this;e.stopImmediatePropagation();var o=e.data,n=i.default.getConfig(),r=n.s_sdk_facebook_bannerId||"";if(this.bannerIsShowing)a.default.getInstance().advManager.onAdvFailed(o,"\u5df2\u7ecf\u5728\u5c55\u793a\u4e2d");else{var s=c.default.time(),l=n.i_sdk_adv_banner_cd||0,u=Math.max(30,l/1e3);if(s-this.lastShowBannerTime<u)return ULSDK.console.log("ULAdvFaceBook.showBannerAdv:\u672a\u8fbe\u5230\u5c55\u793acd\u9650\u5236\uff0c\u65e0\u6cd5\u5c55\u793a\u5e7f\u544a"),void a.default.getInstance().advManager.showNextAdv(o,"\u8bf7\u6c42cd\u9650\u5236\u4e2d");var d=window.FBInstant;d&&void 0!=d&&d.loadBannerAdAsync?(this.bannerIsShowing=!0,d.loadBannerAdAsync(r).then(function(){ULSDK.console.error("ULAdvFaceBook.loadBannerAdAsync then"),a.default.getInstance().advManager.onAdvShow(o),t.lastShowBannerTime=c.default.time(),t.bannerIsShowing||d.hideBannerAdAsync()}).catch(function(e){ULSDK.console.error("ULAdvFaceBook.loadBannerAdAsync cath err: ",e),a.default.getInstance().advManager.showNextAdv(o,null,e)})):a.default.getInstance().advManager.showNextAdv(o,"FBInstant \u4e3a\u7a7a\u6216\u8005\u4e0d\u652f\u6301 loadBannerAdAsync")}},t.prototype.closeBannerAdv=function(e){e.data;this.bannerIsShowing=!1;var t=window.FBInstant;t&&void 0!=t&&t.hideBannerAdAsync&&t.hideBannerAdAsync()},t}(r.default);o.default=u,cc._RF.pop()},{"../../ULConsts":"ULConsts","../../core/ULAdvBase":"ULAdvBase","../../core/ULConfig":"ULConfig","../../core/ULSdkManager":"ULSdkManager","../../events/ULEventDispatcher":"ULEventDispatcher","../../utils/ULTools":"ULTools"}],ULAdvItem:[function(e,t,o){"use strict";cc._RF.push(t,"aca08WqLx9PRYyJmCg4x0TA","ULAdvItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ULSdkManager"),r=e("../utils/ULTimer"),a=function(){function e(t,o,r){this.advId=t,this.advType=n.default.getInstance().advManager.searchAdvTypeByAdvId(t),this.advGroupId=n.default.getInstance().advManager.searchAdvGroupIdByAdvId(t),this.userData=o,this.tag=r,this.serialId=e.SERIAL_ID++,this.bOpenAdvResultResponsed=!1,this.bClickAdvResultResponsed=!1,this.lifeCycleLog={},this.bRequesting=!0,this.statisChannelName="",this.statisSdkAdvId="",this.statisNativeAdTitle=""}return e.prototype.startimeoutTimer=function(e){var t=this;this.timeoutTimer||(this.timeoutTimer=new r.default(e,1,function(){n.default.getInstance().advManager.onAdvTimeout(t)}),this.timeoutTimer.start())},e.prototype.stopTimeoutTimer=function(){this.timeoutTimer&&(this.timeoutTimer.stop(),this.timeoutTimer=null)},e.prototype.setLifeCycleLogAllCycle=function(){this.lifeCycleLog={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0}},Object.defineProperty(e.prototype,"advData",{get:function(){return this._advData},set:function(e){this._advData=e},enumerable:!0,configurable:!0}),e.SERIAL_ID=0,e}();o.default=a,cc._RF.pop()},{"../utils/ULTimer":"ULTimer","./ULSdkManager":"ULSdkManager"}],ULAdvManager:[function(e,t,o){"use strict";var n;cc._RF.push(t,"c3911CtuMpBgqykaN0uXfBs","ULAdvManager"),Object.defineProperty(o,"__esModule",{value:!0});var r,a=e("../events/ULEventDispatcher"),i=e("../ULConsts"),s=e("./ULConfig"),l=e("../utils/ULTools"),c=e("./ULSdkManager"),u=e("./ULAdvItem"),d=e("./ULStorageManager"),p=e("./ULAdvTrimErrorManager");(function(e){e[e.loading=0]="loading",e[e.ready=1]="ready",e[e.show=2]="show",e[e.clicked=3]="clicked",e[e.close=4]="close",e[e.failed=5]="failed",e[e.timeout=6]="timeout"})(r||(r={}));var h=((n={})[r.loading]="loading",n[r.ready]="ready",n[r.show]="show",n[r.clicked]="clicked",n[r.close]="close",n[r.failed]="failed",n[r.timeout]="timeout",n),f=function(){function e(){this.serialId=0,this.advTypeLastTriggerTimeLog={}}return e.prototype.init=function(){this.loadRecord(),a.default.getInstance().addListener(i.default.CMD_SDK_COLLECTION_MODULE_CHECKER_CONFIG,i.default.PRIORITY_NONE,this.onCmdSdkCollectionModuleCheckerConfig.bind(this)),a.default.getInstance().addListener(i.default.CMD_OPEN_ADV,i.default.PRIORITY_NONE,this.onCmdOpenAdv.bind(this)),a.default.getInstance().addListener(i.default.CMD_CLOSE_ADV,i.default.PRIORITY_NONE,this.onCmdCloseAdv.bind(this)),a.default.getInstance().addListener(i.default.CMD_CLOSE_NATIVE_ADV,i.default.PRIORITY_NONE,this.onCmdCloseNativeAdv.bind(this)),a.default.getInstance().addListener(i.default.CMD_CLICK_NATIVE_ADV,i.default.PRIORITY_NONE,this.onCmdClickNativeAdv.bind(this)),a.default.getInstance().addListener(i.default.CMD_SDK_ON_GAME_RESUME,i.default.PRIORITY_NONE,this.onCmdSdkOnGameResume.bind(this)),a.default.getInstance().addListener(i.default.CMD_SDK_ON_GAME_PAUSE,i.default.PRIORITY_NONE,this.onCmdSdkOnGamePause.bind(this)),this.sdkInitTime=l.default.time(),this.isFirstPlayVideo=!0,this.playingAdvItems={}},e.prototype.loadRecord=function(){var e,t=d.default.getInstance().getStorage(this._getRecordKey())||"{}";try{e=JSON.parse(t)}catch(t){e={}}this.advTypeDailyCountLog=e.advTypeDailyCountLog||{},this.advTypeDailyRefreshTime=e.advTypeDailyRefreshTime||0,this.tryDailyRefresh()},e.prototype.saveRecord=function(){var e={advTypeDailyCountLog:this.advTypeDailyCountLog||{},advTypeDailyRefreshTime:this.advTypeDailyRefreshTime||0},t=JSON.stringify(e);d.default.getInstance().setStorage(this._getRecordKey(),t)},e.prototype._getRecordKey=function(){var e=s.default.getConfig();return l.default.format("ULAdvManager_record_%d",e.s_sdk_megadata_game_id)},e.prototype.searchAdvGroupIdByAdvId=function(e){var t=s.default.getConfig().s_sdk_adv_info,o=null;return l.default.forEachMap(t,function(t,n){if(n.group.indexOf(e)>=0)return o=t,!0}),o||(ULSDK.console.warn("ULAdvBase.calcAdvGroupIdByAdvId adbGroupId not found! advId: ",e),o=e),o},e.prototype.searchAdvTypeByAdvId=function(e){var t=s.default.getConfig().s_sdk_adv_info,o=null;return l.default.forEachMap(t,function(t,n){if(n.group.indexOf(e)>=0)return o=n.type,!0}),o||ULSDK.console.warn("ULAdvBase.searchAdvTypeByAdvId advType not found! advId: ",e),o},e.prototype.tryDailyRefresh=function(){l.default.isOneDay(this.advTypeDailyRefreshTime,l.default.time())||(ULSDK.console.log("ULAdvManager.tryDailyRefresh \u8fdb\u884c\u65e5\u5e38\u5237\u65b0"),this.advTypeDailyCountLog={},this.advTypeDailyRefreshTime=l.default.time(),this.saveRecord())},e.prototype.getAdvTypeDailyLimit=function(e){var t=s.default.getConfig(),o=0;switch(e){case"interstitial":o=t.i_sdk_adv_type_interstitial_daily_limit;break;case"banner":o=t.i_sdk_adv_type_banner_daily_limit;break;case"embedded":o=t.i_sdk_adv_type_embedded_daily_limit;break;case"video":o=t.i_sdk_adv_type_video_daily_limit;break;case"url":o=t.i_sdk_adv_type_url_daily_limit;break;case"paster":o=t.i_sdk_adv_type_paster_daily_limit}return null==o?0:isNaN(o)?0:o},e.prototype.getAdvTypeCd=function(e){var t=s.default.getConfig(),o=0;switch(e){case"interstitial":o=t.i_sdk_adv_type_interstitial_cd;break;case"banner":o=t.i_sdk_adv_type_banner_cd;break;case"embedded":o=t.i_sdk_adv_type_embedded_cd;break;case"video":o=t.i_sdk_adv_type_video_cd;break;case"url":o=t.i_sdk_adv_type_url_cd;break;case"paster":o=t.i_sdk_adv_type_paster_cd}return null==o?0:isNaN(o)?0:o},e.prototype.getLaunchCdByType=function(e){var t=s.default.getConfig(),o=0;switch(e){case"interstitial":o=t.i_sdk_adv_inter_launch_cd;break;case"banner":o=t.i_sdk_adv_banner_launch_cd;break;case"embedded":o=t.i_sdk_adv_embed_launch_cd;break;case"video":o=t.i_sdk_adv_video_launch_cd;break;case"url":o=t.i_sdk_adv_url_launch_cd;break;case"paster":o=t.i_sdk_adv_paster_launch_cd}return null==o?0:isNaN(o)?0:o},e.prototype.responseOpenAdvResult=function(e,t,o){var n=this.playingAdvItems[o.advId];n?n.serialId==o.serialId?(n.stopTimeoutTimer(),n.bRequesting=!1,n.bOpenAdvResultResponsed?ULSDK.console.log("ULAdvManager.responseOpenAdvResult /c/openAdvResult alredy responsed",o.advId,o.serialId):(n.bOpenAdvResultResponsed=!0,1==e&&(ULSDK.console.log("advTypeLastTriggerTimeLog",n.advType,l.default.time()),this.advTypeLastTriggerTimeLog[n.advType]=l.default.time(),this.advTypeDailyCountLog[n.advType]=(this.advTypeDailyCountLog[n.advType]||0)+1,this.saveRecord()),c.default.getInstance().response(i.default.CMD_OPEN_ADV_RESULT,{code:e,msg:t||i.default.ADV_FAIL_TIP_NOAD,advId:o.advId,userData:o.userData}))):ULSDK.console.warn(l.default.format("ULAdvManager.responseOpenAdvResult playing advItem serialId not match! advId=[%s], arg serialId=[%d], playing serialId=[%d]",o.advId,o.serialId,n.serialId)):ULSDK.console.warn(l.default.format("ULAdvManager.responseOpenAdvResult playing advItem not found! advId=[%s]",o.advId))},e.prototype.responseClickAdvResult=function(e,t,o){var n=this.playingAdvItems[o.advId];n?n.serialId==o.serialId?n.bClickAdvResultResponsed?ULSDK.console.log("ULAdvManager.responseClickAdvResult /c/clickAdvResult alredy responsed",o.advId,o.serialId):(n.bClickAdvResultResponsed=!0,c.default.getInstance().response(i.default.CMD_CLICK_ADV_RESULT,{code:e,msg:t,advId:o.advId,userData:o.userData})):ULSDK.console.warn(l.default.format("ULAdvManager.responseClickAdvResult playing advItem serialId not match! advId=[%s], arg serialId=[%d], playing serialId=[%d]",o.advId,o.serialId,n.serialId)):ULSDK.console.warn(l.default.format("ULAdvManager.responseClickAdvResult playing advItem not found! advId=[%s]",o.advId))},e.prototype.showNextAdv=function(e,t,o){var n=e.advType;if(e.bOpenAdvResultResponsed)ULSDK.console.log("ULAdvManager.showNextAdv /c/openAdvResult alredy responsed",e.advId,e.serialId);else switch(e.lifeCycleLog={},n){case"video":a.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_VIDEO_ADV,e)||this.onAdvFailed(e,t,o);break;case"banner":a.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_BANNER_ADV,e)||this.onAdvFailed(e,t,o);break;case"interstitial":a.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_INTER_ADV,e)||this.onAdvFailed(e,t,o);break;case"embedded":a.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_EMBEDDED_ADV,e)||this.onAdvFailed(e,t,o);break;case"url":a.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_URL_ADV,e)||this.onAdvFailed(e,t,o);break;case"paster":a.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_PASTER_ADV,e)||this.onAdvFailed(e,t,o);break;default:ULSDK.console.warn(l.default.format("ULAdvManager.showNextAdv unknown advType! advId=[%s]",e.advId)),this.onAdvFailed(e,t,o)}},e.prototype.onAdvLoad=function(e,t){this.onAdvLifeCycle(e,r.loading,t)},e.prototype.onAdvReady=function(e,t){this.onAdvLifeCycle(e,r.ready,t)},e.prototype.onAdvShow=function(e,t,o){e.statisNativeAdTitle=o,this.onAdvLifeCycle(e,r.show,t)},e.prototype.onAdvClicked=function(e,t){this.onAdvLifeCycle(e,r.clicked,t)},e.prototype.onAdvClose=function(e,t){this.onAdvLifeCycle(e,r.close,t)},e.prototype.onAdvFailed=function(e,t,o){this.onAdvLifeCycle(e,r.failed,t,o)},e.prototype.onAdvTimeout=function(e,t){this.onAdvLifeCycle(e,r.timeout,t)},e.prototype.onAdvLifeCycle=function(e,t,o,n){if(e.lifeCycleLog[t])ULSDK.console.log("ULAdvManager.onAdvLifeCycle lifeCycle\u5df2\u89e6\u53d1\uff0c\u8df3\u8fc7",e.advId,e.serialId,t,h[t]);else switch(ULSDK.console.log("ULAdvManager.onAdvLifeCycle",e.advId,e.serialId,t,h[t]),ULSDK.console.log("ULAdvManager.onAdvLifeCycle advItem",e,t),e.lifeCycleLog[t]=!0,e.showAdvType){case"video":switch(t){case r.loading:c.default.getInstance().statisManager.reportAdvLoadAdvRequest(e);break;case r.ready:e.lifeCycleLog[r.loading]&&c.default.getInstance().statisManager.reportAdvLoadAdvSuccess(e);break;case r.show:e.stopTimeoutTimer(),c.default.getInstance().statisManager.reportAdvPlayStart(e);break;case r.clicked:e.bFinished=!0,this.responseClickAdvResult(1,o||"\u70b9\u51fb\u6210\u529f",e),this.responseOpenAdvResult(1,o||"\u64ad\u653e\u5b8c\u6210",e),c.default.getInstance().statisManager.reportAdvSuccess(e);break;case r.close:e.bFinished=!0,e.lifeCycleLog[r.show]?(this.responseOpenAdvResult(1,o||"\u64ad\u653e\u5b8c\u6210",e),c.default.getInstance().statisManager.reportAdvSuccess(e),c.default.getInstance().statisManager.reportAdvPlayCompletion(e)):(this.responseOpenAdvResult(0,o||"\u672a\u64ad\u653e\u5b8c\u6210",e),c.default.getInstance().statisManager.reportAdvFail(e,o||"\u672a\u64ad\u653e\u5b8c\u6210"));break;case r.timeout:case r.failed:e.bFinished=!0;var a=p.default.trimErrMessage(o,n);this.responseOpenAdvResult(0,a,e);var s=n&&JSON.stringify(n)||o||l.default.format(i.default.ADV_FAIL_TIP_NOAD,i.default.ADV_ERR_CODE_UNKNOWN);c.default.getInstance().statisManager.reportAdvFail(e,s),e.lifeCycleLog[r.loading]&&!e.lifeCycleLog[r.ready]&&c.default.getInstance().statisManager.reportAdvLoadAdvFailed(e,s);break;default:ULSDK.console.log("ULAdvManager.onAdvLifeCycle \u5176\u4ed6\u751f\u547d\u5468\u671f\u5ffd\u7565",e,t)}break;default:switch(t){case r.loading:c.default.getInstance().statisManager.reportAdvLoadAdvRequest(e);break;case r.ready:e.lifeCycleLog[r.loading]&&c.default.getInstance().statisManager.reportAdvLoadAdvSuccess(e);break;case r.show:this.responseOpenAdvResult(1,o||"\u64ad\u653e\u6210\u529f",e),c.default.getInstance().statisManager.reportAdvSuccess(e),"banner"==e.showAdvType&&(this.bannerStartShowTime=l.default.time(),this.bannerIsShowing=!0,this.currentShowBannerAdvItem=e);break;case r.clicked:this.responseClickAdvResult(1,o||"\u70b9\u51fb\u6210\u529f",e),c.default.getInstance().statisManager.reportAdvClicked(e);break;case r.timeout:case r.failed:a=p.default.trimErrMessage(o,n);this.responseOpenAdvResult(0,a,e);s=n&&JSON.stringify(n)||o||l.default.format(i.default.ADV_FAIL_TIP_NOAD,i.default.ADV_ERR_CODE_UNKNOWN);c.default.getInstance().statisManager.reportAdvFail(e,s),e.lifeCycleLog[r.loading]&&!e.lifeCycleLog[r.ready]&&c.default.getInstance().statisManager.reportAdvLoadAdvFailed(e,s)}}},e.prototype.onCmdOpenAdv=function(e){e.stopImmediatePropagation();var t=e.data,o=s.default.getConfig();this.tryDailyRefresh(),t.serialId=this.serialId++;var n=t.advId,r=t.userData,d=t.tag,p=this.searchAdvTypeByAdvId(n);this.searchAdvGroupIdByAdvId(n);if(ULSDK.console.log(l.default.format("ULAdvManager.onCmdOpenAdv advId:[%s] advType:[%s] serialId:[%s]",n,p,this.serialId)),p){var h=new u.default(n,r,d);if(h.advData=t,this.playingAdvItems[n]&&this.playingAdvItems[n].bRequesting)return ULSDK.console.log("\u5e7f\u544a\u8bf7\u6c42\u4e2d\uff0c\u8bf7\u52ff\u91cd\u590d\u8bf7\u6c42"),void this.responseOpenAdvResult(0,"\u5e7f\u544a\u8bf7\u6c42\u4e2d\uff0c\u8bf7\u52ff\u91cd\u590d\u8bf7\u6c42",h);this.playingAdvItems[h.advId]=h,c.default.getInstance().statisManager.reportAdvTotalRequest(h);var f=o.i_sdk_adv_all_launch_cd;if(l.default.time()-this.sdkInitTime<f/1e3)return ULSDK.console.log("\u5e7f\u544a\u5904\u4e8e\u542f\u52a8\u8bf7\u6c42cd\u4e2d"),void this.responseOpenAdvResult(0,"in all adv launch cd",t);var g=this.getLaunchCdByType(p);if(l.default.time()-this.sdkInitTime<g/1e3)return ULSDK.console.log("\u5e7f\u544a\u5904\u4e8e\u542f\u52a8\u8bf7\u6c42cd\u4e2d"),void this.responseOpenAdvResult(0,"in "+p+" adv launch cd",t);var m=this.getAdvTypeCd(p);if(m>0){var _=this.advTypeLastTriggerTimeLog[p]||0,v=l.default.time()-_;if(ULSDK.console.log(l.default.format("\u68c0\u67e5\u5e7f\u544a\u7c7b\u578bcd\u3002\u4e0a\u6b21\u64ad\u653e\u95f4\u9694%d\u79d2\uff0ccd%d\u79d2",v,m/1e3)),v<=m/1e3)return ULSDK.console.log(l.default.format("\u5e7f\u544a\u7c7b\u578b[%s]cd\u4e2d\uff0c\u8bf7%d\u540e\u518d\u8bd5",p,m/1e3-v)),void this.responseOpenAdvResult(0,l.default.format("%s %d",i.default.ADV_FAIL_TIP_BUSY,i.default.ADV_ERR_CODE_ADV_TYPE_CD),h)}var y=this.getAdvTypeDailyLimit(p);if(y>0){var C=this.advTypeDailyCountLog[p]||0;if(ULSDK.console.log(l.default.format("\u68c0\u67e5\u5e7f\u544a\u65e5\u9650\u3002\u4eca\u65e5\u5df2\u64ad\u653e%d\u6b21\uff0c\u65e5\u9650\u5236%d\u6b21",C,y)),C>=y)return ULSDK.console.log(l.default.format("\u5e7f\u544a\u7c7b\u578b[%s]\u4eca\u65e5\u5df2\u64ad\u653e%d\u6b21\uff0c\u9650\u5236%d\u6b21\u3002\u65e0\u6cd5\u64ad\u653e\u3002",p,C,y)),void this.responseOpenAdvResult(0,l.default.format("%s %d",i.default.ADV_FAIL_TIP_NOAD,i.default.ADV_ERR_CODE_ADV_TYPE_DAILY_LIMIT),h)}switch(p){case"video":if(h.startimeoutTimer(o.i_sdk_adv_video_timeout/1e3),a.default.getInstance().dispatch(i.default.CMD_SDK_PREPARE_SHOW_VIDEO_ADV,h),a.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_VIDEO_ADV,h)||this.responseOpenAdvResult(0,"\u65e0\u6a21\u5757\u54cd\u5e94",h),this.isFirstPlayVideo){this.isFirstPlayVideo=!1;var S=l.default.time()-this.sdkInitTime;S=Math.floor(S),isNaN(S)&&(S=0),S<o.t_sdk_miniplay_game_adv_point_first_click_event_report_time_limit&&a.default.getInstance().dispatch(i.default.CMD_SDK_CHANNEL_MEGADATA_POST,[o.s_sdk_miniplay_game_adv_point_first_click_event_id,d,S.toString()])}a.default.getInstance().dispatch(i.default.CMD_SDK_CHANNEL_MEGADATA_POST,[o.s_sdk_miniplay_game_click_video_event_id,d]);break;case"banner":h.startimeoutTimer(o.i_sdk_adv_banner_timeout/1e3),a.default.getInstance().dispatch(i.default.CMD_SDK_PREPARE_SHOW_BANNER_ADV,h),a.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_BANNER_ADV,h)||this.responseOpenAdvResult(0,"\u65e0\u6a21\u5757\u54cd\u5e94",h);break;case"interstitial":h.startimeoutTimer(o.i_sdk_adv_inter_timeout/1e3),a.default.getInstance().dispatch(i.default.CMD_SDK_PREPARE_SHOW_INTER_ADV,h),a.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_INTER_ADV,h)||this.responseOpenAdvResult(0,"\u65e0\u6a21\u5757\u54cd\u5e94",h);break;case"embedded":h.startimeoutTimer(o.i_sdk_adv_embedded_timeout/1e3),a.default.getInstance().dispatch(i.default.CMD_SDK_PREPARE_SHOW_EMBEDDED_ADV,h),a.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_EMBEDDED_ADV,h)||this.responseOpenAdvResult(0,"\u65e0\u6a21\u5757\u54cd\u5e94",h);break;case"url":h.startimeoutTimer(o.i_sdk_adv_url_timeout/1e3),a.default.getInstance().dispatch(i.default.CMD_SDK_PREPARE_SHOW_URL_ADV,h),a.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_URL_ADV,h)||this.responseOpenAdvResult(0,"\u65e0\u6a21\u5757\u54cd\u5e94",h);break;case"paster":h.startimeoutTimer(o.i_sdk_adv_paster_timeout/1e3),a.default.getInstance().dispatch(i.default.CMD_SDK_PREPARE_SHOW_PASTER_ADV,h),a.default.getInstance().dispatch(i.default.CMD_SDK_SHOW_PASTER_ADV,h)||this.responseOpenAdvResult(0,"\u65e0\u6a21\u5757\u54cd\u5e94",h);break;default:ULSDK.console.warn(l.default.format("ULAdvManager.onCmdOpenAdv unknown advType! advId=[%s]",n)),this.responseOpenAdvResult(0,"unknown advType",h)}}else this.responseOpenAdvResult(0,"advType not found",t)},e.prototype.onCmdCloseAdv=function(e){e.stopImmediatePropagation();var t=e.data,o=t.advId,n=t.userData,r=this.searchAdvTypeByAdvId(o);ULSDK.console.log(l.default.format("ULAdvManager.onCmdCloseAdv advId:[%s] advType:[%s]",o,r));var s=this.playingAdvItems[o];if(s){switch(r){case"video":a.default.getInstance().dispatch(i.default.CMD_SDK_CLOSE_VIDEO_ADV,s);break;case"banner":if(a.default.getInstance().dispatch(i.default.CMD_SDK_CLOSE_BANNER_ADV,s),this.bannerIsShowing){this.bannerIsShowing=!1;var u=l.default.time()-this.bannerStartShowTime;isNaN(u)&&(u=0),c.default.getInstance().statisManager.reportAdvClose(s,Math.round(u).toString())}break;case"interstitial":a.default.getInstance().dispatch(i.default.CMD_SDK_CLOSE_INTER_ADV,s);break;case"embedded":a.default.getInstance().dispatch(i.default.CMD_SDK_CLOSE_EMBEDDED_ADV,s);break;case"url":a.default.getInstance().dispatch(i.default.CMD_SDK_CLOSE_URL_ADV,s);break;case"paster":a.default.getInstance().dispatch(i.default.CMD_SDK_CLOSE_Paster_ADV,s);break;default:ULSDK.console.warn(l.default.format("ULAdvManager.onCmdCloseAdv unknown advType! advId=[%s]",o))}c.default.getInstance().response(i.default.CMD_CLOSE_ADV_RESULT,{code:1,msg:"\u5173\u95ed\u6210\u529f",advId:o,userData:n})}else c.default.getInstance().response(i.default.CMD_CLOSE_ADV_RESULT,{code:0,msg:"adv not found!",advId:o,userData:n})},e.prototype.onCmdCloseNativeAdv=function(e){e.stopImmediatePropagation();var t=e.data,o=t.advId,n=t.userData,r=this.playingAdvItems[o];r?(a.default.getInstance().dispatch(i.default.CMD_SDK_CLOSE_NATIVE_ADV,{advItem:r,closeType:t.closeType}),c.default.getInstance().response(i.default.CMD_CLOSE_NATIVE_ADV_RESULT,{code:1,msg:"\u5173\u95ed\u6210\u529f",advId:o,userData:n})):c.default.getInstance().response(i.default.CMD_CLOSE_NATIVE_ADV_RESULT,{code:0,msg:"adv not found!",advId:o,userData:n})},e.prototype.onCmdClickNativeAdv=function(e){e.stopImmediatePropagation();var t=e.data,o=t.advId,n=t.userData,r=this.playingAdvItems[o];ULSDK.console.log("ULAdvManager.onCmdClickNativeAdv",o,r),r?(a.default.getInstance().dispatch(i.default.CMD_SDK_CLICK_NATIVE_ADV,r),c.default.getInstance().response(i.default.CMD_CLICK_NATIVE_ADV_RESULT,{code:1,msg:"\u6c47\u62a5\u6210\u529f",advId:o,userData:n})):c.default.getInstance().response(i.default.CMD_CLICK_NATIVE_ADV_RESULT,{code:0,msg:"adv not found!",advId:o,userData:n})},e.prototype.onCmdSdkOnGameResume=function(e){s.default.getConfig();ULSDK.console.log("ULAdvManager.onCmdSdkOnGameResume bannerIsShowing:",this.bannerIsShowing," this.bannerStartShowTime:",this.bannerStartShowTime),this.bannerIsShowing&&(this.bannerStartShowTime=l.default.time())},e.prototype.onCmdSdkOnGamePause=function(e){s.default.getConfig();if(ULSDK.console.log("ULAdvManager.onCmdSdkOnGamePause bannerIsShowing:",this.bannerIsShowing," this.bannerStartShowTime:",this.bannerStartShowTime),this.bannerIsShowing){var t=l.default.time()-this.bannerStartShowTime;isNaN(t)&&(t=0),c.default.getInstance().statisManager.reportAdvClose(this.currentShowBannerAdvItem,Math.round(t).toString())}},e.prototype.onCmdSdkCollectionModuleCheckerConfig=function(e){var t=e.getReturnValue()||[],o=["interstitial","banner","embedded","video","url","paster"];t.push({type:"newLine"}),t.push({type:"label",text:"\u5e7f\u544acd\u9650\u5236:"}),t.push({type:"newLine"});for(var n=0;n<o.length;n++){var r=o[n],a="\u672a\u914d\u7f6eCD",i="\u672a\u89e6\u53d1",s=this.getAdvTypeCd(r);s>0&&(a=l.default.format("CD%d\u79d2",s/1e3));var c=this.advTypeLastTriggerTimeLog[r]||0;c>0&&(i=l.default.formatDate(new Date(1e3*c),"\u89e6\u53d1\u65f6\u95f4\uff1aHH:mm:ss")),t.push({type:"label",text:l.default.format("%s: %s %s",r,a,i)}),t.push({type:"newLine"})}t.push({type:"label",text:"\u5e7f\u544a\u6b21\u6570\u9650\u5236:"}),t.push({type:"newLine"});for(n=0;n<o.length;n++){r=o[n];var u="\u672a\u914d\u7f6e\u6b21\u6570\u9650\u5236",d="\u672a\u89e6\u53d1",p=this.getAdvTypeDailyLimit(r);p>0&&(u=l.default.format("\u65e5\u9650\u5236%d\u6b21",p));var h=this.advTypeDailyCountLog[r]||0;h>0&&(d=l.default.format("\u4eca\u65e5\u5df2\u89e6\u53d1%d\u6b21",h)),t.push({type:"label",text:l.default.format("%s: %s %s",r,u,d)}),t.push({type:"newLine"})}e.setReturnValue(t,!0)},e}();o.default=f,cc._RF.pop()},{"../ULConsts":"ULConsts","../events/ULEventDispatcher":"ULEventDispatcher","../utils/ULTools":"ULTools","./ULAdvItem":"ULAdvItem","./ULAdvTrimErrorManager":"ULAdvTrimErrorManager","./ULConfig":"ULConfig","./ULSdkManager":"ULSdkManager","./ULStorageManager":"ULStorageManager"}],ULAdvTrimErrorManager:[function(require,module,exports){"use strict";cc._RF.push(module,"f7273Kxy5lO1b+44CYnBPQv","ULAdvTrimErrorManager"),Object.defineProperty(exports,"__esModule",{value:!0});var ULConsts_1=require("../ULConsts"),ULTools_1=require("../utils/ULTools"),ULConfig_1=require("./ULConfig"),ULSdkManager_1=require("./ULSdkManager"),ULErrorRuleLogic;(function(e){e[e.ordinary=0]="ordinary",e[e.or=1]="or",e[e.with=2]="with",e[e.error=3]="error"})(ULErrorRuleLogic||(ULErrorRuleLogic={}));var ULErrorRuleItem=function(){function ULErrorRuleItem(e){void 0===e&&(e=null),this.ruleString=null,this.logic=ULErrorRuleLogic.ordinary,this.rule=null,this.rules=[],this.ruleString=e,e&&0!=e.length?this.initWithRule(this.ruleString):this.logic=ULErrorRuleLogic.error}return Object.defineProperty(ULErrorRuleItem.prototype,"isWildcard",{get:function(){return"*"==this.rule},enumerable:!0,configurable:!0}),ULErrorRuleItem.prototype.initWithErrRule=function(){this.logic=ULErrorRuleLogic.error,this.rule=null,this.rules=[]},ULErrorRuleItem.prototype.initWithRule=function(e){e=e.replace(/\s/g,"");for(var t=0,o=0,n="";e.length;){var r=e.charAt(0),a=e.length>0?e.charAt(1):"";switch(e=e.slice(1),r){case"(":t++,""==n.replace(/\(/g,"")&&o++;break;case")":if(""==e.replace(/\)/g,"")&&0!=o)return n=n.substring(o),this.initWithRule(n);o=--t>o?o:t;break;case"|":if(0==t){if(r+a=="||"){if(this.logic!=ULErrorRuleLogic.or&&this.logic!=ULErrorRuleLogic.ordinary)return this.initWithErrRule();this.logic=ULErrorRuleLogic.or,this.rules.push(new ULErrorRuleItem(n)),n=""}continue}break;case"&":if(0==t){if(r+a=="&&"){if(this.logic!=ULErrorRuleLogic.with&&this.logic!=ULErrorRuleLogic.ordinary)return this.initWithErrRule();this.logic=ULErrorRuleLogic.with,this.rules.push(new ULErrorRuleItem(n)),n=""}continue}}n+=r}n.length>0&&(this.logic==ULErrorRuleLogic.ordinary?this.rule=n:this.rules.push(new ULErrorRuleItem(n)))},ULErrorRuleItem.prototype.complianceTheRules=function(e,t){switch(void 0===t&&(t=null),this.logic){case ULErrorRuleLogic.ordinary:return this.judgmentStandard(e,t);case ULErrorRuleLogic.or:for(var o=0,n=this.rules;o<n.length;o++){if(n[o].complianceTheRules(e,t))return!0}return!1;case ULErrorRuleLogic.with:for(var r=0,a=this.rules;r<a.length;r++){if(!a[r].complianceTheRules(e,t))return!1}return!0}return!1},ULErrorRuleItem.prototype.judgmentStandard=function(key,customData){if(void 0===customData&&(customData=null),null==this.rule)return!1;if("*"==this.rule)return!0;if(this.rule==key)return!0;if(this.rule.length>2){var rule=this.rule,firstChar=rule.charAt(0),lastChar=rule.charAt(this.rule.length-1);if(firstChar+lastChar=="//"){rule=rule.substring(1,rule.length-1);var reg=RegExp(rule);if(reg.exec(key))return!0}}var patrn=/(?==|!=|>=|>|<|<=)/;if(customData&&patrn.exec(this.rule)){var trimRule=this.rule.replace("this.","customData."),string="if ("+trimRule+") { judge = true } else { judge = false }";try{var judge=!1;return eval(string),judge}catch(e){return ULSDK.console.log(e),!1}}return!1},ULErrorRuleItem}(),ULAdvTrimErrorManager=function(){function e(){}return e.trimErrMessage=function(e,t){var o=ULConfig_1.default.getConfig();if(!o.i_sdk_trim_adv_err_switch)return t&&ULTools_1.default.format("%s %d",ULConsts_1.default.ADV_FAIL_TIP_NOAD,t.code||t.errCode)||e||ULTools_1.default.format(ULConsts_1.default.ADV_FAIL_TIP_NOAD,ULConsts_1.default.ADV_ERR_CODE_UNKNOWN);var n=o.t_sdk_trim_adv_err_object||{};if(!t)return e||ULTools_1.default.format(ULConsts_1.default.ADV_FAIL_TIP_NOAD,ULConsts_1.default.ADV_ERR_CODE_UNKNOWN);var r={};r[ULSdkManager_1.default.getInstance().channelInfo.channelName||""]=t;var a=null;try{a=this.getCustomMsgFromRules(n,r)}catch(t){ULSDK.console.error("ULAdvTrimErrorManager:\u9519\u8bef\u6574\u7406\u62a5\u9519-------------\u8bf7\u68c0\u67e5\u914d\u7f6e"),ULSDK.console.error("ULAdvTrimErrorManager:errJson\uff1a",n),ULSDK.console.error("ULAdvTrimErrorManager:channelNameErrJson\uff1a",r)}return a&&(a=ULTools_1.default.format("%s %d",a,t.code||t.errCode)),a||e||ULTools_1.default.format(ULConsts_1.default.ADV_FAIL_TIP_NOAD,ULConsts_1.default.ADV_ERR_CODE_UNKNOWN)},e.getCustomMsgFromRules=function(e,t){var o=[],n=[];if("object"!=typeof e)return"string"==typeof e?e:"";if(o=Object.keys(e),!t)return"";"object"==typeof t?n=Object.keys(t):n.push(t);for(var r=o.length;o.length;){var a=o.shift();r--;var i=this.trimRules[a];if(i||(i=new ULErrorRuleItem(a),this.trimRules[a]=i),i.isWildcard&&r>0)o.join(a);else for(var s=e[a],l=0,c=n;l<c.length;l++){var u=c[l];if(i.complianceTheRules(u,t)){var d=t[u]||null,p=this.getCustomMsgFromRules(s,d);if(p)return p}}}return""},e.trimRules={},e}();exports.default=ULAdvTrimErrorManager,cc._RF.pop()},{"../ULConsts":"ULConsts","../utils/ULTools":"ULTools","./ULConfig":"ULConfig","./ULSdkManager":"ULSdkManager"}],ULBannerView:[function(e,t,o){"use strict";cc._RF.push(t,"0601dC045VD7aO5tgmp3+U5","ULBannerView");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("./ULAdViewBase"),a=window.cc,i=window.Laya,s=function(e){function t(){var t=e.call(this)||this;return t.name="BannerView",t.bannerView=null,a?(ULSDK.console.log("ULBannerView.constructor"),t.engine=t.ENGINE_COCOS):i&&(ULSDK.console.log("ULBannerView.constructor"),t.engine=t.ENGINE_LAYA),t}return n(t,e),t.prototype.createView=function(e,t){e&&t&&(a?(ULSDK.console.log("ULBannerView.createView.createViewByCocos"),this.createViewByCocos(e,t)):i&&(ULSDK.console.log("ULBannerView.createView.createViewByLaya"),this.createViewByLaya(e,t)))},t.prototype.createViewByLaya=function(e,t){var o=this,n=this.getRootNode();if(n){ULSDK.console.log("ULBannerView.createViewByLaya style:",e);var r=i.stage.width,a=i.stage.height;this.bannerView=n.addChild(new Laya.Sprite),this.bannerView.size(e.width,e.height),this.bannerView.pos(e.left,-e.top),this.bannerView.graphics.drawRect(0,0,r,a,"#00000080");var s=this.bannerView.addChild(new Laya.Image);s.size(e.width,e.height),s.anchorX=.5,s.anchorY=.5;var l=s.addChild(new Laya.Label);l.fontSize=25,l.align="center",l.text="X \u5173\u95ed",l.color="#ffffff",l.pos(s.width/2-l.width/2,s.height/2-l.height/2),this.registerLayaTouchHander(s,function(e){("began"==e.name?s.scale(1.1,1.1):"moved"==e.name||s.scale(1,1),"click"==e.name)&&(t instanceof Function&&t()||o.bannerView.destroy())})}else ULSDK.console.warn(this.name+"createViewByLaya nodeRoot not found!")},t.prototype.createViewByCocos=function(e,t){var o=this,n=this.getNodeCanvas();if(n){this.bannerView&&this.bannerView.destroy(),this.bannerView=new a.Node,this.bannerView.parent=n,this.bannerView.zIndex=a.macro.MAX_ZINDEX;var r=new a.Node;r.parent=this.bannerView,ULSDK.console.log(this.name+".createViewByCocos BannerView.style:",e),this.bannerView.x=e.left,this.bannerView.y=e.top,this.bannerView.setContentSize(e.width,e.height),r.setContentSize(this.bannerView.getContentSize());var i=new a.Node;i.parent=r,i.color=a.color(255,255,0),i.setContentSize(r.getContentSize());var s=new a.Node;s.parent=r,s.y=0,s.x=0,s.color=a.color(255,255,255,255),s.addComponent(a.Label).string="X \u5173\u95ed",s.getComponent(a.Label).overflow=a.Label.Overflow.SHRINK,s.getComponent(a.Label).verticalAlign=a.Label.VerticalAlign.CENTER,s.getComponent(a.Label).horizontalAlign=a.Label.HorizontalAlign.CENTER,s.getComponent(a.Label).fontSize=25,s.width=r.width,s.height=r.height,ULSDK.console.log(this.name+".createViewByCocos closeBtnText:",s.width,s.height),this.registerCocosTouchHandler(r,function(e){("began"==e.name?r.scale=1.1:"moved"==e.name||(r.scale=1),o.isTouchEventClick(e))&&(t instanceof Function&&t()||o.bannerView.destroy())})}else ULSDK.console.warn(this.name+".createViewByCocos nodeCanvas not found!")},t.prototype.onAdvShow=function(){ULSDK.console.log(this.name+".show")},t.prototype.onAdvClose=function(){ULSDK.console.log(this.name+".hide"),this.bannerView&&this.bannerView.destroy()},t.prototype.onAdvDestroy=function(){ULSDK.console.log(this.name+".destroy"),this.bannerView&&this.bannerView.destroy()},t.prototype.onAdvClicked=function(){ULSDK.console.log(this.name+".click")},t}(r.default);o.default=s,cc._RF.pop()},{"./ULAdViewBase":"ULAdViewBase"}],ULBase64:[function(e,t,o){"use strict";cc._RF.push(t,"b174bCJ83VKurmV9mhfO4z4","ULBase64"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.encodeForUrl=function(e,t){var o=this.encode(e,t);return o?o=(o=o.replace("+","-")).replace("/","*"):null},e.decodeForUrl=function(e,t){return e?(e=(e=e.replace("-","+")).replace("*","/"),this.decode(e,t)):null},e.encode=function(e,t){var o,n,r,a,i,s,l,c=t||this._defaultKeyStr,u="",d=0;for(e=this._utf8_encode(e);d<e.length;)a=(o=e.charCodeAt(d++))>>2,i=(3&o)<<4|(n=e.charCodeAt(d++))>>4,s=(15&n)<<2|(r=e.charCodeAt(d++))>>6,l=63&r,isNaN(n)?s=l=64:isNaN(r)&&(l=64),u=u+c.charAt(a)+c.charAt(i)+c.charAt(s)+c.charAt(l);return u},e.decode=function(e,t){var o,n,r,a,i,s,l=t||this._defaultKeyStr,c="",u=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)o=l.indexOf(e.charAt(u++))<<2|(a=l.indexOf(e.charAt(u++)))>>4,n=(15&a)<<4|(i=l.indexOf(e.charAt(u++)))>>2,r=(3&i)<<6|(s=l.indexOf(e.charAt(u++))),c+=String.fromCharCode(o),64!=i&&(c+=String.fromCharCode(n)),64!=s&&(c+=String.fromCharCode(r));return c=this._utf8_decode(c)},e._utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",o=0;o<e.length;o++){var n=e.charCodeAt(o);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},e._utf8_decode=function(e){for(var t="",o=0,n=0,r=0,a=0;o<e.length;)(n=e.charCodeAt(o))<128?(t+=String.fromCharCode(n),o++):n>191&&n<224?(r=e.charCodeAt(o+1),t+=String.fromCharCode((31&n)<<6|63&r),o+=2):(r=e.charCodeAt(o+1),a=e.charCodeAt(o+2),t+=String.fromCharCode((15&n)<<12|(63&r)<<6|63&a),o+=3);return t},e._defaultKeyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e}();o.default=n,cc._RF.pop()},{}],ULChannelInfo:[function(e,t,o){"use strict";cc._RF.push(t,"f442cCK3D5Gu75sKNsfG1u8","ULChannelInfo"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../utils/ULTools"),r=e("../events/ULEventDispatcher"),a=e("../ULConsts"),i=e("./ULConfig"),s=function(){function e(){this.preparationFlags={},this.copInfo="{}",this.payInfo={},this.jumpInfo=[],this.isSupportRecordShare=!1,this.channelName="default",this.isPayEnabled=!1,this.isShareEnabled=!1,this.isUseSdkRank=!1,this.isShowUrlAdIcon=!1,this.appName="",this.equipmentModel="",this.platformVersionMessage="",this.osVersionMessage="",this.cardType=0,this.isThirdExit=!1,this.isAbout=!1,this.isMoreGame=!1,this.isULMoreGame=!1,this.isSupportClipboardData=!1,this.isSupportInstallShortcut=!1,this.isSupportFindMinigames=!1,this.findMinigamesImageUrl="",this.isSupportRecommendationBtn=!1,this.isSupportJumpList=!1,this.is4399Watermark=!1,this.uuid="",this.sdcardPath="",this.packageVersion="",this.copChannelId="",this.ulsdkVersion="",this.cdkChannelId="",this.channelUserId="",this.referenceBannerHeight=a.default.DEFAULT_REFERANCE_BANNER_HEIGHT,this.isNewUser=!0,this.loginDays=0,this._sdkUserId="",this.isSupportPasterAdv=!1,this.gameLanguage="",this.isSupportChannelMoreGameBox=!1,this.isSupportChannelBlockAd=!1,this.isSupportSubscribe=!1,this.isSupportColorSign=!1,this.isSupportGridAd=!1,this.isSupportVideoRank=!1,this.isSupportFavoriteGuide=!1,this.isSupportFollowOfficialAccount=!1,this.appIdOrPkgName="",this.isSupportContentSecurityCheck=!1,this.isJumpLeisureEnabled=!1,this.isSupportVibrate=!0,this.isSupportOpenUrl=!1,this.isSupportJumpInfoVideoType=!1,r.default.getInstance().addListener(a.default.CMD_SDK_COLLECTION_MODULE_CHECKER_CONFIG,a.default.PRIORITY_NONE,this.onCmdSdkCollectionModuleCheckerConfig.bind(this))}return e.prototype.toBaseChannelInfoData=function(){var e=i.default.getConfig();ULSDK.console.log("config",e);var t=void 0==e.s_sdk_licence_info?"":e.s_sdk_licence_info;t=t.replace(/\/n/g,"\\n");var o=!!e.i_sdk_age_level_info_mode,n=e.s_sdk_age_level_info||"",r={gameName:e.s_game_name,gameLanguage:this.gameLanguage,channelName:this.channelName,appName:this.appName,isShowLicenceInfo:1==e.i_sdk_licence_info_mode,licenceInfo:t,isShowAgeLevelInfo:o};return n&&(r.ageLevelInfo=n),r},e.prototype.toResponseData=function(){for(var e=[],t=0;t<this.jumpInfo.length;t++){var o=this.jumpInfo[t];o.index&&o.url?e.push({index:o.index,url:o.url,rewards:o.rewards||[],bReceived:o.bReceived||!1,appName:o.appName||""}):ULSDK.console.warn("ULChannelInfo.toResponseData jump data error!",o)}var n=i.default.getConfig();return null!=n.i_sdk_adv_reference_banner_height&&(this.referenceBannerHeight=n.i_sdk_adv_reference_banner_height),this.isJumpLeisureEnabled=this.isJumpLeisureEnabled&&!!n.i_sdk_moreWonderful_mode,this.isSupportInstallShortcut=this.isSupportInstallShortcut&&!!n.i_sdk_installShortcut_mode,this.isSupportRecommendationBtn=this.isSupportRecommendationBtn&&!!n.i_sdk_moregame_mode,this.isSupportJumpList=this.isSupportJumpList&&!!n.i_sdk_jumplist_mode,this.isSupportVibrate=this.isSupportVibrate&&!!n.i_sdk_phone_vibrate,this.isSupportOpenUrl=this.isSupportOpenUrl&&!!n.i_sdk_support_open_url,this.isSupportRecordShare=this.isSupportRecordShare&&!!n.i_sdk_support_record_share,{copInfo:this.copInfo,cardType:this.cardType,isThirdExit:this.isThirdExit,isAbout:this.isAbout,payInfo:this.payInfo,isMoreGame:this.isMoreGame,isULMoreGame:this.isULMoreGame,uuid:this.uuid,sdcardPath:this.sdcardPath,packageVersion:this.packageVersion,copChannelId:this.copChannelId,ulsdkVersion:this.ulsdkVersion,isShowUrlAdIcon:this.isShowUrlAdIcon,cdkChannelId:this.cdkChannelId,isPayEnabled:this.isPayEnabled,isShareEnabled:this.isShareEnabled,isUseSdkRank:this.isUseSdkRank,isSupportRecordShare:this.isSupportRecordShare,isSupportInstallShortcut:this.isSupportInstallShortcut,isSupportClipboardData:this.isSupportClipboardData,isSupportFindMinigames:this.isSupportFindMinigames,findMinigamesImageUrl:this.findMinigamesImageUrl,isSupportRecommendationBtn:this.isSupportRecommendationBtn,isSupportJumpList:this.isSupportJumpList,is4399Watermark:this.is4399Watermark,appName:this.appName.toLocaleLowerCase(),jumpInfo:e,channelUserId:this.channelUserId,referenceBannerHeight:this.referenceBannerHeight,isNewUser:this.isNewUser,loginDays:this.loginDays,isSupportPasterAdv:this.isSupportPasterAdv,gameLanguage:this.gameLanguage,isSupportChannelMoreGameBox:this.isSupportChannelMoreGameBox,isSupportChannelBlockAd:this.isSupportChannelBlockAd,isSupportSubscribe:this.isSupportSubscribe,isSupportGridAd:this.isSupportGridAd,isSupportVideoRank:this.isSupportVideoRank,isSupportFavoriteGuide:this.isSupportFavoriteGuide,isSupportFollowOfficialAccount:this.isSupportFollowOfficialAccount,customerServiceInfo:n.t_customer_service_info,appIdOrPkgName:this.appIdOrPkgName,isSupportContentSecurityCheck:this.isSupportContentSecurityCheck,isJumpLeisureEnabled:this.isJumpLeisureEnabled,isSupportVibrate:this.isSupportVibrate,isSupportOpenUrl:this.isSupportOpenUrl,isSupportJumpInfoVideoType:this.isSupportJumpInfoVideoType}},e.prototype.isReady=function(){return n.default.getObjSize(this.preparationFlags)<=0},e.prototype.getPreparationFlags=function(){var e=[];return n.default.forEachMap(this.preparationFlags,function(t,o){e.push(t)}),e},e.prototype.addPreparationFlag=function(e){this.preparationFlags[e]=!0},e.prototype.removePreparationFlag=function(e){delete this.preparationFlags[e]},e.prototype.onCmdSdkCollectionModuleCheckerConfig=function(e){var t=e.getReturnValue()||[];t.push({type:"newLine"}),t.push({type:"label",text:"\u6e20\u9053\u4fe1\u606f:"}),t.push({type:"newLine"});var o="",r=this.toResponseData(),a=Object.keys(r);a.sort();for(var i=0;i<a.length;i++){var s=a[i],l=r[s];o+=n.default.format("[%s] = [%s]\n",s,JSON.stringify(l))}t.push({type:"labelArea",text:o}),t.push({type:"newLine"}),e.setReturnValue(t,!0)},e}();o.default=s,cc._RF.pop()},{"../ULConsts":"ULConsts","../events/ULEventDispatcher":"ULEventDispatcher","../utils/ULTools":"ULTools","./ULConfig":"ULConfig"}],ULChannelModuleBase:[function(e,t,o){"use strict";cc._RF.push(t,"aed5080O6NFML+RwAQyaFde","ULChannelModuleBase");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("./ULModuleBase"),a=e("../events/ULEventDispatcher"),i=e("../ULConsts"),s=e("./ULConfig"),l=e("../utils/ULTools"),c=e("./ULStorageManager"),u=e("./ULSdkManager"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.init=function(){e.prototype.init.call(this),a.default.getInstance().addListener(i.default.CMD_SDK_GET_STORAGE,i.default.PRIORITY_NONE,this.onCmdSdkGetStorage.bind(this)),a.default.getInstance().addListener(i.default.CMD_SDK_SET_STORAGE,i.default.PRIORITY_NONE,this.onCmdSdkSetStorage.bind(this)),a.default.getInstance().addListener(i.default.CMD_SDK_GET_CLIPBOARD_DATA,i.default.PRIORITY_NONE,this.onCmdSdkGetClipboardData.bind(this)),a.default.getInstance().addListener(i.default.CMD_SDK_SET_CLIPBOARD_DATA,i.default.PRIORITY_NONE,this.onCmdSdkSetClipboardData.bind(this)),a.default.getInstance().addListener(i.default.CMD_SDK_IS_SUPPORT_CLIPBOARD,i.default.PRIORITY_NONE,this.onCmdSdkIsSupportClipboard.bind(this)),this.genSdkUserId(),u.default.getInstance().channelInfo._sdkUserId=this.sdkUserId,u.default.getInstance().channelInfo.isNewUser=this.isNewUser,ULSDK.console.log("ULChannelModuleBase.init isNewUser:",this.isNewUser)},t.prototype.genSdkUserId=function(){var e=s.default.getConfig(),t=l.default.format("mUserId_%s",e.s_sdk_megadata_game_id);this.isNewUser=!1,this.sdkUserId=c.default.getInstance().getStorage(t),this.sdkUserId||(this.sdkUserId=l.default.format("%s_%s_%s",e.s_sdk_cop_game_id,l.default.createRandomUserId(),e.s_sdk_cop_channel_id),c.default.getInstance().setStorage(t,this.sdkUserId),this.isNewUser=!0)},t.prototype.onCmdSdkGetStorage=function(e){var t=e.data.key;e.setReturnValue(this._hook_getStorage(t))},t.prototype.onCmdSdkSetStorage=function(e){var t=e.data.key,o=e.data.data;this._hook_setStorage(t,o),e.stopImmediatePropagation()},t.prototype.onCmdSdkGetClipboardData=function(e){var t=e.data.finishCallback;this._hook_getClipboardData(t),e.stopImmediatePropagation()},t.prototype.onCmdSdkSetClipboardData=function(e){var t=e.data.data,o=e.data.finishCallback;this._hook_setClipboardData(t,o),e.stopImmediatePropagation()},t.prototype.onCmdSdkIsSupportClipboard=function(e){e.data;e.setReturnValue(this._hook_isSupportClipboard()),e.stopImmediatePropagation()},t}(r.default);o.default=d,cc._RF.pop()},{"../ULConsts":"ULConsts","../events/ULEventDispatcher":"ULEventDispatcher","../utils/ULTools":"ULTools","./ULConfig":"ULConfig","./ULModuleBase":"ULModuleBase","./ULSdkManager":"ULSdkManager","./ULStorageManager":"ULStorageManager"}],ULChannelModuleWebmobileBase:[function(e,t,o){"use strict";cc._RF.push(t,"48fa70W9qRA1JcqOejx8sMG","ULChannelModuleWebmobileBase");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._hook_getStorage=function(e){return localStorage?localStorage.getItem(e):null},t.prototype._hook_setStorage=function(e,t){localStorage&&localStorage.setItem(e,t)},t.prototype._hook_isSupportClipboard=function(){return!1},t.prototype._hook_getClipboardData=function(e){e(null)},t.prototype._hook_setClipboardData=function(e,t){if(document){ULSDK.console.log("webmobile --- copy 2");var o=document.createElement("input");document.body.appendChild(o),o.value=e,o.focus(),o.select();var n=!1;try{n=document.execCommand("copy")}catch(e){n=!1}document.body.removeChild(o),t(n)}else t(!1)},t}(e("./ULChannelModuleBase").default);o.default=r,cc._RF.pop()},{"./ULChannelModuleBase":"ULChannelModuleBase"}],ULClipboardManager:[function(e,t,o){"use strict";cc._RF.push(t,"e4e21Ds4iZO4YjWXyTi5be3","ULClipboardManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../events/ULEventDispatcher"),r=e("../ULConsts"),a=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.getClipboardData=function(e){e instanceof Function?n.default.getInstance().dispatch(r.default.CMD_SDK_GET_CLIPBOARD_DATA,{finishCallback:e})||e(null):ULSDK.console.warn("ULClipboardManager.getClipboardData finishCallback not a function")},e.prototype.setClipboardData=function(e,t){t instanceof Function?n.default.getInstance().dispatch(r.default.CMD_SDK_SET_CLIPBOARD_DATA,{data:e,finishCallback:t})||t(!1):ULSDK.console.warn("ULClipboardManager.setClipboardData finishCallback not a function")},e.prototype.isSupport=function(){return!!n.default.getInstance().dispatchWithReturn(r.default.CMD_SDK_IS_SUPPORT_CLIPBOARD,{})},e._instance=null,e}();o.default=a,cc._RF.pop()},{"../ULConsts":"ULConsts","../events/ULEventDispatcher":"ULEventDispatcher"}],ULConfig:[function(e,t,o){"use strict";cc._RF.push(t,"f083dtvu/FIjbKYe1MWaW1D","ULConfig"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../assets/cConfig"),r=e("../utils/ULTools"),a=e("../ULConsts"),i=e("../events/ULEventDispatcher"),s=e("./ULSdkManager"),l=e("./ULStorageManager"),c=function(){function e(){}return e.init=function(){this.bInit=!0,i.default.getInstance().addListener(a.default.CMD_SDK_COLLECTION_MODULE_CHECKER_CONFIG,a.default.PRIORITY_NONE,this.onCmdSdkCollectionModuleCheckerConfig.bind(this))},e.getConfig=function(){return this.bInit||this.init(),this.currConfig||(this.currConfig=r.default.clone(n.cConfig)),this.currConfig},e.get=function(e){return this.getConfig()[e]},e.updateValueByCop=function(e){var t=r.default.clone(n.cConfig);r.default.forEachMap(e,function(e,o){"nil"==o&&(o=""),t[e]=o}),this.currConfig=t,a.default.B_INNER_DEBUG=this.getConfig().i_sdk_debug_mode>=a.default.CONSOLE_OUTPUT_LEVEL_INNER_DEBUG},e.onCmdSdkCollectionModuleCheckerConfig=function(e){var t=this,o=e.getReturnValue()||[];o.push({type:"newLine"}),o.push({type:"label",text:"cConfig:"}),o.push({type:"button",text:"\u663e\u793acConfig",onClick:function(){var e=t.currConfig,o=Object.keys(e);o.sort();for(var n=[],a=0;a<o.length;a++){var i=o[a],l=JSON.stringify(e[i]),c=r.default.format("[%s] = [%s]\n",i,l);c.length>=64&&(c=c.substr(0,62)+".."),n.push({text:c,value:{k:i,v:l}})}s.default.getInstance().moduleCheckerManager.showPickerDialog("cConfig",n,function(e){s.default.getInstance().moduleCheckerManager.alertPrompt(e.k,e.v,"\u5173\u95ed",null)},!0)}}),o.push({type:"newLine"}),o.push({type:"label",text:r.default.format("i_sdk_debug_mode=[%s]",this.getConfig().i_sdk_debug_mode),name:"labelDebugMode"}),o.push({type:"button",text:"\u5207\u6362\u8c03\u8bd5\u6a21\u5f0f",onClick:function(){s.default.getInstance().moduleCheckerManager.showPickerDialog("\u9009\u62e9\u8c03\u8bd5\u6a21\u5f0f",[{text:"0: \u5168\u5173",value:0},{text:"1: warn + error",value:1},{text:"2: log + warn + error",value:2},{text:"3: \u5f00\u542f\u5404\u6a21\u5757\u7684DEBUG + log + warn + error",value:3}],function(e){n.cConfig.i_sdk_debug_mode=e,t.currConfig.i_sdk_debug_mode=e,r.default._hack_console_print_method(),a.default.B_INNER_DEBUG=t.getConfig().i_sdk_debug_mode>=a.default.CONSOLE_OUTPUT_LEVEL_INNER_DEBUG,s.default.getInstance().moduleCheckerManager.setItemText("labelDebugMode",r.default.format("i_sdk_debug_mode=[%s]",t.getConfig().i_sdk_debug_mode))})}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u5c40\u57df\u7f51\u8c03\u8bd5\uff1a",name:"labelSocketDebugMode"}),o.push({type:"inputBox",text:l.default.getInstance().getStorage("console_lan_id"),name:"console_lan_id"}),o.push({type:"button",text:"\u5207\u6362\u5c40\u57df\u7f51\u8c03\u8bd5\u6a21\u5f0f",onClick:function(){var e=s.default.getInstance().moduleCheckerManager.getItemText("console_lan_id"),t=[{text:"\u5173\u95ed\u8c03\u8bd5",value:0},{text:"\u5f00\u542f\u8c03\u8bd5: "+e,value:1}];s.default.getInstance().moduleCheckerManager.showPickerDialog("\u9009\u62e9\u8c03\u8bd5\u6a21\u5f0f",t,function(t){0==t?(l.default.getInstance().setStorage("console_lan_id",null),r.default._close_console_print_LAN()):(l.default.getInstance().setStorage("console_lan_id",e),r.default._start_console_print_LAN())})}}),o.push({type:"newLine"}),o.push({type:"label",text:"SDK log \u5f00\u5173\uff1a("+(this.sdkLogSwitch?"\u5df2\u5f00\u542f":"\u5df2\u5173\u95ed")+")",name:"SDK_LOG_MODE"}),o.push({type:"button",text:"\u5207\u6362\u72b6\u6001",onClick:function(){t.sdkLogSwitch?(t.sdkLogSwitch=!1,ULSDK.console.allowConsole=!1):(t.sdkLogSwitch=!0,ULSDK.console.allowConsole=!0),s.default.getInstance().moduleCheckerManager.setItemText("SDK_LOG_MODE","SDK log \u5f00\u5173\uff1a("+(t.sdkLogSwitch?"\u5df2\u5f00\u542f":"\u5df2\u5173\u95ed")+")")}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u663e\u793asdk\u901a\u4fe1\u8bb0\u5f55:"}),o.push({type:"button",text:"\u67e5\u770b...",onClick:function(){for(var e=s.default.getInstance().getSdkCommunicationLog(),t=[],o=0;o<e.length;o++){var n=e[o];try{var a=JSON.parse(n);ULSDK.console.log(o,n,a),t.push({text:r.default.format("%d: %s",o,a.cmd),value:n})}catch(e){}}ULSDK.console.log("conf",t),s.default.getInstance().moduleCheckerManager.showPickerDialog("sdk\u901a\u4fe1\u8bb0\u5f55\uff08\u6700\u8fd1100\u6761\uff09",t,function(e){s.default.getInstance().moduleCheckerManager.showBigTextWithPickerDialog("\u8be6\u60c5",e,40)},!0)}}),o.push({type:"newLine"}),e.setReturnValue(o,!0)},e.bInit=!1,e.sdkLogSwitch=!0,e}();o.default=c,cc._RF.pop()},{"../ULConsts":"ULConsts","../assets/cConfig":"cConfig","../events/ULEventDispatcher":"ULEventDispatcher","../utils/ULTools":"ULTools","./ULSdkManager":"ULSdkManager","./ULStorageManager":"ULStorageManager"}],ULConsts:[function(e,t,o){"use strict";cc._RF.push(t,"36a50GyW6pFpausLQFWBrrz","ULConsts"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.CMD_GET_BASE_CHANNEL_INFO="/c/getBaseChannelInfo",e.CMD_SET_VERSION="/c/setVersion",e.CMD_OPEN_MORE_GAME="/c/openMoreGame",e.CMD_OPEN_UL_MORE_GAME="/c/openUlMoreGame",e.CMD_OPEN_PAY="/c/openPay",e.CMD_OPEN_JF="/c/openJf",e.CMD_OPEN_SHARE="/c/openShare",e.CMD_CALL_PHONE="/c/callPhone",e.CMD_UL_WEB_VIEW="/c/ulWebView",e.CMD_EXIT_GAME="/c/exitGame",e.CMD_MEGADATA_SERVER="/c/megadataServer",e.CMD_POST_MEGADATA="/c/postMegadata",e.CMD_USE_CDKEY="/c/useCdkey",e.CMD_OPEN_ADV="/c/openAdv",e.CMD_CLICK_NATIVE_ADV="/c/clickNativeAdv",e.CMD_CLOSE_ADV="/c/closeAdv",e.CMD_CLOSE_NATIVE_ADV="/c/closeNativeAdv",e.CMD_USER_LOGIN="/c/userLogin",e.CMD_USER_LOGIN_REPORT="/c/userLoginReport",e.CMD_USER_IS_LOGIN="/c/userIsLogin",e.CMD_LOGIN_OUT="/c/loginOut",e.CMD_SAVE_RANK_DATA="/c/saveRankData",e.CMD_GET_RANK_DATA="/c/getRankData",e.CMD_RECORDER_GAME_VIDEO="/c/recorderGameVideo",e.CMD_SHARE_GAME_VIDEO="/c/shareGameVideo",e.CMD_OPEN_JUMP="/c/openJump",e.CMD_JUMP_OTHER_GAME="/c/jumpOtherGame",e.CMD_OPEN_RECOMMENDATION="/c/openRecommendation",e.CMD_CLOSE_RECOMMENDATION="/c/closeRecommendation",e.CMD_SAVE_USER_DATA="/c/saveUserData",e.CMD_GET_USER_DATA="/c/getUserData",e.CMD_ADD_GAME_TO_MY_FAVORITE="/c/addGameToMyFavorite",e.CMD_GET_USER_INFO_MSG="/c/getUserInfoMsg",e.CMD_OPEN_USERINFO_ACCREDIT_BUTTON="/c/openUserInfoAccreditButton",e.CMD_CLOSE_USERINFO_ACCREDIT_BUTTON="/c/closeUserInfoAccreditButton",e.CMD_INSTALL_SHORTCUT="/c/installShortcut",e.CMD_SET_CLIPBOARD_DATA="/c/setClipboardData",e.CMD_GET_CLIPBOARD_DATA="/c/getClipboardData",e.CMD_SET_ULSDKDEMO_DEBUG_MODE="/c/setUlsdkdemoDebugMode",e.CMD_MPSDK_AD_HANDLER="/c/mpsdkAdHandler",e.CMD_CREATE_GAME_ICON="/c/createGameIcon",e.CMD_GAME_ICON_HANDLER="/c/gameIconHandler",e.CMD_OPEN_CHANNEL_MORE_GAME_BOX="/c/openChannelMoreGameBox",e.CMD_OPEN_BLOCK_AD="/c/openBlockAd",e.CMD_CLOSE_BLOCK_AD="/c/closeBlockAd",e.CMD_GET_SHORTCUT_STATE="/c/getShortcutState",e.CMD_ADD_SUBSCRIBE="/c/addSubscribe",e.CMD_ADD_COLOR_SIGN="/c/addColorSign",e.CMD_OPEN_GRID_AD="/c/openGridAd",e.CMD_CLOSE_GRID_AD="/c/closeGridAd",e.CMD_JUMP_TO_VIDEO_VIEW="/c/jumpToVideoView",e.CMD_FOLLOW_OFFICIAL_ACCOUNT="/c/followOfficialAccount",e.CMD_GET_FOLLOW_OFFICIAL_ACCOUNT_STATE="/c/getFollowOfficialAccountState",e.CMD_CONTENT_SECURITY_CHECK="/c/contentSecurityCheck",e.CMD_JUMP_LEISURE_SUBJECT="/c/jumpLeisureSubject",e.CMD_PHONE_VIBRATE="/c/phoneVibrate",e.CMD_OPEN_URL="/c/openUrl",e.CMD_SHOW_CHANNEL_MASK="/c/showChannelMask",e.CMD_CLOSE_CHANNEL_MASK="/c/closeChannelMask",e.CMD_OPEN_ADVANCED_SETTING="/c/openAdvancedSetting",e.CMD_RANKLIST_GET_USER_NUM="/c/getUserNumInRank",e.CMD_RANKLIST_GET_USER_INFO_BY_ID="/c/getUserInfoByIdInRank",e.CMD_RANKLIST_GET_USER_INFO_BY_LIST="/c/getUserInfoListByRankId",e.CMD_RANKLIST_REPORT_USER_INFO="/c/reportUserInfoInRank",e.CMD_RANKLIST_MODIFY_SCORE_BY_ARRAY="/c/modifyScoreByArray",e.CMD_CHANNEL_INFO_RESULT="/c/channelInfoResult",e.CMD_GET_BASE_CHANNEL_INFO_RESULT="/c/getBaseChannelInfoResult",e.CMD_PAY_RESULT="/c/payResult",e.CMD_PRE_PAY_RESULT="/c/prePayResult",e.CMD_SHARE_RESULT="/c/shareResult",e.CMD_LIFE_CYCLE_RESULT="/c/lifeCycle",e.CMD_PAUSE_SOUND_RESULT="/c/pauseSound",e.CMD_RESUME_SOUND_RESULT="/c/resumeSound",e.CMD_COP_INFO_RESULT="/c/copInfoResult",e.CMD_MEGADATA_SERVER_RESULT="/c/megadataServer",e.CMD_POST_MEGADATA_RESULT="/c/postMegadataResult",e.CMD_USE_CDKEY_RESULT="/c/useCdkey",e.CMD_OPEN_ADV_RESULT="/c/openAdvResult",e.CMD_OPEN_NATIVE_ADV_RESULT="/c/openNativeAdvResult",e.CMD_CLICK_NATIVE_ADV_RESULT="/c/clickNativeAdvResult",e.CMD_CLICK_ADV_RESULT="/c/clickAdvResult",e.CMD_CLOSE_ADV_RESULT="/c/closeAdvResult",e.CMD_CLOSE_NATIVE_ADV_RESULT="/c/closeNativeAdvResult",e.CMD_USER_LOGIN_RESULT="/c/userLoginResult",e.CMD_USER_IS_LOGIN_RESULT="/c/userIsLoginResult",e.CMD_USER_LOGIN_REPORT_RESULT="/c/userLoginReportResult",e.CMD_LOGIN_OUT_RESULT="/c/loginOutResult",e.CMD_ADV_VALID_COUNT_RESULT="/c/advValidCountResult",e.CMD_SAVE_RANK_DATA_RESULT="/c/saveRankDataResult",e.CMD_GET_RANK_DATA_RESULT="/c/getRankDataResult",e.CMD_RECORDER_GAME_VIDEO_RESULT="/c/recorderGameVideoResult",e.CMD_SHARE_GAME_VIDEO_RESULT="/c/shareGameVideoResult",e.CMD_OPEN_JUMP_RESULT="/c/openJumpResult",e.CMD_JUMP_OTHER_GAME_RESULT="/c/jumpOtherGameResult",e.CMD_JUMP_OTHER_GAME_REWARD_RESULT="/c/jumpOtherGameRewardResult",e.CMD_EXTRA_BONUS_RESULT="/c/extraBonus",e.CMD_OPEN_RECOMMENDATION_RESULT="/c/openRecommendationResult",e.CMD_CLOSE_RECOMMENDATION_RESULT="/c/closeRecommendationResult",e.CMD_SAVE_USER_DATA_RESULT="/c/saveUserDataResult",e.CMD_GET_USER_DATA_RESULT="/c/getUserDataResult",e.CMD_ADD_GAME_TO_MY_FAVORITE_RESULT="/c/addGameToMyFavoriteResult",e.CMD_GET_USER_INFO_MSG_RESULT="/c/getUserInfoMsgResult",e.CMD_OPEN_USERINFO_ACCREDIT_BUTTON_RESULT="/c/openUserInfoAccreditButtonResult",e.CMD_CLOSE_USERINFO_ACCREDIT_BUTTON_RESULT="/c/closeUserInfoAccreditButtonResult",e.CMD_APP_SHARE_RESULT="/c/appShareResult",e.CMD_INSTALL_SHORTCUT_RESULT="/c/installShortcutResult",e.CMD_SET_CLIPBOARD_DATA_RESULT="/c/setClipboardDataResult",e.CMD_GET_CLIPBOARD_DATA_RESULT="/c/getClipboardDataResult",e.CMD_MPSDK_AD_HANDLER_RESULT="/c/mpsdkAdHandlerResult",e.CMD_CREATE_GAME_ICON_RESULT="/c/createGameIconResult",e.CMD_GAME_ICON_HANDLER_RESULT="/c/gameIconHandlerResult",e.CMD_OPEN_CHANNEL_MORE_GAME_BOX_RESULT="/c/openChannelMoreGameBoxResult",e.CMD_OPEN_BLOCK_AD_RESULT="/c/openBlockAdResult",e.CMD_CLOSE_BLOCK_AD_RESULT="/c/closeBlockAdResult",e.CMD_GET_SHORTCUT_STATE_RESULT="/c/getShortcutStateResult",e.CMD_ADD_SUBSCRIBE_RESULT="/c/addSubscribeResult",e.CMD_ADD_COLOR_SIGN_RESULT="/c/addColorSignResult",e.CMD_OPEN_GRID_AD_RESULT="/c/openGridAdResult",e.CMD_CLOSE_GRID_AD_RESULT="/c/closeGridAdResult",e.CMD_JUMP_TO_VIDEO_VIEW_RESULT="/c/jumpToVideoViewResult",e.CMD_FOLLOW_OFFICIAL_ACCOUNT_RESULT="/c/followOfficialAccountResult",e.CMD_GET_FOLLOW_OFFICIAL_ACCOUNT_STATE_RESULT="/c/getFollowOfficialAccountStateResult",e.CMD_CONTENT_SECURITY_CHECK_RESULT="/c/contentSecurityCheckResult",e.CMD_JUMP_LEISURE_SUBJECT_RESULT="/c/jumpLeisureSubjectResult",e.CMD_PHONE_VIBRATE_RESULT="/c/phoneVibrateResult",e.CMD_JUMP_NEW_USER_GUIDE="/c/jumpNewGuide",e.CMD_OPEN_URL_RESULT="/c/openUrlResult",e.CMD_CLEAN_UP_GAME_ARCHIVE="/c/cleanUpGameArchive",e.CMD_SHOW_POINT_DEBUG_INFO="/c/showPointDebugInfo",e.CMD_MOYANG_QQ_NET_EARNED_QUERY="/c/qqNetEarnedQuery",e.CMD_MOYANG_QQ_NET_EARNED_RECHARGE="/c/qqNetEarnedRecharge",e.CMD_MOYANG_QQ_NET_EARNED_CASH="/c/qqNetEarnedCash",e.CMD_MOYANG_QQ_NET_EARNED_QUERY_RESULT="/c/qqNetEarnedQueryResult",e.CMD_MOYANG_QQ_NET_EARNED_RECHARGE_RESULT="/c/qqNetEarnedRechargeResult",e.CMD_MOYANG_QQ_NET_EARNED_CASH_RESULT="/c/qqNetEarnedCashResult",e.CMD_RANKLIST_GET_USER_NUM_RESULT="/c/getUserNumInRankResult",e.CMD_RANKLIST_GET_USER_INFO_BY_ID_RESULT="/c/getUserInfoByIdInRankResult",e.CMD_RANKLIST_GET_USER_INFO_BY_LIST_RESULT="/c/getUserInfoListByRankIdResult",e.CMD_RANKLIST_REPORT_USER_INFO_RESULT="/c/reportUserInfoInRankResult",e.CMD_RANKLIST_MODIFY_SCORE_BY_ARRAY_RESULT="/c/modifyScoreByArrayResult",e.CMD_SDK_ON_COP_CHANGED="/sdk/onCopChanged",e.CMD_SDK_PREPARE_SHOW_VIDEO_ADV="/sdk/prepareShowVideoAdv",e.CMD_SDK_PREPARE_SHOW_INTER_ADV="/sdk/prepareShowInterAdv",e.CMD_SDK_PREPARE_SHOW_BANNER_ADV="/sdk/prepareShowBannerAdv",e.CMD_SDK_PREPARE_SHOW_EMBEDDED_ADV="/sdk/prepareShowEmbeddedAdv",e.CMD_SDK_PREPARE_SHOW_URL_ADV="/sdk/prepareShowUrlAdv",e.CMD_SDK_PREPARE_SHOW_PASTER_ADV="/sdk/prepareShowPasterAdv",e.CMD_SDK_SHOW_VIDEO_ADV="/sdk/showVideoAdv",e.CMD_SDK_SHOW_INTER_ADV="/sdk/showInterAdv",e.CMD_SDK_SHOW_BANNER_ADV="/sdk/showBannerAdv",e.CMD_SDK_SHOW_EMBEDDED_ADV="/sdk/showEmbeddedAdv",e.CMD_SDK_SHOW_URL_ADV="/sdk/showUrlAdv",e.CMD_SDK_SHOW_PASTER_ADV="/sdk/showPasterAdv",e.CMD_SDK_CLOSE_VIDEO_ADV="/sdk/closeVideoAdv",e.CMD_SDK_CLOSE_INTER_ADV="/sdk/closeInterAdv",e.CMD_SDK_CLOSE_BANNER_ADV="/sdk/closeBannerAdv",e.CMD_SDK_CLOSE_EMBEDDED_ADV="/sdk/closeEmbeddedAdv",e.CMD_SDK_CLOSE_URL_ADV="/sdk/closeUrlAdv",e.CMD_SDK_CLOSE_Paster_ADV="/sdk/closePasterAdv",e.CMD_SDK_CLOSE_NATIVE_ADV="/sdk/closeNativeAdv",e.CMD_SDK_CLICK_NATIVE_ADV="/sdk/clickNativeAdv",e.CMD_SDK_GET_STORAGE="/sdk/getStorge",e.CMD_SDK_SET_STORAGE="/sdk/setStorge",e.CMD_SDK_GET_CLIPBOARD_DATA="/sdk/getClipboardData",e.CMD_SDK_SET_CLIPBOARD_DATA="/sdk/setClipboardData",e.CMD_SDK_IS_SUPPORT_CLIPBOARD="/sdk/isSupportClipboard",e.CMD_SDK_COLLECTION_MODULE_CHECKER_CONFIG="/sdk/collectionModuleCheckerConfig",e.CMD_SDK_COLLECTION_MODULE_CHECKER_MORE_GAME_AB_TEST_CONFIG="/sdk/collectionModuleCheckerMoreGameAbTestConfig",e.CMD_SDK_TOUCH_SCREEN_END="/sdk/touchScreenEnd",e.CMD_SDK_ON_GAME_START="/sdk/onGameStart",e.CMD_SDK_ON_GAME_PAUSE="/sdk/onGamePause",e.CMD_SDK_ON_GAME_RESUME="/sdk/onGameResume",e.CMD_SDK_ON_SHARE_SHOW="/sdk/onShareShow",e.CMD_SDK_ON_SAHRE_APP_MESSAGE="/sdk/onShareAppMessage",e.CMD_SDK_ON_REPORT_ULSDK_EVENT="/sdk/ulsdkMegadataUpload",e.CMD_SDK_OPEN_SHARE_DURING_ADV="/sdk/openShareDuringAdv",e.CMD_SDK_CHANNEL_MEGADATA_POST="/sdk/channelMegadataPost",e.CMD_SDK_SET_UP_WEBVIEW_JAVASCRIPT_BRIDGE="/sdk/setUpWebViewJavascriptBridge",e.CMD_SDK_EXPRESS_NATIVE_ADV_STATUS_CHANGE="/sdk/expressNativeAdvStatusChange",e.CMD_MOYANG_QQ_REWARD_VIDEO_PLAY="/sdk/moyangQQRewardVideoPlay",e.CMD_MOYANG_QQ_REWARD_VIDEO_CLOSE="/sdk/moyangQQRewardVideoClose",e.CMD_FACEBOOK_INIT_COMPLETE="/sdk/facebookInitComplete",e.CMD_SDK_INIT_USER_LOGIN="/sdk/initUserLogin",e.CMD_SDK_QM_LOGIN_REPORT="/qmsdk/loginReport",e.CMD_SDK_QM_REPORT_EVENT="/qmsdk/reportEvent",e.CMD_SDK_QM_REPORT_GOLD="/qmsdk/reportGold",e.CMD_SDK_QM_SET_ACCOUNT_INFO="/qmsdk/setAccountInfo",e.CMD_SDK_QM_GET_OPEN_LEVEL="/qmsdk/getOpenLevel",e.CMD_SDK_QM_GET_RECOMMEND_INFO="/qmsdk/getRecommendInfo",e.CMD_SDK_QM_GET_SUGGEST_LIST="/qmsdk/getSuggestList",e.CMD_SDK_QM_GET_EXCITATION_LIST="/qmsdk/getExcitationList",e.CMD_SDK_QM_MPSDK_AD_CLICK="/qmsdk/mpsdkAdClick",e.CMD_SDK_QM_MPSDK_CLICK_SYNC="/qmsdk/mpsdkClickSync",e.CMD_SDK_QM_GET_USER_DATA_VERSION="/qmsdk/getUserDataVersion",e.CMD_SDK_QM_IS_STRONG_FISSION="/qmsdk/isStrongFission",e.CMD_SDK_QM_REPORT_VIDEO_TIME_EVENT="/qmsdk/reportVideoTimeEvent",e.CMD_SDK_OPPOQG_MARK_MANUAL_CLOSE_BANNER_COUNT="/sdk/oppoqg/markManualCloseBannerCount",e.CMD_SDK_OPPOQG_GET_MANUAL_CLOSE_BANNER_COUNT="/sdk/oppoqg/getManualCloseBannerCount",e.CMD_SDK_OPPOQG_HAS_BANNER_SHOWING="/sdk/oppoqg/hasBannerShowing",e.PRIORITY_DISABLE=-2,e.PRIORITY_NONE=-1,e.CONSOLE_OUTPUT_LEVEL_WARN=1,e.CONSOLE_OUTPUT_LEVEL_ERROR=1,e.CONSOLE_OUTPUT_LEVEL_LOG=2,e.CONSOLE_OUTPUT_LEVEL_INNER_DEBUG=3,e.B_INNER_DEBUG=!1,e.COP_RETRY_TIME_SEC=30,e.STATIS_TYPE_BASE_INFO="1",e.STATIS_TYPE_PAY_INFO="2",e.STATIS_TYPE_ADV_INFO="3",e.STATIS_TYPE_COP_REQUEST="4",e.STATIS_TYPE_USER_EVENT="5",e.STATIS_TYPE_ONLINE_TIME="6",e.STATIS_TYPE_POINT_EVENT="7",e.STATIS_TYPE_COIN_CHANGE_EVENT="5",e.STATIS_TYPE_COMMON_EVENT="7",e.STATIS_TYPE_LEVEL_START_EVENT="8",e.STATIS_TYPE_LEVEL_COMPLETE_EVENT="9",e.STATIS_TYPE_ITEM_BUY="10",e.STATIS_TYPE_BUY_ACTION="11",e.STATIS_TYPE_VIDEO_POINT_EVENT="12",e.DEFAULT_REFERANCE_BANNER_HEIGHT=200,e.STATIS_USER_EVENT_GAME_LEVEL_START="gameLevelStart",e.STATIS_USER_EVENT_GAME_LEVEL_COMPLETE="gameLevelComplete",e.STATIS_USER_EVENT_GAME_COIN_ADD="gameCoinAdd",e.STATIS_USER_EVENT_GAME_COIN_LOST="gameCoinLost",e.STATIS_USER_EVENT_BUY_ACTION="buyAction",e.STATIS_USER_EVENT_ITEM_BUY="itemBuy",e.STATIS_USER_EVENT_COMMON_EVENT="commonEvent",e.STATIS_USER_EVENT_COMMON_EVENT_MULTI_FIELD="commonEventMultiField",e.STATIS_USER_EVENT_POINT_EVENT="pointEvent",e.STATIS_USER_ACTION_EVENT_LEVEL_START="levelStart",e.STATIS_USER_ACTION_EVENT_LEVEL_COMPLETE="levelComplete",e.STATIS_USER_ACTION_EVENT_COIN_CHANGE="coinChange",e.STATIS_USER_ACTION_EVENT_ITEM_BUY="itemBuy",e.STATIS_USER_ACTION_EVENT_BUY_ACTION="buyAction",e.STATIS_USER_ACTION_EVENT_COMMON_EVENT="commonEvent",e.STATIS_USER_ACTION_EVENT_VIDEO_POINT_EVENT="videoPointEvent",e.STATIS_UPLOAD_SPAN=60,e.STATIS_UPLOAD_SINGLE_REQUEST_MAX_COUNT=100,e.ADV_FAIL_TIP_NOAD="\u6682\u65f6\u65e0\u6cd5\u64ad\u653e\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",e.ADV_FAIL_TIP_BUSY="\u5e7f\u544a\u51c6\u5907\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",e.ENGLISH_ADV_FAIL_TIP_NOAD="Ad display failed, please retry later.",e.ENGLISH_ADV_FAIL_TIP_BUSY="Ad in preparation, please retry later.",e.ADV_ERR_CODE_CONSECUTIVE_FAIL=-100,e.ADV_ERR_CODE_CDING=-101,e.ADV_ERR_CODE_NATIVE_ID_ERROR=-102,e.ADV_ERR_CODE_NATIVE_DATA_ERROR=-102,e.ADV_ERR_CODE_CAN_NOT_PLAY=-103,e.ADV_ERR_CODE_NOT_INITED=-104,e.ADV_ERR_CODE_UNKNOWN=-105,e.ADV_ERR_CODE_SHARE_NO_CALLBACK=-106,e.ADV_ERR_CODE_SHARE_FAIL=-107,e.ADV_ERR_CODE_ADOBJ_NULL=-108,e.ADV_ERR_CODE_ADV_TYPE_CD=-109,e.ADV_ERR_CODE_ADV_TYPE_DAILY_LIMIT=-110,e}();o.default=n,cc._RF.pop()},{}],ULCopManager:[function(e,t,o){"use strict";cc._RF.push(t,"52c69olappPbZdqbWwL/OU5","ULCopManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ULConfig"),r=e("../utils/ULTools"),a=e("./ULSdkManager"),i=e("../utils/ULTimer"),s=e("../ULConsts"),l=e("../events/ULEventDispatcher"),c=e("../modulechecker/MCConsts"),u=e("./ULStorageManager"),d=function(){function e(){this.localCop={},this.serverCop={},this.cop={},this.simulateCityId="",this.simulateTemplateId=""}return e.prototype.init=function(){this.loadRecord();var e=n.default.getConfig();this.localCop=e.t_sdk_cop_default_cop,this.localCop=r.default.jsonValToStr(this.localCop),ULSDK.console.log("ULCopManager-init-localCop:"+JSON.stringify(this.localCop)),this.processCop(),this.requestServerCop(!1),l.default.getInstance().addListener(s.default.CMD_SDK_COLLECTION_MODULE_CHECKER_CONFIG,10,this.onCmdSdkCollectionModuleCheckerConfig.bind(this))},e.prototype.loadRecord=function(){var e,t=u.default.getInstance().getStorage(this._getRecordKey())||"{}";try{e=JSON.parse(t)}catch(t){e={}}this.setSimulateCityId(e.simulateCityId||""),this.setSimulateTemplateId(e.simulateTemplateId||"")},e.prototype.saveRecord=function(){var e={simulateCityId:this.simulateCityId||"",simulateTemplateId:this.simulateTemplateId||""},t=JSON.stringify(e);u.default.getInstance().setStorage(this._getRecordKey(),t)},e.prototype._getRecordKey=function(){var e=n.default.getConfig();return r.default.format("ULCopManager_record_%d",e.s_sdk_megadata_game_id)},e.prototype.requestServerCop=function(e){var t=this,o=n.default.getConfig();if(o.s_sdk_cop_game_id&&"0"!=o.s_sdk_cop_game_id){e||a.default.getInstance().channelInfo.addPreparationFlag("cop");var l=o.s_sdk_cop_addr,c=o.s_sdk_cop_game_id,u=o.s_sdk_cop_channel_id,d=o.s_sdk_cop_version,p=o.i_net_timeout,h=r.default.format("%s?gameid=%d&qudao=%d&version=%d",l,c,u,d);(this.simulateCityId||this.simulateTemplateId)&&(ULSDK.console.warn("\u4f7f\u7528debug\u6a21\u5f0fcop\u5730\u5740"),h=h.replace("getdata/","getdatadebug"),this.simulateCityId&&(h+="&carrierid=0&zoneid="+this.simulateCityId),this.simulateTemplateId&&(h+="&templateId="+this.simulateTemplateId)),ULSDK.console.log("ULCopManager.requestServerCop:",h),r.default.httpGet({url:h,timeoutMillisecond:p,success:function(o){var n=null;try{n=JSON.parse(o),a.default.getInstance().statisManager.reportCopSuccess(o)}catch(e){ULSDK.console.error(e),a.default.getInstance().statisManager.reportCopFail(e.message)}ULSDK.console.log("copJsonData",n),t.serverCop=n||{},t.processCop(),t.triggerCopInfoResult(),e||a.default.getInstance().channelInfo.removePreparationFlag("cop")},fail:function(o){ULSDK.console.warn("ULCopManager.requestServerCop http fail!",o),e||a.default.getInstance().channelInfo.removePreparationFlag("cop"),a.default.getInstance().statisManager.reportCopFail("timeout"),i.default.callLater(s.default.COP_RETRY_TIME_SEC,function(){ULSDK.console.log(r.default.format("ULCopManager.requestServerCop \u5931\u8d25\u540e\uff0c\u7b49\u5f85%d\u79d2\u91cd\u65b0\u8bf7\u6c42cop",s.default.COP_RETRY_TIME_SEC)),t.requestServerCop(!0)})}})}else ULSDK.console.log("\u7981\u7528cop")},e.prototype.processCop=function(){var e={};r.default.forEachMap(this.localCop,function(t,o){e[t]=o}),r.default.forEachMap(this.serverCop,function(t,o){if("i_"!=t.substr(0,2)||isNaN(parseFloat(o))||(o=parseFloat(o)),"t_"==t.substr(0,2))try{o=JSON.parse(o)}catch(e){ULSDK.console.log("processCop error --key:",t," val:",o),o=""}e[t]=o}),ULSDK.console.log("processCop.copresult cop:",e),this.cop=e;var t=n.default.getConfig(),o=r.default.clone(this.cop);o.cop_game_id=t.s_sdk_cop_game_id||"unknown",o.cop_channel_id=t.s_sdk_cop_channel_id||"unknown",o.cop_version=t.s_sdk_cop_version||"unknown",a.default.getInstance().channelInfo.copInfo=JSON.stringify(o),n.default.updateValueByCop(this.cop),l.default.getInstance().dispatch(s.default.CMD_SDK_ON_COP_CHANGED,{})},e.prototype.get=function(e,t){var o=this.cop[e];return null==o&&(o=t),o},e.prototype.getNumberValue=function(e,t){var o=this.get(e,t),n=parseFloat(o);return isNaN(n)?0:n},e.prototype.getNumberValueInRange=function(e,t,o,n){var a=this.getNumberValue(e,t);return a=r.default.clampf(a,o,n)},e.prototype.getBooleanValue=function(e,t){return 1==this.get(e,t)},e.prototype.setSimulateCityId=function(e){if(this.simulateCityId=e,this.saveRecord(),""!=e){var t=r.default.format("\u5df2\u5f00\u542fCOP\u8c03\u8bd5\u6a21\u5f0f\uff0c\u6a21\u62df\u57ce\u5e02\uff1a%s_%s",e,n.default.getConfig().t_sdk_cop_simulate_city_data[e]);a.default.getInstance().moduleCheckerManager.addDebugInfo("cop",t)}else a.default.getInstance().moduleCheckerManager.removeDebugInfo("cop")},e.prototype.setSimulateTemplateId=function(e){if(this.simulateTemplateId=e,this.saveRecord(),""!=e){var t=r.default.format("\u5df2\u5f00\u542fCOP\u8c03\u8bd5\u6a21\u5f0f\uff0c\u6a21\u677fid\uff1a%s",e);a.default.getInstance().moduleCheckerManager.addDebugInfo("cop_templateId",t)}else a.default.getInstance().moduleCheckerManager.removeDebugInfo("cop_templateId")},e.prototype.triggerCopInfoResult=function(){var e=s.default.DEFAULT_REFERANCE_BANNER_HEIGHT,t=n.default.getConfig();null!=t.i_sdk_adv_reference_banner_height&&(e=t.i_sdk_adv_reference_banner_height),a.default.getInstance().response(s.default.CMD_COP_INFO_RESULT,{copInfo:a.default.getInstance().channelInfo.copInfo,referenceBannerHeight:e})},e.prototype.onCmdSdkCollectionModuleCheckerConfig=function(e){var t=this,o=e.getReturnValue()||[],i=r.default.clone(c.default.COP_CITY_ID_2_NAME),s=n.default.getConfig();s.t_sdk_cop_simulate_city_data&&(ULSDK.console.log("t_sdk_cop_simulate_city_data",s.t_sdk_cop_simulate_city_data),r.default.forEachMap(s.t_sdk_cop_simulate_city_data,function(e,t){i[e]=t})),ULSDK.console.log("cityId_2_name",i),o.push({type:"newLine"}),o.push({type:"label",text:"Cop\u6a21\u5757\u4fe1\u606f:"}),o.push({type:"newLine"}),o.push({type:"label",text:"cop\u8c03\u8bd5\u6a21\u5f0f \u6a21\u677fid\uff1a"}),o.push({type:"label",text:this.simulateTemplateId?r.default.format("%s(\u5df2\u5f00\u542f) ",this.simulateTemplateId):"\u5df2\u5173\u95ed ",name:"labelCopTemplate"}),o.push({type:"inputBox",name:"inputCopTemplate"}),o.push({type:"button",text:"\u5207\u6362\u5f00\u5173",onClick:function(){var e="";if(t.simulateTemplateId)e="";else if(!(e=a.default.getInstance().moduleCheckerManager.getItemText("inputCopTemplate")))return void a.default.getInstance().moduleCheckerManager.showMsgTip("\u8bf7\u5148\u8bbe\u7f6e \u6a21\u677fid");t.setSimulateTemplateId(e),a.default.getInstance().moduleCheckerManager.setItemText("labelCopTemplate",e?r.default.format("%s(\u5df2\u5f00\u542f) ",e):"\u5df2\u5173\u95ed "),a.default.getInstance().moduleCheckerManager.showMsgTip("\u5df2\u5f00\u542fcop\u8c03\u8bd5\u6a21\u5f0f\uff0c\u7b56\u7565\u5c06\u5728\u4e0b\u6b21\u542f\u52a8\u6e38\u620f\u65f6\u751f\u6548")}}),o.push({type:"newLine"}),o.push({type:"label",text:"cop\u8c03\u8bd5\u6a21\u5f0f \u57ce\u5e02id\uff1a"}),o.push({type:"label",text:r.default.format("%s_%s",this.simulateCityId,i[this.simulateCityId]),name:"labelCopCity"}),o.push({type:"button",text:"\u9009\u62e9\u57ce\u5e02..",onClick:function(){for(var e=Object.keys(i),o=[],n=0;n<e.length;n++){var s=e[n],l=parseInt(s);isNaN(l)||o.push(l)}o.sort(function(e,t){return e-t}),o.unshift("");var c=[];for(n=0;n<Math.min(15,o.length);n++){var u=o[n];c.push({text:r.default.format("%s_%s",u,i[u]),value:u})}c.push({text:"\u52a0\u8f7d\u5176\u4ed6\u57ce\u5e02...",value:"more"});var d=[];for(n=0;n<o.length;n++){u=o[n];d.push({text:r.default.format("%s_%s",u,i[u]),value:u})}var p=function(e){"more"!=e?(a.default.getInstance().moduleCheckerManager.setItemText("labelCopCity",r.default.format("%s_%s",e,i[e])),t.setSimulateCityId(e),""!=e?a.default.getInstance().moduleCheckerManager.showMsgTip("\u5df2\u5f00\u542fcop\u8c03\u8bd5\u6a21\u5f0f\uff0c\u7b56\u7565\u5c06\u5728\u4e0b\u6b21\u542f\u52a8\u6e38\u620f\u65f6\u751f\u6548"):a.default.getInstance().moduleCheckerManager.showMsgTip("cop\u8c03\u8bd5\u6a21\u5f0f\u5df2\u5173\u95ed")):a.default.getInstance().moduleCheckerManager.showPickerDialog("\u9009\u62e9\u9700\u8981\u6a21\u62df\u7684\u57ce\u5e02\uff1a",d,p)};a.default.getInstance().moduleCheckerManager.showPickerDialog("\u9009\u62e9\u9700\u8981\u6a21\u62df\u7684\u57ce\u5e02\uff1a",c,p)}}),o.push({type:"button",text:"\u91cd\u65b0\u8bf7\u6c42cop",onClick:function(){a.default.getInstance().moduleCheckerManager.alertPrompt("\u6e29\u99a8\u63d0\u793a","\u91cd\u65b0\u8bf7\u6c42cop\u4e0d\u80fd\u4fdd\u8bc1\u6240\u6709\u529f\u80fd\u751f\u6548\uff0c\u4ec5\u4f9b\u67e5\u770bcop\u4f7f\u7528\u3002\u5207\u6362cop\u57ce\u5e02\u6a21\u62df\u540e\uff0c\u8bf7\u91cd\u65b0\u542f\u52a8\u6e38\u620f\u6d4b\u8bd5\u529f\u80fd","\u77e5\u9053\u4e86",function(){a.default.getInstance().moduleCheckerManager.showMsgTip("\u5df2\u91cd\u65b0\u8bf7\u6c42cop\uff0c\u4e0d\u80fd\u4fdd\u8bc1\u6240\u6709\u529f\u80fd\u751f\u6548"),t.requestServerCop(!1)})}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u67e5\u770bcop\uff1a"}),o.push({type:"button",text:"\u9ed8\u8ba4cop",onClick:function(){var e=t.localCop,o=Object.keys(e);o.sort();for(var n="\u9ed8\u8ba4cop\uff1a\n",i=0;i<o.length;i++){var s=o[i],l=e[s];n+=r.default.format("[%s] = [%s]\n",s,l)}a.default.getInstance().moduleCheckerManager.setItemText("labelCop",n)}}),o.push({type:"button",text:"\u8fdc\u7a0bcop",onClick:function(){var e=t.serverCop,o=Object.keys(e);o.sort();for(var n="\u8fdc\u7a0bcop\uff1a\n",i=0;i<o.length;i++){var s=o[i],l=e[s];n+=r.default.format("[%s] = [%s]\n",s,l)}a.default.getInstance().moduleCheckerManager.setItemText("labelCop",n)}}),o.push({type:"button",text:"\u751f\u6548cop",onClick:function(){var e=t.cop,o=Object.keys(e);o.sort();for(var n="\u751f\u6548cop\uff1a\n",i=0;i<o.length;i++){var s=o[i],l=e[s];n+=r.default.format("[%s] = [%s]\n",s,l)}a.default.getInstance().moduleCheckerManager.setItemText("labelCop",n)}}),o.push({type:"newLine"}),o.push({type:"labelArea",text:"<<\u8fd9\u91cc\u663e\u793acop\u4fe1\u606f>>",name:"labelCop"}),o.push({type:"newLine"}),e.setReturnValue(o,!0)},e}();o.default=d,cc._RF.pop()},{"../ULConsts":"ULConsts","../events/ULEventDispatcher":"ULEventDispatcher","../modulechecker/MCConsts":"MCConsts","../utils/ULTimer":"ULTimer","../utils/ULTools":"ULTools","./ULConfig":"ULConfig","./ULSdkManager":"ULSdkManager","./ULStorageManager":"ULStorageManager"}],ULEventDispatcher:[function(e,t,o){"use strict";cc._RF.push(t,"81922T0ZmJM+ZaEBsDeOiCq","ULEventDispatcher"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ULEventListener"),r=e("./ULEvent"),a=e("../ULConsts"),i=function(){function e(){this.allListeners={}}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.addListener=function(e,t,o){return this._addListener(e,t,o,!1)},e.prototype.once=function(e,t,o){return this._addListener(e,t,o,!0)},e.prototype._addListener=function(e,t,o,r){if(!(t<a.default.PRIORITY_NONE)){var i=this.allListeners[e];i||(i=[],this.allListeners[e]=i);for(var s=-1,l=0;l<i.length;l++){var c=i[l];if(c.callback==o)return ULSDK.console.warn("ULEventDispatcher._addListener callback already exists:",e),!1;-1==s&&c.priority<t&&(s=l)}var u=new n.default(e,t,o,r);return-1!=s?i.splice(s,0,u):i.push(u),!0}this.removeListenerByCallback(e,o)},e.prototype.removeListenerByCallback=function(e,t){var o=this.allListeners[e];if(o)for(var n=o.length-1;n>=0;n--){o[n].callback==t&&o.splice(n,1)}},e.prototype.removeListenersByType=function(e){delete this.allListeners[e]},e.prototype.dispatch=function(e,t){var o=null;return o=e instanceof r.default?e:new r.default(e,t),a.default.B_INNER_DEBUG&&ULSDK.console.log("ULEventDispatcher.dispatch",o.type,o.data),this._inner_dispatch(o).bCalled},e.prototype.dispatchWithReturn=function(e,t){var o=null;return o=e instanceof r.default?e:new r.default(e,t),a.default.B_INNER_DEBUG&&ULSDK.console.log("ULEventDispatcher.dispatchWithReturn",o.type,o.data),this._inner_dispatch(o).returnValue},e.prototype._inner_dispatch=function(e){var t=!1,o=this.allListeners[e.type];if(!o)return a.default.B_INNER_DEBUG&&ULSDK.console.log("  listeners not found"),{bCalled:!1,returnValue:null};for(var n=0;n<o.length;n++){if(!(r=o[n]).isNeedRemove()&&(r.isDispatchOnce()&&r.markNeedRemove(),r.triggerCallback(e)&&(t=!0),e.isPropagationStoped()))break}for(n=o.length-1;n>=0;n--){var r;(r=o[n]).isNeedRemove()&&o.splice(n,1)}return{bCalled:t,returnValue:e.getReturnValue()}},e._instance=null,e}();o.default=i,cc._RF.pop()},{"../ULConsts":"ULConsts","./ULEvent":"ULEvent","./ULEventListener":"ULEventListener"}],ULEventListener:[function(e,t,o){"use strict";cc._RF.push(t,"af679jhrxVLrbbRFDhurL4/","ULEventListener"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e,t,o,n){this.type=e,this.priority=t,this.callback=o,this.bDispatchOnce=n,this.bNeedRemove=!1}return e.prototype.isDispatchOnce=function(){return!!this.bDispatchOnce},e.prototype.isNeedRemove=function(){return!!this.bNeedRemove},e.prototype.markNeedRemove=function(){this.bNeedRemove=!0},e.prototype.triggerCallback=function(e){if(this.callback instanceof Function){try{this.callback(e)}catch(e){return ULSDK.console.error("ULEventListener.triggerCallback has exception!",e),!1}return!0}return!1},e}();o.default=n,cc._RF.pop()},{}],ULEvent:[function(e,t,o){"use strict";cc._RF.push(t,"8d149haKgRN2r6a3tFiRLYK","ULEvent"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e,t){this.bPropagationStoped=!1,this.type=e,this.data=t,this.bPropagationStoped=!1,this.returnValue=null}return e.prototype.stopImmediatePropagation=function(){this.bPropagationStoped=!0},e.prototype.setReturnValue=function(e,t){null!=e&&(this.returnValue=e,t||this.stopImmediatePropagation())},e.prototype.getReturnValue=function(){return this.returnValue},e.prototype.isPropagationStoped=function(){return!!this.bPropagationStoped},e}();o.default=n,cc._RF.pop()},{}],ULInterView:[function(e,t,o){"use strict";cc._RF.push(t,"03ff06rc75B/5df05n+YX7C","ULInterView");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("./ULAdViewBase"),a=window.cc,i=window.Laya,s=function(e){function t(){var t=e.call(this)||this;return t.name="ULInterView",t.interView=null,a?(ULSDK.console.log("ULInterView.constructor"),t.engine=t.ENGINE_COCOS):i&&(ULSDK.console.log("ULInterView.constructor"),t.engine=t.ENGINE_LAYA),t}return n(t,e),t.prototype.createView=function(e,t){e&&t&&(a?(ULSDK.console.log("ULInterView.createView.createViewByCocos"),this.createViewByCocos(e,t)):i&&(ULSDK.console.log("ULInterView.createView.createViewByLaya"),this.createViewByLaya(e,t)))},t.prototype.createViewByLaya=function(e,t){var o=this,n=this.getRootNode();if(n){ULSDK.console.log("ULInterView.createViewByLaya style:",e);var r=i.stage.width,a=i.stage.height;this.interView=n.addChild(new Laya.Sprite),this.interView.size(e.width,e.height),this.interView.pos(e.left,-e.top),this.interView.graphics.drawRect(0,0,r,a,"#00000080");var s=this.interView.addChild(new Laya.Image);s.size(e.width,e.height),s.anchorX=.5,s.anchorY=.5;var l=s.addChild(new Laya.Label);l.fontSize=25,l.align="center",l.text="X \u5173\u95ed",l.color="#ffffff",l.pos(s.width/2-l.width/2,s.height/2-l.height/2),this.registerLayaTouchHander(s,function(e){("began"==e.name?s.scale(1.1,1.1):"moved"==e.name||s.scale(1,1),"click"==e.name)&&(t instanceof Function&&t()||o.interView.destroy())})}else ULSDK.console.warn(this.name+"createViewByLaya nodeRoot not found!")},t.prototype.createViewByCocos=function(e,t){var o=this,n=this.getNodeCanvas();if(n){this.interView&&this.interView.destroy(),this.interView=new a.Node,this.interView.parent=n,this.interView.zIndex=a.macro.MAX_ZINDEX-1;var r=new a.Node;r.parent=this.interView,ULSDK.console.log("interView.style:",e),r.x=e.left,r.y=e.top,this.interView.setContentSize(e.width,e.height),r.setContentSize(this.interView.getContentSize());var i=new a.Node;i.parent=r,i.setContentSize(r.getContentSize());var s=new a.Node;s.parent=r,s.y=0,s.x=0,s.color=a.color(255,255,255,255),s.addComponent(a.Label).string="X \u5173\u95ed",s.getComponent(a.Label).overflow=a.Label.Overflow.SHRINK,s.getComponent(a.Label).verticalAlign=a.Label.VerticalAlign.CENTER,s.getComponent(a.Label).horizontalAlign=a.Label.HorizontalAlign.CENTER,s.getComponent(a.Label).fontSize=25,s.width=r.width,s.height=r.height,this.registerCocosTouchHandler(r,function(e){("began"==e.name?r.scale=1.1:"moved"==e.name||(r.scale=1),o.isTouchEventClick(e))&&(t instanceof Function&&t()||o.interView.destroy())})}else ULSDK.console.warn(this.name+".createView nodeCanvas not found!")},t.prototype.onAdvShow=function(){ULSDK.console.log(this.name+".show")},t.prototype.onAdvClose=function(){ULSDK.console.log(this.name+".hide"),this.interView&&this.interView.destroy()},t.prototype.onAdvDestroy=function(){ULSDK.console.log(this.name+".destroy"),this.interView&&this.interView.destroy()},t.prototype.onAdvClicked=function(){ULSDK.console.log(this.name+".click")},t}(r.default);o.default=s,cc._RF.pop()},{"./ULAdViewBase":"ULAdViewBase"}],ULMd5:[function(e,t,o){"use strict";function n(e,t){return e<<t|e>>>32-t}function r(e,t){var o,n,r,a,i;return r=2147483648&e,a=2147483648&t,i=(1073741823&e)+(1073741823&t),(o=1073741824&e)&(n=1073741824&t)?2147483648^i^r^a:o|n?1073741824&i?3221225472^i^r^a:1073741824^i^r^a:i^r^a}function a(e,t,o){return e&t|~e&o}function i(e,t,o){return e&o|t&~o}function s(e,t,o){return e^t^o}function l(e,t,o){return t^(e|~o)}function c(e,t,o,i,s,l,c){return r(n(e=r(e,r(r(a(t,o,i),s),c)),l),t)}function u(e,t,o,a,s,l,c){return r(n(e=r(e,r(r(i(t,o,a),s),c)),l),t)}function d(e,t,o,a,i,l,c){return r(n(e=r(e,r(r(s(t,o,a),i),c)),l),t)}function p(e,t,o,a,i,s,c){return r(n(e=r(e,r(r(l(t,o,a),i),c)),s),t)}function h(e){for(var t,o=e.length,n=o+8,r=16*((n-n%64)/64+1),a=Array(r-1),i=0,s=0;s<o;)i=s%4*8,a[t=(s-s%4)/4]=a[t]|e.charCodeAt(s)<<i,s++;return i=s%4*8,a[t=(s-s%4)/4]=a[t]|128<<i,a[r-2]=o<<3,a[r-1]=o>>>29,a}function f(e){var t,o="",n="";for(t=0;t<=3;t++)o+=(n="0"+(e>>>8*t&255).toString(16)).substr(n.length-2,2);return o}function g(e){e=e.replace(/\x0d\x0a/g,"\n");for(var t="",o=0;o<e.length;o++){var n=e.charCodeAt(o);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}cc._RF.push(t,"d3dd5QoRtdCGatwJKkUG4Ax","ULMd5"),Object.defineProperty(o,"__esModule",{value:!0}),o.rotateLeft=n,o.addUnsigned=r,o.F=a,o.G=i,o.H=s,o.I=l,o.FF=c,o.GG=u,o.HH=d,o.II=p,o.convertToWordArray=h,o.wordToHex=f,o.uTF8Encode=g,o.md5Sign=function(e){var t,o,n,a,i,s,l,m,_,v=Array();for(e=g(e),v=h(e),s=1732584193,l=4023233417,m=2562383102,_=271733878,t=0;t<v.length;t+=16)o=s,n=l,a=m,i=_,s=c(s,l,m,_,v[t+0],7,3614090360),_=c(_,s,l,m,v[t+1],12,3905402710),m=c(m,_,s,l,v[t+2],17,606105819),l=c(l,m,_,s,v[t+3],22,3250441966),s=c(s,l,m,_,v[t+4],7,4118548399),_=c(_,s,l,m,v[t+5],12,1200080426),m=c(m,_,s,l,v[t+6],17,2821735955),l=c(l,m,_,s,v[t+7],22,4249261313),s=c(s,l,m,_,v[t+8],7,1770035416),_=c(_,s,l,m,v[t+9],12,2336552879),m=c(m,_,s,l,v[t+10],17,4294925233),l=c(l,m,_,s,v[t+11],22,2304563134),s=c(s,l,m,_,v[t+12],7,1804603682),_=c(_,s,l,m,v[t+13],12,4254626195),m=c(m,_,s,l,v[t+14],17,2792965006),l=c(l,m,_,s,v[t+15],22,1236535329),s=u(s,l,m,_,v[t+1],5,4129170786),_=u(_,s,l,m,v[t+6],9,3225465664),m=u(m,_,s,l,v[t+11],14,643717713),l=u(l,m,_,s,v[t+0],20,3921069994),s=u(s,l,m,_,v[t+5],5,3593408605),_=u(_,s,l,m,v[t+10],9,38016083),m=u(m,_,s,l,v[t+15],14,3634488961),l=u(l,m,_,s,v[t+4],20,3889429448),s=u(s,l,m,_,v[t+9],5,568446438),_=u(_,s,l,m,v[t+14],9,3275163606),m=u(m,_,s,l,v[t+3],14,4107603335),l=u(l,m,_,s,v[t+8],20,1163531501),s=u(s,l,m,_,v[t+13],5,2850285829),_=u(_,s,l,m,v[t+2],9,4243563512),m=u(m,_,s,l,v[t+7],14,1735328473),l=u(l,m,_,s,v[t+12],20,2368359562),s=d(s,l,m,_,v[t+5],4,4294588738),_=d(_,s,l,m,v[t+8],11,2272392833),m=d(m,_,s,l,v[t+11],16,1839030562),l=d(l,m,_,s,v[t+14],23,4259657740),s=d(s,l,m,_,v[t+1],4,2763975236),_=d(_,s,l,m,v[t+4],11,1272893353),m=d(m,_,s,l,v[t+7],16,4139469664),l=d(l,m,_,s,v[t+10],23,3200236656),s=d(s,l,m,_,v[t+13],4,681279174),_=d(_,s,l,m,v[t+0],11,3936430074),m=d(m,_,s,l,v[t+3],16,3572445317),l=d(l,m,_,s,v[t+6],23,76029189),s=d(s,l,m,_,v[t+9],4,3654602809),_=d(_,s,l,m,v[t+12],11,3873151461),m=d(m,_,s,l,v[t+15],16,530742520),l=d(l,m,_,s,v[t+2],23,3299628645),s=p(s,l,m,_,v[t+0],6,4096336452),_=p(_,s,l,m,v[t+7],10,1126891415),m=p(m,_,s,l,v[t+14],15,2878612391),l=p(l,m,_,s,v[t+5],21,4237533241),s=p(s,l,m,_,v[t+12],6,1700485571),_=p(_,s,l,m,v[t+3],10,2399980690),m=p(m,_,s,l,v[t+10],15,4293915773),l=p(l,m,_,s,v[t+1],21,2240044497),s=p(s,l,m,_,v[t+8],6,1873313359),_=p(_,s,l,m,v[t+15],10,4264355552),m=p(m,_,s,l,v[t+6],15,2734768916),l=p(l,m,_,s,v[t+13],21,1309151649),s=p(s,l,m,_,v[t+4],6,4149444226),_=p(_,s,l,m,v[t+11],10,3174756917),m=p(m,_,s,l,v[t+2],15,718787259),l=p(l,m,_,s,v[t+9],21,3951481745),s=r(s,o),l=r(l,n),m=r(m,a),_=r(_,i);return(f(s)+f(l)+f(m)+f(_)).toLowerCase()},cc._RF.pop()},{}],ULModuleBase:[function(e,t,o){"use strict";cc._RF.push(t,"548f5tw4o9ODpgNIP90iogU","ULModuleBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../events/ULEventDispatcher"),r=e("../ULConsts"),a=function(){function e(){}return e.prototype.init=function(){n.default.getInstance().addListener(r.default.CMD_SDK_COLLECTION_MODULE_CHECKER_CONFIG,this.getCollectionModuleCheckerPriority(),this.onCmdSdkCollectionModuleCheckerConfig.bind(this))},e.prototype.loadSubModules=function(){return[]},e.prototype.loadModuleCheckerConfig=function(){return[]},e.prototype.onCmdSdkCollectionModuleCheckerConfig=function(e){for(var t=e.getReturnValue()||[],o=this.loadModuleCheckerConfig(),n=0;n<o.length;n++){var r=o[n];t.push(r)}e.setReturnValue(t,!0)},e.prototype.getCollectionModuleCheckerPriority=function(){return r.default.PRIORITY_NONE},e}();o.default=a,cc._RF.pop()},{"../ULConsts":"ULConsts","../events/ULEventDispatcher":"ULEventDispatcher"}],ULModuleCdk:[function(e,t,o){"use strict";cc._RF.push(t,"34c10us8y5LOqe3p9gwN2iR","ULModuleCdk");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../core/ULConfig"),a=e("../../utils/ULTools"),i=e("../../core/ULSdkManager"),s=e("../../ULConsts"),l=e("../../core/ULModuleBase"),c=e("../../events/ULEventDispatcher"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.init=function(){e.prototype.init.call(this),c.default.getInstance().addListener(s.default.CMD_USE_CDKEY,1,this.onCmdUseCdkey.bind(this))},t.prototype.requestUseCdk=function(e,t,o){var n=r.default.getConfig(),l=n.s_sdk_cdk_app_id,c=n.i_net_timeout,u=a.default.format("%s?userId=%s&cdkStr=%s&appId=%s&channelId=%s",n.s_sdk_cdk_url,e,t,l,o);ULSDK.console.log("ULModuleCdk.requestUseCdk",u),a.default.httpGet({url:u,timeoutMillisecond:c,success:function(e){e=(e=(e=(e=e.replace('"[',"[")).replace(']"',"]")).replace('"0"','"1"')).replace("message","data");var t=JSON.parse(e);i.default.getInstance().statisManager.reportOpenCdk(t.code),1==t.code?i.default.getInstance().response(s.default.CMD_USE_CDKEY_RESULT,{code:1,data:t.data,message:"\u5151\u6362\u6210\u529f"}):i.default.getInstance().response(s.default.CMD_USE_CDKEY_RESULT,{code:0,data:[],message:t.data})},fail:function(){i.default.getInstance().statisManager.reportOpenCdk(0),i.default.getInstance().response(s.default.CMD_USE_CDKEY_RESULT,{code:0,message:"\u8bf7\u6c42\u8d85\u65f6"})}})},t.prototype.onCmdUseCdkey=function(e){e.stopImmediatePropagation();r.default.getConfig();var t=e.data,o=t.userId,n=t.cdkStr,a=t.channelId;this.requestUseCdk(o,n,a)},t}(l.default);o.default=u,cc._RF.pop()},{"../../ULConsts":"ULConsts","../../core/ULConfig":"ULConfig","../../core/ULModuleBase":"ULModuleBase","../../core/ULSdkManager":"ULSdkManager","../../events/ULEventDispatcher":"ULEventDispatcher","../../utils/ULTools":"ULTools"}],ULModuleCheckerManager:[function(e,t,o){"use strict";cc._RF.push(t,"c10f7OuUrtFCZblYQpi2huO","ULModuleCheckerManager");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../modulechecker/MCPanelCreator"),a=e("../modulechecker/MCPanelLaya"),i=e("../utils/ULTools"),s=e("../events/ULEventDispatcher"),l=e("../ULConsts"),c=e("../utils/ULTimer"),u=function(){function e(){this.inputCode="",this.lastInputTime=0,this.debugInfos={},this.debugInfoRenderNode=null}return e.prototype.init=function(){var e=this;l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager.init"),this.registerTouchListener(),this.refreshDebugInfo(),window.cc&&window.cc.director.on(window.cc.Director.EVENT_AFTER_SCENE_LAUNCH,function(t){l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager on EVENT_AFTER_SCENE_LAUNCH"),e.registerTouchListener(),e.debugInfoRenderNode=null,e.refreshDebugInfo()})},e.prototype.showPanel=function(e){var t=this;l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager.showPanel"),(e=e||[]).splice(0,0,{type:"newLine"}),e.splice(0,0,{type:"button",text:"\u5173\u95ed",onClick:function(){t.closePanel()}}),e.splice(0,0,{type:"label",text:"\u5c0f\u6e38\u620f\u6a21\u5757\u8c03\u8bd5\u5668"}),e.splice(0,0,{type:"newLine"}),e.splice(0,0,{type:"newLine"}),e.push({type:"newLine"}),e.push({type:"newLine"}),e.push({type:"newLine"}),e.push({type:"label",text:i.default.format("\xa9%d Ultralisk Chengdu",(new Date).getFullYear())}),this.closePanel();var o=this.getOrCreatePanel();o&&o.show(e)},e.prototype.closePanel=function(){l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager.closePanel"),this.panel&&this.panel.close()},e.prototype.showReferenceRect=function(e,t,o,n,r,a,i){l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager.showReferenceRect",e,t,o,n,r,a,i),this.getOrCreatePanel(),this.panel&&this.panel.showReferenceRect(e,t,o,n,r,a,i)},e.prototype.showReferenceRectFromViewPoint=function(e,t,o,n,r,a,i){l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager.showReferenceRectFromViewPoint",e,t,o,n,r),this.getOrCreatePanel(),this.panel&&this.panel.showReferenceRectFromViewPoint(e,t,o,n,r,a,i)},e.prototype.hideReferenceRect=function(e){l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager.hideReferenceRect",e),this.getOrCreatePanel(),this.panel&&this.panel.hideReferenceRect(e)},e.prototype.hideAllReferenceRects=function(){l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager.hideAllReferenceRects"),this.getOrCreatePanel(),this.panel&&this.panel.hideAllReferenceRects()},e.prototype.showNationBanner=function(e,t){void 0===t&&(t=1),l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager.showNationBanner"),this.getOrCreatePanel(),this.panel&&this.panel.showNationBanner(e,t)},e.prototype.closeNationBanner=function(){l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager.closeNationBanner"),this.getOrCreatePanel(),this.panel&&this.panel.closeNationBanner()},e.prototype.showNationInter=function(e){l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager.showNationInter"),this.getOrCreatePanel(),this.panel&&this.panel.showNationInter(e)},e.prototype.closeNationInter=function(){l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager.closeNationInter"),this.getOrCreatePanel(),this.panel&&this.panel.closeNationInter()},e.prototype.getItemText=function(e){if(this.panel)return this.panel.getItemText(e)},e.prototype.setItemText=function(e,t){this.panel&&this.panel.setItemText(e,t)},e.prototype.showMsgTip=function(e){this.getOrCreatePanel(),this.panel&&this.panel.showMsgTip(e)},e.prototype.alertPrompt=function(e,t,o,n){return this._alertPrompt(e,t,[o],[n])},e.prototype.alertPrompt2=function(e,t,o,n,r,a){return this._alertPrompt(e,t,[o,n],[r,a])},e.prototype._alertPrompt=function(e,t,o,n){this.getOrCreatePanel(),this.panel&&this.panel.showPromptDialog(e,t,o,n)},e.prototype.alertPrivacy=function(e,t,o,n){this.getOrCreatePanel(),this.panel&&this.panel.showPrivacyDialog(e,t,o,n)},e.prototype.showPickerDialog=function(e,t,o,n){this.getOrCreatePanel(),this.panel&&this.panel.showPickerDialog(e,t,o,n)},e.prototype.addDebugInfo=function(e,t){this.debugInfos[e]=t,this.refreshDebugInfo()},e.prototype.removeDebugInfo=function(e){delete this.debugInfos[e],this.refreshDebugInfo()},e.prototype.showBigTextWithPickerDialog=function(e,t,o){for(var n=this,r=[],a=0;a<t.length;a+=o){var i=t.substr(a,o);r.push({text:i,value:i})}this.showPickerDialog(e,r,function(e){n.alertPrompt("\u5b8c\u6574\u5185\u5bb9",e,"\u597d\u7684",null)},!0)},e.prototype.getOrCreatePanel=function(){return this.panel||(window.cc?this.panel=new r.default:window.Laya?this.panel=new a.default:ULSDK.console.warn("ULModuleCheckerManager.getOrCreatePanel unknown platform!")),this.panel},e.prototype.registerTouchListener=function(){var e=this;if(l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager.registerTouchListener"),l.default.B_INNER_DEBUG&&ULSDK.console.log("  cc",window.cc),l.default.B_INNER_DEBUG&&ULSDK.console.log("  laya",window.laya),l.default.B_INNER_DEBUG&&ULSDK.console.log("  Laya",window.Laya),window.cc&&window.cc.systemEvent){window.cc;var t=window.cc.director.getScene();if(!t)return l.default.B_INNER_DEBUG&&ULSDK.console.log("  scene not found!"),null;var o=t.getChildByName("Canvas");if(!o)return l.default.B_INNER_DEBUG&&ULSDK.console.log("  nodeCanvas not found!"),null;l.default.B_INNER_DEBUG&&ULSDK.console.log("nodeCanvas",o),o.on(window.cc.Node.EventType.TOUCH_START,function(t){var n=t.getLocation(),r=o.getContentSize(),a=window.cc.rect(0,r.height-200,100,200),i=window.cc.rect(r.width-100,r.height-200,100,200);a.contains(n)?e.onTouchSpecialArea("l"):i.contains(n)?e.onTouchSpecialArea("r"):e.onTouchSpecialArea(null)},null,!0),o.on(window.cc.Node.EventType.TOUCH_END,function(e){s.default.getInstance().dispatch(l.default.CMD_SDK_TOUCH_SCREEN_END,{lastTouchScreenEnd:i.default.time()})},null,!0)}else if(window.Laya&&window.Laya.stage){var r=window.Laya,a=r.stage.getChildByName("__ulsdk_ui_node_root__");if(!a){l.default.B_INNER_DEBUG&&ULSDK.console.log("create laya nodeRoot"),(a=r.stage.addChild(new r.Sprite)).size(0,0),a.pos(r.stage.width/2,r.stage.height/2),a.name="__ulsdk_ui_node_root__",a.zOrder=4e4;var u=this,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onStageClick=function(e){l.default.B_INNER_DEBUG&&ULSDK.console.log("LayaStageToucher.onStageClick",e),s.default.getInstance().dispatch(l.default.CMD_SDK_TOUCH_SCREEN_END,{lastTouchScreenEnd:i.default.time()});var t=e.stageX,o=e.stageY;l.default.B_INNER_DEBUG&&ULSDK.console.log(t,o,r.stage.width,r.stage.height),o>200?u.onTouchSpecialArea(null):t<=100?u.onTouchSpecialArea("l"):t>=r.stage.width-100?u.onTouchSpecialArea("r"):u.onTouchSpecialArea(null)},t}(r.Script);a.addComponent(d),c.default.callLoop(1,function(){var e=r.stage.getChildByName("__ulsdk_ui_node_root__");e&&e.pos(r.stage.width/2,r.stage.height/2)})}l.default.B_INNER_DEBUG&&ULSDK.console.log("  nodeRoot",a)}},e.prototype.refreshDebugInfo=function(){if(i.default.getObjSize(this.debugInfos)<=0)this.debugInfoRenderNode&&(window.cc?window.cc.isValid(this.debugInfoRenderNode)&&this.debugInfoRenderNode.destroy():window.Laya&&this.debugInfoRenderNode.destroy(),this.debugInfoRenderNode=null);else{var e=[];i.default.forEachMap(this.debugInfos,function(t,o){e.push(o)});var t=e.join("\n");if(!this.debugInfoRenderNode)if(window.cc){window.cc;var o=window.cc.director.getScene();if(!o)return l.default.B_INNER_DEBUG&&ULSDK.console.log("  scene not found!"),null;var n=o.getChildByName("Canvas");if(!n)return l.default.B_INNER_DEBUG&&ULSDK.console.log("  nodeCanvas not found!"),null;(s=new window.cc.Node).parent=n,s.zIndex=window.cc.macro.MAX_ZINDEX,s.y=0,s.x=0,s.width=n.width-10,s.setAnchorPoint(.5,1),s.color=window.cc.Color.RED,s.addComponent(window.cc.Label).fontSize=24,s.getComponent(window.cc.Label).enableWrapText=!0,s.getComponent(window.cc.Label).horizontalAlign=window.cc.Label.HorizontalAlign.CENTER,s.getComponent(window.cc.Label).verticalAlign=window.cc.Label.VerticalAlign.CENTER,s.runAction(window.cc.repeatForever(window.cc.sequence(window.cc.fadeTo(1,63),window.cc.fadeTo(1,255)))),this.debugInfoRenderNode=s}else if(window.Laya){var r=window.Laya,a=r.stage.getChildByName("__ulsdk_ui_node_root__");if(!a)return void(l.default.B_INNER_DEBUG&&ULSDK.console.log("  nodeRoot not found!"));(c=a.addChild(new r.Label)).fontSize=24,c.color="#ff0000ff",c.align="center",c.width=r.stage.width-10,c.pos(-c.width/2,0),c.wordWrap=!0,this.debugInfoRenderNode=c}if(this.debugInfoRenderNode)if(window.cc){var s;window.cc;(s=this.debugInfoRenderNode).getComponent(window.cc.Label).string=t}else if(window.Laya){var c;(c=this.debugInfoRenderNode).text=t}}},e.prototype.onTouchSpecialArea=function(e){if(l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager.onTouchSpecialArea",e),i.default.time()-this.lastInputTime>=2&&this.inputCode&&(l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager inputCode: touch gap is too long time, cancel."),this.inputCode=""),e){if(this.inputCode+=e,this.lastInputTime=i.default.time(),l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager inputCode:",this.inputCode),"lrlrllrr"==this.inputCode){l.default.B_INNER_DEBUG&&ULSDK.console.log("  right!"),this.inputCode="";var t=this.moreGameAbTestConfig()||[];t=t.concat(this.collectionConfig()),this.showPanel(t)}}else this.inputCode&&(l.default.B_INNER_DEBUG&&ULSDK.console.log("ULModuleCheckerManager inputCode: touch invalid area, cancel."),this.inputCode="")},e.prototype.collectionConfig=function(){return s.default.getInstance().dispatchWithReturn(l.default.CMD_SDK_COLLECTION_MODULE_CHECKER_CONFIG,{})},e.prototype.moreGameAbTestConfig=function(){return s.default.getInstance().dispatchWithReturn(l.default.CMD_SDK_COLLECTION_MODULE_CHECKER_MORE_GAME_AB_TEST_CONFIG,{})},e}();o.default=u,cc._RF.pop()},{"../ULConsts":"ULConsts","../events/ULEventDispatcher":"ULEventDispatcher","../modulechecker/MCPanelCreator":"MCPanelCreator","../modulechecker/MCPanelLaya":"MCPanelLaya","../utils/ULTimer":"ULTimer","../utils/ULTools":"ULTools"}],ULModuleClipboard:[function(e,t,o){"use strict";cc._RF.push(t,"8803cACze5LBoGdq0xNqXdB","ULModuleClipboard");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../core/ULConfig"),a=e("../../utils/ULTools"),i=e("../../core/ULSdkManager"),s=e("../../ULConsts"),l=e("../../core/ULModuleBase"),c=e("../../events/ULEventDispatcher"),u=e("../../core/ULClipboardManager"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.init=function(){e.prototype.init.call(this),c.default.getInstance().addListener(s.default.CMD_SET_CLIPBOARD_DATA,1,this.onCmdSetClipboardData.bind(this)),c.default.getInstance().addListener(s.default.CMD_GET_CLIPBOARD_DATA,1,this.onCmdGetClipboardData.bind(this)),c.default.getInstance().addListener(s.default.CMD_SET_VERSION,1,this.onCmdSetVersion.bind(this))},t.prototype.onCmdSetClipboardData=function(e){e.stopImmediatePropagation();r.default.getConfig();var t=e.data,o=t.clipboardData,n=t.userData;u.default.getInstance().setClipboardData(o,function(e){e?i.default.getInstance().response(s.default.CMD_SET_CLIPBOARD_DATA_RESULT,{code:1,msg:"\u4fdd\u5b58\u6210\u529f",clipboardData:o,userData:n}):i.default.getInstance().response(s.default.CMD_SET_CLIPBOARD_DATA_RESULT,{code:0,msg:"\u4fdd\u5b58\u5931\u8d25",clipboardData:o,userData:n})})},t.prototype.onCmdGetClipboardData=function(e){e.stopImmediatePropagation();r.default.getConfig();var t=e.data.userData;u.default.getInstance().getClipboardData(function(e){e?i.default.getInstance().response(s.default.CMD_GET_CLIPBOARD_DATA_RESULT,{code:1,msg:"\u83b7\u53d6\u6210\u529f",clipboardData:e,userData:t}):i.default.getInstance().response(s.default.CMD_GET_CLIPBOARD_DATA_RESULT,{code:0,msg:"\u83b7\u53d6\u5931\u8d25",clipboardData:null,userData:t})})},t.prototype.onCmdSetVersion=function(e){var t=i.default.getInstance().channelInfo;t.isSupportClipboardData=u.default.getInstance().isSupport(),ULSDK.console.log(a.default.format("ULModuleClipboard.onCmdSetVersion mark isSupportClipboardData = %s",t.isSupportClipboardData))},t}(l.default);o.default=d,cc._RF.pop()},{"../../ULConsts":"ULConsts","../../core/ULClipboardManager":"ULClipboardManager","../../core/ULConfig":"ULConfig","../../core/ULModuleBase":"ULModuleBase","../../core/ULSdkManager":"ULSdkManager","../../events/ULEventDispatcher":"ULEventDispatcher","../../utils/ULTools":"ULTools"}],ULModuleFaceBook:[function(e,t,o){"use strict";cc._RF.push(t,"8c2f3Uk/fVKA4F4NlPXCmE0","ULModuleFaceBook");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../core/ULChannelModuleWebmobileBase"),a=e("../../core/ULConfig"),i=e("../../core/ULSdkManager"),s=e("../../ULConsts"),l=e("./ULAdvFacebook"),c=e("../../events/ULEventDispatcher"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.reportCacheArray=[],t}return n(t,e),t.prototype.init=function(){e.prototype.init.call(this),ULSDK.console.log("ULModuleFaceBook.init()"),c.default.getInstance().addListener(s.default.CMD_SET_VERSION,1,this.onCmdSetVersion.bind(this)),c.default.getInstance().addListener(s.default.CMD_SDK_ON_REPORT_ULSDK_EVENT,1,this.reportEvent.bind(this)),this.initSdk()},t.prototype.initSdk=function(){var e=a.default.getConfig(),t=i.default.getInstance().channelInfo;t.channelName="facebook",t.uuid=this.sdkUserId,t.isSupportRecordShare=!1,t.isShareEnabled=!!e.i_sdk_share_mode,t.copChannelId=e.s_sdk_cop_channel_id,t.isPayEnabled=!!e.i_sdk_pay_mode,t.isUseSdkRank=!!e.i_sdk_sdk_rank_mode,t.appName="facebook",t.payInfo={};var o=this;ULSDK.console.log("ULModuleFaceBook.initSdk \u52a0\u8f7dfacebook\u5e7f\u544aSDK\u7684js\u6210\u529f\uff01");var n=window.FBInstant;n.initializeAsync().then(function(){n.setLoadingProgress(100),n.startGameAsync(),n.getSupportedAPIs(),o.initGoogleAnalytics()})},t.prototype.initGoogleAnalytics=function(){var e=window.FBInstant,t=this;this.googleReport("event","fb_inited"),e.getEntryPointAsync().then(function(e){ULSDK.console.info("ULModuleGoogleAnalytics.initSdk\uff1aEntry Point: ",e),t.googleReport("event","fb_entrypoint",{entrypoint:e})});var o=e.context.getType();ULSDK.console.info("ULModuleGoogleAnalytics.initSdk\uff1acontextType: ",o),this.googleReport("event","fb_context",{type:o}),this.googleReport("event","fb_started"),this.cleanUpReportCache()},t.prototype.loadSubModules=function(){return[new l.default]},t.prototype.googleReport=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var n=window.gtag;n?n(arguments):this.reportCacheArray.push(arguments)},t.prototype.cleanUpReportCache=function(){for(;this.reportCacheArray.length;){var e=this.reportCacheArray.shift();(window.dataLayer||[]).push(e)}},t.prototype.onCmdSetVersion=function(e){ULSDK.console.log("ULModuleGoogleAnalytics.onCmdSetVersion........."),this.googleReport("event","enter_first_scene")},t.prototype.reportEvent=function(e){var t=a.default.getConfig(),o=e.data.parameter,n=o.typeid,r=o.updata;ULSDK.console.log("ULModuleGoogleAnalytics type:",n),ULSDK.console.log("ULModuleGoogleAnalytics updata:",r);var i=t.s_sdk_megadata_server_type_id;switch(n=n.replace(i+"-","")){case s.default.STATIS_TYPE_LEVEL_START_EVENT:var l=r[3]||"",c=r[4]||"";this.googleReport("event","level_start",{levelName:l,reason:c});break;case s.default.STATIS_TYPE_LEVEL_COMPLETE_EVENT:l=r[3]||"";var u=r[4]||"",d=(c=r[5]||"",r[11]||"");this.googleReport("event","level_complete",{levelName:l,state:u,reason:c,time:d});break;case s.default.STATIS_TYPE_COIN_CHANGE_EVENT:var p=r[3]||"",h=r[4]||"",f=r[5]||"";c=r[6]||"";this.googleReport("event","coin_change",{coinType:p,changeType:h,num:f,reason:c});break;case s.default.STATIS_TYPE_ITEM_BUY:var g=r[4]||"";u=r[5]||"",c=r[3]||"";this.googleReport("event","goods_buy",{goods:g,state:u,reason:c});break;case s.default.STATIS_TYPE_PAY_INFO:var m=r[4]||"",_=r[5]||"",v=r[6]||"";this.googleReport("event","pay_info",{payType:m,price:_,result:v});break;case s.default.STATIS_TYPE_ONLINE_TIME:var y=r[4]||"";this.googleReport("event","online_time",{time:y});break;case s.default.STATIS_TYPE_VIDEO_POINT_EVENT:var C=r[3]||"";u=r[4]||"";this.googleReport("event","video_point_event",{advName:C,state:u});break;case s.default.STATIS_TYPE_COMMON_EVENT:var S=r[3]||"",b=r[4]||"",R=r[5]||"",T=r[9]||"";this.googleReport("event","user_common_event",{eventId:S,parm1:b,parm2:R,parm3:T});break;case s.default.STATIS_TYPE_ADV_INFO:var A=r[4]||"",D=(u=r[5]||"",c=r[6]||"",r[7]||"");this.googleReport("event","adv_event",{advType:A,state:u,reason:c,cop:D})}},t}(r.default);o.default=u,cc._RF.pop()},{"../../ULConsts":"ULConsts","../../core/ULChannelModuleWebmobileBase":"ULChannelModuleWebmobileBase","../../core/ULConfig":"ULConfig","../../core/ULSdkManager":"ULSdkManager","../../events/ULEventDispatcher":"ULEventDispatcher","./ULAdvFacebook":"ULAdvFacebook"}],ULModuleMegadata:[function(e,t,o){"use strict";cc._RF.push(t,"9f734JMGNFMAKEn3MpYPE4l","ULModuleMegadata");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../core/ULConfig"),a=e("../../core/ULSdkManager"),i=e("../../ULConsts"),s=e("../../core/ULModuleBase"),l=e("../../events/ULEventDispatcher"),c=e("../../utils/ULTools"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.init=function(){e.prototype.init.call(this),l.default.getInstance().addListener(i.default.CMD_MEGADATA_SERVER,1,this.onCmdMegadataServer.bind(this)),l.default.getInstance().addListener(i.default.CMD_POST_MEGADATA,1,this.onCmdPostMegadata.bind(this)),l.default.getInstance().addListener(i.default.CMD_SDK_ON_GAME_RESUME,i.default.PRIORITY_NONE,this.onCmdSdkOnGameResume.bind(this)),l.default.getInstance().addListener(i.default.CMD_SDK_ON_GAME_PAUSE,i.default.PRIORITY_NONE,this.onCmdSdkOnGamePause.bind(this)),this.gameLevelStartMsgList={}},t.prototype.onCmdMegadataServer=function(e){e.stopImmediatePropagation();var t=r.default.getConfig(),o=e.data;Array.isArray(o)&&o.length>0?a.default.getInstance().response(i.default.CMD_MEGADATA_SERVER_RESULT,{code:1,message:"\u4e0a\u62a5\u6210\u529f"}):a.default.getInstance().response(i.default.CMD_MEGADATA_SERVER_RESULT,{code:0,message:"\u6570\u636e\u5f02\u5e38"});var n=t.s_sdk_megadata_url;if(a.default.getInstance().statisManager.getPostMegadataMode()&&(n=t.s_sdk_megadata_test_url),-1==n.search(/megadatav7/gi)){var s=c.default.clone(o),l=s[0];if(l!=i.default.STATIS_USER_EVENT_POINT_EVENT){if(l==i.default.STATIS_USER_EVENT_GAME_LEVEL_START){var u=c.default.time(),d=s[1]+"";this.gameLevelStartMsgList[d]=u}if(l==i.default.STATIS_USER_EVENT_GAME_LEVEL_COMPLETE){d=s[1]+"";var p=c.default.time()-this.gameLevelStartMsgList[d];this.gameLevelStartMsgList[d]=void 0,delete this.gameLevelStartMsgList[d],isNaN(p)&&(p=0),(p<0||p>1e4)&&(p=0),s.push(Math.floor(p).toString())}a.default.getInstance().statisManager.reportUserEvent(s)}else a.default.getInstance().statisManager.reportPointEvent(s[1],s[2])}else ULSDK.console.warn("\u5e94\u7528\u786e\u5b9a\u4f7f\u7528v7\u7248\u672c\u7edf\u8ba1\uff0c/c/megadataServer\u63a5\u53e3\u6570\u636e\u4e0d\u518d\u8fdb\u884c\u4e0a\u62a5")},t.prototype.onCmdPostMegadata=function(e){e.stopImmediatePropagation();var t=r.default.getConfig(),o=e.data;Array.isArray(o)&&o.length>0?a.default.getInstance().response(i.default.CMD_POST_MEGADATA_RESULT,{code:1,message:"\u4e0a\u62a5\u6210\u529f"}):a.default.getInstance().response(i.default.CMD_POST_MEGADATA_RESULT,{code:0,message:"\u6570\u636e\u5f02\u5e38"});var n=c.default.clone(o),s=n[0],u="";if(s==i.default.STATIS_USER_ACTION_EVENT_LEVEL_START){var d=c.default.time(),p=n[1]+"";this.gameLevelStartMsgList[p]=d,u=c.default.format("%s-%s",t.s_sdk_megadata_server_type_id,i.default.STATIS_TYPE_LEVEL_START_EVENT)}if(s==i.default.STATIS_USER_ACTION_EVENT_LEVEL_COMPLETE){p=n[1]+"";var h=c.default.time()-this.gameLevelStartMsgList[p];this.gameLevelStartMsgList[p]=void 0,delete this.gameLevelStartMsgList[p],isNaN(h)&&(h=0),(h<0||h>1e4)&&(h=0),n.push(Math.floor(h).toString()),u=c.default.format("%s-%s",t.s_sdk_megadata_server_type_id,i.default.STATIS_TYPE_LEVEL_COMPLETE_EVENT),l.default.getInstance().dispatch(i.default.CMD_SDK_CHANNEL_MEGADATA_POST,["levelComplete",p])}if(s==i.default.STATIS_USER_ACTION_EVENT_COIN_CHANGE&&(u=c.default.format("%s-%s",t.s_sdk_megadata_server_type_id,i.default.STATIS_TYPE_COIN_CHANGE_EVENT)),s==i.default.STATIS_USER_ACTION_EVENT_ITEM_BUY&&(u=c.default.format("%s-%s",t.s_sdk_megadata_server_type_id,i.default.STATIS_TYPE_ITEM_BUY)),s==i.default.STATIS_USER_ACTION_EVENT_BUY_ACTION&&(u=c.default.format("%s-%s",t.s_sdk_megadata_server_type_id,i.default.STATIS_TYPE_BUY_ACTION)),s==i.default.STATIS_USER_ACTION_EVENT_COMMON_EVENT){u=c.default.format("%s-%s",t.s_sdk_megadata_server_type_id,i.default.STATIS_TYPE_COMMON_EVENT);var f=c.default.clone(n);f.shift(),ULSDK.console.log("ULModuleMegadta.onCmdPostMegadatapostData postData:",f),l.default.getInstance().dispatch(i.default.CMD_SDK_CHANNEL_MEGADATA_POST,f)}s==i.default.STATIS_USER_ACTION_EVENT_VIDEO_POINT_EVENT&&(u=c.default.format("%s-%s",t.s_sdk_megadata_server_type_id,i.default.STATIS_TYPE_VIDEO_POINT_EVENT),l.default.getInstance().dispatch(i.default.CMD_SDK_CHANNEL_MEGADATA_POST,["videoPointShow",n[1]])),""!=u&&(n.shift(),ULSDK.console.log("ULModuleMegadta.onCmdPostMegadatapostData typeId:",u," rawDatas:",n),a.default.getInstance().statisManager.reportUserActionEvent(n,u))},t.prototype.onCmdSdkOnGameResume=function(e){r.default.getConfig();for(var t in this.gameLevelStartMsgList)this.gameLevelStartMsgList[t]=c.default.time();ULSDK.console.log("ULModuleMegadta.onCmdSdkOnGameResume gameLevelStartTime:",this.gameLevelStartMsgList)},t.prototype.onCmdSdkOnGamePause=function(e){var t=r.default.getConfig();for(var o in this.gameLevelStartMsgList){ULSDK.console.log("ULModuleMegadta.onCmdSdkOnGamePause currentGameLevelName:",o);var n=c.default.time()-this.gameLevelStartMsgList[o];isNaN(n)&&(n=0),(n<0||n>1e4)&&(n=0);var s=new Array;s.push(o),s.push("2"),s.push("pause"),s.push("0"),s.push("0"),s.push("0"),s.push("0"),s.push("0"),s.push("0"),s.push(Math.floor(n).toString());var l=c.default.format("%s-%s",t.s_sdk_megadata_server_type_id,i.default.STATIS_TYPE_LEVEL_COMPLETE_EVENT);a.default.getInstance().statisManager.reportUserActionEvent(s,l)}},t}(s.default);o.default=u,cc._RF.pop()},{"../../ULConsts":"ULConsts","../../core/ULConfig":"ULConfig","../../core/ULModuleBase":"ULModuleBase","../../core/ULSdkManager":"ULSdkManager","../../events/ULEventDispatcher":"ULEventDispatcher","../../utils/ULTools":"ULTools"}],ULModuleUserData:[function(e,t,o){"use strict";cc._RF.push(t,"0b9f64T1ZBFA6N0s+MKX/e0","ULModuleUserData");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../core/ULConfig"),a=e("../../core/ULSdkManager"),i=e("../../ULConsts"),s=e("../../core/ULModuleBase"),l=e("../../events/ULEventDispatcher"),c=e("../../utils/ULTools"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.init=function(){e.prototype.init.call(this),l.default.getInstance().addListener(i.default.CMD_SAVE_USER_DATA,i.default.PRIORITY_DISABLE,this.onCmdSaveUserData.bind(this)),l.default.getInstance().addListener(i.default.CMD_GET_USER_DATA,i.default.PRIORITY_DISABLE,this.onCmdGetUserData.bind(this))},t.prototype.requestUploadUserData=function(e,t){var o=r.default.getConfig(),n=o.s_sdk_user_data_save_url,s={userId:e,data:t};c.default.httpPost({url:n,postData:s,timeoutMillisecond:o.i_net_timeout,success:function(e){var t=JSON.parse(e);t&&0==t.code?a.default.getInstance().response(i.default.CMD_SAVE_USER_DATA_RESULT,{code:1,msg:"\u5b58\u6863\u6210\u529f"}):a.default.getInstance().response(i.default.CMD_SAVE_USER_DATA_RESULT,{code:0,msg:"\u5b58\u6863\u5931\u8d25"})},fail:function(){a.default.getInstance().response(i.default.CMD_SAVE_USER_DATA_RESULT,{code:0,msg:"\u5b58\u6863\u8d85\u65f6"})}})},t.prototype.requestDownloadUserData=function(e){var t=r.default.getConfig(),o=c.default.format("%s?userId=%s",t.s_sdk_user_data_get_url,e);ULSDK.console.log("ULModuleUserData.requestDownloadUserData",e),ULSDK.console.log("  url",o),c.default.httpGet({url:o,timeoutMillisecond:t.i_net_timeout,success:function(e){var t=JSON.parse(e);ULSDK.console.log("  ULModuleUserData.requestDownloadUserData success",e),t&&0==t.code?a.default.getInstance().response(i.default.CMD_GET_USER_DATA_RESULT,{code:1,userData:t.data,msg:"\u6a21\u62df\u6210\u529f"}):a.default.getInstance().response(i.default.CMD_GET_USER_DATA_RESULT,{code:0,userData:{},msg:"\u8bfb\u53d6\u5b58\u6863\u5931\u8d25"})},fail:function(e){ULSDK.console.log("  ULModuleUserData.requestDownloadUserData fail",e),a.default.getInstance().response(i.default.CMD_GET_USER_DATA_RESULT,{code:0,userData:{},msg:"\u8bfb\u53d6\u5b58\u6863\u8d85\u65f6"})}})},t.prototype.onCmdSaveUserData=function(e){e.stopImmediatePropagation();r.default.getConfig();var t=a.default.getInstance().channelInfo,o=e.data,n=t.uuid,i=o.userData;n?this.requestUploadUserData(n,i):ULSDK.console.log("ULModuleUserData.onCmdSaveUserData userId not found!")},t.prototype.onCmdGetUserData=function(e){e.stopImmediatePropagation();r.default.getConfig();var t=a.default.getInstance().channelInfo,o=(e.data,t.uuid);this.requestDownloadUserData(o)},t}(s.default);o.default=u,cc._RF.pop()},{"../../ULConsts":"ULConsts","../../core/ULConfig":"ULConfig","../../core/ULModuleBase":"ULModuleBase","../../core/ULSdkManager":"ULSdkManager","../../events/ULEventDispatcher":"ULEventDispatcher","../../utils/ULTools":"ULTools"}],ULNativeControllerHtml5:[function(e,t,o){"use strict";cc._RF.push(t,"c8a28gqOHVNu6dhu7kRrKr/","ULNativeControllerHtml5"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../ulsdk/middleware/ULSdkMiddleware"),r=function(){function e(){}return e.init=function(e){var t=this;this.isEnabled(!0)?(this.fOnGameCallback=e,n.default.registerOnResponseCallback(function(e){t.sendMsgToGame(e)})):console.warn("ULNativeControllerHtml5.init !isEnabled()")},e.isEnabled=function(e){if(e)try{console.log("ULNativeControllerHtml5.isEnabled"),console.log("  wx",window.wx),console.log("  qq",window.qq),console.log("  tt",window.tt),console.log("  swan",window.swan),console.log("  hbs",window.hbs),console.log("  qg",window.qg),console.log("  document",document),console.log("  weibo",window.loadRuntime),console.log("  cc.sys.isBrowser",window.cc&&window.cc.sys&&window.cc.sys.isBrowser),console.log("  laya conch",window.Laya&&window.conch)}catch(e){console.log(e)}return!(!window||!window.Laya||window.conch)||(!(!window||!window.wx)||(!(!window||!window.qq)||(!(!window||!window.tt)||(!(!window||!window.swan)||(!(!window||!window.hbs)||(!(!window||!window.qg)||(!(!window||!window.loadRuntime)||!!(window.cc&&window.cc.sys&&window.cc.sys.isBrowser))))))))},e.initUlsdk=function(){var e=n.default.initUlsdk();return JSON.stringify({ret:e})},e.sendMsgToSdk=function(e){var t=n.default.request(e);return JSON.stringify({ret:t})},e.sendMsgToGame=function(e){this.fOnGameCallback instanceof Function&&this.fOnGameCallback(e)},e.isAllowStartGame=function(){return n.default.isAllowStartGame()},e.fOnGameCallback=null,e}();o.default=r,cc._RF.pop()},{"../../ulsdk/middleware/ULSdkMiddleware":"ULSdkMiddleware"}],ULSDK:[function(e,t,o){"use strict";cc._RF.push(t,"184ffsWvaZKxpm4F/j4dLyT","ULSDK");var n,r=console;(function(e){var t=function(){function t(){}return t.info=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];e.console.allowConsole&&r.info.apply(r,t)},t.log=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];e.console.allowConsole&&r.log.apply(r,t)},t.warn=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];e.console.allowConsole&&r.warn.apply(r,t)},t.error=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];e.console.allowConsole&&r.error.apply(r,t)},t.allowConsole=!0,t}();e.console=t})(n||(n={})),window.ULSDK=n,cc._RF.pop()},{}],ULSdkManager:[function(e,t,o){"use strict";cc._RF.push(t,"9ea04Wv6zpKJqktO/GWxHUt","ULSdkManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../middleware/ULSdkMiddleware"),r=e("../events/ULEventDispatcher"),a=e("./ULSdkModuleLoader"),i=e("./ULChannelInfo"),s=e("./ULCopManager"),l=e("../utils/ULTimer"),c=e("../utils/ULTools"),u=e("./ULConfig"),d=e("../ULConsts"),p=e("./ULAdvManager"),h=e("./ULStatisManager"),f=e("./ULModuleCheckerManager"),g=function(){function e(){this.bChannelInfoResultResponsed=!1,this.bAllowStartGame=!0,this.version="0.1",this.modules=[],this.channelInfo=new i.default,this.copManager=new s.default,this.advManager=new p.default,this.statisManager=new h.ULStatisManager,this.moduleCheckerManager=new f.default,this.bChannelInfoResultResponsed=!1,this.responsePending=[],this.sdkCommunicationLog=[],c.default._hack_console_print_method(),c.default._start_console_print_LAN()}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.initUlsdk=function(){ULSDK.console.log("ULSdkManger.init"),this.modules=a.default.initAllModules(),c.default._start_console_print_LAN(),this.advManager.init(),this.statisManager.init(),this.copManager.init(),this.moduleCheckerManager.init(),r.default.getInstance().addListener(d.default.CMD_GET_BASE_CHANNEL_INFO,d.default.PRIORITY_NONE,this.onCmdGetBaseChannelInfo.bind(this)),r.default.getInstance().addListener(d.default.CMD_SET_VERSION,d.default.PRIORITY_NONE,this.onCmdSetVersion.bind(this)),r.default.getInstance().dispatch(d.default.CMD_SDK_INIT_USER_LOGIN,{}),r.default.getInstance().dispatch(d.default.CMD_SDK_ON_GAME_START,{}),window.cc&&window.cc.game&&window.cc.game.on instanceof Function?(ULSDK.console.log("register cocos EVENT_SHOW & EVENT_HIDE"),window.cc.game.on(window.cc.game.EVENT_SHOW,function(){ULSDK.console.log("ULSdkManager on EVENT_SHOW"),r.default.getInstance().dispatch(d.default.CMD_SDK_ON_GAME_RESUME,{})}),window.cc.game.on(window.cc.game.EVENT_HIDE,function(){ULSDK.console.log("ULSdkManager on CC_EVENT_HIDE"),r.default.getInstance().dispatch(d.default.CMD_SDK_ON_GAME_PAUSE,{})})):window.Laya&&this._register_laya_life_cycle_listener()},e.prototype._register_laya_life_cycle_listener=function(){var e,t=window;void 0!==document.hidden?e="hidden":void 0!==document.mozHidden?e="mozHidden":void 0!==document.msHidden?e="msHidden":void 0!==document.webkitHidden&&(e="webkitHidden");var o=!1;function n(){ULSDK.console.log("Laya.onHidden"),o||(o=!0,r.default.getInstance().dispatch(d.default.CMD_SDK_ON_GAME_PAUSE,{}))}function a(){ULSDK.console.log("Laya.onShown"),o&&(o=!1,r.default.getInstance().dispatch(d.default.CMD_SDK_ON_GAME_RESUME,{}))}if(e)for(var i=["visibilitychange","mozvisibilitychange","msvisibilitychange","webkitvisibilitychange","qbrowserVisibilityChange"],s=0;s<i.length;s++)document.addEventListener(i[s],function(t){var o=document[e];(o=o||t.hidden)?n():a()});else t.addEventListener("blur",n),t.addEventListener("focus",a);navigator.userAgent.indexOf("MicroMessenger")>-1&&(t.onfocus=a),window.wx&&(window.wx.onShow&&window.wx.onShow(a),window.wx.onHide&&window.wx.onHide(n)),window.qg&&(window.qg.onShow&&window.qg.onShow(a),window.qg.onHide&&window.qg.onHide(n));window.hbs&&(window.hbs.onShow&&window.hbs.onShow(a),window.hbs.onHide&&window.hbs.onHide(n)),window.ks&&(window.ks.onShow&&window.ks.onShow(a),window.ks.onHide&&window.ks.onHide(n)),"onpageshow"in window&&"onpagehide"in window&&(t.addEventListener("pagehide",n),t.addEventListener("pageshow",a),document.addEventListener("pagehide",n),document.addEventListener("pageshow",a))},e.prototype.onRequest=function(e){var t=null;this.recordSdkCommunicationLog(e);try{t=JSON.parse(e)}catch(e){ULSDK.console.error(e)}if(t){var o=t.cmd,n=t.data||{};if(o)ULSDK.console.log("ULSdkManager.onRequest",o,n),r.default.getInstance().dispatch(o,n)||ULSDK.console.warn(c.default.format("\u672a\u68c0\u6d4b\u5230[%s]\u76d1\u542c\u5668",o));else ULSDK.console.error("cmd\u4e3a\u7a7a,\u8bf7\u68c0\u67e5\u662f\u5426\u6309\u7167\u6587\u6863\u89c4\u8303\u914d\u7f6e\u6d88\u606f")}else ULSDK.console.error("\u8bf7\u4ed4\u7ec6\u9605\u8bfb\u6587\u6863,\u6d88\u606f\u5fc5\u987b\u4e3ajson\u5b57\u7b26\u4e32\u7c7b\u578b")},e.prototype.response=function(e,t,o){if(ULSDK.console.log("ULSdkManager.response",e,t),!this.bChannelInfoResultResponsed&&!o)return ULSDK.console.log("  \u5c1a\u672a\u53d1\u9001/c/channelInfoResult\uff0c\u6682\u5b58\u6d88\u606f"),void this.responsePending.push({cmd:e,data:t});var r=JSON.stringify({cmd:e,data:t});n.default.onResponse(r),this.recordSdkCommunicationLog(r)},e.prototype.uploadMegadata=function(e){var t=e.join("_");this.statisManager.reportUserEvent(["commonEvent",t])},e.prototype.isAllowStartGame=function(){return ULSDK.console.log("ULSdkManagaer.isAllowStartGame",this.bAllowStartGame),this.bAllowStartGame},e.prototype.getModuleByName=function(e){for(var t=0;t<this.modules.length;t++){var o=this.modules[t];if(o.name==e)return o}return null},e.prototype.getSdkCommunicationLog=function(){return this.sdkCommunicationLog},e.prototype.recordSdkCommunicationLog=function(e){this.sdkCommunicationLog&&(this.sdkCommunicationLog.length>=100&&this.sdkCommunicationLog.splice(0,1),this.sdkCommunicationLog.push(e))},e.prototype._doResponseChannelInfoResult=function(){this.bChannelInfoResultResponsed=!0,this.response(d.default.CMD_CHANNEL_INFO_RESULT,this.channelInfo.toResponseData());for(var e=0;e<this.responsePending.length;e++){var t=this.responsePending[e];this.response(t.cmd,t.data)}this.responsePending=[]},e.prototype.onCmdGetBaseChannelInfo=function(e){this.response(d.default.CMD_GET_BASE_CHANNEL_INFO_RESULT,this.channelInfo.toBaseChannelInfoData(),!0)},e.prototype.onCmdSetVersion=function(e){var t=this;e.data;if(e.stopImmediatePropagation(),this.channelInfo.isReady())this._doResponseChannelInfoResult();else{ULSDK.console.log("ULSdkManager.onEventSetVersion channelInfo\u51c6\u5907\u4e2d\uff0c\u5f00\u542ftimer\u8fdb\u884c\u76d1\u542c");var o=u.default.getConfig().i_channel_info_timeout/1e3;l.default.callLoop(1/60,function(e){if(e.usedTime>=o){e.stop();var n=t.channelInfo.getPreparationFlags();return ULSDK.console.log("\u7b49\u5f85channelInfo\u8d85\u65f6\uff01\u76f4\u63a5\u89e6\u53d1channelInfoResult\u3002flags:",n.join(",")),void t._doResponseChannelInfoResult()}if(t.channelInfo.isReady())return e.stop(),ULSDK.console.log("channelInfo\u51c6\u5907\u5b8c\u6bd5\uff01\u89e6\u53d1channelInfoResult"),void t._doResponseChannelInfoResult()})}},e._instance=null,e}();o.default=g,cc._RF.pop()},{"../ULConsts":"ULConsts","../events/ULEventDispatcher":"ULEventDispatcher","../middleware/ULSdkMiddleware":"ULSdkMiddleware","../utils/ULTimer":"ULTimer","../utils/ULTools":"ULTools","./ULAdvManager":"ULAdvManager","./ULChannelInfo":"ULChannelInfo","./ULConfig":"ULConfig","./ULCopManager":"ULCopManager","./ULModuleCheckerManager":"ULModuleCheckerManager","./ULSdkModuleLoader":"ULSdkModuleLoader","./ULStatisManager":"ULStatisManager"}],ULSdkMiddleware:[function(e,t,o){"use strict";cc._RF.push(t,"3ba94aRgChOiZbqmo3TqC0c","ULSdkMiddleware"),Object.defineProperty(o,"__esModule",{value:!0}),e("../utils/ULSDK");var n=e("../core/ULSdkManager"),r=function(){function e(){}return e.initUlsdk=function(){if(n.default)try{return n.default.getInstance().initUlsdk(),!0}catch(e){return ULSDK.console.error(e),!1}else ULSDK.console.log("ULSdkMiddleware.initUlsdk ULSdkManager not found!")},e.request=function(e){if(!n.default)return ULSDK.console.log("ULSdkMiddleware.request ULSdkManager not found!"),!1;try{return n.default.getInstance().onRequest(e),!0}catch(e){return ULSDK.console.error(e),!1}},e.isAllowStartGame=function(){return n.default?n.default.getInstance().isAllowStartGame():(ULSDK.console.log("ULSdkMiddleware.isAllowStartGame ULSdkManager not found!"),!0)},e.registerOnResponseCallback=function(e){this.fOnResponseCallback=e},e.onResponse=function(e){this.fOnResponseCallback instanceof Function&&this.fOnResponseCallback(e)},e.fOnResponseCallback=null,e}();o.default=r,cc._RF.pop()},{"../core/ULSdkManager":"ULSdkManager","../utils/ULSDK":"ULSDK"}],ULSdkModuleLoader:[function(e,t,o){"use strict";cc._RF.push(t,"0386fiRF79HZIa91dK0h40C","ULSdkModuleLoader"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../modules/common/ULModuleCdk"),r=e("../modules/common/ULModuleMegadata"),a=e("../modules/common/ULModuleUserData"),i=e("../modules/common/ULModuleClipboard"),s=e("../modules/weiyou/ULModuleFaceBook"),l=function(){function e(){}return e.initAllModules=function(){var e=[];e.push(new n.default),e.push(new r.default),e.push(new a.default),e.push(new i.default),e.push(new s.default);for(var t=0;t<e.length;t++)for(var o=(u=e[t]).loadSubModules(),l=0;l<o.length;l++){var c=o[l];e.splice(t+1,0,c),t++}ULSDK.console.log("ULSdkModuleLoader--modules:",e);for(t=0;t<e.length;t++){var u=e[t];try{u.init()}catch(e){ULSDK.console.error(e)}}return e},e}();o.default=l,cc._RF.pop()},{"../modules/common/ULModuleCdk":"ULModuleCdk","../modules/common/ULModuleClipboard":"ULModuleClipboard","../modules/common/ULModuleMegadata":"ULModuleMegadata","../modules/common/ULModuleUserData":"ULModuleUserData","../modules/weiyou/ULModuleFaceBook":"ULModuleFaceBook"}],ULStatisManager:[function(e,t,o){"use strict";cc._RF.push(t,"eb9e6h4M3ZCx7P51L940MfR","ULStatisManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ULStorageManager"),r=e("../utils/ULTools"),a=e("./ULSdkManager"),i=e("./ULConfig"),s=e("../ULConsts"),l=e("../utils/ULTimer"),c=e("../events/ULEventDispatcher"),u=function(){function e(){this.bUploading=!1,this.lastTimerLoopTime=null,this.pointEventLog={},this.pointEventCategoryId_2_enabled=null,this.gameStartDataPreparationFlags={},this.commonEventLog={},this.levelStartLog={},this.levelCompletetLog={},this.videoPointLog={},this.buyActionLog={},this.coinChangeLog={}}return e.prototype.init=function(){this.channelInfoUuid=a.default.getInstance().channelInfo.uuid,this.megadataId=i.default.getConfig().s_sdk_megadata_server_type_id,this.loadRecord(),l.default.callLoop(i.default.getConfig().i_sdk_megadata_upload_span/1e3,this.onTimerLoop.bind(this)),c.default.getInstance().addListener(s.default.CMD_SDK_ON_GAME_START,s.default.PRIORITY_NONE,this.onCmdSdkOnGameStart.bind(this)),c.default.getInstance().addListener(s.default.CMD_SDK_ON_GAME_PAUSE,s.default.PRIORITY_NONE,this.onCmdSdkOnGamePause.bind(this)),c.default.getInstance().addListener(s.default.CMD_SDK_ON_GAME_RESUME,s.default.PRIORITY_NONE,this.onCmdSdkOnGameResume.bind(this)),c.default.getInstance().addListener(s.default.CMD_SDK_ON_COP_CHANGED,s.default.PRIORITY_NONE,this.onCmdSdkOnCopChanged.bind(this)),c.default.getInstance().addListener(s.default.CMD_SDK_COLLECTION_MODULE_CHECKER_CONFIG,9,this.onCmdSdkCollectionModuleCheckerConfig.bind(this))},e.prototype.loadRecord=function(){var e,t=n.default.getInstance().getStorage(this._getRecordKey())||"{}";try{e=JSON.parse(t)}catch(t){e={}}this.cacheItems=e.cacheItems||[];var o=e.postMegadataTestMode||0;this.postMegadataTestUserId=e.postMegadataTestUserId,this.setPostMegadataMode(o)},e.prototype.saveRecord=function(){var e={cacheItems:this.cacheItems||[],postMegadataTestUserId:this.postMegadataTestUserId,postMegadataTestMode:this.postMegadataTestMode},t=JSON.stringify(e);n.default.getInstance().setStorage(this._getRecordKey(),t)},e.prototype._getRecordKey=function(){var e=i.default.getConfig();return r.default.format("ULStatisManager_record_%d",e.s_sdk_megadata_game_id)},e.prototype.onTimerLoop=function(e){this.cacheItems.length<=0?s.default.B_INNER_DEBUG&&ULSDK.console.log("ULStatisManager.onTimerLoop no cacheItems"):this.tryUploadToServer()},e.prototype.setPostMegadataMode=function(e){if(this.postMegadataTestMode=e,this.saveRecord(),this.postMegadataTestMode){this.channelInfoUuid=this.postMegadataTestUserId;var t="\u6570\u636e\u4e0a\u4f20\u5df2\u5f00\u542f\u6d4b\u8bd5\u6a21\u5f0f\n\u6d4b\u8bd5\u7528\u6237id:"+this.postMegadataTestUserId;a.default.getInstance().moduleCheckerManager.addDebugInfo("postMegadataTestModeInfo",t)}else this.channelInfoUuid=a.default.getInstance().channelInfo.uuid,a.default.getInstance().moduleCheckerManager.removeDebugInfo("postMegadataTestModeInfo")},e.prototype.getPostMegadataMode=function(){return this.postMegadataTestMode},e.prototype._report=function(e,t){for(var o=i.default.getConfig(),n=(o.s_sdk_megadata_close_table_type_ids||"").split(";"),a=0;a<n.length;a++){var l=r.default.format("%s-%s",this.megadataId,n[a]);if(l==e)return void ULSDK.console.log("ULStatisManager._report \u5927\u6570\u636e\u5206\u8868\u63a7\u5236\u8868\u6570\u636e\u4e0a\u4f20closeId:",l)}ULSDK.console.log("ULStatisManager._report i_sdk_megadata_mode 1 ",o.i_sdk_megadata_mode);try{var u={typeid:e,updata:t};c.default.getInstance().dispatch(s.default.CMD_SDK_ON_REPORT_ULSDK_EVENT,{parameter:u})}catch(e){ULSDK.console.log("ULStatisManager.CMD_SDK_ON_REPORT_ULSDK_EVENT error:",e)}if(o.i_sdk_megadata_mode){if(this.postMegadataTestMode){var d=this.megadataId+"-";e=e.replace(d,"1-"),ULSDK.console.log("ULStatisManager._report postMegadataTestMode \u5df2\u6253\u5f00 typeid:",e)}if(0!=t.length){for(var p=0;p<t.length;p++){var h=t[p];"string"!=typeof h&&(h=null==h?"":""+h),t[p]=h}var f={typeid:e,updata:t};this.cacheItems.push(f),this.saveRecord(),this.cacheItems.length>=s.default.STATIS_UPLOAD_SINGLE_REQUEST_MAX_COUNT&&this.tryUploadToServer()}else ULSDK.console.log("ULStatisManager._report !updata \u65e0\u6709\u6548\u6570\u636e\uff0c\u65e0\u6cd5\u4e0a\u62a5:",t)}else ULSDK.console.log("ULStatisManager._report !i_sdk_megadata_mode \u5173\u95ed\u7edf\u8ba1\u529f\u80fd")},e.prototype.tryUploadToServer=function(){var e=this;if(this.bUploading)s.default.B_INNER_DEBUG&&ULSDK.console.log("ULStatisManager.tryUploadToServer \u6570\u636e\u4e0a\u4f20\u4e2d");else{var t=Math.min(this.cacheItems.length,s.default.STATIS_UPLOAD_SINGLE_REQUEST_MAX_COUNT);if(t<=0)s.default.B_INNER_DEBUG&&ULSDK.console.log("ULStatisManager.tryUploadToServer \u6ca1\u6709\u6570\u636e\u9700\u8981\u4e0a\u4f20");else{this.bUploading=!0;for(var o=[],n=0;n<t;n++){var a=this.cacheItems[n];o.push(a)}var l=i.default.getConfig(),c=l.s_sdk_megadata_url;if(this.postMegadataTestMode&&(c=l.s_sdk_megadata_test_url),l.i_sdk_megadata_encrypt)r.default.httpPostEncryption({url:c,postString:JSON.stringify(o),timeoutMillisecond:l.i_net_timeout,success:function(o){s.default.B_INNER_DEBUG&&console.log("  \u52a0\u5bc6\u7edf\u8ba1\u4e0a\u62a5\u6210\u529f!"),e.cacheItems.splice(0,t),e.saveRecord(),e.bUploading=!1},fail:function(t){s.default.B_INNER_DEBUG&&console.log("  \u52a0\u5bc6\u7edf\u8ba1\u4e0a\u62a5\u9519\u8bef!",t),e.bUploading=!1}});else{var u="updata="+JSON.stringify(o);s.default.B_INNER_DEBUG&&ULSDK.console.log("ULStatisManager.tryUploadToServer"),s.default.B_INNER_DEBUG&&ULSDK.console.log("  url:",c),s.default.B_INNER_DEBUG&&ULSDK.console.log("  postData:",u),r.default.httpPost({url:c,postData:u,timeoutMillisecond:l.i_net_timeout,success:function(o){s.default.B_INNER_DEBUG&&ULSDK.console.log("  \u7edf\u8ba1\u4e0a\u62a5\u6210\u529f!"),e.cacheItems.splice(0,t),e.saveRecord(),e.bUploading=!1},fail:function(t){s.default.B_INNER_DEBUG&&ULSDK.console.log("  \u7edf\u8ba1\u4e0a\u62a5\u9519\u8bef!",t),e.bUploading=!1}})}}}},e.prototype.uploadToServerRightNow=function(e,t){var o=i.default.getConfig(),n=o.s_sdk_megadata_url;if(o.i_sdk_megadata_mode){if(this.postMegadataTestMode){n=o.s_sdk_megadata_test_url;var a=this.megadataId+"-";e=e.replace(a,"1-"),ULSDK.console.log("ULStatisManager.uploadToServerRightNow postMegadataTestMode \u5df2\u6253\u5f00 typeid:",e)}var l={typeid:e,updata:t},c=[];if(c.push(l),o.i_sdk_megadata_encrypt)r.default.httpPostEncryption({url:n,postString:JSON.stringify(c),timeoutMillisecond:o.i_net_timeout,success:function(e){s.default.B_INNER_DEBUG&&console.log("  \u7edf\u8ba1\u4e0a\u62a5\u6210\u529f!")},fail:function(e){s.default.B_INNER_DEBUG&&console.log("  \u7edf\u8ba1\u4e0a\u62a5\u9519\u8bef!",e)}});else{var u="updata="+JSON.stringify(c);s.default.B_INNER_DEBUG&&ULSDK.console.log("ULStatisManager.uploadToServerRightNow"),s.default.B_INNER_DEBUG&&ULSDK.console.log("  url:",n),s.default.B_INNER_DEBUG&&ULSDK.console.log("  postData:",u),r.default.httpPost({url:n,postData:u,timeoutMillisecond:o.i_net_timeout,success:function(e){s.default.B_INNER_DEBUG&&ULSDK.console.log("  \u7edf\u8ba1\u4e0a\u62a5\u6210\u529f!")},fail:function(e){s.default.B_INNER_DEBUG&&ULSDK.console.log("  \u7edf\u8ba1\u4e0a\u62a5\u9519\u8bef!",e)}})}}else ULSDK.console.log("ULStatisManager.uploadToServerRightNow !i_sdk_megadata_mode \u5173\u95ed\u7edf\u8ba1\u529f\u80fd")},e.prototype.genPointEventLog=function(){var e=this.pointEventLog,t=[],o=[];r.default.forEachMap(e,function(e,t){var n=parseInt(e);o.push({eventId:n,v:t})}),o=r.default.sortArrayByField(o,"eventId");for(var n=function(e){var n=o[e],a=[];r.default.forEachMap(n.v,function(e,t){var o=parseInt(e);a.push({paramId:o,count:t})}),a=r.default.sortArrayByField(a,"paramId");for(var i=0;i<a.length;i++){var s=a[i];t.push(r.default.format("%d-%d: %d",n.eventId,s.paramId,s.count))}},a=0;a<o.length;a++)n(a);return t},e.prototype.getCommonEventLog=function(){var e=[],t=[],o=this.commonEventLog;ULSDK.console.log("ULStatisManager.getCommonEventLog rawLog:",o),r.default.forEachMap(o,function(e,o){t.push(e)}),t.sort();for(var n=0;n<t.length;n++){var a=t[n];e.push(r.default.format("%s: %d",a,o[a]))}return e},e.prototype.getLevelStartLog=function(){var e=[],t=[],o=this.levelStartLog;ULSDK.console.log("ULStatisManager.getLevelStartLog rawLog:",o),r.default.forEachMap(o,function(e,o){t.push(e)}),t.sort();for(var n=0;n<t.length;n++){var a=t[n];e.push(r.default.format("%s: %d",a,o[a]))}return e},e.prototype.getLevelCompletetLog=function(){var e=[],t=[],o=this.levelCompletetLog;ULSDK.console.log("ULStatisManager.getLevelCompletetLog rawLog:",o),r.default.forEachMap(o,function(e,o){t.push(e)}),t.sort();for(var n=0;n<t.length;n++){var a=t[n];e.push(r.default.format("%s: %d   \u65f6\u957f\uff1a%d",a,o[a].count,o[a].playTime))}return e},e.prototype.getVideoPointLog=function(){var e=[],t=[],o=this.videoPointLog;ULSDK.console.log("ULStatisManager.getVideoPointLog rawLog:",o),r.default.forEachMap(o,function(e,o){t.push(e)}),t.sort();for(var n=0;n<t.length;n++){var a=t[n];e.push(r.default.format("%s: %d",a,o[a]))}return e},e.prototype.getBuyActionLog=function(){var e=[],t=[],o=this.buyActionLog;ULSDK.console.log("ULStatisManager.getBuyActionLog rawLog:",o),r.default.forEachMap(o,function(e,o){t.push(e)}),t.sort();for(var n=0;n<t.length;n++){var a=t[n];e.push(r.default.format("%s: %d",a,o[a]))}return e},e.prototype.getCoinChangeLog=function(){var e=[],t=[],o=this.coinChangeLog;ULSDK.console.log("ULStatisManager.coinChangeLog rawLog:",o),r.default.forEachMap(o,function(e,o){t.push(e)}),t.sort();for(var n=0;n<t.length;n++){var a=t[n];e.push(r.default.format("%s  \u6b21\u6570\uff1a%d   \u8d27\u5e01\u6570\u91cf\uff1a%d",a,o[a].count,o[a].changeCount))}return e},e.prototype.isReady=function(){return r.default.getObjSize(this.gameStartDataPreparationFlags)<=0},e.prototype.getPreparationFlags=function(){var e=[];return r.default.forEachMap(this.gameStartDataPreparationFlags,function(t,o){e.push(t)}),e},e.prototype.addPreparationFlag=function(e){this.gameStartDataPreparationFlags[e]=!0},e.prototype.removePreparationFlag=function(e){delete this.gameStartDataPreparationFlags[e]},e.prototype.setGameStartSourceMsg=function(e){this.gameStartSourceMsg=e},e.prototype.reportGameStart=function(){var e=a.default.getInstance().channelInfo,t=i.default.getConfig(),o=r.default.format("%s-%s",this.megadataId,s.default.STATIS_TYPE_BASE_INFO),n=[];n.push(this.gameStartTimeFormattedStr),n.push(this.channelInfoUuid),n.push(""),n.push(""),n.push(""),n.push(t.s_game_name),n.push(t.s_sdk_cop_game_id),n.push(e.appName),n.push(t.s_sdk_cop_channel_id),n.push(t.s_sdk_cop_version),n.push(e.osVersionMessage||""),n.push("gameStart"),n.push(""),n.push(t.s_sdk_version),n.push(e.equipmentModel||""),n.push(this.gameStartSourceMsg),n.push(e.platformVersionMessage||""),this._report(o,n)},e.prototype.reportPayRequest=function(){this.reportPayResult("","","requestPay")},e.prototype.reportPaySuccess=function(e,t){var o=t||0,n=r.default.format("%.2f",o/100);this.reportPayResult(e,n,"success")},e.prototype.reportPayCancel=function(e,t){var o=t||0,n=r.default.format("%.2f",o/100);this.reportPayResult(e,n,"cancel")},e.prototype.reportPayFail=function(e,t){var o=t||0,n=r.default.format("%.2f",o/100);this.reportPayResult(e,n,"failed")},e.prototype.reportPayResult=function(e,t,o){var n=a.default.getInstance().channelInfo,l=i.default.getConfig(),c=r.default.format("%s-%s",this.megadataId,s.default.STATIS_TYPE_PAY_INFO),u=[];u.push(r.default.formatDate(new Date,"yyyy-MM-dd HH:mm:ss")),u.push(this.channelInfoUuid),u.push(""),u.push(n.channelName),u.push(e||""),u.push(t||""),u.push(o||""),u.push(l.s_sdk_cop_version),u.push(l.s_sdk_version),this._report(c,u)},e.prototype.reportAdvBranchRequest=function(e,t,o){e.statisChannelName=t,e.statisSdkAdvId=o,this.reportAdvInfo(t,e.showAdvType,"branchAdvRequest","",e.advGroupId,e.advId,e.tag,"",o,"")},e.prototype.reportAdvTotalRequest=function(e){this.reportAdvInfo("",e.advType,"totalAdvRequest","",e.advGroupId,e.advId,e.tag,"","","")},e.prototype.reportAdvSuccess=function(e,t){e.statisNativeAdTitle=t,this.reportAdvInfo(e.statisChannelName,e.showAdvType,"success","",e.advGroupId,e.advId,e.tag,e.statisNativeAdTitle,e.statisSdkAdvId,"")},e.prototype.reportAdvClicked=function(e){this.reportAdvInfo(e.statisChannelName,e.showAdvType,"clicked","",e.advGroupId,e.advId,e.tag,e.statisNativeAdTitle,e.statisSdkAdvId,"")},e.prototype.reportAdvPlayStart=function(e){this.reportAdvInfo(e.statisChannelName,e.showAdvType,"playStart","",e.advGroupId,e.advId,e.tag,e.statisNativeAdTitle,e.statisSdkAdvId,"")},e.prototype.reportAdvPlayCompletion=function(e){this.reportAdvInfo(e.statisChannelName,e.showAdvType,"playCompletion","",e.advGroupId,e.advId,e.tag,e.statisNativeAdTitle,e.statisSdkAdvId,"")},e.prototype.reportAdvLoadAdvRequest=function(e){this.reportAdvInfo(e.statisChannelName,e.showAdvType,"loadAdvRequest","",e.advGroupId,e.advId,e.tag,e.statisNativeAdTitle,e.statisSdkAdvId,"")},e.prototype.reportAdvLoadAdvSuccess=function(e){this.reportAdvInfo(e.statisChannelName,e.showAdvType,"loadAdvSuccess","",e.advGroupId,e.advId,e.tag,e.statisNativeAdTitle,e.statisSdkAdvId,"")},e.prototype.reportAdvLoadAdvFailed=function(e,t){this.reportAdvInfo(e.statisChannelName,e.showAdvType,"loadAdvFailed",t,e.advGroupId,e.advId,e.tag,e.statisNativeAdTitle,e.statisSdkAdvId,"")},e.prototype.reportAdvFail=function(e,t){this.reportAdvInfo(e.statisChannelName,e.showAdvType,"failed",t,e.advGroupId,e.advId,e.tag,e.statisNativeAdTitle,e.statisSdkAdvId,"")},e.prototype.reportAdvClose=function(e,t){this.reportAdvInfo(e.statisChannelName,e.showAdvType,"hide","",e.advGroupId,e.advId,e.tag,e.statisNativeAdTitle,e.statisSdkAdvId,t)},e.prototype.reportAdvInfo=function(e,t,o,n,l,c,u,d,p,h){a.default.getInstance().channelInfo;var f=i.default.getConfig(),g=r.default.format("%s-%s",this.megadataId,s.default.STATIS_TYPE_ADV_INFO),m=[];d&&d.length>6&&(d=d.substr(0,6)),m.push(r.default.formatDate(new Date,"yyyy-MM-dd HH:mm:ss")),m.push(this.channelInfoUuid),m.push(""),m.push(e||""),m.push(t||""),m.push(o||""),m.push(n||""),m.push(f.s_sdk_cop_version),m.push(f.s_sdk_version),m.push(l||""),m.push(c||""),m.push(u||""),m.push(d||""),m.push(p||""),m.push(h||""),ULSDK.console.log("reportAdvInfo result:",o),"hide"==o?this.uploadToServerRightNow(g,m):this._report(g,m)},e.prototype.reportCopSuccess=function(e){this.reportCopResult("success","",e)},e.prototype.reportCopFail=function(e){this.reportCopResult("filed",e,"")},e.prototype.reportCopResult=function(e,t,o){a.default.getInstance().channelInfo;var n=i.default.getConfig(),l=r.default.format("%s-%s",this.megadataId,s.default.STATIS_TYPE_COP_REQUEST),c=[];c.push(r.default.formatDate(new Date,"yyyy-MM-dd HH:mm:ss")),c.push(this.channelInfoUuid),c.push(""),c.push("coprequest"),c.push(e||""),c.push(n.s_sdk_cop_version),c.push(n.s_sdk_version),c.push(t||""),c.push(""),this._report(l,c)},e.prototype.reportUserEvent=function(e){var t=a.default.getInstance().channelInfo,o=i.default.getConfig(),n=r.default.format("%s-%s",this.megadataId,s.default.STATIS_TYPE_USER_EVENT),l=[];l.push(r.default.formatDate(new Date,"yyyy-MM-dd HH:mm:ss")),l.push(this.channelInfoUuid),l.push("");for(var c=0;c<e.length;c++){var u=e[c];l.push(u)}l.push(o.s_sdk_cop_version),l.push(o.s_sdk_version),l.push(t.channelName),this._report(n,l)},e.prototype.reportUserActionEvent=function(e,t){var o=a.default.getInstance().channelInfo,n=i.default.getConfig(),l=[0,1,2,5,6,7],c=[0,1,2,11,12,13,14],u=[0,1,2,7,8,9],d=[0,1,2,6,7,8],p=[0,1,2,6,7,8],h=[0,1,2,6,7,8],f=[0,1,2,5,6,7],g=[r.default.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"),this.channelInfoUuid,"",n.s_sdk_cop_version,n.s_sdk_version,o.copChannelId],m=[];if(t==r.default.format("%s-%s",n.s_sdk_megadata_server_type_id,s.default.STATIS_TYPE_COMMON_EVENT)){m=this.rebuildData(h,g,e);var _=e[0]+"-"+e[1];this.commonEventLog[_]=this.commonEventLog[_]?this.commonEventLog[_]+1:1}else if(t==r.default.format("%s-%s",n.s_sdk_megadata_server_type_id,s.default.STATIS_TYPE_LEVEL_START_EVENT)){m=this.rebuildData(l,g,e);_=e[0];this.levelStartLog[_]=this.levelStartLog[_]?this.levelStartLog[_]+1:1}else if(t==r.default.format("%s-%s",n.s_sdk_megadata_server_type_id,s.default.STATIS_TYPE_LEVEL_COMPLETE_EVENT)){_=e[0]+"-"+e[1];this.levelCompletetLog[_]||(this.levelCompletetLog[_]={count:0,playTime:0}),this.levelCompletetLog[_].count=this.levelCompletetLog[_].count?this.levelCompletetLog[_].count+1:1,this.levelCompletetLog[_].playTime=this.levelCompletetLog[_].playTime?this.levelCompletetLog[_].playTime+parseInt(e[e.length-1]):parseInt(e[e.length-1]);var v=e.pop();g.splice(3,0,v),m=this.rebuildData(c,g,e)}else if(t==r.default.format("%s-%s",n.s_sdk_megadata_server_type_id,s.default.STATIS_TYPE_VIDEO_POINT_EVENT)){m=this.rebuildData(f,g,e);_=e[0]+"-"+e[1];this.videoPointLog[_]=this.videoPointLog[_]?this.videoPointLog[_]+1:1}else if(t==r.default.format("%s-%s",n.s_sdk_megadata_server_type_id,s.default.STATIS_TYPE_BUY_ACTION)){m=this.rebuildData(p,g,e);_=e[0]+"-"+e[1]+"-"+e[2];this.buyActionLog[_]=this.buyActionLog[_]?this.buyActionLog[_]+1:1}else if(t==r.default.format("%s-%s",n.s_sdk_megadata_server_type_id,s.default.STATIS_TYPE_COIN_CHANGE_EVENT)){m=this.rebuildData(u,g,e);_=e[0]+"-"+e[1]+"-"+e[3];this.coinChangeLog[_]||(this.coinChangeLog[_]={count:0,changeCount:0}),this.coinChangeLog[_].count=this.coinChangeLog[_].count?this.coinChangeLog[_].count+1:1,this.coinChangeLog[_].changeCount=this.coinChangeLog[_].changeCount?this.coinChangeLog[_].changeCount+parseInt(e[2]):parseInt(e[2])}else t==r.default.format("%s-%s",n.s_sdk_megadata_server_type_id,s.default.STATIS_TYPE_ITEM_BUY)&&(m=this.rebuildData(d,g,e));this._report(t,m)},e.prototype.rebuildData=function(e,t,o){for(var n=r.default.clone(e),a=r.default.clone(t),i=r.default.clone(o),s=[];a.length||i.length;){n[0]==s.length?(s.push(a.shift()),n.shift()):i.length?s.push(i.shift()):s.push("")}return s},e.prototype.reportOnlineTime=function(e){a.default.getInstance().channelInfo;var t=i.default.getConfig(),o=r.default.format("%s-%s",this.megadataId,s.default.STATIS_TYPE_ONLINE_TIME),n=[];n.push(r.default.formatDate(new Date,"yyyy-MM-dd HH:mm:ss")),n.push(this.channelInfoUuid),n.push(""),n.push(this.gameStartTimeFormattedStr||""),n.push(e.toString()||"0"),n.push(t.s_sdk_cop_version),n.push(t.s_sdk_version),this.uploadToServerRightNow(o,n)},e.prototype.reportShareSuccess=function(e){var t=["openShare","success",e||0].join("_"),o=i.default.getConfig(),n=o.t_sdk_common_event_ids||{};(o.s_sdk_megadata_url||"").indexOf("megadata.ultralisk.cn")>=0?c.default.getInstance().dispatch(s.default.CMD_MEGADATA_SERVER,["commonEvent",t]):c.default.getInstance().dispatch(s.default.CMD_POST_MEGADATA,["commonEvent",n.open_share||"100",1,e||0])},e.prototype.reportShareFail=function(e){var t=["openShare","fail",e||0].join("_"),o=i.default.getConfig(),n=o.t_sdk_common_event_ids||{};(o.s_sdk_megadata_url||"").indexOf("megadata.ultralisk.cn")>=0?c.default.getInstance().dispatch(s.default.CMD_MEGADATA_SERVER,["commonEvent",t]):c.default.getInstance().dispatch(s.default.CMD_POST_MEGADATA,["commonEvent",n.open_share||"100",0,e||0])},e.prototype.reportAppShare=function(e){var t=["openShare","appShare",e||0].join("_"),o=i.default.getConfig(),n=o.t_sdk_common_event_ids||{};(o.s_sdk_megadata_url||"").indexOf("megadata.ultralisk.cn")>=0?c.default.getInstance().dispatch(s.default.CMD_MEGADATA_SERVER,["commonEvent",t]):c.default.getInstance().dispatch(s.default.CMD_POST_MEGADATA,["commonEvent",n.open_share||"100",2,e||0])},e.prototype.reportShareClick=function(e){var t=["clickShare",e||""].join("_"),o=i.default.getConfig(),n=o.t_sdk_common_event_ids||{};(o.s_sdk_megadata_url||"").indexOf("megadata.ultralisk.cn")>=0?c.default.getInstance().dispatch(s.default.CMD_MEGADATA_SERVER,["commonEvent",t]):c.default.getInstance().dispatch(s.default.CMD_POST_MEGADATA,["commonEvent",n.click_share||"101",e||"",""])},e.prototype.reportAddSubcrible=function(e){var t=["addSubscrible",e||""].join("_"),o=i.default.getConfig(),n=o.t_sdk_common_event_ids||{};(o.s_sdk_megadata_url||"").indexOf("megadata.ultralisk.cn")>=0?c.default.getInstance().dispatch(s.default.CMD_MEGADATA_SERVER,["commonEvent",t]):c.default.getInstance().dispatch(s.default.CMD_POST_MEGADATA,["commonEvent",n.add_subscrible||"102",e||"",""])},e.prototype.reportSubcribleClick=function(e){var t=["clickSubscrible",e||""].join("_"),o=i.default.getConfig(),n=o.t_sdk_common_event_ids||{};(o.s_sdk_megadata_url||"").indexOf("megadata.ultralisk.cn")>=0?c.default.getInstance().dispatch(s.default.CMD_MEGADATA_SERVER,["commonEvent",t]):c.default.getInstance().dispatch(s.default.CMD_POST_MEGADATA,["commonEvent",n.click_subscrible||"103",e||"",""])},e.prototype.reportClickMoreGameIcon=function(e,t){var o=i.default.getConfig(),n=o.t_sdk_common_event_ids||{},r=n.click_more_game_icon_list||"106";"single"==e?r=n.click_more_game_icon_single||"104":"reward"==e&&(r=n.click_more_game_icon_reward||"105"),(o.s_sdk_megadata_url||"").indexOf("megadata.ultralisk.cn")>=0?this.reportPointEvent(r,parseInt(t)):c.default.getInstance().dispatch(s.default.CMD_POST_MEGADATA,["commonEvent",r,t||"",""])},e.prototype.reportClickMoreGameButtonToChannelSystem=function(){var e=i.default.getConfig(),t=(e.t_sdk_common_event_ids||{}).click_more_game_channel_system_button||"108";(e.s_sdk_megadata_url||"").indexOf("megadata.ultralisk.cn")>=0?this.reportPointEvent(t,0):c.default.getInstance().dispatch(s.default.CMD_POST_MEGADATA,["commonEvent",t,"",""])},e.prototype.reportOpenCdk=function(e){var t=["openCdk",e].join("_"),o=i.default.getConfig(),n=o.t_sdk_common_event_ids||{},r=o.s_sdk_megadata_url||"";ULSDK.console.log("ULStatisManager.reportOpenCdk code:",e),r.indexOf("megadata.ultralisk.cn")>=0?c.default.getInstance().dispatch(s.default.CMD_MEGADATA_SERVER,["commonEvent",t]):c.default.getInstance().dispatch(s.default.CMD_POST_MEGADATA,["commonEvent",n.open_cdk||"107",e||0,""])},e.prototype.reportJumpGame=function(e,t,o,n,r){for(var a=i.default.getConfig(),s=(a.s_sdk_jump_game_statis_game_indexes||"").split(";"),l={},c=0;c<s.length;c++)l[s[c]]=!0;if(l[r.split("_")[0]]){var u=a.s_sdk_megadata_server_jump_game_type_id,d=[];d.push(e),d.push(t),d.push(o),d.push(n),d.push(r),this._report(u,d)}else ULSDK.console.log("ULStatisManager.reportJumpGame \u5f53\u524d\u8df3\u8f6c\u7684\u6e38\u620f\u6570\u636e\u4e0a\u62a5\u6ca1\u5f00,targetIconId:",r)},e.prototype._checkPointEventSwitch=function(e){if(!this.pointEventCategoryId_2_enabled){for(var t=i.default.getConfig().s_sdk_megadata_point_event_open_category_ids.split(";"),o={},n=0;n<t.length;n++){o[t[n]]=!0}this.pointEventCategoryId_2_enabled=o}var r=Math.floor(e/1e3);return!!this.pointEventCategoryId_2_enabled[r]},e.prototype.reportPointEvent=function(e,t){if(e=parseInt(e)||0,isNaN(e)&&(e=0),e=r.default.clampf(e,0,65535),t=parseInt(t)||0,isNaN(t)&&(t=0),t=r.default.clampf(t,0,65535),s.default.B_INNER_DEBUG&&ULSDK.console.log("ULStatisManager.reportPointEvent",e,t),this._checkPointEventSwitch(e)){var o="",n=a.default.getInstance().channelInfo._sdkUserId;s.default.B_INNER_DEBUG&&ULSDK.console.log(r.default.format("  sdkUserId = [%s]",n));/(\d+)_(.*)_(\d+)/.test(n)?(o=RegExp.$2)&&22==o.length?o=o.substr(2,o.length-2):(s.default.B_INNER_DEBUG&&ULSDK.console.log("  \u6838\u5fc3\u957f\u5ea6\u4e0d\u5339\u914d\uff0c\u76f4\u63a5\u4f7f\u7528sdkUserId"),o=n):(s.default.B_INNER_DEBUG&&ULSDK.console.log("  userId\u89c4\u5219\u4e0d\u5339\u914d\uff0c\u76f4\u63a5\u4f7f\u7528sdkUserId"),o=n),s.default.B_INNER_DEBUG&&ULSDK.console.log(r.default.format("  shortUserId = [%s]",o));a.default.getInstance().channelInfo;var l=i.default.getConfig(),c=r.default.format("%s-%s",this.megadataId,s.default.STATIS_TYPE_POINT_EVENT),u=[];u.push(o),u.push(l.s_sdk_cop_channel_id),u.push(e.toString()),u.push(t.toString()),this._report(c,u);var d=this.pointEventLog,p=d[e];p||(p={},d[e]=p),p[t]=(p[t]||0)+1,s.default.B_INNER_DEBUG&&ULSDK.console.log("  log",d)}else s.default.B_INNER_DEBUG&&ULSDK.console.log("  \u6253\u70b9\u7edf\u8ba1\u4e0a\u62a5\u672a\u5f00\u542f\uff1a",i.default.getConfig().s_sdk_megadata_point_event_open_category_ids)},e.prototype.onCmdSdkOnGameStart=function(e){var t=this;if(this.gameStartTimeFormattedStr=r.default.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"),this.gameLastResumeTime=r.default.time(),s.default.B_INNER_DEBUG&&ULSDK.console.log("ULStatiManager.onCmdSdkOnGameStart",this.gameStartTimeFormattedStr,this.gameLastResumeTime),this.isReady())return this.reportGameStart(),void this.tryUploadToServer();var o=this.getPreparationFlags();ULSDK.console.log("ULStatiManager.onCmdSdkOnGameStart \u4e0a\u62a5\u6570\u636e\u6ca1\u6709\u51c6\u5907\u597d,flags:",o.join(","));var n=i.default.getConfig().i_game_start_ready_timeout/1e3;l.default.callLoop(1/60,function(e){if(e.usedTime>=n){e.stop();var o=t.getPreparationFlags();return ULSDK.console.log("ULStatiManager.onCmdSdkOnGameStart \u7b49\u5f85\u8d85\u65f6\uff01\u76f4\u63a5\u89e6\u53d1reportGameStart flags:",o.join(",")),t.reportGameStart(),void t.tryUploadToServer()}if(t.isReady())return e.stop(),ULSDK.console.log("ULStatiManager.onCmdSdkOnGameStart \u51c6\u5907\u5b8c\u6bd5\uff01\u89e6\u53d1reportGameStart"),t.reportGameStart(),void t.tryUploadToServer()})},e.prototype.onCmdSdkOnGamePause=function(e){if(this.gameLastResumeTime){var t=r.default.time()-this.gameLastResumeTime;if(s.default.B_INNER_DEBUG&&ULSDK.console.log("ULStatiManager.onCmdSdkOnGamePause",t),!(t<=5||t>86400)){this.gameLastResumeTime=r.default.time(),this.reportOnlineTime(Math.floor(t));var o=i.default.getConfig();c.default.getInstance().dispatch(s.default.CMD_SDK_CHANNEL_MEGADATA_POST,[o.s_sdk_miniplay_user_play_game_time_event_id,Math.floor(t)])}}else ULSDK.console.warn("ULStatiManager.onCmdSdkOnGamePause gameLastResumeTime not found! \u65e0\u6cd5\u4e0a\u62a5\u5728\u7ebf\u65f6\u95f4")},e.prototype.onCmdSdkOnGameResume=function(e){this.gameLastResumeTime=r.default.time(),s.default.B_INNER_DEBUG&&ULSDK.console.log("ULStatiManager.onCmdSdkOnGameResume",this.gameLastResumeTime)},e.prototype.onCmdSdkOnCopChanged=function(e){this.pointEventCategoryId_2_enabled=null},e.prototype.onCmdSdkCollectionModuleCheckerConfig=function(e){var t=this,o=e.getReturnValue()||[];o.push({type:"newLine"});var n=["\u6b63\u5f0f\u6a21\u5f0f","\u6d4b\u8bd5\u6a21\u5f0f"],r="\u5f53\u524d\u6570\u636e\u4e0a\u4f20\u6a21\u5f0f:"+n[this.postMegadataTestMode];o.push({type:"label",text:r,name:"labelPostDataMode"}),o.push({type:"button",text:"\u5207\u6362\u6570\u636e\u4e0a\u4f20\u6a21\u5f0f..",onClick:function(){var e=a.default.getInstance().moduleCheckerManager.getItemText("labelPostTestModeUserId"),o=[];o.push({text:"\u6d4b\u8bd5\u6a21\u5f0f ( \u7528\u6237id:"+e+")",value:1}),o.push({text:"\u6b63\u5f0f\u6a21\u5f0f",value:0});a.default.getInstance().moduleCheckerManager.showPickerDialog("\u5207\u6362\u6570\u636e\u4e0a\u4f20\u6a21\u5f0f:",o,function(o){var r="\u5f53\u524d\u6570\u636e\u4e0a\u4f20\u6a21\u5f0f:"+n[t.postMegadataTestMode];if(o){if(e.length<1)return void a.default.getInstance().moduleCheckerManager.alertPrompt("\u63d0\u793a","\u8bf7\u8bbe\u7f6e\u6d4b\u8bd5\u7528\u6237id","\u597d\u7684");t.postMegadataTestUserId=e,a.default.getInstance().moduleCheckerManager.showMsgTip("\u5df2\u5f00\u542f\u6d4b\u8bd5\u6a21\u5f0f")}else t.postMegadataTestUserId=null,a.default.getInstance().moduleCheckerManager.showMsgTip("\u6d4b\u8bd5\u6a21\u5f0f\u5df2\u5173\u95ed");t.setPostMegadataMode(o),a.default.getInstance().moduleCheckerManager.setItemText("labelPostDataMode",r)})}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u6d4b\u8bd5\u7528\u6237id"}),o.push({type:"inputBox",text:this.postMegadataTestUserId,name:"labelPostTestModeUserId"}),o.push({type:"newLine"}),o.push({type:"label",text:"\u6e05\u7406\u6e38\u620f\u5b58\u6863:"}),o.push({type:"newLine"}),o.push({type:"button",text:"\u6e05\u7406\u6e38\u620f\u5b58\u6863",onClick:function(){a.default.getInstance().response(s.default.CMD_CLEAN_UP_GAME_ARCHIVE,{})}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u8df3\u8fc7\u65b0\u624b\u5f15\u5bfc:"}),o.push({type:"newLine"}),o.push({type:"button",text:"\u8df3\u8fc7\u65b0\u624b\u5f15\u5bfc",onClick:function(){a.default.getInstance().response(s.default.CMD_JUMP_NEW_USER_GUIDE,{})}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u662f\u5426\u663e\u793a\u5ba2\u6237\u7aef\u6253\u70b9\u4fe1\u606f\u754c\u9762\u5f00\u5173:"}),o.push({type:"newLine"}),o.push({type:"button",text:"\u6253\u5f00",onClick:function(){a.default.getInstance().response(s.default.CMD_SHOW_POINT_DEBUG_INFO,{state:1})}}),o.push({type:"button",text:"\u5173\u95ed",onClick:function(){a.default.getInstance().response(s.default.CMD_SHOW_POINT_DEBUG_INFO,{state:0})}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u6253\u70b9\u7edf\u8ba1\u8bb0\u5f55:"}),o.push({type:"newLine"}),o.push({type:"button",text:"\u70b9\u51fb\u67e5\u770b..",onClick:function(){for(var e=t.genPointEventLog(),o=[],n=0;n<e.length;n++){var r=e[n];o.push({text:r,value:r})}a.default.getInstance().moduleCheckerManager.showPickerDialog("\u6253\u70b9\u7edf\u8ba1\u8bb0\u5f55(\u4e8b\u4ef6id-\u72b6\u6001\uff1a\u6b21\u6570)\uff1a",o,function(){},!0)}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u81ea\u5b9a\u4e49\u7edf\u8ba1\u8bb0\u5f55:"}),o.push({type:"newLine"}),o.push({type:"button",text:"\u70b9\u51fb\u67e5\u770b..",onClick:function(){for(var e=t.getCommonEventLog(),o=[],n=0;n<e.length;n++){var r=e[n];o.push({text:r,value:r})}a.default.getInstance().moduleCheckerManager.showPickerDialog("\u81ea\u5b9a\u4e49\u7edf\u8ba1\u8bb0\u5f55(\u4e8b\u4ef6id-\u72b6\u6001\uff1a\u6b21\u6570)\uff1a",o,function(){},!0)}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u5173\u5361\u5f00\u59cb\u7edf\u8ba1\u8bb0\u5f55:"}),o.push({type:"newLine"}),o.push({type:"button",text:"\u70b9\u51fb\u67e5\u770b..",onClick:function(){for(var e=t.getLevelStartLog(),o=[],n=0;n<e.length;n++){var r=e[n];o.push({text:r,value:r})}a.default.getInstance().moduleCheckerManager.showPickerDialog("\u5173\u5361\u5f00\u59cb\u7edf\u8ba1\u8bb0\u5f55(\u5173\u5361\u540d\uff1a\u6b21\u6570):",o,function(){},!0)}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u5173\u5361\u7ed3\u675f\u7edf\u8ba1\u8bb0\u5f55:"}),o.push({type:"newLine"}),o.push({type:"button",text:"\u70b9\u51fb\u67e5\u770b..",onClick:function(){for(var e=t.getLevelCompletetLog(),o=[],n=0;n<e.length;n++){var r=e[n];o.push({text:r,value:r})}a.default.getInstance().moduleCheckerManager.showPickerDialog("\u5173\u5361\u7ed3\u675f\u7edf\u8ba1\u8bb0\u5f55(\u5173\u5361\u540d-\u7ed3\u679c-\u6b21\u6570):",o,function(){},!0)}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u89c6\u9891\u57cb\u70b9\u8f6c\u5316\u7edf\u8ba1\u8bb0\u5f55:"}),o.push({type:"newLine"}),o.push({type:"button",text:"\u70b9\u51fb\u67e5\u770b..",onClick:function(){for(var e=t.getVideoPointLog(),o=[],n=0;n<e.length;n++){var r=e[n];o.push({text:r,value:r})}a.default.getInstance().moduleCheckerManager.showPickerDialog("\u89c6\u9891\u57cb\u70b9\u8f6c\u5316\u7edf\u8ba1\u8bb0\u5f55(\u89c6\u9891\u70b9-\u72b6\u6001\uff1a\u6b21\u6570)",o,function(){},!0)}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u5185\u8d2d\u884c\u4e3a\u7edf\u8ba1\u8bb0\u5f55:"}),o.push({type:"newLine"}),o.push({type:"button",text:"\u70b9\u51fb\u67e5\u770b..",onClick:function(){for(var e=t.getBuyActionLog(),o=[],n=0;n<e.length;n++){var r=e[n];o.push({text:r,value:r})}a.default.getInstance().moduleCheckerManager.showPickerDialog("\u5185\u8d2d\u884c\u4e3a\u7edf\u8ba1\u8bb0\u5f55(\u5f39\u51fa\u7406\u7531-\u5546\u54c1\u540d-\u7ed3\u679c)",o,function(){},!0)}}),o.push({type:"newLine"}),o.push({type:"label",text:"\u8d27\u5e01\u7edf\u8ba1\u8bb0\u5f55:"}),o.push({type:"newLine"}),o.push({type:"button",text:"\u70b9\u51fb\u67e5\u770b..",onClick:function(){for(var e=t.getCoinChangeLog(),o=[],n=0;n<e.length;n++){var r=e[n];o.push({text:r,value:r})}a.default.getInstance().moduleCheckerManager.showPickerDialog("\u8d27\u5e01\u7edf\u8ba1\u8bb0\u5f55(\u8d27\u5e01\u540d\u79f0-\u53d8\u5316\u7c7b\u578b-\u53d8\u5316\u539f\u56e0)",o,function(){},!0)}}),e.setReturnValue(o,!0)},e}();o.ULStatisManager=u,cc._RF.pop()},{"../ULConsts":"ULConsts","../events/ULEventDispatcher":"ULEventDispatcher","../utils/ULTimer":"ULTimer","../utils/ULTools":"ULTools","./ULConfig":"ULConfig","./ULSdkManager":"ULSdkManager","./ULStorageManager":"ULStorageManager"}],ULStorageManager:[function(e,t,o){"use strict";cc._RF.push(t,"e69954DnkxPSZgKNKJ2xXNb","ULStorageManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../events/ULEventDispatcher"),r=e("../ULConsts"),a=e("../utils/ULTools"),i=function(){function e(){this.cacheStorage={}}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.getStorage=function(e){var t=n.default.getInstance().dispatchWithReturn(r.default.CMD_SDK_GET_STORAGE,{key:e});return ULSDK.console.log(a.default.format("ULStorageManager.getStorage(%s) => [%s]",e,t)),null==t?t=this.cacheStorage[e]:this.cacheStorage[e]=t,t},e.prototype.setStorage=function(e,t){this.cacheStorage[e]=t,n.default.getInstance().dispatch(r.default.CMD_SDK_SET_STORAGE,{key:e,data:t})||ULSDK.console.warn("ULStorageManager.setStorage \u672a\u627e\u5230\u5b9e\u73b0\uff01")},e._instance=null,e}();o.default=i,cc._RF.pop()},{"../ULConsts":"ULConsts","../events/ULEventDispatcher":"ULEventDispatcher","../utils/ULTools":"ULTools"}],ULTimer:[function(e,t,o){"use strict";cc._RF.push(t,"485f7FD24tPPayt4Fi+90pf","ULTimer"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ULTools"),r=function(){function e(e,t,o){this._repeatCount=-1,this._span=1,this._callback=null,this._intervalId=null,this._count=0,this._beginTime=-1,this._usedTime=0,this._span=e,this._repeatCount=t,this._callback=o}return e.callLater=function(t,o){new e(t,1,o).start()},e.callLoop=function(t,o){new e(t,-1,o).start()},e.prototype._onSpan=function(){if(this._count++,this._usedTime=n.default.time()-this._beginTime,this._callback)try{this._callback(this)}catch(e){ULSDK.console.warn("\u8b66\u544a] ULTimer._onSpan callback has error",e)}this._repeatCount>=0&&this._count>=this._repeatCount&&this.stop()},e.prototype.isRunning=function(){return null!=this._intervalId},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"span",{get:function(){return this._span},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usedTime",{get:function(){return this._usedTime},enumerable:!0,configurable:!0}),e.prototype.start=function(){return this.stop(),this._callback?(this._beginTime=n.default.time(),this._count=0,this._intervalId=setInterval(this._onSpan.bind(this),1e3*this.span),this):(ULSDK.console.warn("\u8b66\u544a] ULTimer.start callback\u672a\u8bbe\u7f6e\uff01"),this)},e.prototype.stop=function(){return null!=this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),this},e}();o.default=r,cc._RF.pop()},{"./ULTools":"ULTools"}],ULTools:[function(e,t,o){"use strict";cc._RF.push(t,"bba6fuZu5hD04nFaI/k7QjK","ULTools"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../core/ULConfig"),r=e("./ULTimer"),a=e("../ULConsts"),i=e("../core/ULSdkManager"),s=e("../core/ULStorageManager"),l=e("./ULWebSocket"),c=function(){function e(){}return e.time=function(){return(new Date).getTime()/1e3},e.timeInDay=function(){var e=this.time(),t=new Date(1e3*e);return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),e-t.getTime()/1e3},e.isOneDay=function(e,t){var o=new Date(1e3*e),n=new Date(1e3*t);return o.getFullYear()==n.getFullYear()&&o.getMonth()==n.getMonth()&&o.getDate()==n.getDate()},e.isOneMonth=function(e,t){var o=new Date(1e3*e),n=new Date(1e3*t);return o.getFullYear()==n.getFullYear()&&o.getMonth()==n.getMonth()},e.getObjSize=function(e){if(!e)return 0;if(Array.isArray(e))return e.length;var t=0;return this.forEachMap(e,function(e,o){t++}),t},e.random=function(e,t){return null==e&&null==t?Math.random():null==t?Math.floor(Math.random()*e+1):Math.floor(Math.random()*(t-e+1)+e)},e.scaleInRange=function(e,t,o,n,r){return t<o?(e<t&&(e=t),e>o&&(e=o)):(e<o&&(e=o),e>t&&(e=t)),(e-t)/(o-t)*(r-n)+n},e.clampf=function(e,t,o){return e<t?t:e>o?o:e},e.calcWheelTarget=function(e,t){for(var o=0,n=0;n<e.length;n++){var r=e[n],a=parseInt(r[t]);if(isNaN(a))return ULSDK.console.warn(this.format("Tools.calcWheelTarget weight field not found! key=[%s]",t)),null;o+=a}var i=this.random(o);for(n=0;n<e.length;n++){r=e[n];if(i<=(a=parseInt(r[t])))return r;i-=a}return null},e.sortArrayByField=function(e,t){t="string"==typeof t?[t]:t;var o=[];for(var n in t){if((s=t[n])&&""!=s)if("-"===s.substring(0,1)){var r=s.substring(1,s.length);r&&""!=r&&o.push([r,!0])}else o.push([s,!1])}for(var a=[],i=0;i<e.length;i++){var s=e[i];a.push(s)}return a.sort(function(e,t){var n=0;for(var r in o){var a=o[r],i=a[0],s=a[1],l=e[i],c=t[i];if(null!=l&&0!=(n=s?c-l:l-c))return n}return n}),a},e.bubbleSort=function(e,t){for(var o=e.length,n=0;n<o;n++)for(var r=0;r<o-1-n;r++){if(t(e[r],e[r+1])>0){var a=e[r+1];e[r+1]=e[r],e[r]=a}}return e},e.forEachMap=function(e,t){if(e)for(var o=Object.keys(e),n=0;n<o.length;n++){var r=o[n],a=e[r];if(null!=a&&t(r,a))break}},e.formatTime=function(e,t){var o=Math.floor(e/3600),n=Math.floor(e/60)%60,r=Math.ceil(e)%60;return t.match("%h")&&(t=t.replace("%h",o.toString())),t.match("%H")&&(t=t.replace("%H",this.format("%02d",o))),t.match("%m")&&(t=t.replace("%m",n.toString())),t.match("%M")&&(t=t.replace("%M",this.format("%02d",n))),t.match("%s")&&(t=t.replace("%s",r.toString())),t.match("%S")&&(t=t.replace("%S",this.format("%02d",r))),t},e.formatDate=function(e,t){var o={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()},n=t;/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in o)new RegExp("("+r+")").test(n)&&(n=n.replace(RegExp.$1,1==RegExp.$1.length?o[r]:("00"+o[r]).substr((""+o[r]).length)));return n},e.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var o=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?o:3&o|8).toString(16)})},e.compressUuid=function(e){for(var t="0123456789abcdef".split(""),o={},n=0;n<t.length;n++)o[t[n]]=n;var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),a={};for(n=0;n<r.length;n++)a[r[n]]=n;var i=(e=e.replace(/-/g,"")).split(""),s=[];s.push(i[0]),s.push(i[1]);for(n=2;n<i.length;n+=3){var l=o[i[n]],c=o[i[n+1]],u=o[i[n+2]];s.push(r[l<<2|c>>2]),s.push(r[(3&c)<<4|u])}return s.join("")},e.decompressUuid=function(e){var t=e.split("");if(t.length<22)return e;for(var o="0123456789abcdef".split(""),n={},r=0;r<o.length;r++)n[o[r]]=r;var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),i={};for(r=0;r<a.length;r++)i[a[r]]=r;var s=[];s.push(t[0]),s.push(t[1]);for(r=2;r<t.length;r+=2){var l=i[t[r]],c=i[t[r+1]];s.push(o[l>>2]),s.push(o[(3&l)<<2|c>>4]),s.push(o[15&c])}return s.splice(8,0,"-"),s.splice(13,0,"-"),s.splice(18,0,"-"),s.splice(23,0,"-"),s.join("")},e.getType=function(e){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(e)]},e.clone=function(e){var t,o=this.getType(e);if(window.cc&&e instanceof window.cc.Node)return e;if("object"===o)t={};else{if("array"!==o)return e;t=[]}if("array"===o)for(var n=0,r=e.length;n<r;n++)t.push(this.clone(e[n]));else if("object"===o)for(var a in e)t[a]=this.clone(e[a]);return t},e.toArray=function(e){return Array.isArray(e)?e:[]},e.sumNumberArray=function(e){if(!Array.isArray(e))return 0;for(var t=0,o=0;o<e.length;o++){var n=e[o];isNaN(n)||(t+=n)}return t},e.getRandomValueInArray=function(e){return Array.isArray(e)?e[this.random(e.length)-1]:null},e._convert=function(e,t){e.sign=t?"":e.negative?"-":e.sign;var o=e.min-e.argument.length+1-e.sign.length,n=new Array(o<0?0:o).join(e.pad);return e.left?"0"==e.pad||t?e.sign+e.argument+n.replace(/0/g," "):e.sign+e.argument+n:"0"==e.pad||t?e.sign+n+e.argument:n+e.sign+e.argument},e.format=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0===arguments)return null;if(arguments.length<1)return null;if("string"!=typeof arguments[0])return null;if("undefined"==typeof RegExp)return null;for(var o=arguments[0],n=new RegExp(/(%([%]|(\-)?(\+|\x20)?(0)?(\d+)?(\.(\d)?)?([bcdfosxX])))/g),r=new Array,a=new Array,i=0,s=0,l=0,c=0,u="",d=null;d=n.exec(o);)d[9]&&(i+=1),s=c,l=n.lastIndex-d[0].length,a[a.length]=o.substring(s,l),c=n.lastIndex,r[r.length]={match:d[0],left:!!d[3],sign:d[4]||"",pad:d[5]||" ",min:d[6]||0,precision:d[8],code:d[9]||"%",negative:parseInt(arguments[i])<0,argument:String(arguments[i])};if(a[a.length]=o.substring(c),0==r.length)return o;if(arguments.length-1<i)return null;d=null;var p=null,h=null;for(h=0;h<r.length;h++)"%"==r[h].code?p="%":"b"==r[h].code?(r[h].argument=String(Math.abs(parseInt(r[h].argument)).toString(2)),p=this._convert(r[h],!0)):"c"==r[h].code?(r[h].argument=String(String.fromCharCode(Math.abs(parseInt(r[h].argument)))),p=this._convert(r[h],!0)):"d"==r[h].code?(r[h].argument=String(Math.abs(parseInt(r[h].argument))),p=this._convert(r[h])):"f"==r[h].code?(r[h].argument=String(Math.abs(parseFloat(r[h].argument)).toFixed(r[h].precision?r[h].precision:6)),p=this._convert(r[h])):"o"==r[h].code?(r[h].argument=String(Math.abs(parseInt(r[h].argument)).toString(8)),p=this._convert(r[h])):"s"==r[h].code?(r[h].argument=r[h].argument.substring(0,r[h].precision?r[h].precision:r[h].argument.length),p=this._convert(r[h],!0)):"x"==r[h].code?(r[h].argument=String(Math.abs(parseInt(r[h].argument)).toString(16)),p=this._convert(r[h])):"X"==r[h].code?(r[h].argument=String(Math.abs(parseInt(r[h].argument)).toString(16)),p=this._convert(r[h]).toUpperCase()):p=r[h].match,u+=a[h],u+=p;return u+=a[h]},e.httpGet=function(e){var t=new XMLHttpRequest,o=new r.default(e.timeoutMillisecond/1e3,1,function(o){if(t){var n=t;t=null,n.abort(),e.fail instanceof Function&&e.fail("timeout")}});t.onreadystatechange=function(n){if(t&&4==t.readyState)if(o.stop(),200==t.status){var r=t.responseText;e.success instanceof Function&&e.success(r)}else ULSDK.console.warn("ULTools.httpGet on error:",t.readyState,t.status),e.fail instanceof Function&&e.fail(t.status.toString())},t.ontimeout=function(o){if(t){var n=t;t=null,n.abort(),e.fail instanceof Function&&e.fail("timeout")}},t.onerror=function(o){if(t){var n=t;t=null,n.abort(),e.fail instanceof Function&&e.fail("on error :"+o)}},o.start(),t.open("get",e.url),t.send()},e.httpPost=function(e){e.contentType=e.contentType||"application/x-www-form-urlencoded;charset=utf-8";var t=new XMLHttpRequest,o=new r.default(e.timeoutMillisecond/1e3,1,function(o){if(t){var n=t;t=null,n.abort(),e.fail instanceof Function&&e.fail("timeout")}});t.onreadystatechange=function(n){if(t&&4==t.readyState)if(o.stop(),200==t.status){var r=t.responseText;e.success instanceof Function&&e.success(r)}else ULSDK.console.warn("ULTools.httpPost on error:",t.readyState,t.status),e.fail instanceof Function&&e.fail(t.status.toString())},t.ontimeout=function(o){if(t){var n=t;t=null,n.abort(),e.fail instanceof Function&&e.fail("timeout")}},t.onerror=function(o){if(t){var n=t;t=null,n.abort(),e.fail instanceof Function&&e.fail("on error :"+o)}},o.start(),t.open("post",e.url,!0),t.setRequestHeader("Content-Type",e.contentType),t.send(e.postData)},e.stringToByte=function(e){var t,o,n=new Array;t=e.length;for(var r=0;r<t;r++)(o=e.charCodeAt(r))>=65536&&o<=1114111?(n.push(o>>18&7|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(63&o|128)):o>=2048&&o<=65535?(n.push(o>>12&15|224),n.push(o>>6&63|128),n.push(63&o|128)):o>=128&&o<=2047?(n.push(o>>6&31|192),n.push(63&o|128)):n.push(255&o);return n},e.httpPostEncryption=function(e){var t=new XMLHttpRequest,o=new r.default(e.timeoutMillisecond/1e3,1,function(o){if(t){var n=t;t=null,n.abort(),e.fail instanceof Function&&e.fail("timeout")}});t.onreadystatechange=function(n){if(t&&4==t.readyState)if(o.stop(),200==t.status){var r=t.responseText;e.success instanceof Function&&e.success(r)}else console.warn("ULTools.httpPost on error:",t.readyState,t.status),e.fail instanceof Function&&e.fail(t.status.toString())},t.ontimeout=function(o){if(t){var n=t;t=null,n.abort(),e.fail instanceof Function&&e.fail("timeout")}},t.onerror=function(o){if(t){var n=t;t=null,n.abort(),e.fail instanceof Function&&e.fail("on error :"+o)}};for(var n=this.stringToByte(e.postString),a=n.length%127||127,i=new ArrayBuffer(n.length),s=new Uint8Array(i),l=0;l<n.length;l++)n[l]=n[l]^a,s[l]=n[l];o.start(),t.open("post",e.url,!0),t.setRequestHeader("isEncrypt","1"),t.send(i)},e.httpJsonp=function(t){if(!t||!t.url)throw new Error("\u53c2\u6570\u4e0d\u5408\u6cd5");var o=e.format("jsonp_%d",e.random(1e6));t.data.callback=o;var n=document.getElementsByTagName("head")[0],a=[];this.forEachMap(t.data,function(t,o){a.push(e.format("%s=%s",encodeURIComponent(t),encodeURIComponent(o)))});var i=a.join("&"),s=document.createElement("script");n.appendChild(s);var l=new r.default(t.timeoutMillisecond/1e3,1,function(e){window[o]&&(window[o]=null,n.removeChild(s),t.fail&&t.fail("timeout"))});window[o]=function(e){window[o]&&(n.removeChild(s),l.stop(),window[o]=null,t.success&&t.success(e))},s.src=t.url+"?"+i},e.loadJs=function(e,t,o){var n=document.createElement("script");n.type="text/javascript",n.addEventListener("load",function(e){t instanceof Function&&t()}),n.src=e,n.defer="defer",o&&(n.crossOrigin="anonymous"),document.getElementsByTagName("head")[0].appendChild(n)},e.getQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),o=window.location.search.substr(1).match(t);return null!=o?decodeURI(o[2]):null},e.createRandomString=function(e){e=e||32;for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz123456789",o=t.length,n="",r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*o));return n},e.createRandomUserId=function(){var e=this.generateUUID();return this.compressUuid(e)},e.createRandomOrderId=function(){return(new Date).getTime()+this.createRandomString(7)},e.compareVersion=function(e,t){for(var o=e.split("."),n=t.split("."),r=Math.max(o.length,n.length);o.length<r;)o.push("0");for(;n.length<r;)n.push("0");for(var a=0;a<r;a++){var i=parseInt(o[a]),s=parseInt(n[a]);if(i>s)return 1;if(i<s)return-1}return 0},e._hack_console_print_method=function(){var t=function(t,o){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];o.apply(void 0,n),e.socketingWS&&e.socketingWS.send({type:t,data:n})}};this._console_log||(this._console_log=t(1,console.log)),this._console_warn||(this._console_warn=t(2,console.warn)),this._console_error||(this._console_error=t(3,console.error)),window.cc&&(this._cc_log||(this._cc_log=t(1,window.cc.log)),this._cc_warn||(this._cc_warn=t(2,window.cc.warn)),this._cc_error||(this._cc_error=t(3,window.cc.error)));var o=n.default.getConfig();console.log=o.i_sdk_debug_mode<a.default.CONSOLE_OUTPUT_LEVEL_LOG?function(){}:this._console_log,console.warn=o.i_sdk_debug_mode<a.default.CONSOLE_OUTPUT_LEVEL_WARN?function(){}:this._console_warn,console.error=o.i_sdk_debug_mode<a.default.CONSOLE_OUTPUT_LEVEL_ERROR?function(){}:this._console_error,window.cc&&(window.cc.log=o.i_sdk_debug_mode<a.default.CONSOLE_OUTPUT_LEVEL_LOG?function(){}:this._cc_log,window.cc.warn=o.i_sdk_debug_mode<a.default.CONSOLE_OUTPUT_LEVEL_WARN?function(){}:this._cc_warn,window.cc.error=o.i_sdk_debug_mode<a.default.CONSOLE_OUTPUT_LEVEL_ERROR?function(){}:this._cc_error)},e._start_console_print_LAN=function(){if(!e.socketingWS){var t=n.default.getConfig().s_sdk_lan_debug_address.length>10?n.default.getConfig().s_sdk_lan_debug_address:"",o=localStorage.getItem("console_lan_id")||s.default.getInstance().getStorage("console_lan_id")||t;if(ULSDK.console.log("console_lan_id:",o),o&&o.length&&"WebSocket"in window){ULSDK.console.log("\u652f\u6301WebSocket\u5c40\u57df\u7f51\u8c03\u8bd5");var r="ws://"+o+":3002/websocket/test",a=null;try{(a=new l.default(r)).onopen=function(){ULSDK.console.log("Connection open ..."),i.default.getInstance().moduleCheckerManager.addDebugInfo("console_lan_id","\u5df2\u5f00\u542f\u5c40\u57df\u7f51\u8c03\u8bd5")},a.onmessage=function(e){ULSDK.console.log("Received Message:"+e.data)},a.onclose=function(){ULSDK.console.log("Connection closed"),i.default.getInstance().moduleCheckerManager.removeDebugInfo("console_lan_id"),e.socketingWS=null},a.onerror=function(t){ULSDK.console.error("Connection onerror:",t),i.default.getInstance().moduleCheckerManager.removeDebugInfo("console_lan_id"),e.socketingWS=null}}catch(e){a=null,ULSDK.console.log("\u5c40\u57df\u7f51\u8c03\u8bd5\u9519\u8bef:",JSON.stringify(e))}finally{if(null==a)return;e.socketingWS=a}}else ULSDK.console.log("\u4e0d\u652f\u6301WebSocket\u5c40\u57df\u7f51\u8c03\u8bd5")}},e._close_console_print_LAN=function(){e.socketingWS&&(e.socketingWS.close(),e.socketingWS=null)},e.jsonValToStr=function(e){if(!e)return e;for(var t={},o=Object.keys(e),n=0;n<o.length;n++){var r=o[n],a=e[r];a="object"==typeof a?JSON.stringify(a):String(a),t[r]=a}return t},e.recordVideoTimeLimit=function(e,t){var o=n.default.getConfig().t_sdk_record_duration_limit_object||{},r=o["string"==typeof e?e:"number"==typeof e?e.toString():""]||o["*"]||{},a=r.min||0,i=r.max||1e4;return a>t?{isConform:!1,msg:"\u5f55\u5c4f\u65f6\u95f4\u5c11\u4e8e"+a+"\u79d2"}:i<t?{isConform:!1,msg:"\u5f55\u5c4f\u65f6\u95f4\u5927\u4e8e"+i+"\u79d2"}:{isConform:!0,msg:""}},e.socketingWS=null,e}();o.default=c,cc._RF.pop()},{"../ULConsts":"ULConsts","../core/ULConfig":"ULConfig","../core/ULSdkManager":"ULSdkManager","../core/ULStorageManager":"ULStorageManager","./ULTimer":"ULTimer","./ULWebSocket":"ULWebSocket"}],ULWebSocket:[function(e,t,o){"use strict";cc._RF.push(t,"ae33fDFTjdJlov3ztPNYMS6","ULWebSocket"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e){if(this.socketingWS=null,this.isOpening=!1,this.socketMsgCache=[],this._isAutoClearCache=!1,"WebSocket"in window){var t=new WebSocket(e);this.socketingWS=t;var o=this;t.onopen=function(e){o.isOpening=!0,o.onopen(e)},t.onmessage=function(e){o.onmessage(e)},t.onclose=function(e){o.isOpening=!1,o.socketingWS=null,o.socketMsgCache=[],o.onclose(e)},t.onerror=function(e){o.isOpening=!1,o.socketingWS=null,o.socketMsgCache=[],o.onerror(e)}}}return Object.defineProperty(e.prototype,"isAutoClearCache",{set:function(e){var t=this;e!=this._isAutoClearCache&&(this._isAutoClearCache=e,this._isAutoClearCache?this.intervalId=setInterval(function(){t.clearCache()},30):clearInterval(this.intervalId))},enumerable:!0,configurable:!0}),e.prototype.close=function(e,t){this.isOpening&&this.socketingWS&&(this.socketingWS.close(),this.isOpening=!1,this.socketingWS=null)},e.prototype.send=function(e){if(this.socketingWS){var t=null;try{t=JSON.stringify(e)}catch(e){t=JSON.stringify({type:3,data:e})}finally{!this.isOpening||this._isAutoClearCache?(this.socketMsgCache.push(t),this.isAutoClearCache=!0):this.socketingWS.send(t)}}},e.prototype.clearCache=function(){if(this.socketingWS&&this.socketMsgCache.length){if(this.isOpening){var e=this.socketMsgCache.shift();this.socketingWS.send(e)}}else this.isAutoClearCache=!1},e}();o.default=n,cc._RF.pop()},{}],UpdaterScript:[function(e,t,o){"use strict";cc._RF.push(t,"50cc4iWVvFMY54HU+3ENcb9","UpdaterScript");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../utils/Timer"),a=e("../../game/Const"),i=e("../../game/manager/mgrDirector"),s=e("../../game/view/node/LayerColor"),l=cc._decorator,c=l.ccclass,u=(l.property,function(){function e(e,t){this.patchInfo=null,this.localPid=null,this.patchs=null,this.patchIdx=null,this.TIMEOUT=5,this.requestPatchInfoXhr=null,this.timeoutTimer=null,this.bNeedRestart=!1,this.bGameStarted=!1;var o=new cc.Node;o.parent=e,this.nodeRoot=o,this.onUiMsgCallback=t}return e.prototype.startUpdate=function(){var e=this;cc.sys.isNative&&jsb.fileUtils.isFileExist("src/patch_info.json")?(cc.log("\u53d1\u73b0patch_info.json\uff0c\u51c6\u5907\u66f4\u65b0"),this.needPlayLogo()?this.playLogo(function(){e.prepareUpdate()}):this.prepareUpdate()):(cc.log("patch_info.json\u672a\u627e\u5230\uff0c\u76f4\u63a5\u8fdb\u5165\u6e38\u620f"),this.startGame())},e.prototype.buildUi=function(){},e.prototype.sendUiMsg=function(e,t){this.onUiMsg(e,t)},e.prototype.onUiMsg=function(e,t){this.onUiMsgCallback&&this.onUiMsgCallback(e,t)},e.prototype.needPlayLogo=function(){if("true"==cc.sys.localStorage.getItem("B_SKIP_LOGO_ONCE"))return cc.sys.localStorage.setItem("B_SKIP_LOGO_ONCE","false"),!1;var e=this.getLogoTextures();return!(!e||0==e.length)},e.prototype.getLogoTextures=function(){var e,t=jsb.fileUtils.getStringFromFile("src/patch_info.json");if(t&&(e=JSON.parse(t)),!e)return null;var o=e.CONF;if(!o)return null;var n=o.LOGO_TEXTURES;return Array.isArray(n)?n:null},e.prototype.playLogo=function(e){var t=this;cc.log("-------------------------"),cc.log("-----   playLogo    -----"),cc.log("-------------------------");for(var o=this.getLogoTextures(),n=o.length-1;n>=0;n--){var r=o[n];cc.loader._getResUuid(r)||(cc.warn(ul.format("UpdaterScript.playLogo logoTexture not found! fileName=[%s]",r)),o.splice(n,1))}if(o.length<=0)e();else{this.sendUiMsg("UPDATER_UI_MSG_PLAY_LOGO_BEGIN");var a=this.nodeRoot.children||[],l=a.length;if(l>0){for(n=l-1;n>=0;n--){var c=a[n];c.stopAllActions(),c.destroy()}this.nodeRoot.removeAllChildren()}var u=new s.default(cc.color(0,0,0,255));u.parent=this.nodeRoot,u.setContentSize(i.default.size);for(n=0;n<o.length;n++){r=o[n];var d=i.default.createSpriteNode(r);d.parent=this.nodeRoot,d.opacity=0;var p=[];n>0&&p.push(cc.delayTime(3*n)),p.push(cc.fadeIn(.6)),p.push(cc.delayTime(1.8)),p.push(cc.fadeOut(.6)),n==o.length-1&&p.push(cc.callFunc(function(){t.sendUiMsg("UPDATER_UI_MSG_PLAY_LOGO_END"),u.destroy(),e()}));var h=cc.sequence(p);d.runAction(h)}}},e.prototype.startGame=function(e){if(this.bGameStarted)cc.warn("vUpdataerSceneBase.startGame already started!");else{if(this.bGameStarted=!0,e&&this.patchInfo){var t=cc.sys.localStorage.getItem("GAME_VERSION");if(t)a.default.GAME_VERSION=t;else{var o=this.patchInfo.VERSION;o&&(cc.sys.localStorage.setItem("GAME_VERSION",o),a.default.GAME_VERSION=o)}}if(this.releaseAssetsManager(),this.releaseRequestPatchInfoXhr(),this.bNeedRestart)return cc.log("-------------------------"),cc.log("-----  restarting   -----"),cc.log("-------------------------"),cc.sys.localStorage.setItem("B_SKIP_LOGO_ONCE","true"),cc.audioEngine.stopAll(),void cc.game.restart();cc.sys.localStorage.setItem(a.default.FORCE_PATCH_CHANNEL_NAME_KEY,""),cc.log("-------------------------"),cc.log("-----   startGame   -----"),cc.log("-------------------------"),this.sendUiMsg("UPDATER_UI_MSG_ENTER_NEXT_SCENE")}},e.prototype.resetPatch=function(e,t,o,n){cc.log("-------------------------"),cc.log("-----  resetPatch   -----"),cc.log("-------------------------"),cc.log("resetTip",e);var r=this.getPatchPath();jsb.fileUtils.isDirectoryExist(r)&&jsb.fileUtils.removeDirectory(r),cc.sys.localStorage.setItem("PATCH_BID",t.toString()),cc.sys.localStorage.setItem("PATCH_PID",o.toString()),cc.sys.localStorage.setItem("PATCH_PACKAGE_PID",o.toString()),cc.sys.localStorage.setItem("PATCH_CHANNEL",n);var a=[r];cc.sys.localStorage.setItem("UPDATER_SEARCH_PATHS",JSON.stringify(a))},e.prototype.prepareUpdate=function(){var e=this;cc.log("-------------------------"),cc.log("----- prepareUpdate -----"),cc.log("-------------------------");var t,o=jsb.fileUtils.getStringFromFile("src/patch_info.json");if(o&&(t=JSON.parse(o)),!t)return cc.warn("[warn] patch_info.json \u52a0\u8f7d\u5931\u8d25\uff0c\u76f4\u63a5\u8fdb\u5165\u6e38\u620f\u3002"),void this.startGame();this.patchInfo=t;var n=cc.sys.localStorage.getItem("GAME_VERSION");n||(n=t.VERSION),a.default.GAME_VERSION=n;var r=t.B_ID,i=t.P_ID,s=t.CHANNEL,l=parseInt(cc.sys.localStorage.getItem("PATCH_BID")),c=parseInt(cc.sys.localStorage.getItem("PATCH_PID")),u=parseInt(cc.sys.localStorage.getItem("PATCH_PACKAGE_PID")),d=cc.sys.localStorage.getItem("PATCH_CHANNEL"),p=null,h=!1;r!=l?(p=ul.format("bid not match! package = %s, record = %d",r,l),l&&!isNaN(l)&&(h=!0)):s!=d?(p=ul.format("channel not match! package = %s, record = %d",s,d),d&&""!=d&&(h=!0)):i!=u?(p=ul.format("package pid not match! package = %s, record = %d",i,u),u&&!isNaN(u)&&(h=!0)):i>(isNaN(c)?0:c)&&(p=ul.format("package pid is higher! package = %s, record = %s",i,c),c&&!isNaN(c)&&(h=!0)),p&&(h&&function(){e.bNeedRestart=!0;var o=t.VERSION||"1101";cc.sys.localStorage.setItem("GAME_VERSION",o),a.default.GAME_VERSION=o}(),this.resetPatch(p,r,i,s));var f=null;(c=parseInt(cc.sys.localStorage.getItem("PATCH_PID")))?(f=c,cc.log("use record pid",f)):(f=t.P_ID||0,cc.log("use patch_info pid",f)),this.localPid=f;var g=this.getPatchPath();if(!jsb.fileUtils.createDirectory(g))return cc.log("patchPath create faild!",g),void this.startGame();this.buildUi(),this.checkNewVersion()},e.prototype.checkNewVersion=function(){var e=this;this.sendUiMsg("UPDATER_UI_MSG_GET_VERSION");var t=this.patchInfo,o=t.CHANNEL,n=cc.sys.localStorage.getItem(a.default.FORCE_PATCH_CHANNEL_NAME_KEY);n&&""!=n&&(o=n);var r=ul.format("http://%s/%s/%s/%s/%s",t.HOST,t.PATCH_PATH,t.APP,o,t.PATCH_INFO_FILENAME),i=cc.loader.getXMLHttpRequest();i.onreadystatechange=function(){if(4==i.readyState)if(i.status>=200&&i.status<207){e.stopTimeoutTimer();var t=void 0;try{t=JSON.parse(i.response)}catch(t){cc.warn("vUpdaterScene.checkNewVersion remote patch_info parse except!",i.response),e.startGame()}t?(e.releaseRequestPatchInfoXhr(),e.onPatchInfoDownloadSuccess(t)):(cc.warn("vUpdaterScene.checkNewVersion remote patch_info parse faild!",i.response),e.startGame())}else cc.warn("vUpdateScene.checkNewVersion network faild."),e.startGame()};i.open("GET",r),i.timeout=1e3*this.TIMEOUT,this.requestPatchInfoXhr=i,this.startTimeoutTimer(),i.send()},e.prototype.onPatchInfoDownloadSuccess=function(e){var t=this;cc.log("onPatchInfoDownloadSuccess",e),ul.dump(e);var o=parseInt(e.P_ID)||0,n=this.localPid;if(cc.log("pid:",n,o),e&&e.CONF&&cc.sys.localStorage.setItem("REMOTE_PATCH_INFO_CONF",JSON.stringify(e.CONF||{holder:"nothing"})),n>o)return cc.sys.localStorage.setItem("GAME_VERSION",""),cc.warn("local version is higher than remote version"),cc.warn("stop update!"),void this.startGame(!0);for(var a=[],i=0;i<e.PATCH_LIST.length;i++){var s=e.PATCH_LIST[i];s.pid>n&&(cc.log("ADD PATCH ->",s.pid,s.version),a.push(s))}this.patchInfo=e,a.length>0?(this.patchs=a,this.patchIdx=0,r.default.callLater(.016,function(){t.downloadPatchByIndexed()})):this.startGame(!0)},e.prototype.downloadPatchByIndexed=function(){this.releaseAssetsManager(),cc.log("downloadPatchByIndexed",this.patchIdx);var e=this.patchInfo,t=e.CHANNEL,o=cc.sys.localStorage.getItem(a.default.FORCE_PATCH_CHANNEL_NAME_KEY);o&&""!=o&&(t=o);var n=this.patchs[this.patchIdx],i=ul.format("http://%s/%s/%s/%s/%s/",e.HOST_CDN||e.HOST,e.PATCH_PATH,e.APP,t,e.B_ID);cc.log("packageUrl",ul.format("%s%d.zip",i,n.pid));var s={};s[ul.format("%d.zip",n.pid)]={size:0,md5:"",compressed:!0};var l=JSON.stringify({packageUrl:i,version:(this.localPid-1).toString()}),c=new jsb.Manifest(l,this.getPatchPath()),u=JSON.stringify({packageUrl:i,version:n.pid.toString(),assets:s}),d=new jsb.Manifest(u,this.getPatchPath()),p=new jsb.AssetsManager("",this.getPatchPath());p.setEventCallback(this.onAssetsManagerEvent.bind(this)),this.assetsManager=p;var h=new r.default(.016,-1,function(){cc.isValid(p)&&p.update()});this.assetsManagerTimer=h,p.loadLocalManifest(c,this.getPatchPath()),p.loadRemoteManifest(d),p.setVersionCompareHandle(function(e,t){return parseFloat(e)-parseFloat(t)}),p.setVerifyCallback(function(e,t){return!0}),h.startAndBindToNode(this.nodeRoot)},e.prototype.onPatchDownloadSuccess=function(){var e=this.patchs[this.patchIdx];this.localPid=e.pid,cc.sys.localStorage.setItem("PATCH_PID",this.localPid.toString()),cc.log("save PATCH_PID",this.localPid),e.version&&(cc.sys.localStorage.setItem("GAME_VERSION",e.version),cc.log("save GAME_VERSION",e.version)),this.bNeedRestart=!0,cc.log("check patchIdx",this.patchIdx,this.patchs.length),this.patchIdx<this.patchs.length-1?(this.patchIdx++,this.downloadPatchByIndexed()):(this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_SUCCESS"),this.startGame(!0))},e.prototype.onAssetsManagerEvent=function(e){switch(e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:cc.log("onAssetsManagerEvent.ERROR_NO_LOCAL_MANIFEST"),this.startGame();break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:cc.log("onAssetsManagerEvent.ERROR_DOWNLOAD_MANIFEST"),this.startGame();break;case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:cc.log("onAssetsManagerEvent.ERROR_PARSE_MANIFEST"),this.startGame();break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:cc.log("onAssetsManagerEvent.NEW_VERSION_FOUND");break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:cc.log("onAssetsManagerEvent.ALREADY_UP_TO_DATE");var t=this.patchs||[];this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_PROGRESS",{bytePercent:1,filePercent:1,patchCount:t.length,patchIdx:this.patchIdx||0}),this.onPatchDownloadSuccess();break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:cc.log("onAssetsManagerEvent.UPDATE_PROGRESSION");t=this.patchs||[];this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_PROGRESS",{bytePercent:e.getPercent()||0,filePercent:e.getPercentByFile()||0,patchCount:t.length,patchIdx:this.patchIdx||0});break;case jsb.EventAssetsManager.ASSET_UPDATED:cc.log("onAssetsManagerEvent.ASSET_UPDATED");break;case jsb.EventAssetsManager.ERROR_UPDATING:cc.log("onAssetsManagerEvent.ERROR_UPDATING"),this.startGame();break;case jsb.EventAssetsManager.UPDATE_FINISHED:cc.log("onAssetsManagerEvent.UPDATE_FINISHED");t=this.patchs||[];this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_PROGRESS",{bytePercent:1,filePercent:1,patchCount:t.length,patchIdx:this.patchIdx||0}),this.onPatchDownloadSuccess();break;case jsb.EventAssetsManager.UPDATE_FAILED:cc.log("onAssetsManagerEvent.UPDATE_FAILED"),this.startGame();break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:cc.log("onAssetsManagerEvent.ERROR_DECOMPRESS"),this.startGame();break;default:cc.log("onAssetsManagerEvent.unknown code",e.getEventCode()),this.startGame()}},e.prototype.getPatchPath=function(){var e=jsb.fileUtils.getWritablePath(),t=e.substr(e.length-1,1);return"/"==t||"\\"==t?e+"patch/":e+"/patch/"},e.prototype.onTimeout=function(){this.startGame()},e.prototype.startTimeoutTimer=function(){var e=this,t=new r.default(this.TIMEOUT,1,function(){e.stopTimeoutTimer(),e.onTimeout()});this.timeoutTimer=t,t.startAndBindToNode(this.nodeRoot)},e.prototype.stopTimeoutTimer=function(){this.timeoutTimer&&(this.timeoutTimer.stop(),this.timeoutTimer=null)},e.prototype.releaseRequestPatchInfoXhr=function(){this.requestPatchInfoXhr&&(this.requestPatchInfoXhr.abort(),this.requestPatchInfoXhr=null)},e.prototype.releaseAssetsManager=function(){this.assetsManagerTimer&&(this.assetsManagerTimer.stop(),this.assetsManagerTimer=null),this.assetsManager&&(this.assetsManager.setEventCallback(null),this.assetsManager=null)},e=n([c],e)}());o.default=u,cc._RF.pop()},{"../../game/Const":"Const","../../game/manager/mgrDirector":"mgrDirector","../../game/view/node/LayerColor":"LayerColor","../utils/Timer":"Timer"}],ViewBase:[function(e,t,o){"use strict";cc._RF.push(t,"61455sbxEVAr5Ssh4NM0iMG","ViewBase");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../game/manager/mgrDirector"),l=e("../component/LifeCycleMonitor"),c=e("../utils/SyncMonitor"),u=e("../utils/MsgHandler"),d=e("../utils/Tools"),p=cc._decorator,h=p.ccclass,f=(p.property,function(e){function t(t){void 0===t&&(t={});var o=e.call(this)||this;return o.timeOfOnLoaded=0,o.loadResoutceFaildNum=0,t||(t={}),o.context=t,o._msgHander=new u.default,o._monitor=new c.default(o),o._bindLifeCycle(),o}return n(t,e),t.prototype._onPreDestroy=function(){this.onDestroy(),e.prototype._onPreDestroy&&e.prototype._onPreDestroy.call(this)},t.prototype.onLoad=function(){this.timeOfOnLoaded=d.default.time(),this.startProcMsg(),this._loadResource()},t.prototype.onResourceLoaded=function(){},t.prototype.start=function(){},t.prototype.update=function(e){},t.prototype.onDestroy=function(){this.stopProcMsg()},t.prototype.registerListeners=function(e){var t=this;d.default.forEachMap(e,function(o,n){e[o]=n.bind(t)}),this._msgHander.registerListeners(e)},t.prototype.startProcMsg=function(){this._msgHander.startProcMsg()},t.prototype.stopProcMsg=function(){this._msgHander.stopProcMsg()},t.prototype.sendMsg=function(e,t){this._msgHander.sendMsg(e,t)},t.prototype.getViewLoadedTime=function(){return this.timeOfOnLoaded||0},t.prototype.getViewDisplayedTime=function(){return this.timeOfOnLoaded?d.default.time()-(this.timeOfOnLoaded||0):0},t.prototype._getResourceName=function(){return""},t.prototype._getResourceBindingConfig=function(){return{}},t.prototype._loadResource=function(){return a(this,void 0,void 0,function(){var e,t,o,n=this;return i(this,function(r){return(e=this._getResourceName())?(t=function(e){e.parent=n,0==e.x&&0==e.y||e.setPosition(0,0);var t=n._buildNodeMapping(e);d.default.forEachMap(n._getResourceBindingConfig(),function(e,o){var r=t[e];if(r){var a=o[0],i=e.substring(e.indexOf("_")+1),s=null;if(a==cc.Node)s=r;else{if(!(s=r.getComponent(a))){try{s=r.addComponent(a)}catch(e){}if(!s)return}var l=o[1];if(l&&""!=l){var c="registerOnTouchCallback";"function"==typeof s[c]&&"function"==typeof n[l]&&s[c](n[l].bind(n))}}n[i]=s}}),n.nodeResource=e,n.onResourceLoaded(),n.registerAsyncValue("nodeResource",e)},(o=function(){s.default.loadNode(e,null,function(r){if(cc.isValid(n))return cc.isValid(r)?void t(r):(n.loadResoutceFaildNum++,console.log("loadResourceFaild restart count,resourceName=",n.loadResoutceFaildNum,e),void o())})})(),[2]):(this.nodeResource=this,this.onResourceLoaded(),this.registerAsyncValue("nodeResource",this),[2])})})},t.prototype._buildNodeMapping=function(e,t){t||(t={}),e.name&&(t[e.name]=e);for(var o=e.children,n=0;n<o.length;n++){var r=o[n];this._buildNodeMapping(r,t)}return t},t.prototype._bindLifeCycle=function(){var e=this.addComponent(l.default);e.setOnLoadCallback(this.onLoad.bind(this)),e.setStartCallback(this.start.bind(this)),e.setUpdateCallback(this.update.bind(this))},t.prototype.registerAsyncValue=function(e,t){return this._monitor.registerAsyncValue(e,t)},t.prototype.unregisterAsyncValue=function(e){return this._monitor.unregisterAsyncValue(e)},t.prototype.getCurrentAsyncValue=function(e){return this._monitor.getCurrentAsyncValue(e)},t.prototype.monitorAsyncValue=function(e,t,o){this._monitor.monitorAsyncValue(e,t,o)},t.prototype.monitorAsyncValueExists=function(e,t){this._monitor.monitorAsyncValueExists(e,t)},t.prototype.isResourceLoaded=function(){return cc.isValid(this.nodeResource)},t.prototype.waitResourceLoaded=function(e){this.monitorAsyncValueExists("nodeResource",e)},t.prototype.isLoadingFinished=function(){return this.isResourceLoaded()},t.prototype.waitLoadingFinished=function(e){this.waitResourceLoaded(e)},t.requireResourceLoaded=function(e,t,o){if(!o.__b_marked){o.__b_marked=!0;var n=o.value;o.value=function(){for(var e=this,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];this.isResourceLoaded()?n.apply(this,t):this.waitResourceLoaded(function(){n.apply(e,t)})}}},t.requireAsyncValue=function(e,t){return function(o,n,r){if(!r.__b_marked){r.__b_marked=!0;var a=r.value;r.value=function(){for(var o=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this.getCurrentAsyncValue(e)!=t?this.monitorAsyncValue(e,t,function(){a.apply(o,n)}):a.apply(this,n)}}}},t=r([h],t)}(cc.Node));o.default=f,cc._RF.pop()},{"../../game/manager/mgrDirector":"mgrDirector","../component/LifeCycleMonitor":"LifeCycleMonitor","../utils/MsgHandler":"MsgHandler","../utils/SyncMonitor":"SyncMonitor","../utils/Tools":"Tools"}],ViewScript:[function(e,t,o){"use strict";cc._RF.push(t,"3ff816EFMNE8plER5P0ecCB","ViewScript");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../utils/MsgHandler"),i=e("../utils/AsyncMonitor"),s=e("../utils/Tools"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=e.call(this)||this;return t._msgHander=new a.default,t._monitor=new i.default(t),t}return n(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this.__proto__.__classname__},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.startProcMsg();var e=this.node,t=e.context;null==t&&(t={},e.context=t),this.context=t},t.prototype.start=function(){},t.prototype.update=function(e){},t.prototype.onDestroy=function(){this.stopProcMsg()},t.prototype.registerListeners=function(e){var t=this;s.default.forEachMap(e,function(o,n){e[o]=n.bind(t)}),this._msgHander.registerListeners(e)},t.prototype.startProcMsg=function(){this._msgHander.startProcMsg()},t.prototype.stopProcMsg=function(){this._msgHander.stopProcMsg()},t.prototype.sendMsg=function(e,t){this._msgHander.sendMsg(e,t)},t.prototype.registerAsyncValue=function(e,t){return this._monitor.registerAsyncValue(e,t)},t.prototype.unregisterAsyncValue=function(e){return this._monitor.unregisterAsyncValue(e)},t.prototype.getAsyncValue=function(e){return this._monitor.getAsyncValue(e)},t.prototype.monitorAsyncValue=function(e,t){return this._monitor.monitorAsyncValue(e,t)},t.prototype.monitorAsyncValueExists=function(e){return this._monitor.monitorAsyncValueExists(e)},t=r([c],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../utils/AsyncMonitor":"AsyncMonitor","../utils/MsgHandler":"MsgHandler","../utils/Tools":"Tools"}],WebViewController:[function(e,t,o){"use strict";cc._RF.push(t,"5d6cfi/ICNOl7Qiudy2XPgW","WebViewController");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.webView=null,t}return n(t,e),t.prototype.start=function(){},r([s(cc.WebView)],t.prototype,"webView",void 0),t=r([i],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],_template:[function(e,t,o){"use strict";cc._RF.push(t,"e5169SDbJZKlYybKwRjZVGG","_template");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=cc._decorator.ccclass,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this)},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t=r([i],t)}(a.default);o.default=s,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager"}],cConfig:[function(e,t,o){"use strict";cc._RF.push(t,"00000AAAAAAAAAAAAAAAAAA","cConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.cConfig=JSON.parse('{\n    "b_sdk_oppoqg_debug": false,\n    "b_sdk_vivo_debug": false,\n    "creatorVersion": "",\n    "i_channel_info_timeout": 3000,\n    "i_game_start_ready_timeout": 10000,\n    "i_net_timeout": 5000,\n    "i_sdk_adv_banner_cd": 0,\n    "i_sdk_adv_banner_timeout": 30000,\n    "i_sdk_adv_embedded_timeout": 30000,\n    "i_sdk_adv_inter_cd": 0,\n    "i_sdk_adv_inter_timeout": 30000,\n    "i_sdk_adv_native_clicked_report_mode": 0,\n    "i_sdk_adv_native_life_time": 15000,\n    "i_sdk_adv_native_request_cd": 10000,\n    "i_sdk_adv_oppoqg_native_exposure_cd": 0,\n    "i_sdk_adv_paster_timeout": 30000,\n    "i_sdk_adv_type_banner_cd": 0,\n    "i_sdk_adv_type_banner_daily_limit": 0,\n    "i_sdk_adv_type_embedded_cd": 0,\n    "i_sdk_adv_type_embedded_daily_limit": 0,\n    "i_sdk_adv_type_interstitial_cd": 40000,\n    "i_sdk_adv_type_interstitial_daily_limit": 0,\n    "i_sdk_adv_type_paster_cd": 0,\n    "i_sdk_adv_type_paster_daily_limit": 0,\n    "i_sdk_adv_type_url_cd": 0,\n    "i_sdk_adv_type_url_daily_limit": 0,\n    "i_sdk_adv_type_video_cd": 0,\n    "i_sdk_adv_type_video_daily_limit": 0,\n    "i_sdk_adv_url_timeout": 30000,\n    "i_sdk_adv_video_timeout": 30000,\n    "i_sdk_age_level_info_mode": 0,\n    "i_sdk_baidu_ad_failed_share_reward_success_count_limit": 3,\n    "i_sdk_baidu_add_game_to_my_favorite_mode": 0,\n    "i_sdk_baidu_auto_upload": 1,\n    "i_sdk_baidu_banner_timeout": 30000,\n    "i_sdk_baidu_debug_mode": 0,\n    "i_sdk_baidu_jump_game_reward_time": 20000,\n    "i_sdk_baidu_qrcode_preview": 1,\n    "i_sdk_channel_user_id_mode": 0,\n    "i_sdk_compress_res_mode": 1,\n    "i_sdk_content_security_check_support": 1,\n    "i_sdk_debug_mode": 0,\n    "i_sdk_facebook_megadata_mode": 0,\n    "i_sdk_find_mini_game_mode": 1,\n    "i_sdk_hago_banner_id": 0,\n    "i_sdk_hago_user": 1,\n    "i_sdk_hago_video_id": 0,\n    "i_sdk_headline_ad_failed_share_reward_success_count_limit": 3,\n    "i_sdk_headline_auto_upload": 1,\n    "i_sdk_headline_cuttemplate_default_interval": 2000,\n    "i_sdk_headline_favorite_mode": 0,\n    "i_sdk_headline_follow_support": 0,\n    "i_sdk_headline_getUserInfo_force": 1,\n    "i_sdk_headline_installShortcut_support": 0,\n    "i_sdk_headline_qrcode_preview": 1,\n    "i_sdk_headline_record_delay_time": 500,\n    "i_sdk_headline_record_support": 1,\n    "i_sdk_headline_subscribe_use_temleteIds_mode": 0,\n    "i_sdk_installShortcut_mode": 1,\n    "i_sdk_iqiyi_appid": 9163,\n    "i_sdk_jkplay_gameid": 658816863,\n    "i_sdk_jkplay_sdkversion": 1,\n    "i_sdk_jump_game_resource_mode": 0,\n    "i_sdk_jump_single_random_length": 5,\n    "i_sdk_jumplist_mode": 1,\n    "i_sdk_juzhang_load_sdk_mode": null,\n    "i_sdk_kaixin_banner_id": 10000143,\n    "i_sdk_kk_appId": null,\n    "i_sdk_lianxin_is_landscape": 0,\n    "i_sdk_megadata_encrypt": 1,\n    "i_sdk_megadata_mode": 0,\n    "i_sdk_megadata_upload_span": 5000,\n    "i_sdk_moreWonderful_mode": 0,\n    "i_sdk_moregame_mode": 1,\n    "i_sdk_oppoqg_ad_ecd": 0,\n    "i_sdk_oppoqg_banner_mode": 0,\n    "i_sdk_oppoqg_jump_game_reward_time": 20000,\n    "i_sdk_oppoqg_not_show_banner_after_user_close_count_limit": 5,\n    "i_sdk_pay_mode": 0,\n    "i_sdk_phone_vibrate": 0,\n    "i_sdk_qihoo_banner_timeout": 15000,\n    "i_sdk_qq_ad_failed_share_reward_confirm_success_cycle": 72000,\n    "i_sdk_qq_ad_failed_share_reward_fail_count": 2,\n    "i_sdk_qq_ad_failed_share_reward_success_count_limit": 3,\n    "i_sdk_qq_ad_failed_share_reward_success_radios": 70,\n    "i_sdk_qq_ad_failed_share_reward_success_time_interval": 5000,\n    "i_sdk_qq_appbox_cd": 30000,\n    "i_sdk_qq_appbox_suc_ratios": 0,\n    "i_sdk_qq_auto_upload": 1,\n    "i_sdk_qq_block_cd": 30000,\n    "i_sdk_qq_qrcode_preview": 1,\n    "i_sdk_refresh_request_num": 18,\n    "i_sdk_sdk_rank_mode": 0,\n    "i_sdk_share_mode": 0,\n    "i_sdk_support_open_url": 0,\n    "i_sdk_support_record_share": 1,\n    "i_sdk_trim_adv_err_switch": 1,\n    "i_sdk_weixin_ad_failed_share_reward_confirm_success_cycle": 72000,\n    "i_sdk_weixin_ad_failed_share_reward_fail_count": 2,\n    "i_sdk_weixin_ad_failed_share_reward_success_count_limit": 3,\n    "i_sdk_weixin_ad_failed_share_reward_success_radios": 70,\n    "i_sdk_weixin_ad_failed_share_reward_success_time_interval": 5000,\n    "i_sdk_weixin_auto_upload": 1,\n    "i_sdk_weixin_banner_autoRefresh_mode": 0,\n    "i_sdk_weixin_banner_intervals": 30,\n    "i_sdk_weixin_currency_ratio": 10,\n    "i_sdk_weixin_env": 0,\n    "i_sdk_weixin_jump_game_reward_time": 20000,\n    "i_sdk_weixin_jump_game_reward_type": 0,\n    "i_sdk_weixin_qrcode_preview": 1,\n    "i_sdk_weixin_replace_grid_with_custom": 1,\n    "i_sdk_weixin_subscribe_use_temleteIds_mode": 0,\n    "i_sdk_xieliyu_Fullvideo_id": null,\n    "i_sdk_xieliyu_banner_id": null,\n    "i_sdk_xieliyu_video_id": null,\n    "i_sdk_xueliyu_gameId": null,\n    "layaVersion": "",\n    "s_game_name": "\u53f6\u7f57\u4e3d\u5a03\u5a03\u5e97",\n    "s_prj_name": "prj.game70",\n    "s_sdk_2345_game_code": "leishou_yllwwd",\n    "s_sdk_2345_gameres_url": "https://gamesres.ultralisk.cn/h5_games_res/game70/2345/v0",\n    "s_sdk_4399minigame_gameres_url": "https://gamesres.ultralisk.cn/h5_games_res/game70/4399minigame/v1",\n    "s_sdk_adv_info": {\n        "1": {\n            "group": [\n                "1"\n            ],\n            "type": "interstitial"\n        },\n        "2": {\n            "group": [\n                "2"\n            ],\n            "type": "banner"\n        },\n        "3": {\n            "group": [\n                "3"\n            ],\n            "type": "embedded"\n        },\n        "4": {\n            "group": [\n                "4"\n            ],\n            "type": "video"\n        },\n        "5": {\n            "group": [\n                "5"\n            ],\n            "type": "url"\n        }\n    },\n    "s_sdk_adv_show_banner_list": "ULAdvFaceBook",\n    "s_sdk_adv_show_embedded_list": "0",\n    "s_sdk_adv_show_inter_list": "ULAdvFaceBook",\n    "s_sdk_adv_show_paster_list": "0",\n    "s_sdk_adv_show_url_list": "0",\n    "s_sdk_adv_show_video_list": "ULAdvFaceBook",\n    "s_sdk_age_level_info": "",\n    "s_sdk_baidu_adv_app_sid": "ce9027eb",\n    "s_sdk_baidu_app_id": "17762524",\n    "s_sdk_baidu_banner_id": "6674513",\n    "s_sdk_baidu_change_log": "",\n    "s_sdk_baidu_deal_id": "0",\n    "s_sdk_baidu_min_swan_version": "1.0.8",\n    "s_sdk_baidu_pay_app_key": "MMMu2k",\n    "s_sdk_baidu_pay_private_key": "-----BEGIN RSA PRIVATE KEY-----MIICXgIBAAKBgQC46Giy1S4Zuys/c3QO6VZVWAOo1tussbIpqI0M7edU9OC732leFej2DmG3O9XRh9NlYjoAq4hyt7DxiZ6MyN8IdStZn4b0/e/CZKQA5WaCI5h71hUTwCJTzHZHvO+woDWaE2mOSsBfjAdwTsHUr32eCPzju/1zatys02W7ai4v+wIDAQABAoGAGjbAmRHF3ln9kJpCitajqae3pRkIvZvXgTZnAL09fXrV3WyX2IHMrA1v5vUxo+nYm1foly26Q2EtUaDL/HOBwshbwEtR5TR0g+kZBpA+S4wt/ujZPlALmZiGuQjjqwWFo9OfeskXer7vA5UWYemDMvy7XQ2TWoLNOzI+LaVvEPECQQDpEgY7XmrKeq8qkUFPsDjcEa7SZ2eEEOps0NKmewGvAaiavm7+8yCdS/ZPS7ZD6590TanFWy3gJtugw/vPa2tpAkEAyxlj8u+EYKchPBYehuRjm4W5SlJNAGrABqrJjM50jQ4aRVr1LbS6R0S77kTaZLTV/w8eYk1LS9cTCaY+JB+HwwJBAIXrlmscmG4ZynbCGe4JCtLg0jwRsHhBJAI8hx2jxlbhtBieXbbeypm3YSM1FNi4FdpFGczN1HFcwowAsLsBNSkCQQC9YgywQKYI1m+ILvwCPr+fCt/PrNS+mcw7q0/Lq8xEp6zZlUpgd1DoGfC/6pZXJ8UQVFG5ymd27bOD4O+7EWevAkEAzYHfclV/kP3V1aCR0KoXBHA4WIHKa+JaVuFMIDZqd/SsfsoKDn+Stsajl/e8LAwt9XXctYWNvGsVfCSfZ5Y3tw==-----END RSA PRIVATE KEY-----",\n    "s_sdk_baidu_remote_server_root": "https://gamesres.ultralisk.cn/h5_games_res/game70/baidu/v2",\n    "s_sdk_baidu_version_name": "1.0.5.1",\n    "s_sdk_baidu_video_id": "6674514",\n    "s_sdk_cdk_app_id": "75",\n    "s_sdk_cdk_url": "https://cdkey.ultralisk.cn/commoncdk/usecdk",\n    "s_sdk_cop_addr": "https://copv7.ultralisk.cn/h5/getdata/",\n    "s_sdk_cop_game_id": "0",\n    "s_sdk_facebook_appId": "1593606980978477",\n    "s_sdk_facebook_interId": "4864743603539728_5324943400853077",\n    "s_sdk_facebook_videoId": "4864743603539728_5324944030853014",\n    "s_sdk_facebook_bannerId": "4864743603539728_5324942390853178",\n    "s_sdk_funheadline_app_id": "a3LPRX3GycSy",\n    "s_sdk_funheadline_app_key": "WOc4EWYaobKCuGWEo2GnIMYHMFMCHFa8FGxvWRCROCWoDDDDOjPaDgFEOEOaUEID",\n    "s_sdk_funheadline_gameres_url": "https://gamesres.ultralisk.cn/h5_games_res/game70/funheadline/v1",\n    "s_sdk_hago_country_code": "ID",\n    "s_sdk_hago_env": "ProDuct",\n    "s_sdk_hago_game_id": "yeluoliwawadian",\n    "s_sdk_hago_language": "id",\n    "s_sdk_headline_app_secret": "58ac9c80e8070e7740308212a206793387853814",\n    "s_sdk_headline_appid": "tt347f42c2ab55ec48",\n    "s_sdk_headline_banner_adunit": "2ctcajrhacpkpm8ii1",\n    "s_sdk_headline_change_log": "",\n    "s_sdk_headline_douyin_find_me_url": "https://gamesres.ultralisk.cn/h5_games_res/common/find_me/douyin_icon/70.png",\n    "s_sdk_headline_get_token_url": "https://sdkserver.ultralisk.cn/ttgettoken",\n    "s_sdk_headline_get_video_info_url": "https://gate.snssdk.com/developer/api/get_video_info",\n    "s_sdk_headline_inter_adunit": "2vlh5eda2ep1d6flfh",\n    "s_sdk_headline_remote_server_root": "https://gamesres.ultralisk.cn/h5_games_res/game70/headline/v4",\n    "s_sdk_headline_share_video_tag": "",\n    "s_sdk_headline_sub_context": "",\n    "s_sdk_headline_subscribe_url": "",\n    "s_sdk_headline_top_video_by_like_url": "https://gate.snssdk.com/developer/api/get_top_video_ids_by_like",\n    "s_sdk_headline_top_video_by_time_url": "https://gate.snssdk.com/developer/api/get_top_video_ids_by_time",\n    "s_sdk_headline_toutiao_find_me_url": "https://gamesres.ultralisk.cn/h5_games_res/common/find_me/toutiao_icon/70.png",\n    "s_sdk_headline_version_name": "2.6.20",\n    "s_sdk_headline_video_adunit": "4cbic3k9a4355944i3",\n    "s_sdk_huawei_appid": "100874093",\n    "s_sdk_huawei_banner_adunit": null,\n    "s_sdk_huawei_inter_adunit": "0",\n    "s_sdk_huawei_login_tip": "",\n    "s_sdk_huawei_merchant_id": "890086200300024295",\n    "s_sdk_huawei_merchant_name": "\u6210\u90fd\u53cc\u6668\u79d1\u6280\u6709\u9650\u516c\u53f8",\n    "s_sdk_huawei_native_ids": null,\n    "s_sdk_huawei_package_name": "cn.ultralisk.game70.huawei",\n    "s_sdk_huawei_private_key": "-----BEGIN RSA PRIVATE KEY-----MIIEowIBAAKCAQEAhkWqHmAEgXaeNV/kSxT6JHMwAXLy9+NTtCyMKQwXgBH9Rv5eCR6Z1XmcO0yMj0r8takgGG0h7s4qh3TpIs0ajRteKFa66ywS1/1ASOVpI9rwkNgQvzduFAXUs1tSzc+GG+FR8LJR+i0MSHm+weHJJOUzLnWl9PFUVM1Mo2AOhZYrd6edy6KMy9TcQgaUfuBtv85/MentrtrrlK1z9VeHJSs3kSLOu985S5tfa2YEk/7r1ijVRVJDj3DxlKm3kh6XPV5ti5HDhhz7xbOkd1vvQyJ5XEc657jkN7spPirO5NELPcOjQjgMeUQOLhtWiF4Uo6lRKkwNB7Jq1kINnzZgrwIDAQABAoIBAASToPn6aDI+J/lbbzgh8GlypasUTx96QlL3W8BVwa1OBQCOULKQi592Tt10kqvwWznD7ddMolCgpVwgSjFd+q7e78WB40rQd0ShGg0CCM895LTt2xrxbuaZe50GGrCaMhDcNsNKCLegISA39MkTWEb81ahFPqa2h8XWM5ZerVAJ+DCzEB5SYic53H+B8pJjy06HRgufFene7xzkLWI5oDLE1T8zu7aCkcJn3oVlgYnGQvv/hAJh4I87Zo/hXm29JENa5KbK0Yx0lhLhm4MHqex359jmZaNGqVP64YCBmvjE2ZSnFI5BiMlYYRMWoLqzOzKDV6XzNQTbJWIahwq6FVUCgYEAujpisZfeN2aVI89hKyUfl8ruM4BUcZxiKACkohoQXRnrC5bR67KFR1v/W80s73VS9V5Tn1ODYX4Vf9An3YiyuVpMPCLoRQ3zh9sRGamYMTA8RQlZVwxHoVBhUmT9CkPRpS1ORvUY69MWzjq1kUbvrrkT6SRHZaiZOQyQAiMJc1UCgYEAuJQM9fnCaEXnYB/aXgYSUFUwc2Vb7oaKwhvD83vtvvEs4PegB1s4fSQeyFHWkjaNAodcfyEOUk6incLpJfxn83OVmgS7tvl+N1WdDbhLgxPHPre2TdzSUQ9So/p1SCEL9vorTeY80s99mC2mKLrk2aeYO9l0c2lkxAJu7d6kS/MCgYAJigYWLL5QPivziqLij+M/ZkCvWKp6q1UH0YidWRJvgm1cyZv1I87Z6ed5r1fW6D6YnP1RkviO3OODCYmROnhVMD/pcKxPJTjNQ7Zrhxlpo5viuWjfIZzlsXVawBuKFBFAEcMJtXJSWhy38Z/tUiHi5E4VyiryFSHMH02dHmhUhQKBgASuTH3YbaOzUiDP7fvAb6p13pqukVxFMTOm/JsqI2daOmciIH7PQ2l5BwbRfH2MwJq10BSxQ+m2cM1Laho6gnBcGAkl4ZTMUvUYSLlWWSPj1oOyqP7kgLjpiJD8AwlnPSRwR7TcB+LYvDilv7b8tl0GsQejhh5/J70IysNhiA0dAoGBAJ/stJyqfwjicapAhsWCQnKa8AiD8vxoBQNeKgcE33G7JGJu65beFUN0YyscNsvdGLU3ln+iQ760O6fpsB+nNQgudHVx30s8USQkU6RqtIEMPM8ziL67DfpJhJzNOIkB5P/k8Ng2BafnigPTczxSDk1hK85CSNEyoyrz7Xa1Q9g0-----END RSA PRIVATE KEY-----",\n    "s_sdk_huawei_public_key": "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAhkWqHmAEgXaeNV/kSxT6JHMwAXLy9+NTtCyMKQwXgBH9Rv5eCR6Z1XmcO0yMj0r8takgGG0h7s4qh3TpIs0ajRteKFa66ywS1/1ASOVpI9rwkNgQvzduFAXUs1tSzc+GG+FR8LJR+i0MSHm+weHJJOUzLnWl9PFUVM1Mo2AOhZYrd6edy6KMy9TcQgaUfuBtv85/MentrtrrlK1z9VeHJSs3kSLOu985S5tfa2YEk/7r1ijVRVJDj3DxlKm3kh6XPV5ti5HDhhz7xbOkd1vvQyJ5XEc657jkN7spPirO5NELPcOjQjgMeUQOLhtWiF4Uo6lRKkwNB7Jq1kINnzZgrwIDAQAB",\n    "s_sdk_huawei_tiny_package_server": "https://gamesres.ultralisk.cn/h5_games_res/game68/vivo/v3",\n    "s_sdk_huawei_version_code": "3",\n    "s_sdk_huawei_version_name": "1.0.0",\n    "s_sdk_huawei_video_adunit": null,\n    "s_sdk_iqiyi_gameres_url": "https://gamesres.ultralisk.cn/h5_games_res/game70/iqiyi/v1",\n    "s_sdk_jkplay_banner_id": "283409657",\n    "s_sdk_jkplay_game_key": "b88di3rlg1",\n    "s_sdk_jkplay_interstitial_id": "598314602",\n    "s_sdk_jkplay_tiny_package_server": "https://gamesres.ultralisk.cn/h5_games_res/game70/jkplay/v2",\n    "s_sdk_jkplay_video_id": "619034275",\n    "s_sdk_jump_game_statis_game_indexes": "",\n    "s_sdk_juzhang_clientId": null,\n    "s_sdk_juzhang_clientSecret": null,\n    "s_sdk_juzhang_gameres_url": "https://gamesres.ultralisk.cn/h5_games_res/game70/juzhang/v0",\n    "s_sdk_kaixin_gameres_url": "https://gamesres.ultralisk.cn/h5_games_res/game70/kaixin/v1",\n    "s_sdk_kaixin_interstitial_id": "",\n    "s_sdk_kaixin_share_title": "",\n    "s_sdk_kaixin_video_id": "10000142",\n    "s_sdk_kk_ad_pos_id": null,\n    "s_sdk_lan_debug_address": "",\n    "s_sdk_lianshang_bannerId": "",\n    "s_sdk_lianshang_tiny_package_server": "https://gamesres.ultralisk.cn/h5_games_res/game70/lianshang/v1",\n    "s_sdk_lianshang_videoId": "",\n    "s_sdk_lianxin_appid": "lxaa1c2f8185d746fd",\n    "s_sdk_lianxin_bannerId": "36",\n    "s_sdk_lianxin_cdn_server": "https://gamesres.ultralisk.cn/h5_games_res/game70/lianxin/v1/",\n    "s_sdk_lianxin_clientkey": "8d5cda0457e74ba1a61def67dcf94d9d",\n    "s_sdk_lianxin_interId": "75",\n    "s_sdk_lianxin_serverkey": "4df4b184fe6411ebb349525400c34b90",\n    "s_sdk_lianxin_share_icon_url": "",\n    "s_sdk_lianxin_videoId": "74",\n    "s_sdk_megadata_close_table_type_ids": "",\n    "s_sdk_megadata_game_id": "54",\n    "s_sdk_megadata_point_event_open_category_ids": "0;1;2;3;4;5;6;7;8;9;10",\n    "s_sdk_megadata_server_jump_game_type_id": "jumpabtest",\n    "s_sdk_megadata_server_type_id": "29",\n    "s_sdk_megadata_test_url": "https://megadatav7.ultralisk.cn/batchtestmodedataupload",\n    "s_sdk_megadata_url": "https://megadatav7.ultralisk.cn/batchdataupload",\n    "s_sdk_meizu_gameres_url": "",\n    "s_sdk_meizuqg_banner_id": "QUrgqpam",\n    "s_sdk_meizuqg_inter_id": "YEdkt4cv",\n    "s_sdk_meizuqg_package_name": "com.ultralisk.game70.meizu",\n    "s_sdk_meizuqg_tiny_package_server": "https://gamesres.ultralisk.cn/h5_games_res/game70/meizuqg/v1",\n    "s_sdk_meizuqg_version_code": "10",\n    "s_sdk_meizuqg_version_name": "1.3.6",\n    "s_sdk_meizuqg_video_id": "LUxieSxs",\n    "s_sdk_mgc_bannerId": "0",\n    "s_sdk_mgc_gameres_url": "0",\n    "s_sdk_mgc_interId": "0",\n    "s_sdk_mgc_videoId": "0",\n    "s_sdk_moli_gameres_url": "https://gamesres.ultralisk.cn/h5_games_res/game70/moli/v1",\n    "s_sdk_moli_scene_id": "yeluoli001",\n    "s_sdk_oppoqg_app_key": "1hz3n92XQ16sCw448sg08W4kg",\n    "s_sdk_oppoqg_appid": "30223227",\n    "s_sdk_oppoqg_appsecret": "86A55674e5fE1E2d7E435D29D676Cc77",\n    "s_sdk_oppoqg_banner_box_id": "218392",\n    "s_sdk_oppoqg_banner_id": "142013",\n    "s_sdk_oppoqg_inter_box_id": "218385",\n    "s_sdk_oppoqg_interstitial_id": "142020",\n    "s_sdk_oppoqg_native_ids": {\n        "1": "142030",\n        "2": "142030",\n        "3": "142030"\n    },\n    "s_sdk_oppoqg_package_name": "com.ultralisk.game70.nearme.gamecenter",\n    "s_sdk_oppoqg_pre_order_url": "https://jits.open.oppomobile.com/jitsopen/api/pay/v1.0/preOrder",\n    "s_sdk_oppoqg_private_key": "-----BEGIN RSA PRIVATE KEY-----MIICXgIBAAKBgQC46Giy1S4Zuys/c3QO6VZVWAOo1tussbIpqI0M7edU9OC732leFej2DmG3O9XRh9NlYjoAq4hyt7DxiZ6MyN8IdStZn4b0/e/CZKQA5WaCI5h71hUTwCJTzHZHvO+woDWaE2mOSsBfjAdwTsHUr32eCPzju/1zatys02W7ai4v+wIDAQABAoGAGjbAmRHF3ln9kJpCitajqae3pRkIvZvXgTZnAL09fXrV3WyX2IHMrA1v5vUxo+nYm1foly26Q2EtUaDL/HOBwshbwEtR5TR0g+kZBpA+S4wt/ujZPlALmZiGuQjjqwWFo9OfeskXer7vA5UWYemDMvy7XQ2TWoLNOzI+LaVvEPECQQDpEgY7XmrKeq8qkUFPsDjcEa7SZ2eEEOps0NKmewGvAaiavm7+8yCdS/ZPS7ZD6590TanFWy3gJtugw/vPa2tpAkEAyxlj8u+EYKchPBYehuRjm4W5SlJNAGrABqrJjM50jQ4aRVr1LbS6R0S77kTaZLTV/w8eYk1LS9cTCaY+JB+HwwJBAIXrlmscmG4ZynbCGe4JCtLg0jwRsHhBJAI8hx2jxlbhtBieXbbeypm3YSM1FNi4FdpFGczN1HFcwowAsLsBNSkCQQC9YgywQKYI1m+ILvwCPr+fCt/PrNS+mcw7q0/Lq8xEp6zZlUpgd1DoGfC/6pZXJ8UQVFG5ymd27bOD4O+7EWevAkEAzYHfclV/kP3V1aCR0KoXBHA4WIHKa+JaVuFMIDZqd/SsfsoKDn+Stsajl/e8LAwt9XXctYWNvGsVfCSfZ5Y3tw==-----END RSA PRIVATE KEY-----",\n    "s_sdk_oppoqg_tiny_package_server": "https://gamesres.ultralisk.cn/h5_games_res/game70/oppoqg/v2",\n    "s_sdk_oppoqg_version_code": "15",\n    "s_sdk_oppoqg_version_name": "15",\n    "s_sdk_oppoqg_video_id": "142032",\n    "s_sdk_qihoo_banner_id": "",\n    "s_sdk_qihoo_gameres_url": null,\n    "s_sdk_qihoo_video_id": "",\n    "s_sdk_qq_app_id": "1110035152",\n    "s_sdk_qq_appbox_id": "cd0ed8ab90cf37445c6f76f0e07eb844",\n    "s_sdk_qq_banner_id": "47ecad6a352248ac843343fdd2be983e",\n    "s_sdk_qq_block_id": "0",\n    "s_sdk_qq_change_log": "",\n    "s_sdk_qq_inter_id": "bebe90e5fc8ba05afd6c756d0499eac2",\n    "s_sdk_qq_remote_server_root": "https://gamesres.ultralisk.cn/h5_games_res/game70/qq/v2",\n    "s_sdk_qq_sub_context": "",\n    "s_sdk_qq_version_name": "1.0.9",\n    "s_sdk_qq_video_id": "fb93f4e671f5d4c333f34a4d4b4d0781",\n    "s_sdk_refresh_resource_type": "dir",\n    "s_sdk_sdkdemo_gameres_url": "",\n    "s_sdk_uc_banner_id": null,\n    "s_sdk_uc_gameres_url": "https://gamesres.ultralisk.cn/h5_games_res/game70/uc/v1",\n    "s_sdk_uc_video_id": null,\n    "s_sdk_user_data_get_url": "https://h5gameserver.ultralisk.cn/getuserdata",\n    "s_sdk_user_data_save_url": "https://h5gameserver.ultralisk.cn/savealluserdata",\n    "s_sdk_version": "71f325da4",\n    "s_sdk_vivo_app_id": "100003280",\n    "s_sdk_vivo_app_secret": "0",\n    "s_sdk_vivo_banner_box_id": "0",\n    "s_sdk_vivo_banner_id": "3f379ce95f494b039e140c48603fcbd0",\n    "s_sdk_vivo_custom_adv_minSize": "720*630",\n    "s_sdk_vivo_custom_id": "0",\n    "s_sdk_vivo_inter_box_id": "0",\n    "s_sdk_vivo_interstitial_id": "f88b1aec427e41a0b3d6aec52119bc41",\n    "s_sdk_vivo_native_ids": {\n        "1": "37ccbbe70ddf494ca9700a0bfb209bfd",\n        "2": "37ccbbe70ddf494ca9700a0bfb209bfd",\n        "3": "37ccbbe70ddf494ca9700a0bfb209bfd"\n    },\n    "s_sdk_vivo_package_name": "com.ultralisk.game70.vivominigame",\n    "s_sdk_vivo_qg_url": "https://pay.vivo.com.cn/vivopay/order/request",\n    "s_sdk_vivo_tiny_package_server": "https://gamesres.ultralisk.cn/h5_games_res/game70/vivo/v2",\n    "s_sdk_vivo_version_code": "61",\n    "s_sdk_vivo_version_name": "1.5.10",\n    "s_sdk_vivo_video_id": "1d0bb3d60f8949a08431a33c4a032b9b",\n    "s_sdk_webreview_gameres_url": "https://gamesres.ultralisk.cn/h5_games_res/md5test/781e0fadf5c2319f70/",\n    "s_sdk_webreview_test_gameres_url": "https://gamesres.ultralisk.cn/h5_games_res/md5test/781e0fadf5c2319f70/",\n    "s_sdk_weixin_appid": "wxa44fb0b2873dbca0",\n    "s_sdk_weixin_appsecret": "de8594d7f29aeed1d381237ed50be763",\n    "s_sdk_weixin_banner_adunit_ids": {\n        "2": "adunit-70021d325b372b66"\n    },\n    "s_sdk_weixin_change_log": "",\n    "s_sdk_weixin_find_me_url": "https://gamesres.ultralisk.cn/h5_games_res/common/find_me/weixin_icon/70.png",\n    "s_sdk_weixin_grid_adunit_id": "adunit-c75066f2fc2b3ef1",\n    "s_sdk_weixin_interstitial_ids": {\n        "1": "adunit-64c6cad3aaa936f0"\n    },\n    "s_sdk_weixin_login_url": "https://sdkserver.ultralisk.cn/wxuserlogin",\n    "s_sdk_weixin_mch_id": "0",\n    "s_sdk_weixin_offer_id": "0",\n    "s_sdk_weixin_remote_server_root": "https://gamesres.ultralisk.cn/h5_games_res/game70/weixin/v1",\n    "s_sdk_weixin_sub_context": "",\n    "s_sdk_weixin_subscribe_url": "https://subscrible.ultralisk.cn/wxsubscrible/postwxsubscribleusermsg",\n    "s_sdk_weixin_version_name": "1.4.19",\n    "s_sdk_weixin_video_adunit_ids": {\n        "4": "adunit-14e3910b57675789"\n    },\n    "s_sdk_xiaomi_gameres_url": "https://gamesres.ultralisk.cn/h5_games_res/game70/xiaomi/v1",\n    "s_sdk_xiaomiqg_banner_id": "",\n    "s_sdk_xiaomiqg_insert_id": "12345",\n    "s_sdk_xiaomiqg_package_name": "cn.ultralisk.game70.mi",\n    "s_sdk_xiaomiqg_tiny_package_server": "https://gamesres.ultralisk.cn/h5_games_res/game70/xiaomiqg/v2",\n    "s_sdk_xiaomiqg_version_code": null,\n    "s_sdk_xiaomiqg_version_name": "1.0.0",\n    "s_sdk_xiaomiqg_video_id": "12345",\n    "srcRootPath": "assets/scripts/",\n    "t_customer_service_info": [\n        "kefu@ultralisk.cn"\n    ],\n    "t_sdk_baidu_jump_games": [\n        {\n            "id": "BQf3kGzeftWjILQ90n2BsmFkBAkOP9Dw",\n            "index": "83",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/83.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/83.png"\n            ]\n        },\n        {\n            "id": "agkY5p00cFcUknIs9LW9xW9Q6LZMlDLN",\n            "index": "86",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/86.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/86.png"\n            ]\n        },\n        {\n            "id": "lCrh6dpPbTAFPMjMfhEvU0Ex9kn6KGG9",\n            "index": "55v2",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/55v2.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/55v2.png"\n            ]\n        },\n        {\n            "id": "rHLWLgOdeaaWCgVea07awxLcGOVEWIOf",\n            "index": "56",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/56.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/56.png"\n            ]\n        },\n        {\n            "id": "jFG1LSc5YxBcFbhHikNYqYOqax4mBS8E",\n            "index": "82",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/82.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/82.png"\n            ]\n        },\n        {\n            "id": "EkVaIkAWsaHWWD0Rks1uvEHrYv1OClFq",\n            "index": "80",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/80.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/80.png"\n            ]\n        },\n        {\n            "id": "vhAHSZ2oCteEEtf8C6HiQeUZgWTj5F1M",\n            "index": "75",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/75.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/75.png"\n            ]\n        },\n        {\n            "id": "cA5GKqcGBGEgXmSXpNjxjOqDt0IB9boY",\n            "index": "74",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/74.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/74.png"\n            ]\n        },\n        {\n            "id": "WMIhnYCNyOcWP4TISwlEbZ04RtYwviL1",\n            "index": "79",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/79.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/79.png"\n            ]\n        },\n        {\n            "id": "9YTDrCKInzLR01Mh2qLyp5GT5gkPUlCz",\n            "index": "69",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/69.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/69.png"\n            ]\n        },\n        {\n            "id": "xV0P9UXGP2APaDTi7CXHFuIiKYmtkPMg",\n            "index": "78",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/78.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/78.png"\n            ]\n        },\n        {\n            "id": "2w4vuOxXbFGA1GqVYBI41kG1Atd3FVbw",\n            "index": "76",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/76.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/76.png"\n            ]\n        },\n        {\n            "id": "3B10fP8fRsHpjlOprdW89c2y8U313ps9",\n            "index": "73",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/73.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/73.png"\n            ]\n        },\n        {\n            "id": "AF9HIGa1PMVmyLMXbVYqYgNwFmYPtrRy",\n            "index": "85",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/85.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/85.png"\n            ]\n        },\n        {\n            "id": "G3Co4nKxv2rvToCBdKuaBLcmRaFqPSe8",\n            "index": "55",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu1/55.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_baidu2/55.png"\n            ]\n        }\n    ],\n    "t_sdk_baidu_pay_code": {\n        "1": {\n            "payCode": 1,\n            "price": "600",\n            "proName": "\u8d85\u503c\u94bb\u77f3\u5305"\n        },\n        "2": {\n            "payCode": 2,\n            "price": "1800",\n            "proName": "\u81fb\u9009\u94bb\u77f3\u5305"\n        }\n    },\n    "t_sdk_baidu_share_list": [\n        ""\n    ],\n    "t_sdk_common_event_ids": {\n        "add_subscrible": "102",\n        "click_more_game_icon_list": "106",\n        "click_more_game_icon_reward": "105",\n        "click_more_game_icon_single": "104",\n        "click_share": "101",\n        "click_subscrible": "103",\n        "open_cdk": "107",\n        "open_share": "100"\n    },\n    "t_sdk_common_modify_tag_afterBuild": [\n        \n    ],\n    "t_sdk_common_modify_tag_beforeBuild": [\n        \n    ],\n    "t_sdk_compress_json_includes": [\n        \n    ],\n    "t_sdk_compress_json_includes_rem": "",\n    "t_sdk_compress_res_config": [\n        {\n            "cmds": "jpeg-recompress --strip -t 0.4 --min 80 | guetzil --quality 85",\n            "rep": ".*//.jpg"\n        },\n        {\n            "cmds": "autopng --quality 40-80 | optipng -strip all -o7 | zopflipng -y --lossy_8bit --lossy_transparent",\n            "rep": ".*//.png"\n        }\n    ],\n    "t_sdk_cop_default_cop": {\n        "ad_video_ratios": "100;100;50;100;100;100;100;100;100;100;100;100;100;10;100;100;100;100;100;100;100;100;100;100;100;100;100;100;100;100;100;100;100",\n        "ad_insert_ratios": "100;100;100;100;100;100;100;100;100;100;100;100;100;10;100;100;100;0;0;0;0;0;100;100",\n        "ad_banner_ratios": "100;100;100;100;0;100;100;100;100;100;100;100;100;100;100;100;100;0;100;100;100;100;100;100;100;100;0;100;100;100;100;100;0;0;100;100;100;100;100;100;0;0;100;100;100;100;100;100",\n        "ad_mode": "3",\n        "ad_pop_cd": "30",\n        "alert_cds": "600;600;600;600;600;600;180",\n        "alert_orders": "1;2;3;4;5;6;7",\n        "alert_weights": "0;100;0;0;0;100;0"\n    },\n    "t_sdk_cop_simulate_city_data": {\n        "0": "\u672a\u77e5\u57ce\u5e02",\n        "1001": "\u6d77\u5357\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1002": "\u897f\u5b81",\n        "1003": "\u6d77\u4e1c",\n        "1004": "\u9ec4\u5357\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1005": "\u6d77\u897f\u8499\u53e4\u65cf\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1006": "\u6d77\u5317\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1007": "\u679c\u6d1b\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1008": "\u7389\u6811\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "101": "\u5317\u4eac",\n        "1101": "\u4e34\u590f\u56de\u65cf\u81ea\u6cbb\u5dde",\n        "1102": "\u7518\u5357\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "1103": "\u767d\u94f6",\n        "1104": "\u9647\u5357",\n        "1105": "\u5b9a\u897f",\n        "1106": "\u5e73\u51c9",\n        "1107": "\u91d1\u660c",\n        "1108": "\u9152\u6cc9",\n        "1109": "\u5f20\u6396",\n        "1110": "\u5e86\u9633",\n        "1111": "\u5170\u5dde",\n        "1112": "\u6b66\u5a01",\n        "1113": "\u5609\u5cea\u5173",\n        "1114": "\u5929\u6c34",\n        "1201": "\u94f6\u5ddd",\n        "1202": "\u56fa\u539f",\n        "1203": "\u5434\u5fe0",\n        "1204": "\u4e2d\u536b",\n        "1205": "\u77f3\u5634\u5c71",\n        "1301": "\u5546\u6d1b",\n        "1302": "\u5b89\u5eb7",\n        "1303": "\u6986\u6797",\n        "1304": "\u94dc\u5ddd",\n        "1305": "\u54b8\u9633",\n        "1306": "\u897f\u5b89",\n        "1307": "\u6e2d\u5357",\n        "1308": "\u6c49\u4e2d",\n        "1309": "\u5b9d\u9e21",\n        "1310": "\u5ef6\u5b89",\n        "1401": "\u957f\u6625",\n        "1402": "\u767d\u57ce",\n        "1403": "\u677e\u539f",\n        "1404": "\u767d\u5c71",\n        "1405": "\u5409\u6797",\n        "1406": "\u5ef6\u8fb9\u671d\u9c9c\u65cf\u81ea\u6cbb\u5dde",\n        "1407": "\u56db\u5e73",\n        "1408": "\u8fbd\u6e90",\n        "1409": "\u901a\u5316",\n        "1501": "\u94dc\u9675",\n        "1502": "\u4eb3\u5dde",\n        "1503": "\u9ec4\u5c71",\n        "1504": "\u6c60\u5dde",\n        "1505": "\u5408\u80a5",\n        "1506": "\u6dee\u5317",\n        "1507": "\u6ec1\u5dde",\n        "1508": "\u5bbf\u5dde",\n        "1509": "\u6dee\u5357",\n        "1510": "\u868c\u57e0",\n        "1511": "\u516d\u5b89",\n        "1512": "\u961c\u9633",\n        "1513": "\u829c\u6e56",\n        "1514": "\u5ba3\u57ce",\n        "1515": "\u5b89\u5e86",\n        "1516": "\u9a6c\u978d\u5c71",\n        "1601": "\u6069\u65bd\u571f\u5bb6\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde",\n        "1602": "\u4ed9\u6843",\n        "1603": "\u6b66\u6c49",\n        "1604": "\u5b5d\u611f",\n        "1605": "\u54b8\u5b81",\n        "1606": "\u5341\u5830",\n        "1607": "\u5929\u95e8",\n        "1608": "\u9ec4\u5188",\n        "1609": "\u5b9c\u660c",\n        "1610": "\u8944\u9633",\n        "1611": "\u9ec4\u77f3",\n        "1612": "\u8346\u95e8",\n        "1613": "\u968f\u5dde",\n        "1614": "\u8346\u5dde",\n        "1615": "\u9102\u5dde",\n        "1616": "\u795e\u519c\u67b6\u6797\u533a",\n        "1617": "\u6f5c\u6c5f",\n        "1701": "\u682a\u6d32",\n        "1702": "\u90b5\u9633",\n        "1703": "\u5cb3\u9633",\n        "1704": "\u5f20\u5bb6\u754c",\n        "1705": "\u6000\u5316",\n        "1706": "\u8861\u9633",\n        "1707": "\u957f\u6c99",\n        "1708": "\u5e38\u5fb7",\n        "1709": "\u90f4\u5dde",\n        "1710": "\u6c38\u5dde",\n        "1711": "\u6e58\u897f\u571f\u5bb6\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde",\n        "1712": "\u6e58\u6f6d",\n        "1713": "\u76ca\u9633",\n        "1714": "\u5a04\u5e95",\n        "1801": "\u5b89\u987a",\n        "1802": "\u9ed4\u5357\u5e03\u4f9d\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde",\n        "1803": "\u94dc\u4ec1",\n        "1804": "\u516d\u76d8\u6c34",\n        "1805": "\u8d35\u9633",\n        "1806": "\u9ed4\u4e1c\u5357\u82d7\u65cf\u4f97\u65cf\u81ea\u6cbb\u5dde",\n        "1807": "\u6bd5\u8282",\n        "1808": "\u9075\u4e49",\n        "1809": "\u9ed4\u897f\u5357\u5e03\u4f9d\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde",\n        "1901": "\u592a\u539f",\n        "1902": "\u957f\u6cbb",\n        "1903": "\u8fd0\u57ce",\n        "1904": "\u664b\u4e2d",\n        "1905": "\u5ffb\u5dde",\n        "1906": "\u6714\u5dde",\n        "1907": "\u664b\u57ce",\n        "1908": "\u9633\u6cc9",\n        "1909": "\u5927\u540c",\n        "1910": "\u4e34\u6c7e",\n        "1911": "\u5415\u6881",\n        "2001": "\u6765\u5bbe",\n        "2002": "\u67f3\u5dde",\n        "2003": "\u5d07\u5de6",\n        "2004": "\u767e\u8272",\n        "2005": "\u6cb3\u6c60",\n        "2006": "\u9632\u57ce\u6e2f",\n        "2007": "\u8d3a\u5dde",\n        "2008": "\u8d35\u6e2f",\n        "2009": "\u5317\u6d77",\n        "201": "\u4e0a\u6d77",\n        "2010": "\u5357\u5b81",\n        "2011": "\u6842\u6797",\n        "2012": "\u7389\u6797",\n        "2013": "\u94a6\u5dde",\n        "2014": "\u68a7\u5dde",\n        "2101": "\u51c9\u5c71\u5f5d\u65cf\u81ea\u6cbb\u5dde",\n        "2102": "\u6500\u679d\u82b1",\n        "2103": "\u4e50\u5c71",\n        "2104": "\u9042\u5b81",\n        "2105": "\u8d44\u9633",\n        "2106": "\u7ef5\u9633",\n        "2107": "\u81ea\u8d21",\n        "2108": "\u5fb7\u9633",\n        "2109": "\u96c5\u5b89",\n        "2110": "\u8fbe\u5dde",\n        "2111": "\u5e7f\u5143",\n        "2112": "\u5e7f\u5b89",\n        "2113": "\u963f\u575d\u85cf\u65cf\u7f8c\u65cf\u81ea\u6cbb\u5dde",\n        "2114": "\u7518\u5b5c\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "2115": "\u6210\u90fd",\n        "2116": "\u5357\u5145",\n        "2117": "\u6cf8\u5dde",\n        "2118": "\u5185\u6c5f",\n        "2119": "\u5b9c\u5bbe",\n        "2120": "\u5df4\u4e2d",\n        "2121": "\u7709\u5c71",\n        "2201": "\u90d1\u5dde",\n        "2202": "\u4e09\u95e8\u5ce1",\n        "2203": "\u6d1b\u9633",\n        "2204": "\u5f00\u5c01",\n        "2205": "\u4fe1\u9633",\n        "2206": "\u7126\u4f5c",\n        "2207": "\u8bb8\u660c",\n        "2208": "\u6fee\u9633",\n        "2209": "\u6d4e\u6e90",\n        "2210": "\u9e64\u58c1",\n        "2211": "\u5b89\u9633",\n        "2212": "\u9a7b\u9a6c\u5e97",\n        "2213": "\u65b0\u4e61",\n        "2214": "\u5357\u9633",\n        "2215": "\u6f2f\u6cb3",\n        "2216": "\u5e73\u9876\u5c71",\n        "2217": "\u5546\u4e18",\n        "2218": "\u5468\u53e3",\n        "2301": "\u77f3\u5bb6\u5e84",\n        "2302": "\u4fdd\u5b9a",\n        "2303": "\u6ca7\u5dde",\n        "2304": "\u8861\u6c34",\n        "2305": "\u5510\u5c71",\n        "2306": "\u90af\u90f8",\n        "2307": "\u5eca\u574a",\n        "2308": "\u79e6\u7687\u5c9b",\n        "2309": "\u90a2\u53f0",\n        "2310": "\u5f20\u5bb6\u53e3",\n        "2311": "\u627f\u5fb7",\n        "2401": "\u798f\u5dde",\n        "2402": "\u53a6\u95e8",\n        "2403": "\u5b81\u5fb7",\n        "2404": "\u8386\u7530",\n        "2405": "\u9f99\u5ca9",\n        "2406": "\u4e09\u660e",\n        "2407": "\u5357\u5e73",\n        "2408": "\u6cc9\u5dde",\n        "2409": "\u6f33\u5dde",\n        "2501": "\u5357\u660c",\n        "2502": "\u4e0a\u9976",\n        "2503": "\u8d63\u5dde",\n        "2504": "\u65b0\u4f59",\n        "2505": "\u9e70\u6f6d",\n        "2506": "\u629a\u5dde",\n        "2507": "\u840d\u4e61",\n        "2508": "\u5b9c\u6625",\n        "2509": "\u666f\u5fb7\u9547",\n        "2510": "\u5409\u5b89",\n        "2511": "\u4e5d\u6c5f",\n        "2601": "\u73e0\u6d77",\n        "2602": "\u4e1c\u839e",\n        "2603": "\u6c5f\u95e8",\n        "2604": "\u9633\u6c5f",\n        "2605": "\u60e0\u5dde",\n        "2606": "\u6c55\u5c3e",\n        "2607": "\u6885\u5dde",\n        "2608": "\u6e05\u8fdc",\n        "2609": "\u6e5b\u6c5f",\n        "2610": "\u63ed\u9633",\n        "2611": "\u5e7f\u5dde",\n        "2612": "\u4e91\u6d6e",\n        "2613": "\u6f6e\u5dde",\n        "2614": "\u6c55\u5934",\n        "2615": "\u97f6\u5173",\n        "2616": "\u6df1\u5733",\n        "2617": "\u4f5b\u5c71",\n        "2618": "\u4e2d\u5c71",\n        "2619": "\u8087\u5e86",\n        "2620": "\u8302\u540d",\n        "2621": "\u6cb3\u6e90",\n        "2701": "\u547c\u548c\u6d69\u7279",\n        "2702": "\u9521\u6797\u90ed\u52d2\u76df",\n        "2703": "\u4e4c\u5170\u5bdf\u5e03",\n        "2704": "\u901a\u8fbd",\n        "2705": "\u5305\u5934",\n        "2706": "\u963f\u62c9\u5584\u76df",\n        "2707": "\u5df4\u5f66\u6dd6\u5c14",\n        "2708": "\u5174\u5b89\u76df",\n        "2709": "\u9102\u5c14\u591a\u65af",\n        "2710": "\u4e4c\u6d77",\n        "2711": "\u547c\u4f26\u8d1d\u5c14",\n        "2712": "\u8d64\u5cf0",\n        "2801": "\u9e64\u5c97",\n        "2802": "\u9e21\u897f",\n        "2803": "\u54c8\u5c14\u6ee8",\n        "2804": "\u9ed1\u6cb3",\n        "2805": "\u4e03\u53f0\u6cb3",\n        "2806": "\u4f0a\u6625",\n        "2807": "\u5927\u5174\u5b89\u5cad\u5730\u533a",\n        "2808": "\u7261\u4e39\u6c5f",\n        "2809": "\u7ee5\u5316",\n        "2810": "\u9f50\u9f50\u54c8\u5c14",\n        "2811": "\u53cc\u9e2d\u5c71",\n        "2812": "\u5927\u5e86",\n        "2813": "\u4f73\u6728\u65af",\n        "2901": "\u846b\u82a6\u5c9b",\n        "2902": "\u8425\u53e3",\n        "2903": "\u4e39\u4e1c",\n        "2904": "\u6c88\u9633",\n        "2905": "\u629a\u987a",\n        "2906": "\u8fbd\u9633",\n        "2907": "\u5927\u8fde",\n        "2908": "\u978d\u5c71",\n        "2909": "\u76d8\u9526",\n        "2910": "\u961c\u65b0",\n        "2911": "\u672c\u6eaa",\n        "2912": "\u9526\u5dde",\n        "2913": "\u94c1\u5cad",\n        "2914": "\u671d\u9633",\n        "3001": "\u6dc4\u535a",\n        "3002": "\u4e34\u6c82",\n        "3003": "\u5a01\u6d77",\n        "3004": "\u83b1\u829c",\n        "3005": "\u65e5\u7167",\n        "3006": "\u6d4e\u5357",\n        "3007": "\u6cf0\u5b89",\n        "3008": "\u70df\u53f0",\n        "3009": "\u804a\u57ce",\n        "301": "\u5929\u6d25",\n        "3010": "\u4e1c\u8425",\n        "3011": "\u83cf\u6cfd",\n        "3012": "\u6ee8\u5dde",\n        "3013": "\u6f4d\u574a",\n        "3014": "\u5fb7\u5dde",\n        "3015": "\u9752\u5c9b",\n        "3016": "\u6d4e\u5b81",\n        "3017": "\u67a3\u5e84",\n        "3101": "\u5357\u4eac",\n        "3102": "\u5e38\u5dde",\n        "3103": "\u82cf\u5dde",\n        "3104": "\u65e0\u9521",\n        "3105": "\u76d0\u57ce",\n        "3106": "\u9547\u6c5f",\n        "3107": "\u8fde\u4e91\u6e2f",\n        "3108": "\u5bbf\u8fc1",\n        "3109": "\u5357\u901a",\n        "3110": "\u5f90\u5dde",\n        "3111": "\u6dee\u5b89",\n        "3112": "\u626c\u5dde",\n        "3113": "\u6cf0\u5dde",\n        "401": "\u91cd\u5e86",\n        "501": "\u5b81\u6ce2",\n        "502": "\u91d1\u534e",\n        "503": "\u5609\u5174",\n        "504": "\u7ecd\u5174",\n        "505": "\u6e56\u5dde",\n        "506": "\u8862\u5dde",\n        "507": "\u821f\u5c71",\n        "508": "\u676d\u5dde",\n        "509": "\u6e29\u5dde",\n        "510": "\u4e3d\u6c34",\n        "511": "\u53f0\u5dde",\n        "601": "\u510b\u5dde",\n        "602": "\u5b9a\u5b89\u53bf",\n        "603": "\u4e1c\u65b9",\n        "604": "\u4e94\u6307\u5c71",\n        "605": "\u5c6f\u660c\u53bf",\n        "606": "\u743c\u6d77",\n        "607": "\u6f84\u8fc8\u53bf",\n        "608": "\u743c\u4e2d\u9ece\u65cf\u82d7\u65cf\u81ea\u6cbb\u53bf",\n        "609": "\u4e09\u4e9a",\n        "610": "\u767d\u6c99\u9ece\u65cf\u81ea\u6cbb\u53bf",\n        "611": "\u6587\u660c",\n        "612": "\u9675\u6c34\u9ece\u65cf\u81ea\u6cbb\u53bf",\n        "613": "\u660c\u6c5f\u9ece\u65cf\u81ea\u6cbb\u53bf",\n        "614": "\u4fdd\u4ead\u9ece\u65cf\u82d7\u65cf\u81ea\u6cbb\u53bf",\n        "615": "\u4e34\u9ad8\u53bf",\n        "616": "\u6d77\u53e3",\n        "617": "\u4e07\u5b81",\n        "618": "\u4e50\u4e1c\u9ece\u65cf\u81ea\u6cbb\u53bf",\n        "701": "\u8fea\u5e86\u85cf\u65cf\u81ea\u6cbb\u5dde",\n        "702": "\u897f\u53cc\u7248\u7eb3\u50a3\u65cf\u81ea\u6cbb\u5dde",\n        "703": "\u4e34\u6ca7",\n        "704": "\u4fdd\u5c71",\n        "705": "\u7389\u6eaa",\n        "706": "\u5fb7\u5b8f\u50a3\u65cf\u666f\u9887\u65cf\u81ea\u6cbb\u5dde",\n        "707": "\u7ea2\u6cb3\u54c8\u5c3c\u65cf\u5f5d\u65cf\u81ea\u6cbb\u5dde",\n        "708": "\u5927\u7406\u767d\u65cf\u81ea\u6cbb\u5dde",\n        "709": "\u4e3d\u6c5f",\n        "710": "\u6012\u6c5f\u5088\u50f3\u65cf\u81ea\u6cbb\u5dde",\n        "711": "\u666e\u6d31",\n        "712": "\u695a\u96c4\u5f5d\u65cf\u81ea\u6cbb\u5dde",\n        "713": "\u6587\u5c71\u58ee\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde",\n        "714": "\u6606\u660e",\n        "715": "\u66f2\u9756",\n        "716": "\u662d\u901a",\n        "801": "\u62c9\u8428",\n        "802": "\u660c\u90fd",\n        "803": "\u5c71\u5357",\n        "804": "\u963f\u91cc\u5730\u533a",\n        "805": "\u6797\u829d",\n        "806": "\u65e5\u5580\u5219",\n        "807": "\u90a3\u66f2\u5730\u533a",\n        "901": "\u5580\u4ec0\u5730\u533a",\n        "902": "\u963f\u514b\u82cf\u5730\u533a",\n        "903": "\u548c\u7530\u5730\u533a",\n        "904": "\u54c8\u5bc6",\n        "905": "\u77f3\u6cb3\u5b50",\n        "906": "\u5410\u9c81\u756a",\n        "907": "\u535a\u5c14\u5854\u62c9\u8499\u53e4\u81ea\u6cbb\u5dde",\n        "908": "\u5df4\u97f3\u90ed\u695e\u8499\u53e4\u81ea\u6cbb\u5dde",\n        "909": "\u660c\u5409\u56de\u65cf\u81ea\u6cbb\u5dde",\n        "910": "\u5854\u57ce\u5730\u533a",\n        "911": "\u514b\u5b5c\u52d2\u82cf\u67ef\u5c14\u514b\u5b5c\u81ea\u6cbb\u5dde",\n        "912": "\u963f\u52d2\u6cf0\u5730\u533a",\n        "913": "\u4e4c\u9c81\u6728\u9f50",\n        "914": "\u514b\u62c9\u739b\u4f9d",\n        "915": "\u4f0a\u7281\u54c8\u8428\u514b\u81ea\u6cbb\u5dde"\n    },\n    "t_sdk_hago_share_list": [\n        \n    ],\n    "t_sdk_headline_jump_games": [\n        {\n            "id": "ttce78b8c5514341ba",\n            "index": "83",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline1/83.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline2/83.png"\n            ]\n        },\n        {\n            "id": "ttd62da0904916d98f",\n            "index": "100",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline1/100.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline2/100.png"\n            ]\n        },\n        {\n            "id": "tt36244099a91f3984",\n            "index": "110",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline1/110.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline2/110.png"\n            ]\n        },\n        {\n            "id": "tt0ed0786d91eb92cc",\n            "index": "86",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline1/86.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline2/86.png"\n            ]\n        },\n        {\n            "id": "tt3321459cac1b2a8e",\n            "index": "55v2",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline1/55v2.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline2/55v2.png"\n            ]\n        },\n        {\n            "id": "tt9e56e8eb017c109e",\n            "index": "56",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline1/56.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline2/56.png"\n            ]\n        },\n        {\n            "id": "tt4e2a3897d110084b",\n            "index": "82",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline1/82.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline2/82.png"\n            ]\n        },\n        {\n            "id": "tt286b5ed6b74165b2",\n            "index": "80",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline1/80.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline2/80.png"\n            ]\n        },\n        {\n            "id": "ttbeffc84221d594a2",\n            "index": "75",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline1/75.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline2/75.png"\n            ]\n        },\n        {\n            "id": "tt2c515aecb37b1973",\n            "index": "74",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline1/74.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_headline2/74.png"\n            ]\n        }\n    ],\n    "t_sdk_headline_jump_games_video_type": [\n        \n    ],\n    "t_sdk_headline_pay_code": {\n        \n    },\n    "t_sdk_headline_share_list": [\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game70/share1.jpg",\n            "templateId": "1de8ho6ghegh870e4e",\n            "title": "\u4f60\u7684\u53f6\u7f57\u4e3d\u5a03\u5a03\u5e97\u5df2\u5c31\u7eea\uff0c\u7acb\u5373\u5f00\u59cb\u7ecf\u8425\u5427~"\n        },\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game70/share2.jpg",\n            "templateId": "38oa2n54jkal2bkhb3",\n            "title": "\u6211\u8bbe\u8ba1\u7684\u53f6\u7f57\u4e3d\u5a03\u5a03\u672c\u5468\u9500\u91cf\u7b2c\u4e8c\u540d\uff0c\u4f60\u4e5f\u6765\u8bd5\u8bd5\u5427\uff01"\n        },\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game70/share3.jpg",\n            "templateId": "4686hwwmhcv4615lno",\n            "title": "\u8bbe\u8ba1\u4e2a\u6027\u5a03\u5a03\uff0c\u5f00\u4e00\u5bb6\u4e13\u5c5e\u53f6\u7f57\u4e3d\u5a03\u5a03\u5e97\uff01"\n        }\n    ],\n    "t_sdk_headline_share_recorder_video_desc": [\n        [\n            "\u53f6\u7f57\u4e3d\u5a03\u5a03\u5e97",\n            "\u6296\u97f3\u5c0f\u6e38\u620f",\n            "\u4f60\u4eec\u5236\u4f5c\u7684\u5a03\u5a03\u6700\u9ad8\u552e\u4ef7\u662f\u591a\u5c11\uff1f"\n        ],\n        [\n            "\u53f6\u7f57\u4e3d\u5a03\u5a03\u5e97",\n            "\u6296\u97f3\u5c0f\u6e38\u620f",\n            "\u5982\u679c\u6211\u80fd\u62e5\u6709\u6240\u6709\u7684\u5a03\u5a03\u5c31\u597d\u4e86\uff01"\n        ],\n        [\n            "\u53f6\u7f57\u4e3d\u5a03\u5a03\u5e97",\n            "\u6296\u97f3\u5c0f\u6e38\u620f",\n            "\u5a03\u5a03\u7a7f\u5f97\u8863\u670d\u5c45\u7136\u8fd9\u4e48\u597d\u770b\uff01\u6211\u9178\u4e86\u2026\u2026~"\n        ]\n    ],\n    "t_sdk_headline_share_video_cuttemplateid": {\n        \n    },\n    "t_sdk_headline_subscribe_templete_ids": {\n        \n    },\n    "t_sdk_headline_tt_navigate_to_mini_game_app_id_list": [\n        "ttce78b8c5514341ba",\n        "ttd62da0904916d98f",\n        "tt36244099a91f3984",\n        "tt0ed0786d91eb92cc",\n        "tt3321459cac1b2a8e",\n        "tt9e56e8eb017c109e",\n        "tt4e2a3897d110084b",\n        "tt286b5ed6b74165b2",\n        "ttbeffc84221d594a2",\n        "tt2c515aecb37b1973"\n    ],\n    "t_sdk_huawei_adv_tag_2_native_index": null,\n    "t_sdk_huawei_native_index_2_native_id": null,\n    "t_sdk_huawei_pay_code": {\n        "1": {\n            "payCode": 1,\n            "price": "600",\n            "proName": "\u5c11\u91cf\u91d1\u5e01"\n        },\n        "2": {\n            "payCode": 2,\n            "price": "1800",\n            "proName": "\u5927\u91cf\u91d1\u5e01"\n        }\n    },\n    "t_sdk_kaixin_share_list": [\n        {\n            "imageUrl": "",\n            "title": "\u9b54\u6cd5\u53d8\u8eab\uff0c\u5c0f\u9b54\u4ed9\u5168\u65b0\u6362\u88c5\u4e4b\u65c5\uff01"\n        }\n    ],\n    "t_sdk_oppoqg_adv_tag_2_native_index": {\n        \n    },\n    "t_sdk_oppoqg_jump_games": [\n        {\n            "id": "com.ultralisk.game83.nearme.gamecenter",\n            "index": "83",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo1/83.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo2/83.png"\n            ]\n        },\n        {\n            "id": "com.ultralisk.game86.nearme.gamecenter",\n            "index": "86",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo1/86.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo2/86.png"\n            ]\n        },\n        {\n            "id": "cn.ultralisk.game56.kyx.nearme.gamecenter",\n            "index": "56",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo1/56.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo2/56.png"\n            ]\n        },\n        {\n            "id": "com.ultralisk.game75.nearme.gamecenter",\n            "index": "75",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo1/75.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo2/75.png"\n            ]\n        },\n        {\n            "id": "com.ultralisk.game74.nearme.gamecenter",\n            "index": "74",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo1/74.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo2/74.png"\n            ]\n        },\n        {\n            "id": "com.ultralisk.game55v2.nearme.gamecenter",\n            "index": "55v2",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo1/55v2.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_oppo2/55v2.png"\n            ]\n        }\n    ],\n    "t_sdk_oppoqg_native_index_2_native_id": {\n        \n    },\n    "t_sdk_oppoqg_pay_code": {\n        "1": {\n            "payCode": 1,\n            "price": "600",\n            "proName": "\u8d85\u503c\u94bb\u77f3\u5305"\n        },\n        "2": {\n            "payCode": 2,\n            "price": "1800",\n            "proName": "\u81fb\u9009\u94bb\u77f3\u5305"\n        }\n    },\n    "t_sdk_oppoqg_show_banner_box_adv_tags": [\n        \n    ],\n    "t_sdk_oppoqg_show_inter_box_adv_tags": [\n        \n    ],\n    "t_sdk_privacyPolicy_dataArray": [\n        {\n            "name": "\u9690\u79c1\u653f\u7b56",\n            "url": "https://gamesres.ultralisk.cn/notice/policy/oppoleishoupolicy.json"\n        }\n    ],\n    "t_sdk_qq_share_list": [\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game70/share1.jpg",\n            "title": "\u4f60\u7684\u53f6\u7f57\u4e3d\u5a03\u5a03\u5e97\u5df2\u5c31\u7eea\uff0c\u7acb\u5373\u5f00\u59cb\u7ecf\u8425\u5427~"\n        },\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game70/share2.jpg",\n            "title": "\u6211\u8bbe\u8ba1\u7684\u53f6\u7f57\u4e3d\u5a03\u5a03\u672c\u5468\u9500\u91cf\u7b2c\u4e8c\u540d\uff0c\u4f60\u4e5f\u6765\u8bd5\u8bd5\u5427\uff01"\n        },\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game70/share3.jpg",\n            "title": "\u8bbe\u8ba1\u4e2a\u6027\u5a03\u5a03\uff0c\u5f00\u4e00\u5bb6\u4e13\u5c5e\u53f6\u7f57\u4e3d\u5a03\u5a03\u5e97\uff01"\n        }\n    ],\n    "t_sdk_record_duration_limit_object": {\n        "*": {\n            "max": 300,\n            "min": 3\n        },\n        "2": {\n            "max": 300,\n            "min": 15\n        }\n    },\n    "t_sdk_refresh_channels": [\n        "huawei",\n        "baishan"\n    ],\n    "t_sdk_trim_adv_err_object": {\n        "*": "\u5e7f\u544a\u64ad\u653e\u5931\u8d25\u4e86\uff0c\u91cd\u65b0\u8bd5\u8bd5\u770b\u5427\uff01",\n        "baidu": {\n            "code||errCode": {\n                "3010003": "\u60a8\u7684\u7f51\u7edc\u597d\u50cf\u4e0d\u591f\u6d41\u7545\uff0c\u8bf7\u66f4\u6362\u5230\u826f\u597d\u7684\u7f51\u7edc\u73af\u5883\u518d\u64ad\u653e\u5e7f\u544a\u3002",\n                "3010005||3010006": "\u6b63\u5728\u4e3a\u60a8\u64ad\u653e\u5e7f\u544a\uff0c\u8bf7\u7a0d\u7b49\u4e00\u4f1a\u513f\uff0c\u4e0d\u8981\u91cd\u590d\u70b9\u51fb\u3002"\n            }\n        },\n        "headline||weixin||qq": {\n            "code||errCode": {\n                "1004": "\u6682\u65f6\u6ca1\u6709\u9002\u5408\u60a8\u89c2\u770b\u7684\u5e7f\u544a\uff0c\u8bf7\u7a0d\u7b49\u4e00\u4f1a\u513f\u518d\u8bd5\u5427\uff01"\n            }\n        },\n        "oppoqg": {\n            "(this.errCode==1001 || this.errCode == 1004)&&errMsg": {\n                "/10001/||/10100/||/10101/||/10403/": "\u60a8\u7684\u7f51\u7edc\u597d\u50cf\u4e0d\u591f\u6d41\u7545\uff0c\u8bf7\u66f4\u6362\u5230\u826f\u597d\u7684\u7f51\u7edc\u73af\u5883\u518d\u64ad\u653e\u5e7f\u544a\u3002",\n                "/10405/": "\u60a8\u7684\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u592a\u4f4e\uff0c\u4e0d\u80fd\u64ad\u653e\u5e7f\u544a\u3002",\n                "/10406/": "\u9700\u8981\u8fde\u63a5\u5230 Wifi \u7f51\u7edc",\n                "/11002/": "\u8fd9\u4e2a\u5e7f\u544a\u53ea\u80fd\u5728OPPO\u624b\u673a\u4e0a\u64ad\u653e\uff0c\u8bf7\u786e\u8ba4\u60a8\u7684\u673a\u578b\u3002",\n                "/11003/": "\u6682\u65f6\u65e0\u6cd5\u64ad\u653e\u5e7f\u544a\uff0c\u8bf7\u7a0d\u7b49\u4e00\u4f1a\u513f\u518d\u8bd5\u54271\uff01"\n            }\n        },\n        "vivo": {\n            "code||errCode": {\n                "-100||101||500": "\u60a8\u7684\u7f51\u7edc\u597d\u50cf\u4e0d\u591f\u6d41\u7545\uff0c\u8bf7\u66f4\u6362\u5230\u826f\u597d\u7684\u7f51\u7edc\u73af\u5883\u518d\u64ad\u653e\u5e7f\u544a\u3002",\n                "-3||108||30005": "\u6682\u65f6\u65e0\u6cd5\u64ad\u653e\u5e7f\u544a\uff0c\u8bf7\u7a0d\u7b49\u4e00\u4f1a\u513f\u518d\u8bd5\u5427\uff01",\n                "30007": "\u6682\u65f6\u65e0\u6cd5\u64ad\u653e\u5e7f\u544a\uff0c\u8bf7\u7a0d\u7b49\u4e00\u4f1a\u513f\u518d\u8bd5\u5427\uff01",\n                "30010": "\u5e7f\u544a\u64ad\u653e\u5931\u8d25\u4e86\uff0c\u53ef\u80fd\u662f\u662f\u7531\u4e8e\u60a8\u7ecf\u5e38\u5173\u95ed\u5e7f\u544a\u9020\u6210\u7684\uff0c\u7a0d\u7b49\u4e00\u4f1a\u513f\u518d\u8bd5\u5427\u3002"\n            }\n        }\n    },\n    "t_sdk_uc_share_list": [\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game70/share1.jpg",\n            "title": "\u4f60\u7684\u53f6\u7f57\u4e3d\u5a03\u5a03\u5e97\u5df2\u5c31\u7eea\uff0c\u7acb\u5373\u5f00\u59cb\u7ecf\u8425\u5427~"\n        },\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game70/share2.jpg",\n            "title": "\u6211\u8bbe\u8ba1\u7684\u53f6\u7f57\u4e3d\u5a03\u5a03\u672c\u5468\u9500\u91cf\u7b2c\u4e8c\u540d\uff0c\u4f60\u4e5f\u6765\u8bd5\u8bd5\u5427\uff01"\n        },\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game70/share3.jpg",\n            "title": "\u8bbe\u8ba1\u4e2a\u6027\u5a03\u5a03\uff0c\u5f00\u4e00\u5bb6\u4e13\u5c5e\u53f6\u7f57\u4e3d\u5a03\u5a03\u5e97\uff01"\n        }\n    ],\n    "t_sdk_vivo_pay_code": {\n        "1": {\n            "payCode": 1,\n            "price": "600",\n            "proName": "\u8d85\u503c\u94bb\u77f3\u5305"\n        },\n        "2": {\n            "payCode": 2,\n            "price": "1800",\n            "proName": "\u81fb\u9009\u94bb\u77f3\u5305"\n        }\n    },\n    "t_sdk_vivo_share_list": [\n        {\n            \n        }\n    ],\n    "t_sdk_vivo_show_banner_box_adv_tags": [\n        \n    ],\n    "t_sdk_webreview_cdk_goodsid": [\n        {\n            "count": 100,\n            "goodsid": 2\n        }\n    ],\n    "t_sdk_weixin_grid_adunits": {\n        "list": "",\n        "list_roll": "",\n        "single": "",\n        "table": ""\n    },\n    "t_sdk_weixin_jump_games": [\n        {\n            "id": "wxc22ab8a3dd9ba848",\n            "index": "83",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/83.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/83.png"\n            ]\n        },\n        {\n            "id": "wxe6ff4d6d0f759a9e",\n            "index": "100",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/100.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/100.png"\n            ]\n        },\n        {\n            "id": "wxe22e720e831505df",\n            "index": "110",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/110.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/110.png"\n            ]\n        },\n        {\n            "id": "wx64bd4e57ca56d886",\n            "index": "55v2",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/55v2.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/55v2.png"\n            ]\n        },\n        {\n            "id": "wxb86b60ba6a42fd5a",\n            "index": "112",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/112.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/112.png"\n            ]\n        },\n        {\n            "id": "wxb46fd918cedeb944",\n            "index": "106",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/106.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/106.png"\n            ]\n        },\n        {\n            "id": "wx674c94b5a44a75de",\n            "index": "56",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/56.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/56.png"\n            ]\n        },\n        {\n            "id": "wxa0ba65844f626111",\n            "index": "82",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/82.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/82.png"\n            ]\n        },\n        {\n            "id": "wx242593952fb2df7a",\n            "index": "80",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/80.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/80.png"\n            ]\n        },\n        {\n            "id": "wx7b9b74c53dd576ac",\n            "index": "74",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/74.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/74.png"\n            ]\n        },\n        {\n            "id": "wxe96631b5cbe4ffc1",\n            "index": "79",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/79.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/79.png"\n            ]\n        },\n        {\n            "id": "wx4f87cd56ed816382",\n            "index": "55",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/55.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/55.png"\n            ]\n        },\n        {\n            "id": "wx1189f4046873d2d9",\n            "index": "69",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/69.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/69.png"\n            ]\n        },\n        {\n            "id": "wx6e4c7afc700917fc",\n            "index": "78",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/78.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/78.png"\n            ]\n        },\n        {\n            "id": "wx34cddecc3621aa58",\n            "index": "76",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/76.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/76.png"\n            ]\n        },\n        {\n            "id": "wx0fb566f4c045797b",\n            "index": "73",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/73.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/73.png"\n            ]\n        },\n        {\n            "id": "wxa743a1981387bc73",\n            "index": "85",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/85.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/85.png"\n            ]\n        },\n        {\n            "id": "wx43a316abd6205af7",\n            "index": "63",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/63.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/63.png"\n            ]\n        },\n        {\n            "id": "wxeab8875f495561a5",\n            "index": "53",\n            "rewards": [\n                [\n                    1,\n                    50\n                ]\n            ],\n            "urls": [\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin1/53.png",\n                "https://gamesres.ultralisk.cn/h5_games_res/common/jump_games_weixin2/53.png"\n            ]\n        }\n    ],\n    "t_sdk_weixin_navigate_to_mini_game_app_id_list": [\n        "wx358550c490c758f1",\n        "wx00e2ca888bc972f1",\n        "wx5fe1c456a58ea650",\n        "wx54a500095eba26d9",\n        "wx42b30376e4cdb6d2",\n        "wxcf2fd441de2457f4",\n        "wxe70e56ff32528e6b",\n        "wxdac7a9de3e343cf4",\n        "wxf4335314b18062c4",\n        "wxb1b328b4ffeb615a"\n    ],\n    "t_sdk_weixin_pay_code": {\n        \n    },\n    "t_sdk_weixin_share_list": [\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game70/share1.jpg",\n            "title": "\u4f60\u7684\u53f6\u7f57\u4e3d\u5a03\u5a03\u5e97\u5df2\u5c31\u7eea\uff0c\u7acb\u5373\u5f00\u59cb\u7ecf\u8425\u5427~"\n        },\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game70/share2.jpg",\n            "title": "\u6211\u8bbe\u8ba1\u7684\u53f6\u7f57\u4e3d\u5a03\u5a03\u672c\u5468\u9500\u91cf\u7b2c\u4e8c\u540d\uff0c\u4f60\u4e5f\u6765\u8bd5\u8bd5\u5427\uff01"\n        },\n        {\n            "imageUrl": "https://gamesres.ultralisk.cn/h5_games_res/shareimage/game70/share3.jpg",\n            "title": "\u8bbe\u8ba1\u4e2a\u6027\u5a03\u5a03\uff0c\u5f00\u4e00\u5bb6\u4e13\u5c5e\u53f6\u7f57\u4e3d\u5a03\u5a03\u5e97\uff01"\n        }\n    ],\n    "t_sdk_weixin_subscribe_templete_ids": {\n        \n    },\n    "targetCreatorBranch": "v1",\n    "targetCreatorExePath": "creator/CocosCreator.exe",\n    "targetCreatorGitAddr": "ude2/prj.ulcocoscreator2.0.10",\n    "targetProjectBranch": "v1_sdkv6_i18n_h5_release",\n    "targetProjectGitAddr": "ude2/prj.game70",\n    "tempCreatorProjectPaths": [\n        [\n            "assets/",\n            "assets/"\n        ],\n        [\n            "declare/",\n            "declare/"\n        ],\n        [\n            "packages/",\n            "packages/"\n        ],\n        [\n            "settings/",\n            "settings/"\n        ],\n        [\n            "jsconfig.json",\n            ""\n        ],\n        [\n            "project.json",\n            ""\n        ],\n        [\n            "tsconfig.json",\n            ""\n        ]\n    ],\n    "tempProjectName": "cc_proj",\n    "autoUploadPack": false,\n    "B_OBFUSCATOR_CCONFIG": false,\n    "B_SHOW_LICENCE_INFO_ON_LOADING": false,\n    "build_cc_web_mobile_module_config": {\n        "embedWebDebugger": false,\n        "compressJs": false,\n        "title": "\u53f6\u7f57\u4e3d\u5a03\u5a03\u5e97"\n    },\n    "i_sdk_licence_info_mode": 0,\n    "s_sdk_cop_channel_id": "169",\n    "s_sdk_cop_version": "0",\n    "s_sdk_licence_info": "",\n    "t_sdk_increment_fields": [\n        \n    ],\n    "_target_project_branch": "v1_sdkv6_i18n_h5_release",\n    "_target_project_log": "2021-01-21 10:36:13 +0800-zoupengwei-eb7a9d300",\n    "_target_last_commit_time": 1611196573,\n    "_target_creator_branch": "v1",\n    "_target_creator_log": "2021-11-29 14:23:58 +0800-gengxiaoxiao-bf0819d8",\n    "_target_creator_last_commit_time": 1638167038,\n    "prjVersion": "eb7a9d300",\n    "rootPath": "D:/ulwork/ulsdk/",\n    "rootSdkPath": "D:/ulwork/ulsdk/prj.sdk.html5/",\n    "gitRepoPath": "D:/ulwork/ulsdk/h5_games_res/",\n    "taskDate": "2021_12_30",\n    "taskTick": "2021_12_30_10_43_28",\n    "taskTickShort": "1230_104328",\n    "taskName": "weiyou",\n    "configName": "task_game70_yllwwd_v1",\n    "targetPath": "D:/ulwork/ulsdk/h5_out/70_weiyou_1230_104328/",\n    "resCachePath": "D:/ulwork/ulsdk/h5_res_cache/prj.game70/",\n    "packagePath": "D:/ulwork/ulsdk/prj.games.html5.channels.packages/prj.game70/prj.game70_v1_sdkv6_i18n_h5_release_weiyou_1230_104328/",\n    "buildDisabled": false,\n    "creatorExePath": "D:/ulwork/ude2/prj.ulcocoscreator2.0.10/creator/CocosCreator.exe",\n    "taskJsonPath": "D:/ulwork/ulsdk/prj.games.html5.channels.tasks/task_game70_yllwwd_v1/task.json",\n    "tempProjPath": "D:/ulwork/ulsdk/h5_out/70_weiyou_1230_104328/cc_proj/",\n    "moduleList": "common,build_cc_web_mobile,weiyou",\n    "envCheckResult": [\n        \n    ]\n}'),cc._RF.pop()},{}],en:[function(e,t,o){"use strict";cc._RF.push(t,"a6f7dHzIuhIloTwINBLjrEX","en"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.en={mgrPkMirror:{1:"Already claimed",2:"Need higher level"},vSubjectSuitDetailDialog:{1:"Ready",3:"Successfully put on",2:"Put on",4:"No items available"},vHudDialog:{1:"Big waves of orders are coming!",3:"Speed up",2:"Not now",5:"Add to max",4:"Add to max orders",7:"Confirm",6:"Great! Start your business now!",9:"Full orders",8:"Cancel"},mgrAd:{1:"Cooling down, try again later",2:"Failed to play"},vPromptAdDialog:{1:"Hint",3:"Not now",2:"Watch video",5:"Watch ads to get rewards",4:"Get",7:"No need",6:"Video reward",8:"OK"},vAdFaildDialog:{1:"Hint",3:"Cancel",2:"Failed to connect. Please check your network condition or try again later",4:"Retry"},vDailyQuestDialog:{1:"Tasks",2:"Not enough medals, complete some more tasks"},vPromptHudCrazyDialog:{1:"Big waves of orders are coming!",3:"Get",2:"Not now",4:"Speed up"},vProductResultDialog:{1:"Sell",3:"This doll is already on sale",2:"Confirm",5:"Failed to sell",4:"Successfully put on sale"},vHudRankDialog:{10:"Shops",1:"Not ranked",3:"Go to battle",2:"Go",5:"Name",4:"Rank",7:"Ranking",6:"Highest revenue",9:"Battle",8:"Match"},mgrShop:{1:"Failed to buy",3:"Not available",2:"Not enough [%s]"},vPartRankItem:{1:"Owned"},vPackingLvupDialog:{1:"Wrapping"},vPromptAdSelectDialog:{1:"Hint",3:"Watch ads to get for free",2:"Watch video to double",5:"Get",4:"Not now",6:"Watch ads to get for free"},vOfflineRewardDialog:{1:"Get",3:"Video reward",2:"Watch ads to double rewards",5:"OK",4:"No need",7:"Not now",6:"2x claim"},vPkMirrorDialog:{1:"On stage",3:"Dress up",2:"Get rewards",5:"Not enough times, please try again later",4:"Free"},vBuildingStoreDialog:{11:"Watch ad",10:"Watch ad to get 2 stamina for free",13:"Hint",12:"Not enough stamina",15:"Cancel",14:"Are you sure you want to close the shop?",17:"Full orders",16:"Yes",18:"Can't hire more",1:"Dollhouse",3:"Not enough orders. Get more orders now!",2:"Wrapping",5:"Add to max",4:"Not now",7:"No more customers",6:"Level: %s",9:"Open",8:"Something went wrong?"},vAdWaitingDialog:{1:"Hint",3:"Cancel",2:"Connecting\u2026"},vBuildingStoreDetailDialog:{11:"Successfully upgraded!",10:"Successfully unlocked!",1:"Current level: ",3:"Next level: ",2:"Capacity: ",5:"Upgrade",4:"Dollhouse",7:"Free",6:"Watch ad to upgrade for free",9:"Max",8:"Not now"},vSignLotteryItem:{1:"Unlock at level %s"},daily_quest_template_db_desc:{1:"Complete battles 3 times",3:"Drop likes in weekly match 10 times",2:"Win battle for 1 time",5:"Get the check-in reward 1 time",4:"Complete weekly match 1 time",7:"Successfully open shop 2 times",6:"Get 1 new item",8:"Speed up handing out leaflet 100 times"},vDailyQuestListItem:{1:"Go to",2:"Get"},vWarpSmallDialogNode:{1:"Loading\u2026"},vSignLotteryDialog:{1:"Lucky draw",3:"Watch video for free lucky draw",2:"Free",5:"No more",4:"Come again next time",6:"Come again next time"},mgrSubjectDress:{1:"Same suit already owned",2:"Saved successfully"},vPricePromoteAdDialog:{1:"Hint",3:"Not now",2:"Watch the video to increase the price",4:"3x"},vSignDialog:{11:"Go online to connect to get rewards! Please check  your network and try again",10:"Hint",13:"Already checked in",12:"Confirm",15:"Wait",14:"Can't check in now",1:"Check-in",3:"Watch ads to get rewards",2:"2x claim",5:"No need",4:"Video reward",7:"Diamonds only",6:"Claim all",9:"OK",8:"Get"},vInputNameDialog:{1:"Nickname:",3:"Create name",2:"Get a random name",4:"Confirm"},vGoldRainDialog:{1:"Shake",3:"A wave of coins are coming",2:"Tap the button to get coins",5:"Hint",4:"Start",7:"Cancel",6:"You will miss lots of coins if you quit now, still want to quit?",8:"Yes"},vMallItemFreeRmb:{1:"Free diamonds",2:"Free"},mgrSdk:{1:"Hint",3:"Cancel",2:"Do you want to quit now?",4:"Quit game"},vLoadingDialog:{1:"Loading\u2026",2:"Complete"},StageScriptBase:{1:"Make",3:"Hint",2:"Locked",5:"Cancel",4:"Quit now?",7:"This suit is on sale",6:"Yes",8:"OK"},mgrTip:{1:"Hint",3:"Cancel",2:"Please wait..."},vSubjectSuitDressListItem:{1:"Free"},vPkMirrorRankListItem:{1:"Star: %d"},mgrPlayer:{1:"This item is locked. ",3:"Already claimed",2:"Awesome. You owned all the items of this suit",5:"Claimed",4:"Not all items required are collected"},vRoomDialog:{11:"This doll is already on sale",10:"The submission is successful!",13:"Failed to sell",12:"Successfully put on sale",1:"No items",3:"Make",2:"Suits",5:"Original: %s",4:"Price",7:"Must be dressed up properly to submit",6:"Hint",9:"Must wear a skirt to submit",8:"OK"},vGotItemDialog:{1:"Item owned! Converted to:",3:"Free",2:"Purchase",5:"Get",4:"Watch ads to get for free"},vWishDialog:{1:"Divine",2:"Attempts: %d"},item_template_db_name:{1:"Diamonds",2:"Coins",4:"Stamina",16:"Star"},StageScriptFree:{1:"Hint",3:"Cancel",2:"Submit the outfit for the match?",5:"Do want to quit?",4:"Submit",7:"Complete",6:"Yes"},StageScriptPvp:{1:"Hint",3:"Cancel",2:"Submit the outfit for the match?",5:"Locked",4:"Submit",7:"Yes",6:"Do want to quit?",8:"Match"},vPkMirrorAdventureDialog:{10:"Claimed",1:"5 stars available",3:"Watch ads to get rewards",2:"Nedd higher level to receive",5:"No need",4:"Video reward",7:"OK",6:"Get",9:"Diamonds only",8:"Claim all"},vShopDialog:{1:"Purchase",2:"Special"},vMallItemFreeGold:{1:"Free coins",2:"Free"},vNetworkFaildDialog:{1:"Hint",3:"Cancel",2:"Unable to connect, please check the network or return to the game level to continue",4:"Retry"},vPromptOpenStoreDialog:{1:"Content"},mgrPacking:{1:"Producing wrapping",3:"Unlock level %s first",2:"Max level reached",5:"Not enough coins",4:"Upgrade is available",6:"Upgraded successfully"},sign_db_title:{1:"Day 1",3:"Day 3",2:"Day 2",5:"Day 5",4:"Day 4",7:"Day 7",6:"Day 6"},vRoomListItemPart:{1:"Free trial"},StageScriptPkMirror:{1:"Locked",3:"If you quit now you will lose the game. Still want to quit?",2:"Hint",5:"Yes",4:"Cancel",6:"Submit"},vPromptGoldRainDialog:{1:"Hint",3:"Get",2:"OK",5:"So lucky to get %s coins",4:"Sorry, no coins received"},mgrDailyQuest:{1:"Check your incomplete task(s)",2:"Reward claimed"},vPromptAdRewardDialog:{11:"4x",10:"3x",13:"Massive",12:"5x",15:"OK",14:"Watch video to get [%s]",1:"Hint",3:"Not now",2:"Watch video to double",5:"Watch ads to get rewards",4:"Get",7:"No need",6:"Video reward",9:"2x",8:"1x"},vNetworkWaitingDialog:{1:"Hint",3:"Cancel",2:"Connecting\u2026"},vPkMirrorResultDialog:{1:"OK"},achievement_db_desc:{42:"Win the battle 100 times",43:"Win the battle 150 times",24:"Collect 40 sets in total",25:"Participate in 5 matches",26:"Participate in 10 matches",27:"Participate in 20 matches",20:"Collect 20 sets in total",21:"Collect 25 sets in total",22:"Collect 30 sets in total",23:"Collect 35 sets in total",44:"Win the battle 200 times",28:"Participate in 30 matches",29:"Participate in 50 matches",40:"Win the battle 60 times",41:"Win the battle 80 times",1:"Accumulated 3000 gold coins",3:"Accumulated 200000 gold coins",2:"Accumulated 50000 gold coins",5:"Accumulated 2000000 gold coins",4:"Accumulated 700000 gold coins",7:"Accumulated 50000000 gold coins",6:"Accumulated 5000000 gold coins",9:"Get 100 diamonds in total",8:"Get 20 diamonds in total",39:"Win the battle 50 times",38:"Win the battle 30 times",11:"Get 500 diamonds in total",10:"Get 200 diamonds in total",13:"Get 2000 diamonds in total",12:"Get 1000 diamonds in total",15:"Get 5000 diamonds in total",14:"Get 3000 diamonds in total",17:"Collect 7 sets in total",16:"Collect 4 sets in total",19:"Collect 15 sets in total",18:"Collect 10 sets in total",31:"Participate in 100 matches",30:"Participate in 70 matches",37:"Win the battle 20 times",36:"Win the battle 10 times",35:"Win the battle 5 times",34:"Participate in 500 matches",33:"Participate in 200 matches",32:"Participate in 150 matches"},vBuildStoreResultDialog:{11:"The profit is pretty good today",10:"No need",13:"Need to work harder",12:"Keep it up",15:"Not now",14:"Go to collect more items",16:"OK",1:"Rank",3:"Highest revenue",2:"Name",5:"Get",4:"Revenue",7:"Lucky Wheel",6:"2x",9:"Video reward",8:"Watch ads to get rewards"},vPackingLvupListItem:{10:"Free",1:"Current level: ",3:"Next level: ",2:"Price",5:"Unlock",4:"Max level reached",7:"Unlocked successfully ",6:"Upgrade",9:"Watch video to upgrade for free",8:"Upgraded successfully"},vSettingDialog:{1:"Settings",3:"Off",2:"On",4:"Choose a language"},vSelectPackingDialog:{1:"Select position",3:"Replaced successfully",2:"Locked"},vPromptImgDialog:{1:"Title",2:"Content"},mgrPvp:{1:"Unknown"},vPvpPkDialog:{11:"Can't claim reward(s) yet",10:"No data, please join the match",1:"Remaining:",3:"Match",2:"Watching videos: ",5:"Loading\u2026",4:"Sending gifts:",7:"Not enough votes, please try again later",6:"Insufficient data, unable to drop like now",9:"Free",8:"Watch video to get likes 5 times for free"},vPromptDialog:{1:"Title",2:"Content"},vPvpPkItemLeft:{1:"Unknown"}},cc._RF.pop()},{}],hi:[function(e,t,o){"use strict";cc._RF.push(t,"2d80b6s5ydFzb/a+oCaqjsH","hi"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.hi={mgrPkMirror:{1:"",2:""},vSubjectSuitDetailDialog:{1:"",3:"",2:"",4:""},vHudDialog:{1:"",3:"",2:"",5:"",4:"",7:"",6:"",9:"",8:""},mgrAd:{1:"",2:""},vPromptAdDialog:{1:"",3:"",2:"",5:"",4:"",7:"",6:"",8:""},vAdFaildDialog:{1:"",3:"",2:"",4:""},vDailyQuestDialog:{1:"",2:""},vPromptHudCrazyDialog:{1:"",3:"",2:"",4:""},vProductResultDialog:{1:"",3:"",2:"",5:"",4:""},vHudRankDialog:{10:"",1:"",3:"",2:"",5:"",4:"",7:"",6:"",9:"",8:""},mgrShop:{1:"",3:"",2:""},vPartRankItem:{1:""},vPackingLvupDialog:{1:""},vPromptAdSelectDialog:{1:"",3:"",2:"",5:"",4:"",6:""},vOfflineRewardDialog:{1:"",3:"",2:"",5:"",4:"",7:"",6:""},vPkMirrorDialog:{1:"",3:"",2:"",5:"",4:""},vBuildingStoreDialog:{11:"",10:"",13:"",12:"",15:"",14:"",17:"",16:"",18:"",1:"",3:"",2:"",5:"",4:"",7:"",6:"",9:"",8:""},vAdWaitingDialog:{1:"",3:"",2:""},vBuildingStoreDetailDialog:{11:"",10:"",1:"",3:"",2:"",5:"",4:"",7:"",6:"",9:"",8:""},vSignLotteryItem:{1:""},daily_quest_template_db_desc:{1:"",3:"",2:"",5:"",4:"",7:"",6:"",8:""},vDailyQuestListItem:{1:"",2:""},vWarpSmallDialogNode:{1:""},vSignLotteryDialog:{1:"",3:"",2:"",5:"",4:"",6:""},mgrSubjectDress:{1:"",2:""},vPricePromoteAdDialog:{1:"",3:"",2:"",4:""},vSignDialog:{11:"",10:"",13:"",12:"",15:"",14:"",1:"",3:"",2:"",5:"",4:"",7:"",6:"",9:"",8:""},vInputNameDialog:{1:"",3:"",2:"",4:""},vGoldRainDialog:{1:"",3:"",2:"",5:"",4:"",7:"",6:"",8:""},vMallItemFreeRmb:{1:"",2:""},mgrSdk:{1:"",3:"",2:"",4:""},vLoadingDialog:{1:"",2:""},StageScriptBase:{1:"",3:"",2:"",5:"",4:"",7:"",6:"",8:""},mgrTip:{1:"",3:"",2:""},vSubjectSuitDressListItem:{1:""},vPkMirrorRankListItem:{1:""},mgrPlayer:{1:"",3:"",2:"",5:"",4:""},vRoomDialog:{11:"",10:"",13:"",12:"",1:"",3:"",2:"",5:"",4:"",7:"",6:"",9:"",8:""},vGotItemDialog:{1:"",3:"",2:"",5:"",4:""},vWishDialog:{1:"",2:""},item_template_db_name:{1:"",2:"",4:"",16:""},StageScriptFree:{1:"",3:"",2:"",5:"",4:"",7:"",6:""},StageScriptPvp:{1:"",3:"",2:"",5:"",4:"",7:"",6:"",8:""},vPkMirrorAdventureDialog:{10:"",1:"",3:"",2:"",5:"",4:"",7:"",6:"",9:"",8:""},vShopDialog:{1:"",2:""},vMallItemFreeGold:{1:"",2:""},vNetworkFaildDialog:{1:"",3:"",2:"",4:""},vPromptOpenStoreDialog:{1:""},mgrPacking:{1:"",3:"",2:"",5:"",4:"",6:""},sign_db_title:{1:"",3:"",2:"",5:"",4:"",7:"",6:""},vRoomListItemPart:{1:""},StageScriptPkMirror:{1:"",3:"",2:"",5:"",4:"",6:""},vPromptGoldRainDialog:{1:"",3:"",2:"",5:"",4:""},mgrDailyQuest:{1:"",2:""},vPromptAdRewardDialog:{11:"",10:"",13:"",12:"",15:"",14:"",1:"",3:"",2:"",5:"",4:"",7:"",6:"",9:"",8:""},vNetworkWaitingDialog:{1:"",3:"",2:""},vPkMirrorResultDialog:{1:""},achievement_db_desc:{42:"",43:"",24:"",25:"",26:"",27:"",20:"",21:"",22:"",23:"",44:"",28:"",29:"",40:"",41:"",1:"",3:"",2:"",5:"",4:"",7:"",6:"",9:"",8:"",39:"",38:"",11:"",10:"",13:"",12:"",15:"",14:"",17:"",16:"",19:"",18:"",31:"",30:"",37:"",36:"",35:"",34:"",33:"",32:""},vBuildStoreResultDialog:{11:"",10:"",13:"",12:"",15:"",14:"",16:"",1:"",3:"",2:"",5:"",4:"",7:"",6:"",9:"",8:""},vPackingLvupListItem:{10:"",1:"",3:"",2:"",5:"",4:"",7:"",6:"",9:"",8:""},vSettingDialog:{1:"",3:"",2:"",4:""},vSelectPackingDialog:{1:"",3:"",2:""},vPromptImgDialog:{1:"",2:""},mgrPvp:{1:""},vPvpPkDialog:{11:"",10:"",1:"",3:"",2:"",5:"",4:"",7:"",6:"",9:"",8:""},vPromptDialog:{1:"",2:""},vPvpPkItemLeft:{1:""}},cc._RF.pop()},{}],id:[function(e,t,o){"use strict";cc._RF.push(t,"80411HMb5FMW64lSoPwRK9a","id"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.id={mgrPkMirror:{1:"Sudah diklaim",2:"Butuh level yang lebih tinggi"},vSubjectSuitDetailDialog:{1:"Siap",3:"Berhasil memakai",2:"Pakai",4:"Tidak ada item yang tersedia"},vHudDialog:{1:"Gelombang besar pesanan akan tiba!",3:"Percepat",2:"Lain kali",5:"Tambahkan ke maks",4:"Tambahkan ke pesanan maks",7:"Konfirmasi",6:"Bagus! Mulai bisnismu sekarang!",9:"Pesanan penuh",8:"Batal"},mgrAd:{1:"Pendinginan, coba lagi nanti",2:"Gagal bermain"},vPromptAdDialog:{1:"Petunjuk",3:"Lain kali",2:"Tonton video",5:"Tonton iklan untuk mendapatkan hadiah",4:"Dapatkan",7:"Tidak perlu",6:"Hadiah video",8:"Oke"},vAdFaildDialog:{1:"Petunjuk",3:"Batal",2:"Gagal terhubung. Periksa kondisi jaringanmu atau coba lagi nanti",4:"Coba lagi"},vDailyQuestDialog:{1:"Tugas",2:"Medali tidak cukup, selesaikan beberapa tugas lagi"},vPromptHudCrazyDialog:{1:"Gelombang besar pesanan akan tiba!",3:"Dapatkan",2:"Lain kali",4:"mempercepat"},vProductResultDialog:{1:"Jual",3:"Boneka ini sudah dijual",2:"Konfirmasi",5:"Gagal menjual",4:"Berhasil menjual"},vHudRankDialog:{10:"Toko",1:"Tidak diberi peringkat",3:"Mulai pertempuran",2:"Mulai",5:"Nama",4:"Peringkat",7:"Peringkat",6:"Pendapatan tertinggi",9:"Pertempuran",8:"Petandingan"},mgrShop:{1:"Gagal membeli",3:"Tidak tersedia",2:"[%s] tidak cukup"},vPartRankItem:{1:"Dimiliki"},vPackingLvupDialog:{1:"Pembungkus"},vPromptAdSelectDialog:{1:"Petunjuk",3:"Tonton iklan untuk mendapatkan secara gratis",2:"Tonton video untuk menggandakan",5:"Dapatkan",4:"Lain kali",6:"Tonton iklan untuk mendapatkan secara gratis"},vOfflineRewardDialog:{1:"Dapatkan",3:"Hadiah video",2:"Tonton iklan untuk menggandakan hadiah",5:"Oke",4:"Tidak perlu",7:"Lain kali",6:"2x klaim"},vPkMirrorDialog:{1:"Di tahap",3:"Berdandan",2:"Dapatkan hadiah",5:"Waktu tidak cukup, coba lagi nanti",4:"Gratis"},vBuildingStoreDialog:{11:"Tonton iklan",10:"Tonton iklan untuk mendapatkan 2 stamina secara gratis",13:"Petunjuk",12:"Stamina tidak cukup",15:"Batal",14:"Yakin ingin menutup toko?",17:"Pesanan penuh",16:"Ya",18:"Tidak bisa mempekerjakan lagi",1:"Rumah boneka",3:"Pesanan tidak cukup. Dapatkan lebih banyak pesanan sekarang!",2:"Pembungkus",5:"Tambahkan ke maks",4:"Lain kali",7:"Tidak ada pelanggan lagi",6:"Level: %s",9:"Buka",8:"Terjadi masalah?"},vAdWaitingDialog:{1:"Petunjuk",3:"Batal",2:"Menghubungkan..."},vBuildingStoreDetailDialog:{11:"Berhasil diupgrade!",10:"Berhasil dibuka!",1:"Level saat ini:",3:"Level berikutnya:",2:"Kapasitas:",5:"Upgrade",4:"Rumah boneka",7:"Gratis",6:"Tonton iklan untuk mengupgrade gratis",9:"Maks",8:"Lain kali"},vSignLotteryItem:{1:"Buka di level %s"},daily_quest_template_db_desc:{1:"Selesaikan pertempuran 3 kali",3:"Berikan suka di pertandingan mingguan 10 kali",2:"Menangkan pertempuran 1 kali",5:"Dapatkan hadiah check in 1 kali",4:"Selesaikan pertandingan mingguan 1 kali",7:"Berhasil membuka toko 2 kali",6:"Dapatkan 1 item baru",8:"Percepat pembagian selebaran 100 kali"},vDailyQuestListItem:{1:"Buka",2:"Dapatkan"},vWarpSmallDialogNode:{1:"Memuat..."},vSignLotteryDialog:{1:"Undian berhadiah",3:"Tonton video untuk mendapatkan undian berhadiah gratis",2:"Gratis",5:"Tidak ada lagi",4:"Kembalilah lagi lain kali",6:"Kembalilah lagi lain kali"},mgrSubjectDress:{1:"Setelan yang sama sudah dimiliki",2:"Berhasil disimpan"},vPricePromoteAdDialog:{1:"Petunjuk",3:"Lain kali",2:"Tonton video untuk meningkatkan harga",4:"3x"},vSignDialog:{11:"Main online agar terhubung dan mendapatkan hadiah! Periksa jaringanmu dan coba lagi",10:"Petunjuk",13:"Sudah check in",12:"Konfirmasi",15:"Tunggu",14:"Tidak bisa check in sekarang",1:"Check in",3:"Tonton iklan untuk mendapatkan hadiah",2:"2x klaim",5:"Tidak perlu",4:"Hadiah video",7:"Hanya berlian",6:"Klaim semua",9:"Oke",8:"Dapatkan"},vInputNameDialog:{1:"Nama panggilan:",3:"Buat nama",2:"Dapatkan nama acak",4:"Konfirmasi"},vGoldRainDialog:{1:"Goyangkan",3:"Gelombang koin akan tiba",2:"Ketuk tombol untuk mendapatkan koin",5:"Petunjuk",4:"Mulai",7:"Batal",6:"Kamu akan kehilangan banyak koin jika keluar sekarang, tetap ingin keluar?",8:"Ya"},vMallItemFreeRmb:{1:"Berlian gratis",2:"Gratis"},mgrSdk:{1:"Petunjuk",3:"Batal",2:"Ingin keluar sekarang?",4:"Keluar dari game"},vLoadingDialog:{1:"Memuat...",2:"Selesaikan"},StageScriptBase:{1:"Buat",3:"Petunjuk",2:"Terkunci",5:"Batal",4:"Keluar sekarang?",7:"Setelah ini dijual",6:"Ya",8:"Oke"},mgrTip:{1:"Petunjuk",3:"Batal",2:"Harap tunggu..."},vSubjectSuitDressListItem:{1:"Gratis"},vPkMirrorRankListItem:{1:"Bintang: %d"},mgrPlayer:{1:"Item ini terkunci.",3:"Sudah diklaim",2:"Keren. Kamu memiliki semua item setelan ini",5:"Diklaim",4:"Tidak semua item harus dikumpulkan"},vRoomDialog:{11:"Boneka ini sudah dijual",10:"Pengiriman berhasil!",13:"Gagal menjual",12:"Berhasil menjual",1:"Tidak ada item",3:"Buat",2:"Setelan",5:"Asli: %s",4:"Harga",7:"Harus berpakaian rapi untuk mengirim",6:"Petunjuk",9:"Harus mengenakan rok untuk mengirim",8:"Oke"},vGotItemDialog:{1:"Item dimiliki! Dikonversi ke:",3:"Gratis",2:"Beli",5:"Dapatkan",4:"Tonton iklan untuk mendapatkan secara gratis"},vWishDialog:{1:"Meramalkan",2:"Upaya: %d"},item_template_db_name:{1:"Berlian",2:"Koin",4:"Stamina",16:"Bintang"},StageScriptFree:{1:"Petunjuk",3:"Batal",2:"Kirim pakaian untuk pertandingan?",5:"Ingin keluar?",4:"Kirim",7:"Selesaikan",6:"Ya"},StageScriptPvp:{1:"Petunjuk",3:"Batal",2:"Kirim pakaian untuk pertandingan?",5:"Terkunci",4:"Kirim",7:"Ya",6:"Ingin keluar?",8:"Pertandingan"},vPkMirrorAdventureDialog:{10:"Diklaim",1:"Tersedia 5 bintang",3:"Tonton iklan untuk mendapatkan hadiah",2:"Butuh level lebih tinggi untuk menerima",5:"Tidak perlu",4:"Hadiah video",7:"Oke",6:"Dapatkan",9:"Hanya berlian",8:"Klaim semua"},vShopDialog:{1:"Beli",2:"Spesial"},vMallItemFreeGold:{1:"Koin gratis",2:"Gratis"},vNetworkFaildDialog:{1:"Petunjuk",3:"Batal",2:"Tidak dapat terhubung, periksa jaringan atau kembali ke level game untuk melanjutkan",4:"Coba lagi"},vPromptOpenStoreDialog:{1:"Konten"},mgrPacking:{1:"Memproduksi pembungkus",3:"Buka level %s terlebih dahulu",2:"Level maks tercapai",5:"Koin tidak cukup",4:"Upgrade tersedia",6:"Berhasil diupgrade"},sign_db_title:{1:"Hari 1",3:"Hari 3",2:"Hari 2",5:"Hari 5",4:"Hari 4",7:"Hari 7",6:"Hari 6"},vRoomListItemPart:{1:"Uji coba gratis"},StageScriptPkMirror:{1:"Terkunci",3:"Jika kamu keluar sekarang, kamu akan kalah dalam game. Tetap ingin keluar?",2:"Petunjuk",5:"Ya",4:"Batal",6:"Kirim"},vPromptGoldRainDialog:{1:"Petunjuk",3:"Dapatkan",2:"Oke",5:"Sangat beruntung mendapatkan %s koin",4:"Maaf, tidak ada koin yang diterima"},mgrDailyQuest:{1:"Lihat tugasmu yang belum selesai",2:"Hadiah diklaim"},vPromptAdRewardDialog:{11:"4x",10:"3x",13:"Besar",12:"5x",15:"Oke",14:"Tonton video untuk mendapatkan [%s]",1:"Petunjuk",3:"Lain kali",2:"Tonton video untuk menggandakan",5:"Tonton iklan untuk mendapatkan hadiah",4:"Dapatkan",7:"Tidak perlu",6:"Hadiah video",9:"2x",8:"1x"},vNetworkWaitingDialog:{1:"Petunjuk",3:"Batal",2:"Menghubungkan..."},vPkMirrorResultDialog:{1:"Oke"},achievement_db_desc:{42:"Memenangkan pertempuran 100 kali",43:"Memenangkan pertempuran 150 kali",24:"Kumpulkan total 40 set",25:"Berpartisipasi dalam 5 pertandingan",26:"Berpartisipasi dalam 10 pertandingan",27:"Berpartisipasi dalam 20 pertandingan",20:"Kumpulkan total 20 set",21:"Kumpulkan total 25 set",22:"Kumpulkan total 30 set",23:"Kumpulkan total 35 set",44:"Memenangkan pertempuran 200 kali",28:"Berpartisipasi dalam 30 pertandingan",29:"Berpartisipasi dalam 50 pertandingan",40:"Memenangkan pertempuran 60 kali",41:"Memenangkan pertempuran 80 kali",1:"Akumulasi 3000 koin emas",3:"Akumulasi 200000 koin emas",2:"Akumulasi 50000 koin emas",5:"Akumulasi 2000000 koin emas",4:"Akumulasi 700000 koin emas",7:"Akumulasi 50000000 koin emas",6:"Akumulasi 5000000 koin emas",9:"Akumulasi 100 koin emas",8:"Akumulasi 20 koin emas",39:"Memenangkan pertempuran 50 kali",38:"Memenangkan pertempuran 30 kali",11:"Akumulasi 500 koin emas",10:"Akumulasi 200 koin emas",13:"Akumulasi 2000 koin emas",12:"Akumulasi 1000 koin emas",15:"Akumulasi 5000 koin emas",14:"Akumulasi 3000 koin emas",17:"Kumpulkan total 7 set",16:"Kumpulkan total 4 set",19:"Kumpulkan total 15 set",18:"Kumpulkan total 10 set",31:"Berpartisipasi dalam 100 pertandingan",30:"Berpartisipasi dalam 70 pertandingan",37:"Memenangkan pertempuran 20 kali",36:"Memenangkan pertempuran 10 kali",35:"Memenangkan pertempuran 5 kali",34:"Berpartisipasi dalam 500 pertandingan",33:"Berpartisipasi dalam 200 pertandingan",32:"Berpartisipasi dalam 150 pertandingan"},vBuildStoreResultDialog:{11:"Keuntungannya lumayan bagus hari ini",10:"Tidak perlu",13:"Harus bekerja lebih keras",12:"Lanjutkan",15:"Lain kali",14:"Mulai kumpulkan lebih banyak item",16:"Oke",1:"Peringkat",3:"Pendapatan tertinggi",2:"Nama",5:"Dapatkan",4:"Pendapatan",7:"Roda Keberuntungan",6:"2x",9:"Hadiah video",8:"Tonton iklan untuk mendapatkan hadiah"},vPackingLvupListItem:{10:"Gratis",1:"Level saat ini:",3:"Level berikutnya:",2:"Harga",5:"Buka",4:"Level maks tercapai",7:"Berhasil dibuka",6:"Upgrade",9:"Tonton video untuk mengupgrade gratis",8:"Berhasil diupgrade"},vSettingDialog:{1:"Pengaturan",3:"Nonaktif",2:"Aktif",4:"Pilih bahasa"},vSelectPackingDialog:{1:"Pilih posisi",3:"Berhasil diganti",2:"Terkunci"},vPromptImgDialog:{1:"Judul",2:"Konten"},mgrPvp:{1:"Tidak dikenal"},vPvpPkDialog:{11:"Belum bisa mengklaim hadiah",10:"Tidak ada data, bergabunglah ke pertandingan",1:"Tersisa:",3:"Pertandingan",2:"Tonton video:",5:"Memuat...",4:"Mengirim hadiah:",7:"Suara tidak cukup, coba lagi nanti",6:"Data tidak cukup, tidak bisa memberi suka sekarang",9:"Gratis",8:"Tonton video untuk mendapatkan suka 5 kali secara gratis"},vPromptDialog:{1:"Judul",2:"Konten"},vPvpPkItemLeft:{1:"Tidak dikenal"}},cc._RF.pop()},{}],init:[function(e,t,o){"use strict";cc._RF.push(t,"c811f+28JBJvILU83JHrwdf","init"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./game/manager/mgrCfg"),r=e("./game/manager/mgrDirector"),a=e("./game/manager/mgrRecord"),i=e("./game/manager/mgrPlayer"),s=e("./game/manager/mgrDebug"),l=e("./game/manager/mgrNetwork"),c=e("./game/manager/mgrTip"),u=e("./game/manager/mgrAchievement"),d=e("./game/manager/mgrPool"),p=e("./game/manager/mgrCop"),h=e("./game/manager/mgrAlu"),f=e("./game/manager/mgrShop"),g=e("./game/manager/mgrStage"),m=e("./game/manager/mgrSign"),_=e("./game/manager/mgrSound"),v=e("./game/manager/mgrWordFilter"),y=e("./game/manager/mgrGuide"),C=e("./game/manager/mgrAdNative"),S=e("./game/manager/mgrNativeAdSdk"),b=e("./game/manager/mgrAd"),R=e("./game/manager/mgrNative"),T=e("./game/manager/mgrSdk"),A=e("./game/manager/mgrEffect"),D=e("./game/manager/mgrPkMirror"),I=e("./game/manager/mgrCosmetic"),w=e("./game/manager/mgrSubjectDress"),L=e("./game/manager/mgrPacking"),P=e("./game/manager/mgrOnline"),k=e("./game/manager/mgrCountBuy"),E=e("./game/manager/mgrStatics"),N=e("./game/manager/mgrOfflinePvp"),O=e("./game/manager/mgrDailyQuest"),M=e("./game/manager/mgrBuildingResearch"),B=e("./game/manager/mgrBuildingStore"),U=e("./game/manager/mgrEmployee"),x=e("./game/manager/mgrOfflineStoreRank"),G=e("./game/manager/mgrTimer"),F=e("./game/manager/mgrChannel"),V=e("./game/manager/mgrOpNcov"),j=e("./game/manager/mgrWish"),H=e("./game/manager/mgrHappyFiveOne"),K=e("./game/manager/mgrGoldRain"),z=e("./game/manager/mgrVideoRecorder"),W=e("./game/manager/mgrOpMidAutumnLottery"),q=e("./game/manager/mgrI18n");window.ul={},n.default.init(),v.default.init(),p.default.init(),h.default.init(),d.default.init(),a.default.init(),R.default.init(),y.default.init(),s.default.init(),i.default.init(),w.default.init(),L.default.init(),U.default.init(),M.default.init(),B.default.init(),m.default.init(),r.default.init(),l.default.init(),c.default.init(),g.default.init(),u.default.init(),f.default.init(),_.default.init(),T.default.init(),b.default.init(),A.default.init(),N.default.init(),D.default.init(),I.default.init(),S.default.init(),C.default.init(),O.default.init(),P.default.init(),k.default.init(),E.default.init(),x.default.init(),G.default.init(),F.default.init(),V.default.init(),j.default.init(),H.default.init(),K.default.init(),z.default.init(),W.default.init(),q.default.init(),cc._RF.pop()},{"./game/manager/mgrAchievement":"mgrAchievement","./game/manager/mgrAd":"mgrAd","./game/manager/mgrAdNative":"mgrAdNative","./game/manager/mgrAlu":"mgrAlu","./game/manager/mgrBuildingResearch":"mgrBuildingResearch","./game/manager/mgrBuildingStore":"mgrBuildingStore","./game/manager/mgrCfg":"mgrCfg","./game/manager/mgrChannel":"mgrChannel","./game/manager/mgrCop":"mgrCop","./game/manager/mgrCosmetic":"mgrCosmetic","./game/manager/mgrCountBuy":"mgrCountBuy","./game/manager/mgrDailyQuest":"mgrDailyQuest","./game/manager/mgrDebug":"mgrDebug","./game/manager/mgrDirector":"mgrDirector","./game/manager/mgrEffect":"mgrEffect","./game/manager/mgrEmployee":"mgrEmployee","./game/manager/mgrGoldRain":"mgrGoldRain","./game/manager/mgrGuide":"mgrGuide","./game/manager/mgrHappyFiveOne":"mgrHappyFiveOne","./game/manager/mgrI18n":"mgrI18n","./game/manager/mgrNative":"mgrNative","./game/manager/mgrNativeAdSdk":"mgrNativeAdSdk","./game/manager/mgrNetwork":"mgrNetwork","./game/manager/mgrOfflinePvp":"mgrOfflinePvp","./game/manager/mgrOfflineStoreRank":"mgrOfflineStoreRank","./game/manager/mgrOnline":"mgrOnline","./game/manager/mgrOpMidAutumnLottery":"mgrOpMidAutumnLottery","./game/manager/mgrOpNcov":"mgrOpNcov","./game/manager/mgrPacking":"mgrPacking","./game/manager/mgrPkMirror":"mgrPkMirror","./game/manager/mgrPlayer":"mgrPlayer","./game/manager/mgrPool":"mgrPool","./game/manager/mgrRecord":"mgrRecord","./game/manager/mgrSdk":"mgrSdk","./game/manager/mgrShop":"mgrShop","./game/manager/mgrSign":"mgrSign","./game/manager/mgrSound":"mgrSound","./game/manager/mgrStage":"mgrStage","./game/manager/mgrStatics":"mgrStatics","./game/manager/mgrSubjectDress":"mgrSubjectDress","./game/manager/mgrTimer":"mgrTimer","./game/manager/mgrTip":"mgrTip","./game/manager/mgrVideoRecorder":"mgrVideoRecorder","./game/manager/mgrWish":"mgrWish","./game/manager/mgrWordFilter":"mgrWordFilter"}],main:[function(e,t,o){"use strict";cc._RF.push(t,"99ca5HYPuhJE6hdQAgv4xEb","main");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./game/manager/mgrDirector"),i=cc._decorator.ccclass,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.RESOLUTION_RANGE={maxWidth:768,minWidth:576,maxHeight:1152,minHeight:1024},t}return n(t,e),t.prototype.start=function(){cc.view.enableAntiAlias(!0);var e=this.createScene();this.refreshSceneSize(e),cc.director.runSceneImmediate(e,null,function(){a.default.openDialog("vLoadingDialog",null,!0)})},t.prototype.booleanArrayToFlagsNumber=function(e){for(var t=0,o=Math.max(e.length,32),n=0;n<o;n++){t|=(e[n]?1:0)<<n}return t},t.prototype.createScene=function(){var e=new cc.Scene,t=new cc.Node;t.setAnchorPoint(.5,.5),t.name="Canvas",t.parent=e;var o=new cc.Node;o.parent=t,o.name="Main Camera";var n=o.addComponent(cc.Camera);return n.zoomRatio=1,n.backgroundColor=cc.color(0,0,0,255),n.depth=-1,n.cullingMask=this.booleanArrayToFlagsNumber([!0]),n.clearFlags=cc.Camera.ClearFlags.COLOR|cc.Camera.ClearFlags.DEPTH|cc.Camera.ClearFlags.STENCIL,e},t.prototype.refreshSceneSize=function(e){var t=(e=e||cc.director.getScene())._resolution_range||this.RESOLUTION_RANGE,o=e.getChildByName("Canvas"),n=cc.view.getFrameSize(),r=n.width/n.height,a=t.maxWidth,i=t.minWidth,s=t.maxHeight,l=t.minHeight,c=i,u=l,d=o.getComponent(cc.Canvas);d||(d=o.addComponent(cc.Canvas)),r<=i/l?r<i/s?(c=i,u=s,o.setContentSize(c,u),d.designResolution=cc.size(c,u),d.fitHeight=!0,d.fitWidth=!0):(d.designResolution=cc.size(c,u),d.fitHeight=!1,d.fitWidth=!0):r>a/l?(c=a,u=l,o.setContentSize(c,u),d.designResolution=cc.size(c,u),d.fitHeight=!0,d.fitWidth=!0):(d.fitHeight=!0,d.fitWidth=!1,d.designResolution=cc.size(c,u))},t=r([i],t)}(cc.Component);o.default=s,cc._RF.pop()},{"./game/manager/mgrDirector":"mgrDirector"}],mgrAchievement:[function(e,t,o){"use strict";cc._RF.push(t,"47c5adE7chB7LzM8mx01jPk","mgrAchievement");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("../struct/sAchievement"),s=e("../Const"),l=e("./mgrRecord"),c=e("../../ulframework/utils/Tools"),u=e("./mgrCfg"),d=e("../../ulframework/utils/Timer"),p=cc._decorator.ccclass,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return n(t,e),o=t,t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_ACHIEVEMENT_STATE_CHANGED:this.onMsgAchievementStateChanged.bind(this),MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this),MSG_STAGE_RATING_CHAGNED:this.onMsgStageRatingChanged.bind(this),MSG_EMPLOYEE_LEVEL_CHANGED:this.onMsgPetLevelChanged.bind(this),MSG_EMPLOYEE_ADVENTURE_CHANGED:this.onMsgPetAdventureChanged.bind(this),MSG_EMPLOYEE_COMBINE_LOG_CHANGED:this.onMsgPetCombineLogChanged.bind(this),MSG_PVE_COUNT_CHANGED:this.onMsgPveCountChanged.bind(this)}),d.default.callLoop(.1,this.onTimerLoop.bind(this),!0)},t.loadRecord=function(){var t=this;e.loadRecord.call(this);var o=(l.default.getData("achievement")||{}).achievementDatas||{};c.default.forEachMap(u.default.getDb("achievement_db"),function(e,n){var r=new i.default(n.id),a=o[n.id];a?r.setState(a.state):r.setState(s.QuestState.normal),t.achievements[n.id]=r}),this.refreshAchievement(null,!0)},t.saveRecord=function(){e.saveRecord.call(this);var t={};c.default.forEachMap(this.achievements,function(e,o){t[o.id]={state:o.state}});var o={achievementDatas:t};l.default.setData("achievement",o)},t.onTimerLoop=function(e){this.tryRefreshAchievement()},t.refreshAchievement=function(e,t){var o=this,n=!1;c.default.forEachMap(this.achievements,function(r,a){var i=a.refreshState(e);n=n||i,i&&!t&&o.sendMsg("MSG_ACHIEVEMENT_STATE_CHANGED",{achievementId:a.id,state:a.state})}),n&&this.saveRecord()},t.obtainReward=function(e,t){var o=this.achievements[e];if(!o)return[null,null];if(o.state!=s.QuestState.finished)return[null,null];var n=o.template.rewardItemId,r=o.template.rewardAmount;return o.setState(s.QuestState.received),this.saveRecord(),this.sendMsg("MSG_ACHIEVEMENT_STATE_CHANGED",{achievementId:o.id,state:o.state}),[n,r]},t.getAchievement=function(e){var t=this.achievements[e];return t||null},t.getAchievementsByCategory=function(e){var t=[];return c.default.forEachMap(this.achievements,function(o,n){n.template.category==e&&t.push(n)}),t},t.getQuestAchievementArr=function(){for(var e=this.getAchievementsByCategory(s.AchievementType.quest),t=[],o={},n=(e=c.default.sortArrayByField(e,["groupId","order"])).length,r=0;r<n;r++){var a=e[r];if(!o[a.template.groupId]){var i=!1;if(a.state<=s.QuestState.finished)i=!0;else{var l=e[r+1];l&&l.template.groupId==a.template.groupId||(i=!0)}i&&(t.push(a),o[a.template.groupId]=!0)}}return t},t.getQuestAchievementCanRewardCount=function(){var e=0,t=this.getQuestAchievementArr();for(var o in t){t[o].state==s.QuestState.finished&&e++}return e},t.tryRefreshAchievement=function(){var e=null;if(c.default.forEachMap(this.cmdQueue,function(t,o){e||(e=[]),e.push(t)}),e){this.cmdQueue={};for(var t=0;t<e.length;t++){var o=e[t];this.refreshAchievement(o)}}},t.setAchievementCompleted=function(e){var t=this.getAchievement(e);t&&(t.setState(s.QuestState.finished),this.saveRecord())},t.isAchievementCompleted=function(e){if(!e)return!1;var t=this.getAchievement(e);if(!t)return!1;var o=t.state;return o==s.QuestState.finished||o==s.QuestState.received},t.isAchievementsAllCompleted=function(e){if(!e)return!1;for(var t=0;t<e.length;t++){var o=e[t];if(!this.isAchievementCompleted(o))return!1}return!0},t.getAchievementCanReceiveCount=function(e){var t=0;return c.default.forEachMap(this.achievements,function(o,n){n.template.category==e&&n.state==s.QuestState.finished&&t++}),t},t.playAchievementTip=function(e){this.bAchievementTipEnabled},t._setAchievementTipEnabled=function(e){this.bAchievementTipEnabled=e},t.getShowAchievementsByCategory=function(e){var t={};c.default.forEachMap(this.achievements,function(o,n){n.template.category==e&&(t[n.template.subCategory]||(t[n.template.subCategory]=[]),t[n.template.subCategory].push(n))});var o=[];return c.default.forEachMap(t,function(e,t){t=c.default.sortArrayByField(t,"id");for(var n=0;n<t.length;n++){var r=t[n];if(n<t.length-1){if(r.state<=s.QuestState.finished){o.push(r);break}}else o.push(r)}}),o},t.getAchievementLevel=function(e){var t=o.getAchievement(e),n=t.template.category,r=t.template.subCategory,a=[];c.default.forEachMap(this.achievements,function(e,t){t.template.category==n&&t.template.subCategory==r&&a.push(t)}),a=c.default.sortArrayByField(a,"id");for(var i=0;i<a.length;i++){if(a[i].id==e)return[i+1,a.length]}return[1,1]},t.onMsgAchievementStateChanged=function(e){var t=e,o=t.achievementId;if(t.state==s.QuestState.finished){var n=this.achievements[o];n.template.bNeedTip&&this.playAchievementTip(n)}this.cmdQueue.MSG_ACHIEVEMENT_STATE_CHANGED=!0},t.onMsgItemAmountChanged=function(e){this.cmdQueue.MSG_ITEM_AMOUNT_CHANGED=!0},t.onMsgStageRatingChanged=function(e){this.cmdQueue.MSG_STAGE_RATING_CHAGNED=!0},t.onMsgPetLevelChanged=function(e){this.cmdQueue.MSG_EMPLOYEE_LEVEL_CHANGED=!0},t.onMsgPetAdventureChanged=function(e){this.cmdQueue.MSG_EMPLOYEE_ADVENTURE_CHANGED=!0},t.onMsgPetCombineLogChanged=function(e){this.cmdQueue.MSG_EMPLOYEE_COMBINE_LOG_CHANGED=!0},t.onMsgPveCountChanged=function(e){this.cmdQueue.MSG_PVE_COUNT_CHANGED=!0},t.achievements={},t.cmdQueue={},t.bAchievementTipEnabled=!0,t=o=r([p],t)}(a.default);o.default=h,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const","../struct/sAchievement":"sAchievement","./mgrCfg":"mgrCfg","./mgrRecord":"mgrRecord"}],mgrAdNative:[function(e,t,o){"use strict";cc._RF.push(t,"9fc2f6RZ7RKMq9+2exaKc7y","mgrAdNative");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r,a=e("../../ulframework/manager/Manager"),i=e("./mgrNativeAdSdk"),s=e("./mgrCfg"),l=e("./mgrAd"),c=e("../../ulframework/utils/Tools"),u=e("./mgrDirector"),d=e("../../ulframework/utils/Timer"),p=e("./mgrSdk");(function(e){e[e.banner=1]="banner",e[e.insert=2]="insert",e[e.embed=3]="embed"})(r=o.NATIVE_AD_TYPE||(o.NATIVE_AD_TYPE={}));var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_NATIVE_AD_SDK_NATIVE_DATA_REFRESH:this.onMsgNativeDataRefresh})},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.requestSomeNativeAdAtStart=function(){},t.getNativeDataByAdEventId=function(e){var t=s.default.get("ad_event_db",e);return t?i.default.getNativeDataByNativeType(t.advId):null},t.onNativeAdViewClenup=function(e,t,o){if((void 0===t&&(t=!1),e)&&this.getNativeDataByAdEventId(e)){if(t){var n=s.default.get("ad_event_db",e);n&&i.default.cleanNativeDataByNativeType(n.advId)}var r=s.default.get("ad_event_db",e);i.default.onCloseNativeAd(r.advId,this.nativeBannerRefreshFun[e].userData,e,o)}},t.__invokeRefreshData=function(e){var t=e.adEventId||0;if(t){var o=s.default.get("ad_event_db",t);o&&(o.nativeType!=r.embed&&o.nativeType!=r.banner||(console.log("__invokeRefresh: adEventId = ",t),this.__invokeClientRefresh(t,!0)))}},t.__invokeClientRefresh=function(e,t){l.default.triggerAdEvent(e,null,t)},t.registerNativeBannerRefreshFun=function(e,t,o){var n=this,r=s.default.quietGet("ad_event_db",e);cc.isValid(o)&&r&&(this.nativeBannerRefreshFun[e]={fun:t,node:o,userData:this.nativeBannerRefreshFun[e]?this.nativeBannerRefreshFun[e].userData:null},c.default.registerTouchHandler(o,function(t){t.isClick()&&(n.getNativeDataByAdEventId(e)&&n.nativeBannerRefreshFun[e]&&n.nativeBannerRefreshFun[e].userData&&(console.log("on touch native !!!"),i.default.onClickNativeAd(r.advId,n.nativeBannerRefreshFun[e].userData,e)))}),o.addComponent(cc.Component).onDestroy=function(){d.default.callLater(.3,function(){var t=!!n.manualCloseAdEventIdCache[e];delete n.manualCloseAdEventIdCache[e],n.onNativeAdViewClenup(e,!0,t)})},l.default.triggerAdEvent(e),this.sendMsg("MSG_NATIVE_AD_SDK_NATIVE_DATA_REFRESH",{advId:r.advId,userData:{adEventId:e}}))},t.clickNative=function(e){var t=s.default.get("ad_event_db",e);i.default.onClickNativeAd(t.advId,this.nativeBannerRefreshFun[e].userData,e)},t.markManualCloseNative=function(e){this.manualCloseAdEventIdCache[e]=!0},t.refreshNativeBanner=function(e){var t=this.nativeBannerRefreshFun[e];if(t){if(cc.isValid(t.node)){var o=this.getNativeDataByAdEventId(e);try{t.fun(o)}catch(e){console.log(e)}}}else cc.warn(ul.format(":)adEventId:%s isn't regist!!!"))},t.onMsgNativeDataRefresh=function(e){var t=this,o=e.userData.adEventId;console.log("onMsgNativeDataRefresh",o);var n=this.getNativeDataByAdEventId(o);n||(n={}),this.nativeBannerRefreshFun[o]||(this.nativeBannerRefreshFun[o]={}),this.nativeBannerRefreshFun[o].userData=e.userData,console.log("try down load image: "+n.url),this.__tryRefreshLogic(e.advId),n.url&&u.default.loadRes(n.url,null,function(a,i){console.log("---------down int image completed"),a&&console.warn(a),n.spriteFrame=i;var l=s.default.get("ad_event_db",o);if(console.log("------------adEventData=",l,n),!a&&l&&l.nativeType==r.insert&&ul.length(n)>0){var d=["vNativeDialog2","vNativeDialog2"],h=d[0],f=p.default.getCopNumberValueByKey("native_insert_show_mode");h=1==f?d[c.default.random(d.length)-1]:2==f?d[0]:3==f?d[1]:d[c.default.random(d.length)-1],u.default.openDialog(h,{adEventId:o,userData:e.userData})}t.__tryRefreshLogic(e.advId)})},t.__tryRefreshLogic=function(e){var t=this;c.default.forEachMap(this.nativeBannerRefreshFun,function(o,n){var r=s.default.quietGet("ad_event_db",o);r&&e&&r.advId==e&&t.refreshNativeBanner(o)})},t.nativeBannerRefreshFun={},t.manualCloseAdEventIdCache={},t}(a.default);o.default=h,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","./mgrAd":"mgrAd","./mgrCfg":"mgrCfg","./mgrDirector":"mgrDirector","./mgrNativeAdSdk":"mgrNativeAdSdk","./mgrSdk":"mgrSdk"}],mgrAd:[function(e,t,o){"use strict";cc._RF.push(t,"20276rxf1BCtI/uXv/IKIg9","mgrAd");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var i,s,l=e("../../ulframework/manager/Manager"),c=e("./mgrRecord"),u=e("../../ulframework/utils/Tools"),d=e("./mgrCfg"),p=e("./mgrAlu"),h=e("./mgrSdk"),f=e("./mgrPlayer"),g=e("./mgrSound"),m=e("./mgrTip"),_=e("../../ulframework/utils/Timer"),v=e("../view/dialog/vAdWaitingDialog"),y=e("../view/dialog/vAdFaildDialog"),C=e("../Const"),S=e("./mgrChannel"),b=e("./mgrNative"),R=e("./mgrI18n");(function(e){e[e.close=1]="close",e[e.online=2]="online",e[e.mcprc=3]="mcprc"})(i=o.AD_MODE||(o.AD_MODE={})),function(e){e.intert="1",e.banner="2",e.embed="3",e.video="4",e.h5="5"}(s=o.ADV_ID||(o.ADV_ID={}));var T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_SDK_OPEN_ADV_RESULT:this.onMsgSdkOpenAdvResult,MSG_ADV_CLOSE_RESULT:this.onMsgAdvCloseResult,MSG_SDK_ADV_VALID_COUNT:this.onMsgSdkAdvValidCount}),u.default.isOneDay(this.todayNativeInsertLastScaleTime,u.default.time())||(this.todayNativeInsertScaleCount=0,this.todayNativeInsertScaleIntervalCount=0,this.todayNativeInsertLastScaleTime=u.default.time())},t.loadRecord=function(){e.loadRecord.call(this);var t=c.default.getData("ad")||{};this.lastFinishedTimes=t.lastFinishedTimes||{},this.todayNativeInsertScaleCount=t.todayNativeInsertScaleCount||0,this.todayNativeInsertScaleIntervalCount=t.todayNativeInsertScaleIntervalCount||0,this.todayNativeInsertLastScaleTime=t.todayNativeInsertLastScaleTime||0},t.saveRecord=function(){e.saveRecord.call(this);var t={lastFinishedTimes:this.lastFinishedTimes,todayNativeInsertScaleCount:this.todayNativeInsertScaleCount,todayNativeInsertScaleIntervalCount:this.todayNativeInsertScaleIntervalCount,todayNativeInsertLastScaleTime:this.todayNativeInsertLastScaleTime};c.default.setData("ad",t)},t.getRewardRemainCount=function(e){var t=d.default.get("ad_reward_db",e);return this.getAdEventRemainCount(t.adEventId)},t.getAdEventRemainCount=function(e){var t=d.default.get("ad_event_db",e);if(!t)return 0;if(t.aluId&&!p.default.check(t.aluId))return 0;if(!this.isAdTypeValid(e))return cc.log("  \u5e7f\u544a\u6ca1\u6709\u6b21\u6570\u4e86 "),0;var o=t.ratio;return t.ratioFromCopKey&&t.ratioFromCopKey.length>0&&(o=h.default.getCopNumberValueByKey(t.ratioFromCopKey)),o<=0?0:t.remainCountItemId>0?f.default.getItemAmount(t.remainCountItemId):1},t.getAdEventRemainCd=function(e){var t=d.default.get("ad_event_db",e);if(!t)return 0;var o=0;if((o=t.cdFromCopKey?h.default.getCopNumberValueByKey(t.cdFromCopKey):t.cd)>0){var n=this.getLastFinishedTime(e)+o;return Math.max(0,n-u.default.time())}return 0},t.getLastFinishedTime=function(e){var t=d.default.get("ad_event_db",e);if(!t)return 0;var o=t.id;return t.cdGroup&&(o=t.cdGroup),this.lastFinishedTimes[o]||0},t.markFinished=function(e){var t=d.default.get("ad_event_db",e);if(t){var o=t.id;t.cdGroup&&(o=t.cdGroup),this.lastFinishedTimes[o]=u.default.time(),this.saveRecord()}},t.isAdTypeValid=function(e){var o=d.default.get("ad_event_db",e);if(!o)return!0;switch(o.advId){case"video":return t.AD_VIDEO_VALID_COUNT>0}return!0},t.isAdEventHasChanceTrigger=function(e){var t=d.default.get("ad_event_db",e);if(!t)return!1;if(!this.isAdTypeValid(e))return cc.log("  \u5e7f\u544a\u6ca1\u6709\u6b21\u6570\u4e86 "),!1;if(!p.default.check(t.aluId))return cc.log("  alu\u4e0d\u901a\u8fc7\uff0c\u4e0d\u901a\u8fc7"),!1;var o=t.ratio;return t.ratioFromCopKey&&(o=h.default.getCopNumberValueByKey(t.ratioFromCopKey),cc.log("  use cop ratio:",o)),!(u.default.random(100)>o)&&(!(t.wipeItemId>0&&f.default.getItemAmount(t.wipeItemId)>0)||(cc.log("  \u53bb\u5e7f\u544a\uff0c\u4e0d\u901a\u8fc7"),!1))},t.preCheckCanTriggerAdEvent=function(e){var t=d.default.get("ad_event_db",e);if(!t)return cc.warn("\u4e0d\u5b58\u5728\u7684\u5e7f\u544aid\uff1a",e),!1;if(!this.isAdEventHasChanceTrigger(e))return!1;var o=0,n="";return t.cdFromCopKey?(o=h.default.getCopNumberValueByKey(t.cdFromCopKey),n="cop"):o=t.cd,!(o>0&&this.getAdEventRemainCd(e)>0)||(cc.log(" %s \u51b7\u5374\u65f6\u95f4\u672a\u5230\uff0c\u4e0d\u901a\u8fc7  \u5269\u4f59\uff1a%ds",n,this.getAdEventRemainCd(e)),!1)},t.triggerAdEvent=function(e,t,o){var n=d.default.get("ad_event_db",e);if(n){if(cc.log("mgrAd.\u89e6\u53d1\u5e7f\u544a\u4e8b\u4ef6",e,t,o),o||this.preCheckCanTriggerAdEvent(e)){var r=0,a="";if(n.cdFromCopKey?(r=h.default.getCopNumberValueByKey(n.cdFromCopKey),a="cop"):r=n.cd,r>0&&this.getAdEventRemainCd(e)>0)return cc.log(" %s \u51b7\u5374\u65f6\u95f4\u672a\u5230\uff0c\u4e0d\u901a\u8fc7",a),void m.default.showMsgTip(R.default.getText("mgrAd.1"));var i={};return u.default.forEachMap(n.param,function(e,t){i[e]=t}),t&&u.default.forEachMap(t,function(e,t){i[e]=t}),i.adEventId=e,i.serialNumber=this.AD_EVENT_SERIAL_NUMBER,this.AD_EVENT_SERIAL_NUMBER++,n.bPauseSound&&g.default.pauseSound(g.default.SOUND_OPERATION_TAG_AD),n.bRecordCdWhenTrigger&&this.markFinished(e),cc.log("  \u5f00\u59cb\u5e7f\u544a",n.cmd,n.advId),this.lastTriggerAdEventId=e,this.lastTriggerAdEventParam=t,n.timeout>0&&(this.showWaiting(),this.startTimeoutTimer(n.timeout)),h.default.openAdv(n.advId,JSON.stringify(i),n.id),n.statisticsSdkEvent&&n.statisticsSdkEvent.length>0&&h.default.statisCommonEvent(n.statisticsSdkEvent,"1"),!0}cc.log("    preCheckCanTriggerAdEvent \u4e0d\u901a\u8fc7")}},t.closeAdv=function(e){var t=d.default.get("ad_event_db",e);t&&h.default.closeAdv(t.advId)},t.closeAdvByType=function(e){var t=s[e];h.default.closeAdv(t)},t._doAdEventSuccessdLogic=function(e,t){var o=parseInt(t.serialNumber)||0;if(this.successedAdEventSerialNumbers[o])cc.warn(ul.format("mgrAd.onMsgSdkOpenAdvResult ad already do successd! adEventId=%s, serialNumber=%d",e,o));else{this.successedAdEventSerialNumbers[o]=!0;var n=d.default.get("ad_event_db",e),r=[],a=t.rewards||n.param.rewards;a&&a.forEach(function(e){var t=e[0],o=e[1],a=e[2],i=e[3],s=e[4],l=0;l=o?a?Math.random()*(a-o)+o:o:a,l=Math.floor(l),f.default.addItemAmount(t,l,n.statisticsSdkEvent),i||r.push({itemId:t,amount:l,amountSteps:[[l,0]],customerContext:{bBanAdReward:!0},notBlue:s})});var i=null!=t.rewardBoxId?t.rewardBoxId:n.param.rewardBoxId;if(i)f.default.openItemBox(i).forEach(function(e){var t=e[0],o=e[1];f.default.addItemAmount(t,o,n.statisticsSdkEvent),r.push({itemId:t,amount:o,amountSteps:[[o,0]],customerContext:{bBanAdReward:!0}})});r.length>0&&m.default.addGotItemTipGroup(r),n.remainCountItemId>0&&f.default.addItemAmount(n.remainCountItemId,-1,"\u5e7f\u544a\u64ad\u653e\u6b21\u6570"),this.sendMsg("MSG_AD_EVENT_SUCCESSD",{adEventId:e,userData:t})}},t.retryLastTriggerAdEvent=function(){this.lastTriggerAdEventId?this.triggerAdEvent(this.lastTriggerAdEventId,this.lastTriggerAdEventParam,!0):cc.warn("mgrAd.retryLastTriggerAdEvent lastTriggerAdEventId not found!")},t.discardLastTriggerAdEvent=function(){if(this.lastTriggerAdEventId){cc.log("----discardLastTriggerAdEvent   triggerAdEvent");var e=d.default.get("ad_event_db",this.lastTriggerAdEventId);e&&e.bPauseSound&&g.default.resumeSound(g.default.SOUND_OPERATION_TAG_AD),this._doAdEventCancelLogic(this.lastTriggerAdEventId,this.lastTriggerAdEventParam)}else cc.warn("mgrAd.discardLastTriggerAdEvent lastTriggerAdEventId not found!")},t._doAdEventCancelLogic=function(e,t){this.sendMsg("MSG_AD_EVENT_CANCELED",{adEventId:e,userData:t})},t.startTimeoutTimer=function(e){var t=this;this.stopTimeoutTimer(),this.timeoutTimer=new _.default(e,1,function(){t.stopTimeoutTimer(),t.showFaild()}),this.timeoutTimer.start()},t.stopTimeoutTimer=function(){this.timeoutTimer&&(this.timeoutTimer.stop(),this.timeoutTimer=null)},t.isShowWaiting=function(){return this.bWaiting},t.isShowFailding=function(){return this.bFailding},t.showWaiting=function(){return r(this,void 0,void 0,function(){return a(this,function(e){return this.hideWaiting(),this.hideFaild(),this.bWaiting=!0,(new v.default).openDialog(),[2]})})},t.hideWaiting=function(){this.sendMsg("MSG_AD_CLOSE_WAITING"),this.bWaiting=!1},t.showFaild=function(){this.hideWaiting(),this.hideFaild(),this.bFailding=!0,(new y.default).openDialog(!0)},t.hideFaild=function(){this.sendMsg("MSG_AD_CLOSE_FAILD"),this.bFailding=!1},t.onMsgSdkOpenAdvResult=function(e){var t=e;console.info("mgrAd.onMsgSdkOpenAdvResult"),ul.dump(t,"data");var o=JSON.parse(t.userData||"")||{},n=o.adEventId||0,r=d.default.get("ad_event_db",n);if(r){r.timeout>0&&(this.hideWaiting(),this.hideFaild(),this.stopTimeoutTimer());var a=parseInt(t.code);switch(a){case 0:t.msg&&r.advId==s.video&&(cc.sys.isNative&&b.default._temp_isH5(),m.default.showMsgTip(R.default.getText("mgrAd.2"))),r.bPauseSound&&g.default.resumeSound(g.default.SOUND_OPERATION_TAG_AD),r.statisticsSdkEvent&&"video"==r.type&&h.default.statisCommonEvent(r.statisticsSdkEvent,"2");break;case 1:r.bPauseSound&&g.default.resumeSound(g.default.SOUND_OPERATION_TAG_AD),this.markFinished(n),"video"==r.type&&h.default.statisCommonEvent(r.statisticsSdkEvent,"3")}a==r.successCode?this._doAdEventSuccessdLogic(n,o):this.sendMsg("MSG_AD_EVENT_FAILD",{adEventId:n,userData:o})}else cc.log("[warn] ul.mgrAd.onMsgSdkOpenAdvResult adEventId not found!")},t.onMsgAdvCloseResult=function(e){},t.isOnline=function(){return h.default.getCopNumberValueByKey("ad_mode")==i.online},t.isMcprc=function(){return h.default.getCopNumberValueByKey("ad_mode")==i.mcprc},t.onMsgSdkAdvValidCount=function(e){t.AD_VIDEO_VALID_COUNT=e.video},t.showIntAd=function(e,o){return t.triggerAdEvent(o||"int_view_swap",null,!1)},t.showViewEnterAd=function(e,t,o,n){this.showIntAd(t,o)&&1==h.default.getCopNumberValueByKey("b_int_banner_mute")||this.showBannerAd(e,n)},t.showBannerAd=function(e,t){cc.log("----showBannerAd start"),m.default.showNativeBanner(e,cc.v2(0,0),t)},t.closeBannerAd=function(){cc.log("----closeBannerAd"),t.closeAdv(C.default.AD_BANNER_NAME),m.default.hideNativeBanner()},t.getBannerHeight=function(){return cc.sys.isNative&&!b.default._temp_isH5()?110:C.default.APP_NAME_2_BANNER_HEIGHT_DICT[S.default.getChannelName()||""]||h.default.getCopNumberValueByKey("ad_banner_holderplace_height")||0},t.isFullGameBanner=function(){return!1},t.isBannerAdValid=function(){return!0},t.AD_VIDEO_VALID_COUNT=1,t.lastFinishedTimes={},t.AD_EVENT_SERIAL_NUMBER=0,t.successedAdEventSerialNumbers={},t.todayNativeInsertScaleCount=0,t.todayNativeInsertScaleIntervalCount=0,t.todayNativeInsertLastScaleTime=0,t}(l.default);o.default=T,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const","../view/dialog/vAdFaildDialog":"vAdFaildDialog","../view/dialog/vAdWaitingDialog":"vAdWaitingDialog","./mgrAlu":"mgrAlu","./mgrCfg":"mgrCfg","./mgrChannel":"mgrChannel","./mgrI18n":"mgrI18n","./mgrNative":"mgrNative","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrSdk":"mgrSdk","./mgrSound":"mgrSound","./mgrTip":"mgrTip"}],mgrAlu:[function(e,t,o){"use strict";cc._RF.push(t,"c63f19cgZJPEYIwxif9JNGD","mgrAlu");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("../Const"),s=e("../../ulframework/utils/Tools"),l=e("./mgrCop"),c=e("./mgrCfg"),u=e("./mgrPlayer"),d=e("./mgrAd"),p=e("./mgrSdk"),h=cc._decorator.ccclass,f={"==":function(e,t){return e==t},"!=":function(e,t){return e!=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t}},g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this)},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.calcCheckData=function(){var e=!1,t=c.default.quietGet("ad_event_db","video_free_gold_name");if(t){var o=t.ratio;t.ratioFromCopKey&&(o=p.default.getCopNumberValueByKey(t.ratioFromCopKey)),(e=o>0)&&(e=d.default.isAdTypeValid("video_free_gold_name"))}var n={openShopCount:u.default.getItemAmount(i.default.ITEM_ID_OPEN_SHOP_COUNT),videoRmbFlag:0,videoGoldFlag:e?1:0};return s.default.forEachMap(l.default.getCops(),function(e,t){var o=parseFloat(t);n[e]=isNaN(o)?t:o}),n},t.getCheckPayChannel=function(){return"unknown"},t.getCheckPlatform=function(){return"unknown"},t.check=function(e){if(!e)return!0;var t=c.default.get("alu_db",e);if(!t)return!1;for(var o=!0,n=this.calcCheckData(),r=0;r<t.conditions.length;r++){var a=t.conditions[r],i=f[a.operator];if(i){var s=i(n[a.key],a.value);o=a.bLogicOr?o||s:o&&s}}return o},t.checkIds=function(e){if(!e)return!1;for(var t=0;t<e.length;t++){var o=e[t];if(!this.check(o))return!1}return!0},t.OPERATOR_HANDLERS=f,t=r([h],t)}(a.default);o.default=g,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrAd":"mgrAd","./mgrCfg":"mgrCfg","./mgrCop":"mgrCop","./mgrPlayer":"mgrPlayer","./mgrSdk":"mgrSdk"}],mgrBuildingResearch:[function(e,t,o){"use strict";cc._RF.push(t,"1ee82lDapdGrY5rVsG2i7OL","mgrBuildingResearch");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("../../ulframework/utils/Tools"),s=e("./mgrCfg"),l=e("./mgrPlayer"),c=e("./mgrRecord"),u=e("./mgrShop"),d=e("../Const"),p=e("./mgrTip"),h=e("./mgrEmployee"),f=cc._decorator.ccclass,g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return n(t,e),o=t,t.onLoad=function(){e.onLoad.call(this),this.registerListeners({MSG_RECORD_UPDATE:this.loadRecord.bind(this),MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this)}),this.loadRecord()},t.loadRecord=function(){e.loadRecord.call(this);var t=c.default.getData("buildResearch")||{};this.staffResearchCompletedTimeDict=t.staffResearchCompletedTimeDict||{};var o={},n=s.default.getDb("cosmetic_part_db");for(var r in n){var a=n[r];l.default.getItemAmount(a.id)>0||!a.researchOrder||(o[a.type]=o[a.type]||[],o[a.type].push(a))}for(var r in o){var u=o[r]||[];u=i.default.sortArrayByField(u,["researchOrder","id"]),o[r]=u}this.partTypeToPartDatasDict=o,this.saveRecord()},t.saveRecord=function(){e.saveRecord.call(this);var t={staffResearchCompletedTimeDict:this.staffResearchCompletedTimeDict};c.default.setData("buildResearch",t)},t.getResearchPartType=function(e){var t=0,o=s.default.getDb("building_research_db");for(var n in o){var r=o[n];r.employeeId==e&&(t=r.partType)}return t},t.getNextResearchPartId=function(e){var t=this.getResearchPartType(e);if(!t)return null;for(var o=0,n=this.partTypeToPartDatasDict[t],r=n.length,a=0;a<r;a++){var i=n[a];if(l.default.getItemAmount(i.id)<=0){o=i.id;break}}return o},t.research=function(e,t){var o=this.getNextResearchPartId(e),n=s.default.get("cosmetic_part_db",o);return!!n&&(!(!t&&!u.default.tryCostByItems([[d.default.ITEM_ID_GOLD,n.researchGoldNum]],"\u7814\u7a76\u6d88\u8017"))&&(this.staffResearchCompletedTimeDict[e]=i.default.time()+(n.researchCostTime||100),this.saveRecord(),this.sendMsg("MSG_EMPLOYEE_START_RESEARCH",{id:e}),!0))},t.getResearchRemainTime=function(e){var t=this.staffResearchCompletedTimeDict[e];return t&&t>i.default.time()?t-i.default.time():0},t.getResearchProcessPercent=function(e){var t=this.staffResearchCompletedTimeDict[e];if(!t)return 0;var o=this.getNextResearchPartId(e),n=s.default.get("cosmetic_part_db",o);return n?1-(i.default.time()-t)/(n.researchCostTime||100):0},t.getResearchCompletedPartId=function(e,t){var o=this.staffResearchCompletedTimeDict[e];if(o&&!(i.default.time()<o)){t||(this.staffResearchCompletedTimeDict[e]=0,this.saveRecord());var n=this.getNextResearchPartId(e);return t||(l.default.addItemAmount(n,1,"\u7814\u7a76"),l.default.addItemAmount(924,1,"\u4efb\u52a1\u7269\u54c1")),n}},t.isUnReceivedResearchCompletedPart=function(){for(var e in this.staffResearchCompletedTimeDict){if(this.getResearchCompletedPartId(parseInt(e),!0))return!0}return!1},t.getAllResearchCompletedPartArr=function(){var e=[];for(var t in this.staffResearchCompletedTimeDict){var o=this.getResearchCompletedPartId(parseInt(t));o&&e.push(o)}return e},t.tryReceiveAllRechsearchCompletedPartArr=function(){if(this.isUnReceivedResearchCompletedPart()){var e=o.getAllResearchCompletedPartArr();if(e&&0!=e.length){cc.log("-----do receive part=",e);for(var t in e){var n=e[t];p.default.addGotItemTip(n,1)}}}},t.getStaffResearchBadgeCount=function(e){var t=h.default.getEmployee(e),n=0;if(t.level>0){var r=o.getNextResearchPartId(t.id)||0,a=s.default.get("cosmetic_part_db",r);if(a)(a.researchGoldNum||9999999999)<=l.default.getItemAmount(d.default.ITEM_ID_GOLD)&&(n=1)}else{(t.template.upgradeCostGoldNum||9999999999)<=l.default.getItemAmount(d.default.ITEM_ID_GOLD)&&(n=1)}return n},t.onMsgItemAmountChanged=function(e){},t=o=r([f],t)}(a.default);o.default=g,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrCfg":"mgrCfg","./mgrEmployee":"mgrEmployee","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrShop":"mgrShop","./mgrTip":"mgrTip"}],mgrBuildingStore:[function(e,t,o){"use strict";cc._RF.push(t,"2343ciH2tZEVYVLjT+yQcAg","mgrBuildingStore");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("../struct/sBuildingStore"),s=e("./mgrRecord"),l=e("./mgrCfg"),c=e("./mgrPlayer"),u=e("./mgrShop"),d=e("../../ulframework/utils/Timer"),p=e("../Const"),h=cc._decorator.ccclass,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.registerListeners({MSG_RECORD_UPDATE:this.loadRecord.bind(this),MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this)}),d.default.callLoop(1,this.onTimerLoop.bind(this),!0),this.loadRecord()},t.loadRecord=function(){e.loadRecord.call(this);s.default.getData("buildStore");var t=c.default.getItemAmount(p.default.ITEM_ID_BUILDING_STORE),o=new i.default(p.default.ITEM_ID_BUILDING_STORE,t);this.buildStore=o,this.saveRecord()},t.saveRecord=function(){e.saveRecord.call(this);s.default.setData("buildStore",{})},t.onTimerLoop=function(){},t.onMsgItemAmountChanged=function(e){e.itemId},t.getBuildingStore=function(){return this.buildStore},t.resetAvatarOrderNum=function(){this.buildStore.resetAvatarOrderNum()},t.addShopOrderNum=function(e){c.default.addItemAmount(p.default.ITEM_ID_AVATAR_ORDER,e||1,"\u52a0\u987e\u5ba2")},t.upgradeBuildingStore=function(e){var t=this.getBuildingStore();if(!t)return!1;var o=l.default.get("building_store_db",t.id,t.level+1);return!!o&&(!(!e&&!u.default.tryCostByItems([[p.default.ITEM_ID_GOLD,t.template.upgradeCostGoldNum]],"\u5e97\u94fa\u5347\u7ea7\u6d88\u8017"))&&(t.setLevel(o.level),this.saveRecord(),this.sendMsg("MSG_BUILDING_STORE_LEVEL_CHANGED",{id:t.id}),!0))},t.buildStore=null,t=r([h],t)}(a.default);o.default=f,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../Const":"Const","../struct/sBuildingStore":"sBuildingStore","./mgrCfg":"mgrCfg","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrShop":"mgrShop"}],mgrCfg:[function(e,t,o){"use strict";cc._RF.push(t,"4efa6oODZxF+Ji7gcSaoIFq","mgrCfg");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../ulframework/manager/Manager"),l=e("../../ulframework/utils/CfgParser"),c=e("../../ulframework/utils/Tools"),u=e("../Const"),d=e("./mgrAlu"),p=e("./mgrCosmetic"),h=e("../../ulframework/utils/LoadingTask"),f=cc._decorator.ccclass,g=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return n(o,t),o.onLoad=function(){t.onLoad.call(this)},o.getParseFileNameArr=function(){return[["achievement_db","m"],["achievement_target_db","m"],["ad_event_db","m"],["ad_reward_db","m"],["ad_placeholder_db","a"],["alu_db","m"],["anim_node_db","m"],["building_store_db","mm"],["building_research_db","m"],["cop_db","m"],["cop_process_db","m"],["cosmetic_background_db","m"],["cosmetic_brush_db","m"],["cosmetic_brush_head_db","m"],["cosmetic_decoration_db","m"],["cosmetic_decoration_group_db","m"],["cosmetic_part_db","m"],["cosmetic_part_type_db","m"],["cosmetic_subject_tag_db","m"],["common_template_db","m"],["daily_quest_template_db","m"],["employee_template_db","mm"],["employee_adventure_db","mm"],["happy_five_one_quest_db","m"],["happy_five_one_config_db","m"],["guide_db","ma"],["guide_const_db","m"],["item_box_db","m"],["item_template_db","m"],["item_recover_db","m"],["item_daily_max_buy_db","m"],["jump_other_game_db","m"],["mid_autumn_lottery_item_db","ma"],["online_reward_db","mm"],["op_ncov_module_config_db","m"],["particle_db","m"],["part_price_db","mm"],["packing_db","mm"],["packing_to_subject_db","m"],["packing_avatar_init_db","m"],["pvp_like_reward_db","m"],["pvp_offline_db","m"],["pvp_offline_subject_db","m"],["pkmirror_config_db","m"],["pkmirror_level_db","m"],["pkmirror_offline_db","m"],["pkmirror_star_types_db","m"],["pkmirror_subject_db","a"],["pk_mirror_suit_db","a"],["quest_power_config","m"],["random_name_part1_db","a"],["random_name_part2_db","a"],["en_random_name_part1_db","a"],["en_random_name_part2_db","a"],["vi_random_name_part1_db","a"],["vi_random_name_part2_db","a"],["id_random_name_part1_db","a"],["id_random_name_part2_db","a"],["pt_random_name_part1_db","a"],["pt_random_name_part2_db","a"],["shop_discount_config","a"],["shop_discount_item_db","m"],["shop_router_db","a"],["shop_template_db","m"],["share_config_db","m"],["sign_db","mm"],["sign_db2","mm"],["sign_suit_db","m"],["sign_lottery_db","a"],["sound_db","m"],["spine_db","m"],["stage_chapter_db","m"],["stage_score_mapping_db","a"],["stage_db","m"],["store_rank_offline_db","m"],["store_rank_offline_subject_db","a"],["suit_db","m"],["tag_mapping_db","m"],["text_db","m"],["warp_tip_db","a"],["wish_module_config_db","m"],["wish_special_db","m"],["cfg/cpart/cpart_effect_layout.json",""],["cfg/cpart/cpart_pos.json",""],["cfg/stage/stage_data.json",""]]},o.downloadDataFiles=function(e,t){var o=this,n=function(e,t){if(t&&""!=t)return ul.format("cfg/%s",e);var o=e.lastIndexOf(".");return e.substring(0,o)},r=this.getParseFileNameArr(),a=function(l){var c=r[l],u=c[0],d=c[1],p=n(u,d);cc.loader.loadRes(p,function(n,r){n?a(l):(o.allFileDatas[u]=r.json,cc.loader.release(r),s+=1,t&&t(s,i),s==i&&e&&e())})},i=r.length,s=0;for(var l in r)a(parseInt(l))},o.getLoadingTasks=function(){var e=this,t=[],o=new h.LoadingTask("\u89e3\u6790\u914d\u7f6e\u8868",function(t){return a(e,void 0,void 0,function(){var e,o,n,r,a,s,c;return i(this,function(i){for(e=this.getParseFileNameArr(),o=0;o<e.length;o++)n=e[o],r=n[0],(a=n[1])&&""!=a&&((s=this.allFileDatas[r])?(c=l.default.parseCfgByJsonObj(r,s,a),cc.loader.releaseAsset(s),c?(this.allDbs[r]=c,this.dbRules[r]=a,delete this.allFileDatas[r]):console.log("[\u8b66\u544a] \u914d\u7f6e\u8868\u89e3\u6790\u5931\u8d25\uff01",r)):console.log("---cfg error name=",r));return t.triggerCompleted(),[2]})})});t.push(o);var n=[this._processPackingDb.bind(this),this._copyPartToItem.bind(this),this._processAluDb.bind(this),this._processSpineDb.bind(this),this.loadCosmeticLayout.bind(this),this._processTextDb.bind(this),this._processTagMapping.bind(this),this._processStageDb.bind(this),this.validateCfg.bind(this),this._processItemBoxDb.bind(this),this._processAchievement.bind(this)],r=new h.LoadingTask("processor",function(e){for(var t=0;t<n.length;t++){(0,n[t])()}e.triggerCompleted()});return t.push(r),t},o.getDb=function(e){var t=this.allDbs[e||""];return t},o.getDbAndSortByField=function(e,t){var o=this.getDb(e);if(!o)return[];var n=[];return c.default.forEachMap(o,function(e,t){n.push(t)}),t="string"==typeof t?[t]:t,c.default.sortArrayByField(n,t)},o.get=function(e,t,o,n,r){void 0===o&&(o=null),void 0===n&&(n=null),void 0===r&&(r=!1);var a=this.getDb(e);if(!a)return null;var i=a[t];return null==i?i:null!=o&&null==(i=i[o])?i:(null!=n&&(i=i[n]),i)},o.quietGet=function(e,t,o,n){return void 0===o&&(o=null),void 0===n&&(n=null),this.get(e,t,o,n,!0)},o.forDb=function(e,t){var o=this.getDb(e);o&&c.default.forEachMap(o,t)},o._processPackingDb=function(){var e=this.getDb("packing_db");for(var t in e){var o=e[t],n=c.default.clone(o[0]),r=n.icon,a=n.texture,i=n.textureFront;for(var s in o){var l=o[s];r=l.icon&&""!=l.icon?l.icon:r,a=l.texture&&""!=l.texture?l.texture:a,i=l.textureFront&&""!=l.textureFront?l.textureFront:i,l.name=n.name||"",l.icon=ul.format("%s%s",n.iconPathHead,r),l.texture=ul.format("%s%s",n.texturePathHead,a),l.textureFront=ul.format("%s%s",n.texturePathHead,i),delete l.iconPathHead,delete l.texturePathHead}}},o._copyPartToItem=function(){var e=this.getDb("item_template_db"),t=this.getDb("cosmetic_part_db"),o=null;for(var n in e){o=a=e[n];break}for(var r in t){var a=t[r];if(e[r])cc.log(ul.format("\u8b66\u544a\uff01\u8b66\u544a\uff01\u8b66\u544a\uff01 \u670d\u88c5\u8868\u4e2did\u3010%d\u3011\u5728\u7269\u54c1\u8868\u4e2d\u5df2\u88ab\u5360\u7528\uff01",r));else{var i=c.default.clone(o);i.id=r,i.name=a.name||"",i.level=a.level,i.flag=u.default.ITEM_FLAG_PART,i.icon=a.icon,i.desc=a.desc||"",i.defaultAmount=a.bDefaultOwn?1:0,i.sellItemId=a.sellItemId,i.sellItemAmount=a.sellItemAmount,e[r]=i}}},o.loadCosmeticLayout=function(){var e=this.getFileData("cfg/cpart/cpart_pos.json"),t=this.getDb("cosmetic_part_db");for(var o in t){var n={},r=(c=t[o]).resources;for(var a in r){var i=r[a],s=(i[0],e[i[1]]||cc.v2(0,0));n[a]=s}c.resourcePoses=n}var l=this.getDb("cosmetic_brush_db");for(var o in l){var c;s=e[(c=l[o]).texture]||cc.v2(0,0);c.resourcePos=s}var u=this.getDb("cosmetic_part_type_db");for(var d in u){var p=u[d],h={};h[d]=!0;var f=p.subTypes||[];for(var o in f){h[f[o]]=!0}p.containTypeDict=h}var g=this.getDb("cosmetic_part_db");for(var m in g){(v=g[m]).typeData=this.get("cosmetic_part_type_db",v.type)}var _=this.getFileData("cfg/cpart/cpart_effect_layout.json");for(var m in _){var v,y=_[m];(v=this.get("cosmetic_part_db",m))&&(v.effectResources=y)}},o._processItemBoxDb=function(){for(var e=[],t=[],o=[],n=[],r=1;r<=10;r++)e.push("ratio_"+r),t.push("itemId_"+r),o.push("minAmount_"+r),n.push("maxAmount_"+r);var a=this.allDbs.item_template_db,i=[];this.forDb("item_box_db",function(r,s){var l=[],c={boxId:s.boxId,index:s.index,name:s.name,ratioType:s.ratioType,triggerRatio:s.triggerRatio,items:l};i.push(c);for(var u=0;u<e.length;u++){var d=s[e[u]],p=s[t[u]],h=s[o[u]],f=s[n[u]];if(p>0)a[p]&&(f<h&&(f=h),l.push({ratio:d,itemId:p,minAmount:h,maxAmount:f}))}});var s={};for(r=0;r<i.length;r++){var l=i[r];s[l.boxId]=l}this.allDbs.item_box_db=s},o._processTextDb=function(){},o._processTagMapping=function(){var e={},t=this.getDb("tag_mapping_db");for(var o in t){var n=t[o];""!=n.src&&""!=n.dst&&(e[n.src]=n.dst)}this.allDbs.tag_mapping_db=e},o._processStageDb=function(){var t=function(e){for(var t=new RegExp("[.=]"),o=0;o<e.length;o++){if(e.substr(o,1).match(t))return o}return-1},o=this.getDb("stage_db");for(var n in o){var r={},a=(v=o[n]).gradeWeightsStr.split(",");for(var i in a){var s=a[i],l=t(s);if(l>=0){var c=parseFloat(s.substr(0,l)),u=(c=parseFloat(s.substring(0,l)),parseFloat(s.substring(l+1,s.length))),d=s.substring(l,l+1);r[c]="."==d?{weight:u,bRequired:!1}:{weight:u,bRequired:!0}}}v.gradeWeights=r,v.gradeIds=v.gradeIdsStr.split(";");try{var h=!0,f=null;if(v.scriptName&&""!=v.scriptName&&(f=e(v.scriptName))){var g=f.default;v.script=new g,h=!1}if(h&&(f=e("StageScriptBase"))){g=f.default;v.script=new g}}catch(e){}}var m=this.getDb("stage_chapter_db")||{};for(var n in o){var _=o[n];for(var i in m){var v,y=(v=m[i]).id,C=v.stageIds||[];for(var S in C){if(C[S]==_.id){_.chapterId=y;break}}if(_.chapterId)break}}var b=function(e,t){var o={},n=[],r=p.default.getStagePartDatas(e,t)||{};for(var a in r){var i=r[a];n.push(i),o[i]=!0}return{arr:n,dict:o}},R=this.getDb("stage_db");for(var T in R){var A=R[T],D=b(T,!0),I=D.arr,w=D.dict;A.recommendIds2=I,A.recommendIdHash2=w}},o.validateCfg=function(){},o._processAchievement=function(){c.default.forEachMap(this.getDb("achievement_target_db"),function(e,t){for(var o={},n=0;n<t.cmds.length;n++){o[t.cmds[n]]=!0}t.cmdHash=o})},o._processAluDb=function(){for(var e=[],t=[],o=[],n=[],r=1;r<=5;r++)e.push("logic_or_"+r),t.push("key_"+r),o.push("operator_"+r),n.push("value_"+r);var a=d.default.calcCheckData(),i=d.default.OPERATOR_HANDLERS,s={};this.forDb("alu_db",function(r,l){var c=[],u={id:l.id,name:l.name,conditions:c};s[l.id]=u;for(var d=0;d<5;d++){var p=1==l[e[d]],h=l[t[d]],f=l[o[d]],g=l[n[d]];if(h)if(null==a[h]);else if(null==i[f]);else{var m=parseFloat(g),_={bLogicOr:p,key:h,operator:f,value:g=isNaN(m)?g:m};c.push(_)}}}),this.allDbs.alu_db=s},o._processSpineDb=function(){c.default.forEachMap(this.getDb("spine_db"),function(e,t){for(var o=1;o<=10;o++){var n=t["mov_"+o];n||(n=t.mov_1),t["mov_"+o]=n}})},o.setFileData=function(e,t){this.allFileDatas[e]=t},o.getFileData=function(e,t){if(void 0===t&&(t=null),this.allFileDatas&&e){var o=this.allFileDatas[e];return t&&t(o),o}t&&t(null)},o._recursiveForDb=function(e,t){var o=this.getDb(e);if(o){var n=this.dbRules[e];1==n.length?c.default.forEachMap(o,function(e,o){try{t(o)}catch(e){console.log(e?e.message:"unknown")}}):2==n.length&&c.default.forEachMap(o,function(e,o){c.default.forEachMap(o,function(e,o){try{t(o)}catch(e){console.log(e?e.message:"unknown")}})})}},o.checkResExist=function(e,t){this._recursiveForDb(e,function(o){var n=o[t];n&&(cc.loader._getResUuid(n)||cc.log(ul.format("[warn] mgrCfg:checkResExist file not found! db:[%s] %s=[%s]",e,t,n)))})},o.coverDb=function(e,t){this.allDbs[t]=this.allDbs[e]},o.allDbs={},o.dbRules={},o.allFileDatas={},o=r([f],o)}(s.default);o.default=g,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/CfgParser":"CfgParser","../../ulframework/utils/LoadingTask":"LoadingTask","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrAlu":"mgrAlu","./mgrCosmetic":"mgrCosmetic",StageScriptBase:"StageScriptBase"}],mgrChannel:[function(e,t,o){"use strict";cc._RF.push(t,"9505fCIi11HwJeOYfqL7KYB","mgrChannel");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),a=e("./mgrRecord"),i=e("./mgrSdk"),s=e("./mgrPlayer"),l=e("../Const"),c=e("./mgrTip"),u=e("../../ulframework/utils/Tools"),d=e("./mgrDirector"),p=e("./mgrDebug"),h=[{img:"https://gamesres.ultralisk.cn/notice/sharegames/game70/share1.jpg",content:"\u4f60\u7684\u53f6\u7f57\u4e3d\u5a03\u5a03\u5e97\u5df2\u5c31\u7eea\uff0c\u7acb\u5373\u5f00\u59cb\u7ecf\u8425\u5427~"},{img:"https://gamesres.ultralisk.cn/notice/sharegames/game70/share2.jpg",content:"\u6211\u8bbe\u8ba1\u7684\u53f6\u7f57\u4e3d\u5a03\u5a03\u672c\u5468\u9500\u91cf\u7b2c\u4e8c\u540d\uff0c\u4f60\u4e5f\u6765\u8bd5\u8bd5\u5427\uff01"},{img:"https://gamesres.ultralisk.cn/notice/sharegames/game70/share3.jpg",content:"\u8bbe\u8ba1\u4e2a\u6027\u5a03\u5a03\uff0c\u5f00\u4e00\u5bb6\u4e13\u5c5e\u53f6\u7f57\u4e3d\u5a03\u5a03\u5e97\uff01"}],f={},g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_SDK_INSTALL_SHORTCUT_RESULT:this.onMsgSdkInstallShortCutResult,MSG_SDK_JUMP_OTHER_GAME_REWARD_RESULT:this.onMsgSdkJumpOtherGameRewardResult,MSG_SDK_GET_SHORTCUT_STATE_RESULT:this.onMsgSdkGetShortcutStateResult})},t.loadRecord=function(){e.loadRecord.call(this);var t=a.default.getData("channel")||{};this._userOpenVideoRecord=t._userOpenVideoRecord||!0,this._isGetWxgzhReward=t._isGetWxgzhReward||!1,this.bTakedInstallShortCut=t.bTakedInstallShortCut||!1,this.bInstallShortCutTipShowed=t.bInstallShortCutTipShowed||!1},t.saveRecord=function(){e.saveRecord.call(this);var t={_userOpenVideoRecord:this._userOpenVideoRecord,_isGetWxgzhReward:this._isGetWxgzhReward,bTakedInstallShortCut:this.bTakedInstallShortCut,bInstallShortCutTipShowed:this.bInstallShortCutTipShowed};a.default.setData("channel",t)},t.isRankEnabled=function(){return!this._isUseSdkRank},t.setChannelName=function(e){this._channelName=e||l.ChannelName.debug},t.getChannelName=function(){return this._channelName||l.ChannelName.debug},t.isChannel4399=function(){return this._channelName==l.ChannelName.game4399},t.isChannelBaidu=function(){return this._channelName==l.ChannelName.baidu},t.isChannelHeadline=function(){return this.isChannelPlatformToutiao()||this.isChannelPlatformDouyin()},t.isChannelPlatformToutiao=function(){return this._channelName==l.ChannelName.toutiao},t.isChannelPlatformDouyin=function(){return this._channelName==l.ChannelName.douyin},t.isChannelOppo=function(){return this._channelName==l.ChannelName.oppo},t.isChannelVivo=function(){return this._channelName==l.ChannelName.vivo},t.isChannelWeixin=function(){return this._channelName==l.ChannelName.weixin},t.canGameInterPush=function(){return this.interPushConfig&&this.interPushConfig.length>0},t.canGameInterPush1=function(){return this.canGameInterPush()&&1==i.default.getCopNumberValueByKey("b_jump_other_game")},t.canGameInterPush2=function(){return this.canGameInterPush()&&1==i.default.getCopNumberValueByKey("b_jump_other_game2")},t.canGameInterPush3=function(){return this.canGameInterPush()&&1==i.default.getCopNumberValueByKey("b_jump_other_game3")},t.setInterPushConfig=function(e){for(var t=[],o=0;o<e.length;o++){var n=e[o];n&&t.push({gameId:n.index,url:n.url})}this.interPushConfig=t},t.getInterPushConfig=function(){return this.interPushConfig||[]},t.setIsCopOpenPay=function(e){this._isCopOpenPay=!!e},t.isOpenPay=function(){return this._isPayEnabled},t.isInstallShortCutTipShowed=function(){return this.bInstallShortCutTipShowed},t.markInstallShortCutTipShowed=function(){this.bInstallShortCutTipShowed=!0,this.saveRecord()},t.tryShowFindMeOrShortCut=function(){this._isSupportInstallShortcut?this.isTakedInstallShortCutReward()||(this._isInstallShortcutHasPrompt?i.default.installShortcut():d.default.warpDialogWithSmallEffect("vInstallShortCutComfirmDialog")):(p.default.ENABLE_CC_DEUBG,this._isSupportFindMinigames&&this.isChannelPlatformToutiao()?d.default.warpDialogWithSmallEffect("vFindMeToutiaoDialog"):(p.default.ENABLE_CC_DEUBG,this._isSupportFindMinigames&&this.isChannelPlatformDouyin()?d.default.warpDialogWithSmallEffect("vFindMeDouyinDialog"):(p.default.ENABLE_CC_DEUBG,this._isSupportFindMinigames&&this.isChannelWeixin()&&d.default.warpDialogWithSmallEffect("vFindMeWechatDialog"))))},t.getInstallShortCutRewardCount=function(){return 50},t.isTakedInstallShortCutReward=function(){return this.bTakedInstallShortCut},t.onMsgSdkInstallShortCutResult=function(e){var t=e.code||0,o=e.msg||"";if(o&&c.default.showMsgTip(o),!this.bTakedInstallShortCut&&(1==t||2==t)){this.bTakedInstallShortCut=!0,this.saveRecord();var n=this.getInstallShortCutRewardCount();s.default.addItemAmount(l.default.ITEM_ID_RMB,n,"\u6dfb\u52a0\u5230\u684c\u9762\u5feb\u6377\u65b9\u5f0f\u5956\u52b1"),c.default.addGotItemTip(l.default.ITEM_ID_RMB,n),this.sendMsg("MSG_SDK_INSTALL_SHORT_CUT_SUC")}},t.getShareDataByIndex=function(e){var t=f[this._channelName]||h||[],o=ul.clone(t[e]||{});return o.index=e,o},t.getShareDataRandom=function(){var e=f[this._channelName]||h||[],t=u.default.random(0,e.length-1),o=ul.clone(e[t]||{});return o.index=t,o},t.onMsgSdkJumpOtherGameRewardResult=function(e){var t=e,o=t.bSuccessful,n=t.rewards;if(o)for(var r=0;r<n.length;r++){var a=n[r],i=a[0],l=a[1];s.default.addItemAmount(i,l,"\u6fc0\u52b1\u4e92\u63a8\u8df3\u8f6c\u6210\u529f"),c.default.addGotItemTip(i,l)}},t.onMsgSdkGetShortcutStateResult=function(e){var t=e,o=t.state,n=!!t.bHasPrompt;this._isSupportInstallShortcut=1==o,this._isInstallShortcutHasPrompt=n},t.isCanShowMidAutumn=function(){var e=i.default.getCopNumberValueByKey("mid_autumn_start_time"),t=i.default.getCopNumberValueByKey("mid_autumn_end_time"),o=u.default.time();return!!(1==i.default.getCopNumberValueByKey("b_open_mid_autumn_lottery")&&o>e&&o<t)},t.isCanClickVideoDialogContent=function(){return 1==i.default.getCopNumberValueByKey("b_video_content_click")},t.isCanVideoTick=function(){return 1==i.default.getCopNumberValueByKey("b_video_tick")},t.getVideoShareRewardAmount=function(){return 10},t.isShowVideoRecorderFinger=function(){return 1==i.default.getCopNumberValueByKey("b_show_video_recoder_finger")},t.isCanClickVideoShareDialogContent=function(){return 1==i.default.getCopNumberValueByKey("b_video_share_content_click")},t._userOpenVideoRecord=!0,t._isGetWxgzhReward=!1,t._isCopOpenPay=!1,t._isNeedAlertWxgzhReward=!1,t.bTakedInstallShortCut=!1,t.bInstallShortCutTipShowed=!1,t._isThirdExit=!1,t._isAbout=!1,t._isMoreGame=!1,t._isULMoreGame=!1,t._isPayEnabled=!1,t._isShareEnabled=!1,t._isUseSdkRank=!1,t._channelName=l.ChannelName.debug,t._isShowUrlAdIcon=!1,t._isSupportRecordShare=!1,t._isSupportClipboardData=!1,t._isSupportInstallShortcut=!1,t._isInstallShortcutHasPrompt=!1,t.interPushConfig=[],t._isSupportFindMinigames=!1,t._isSupportRecommendationBtn=!1,t._is4399Watermark=!1,t._isSupportChannelMoreGameBox=!1,t.findmeImageUrl="",t}(r.default);o.default=g,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrDebug":"mgrDebug","./mgrDirector":"mgrDirector","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrSdk":"mgrSdk","./mgrTip":"mgrTip"}],mgrCop:[function(e,t,o){"use strict";cc._RF.push(t,"b7f11LUJONC1ZkDAiQLLAgk","mgrCop");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("./mgrCfg"),s=e("../../ulframework/utils/Tools"),l=e("./mgrDebug"),c=cc._decorator.ccclass,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadLocalCop()},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.loadLocalCop=function(){var e={};i.default.forDb("cop_db",function(t,o){e[t]=(l.default.ENABLE_CC_DEUBG,o.defaultValue)}),this.processCop(e),this.localCop=e},t.processCop=function(e){i.default.forDb("cop_process_db",function(t,o){var n=e[t];if(null!=n)for(var r=n.split(o.splitChar)||[],a=0;a<o.outputFieldNames.length;a++){var i=o.outputFieldNames[a],s=r[a];null==s||(e[i]=s)}}),cc.log("---------localCop:",this.localCop)},t.get=function(e){var t=this.remoteCop[e];return null!=t?t:this.localCop[e]},t.getNumberValue=function(e){var t=this.get(e);if(null==t)return 0;var o=parseFloat(t);return isNaN(o)?0:o},t.getBooleanValue=function(e){var t=this.get(e);return null!=t&&("1"==(t=t.toLowerCase())||"true"==t)},t.getCops=function(){var e={};return 0==s.default.getTableCount(this.localCop)&&this.loadLocalCop(),s.default.forEachMap(this.localCop,function(t,o){e[t]=o}),s.default.forEachMap(this.remoteCop,function(t,o){e[t]=o}),e},t.setRemoteValue=function(e,t){null!=e&&(this.remoteCop[e]=t,this.processCop(this.remoteCop))},t.onReceiveSdkCop=function(e){try{this.remoteCop=JSON.parse(e||"")||{},this.processCop(this.remoteCop)}catch(e){console.info("----onReceiveSdkCop error")}},t.getRemoteCop=function(){return ul.clone(this.remoteCop)},t.getLocalCop=function(){var e={};return i.default.forDb("cop_db",function(t,o){e[o.key]=o.defaultValue}),e},t.processAdCopDebug=function(e){var t=this.localCop;i.default.forDb("cop_process_db",function(o,n){var r=t[o];if(null!=r){r.split(n.splitChar);for(var a=0;a<n.outputFieldNames.length;a++){var i=n.outputFieldNames[a],s=e;null==s||(t[i]=s)}}})},t.localCop={},t.remoteCop={},t.sdkCop={},t=r([c],t)}(a.default);o.default=u,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","./mgrCfg":"mgrCfg","./mgrDebug":"mgrDebug"}],mgrCosmetic:[function(e,t,o){"use strict";cc._RF.push(t,"b119bBaJQpDP6mS9M+viwWd","mgrCosmetic");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("../Const"),s=e("../../ulframework/utils/Tools"),l=e("./mgrCfg"),c=e("./mgrDebug"),u=e("./mgrPlayer"),d=e("./mgrDirector"),p=e("./mgrPool"),h=e("../struct/sAvatar"),f=e("./mgrRecord"),g=e("../../ulframework/utils/Timer"),m=e("../struct/PartResLoadingPipe"),_=cc._decorator.ccclass,v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),g.default.callLoop(.06,this.onTimerLoop.bind(this),!0)},t.loadRecord=function(){e.loadRecord.call(this);var t=f.default.getData("cosmetic")||{};this.lastAvatarText=t.lastAvatarText||""},t.saveRecord=function(){e.saveRecord.call(this);var t={lastAvatarText:this.lastAvatarText};f.default.setData("cosmetic",t)},t.onTimerLoop=function(){this.tryStartPreloadParts()},t.tryStartPreloadParts=function(){var e=this.preloadingPartDict||{};for(var t in e){var o=parseInt(t);if(this.isPreloadedPart(parseInt(t))){var n=this.waitPartLoadCallbacks[o];if(n)for(var r=n.length-1;r>=0;r--){var a=n[r];if(a)try{a(o)}catch(e){}n.splice(r,1)}}}},t.isPreloadedPart=function(e){var t=(this.preloadingPartDict||{})[e];if(!t||!t.pipes||0==t.pipes.length)return!1;if(t.status==i.ResLoadStatus.LOADED)return!0;for(var o=t.pipes||[],n=!0,r=o.length,a=0;a<=r-1;a++){if(!o[a].isCompleted()){n=!1;break}}return n&&(t.status=i.ResLoadStatus.LOADED),n},t.calcGrade=function(e,t){var o=this._calcPartScores(e.gradeIds,t.getUsedPartIds()),n={};for(var r in o){var a=(l.default.get("cosmetic_part_type_db",r)||{}).beforeAddRemoveTypes||[];for(var i in a){n[a[i]]=!0}}var s=0,c=0,u=e.gradeWeights;for(var d in u)if(!n[d]){var p=u[d],h=p.weight,f=p.bRequired,g=o[d];g?(s+=g*h,c+=h):f&&(c+=h)}var m=0;return 0<c&&(m=Math.floor(s/c)),{score:m+=e.scoreOffset,report:{gradeIds:e.gradeIds,gradeWeights:e.gradeWeights,partScores:o,ignorePartTypes:n,totalScore:s,totalWeight:c}}},t._calcPartScores=function(e,t){var o={};for(var n in t){var r=t[n],a=l.default.get("cosmetic_part_db",r);if(a&&!a.bIgnoreInGrade){var i=0,s=0;for(var c in e){var u=a[e[c]]||0;0!=u&&(i+=u,s+=1)}s>0&&(o[a.type]=i/s)}}return o},t.calcPartsTotalScore=function(e,t){var o=0,n=s.default.getTableCount(t);for(var r in t){var a=t[r];o+=this.calcPartScore(e,a)}return Math.floor(o/n)},t.calcPartScore=function(e,t){var o=0,n=0,r=l.default.get("cosmetic_part_db",t);if(r&&!r.bIgnoreInGrade)for(var a in e){var i=r[e[a]]||0;0!=i&&(o+=i,n+=1)}return n>0&&(o/=n),o},t.calcMatchGradeCount=function(e,t){var o=0,n=l.default.get("cosmetic_part_db",t);if(n&&!n.bIgnoreInGrade){var r=n.topSubjectIds||[];for(var a in r){var i=r[a];for(var s in e){var c=e[s],u=n[c]||0;if(i==c&&0!=u){o+=1;break}}}}return o},t.calcMatchGradeScore=function(e,t){var o=0,n=l.default.get("cosmetic_part_db",t);if(n&&!n.bIgnoreInGrade){var r=n.topSubjectIds||[];for(var a in r){var i=r[a];for(var s in e){var c=e[s],u=n[c]||0;if(i==c&&0!=u){o+=u;break}}}}return o},t.getAvatarScoreBySubjectId=function(e,t){var o=e.getUsedPartIds(),n=0;for(var r in o){var a=o[r],i=l.default.get("cosmetic_part_db",a);i&&(n+=i[t]||0)}return n},t.getSubjectByPackingId=function(e){var t=l.default.get("packing_to_subject_db",e);return t?t.subjectId:0},t.isPartUnlocked=function(e){return!!c.default.bUnlockAll||u.default.getItemAmount(e)>0},t.getExtraPosByPartIdAndAvatar=function(e,t){var o=l.default.get("cosmetic_part_db",e);if(!o)return cc.v2(0,0);var n=o.type,r=null,a=l.default.getDb("cosmetic_part_type_db");for(var i in a){var s=a[i];if(s.extraLayoutSubTypes.length>0&&!t.isEmptyPartType(s.id))for(var c in s.extraLayoutSubTypes){if(s.extraLayoutSubTypes[c]==n){r=s.id;break}}}if(r){var u=t.getFinishedPartId(r);if(u)return this.getPartExtraPosByPartIds(e,u)||cc.v2(0,0)}return cc.v2(0,0)},t.getPartExtraPosByPartIds=function(e,t){return cc.v2(0,0)},t.getPartOffsetPosByPartId=function(e){return cc.v2(0,0)},t.createResNode=function(e,t,o){void 0===o&&(o=!1);var n=new cc.Node;if(e==i.CPartResType.SPRITE){var r=d.default.createSpriteNode(t);if(!r)return n;r.parent=n,n.sprite=r}else if(e==i.CPartResType.SPINE){var a=p.default.get("spine",t);if(!a)return n;a.parent=n,o||a.play("mov_1",!0),n.spine=a}else if(e==i.CPartResType.ARMATURE);else if(e==i.CPartResType.PARTICLE){var s=p.default.get("particle",t);s.parent=n,n.particle=s}else if(e==i.CPartResType.ANINODE){var l=p.default.get("animNode",t);l.play(t),l.parent=n,n.animNode=l}return n.__res_type=e,n.__res_id=t,n},t.removeResNode=function(e){var t=e.__res_type;if(t==i.CPartResType.SPINE){var o=e.spine;o&&(p.default.put(o),o.parent=null,e.spine=null)}else if(t==i.CPartResType.ARMATURE);else if(t==i.CPartResType.PARTICLE){var n=e.particle;n&&(p.default.put(n),n.parent=null,e.particle=null)}else if(t==i.CPartResType.DECORATION_GROUP){var r=e.decorationGroup;r&&(r.parent=null,e.decorationGroup=null)}else if(t==i.CPartResType.ANINODE){var a=e.animNode;a&&(p.default.put(a),a.parent=null,e.animNode=null)}e.destroy()},t.getStagePartDatas=function(e,t){if(e){var o=(l.default.getFileData(i.default.FILE_STAGE_DATA)||{})[e]||{};return t?o.recStyle:o.defStyle}},t.saveLastAvatar=function(e){this.lastAvatarText=e.serializeToText(),this.saveRecord()},t.getLastAvatar=function(){var e=new h.default;return this.lastAvatarText&&e.fillBySerializeText(this.lastAvatarText),e},t.preloadPartResources=function(e,t){void 0===t&&(t=null);var o=l.default.get("cosmetic_part_db",e);if(o&&!this.isPreloadedPart(e)){if(t&&(this.waitPartLoadCallbacks[e]=this.waitPartLoadCallbacks[e]||[],this.waitPartLoadCallbacks[e].push(t)),!this.preloadingPartDict[e]){for(var n=[],r=o.resources,a=0;a<r.length;a++){var s=r[a],c=s[0],u=s[1];if(c&&u){var d=new m.default(c,u);d.run(),n.push(d)}}this.preloadingPartDict[e]={pipes:n,status:i.ResLoadStatus.UNSTART},this.tryStartPreloadParts()}}else t&&t(e)},t.preloadingPartDict={},t.waitPartLoadCallbacks={},t=r([_],t)}(a.default);o.default=v,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const","../struct/PartResLoadingPipe":"PartResLoadingPipe","../struct/sAvatar":"sAvatar","./mgrCfg":"mgrCfg","./mgrDebug":"mgrDebug","./mgrDirector":"mgrDirector","./mgrPlayer":"mgrPlayer","./mgrPool":"mgrPool","./mgrRecord":"mgrRecord"}],mgrCountBuy:[function(e,t,o){"use strict";cc._RF.push(t,"71b2bcvMmNILLoUWcmkcAoa","mgrCountBuy");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("./mgrAd"),s=e("./mgrCfg"),l=e("./mgrPlayer"),c=e("./mgrRecord"),u=cc._decorator.ccclass,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.registerListeners({MSG_RECORD_UPDATE:this.loadRecord.bind(this),MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this)}),this.loadRecord()},t.loadRecord=function(){e.loadRecord.call(this);c.default.getData("count_buy");this.saveRecord()},t.saveRecord=function(){e.saveRecord.call(this);c.default.setData("count_buy",{})},t.onMsgItemAmountChanged=function(e){e.itemId},t.canBuyPlayCount=function(e,t){return!(!this.canBuyPlayCountUseCoin(e)&&!this.canBuyPlayCountUseAd(t))},t.canBuyPlayCountUseCoin=function(e){var t=s.default.get("item_daily_max_buy_db",e);return!t||(t.amount||0)>l.default.getItemHistoryDailyMaxGotAmount(e)},t.canBuyPlayCountUseAd=function(e){return i.default.getAdEventRemainCount(e)>0},t=r([u],t)}(a.default);o.default=d,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","./mgrAd":"mgrAd","./mgrCfg":"mgrCfg","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord"}],mgrDailyQuest:[function(e,t,o){"use strict";cc._RF.push(t,"aa961YHPW9Me5eQ9PmbT/xD","mgrDailyQuest");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("./mgrCfg"),s=e("./mgrPlayer"),l=e("./mgrRecord"),c=e("../../ulframework/utils/Timer"),u=e("../../ulframework/utils/Tools"),d=e("../Const"),p=e("./mgrSdk"),h=e("./mgrChannel"),f=e("./mgrI18n"),g=cc._decorator.ccclass,m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.registerListeners({MSG_RECORD_UPDATE:this.loadRecord.bind(this),MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this)}),this.loadRecord()},t.loadRecord=function(){e.loadRecord.call(this);var t=l.default.getData("daily_quest")||{};this.dailyQuestDict=t.dailyQuestDict||{},this.lastRefreshTime=t.lastRefreshTime||0,c.default.callLoop(1,this.onTimerLoop.bind(this),!0),this.saveRecord()},t.saveRecord=function(){e.saveRecord.call(this);var t={dailyQuestDict:this.dailyQuestDict,lastRefreshTime:this.lastRefreshTime};l.default.setData("daily_quest",t)},t.onTimerLoop=function(e){this.refreshDailyData()},t.refreshDailyData=function(){if(!u.default.isOneDay(u.default.time(),this.lastRefreshTime)){this.dailyQuestDict={};var e=[],t=i.default.getDb("daily_quest_template_db");for(var o in t){if(11==parseInt(o)){if(!(1==p.default.getCopNumberValueByKey("b_share"))||!h.default._isShareEnabled)continue}else if(12==parseInt(o)){var n=i.default.get("ad_event_db","video_free_energy_name");if(!n)continue;var r=n.ratio;if(n.ratioFromCopKey&&(r=p.default.getCopNumberValueByKey(n.ratioFromCopKey)),!r||r<=0)continue}e.push(t[o])}var a=u.default.randomGotArrayDatas(e,3);for(var o in a){var s=a[o];this.dailyQuestDict[s.id]={id:s.id,state:d.QuestState.normal}}this.lastRefreshTime=u.default.time(),this.saveRecord()}},t.onMsgItemAmountChanged=function(e){var t=e.itemId,o=this.dailyQuestDict||{};for(var n in o){var r=o[n];if(r.state==d.QuestState.normal){var a=i.default.get("daily_quest_template_db",r.id);if(!a||a.checkItemId!=t)continue;s.default.getItemDailyGotAmount(a.checkItemId)>=a.targetItemAmount&&(r.state=d.QuestState.finished,this.saveRecord(),this.sendMsg("MSG_DAILY_QUEST_STATUS_CHANGED",{id:a.id}))}}},t.getFinishedCount=function(){var e=0,t=this.dailyQuestDict||{};for(var o in t){t[o].state==d.QuestState.finished&&(e+=1)}return e},t.getDailyQuest=function(e){return(this.dailyQuestDict||{})[e]},t.getDailyQuestArr=function(){var e=this.dailyQuestDict||{},t=[];for(var o in e)t.push(e[o]);return t=u.default.sortArrayByField(t,"id")},t.receiveDailyQuest=function(e){var t=(this.dailyQuestDict||{})[e];if(t.state==d.QuestState.normal)return[!1,f.default.getText("mgrDailyQuest.1")];if(t.state==d.QuestState.received)return[!1,f.default.getText("mgrDailyQuest.2")];var o=i.default.get("daily_quest_template_db",e),n=s.default.getBascRewardGold(),r=Math.floor(n*(o.factor/100));return t.state=d.QuestState.received,this.saveRecord(),this.sendMsg("MSG_DAILY_QUEST_STATUS_CHANGED",{id:e}),[!0,"",r]},t=r([g],t)}(a.default);o.default=m,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrCfg":"mgrCfg","./mgrChannel":"mgrChannel","./mgrI18n":"mgrI18n","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrSdk":"mgrSdk"}],mgrDebug:[function(e,t,o){"use strict";cc._RF.push(t,"94b92qCPm9LRpz8RaZNPuEq","mgrDebug");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("./mgrGuide"),s=e("./mgrDirector"),l=e("./mgrTip"),c=e("./mgrPlayer"),u=cc._decorator.ccclass,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.registerKeyboardListener(),this.registerListeners({MSG_NETWORK_RESPONSE:this.onMsgNetworkResponse})},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.onKeyDown=function(e){switch(e){case"a":c.default.addItemAmount(2,1e8,"");break;case"f":s.default.openDialog("vFindMeDouyinDialog"),s.default.openDialog("vFindMeToutiaoDialog"),s.default.openDialog("vFindMeWechatDialog");break;case"ctrl_g":i.default._debugCancelDebug();break;case"t":l.default.addGotItemTip(1,100);break;case"u":s.default.warpDialogWithEffect("vPkMirrorDialog")}this.sendMsg("MSG_DEBUG_KEY_DOWN",{keyDesc:e})},t.registerKeyboardListener=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onSystemKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onSystemkeyUp,this)},t.onSystemKeyDown=function(e){var t=e.keyCode;switch(t){case cc.macro.KEY.alt:this.bPressedAlt=!0;break;case cc.macro.KEY.ctrl:this.bPressedCtrl=!0;break;case cc.macro.KEY.shift:this.bPressedShift=!0;break;default:var o=this._genKeyDesc(t);this.onKeyDown(o)}},t.onSystemkeyUp=function(e){switch(e.keyCode){case cc.macro.KEY.alt:this.bPressedAlt=!1;break;case cc.macro.KEY.ctrl:this.bPressedCtrl=!1;break;case cc.macro.KEY.shift:this.bPressedShift=!1}},t._genKeyDesc=function(e){var t="";this.bPressedCtrl&&(t+="ctrl_"),this.bPressedAlt&&(t+="alt_"),this.bPressedShift&&(t+="shift_");for(var o in cc.macro.KEY){if(cc.macro.KEY[o]==e.toString()){t+=o;break}}return t},t.onMsgNetworkResponse=function(e){},t.bPressedCtrl=!1,t.bPressedAlt=!1,t.bPressedShift=!1,t.bUnlockAllStage=!1,t.bUnlockAll=!1,t.ENABLE_CC_DEUBG=!0,t=r([u],t)}(a.default);o.default=d,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","./mgrDirector":"mgrDirector","./mgrGuide":"mgrGuide","./mgrPlayer":"mgrPlayer","./mgrTip":"mgrTip"}],mgrDirector:[function(e,t,o){"use strict";cc._RF.push(t,"0aa037Qgl5NHKS0i0g0xTPb","mgrDirector");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../ulframework/manager/Manager"),l=e("../../ulframework/utils/Timer"),c=e("../../ulframework/utils/Tools"),u=e("../../ulframework/view/DialogBase"),d=e("../Const"),p=e("./mgrPool"),h=e("./mgrGuide"),f=e("./mgrSound"),g=e("./mgrTip"),m=cc._decorator.ccclass,_=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}var s;return n(o,t),s=o,o.processRemoteResLoad=function(){var e=this;if(this.curLoadingRemoteResInfo)console.log("\u6b63\u5728\u52a0\u8f7d\u8fdc\u7a0b\u8d44\u6e90...: url:"+this.curLoadingRemoteResInfo.url);else if(!(this.RemoteResLoadQueue.length<=0)){this.curLoadingRemoteResInfo=this.RemoteResLoadQueue.shift(),console.log("\u5f00\u59cb\u52a0\u8f7d\u8fdc\u7a0b\u8d44\u6e90:"+this.curLoadingRemoteResInfo.url);try{window.qg?this.loadRemoteResQg(this.curLoadingRemoteResInfo.url,function(t,o){if(e.curLoadingRemoteResInfo.bHaveCaller&&(!e.curLoadingRemoteResInfo.caller||!cc.isValid(e.curLoadingRemoteResInfo.caller)))return console.log("\u8fdc\u7a0b\u8d44\u6e90:"+e.curLoadingRemoteResInfo.url+" \u8c03\u7528\u8005\u9500\u6bc1"),void(e.curLoadingRemoteResInfo=null);if(t)console.log("\u8fdc\u7a0b\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25: \u653e\u5728\u961f\u5c3e\u91cd\u8bd5: "+e.curLoadingRemoteResInfo.url),e.RemoteResLoadQueue.push(e.curLoadingRemoteResInfo),e.curLoadingRemoteResInfo=null;else{console.log("\u8fdc\u7a0b\u8d44\u6e90\u52a0\u8f7d\u6210\u529f: "+e.curLoadingRemoteResInfo.url);var n=new cc.SpriteFrame(o);e.curLoadingRemoteResInfo.callback(t,n),e.curLoadingRemoteResInfo=null}}):cc.loader.load(this.curLoadingRemoteResInfo.url,function(t,o){if(e.curLoadingRemoteResInfo.bHaveCaller&&(!e.curLoadingRemoteResInfo.caller||!cc.isValid(e.curLoadingRemoteResInfo.caller)))return console.log("\u8fdc\u7a0b\u8d44\u6e90:"+e.curLoadingRemoteResInfo.url+" \u8c03\u7528\u8005\u9500\u6bc1"),void(e.curLoadingRemoteResInfo=null);if(t)console.log("\u8fdc\u7a0b\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25: \u653e\u5728\u961f\u5c3e\u91cd\u8bd5: "+e.curLoadingRemoteResInfo.url),e.RemoteResLoadQueue.push(e.curLoadingRemoteResInfo),e.curLoadingRemoteResInfo=null;else{console.log("\u8fdc\u7a0b\u8d44\u6e90\u52a0\u8f7d\u6210\u529f: "+e.curLoadingRemoteResInfo.url);var n=new cc.SpriteFrame(o);e.curLoadingRemoteResInfo.callback(t,n),e.curLoadingRemoteResInfo=null}})}catch(e){console.log(e),console.log("\u8fdc\u7a0b\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25: \u653e\u5728\u961f\u5c3e\u91cd\u8bd5: "+this.curLoadingRemoteResInfo.url),this.RemoteResLoadQueue.push(this.curLoadingRemoteResInfo),this.curLoadingRemoteResInfo=null}}},o.onLoad=function(){t.onLoad.call(this),cc.view.setResizeCallback(this.onViewResize.bind(this)),this.registerListeners({MSG_DESTROY_DIALOG:this.onMsgDestroyDialog,MSG_ONLOAD_DIALOG:this.onMsgOnLoadDialog}),l.default.callLoop(.016,this.processRemoteResLoad.bind(this),!0)},o.onMsgOnLoadDialog=function(e){var t=e;if(t&&t.dialogName&&""!=t.dialogName&&t.dialog){try{var o=this.openedDialogDict[t.dialogName];o&&cc.isValid(o)&&(o.closeDialog(!0),cc.log("-----mgrdirect onload--do close"))}catch(e){cc.log("---mgrDirector onLoad dialog error")}this.openedDialogDict[t.dialogName]=t.dialog}},o.onMsgDestroyDialog=function(e){var t=e;t&&t.dialogName&&""!=t.dialogName&&(delete this.openedDialogDict[t.dialogName],cc.log("-----mgrdirect destroy--do close"))},o.closeAllDialog=function(){var e=this.openedDialogDict||[];for(var t in e){var o=e[t];o&&cc.isValid(o)&&o.closeDialog(!0)}this.openedDialogDict={}},o.loadNode=function(e,t,o){void 0===t&&(t={});var n="view/"+e;this.loadRes(n,cc.Prefab,function(e,n){if(e)return cc.warn("\u8b66\u544a] mgrDirector.loadNode load prefab:",e),void o(null);var r=cc.instantiate(n);r.context=t,o(r)})},o.promiseLoadNode=function(e,t){var o=this;return void 0===t&&(t={}),new Promise(function(n,r){o.loadNode(e,t,function(t){null!=t?c.default.triggerPromiseResolve(n,t):r("mgrCfg.promiseLoadNode load faild! viewPath=["+e+"]")})})},o.createView=function(t,o){var n=e(t);if(n){var r=new(0,n.default)(o);return r.name=t,r}},o.refreshSceneSize=function(e){var t=(e=e||cc.director.getScene())._resolution_range||d.default.RESOLUTION_RANGE,o=e.getChildByName("Canvas"),n=cc.view.getFrameSize(),r=n.width/n.height,a=t.maxWidth,i=t.minWidth,s=t.maxHeight,l=t.minHeight,c=i,u=l,p=o.getComponent(cc.Canvas);p||(p=o.addComponent(cc.Canvas)),r<=i/l?r<i/s?(c=i,u=s,o.setContentSize(c,u),p.designResolution=cc.size(c,u),p.fitHeight=!0,p.fitWidth=!0):(p.designResolution=cc.size(c,u),p.fitHeight=!1,p.fitWidth=!0):r>a/l?(c=a,u=l,o.setContentSize(c,u),p.designResolution=cc.size(c,u),p.fitHeight=!0,p.fitWidth=!0):(p.fitHeight=!0,p.fitWidth=!1,p.designResolution=cc.size(c,u))},o.onViewResize=function(){this.refreshSceneSize(),this.sendMsg("MSG_VIEW_RESIZE")},o.getPreloadResByViewName=function(e){var t=[];if(e.lastIndexOf("Dialog")>=0)switch(t.push({url:"view/dialog/"+e,assetType:cc.Prefab}),e){case"vBuildingStoreDialog":t.push({url:"view/node/vSellMoneyNode",assetType:cc.Prefab}),t.push({url:"view/node/vPackingAvatar",assetType:cc.Prefab}),t.push({url:"view/dialog/vBuildStoreResultDialog",assetType:cc.Prefab}),t.push({url:"view/node/vStoreResultRankItem",assetType:cc.Prefab}),t.push({url:"view/node/vSellMoneyNode",assetType:cc.Prefab});break;case"vSubjectSuitDressDialog":t.push({url:"view/node/vSubjectSuitDressListItem",assetType:cc.Prefab});break;case"vPackingLvupDialog":case"vBuildingStoreDetailDialog":t.push({url:"view/node/vPackingLvupListItem",assetType:cc.Prefab});break;case"vSignDialog":t.push({url:"view/node/vSignItemSmall",assetType:cc.Prefab}),t.push({url:"view/node/vSignItemLarge",assetType:cc.Prefab});break;case"vSignLotteryDialog":t.push({url:"view/node/vSignLotteryItem",assetType:cc.Prefab}),t.push({url:"view/dialog/vGotItemDialog",assetType:cc.Prefab});break;case"vRoomDialog":t.push({url:"view/node/vRoomListItemPart",assetType:cc.Prefab}),t.push({url:"view/node/vRoomListItemType",assetType:cc.Prefab}),t.push({url:"view/dialog/vPkMirrorResultDialog",assetType:cc.Prefab}),t.push({url:"view/dialog/vProductResultDialog",assetType:cc.Prefab}),t.push({url:"view/dialog/vGotItemDialog",assetType:cc.Prefab}),t.push({url:"view/dialog/vGotCoinDialog",assetType:cc.Prefab});break;case"vDailyQuestDialog":t.push({url:"view/node/vDailyQuestListItem",assetType:cc.Prefab});break;case"vHudRankDialog":t.push({url:"view/node/vRankItem",assetType:cc.Prefab}),t.push({url:"view/node/vPkMirrorRankListItem",assetType:cc.Prefab}),t.push({url:"view/node/vStoreRankListItem",assetType:cc.Prefab}),t.push({url:"view/node/vPartRankItem",assetType:cc.Prefab}),t.push({url:"view/dialog/vGotItemDialog",assetType:cc.Prefab});break;case"vPvpPkDialog":t.push({url:"view/node/vPvpPkItemCenter",assetType:cc.Prefab}),t.push({url:"view/node/vPvpPkItemLeft",assetType:cc.Prefab}),t.push({url:"view/node/vPvpPkItemRight",assetType:cc.Prefab}),t.push({url:"view/dialog/vGotCoinDialog",assetType:cc.Prefab});break;case"vPkMirrorDialog":t.push({url:"view/node/vPkMirrorPkItem",assetType:cc.Prefab}),t.push({url:"view/node/vPkMirrorLevelBar",assetType:cc.Prefab}),t.push({url:"view/node/vPkMirrorLevelItem",assetType:cc.Prefab}),t.push({url:"view/dialog/vPkMirrorAdventureDialog",assetType:cc.Prefab});break;case"vShopDialog":t.push({url:"view/node/vShopItemNormal",assetType:cc.Prefab}),t.push({url:"view/node/vShopItemDiscount",assetType:cc.Prefab}),t.push({url:"view/dialog/vGotItemDialog",assetType:cc.Prefab});break;case"vMallDialog":t.push({url:"view/node/vMallItemStoreReward",assetType:cc.Prefab}),t.push({url:"view/node/vMallItemCoin",assetType:cc.Prefab}),t.push({url:"view/node/vMallItemFreeRmb",assetType:cc.Prefab}),t.push({url:"view/node/vMallItemFreeGold",assetType:cc.Prefab})}else t.push({url:"view/node/"+e,assetType:cc.Prefab});return t},o.warpDialogWithEffect=function(e,t,o){e&&(this.warpDialogFullArr=this.warpDialogFullArr||[],this.warpDialogFullArr.push({viewName:e,context:t,fadeInCallback:o}),this._tryExecuteWarpDialogWithFullEffect())},o._tryExecuteWarpDialogWithFullEffect=function(){var e=this;if(this.warpDialogFullArr&&0!=this.warpDialogFullArr.length&&!this.bDialogFullEffectWarping){this.bDialogFullEffectWarping=!0;var t=this.warpDialogFullArr.length,o=this.warpDialogFullArr[t-1];this.warpDialogFullArr.splice(0,t);var n=o.viewName,r=o.context,a=o.fadeInCallback,i=s.getRunningSceneCanvas(),l="vWarpSceneNode",c=i.getChildByName(l);c||((c=p.default.get("view",l)).parent=i,c.zIndex=d.default.GLOBAL_ORDER_WARP_VIEW,c.name=l);var u=this.getPreloadResByViewName(n),f={};return f.preloadResArr=u,f.fOnFadeInCompleted=function(){g.default.closeAllTipDialog(),r&&r.bDisableCloseDialog||s.closeAllDialog(),h.default.cancelGuide(),a&&a()},f.fOnResLoadCompleted=function(){e.bDialogFullEffectWarping=!1,e.warpDialogFullArr&&0!=e.warpDialogFullArr.length?e._tryExecuteWarpDialogWithFullEffect():(s.openDialog(n,r,!0),c.playEffectOut())},f.fOnFadeOutCompleted=function(){},c.context=f,c.playEffectIn(),!0}},o.warpDialogWithSmallEffect=function(e,t,o){e&&(this.warpDialogSmallArr=this.warpDialogSmallArr||[],this.warpDialogSmallArr.push({viewName:e,context:t,callback:o}),this._tryExecuteWarpDialogWithSmallEffect())},o._tryExecuteWarpDialogWithSmallEffect=function(){var e=this;if(this.warpDialogSmallArr&&0!=this.warpDialogSmallArr.length&&!this.bDialogSmallEffectWarping){this.bDialogSmallEffectWarping=!0;var t=this.warpDialogSmallArr.shift(),o=t.viewName,n=t.context||{},r=t.callback;if(cc.loader.getRes(ul.format("view/dialog/%s",o),cc.Prefab))return s.openDialog(o,n,!!n.bImmediately),r&&r(),this.bDialogSmallEffectWarping=!1,void this._tryExecuteWarpDialogWithSmallEffect();var a=s.getRunningSceneCanvas(),i="vWarpSmallDialogNode",l=a.getChildByName(i);l||((l=p.default.get("view",i)).parent=a,l.zIndex=d.default.GLOBAL_ORDER_WARP_VIEW,l.name=i);var c=this.getPreloadResByViewName(o),u={};return u.preloadResArr=c,u.fOnResLoadCompleted=function(){cc.log("---fOnResLoadCompleted"),s.openDialog(o,n,!!n.bImmediately),l.playEffectOut(),r&&r(),e.bDialogSmallEffectWarping=!1,e._tryExecuteWarpDialogWithSmallEffect()},u.fOnFadeOutCompleted=function(){},l.context=u,l.playEffectIn(),!0}},o.playFadeIn=function(e,t){var o=this,n=s.getRunningSceneCanvas(),r="vWarpSceneNode",l=n.getChildByName(r);l||((l=p.default.get("view",r)).parent=n,l.zIndex=d.default.GLOBAL_ORDER_WARP_VIEW,l.name=r);var c=t||{},u=c.bWaitFadeOut||!1;c.fOnFadeInCompleted=function(){return a(o,void 0,void 0,function(){return i(this,function(t){return e&&e(),u||l.playEffectOut(),[2]})})},c.fOnFadeOutCompleted=function(){},l.context=c,l.playEffectIn()},o.playFadeOut=function(e){var t=this,o=s.getRunningSceneCanvas(),n="vWarpSceneNode",r=o.getChildByName(n);r||((r=p.default.get("view",n)).parent=o,r.zIndex=d.default.GLOBAL_ORDER_WARP_VIEW,r.name=n),r.context={fOnFadeInCompleted:function(){return a(t,void 0,void 0,function(){return i(this,function(t){return e&&e(),r.playEffectOut(),[2]})})},fOnFadeOutCompleted:function(){}},r.playEffectIn()},o.openDialog=function(e,t,o,n){var r=this.createView(e,t);if(r instanceof u.default){if(!n)return r.openDialog(o),r;this.playFadeIn(function(){return r.openDialog(o),r})}else cc.isValid(r)&&r.destroy();return null},Object.defineProperty(o,"size",{get:function(){return cc.director.getScene().getChildByName("Canvas").getContentSize()},enumerable:!0,configurable:!0}),Object.defineProperty(o,"width",{get:function(){return this.size.width},enumerable:!0,configurable:!0}),Object.defineProperty(o,"height",{get:function(){return this.size.height},enumerable:!0,configurable:!0}),Object.defineProperty(o,"center",{get:function(){var e=this.size;return cc.v2(e.width/2,e.height/2)},enumerable:!0,configurable:!0}),o.getRunningSceneCanvas=function(){return cc.director.getScene().getChildByName("Canvas")},o.loadSpriteFrame=function(e,t){this.loadRes(e,cc.SpriteFrame,function(e,o){e||t&&t(o)})},o.createSpriteNode=function(e){var t=new cc.Node,o=t.addComponent(cc.Sprite);return this.loadRes(e,cc.SpriteFrame,function(e,t){e||(cc.isValid(o)&&(o.spriteFrame=t),o=null)}),t},o.createSgSpriteNode=function(e){return this.createSpriteNode(e)},o.preloadRes=function(e,t,o){var n=this,r=function(e){o&&o(!0)};t!=sp.Skeleton&&t!=cc.AudioClip&&t!=cc.ParticleAsset&&t!=cc.Animation&&cc.loader.getRes(e,t)?r():t==sp.Skeleton?p.default.preload("spine",e,r):t==cc.ParticleAsset?p.default.preload("particle",e,r):t==cc.Animation?p.default.preload("animNode",e,r):t==cc.AudioClip?f.default.preload(e,r):this.loadRes(e,t,function(a,i){if(a)return cc.log("---error-url=",e),void n.preloadRes(e,t,o);r()})},o.loadRes=function(e,t,o,n,r,a){var i=this;void 0!==r&&null!=r||(r=!(!n||!cc.isValid(n)));var s=function(e,t){a&&a(e,t)};if(/http/.test(e)||/https/.test(e))cc.log("\u6dfb\u52a0\u65b0\u7684\u8fdc\u7a0b\u52a0\u8f7d:"+e),this.RemoteResLoadQueue.push({url:e,callback:o,caller:n,bHaveCaller:r});else{var l=t;cc.loader.loadRes(e,l,s,function(a,l){i.__load_res_completeCallback(a,l,e,t,s,o,n,r)})}},o.__load_res_completeCallback=function(e,t,o,n,r,a,i,s){var c=this;e?(i&&cc.isValid(i)||!s)&&(console.warn("\u52a0\u8f7d\u8d44\u6e90\u5931\u8d25:"+o+":",e),l.default.callLater(.3,function(){c.loadRes(o,n,a,i,s,r)})):a(e,t)},o.loadRemoteResQg=function(e,t){var o=this;if(this.__cachedRemoteTexture[e])t(null,this.__cachedRemoteTexture[e]);else{var n=new Image,r=function(){n.removeEventListener("load",r),n.removeEventListener("error",a),console.log("IMAGE \u52a0\u8f7d\u6210\u529f!!",e);var i=new cc.Texture2D;i.initWithElement(n),o.__cachedRemoteTexture[e]=i,t(null,i)},a=function(){n.removeEventListener("load",r),n.removeEventListener("error",a),console.log("IMAGE \u52a0\u8f7d\u5931\u8d25!!",e),t({error:"error"},null)};n.addEventListener("load",r),n.addEventListener("error",a),n.src=e}},o.promiseLoadRes=function(e,t){var o=this;return new Promise(function(n,r){o.loadRes(e,t,function(e,t){e?r(e):c.default.triggerPromiseResolve(n,t)})})},o.loadResourceNode=function(e,t){var o,n;e instanceof Array?(o=e[0],n=e[1]):(o=e,n=t);var r=new cc.Node;if(null==o||!n)return r;if(o==d.CPartResType.SPRITE){var a=this.createSpriteNode(n);a.parent=r,r.nodeSprite=a}return r.__resType=o,r},o.destoryResourceNode=function(){},o.SCENE_NAME_2_WARP_WAIT_TIME={},o.SCENE_NAME_2_WAIT_FADE_OUT={},o.openedDialogDict={},o.RemoteResLoadQueue=[],o.curLoadingRemoteResInfo=null,o.__cachedRemoteTexture={},o=s=r([m],o)}(s.default);o.default=_,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../../ulframework/view/DialogBase":"DialogBase","../Const":"Const","./mgrGuide":"mgrGuide","./mgrPool":"mgrPool","./mgrSound":"mgrSound","./mgrTip":"mgrTip"}],mgrEffect:[function(e,t,o){"use strict";cc._RF.push(t,"bf78btz/QFBVICmABDEV0Wb","mgrEffect");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("../Const"),s=e("../../ulframework/utils/Tools"),l=e("./mgrCfg"),c=e("./mgrDirector"),u=e("./mgrPlayer"),d=e("./mgrPool"),p=e("../view/node/vItemAmountNode"),h=cc._decorator.ccclass,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return n(t,e),o=t,t.onLoad=function(){e.onLoad.call(this)},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.floatNode=function(e,t,o,n,r){void 0===t&&(t=4),void 0===o&&(o=.5),void 0===n&&(n=!0),void 0===r&&(r=!0),!r&&e.__bFloating||(t=t||4,o=o||.5,n&&e.stopAllActions(),e.__floatOriginPos=e.position,e.__bFloating=!0,e.runAction(cc.repeatForever(cc.sequence(cc.moveBy(o,t,t),cc.moveBy(2*o,0,2*-t),cc.moveBy(2*o,2*-t,2*t),cc.moveBy(2*o,0,2*-t),cc.moveBy(o,t,t)))))},t.stopFloatNode=function(e){e.stopAllActions(),e.__bFloating=!1,e.__floatOriginPos&&(e.position=e.__floatOriginPos)},t.shineNode=function(e){if(!e.__bShining){e.stopAllActions(),e.__shineOriginScale=e.scale,e.__bShining=!0,e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.1,1.1),cc.scaleTo(1,.9,.9),cc.scaleTo(.5,1,1))))}},t.stopShineNode=function(e){e.stopAllActions(),e.__bShining=!1,e.__shineOriginScale&&(e.scale=e.__shineOriginScale)},t.rollLabelAmount=function(e,t,o,n,r){if(void 0===t&&(t=.3),void 0===o&&(o=0),void 0===n&&(n=0),void 0===r&&(r=null),e&&o!=n){var a=e.node;a.stopAllActions(),a._originScale=a._originScale||a.scale||1,e.__startTime=s.default.time(),e.__bCalledCallback=null,a.runAction(cc.sequence(cc.scaleTo(t,1.5*a._originScale),cc.scaleTo(.8*t,a._originScale),cc.callFunc(function(){a.stopAllActions()}))),a.runAction(cc.repeatForever(cc.sequence(cc.delayTime(0),cc.callFunc(function(){if(e.__startTime){var a=s.default.time()-e.__startTime,i=1;t&&(i=s.default.clampf(a/t,0,1));var l=o+(n-o)*i;e.string=Math.floor(l).toString(),l==n&&(e.__bCalledCallback=!0,r&&r())}}))))}},t.rollProgressBarPercent=function(e,t,o,n,r,a){if(void 0===t&&(t=.3),void 0===o&&(o=0),void 0===n&&(n=0),void 0===r&&(r=null),void 0===a&&(a=null),e&&o!=n){var i=e.node;i.stopAllActions(),i.runAction(cc.sequence(ul.actionFloat(t,o,n,function(t){e.progress=t,r&&r()}),cc.callFunc(function(){a&&a()})))}},t.playMoveToActionArr=function(e,t,o,n){if(void 0===t&&(t=0),void 0===o&&(o=null),void 0===n&&(n=!0),e&&0!=s.default.getTableCount(e)){t=t||0;var r=s.default.getTableCount(e),a=0;for(var i in e){var l=e[i],c=l.node,u=l.endPos||c.position;c.active=!0,c.position=l.beginPos||c.position;var d=null;d=n?cc.moveTo(l.dur||0,u).easing(cc.easeElasticOut(.8)):cc.moveTo(l.dur||0,u),a+=1,c.stopAllActions(),c.runAction(cc.sequence(cc.delayTime(t+(l.delayTime||0)),d,cc.callFunc(function(){a==r&&(a+=1,o&&o())})))}}else o&&o()},t.playScaleToActionArr=function(e,t,o,n){if(void 0===t&&(t=0),void 0===o&&(o=null),void 0===n&&(n=!0),e&&0!=s.default.getTableCount(e)){t=t||0;var r=s.default.getTableCount(e),a=0;for(var i in e){var l=e[i],c=l.node,u=l.endScale||c.scale;c.active=!0,c.scale=l.beginScale||c.scale;var d=null;d=n?cc.scaleTo(l.dur||0,u,u).easing(cc.easeElasticOut(.8)):cc.scaleTo(l.dur||0,u,u),c.stopAllActions(),c.runAction(cc.sequence(cc.delayTime(t+(l.delayTime||0)),d,cc.callFunc(function(){(a+=1)>=r&&(a+=1,o&&o())})))}}else o&&o()},t.playComebackTogetherAction=function(e,t,n,r,a,i){if(void 0===r&&(r=0),void 0===a&&(a=.5),e&&0!=e.length){for(var s=[],l=0;l<e.length;l++){var c=e[l];c._originPos=c._originPos||c.position,c.active&&(c.opacity=255,s.push({node:c,beginPos:cc.v2(c.x+(t||0),c.y+(n||0)),endPos:c._originPos,delayTime:r||0,dur:a||.5}))}o.playMoveToActionArr(s,0,i)}else i&&i()},t.flyNodeOnCanvas=function(e,t,o,n,r,a,l,u){void 0===n&&(n=1),void 0===r&&(r=0),void 0===a&&(a=null),void 0===l&&(l=0),void 0===u&&(u=!1);var d=c.default.getRunningSceneCanvas(),p=u?e.parent:d;t=p.convertToNodeSpaceAR(t),o=p.convertToNodeSpaceAR(o);var h=new cc.Node;h.parent=p,h.position=t,h.zIndex=i.default.GLOBAL_ORDER_DIALOG,e.position=cc.v2(0,0),e.parent=h,e.active=!1,l=l||(s.default.random(100)>50?1:-1)*s.default.random(200);var f=[t,cc.v2(t.x-l,t.y+(o.y-t.y)/2),o],g=h.scale;h.runAction(cc.sequence(cc.delayTime(r||0),cc.callFunc(function(){e.active=!0}),cc.spawn(cc.sequence(cc.scaleTo(.95*n,2*g,2*g),cc.scaleTo(.05*n,.2*g,.2*g)),cc.bezierTo(n,f)),cc.callFunc(function(){a&&a()}),cc.removeSelf()))},t.tryFlyGotItem=function(e,t,o,n){var r=this,a=(n=n||{endWorldPos:null,pNode:null,bOffsetPos:!0,startFlyOffScale:1,completedCallback:null,bDisableParticle:!1,bForceFlyOne:!1}).bOffsetPos,i=l.default.get("item_template_db",e)||{},h=n.endWorldPos||u.default.getHudItemNodePos(e);if(h){var f=n.startFlyOffScale||1,g=Math.max(n.flyCount||1,1),m=c.default.getRunningSceneCanvas(),_=n.pNode||m,v=_.convertToNodeSpaceAR(o);a&&1==g&&(a=!1);for(var y=function(l){var u=s.default.random(1,100),m=s.default.random(1,50),y=o.x>c.default.size.width/2?-1:1,C=v;a&&(C=cc.v2(v.x+u*y,v.y+y*m));var S=new cc.Node;S.position=v,S.setScale(0),S.parent=_;var b=null;if((b=1==g?new p.default({itemId:e,amount:t}):c.default.createSpriteNode(i.icon)).zIndex=10,b.parent=S,!n.bDisableParticle){var R=d.default.get("particle","cursor");R&&(R.parent=S,R.zIndex=-1,R.scale=1.3,S._particleTail=R)}var T=function(){S._particleTail&&(d.default.put(S._particleTail),S._particleTail.stop(),S._particleTail.removeFromParent(),S._particleTail=null),l>=g-1&&n.completedCallback&&n.completedCallback()};S.runAction(cc.sequence(cc.spawn(cc.moveTo(.3,C),cc.scaleTo(.3,.5*f,.5*f)),cc.delayTime(.3),cc.callFunc(function(){S._particle&&(d.default.put(S._particle),S._particle.stop(),S._particle.removeFromParent(),S._particle=null);var e=S.parent.convertToWorldSpaceAR(S.position);r.flyNodeOnCanvas(S,e,h,.3+s.default.random(200,500)/1e3,null,T,null,!!n.pNode)})))},C=0;C<g;C++)y(C)}},t.rotateForever=function(e,t,o){void 0===t&&(t=6),void 0===o&&(o=360),e&&(e.stopAllActions(),e.runAction(cc.repeatForever(cc.rotateBy(t,o))))},t=o=r([h],t)}(a.default);o.default=f,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","../Const":"Const","../view/node/vItemAmountNode":"vItemAmountNode","./mgrCfg":"mgrCfg","./mgrDirector":"mgrDirector","./mgrPlayer":"mgrPlayer","./mgrPool":"mgrPool"}],mgrEmployee:[function(e,t,o){"use strict";cc._RF.push(t,"975c0JeHulNGbbes0Ybjbc1","mgrEmployee");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("../struct/sEmployee"),s=e("./mgrRecord"),l=e("../../ulframework/utils/Tools"),c=e("./mgrCfg"),u=e("./mgrPlayer"),d=e("./mgrShop"),p=e("../../ulframework/utils/Timer"),h=e("../Const"),f=cc._decorator.ccclass,g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.registerListeners({MSG_RECORD_UPDATE:this.loadRecord.bind(this),MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this)}),p.default.callLoop(1,this.onTimerLoop.bind(this),!0),this.loadRecord()},t.loadRecord=function(){e.loadRecord.call(this);var t=s.default.getData("employee")||{},o=t.employeeDatas||{},n={};c.default.forDb("employee_template_db",function(e,t){var r=t[0],a=o[r.id]||{},s=u.default.getItemAmount(r.id),l=new i.default(r.id,s);l.speedCompletedTime=a.speedCompletedTime||0,n[r.id]=l}),this.employees=n,this.doubleFootRewardCompletedTime=t,this.saveRecord()},t.saveRecord=function(){e.saveRecord.call(this);var t={};l.default.forEachMap(this.employees,function(e,o){t[o.id]={speedCompletedTime:o.speedCompletedTime||0}});var o={employeeDatas:t,doubleFootRewardCompletedTime:this.doubleFootRewardCompletedTime};s.default.setData("employee",o)},t.onTimerLoop=function(){},t.onMsgItemAmountChanged=function(e){var t=e.itemId,o=this.employees[t];o&&o.level<=0&&(o.setLevel(1),this.saveRecord(),this.sendMsg("MSG_EMPLOYEE_LEVEL_CHANGED",{id:o.id}))},t.getEmployee=function(e){return this.employees[e]},t.getEmployees=function(){return this.employees},t.getDoubleFootRewardLeftTime=function(){var e=this.doubleFootRewardCompletedTime||0;return Math.max(e-l.default.time(),0)},t.flagDoubleFootReward=function(){this.doubleFootRewardCompletedTime=l.default.time()+30,this.saveRecord()},t.unlockEmployee=function(e,t){var o=this.getEmployee(e);if(o)return!!c.default.get("employee_template_db",e,1)&&(!(!t&&!d.default.tryCostByItems([[h.default.ITEM_ID_GOLD,o.template.upgradeCostGoldNum]],"\u5458\u5de5\u5347\u7ea7\u6d88\u8017"))&&(o.setLevel(1),this.saveRecord(),this.sendMsg("MSG_EMPLOYEE_LEVEL_CHANGED",{id:o.id}),!0))},t.employees={},t.doubleFootRewardCompletedTime=0,t=r([f],t)}(a.default);o.default=g,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const","../struct/sEmployee":"sEmployee","./mgrCfg":"mgrCfg","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrShop":"mgrShop"}],mgrGoldRain:[function(e,t,o){"use strict";cc._RF.push(t,"18bc6E9ZdVELbVLARQcax+W","mgrGoldRain");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("./mgrRecord"),s=e("../../ulframework/utils/Tools"),l=e("./mgrCop"),c=e("./mgrDirector"),u=e("./mgrGuide"),d=cc._decorator.ccclass,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord()},t.loadRecord=function(){e.loadRecord.call(this);var t=i.default.getData("gold_rain")||{};if(t&&s.default.isOneDay(this.lastOpenGoldRainTime,s.default.time()))this.lastOpenGoldRainTime=t.lastOpenGoldRainTime,this.deltaTime=t.deltaTime,this.glodRainCount=t.glodRainCount;else{this.lastOpenGoldRainTime=s.default.time(),this.deltaTime=l.default.getNumberValue("gold_rain_cd"),this.glodRainCount=l.default.getNumberValue("gold_rain_count");var o={lastOpenGoldRainTime:this.lastOpenGoldRainTime,deltaTime:this.deltaTime,glodRainCount:this.glodRainCount};i.default.setData("gold_rain",o)}this.saveRecord()},t.saveRecord=function(){e.saveRecord.call(this);var t={lastOpenGoldRainTime:this.lastOpenGoldRainTime,deltaTime:this.deltaTime,glodRainCount:this.glodRainCount};i.default.setData("gold_rain",t)},t.bOpenGoldRain=function(){return s.default.time()-this.lastOpenGoldRainTime>this.deltaTime},t.bHaveCount=function(){return this.glodRainCount>0},t.refreshOpenGoldRainTime=function(){this.lastOpenGoldRainTime=s.default.time(),this.saveRecord()},t.openGoldRain=function(e){return!!(!u.default.isGuiding()&&parseInt(l.default.get("gold_rain_ratios").split(";")[e])>s.default.random(0,100)&&this.bOpenGoldRain()&&this.bHaveCount()&&u.default.getcompletedGuideIdsLength())&&(c.default.openDialog("vGoldRainDialog"),this.lastOpenGoldRainTime=s.default.time(),this.glodRainCount--,this.saveRecord(),!0)},t=r([d],t)}(a.default);o.default=p,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","./mgrCop":"mgrCop","./mgrDirector":"mgrDirector","./mgrGuide":"mgrGuide","./mgrRecord":"mgrRecord"}],mgrGuide:[function(e,t,o){"use strict";cc._RF.push(t,"34ba4z71MpL9rGp2+Hmp1Rj","mgrGuide");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("./mgrRecord"),s=e("../../ulframework/utils/Tools"),l=e("./mgrCfg"),c=e("../view/node/vGuideView"),u=e("./mgrDirector"),d=e("./mgrTip"),p=e("../Const"),h=cc._decorator.ccclass,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_GUIDE_POINT:this.onMsgGuidePoint.bind(this),MSG_MAIN_GUIDE_FINISHED:this.onMsgMainGuideFinished.bind(this)})},t.loadRecord=function(){e.loadRecord.call(this);var t=i.default.getData("guide")||{};this.bMainGuideFinished=t.bMainGuideFinished;for(var o=t.completedGuideIds||[],n={},r=0;r<o.length;r++)n[o[r]]=!0;this.completedGuideIds=n,this.refreshAvailableGuideIds(),console.log("\u67e5\u770b\u8bfb\u6863\u60c5\u51b5",t)},t.saveRecord=function(){e.saveRecord.call(this);var t=[];s.default.forEachMap(this.completedGuideIds,function(e,o){1==o&&t.push(parseInt(e))});var o={completedGuideIds:t,bMainGuideFinished:this.bMainGuideFinished};console.log("\u67e5\u770b\u5b58\u6863\u60c5\u51b5",o),i.default.setData("guide",o)},t.refreshAvailableGuideIds=function(){var e=this,t=[];l.default.forDb("guide_db",function(o,n){var r=parseInt(o);e.completedGuideIds[r]||t.push(r)}),t.sort(),this.availableGuideIds=t},t.registerGuideNode=function(e,t){var o=this;if((!this.registeredNodes[e]||this.registeredNodes[e]!=t)&&cc.isValid(t)){this.registeredNodes[e]&&this.unregisterGuideNode(e),this.registeredNodes[e]=t,this.sendMsg("MSG_GUIDE_POINT",{id:ul.format("%s.register",e)});var n=new cc.Node,r=t.addComponent(cc.Component);if(r.onDestroy=function(){t.__guide_trigger_node&&(t.__guide_trigger_node=null,o.unregisterGuideNode(e))},r.onDisable=function(){t.__guide_trigger_node&&(t.__guide_trigger_node=null,o.unregisterGuideNode(e))},n.parent=t,t.__guide_trigger_node=n,null!=this.reactiveGuideId&&null!=this.reactiveGuideStep&&0==this.bStart){var a=l.default.get("guide_db",this.reactiveGuideId,this.reactiveGuideStep);if(this.getGuideNodes(a.nodeNames).length<=0&&a.nodeNames.length>0)return;this.startGuide(this.reactiveGuideId,this.reactiveGuideStep),this.reactiveGuideId=null,this.reactiveGuideStep=null}}},t.unregisterGuideNode=function(e){var t=this.registeredNodes[e];if(t){var o=t.__guide_trigger_node;cc.isValid(o)&&(o.removeComponent(cc.Component),o.destroy(),t.__guide_trigger_node=null),this.onGuideNodeUnregister(e),this.sendMsg("MSG_GUIDE_POINT",{id:ul.format("%s.unregister",e)}),this.registeredNodes[e]=null}},t.getGuideNode=function(e){var t=this.registeredNodes[e];return cc.isValid(t)?t:null},t.getGuideNodes=function(e){var t=[];if(!e)return t;for(var o=0;o<e.length;o++){var n=e[o],r=this.getGuideNode(n);r&&t.push(r)}return t},t.isGuiding=function(){return cc.isValid(this.guideView)||null!=this.activeGuideId},t.isClosedGuide=function(){return this.bDebugCloseGuide},t.getcompletedGuideIdsLength=function(){var e=i.default.getData("guide")||{};return!!(e&&e.completedGuideIds&&e.completedGuideIds.length>3)&&(console.log("\u67e5\u770bid\u4e2a\u6570:",e.completedGuideIds.length),!0)},t.cancelGuide=function(){cc.log(" \u53d6\u6d88\u5f15\u5bfc",this.activeGuideId,this.activeGuideStep),this.activeGuideId=null,this.activeGuideStep=null,this.bStart=!1,cc.isValid(this.guideView)&&(this.guideView.hideAndRemove(),this.guideView=null)},t.startGuide=function(e,t){cc.log("\u5f00\u59cb\u5f15\u5bfc",e,t);var o=l.default.get("guide_db",e,t);if(o&&(!this.bMainGuideFinished||o.guideType!=p.default.GUIDE_TYPE_MAIN)){this.activeGuideId=e,this.activeGuideStep=t,this.bStart=!0;var n=this.getGuideNodes(o.nodeNames),r=null,a=p.default.GLOBAL_ORDER_GUIDE_VIEW;if(!(r=this._searchParentFromCanvas(n[0])))r=cc.director.getScene().getChildByName("Canvas");r.convertToNodeSpace(cc.v2(u.default.width/2,u.default.height/2));var i=new c.default({guideId:e,step:t});if(i.parent=r,i.zIndex=a,i.show(),this.guideView=i,o.startMsg.length>=1){var s=o.startMsg,d=s[0],h=s[1];this.sendMsg(d,h)}}},t._searchParentFromCanvas=function(e){if(!cc.isValid(e))return null;for(var t=cc.director.getScene().getChildByName("Canvas"),o=e.parent;o;){if(o==t)return e;o=(e=o).parent}return null},t.trySetGuideComplete=function(e,t){var o=l.default.get("guide_db",e);if(o&&!(t<o.length-1)){var n=o[0];if(!n.bRepeat){if(this.completedGuideIds[e]=!0,n.completedGroup){var r=l.default.getDb("guide_db");for(var a in r){var i=r[a][0];i.completedGroup==n.completedGroup&&(this.completedGuideIds[i.id]=!0)}}this.saveRecord(),this.refreshAvailableGuideIds()}}},t.completeGuide=function(e,t){var o=l.default.get("guide_db",e);if(o){var n=l.default.quietGet("guide_db",e,t);if(n&&n.completedMsg.length>=1){var r=n.completedMsg,a=r[0],i=r[1];this.sendMsg(a,i)}if(t>=o.length-1)this.trySetGuideComplete(e,t),this.cancelGuide();else{this.cancelGuide(),this.activeGuideId=e,this.activeGuideStep=t+1,this.bStart=!1;var s=l.default.get("guide_db",this.activeGuideId,this.activeGuideStep);if(s.startTrigger.length<=0){if(this.getGuideNodes(s.nodeNames).length<=0&&s.nodeNames.length>0){var c=this.activeGuideId,u=this.activeGuideStep;return this.cancelGuide(),this.reactiveGuideId=c,void(this.reactiveGuideStep=u)}this.startGuide(this.activeGuideId,this.activeGuideStep)}}}else this.cancelGuide()},t.onGuidePoint=function(e,t){this.bDebugCloseGuide||(null!=this.activeGuideId&&null!=this.activeGuideStep&&this._tryStopGuide(e,t),null!=this.activeGuideId&&null!=this.activeGuideStep||this._tryStartGuide(e,t))},t._tryStartGuide=function(e,t){for(var o=0;o<this.availableGuideIds.length;o++)for(var n=this.availableGuideIds[o],r=l.default.get("guide_db",n),a=0;a<r.length;a++){var i=r[a];if(i.bStartStep&&this._checkGuideCanStart(i,e,t))return void this.startGuide(i.id,i.step);var c=i.startTrigger;if(c&&s.default.getTableCount(c)>0){for(var u=!1,d=0;d<c.length;d++){var p=c[d],h=p[0];p[1];if(h==e){u=!0;break}}if(!u)continue;if(this._checkTrigger(c,e,t))if(i.nodeNames.length>0)if(this.getGuideNodes(i.nodeNames).length<=0){this.reactiveGuideId=i.id,this.reactiveGuideStep=i.step;break}}}},t._tryStopGuide=function(e,t){var o=l.default.get("guide_db",this.activeGuideId,this.activeGuideStep);if(this.bStart){if(this._checkTrigger(o.cancelTrigger,e,t))return void this.cancelGuide();if(this._checkTrigger(o.completeTrigger,e,t)){if(this.completeGuide(this.activeGuideId,this.activeGuideStep),this.activeGuideId&&this.activeGuideStep&&!this.bStart){var n=l.default.get("guide_db",this.activeGuideId,this.activeGuideStep);if(this._checkGuideCanStart(n,e,t))return void this.startGuide(n.id,n.step)}return}}else if(this._checkGuideCanStart(o,e,t))return void this.startGuide(o.id,o.step)},t._checkTrigger=function(e,t,o){for(var n=function(n){var r=e[n],a=r[0],i=r[1];if(a==t){var l=!0;if(i&&Object.keys(i).length>0&&s.default.forEachMap(i,function(e,t){o[e]!=t&&(l=!1)}),l)return{value:!0}}},r=0;r<e.length;r++){var a=n(r);if("object"==typeof a)return a.value}return!1},t._checkGuideCanStart=function(e,t,o){if(!this._checkTrigger(e.startTrigger,t,o))return!1;if(e.nodeNames.length>0&&this.getGuideNodes(e.nodeNames).length<=0)return!1;return!0},t._debugCancelDebug=function(){this.bDebugCloseGuide=!0,this.cancelGuide(),d.default.showMsgTip("\u53d6\u6d88\u65b0\u624b\u5f15\u5bfc")},t.onGuideNodeUnregister=function(e){var t=this.activeGuideId,o=this.activeGuideStep;if(null!=t&&null!=o)for(var n=l.default.get("guide_db",t,o),r=0;r<n.nodeNames.length;r++){if(n.nodeNames[r]==e)return void this.cancelGuide()}},t.onMsgGuidePoint=function(e){var t=e,o=t.id;this.onGuidePoint(o,t)},t.onMsgMainGuideFinished=function(e){this.bMainGuideFinished=!0,this.saveRecord()},t.registeredNodes={},t.bStart=!1,t.bDebugCloseGuide=!1,t.completedGuideIds={},t.availableGuideIds=[],t=r([h],t)}(a.default);o.default=f,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","../Const":"Const","../view/node/vGuideView":"vGuideView","./mgrCfg":"mgrCfg","./mgrDirector":"mgrDirector","./mgrRecord":"mgrRecord","./mgrTip":"mgrTip"}],mgrHappyFiveOne:[function(e,t,o){"use strict";cc._RF.push(t,"f141cR2RKpLhIic1fme1SA7","mgrHappyFiveOne");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("./mgrCfg"),s=e("./mgrPlayer"),l=e("./mgrRecord"),c=e("../../ulframework/utils/Timer"),u=e("../../ulframework/utils/Tools"),d=e("../Const"),p=cc._decorator.ccclass,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.registerListeners({MSG_RECORD_UPDATE:this.loadRecord.bind(this),MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this)}),this.loadRecord()},t.loadRecord=function(){e.loadRecord.call(this);var t=l.default.getData("happy_five_one")||{};this.dailyQuestDict=t.dailyQuestDict||{},this.lastRefreshTime=t.lastRefreshTime||0,c.default.callLoop(1,this.onTimerLoop.bind(this),!0),this.saveRecord()},t.saveRecord=function(){e.saveRecord.call(this);var t={dailyQuestDict:this.dailyQuestDict,lastRefreshTime:this.lastRefreshTime};l.default.setData("happy_five_one",t)},t.onTimerLoop=function(e){this.refreshDailyData()},t.refreshDailyData=function(){if(this.isOpening()&&!u.default.isOneDay(u.default.time(),this.lastRefreshTime)){this.dailyQuestDict={};var e=i.default.getDb("happy_five_one_quest_db");for(var t in e){var o=e[t],n=1==o.id?d.QuestState.finished:d.QuestState.normal;this.dailyQuestDict[o.id]={id:o.id,state:n}}this.lastRefreshTime=u.default.time(),cc.log("----this.dailyQuestDict=",this.dailyQuestDict),this.saveRecord()}},t.onMsgItemAmountChanged=function(e){var t=e.itemId,o=this.dailyQuestDict||{};for(var n in o){var r=o[n];if(r.state==d.QuestState.normal){var a=i.default.get("happy_five_one_quest_db",r.id);if(!a||a.checkItemId!=t)continue;s.default.getItemDailyGotAmount(a.checkItemId)>=a.targetItemAmount&&(r.state=d.QuestState.finished,this.saveRecord(),this.sendMsg("MSG_HAPPY_FIVE_ONE_QUEST_STATUS_CHANGED",{id:a.id}))}}},t.isOpening=function(){var e=i.default.get("happy_five_one_config_db",1),t=new Date(e.startYear||2020,(e.startMonth||5)-1,e.startDay||1,0,0,0),o=new Date(e.endYear||2020,(e.endMonth||5)-1,e.endDay||10,23,59,59);return t.getTime()/1e3<=u.default.time()&&u.default.time()<o.getTime()/1e3},t.getFinishedCount=function(){var e=0,t=this.dailyQuestDict||{};for(var o in t){t[o].state==d.QuestState.finished&&(e+=1)}return e},t.getDailyQuest=function(e){return(this.dailyQuestDict||{})[e]},t.getDailyQuestArr=function(){var e=this.dailyQuestDict||{},t=[];for(var o in e)t.push(e[o]);return t=u.default.sortArrayByField(t,"id")},t.receiveDailyQuest=function(e){var t=this.dailyQuestDict||{},o=t[e];if(cc.log("--quests=",t,e),o.state==d.QuestState.normal)return[!1,"\u8fd8\u6ca1\u6709\u5b8c\u6210\u4efb\u52a1\u7684\u5462"];if(o.state==d.QuestState.received)return[!1,"\u5956\u52b1\u5df2\u7ecf\u9886\u8fc7\u4e86"];var n=i.default.get("happy_five_one_quest_db",e);return o.state=d.QuestState.received,this.saveRecord(),this.sendMsg("MSG_DAILY_QUEST_STATUS_CHANGED",{id:e}),[!0,"",n.rewardItemId,n.rewardItemAmount]},t.dailyQuestDict={},t=r([p],t)}(a.default);o.default=h,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrCfg":"mgrCfg","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord"}],mgrI18n:[function(e,t,o){"use strict";cc._RF.push(t,"a994dhFp0RIw4w/xSvbyv3L","mgrI18n");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),a=cc._decorator,i=(a.ccclass,a.property,e("LanguageData")),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.init=function(){e.init.call(this),console.log("mgrI18n.init"),this.defaultLanguage="en",this.loadRecord()},t.onLoad=function(){e.onLoad.call(this)},t._getRecordKey=function(){return"mgrI18n_record"},t.loadRecord=function(){e.loadRecord.call(this),this.recordLanguage=cc.sys.localStorage.getItem(this._getRecordKey()),this._updateLanguage()},t.saveRecord=function(){e.saveRecord.call(this),cc.sys.localStorage.setItem(this._getRecordKey(),this.recordLanguage||"")},t._updateLanguage=function(){console.log("mgrI18n._updateLanguage"),console.log("recordLanguage",this.recordLanguage),console.log("sdkLanguage",this.sdkLanguage),console.log("defaultLanguage",this.defaultLanguage),this.recordLanguage?this._innerSetLanguage(this.recordLanguage):this.sdkLanguage?this._innerSetLanguage(this.sdkLanguage):this._innerSetLanguage(this.defaultLanguage)},t._innerSetLanguage=function(e){console.log("mgrI18n._innerSetLanguage",e,this.getLanguage()),this.getLanguage()!=e&&(console.log("  language changed"),this.language=e,i.init(e),i.updateSceneRenderers(),this.sendMsg("MSG_I18N_LANGUAGE_CHANGED"))},t.setLanguage=function(e){this.recordLanguage=e,this.saveRecord(),this._updateLanguage()},t.getLanguage=function(){return this.language},t.setSdkLanguage=function(e){switch(e){case"en-us":this.sdkLanguage="en";break;case"zh":this.sdkLanguage="zhcn";break;case"pt-br":this.sdkLanguage="pt";break;case"vi":this.sdkLanguage="vi";break;case"id":this.sdkLanguage="id"}this._updateLanguage()},t.getText=function(e){var t=i.t(e);return t||e},t.trySetLocalizedString=function(e,t){if(cc.isValid(e)){var o=e.getComponent("LocalizedLabel");o||(o=e.addComponent("LocalizedLabel")),o&&(o.dataID=t)}},t.tryLocdLocalizedSpriteFrame=function(e,t){if(cc.isValid(e)){var o=e.getComponent("LocalizedSpriteFixedUrl");o||(o=e.addComponent("LocalizedSpriteFixedUrl")),o&&(o.dataID=t)}},t.hasRecordLanguage=function(){return!!this.recordLanguage},t.defaultSetLanguage=function(){this.recordLanguage=this.sdkLanguage||this.defaultLanguage,this.saveRecord()},t}(r.default);o.default=s,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager",LanguageData:"LanguageData"}],mgrNativeAdSdk:[function(e,t,o){"use strict";cc._RF.push(t,"638a7i1L3pCWq3NmnBUDbLT","mgrNativeAdSdk");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),a=e("./mgrSdk"),i=e("./mgrAdNative"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_SDK_OPEN_NATIVE_ADV_RESULT:this.onMsgOpenNativeAdvResult.bind(this),MSG_SDK_CLICK_NATIVE_ADV_RESULT:this.onMsgClickNativeAdvResult.bind(this),MSG_SDK_CLOSE_NATIVE_ADV_RESULT:this.onMsgCloseNativeAdvResult.bind(this)})},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.getNativeDataByNativeType=function(e){return this.cacheNativeDatas[e]},t.cleanNativeDataByNativeType=function(e){this.cacheNativeDatas[e]=null,console.log("\u539f\u751f\u7f13\u5b58\u6e05\u9664\u6210\u529f\uff01\uff01\uff01 advId = ",e)},t.onClickNativeAd=function(e,t,o){this.getNativeDataByNativeType(e)?a.default.clickNativeAdv(e,JSON.stringify(t),o):cc.warn(" inbuild sdk: onClickNativeAd: nativeData not found! advId= ",e)},t.onCloseNativeAd=function(e,t,o,n){console.log("inbuild sdk: onCloseNativeAd: advId=",e),a.default.closeNativeAdv(e,JSON.stringify(t),n)},t._onReceiveNativeData=function(e,t,o){e&&t&&(this.NATIVE_DATA_SERIAL_NUMBER++,t.serialNumber=this.NATIVE_DATA_SERIAL_NUMBER,t.advId=e,this.cacheNativeDatas[e]=t,this.sendMsg("MSG_NATIVE_AD_SDK_NATIVE_DATA_REFRESH",{advId:e,userData:o}))},t.onMsgOpenNativeAdvResult=function(e){console.log("inbuild sdk: onMsgOpenNativeAdvResult",e);var t=e.code,o=(e.msg,e.advId),n=JSON.parse(e.userData||"")||{},r=e.nativeData;1==t?this._onReceiveNativeData(o,r,n):(this.cacheNativeDatas[o]=null,this.sendMsg("MSG_NATIVE_AD_SDK_NATIVE_DATA_REFRESH",{advId:o,userData:n}))},t.onMsgClickNativeAdvResult=function(e){parseInt(e.code),e.msg;var t=e.advId,o=JSON.parse(e.userData||"")||{};console.log("inbuild sdk: onMsgClickNativeAdvResult",o),this.sendMsg("MSG_NATIVE_AD_SDK_CLICK_SUCCESS",{advId:t,userData:o}),this.cacheNativeDatas[t]=null,i.default.__invokeRefreshData(o),this.sendMsg("MSG_NATIVE_AD_SDK_NATIVE_DATA_REFRESH",{advId:t,userData:o}),this.onCloseNativeAd(t,o,o.adEventId,!1)},t.onMsgCloseNativeAdvResult=function(e){parseInt(e.code),e.msg,e.advId,JSON.parse(e.userData||"")},t.cacheNativeDatas={},t.NATIVE_DATA_SERIAL_NUMBER=0,t}(r.default);o.default=s,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","./mgrAdNative":"mgrAdNative","./mgrSdk":"mgrSdk"}],mgrNative:[function(e,t,o){"use strict";cc._RF.push(t,"7b44bW+OKBEzaO/DYUMTOrS","mgrNative");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),a=e("../../ulframework/utils/Timer"),i=e("../../ulframework/utils/Base64"),s=e("../../ulframework/utils/ULNativeControllerHtml5"),l="org/cocos2dx/javascript/ULNativeController",c="(Ljava/lang/String;)Ljava/lang/String;",u="JAVACALLBACK";function d(e){cc.log("on JAVACALLBACK",e);try{var t=i.default.decode(e);g._onNativeCallbackJava(t)}catch(t){cc.warn("JAVACALLBACK decode base64 faild! direct use base64JsonStr"),g._onNativeCallbackJava(e)}}function p(e){cc.log("on OCCALLBACK",e);try{var t=i.default.decode(e);g._onNativeCallbackObjc(t)}catch(t){cc.warn("OCCALLBACK decode base64 faild! direct use base64JsonStr"),g._onNativeCallbackObjc(e)}}function h(e){cc.log("on ONHTML5CALLBACK",e),g._onNativeCallbackHtml5(e)}var f=cc._decorator,g=(f.ccclass,f.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),window[u]=d,window.OCCALLBACK=p,this.nativeCallbackPending=[],this.bRegisterNativeCallback||(this.bRegisterNativeCallback=!0,this.registerNativeCallback()),a.default.callLoop(1/60,this.onTimer.bind(this),!0)},t.onTimer=function(){for(var e=this.nativeCallbackPending;e.length>0;){var t=e.shift();this.sendMsg("MSG_NATIVE_CALLBACK",{responseData:t})}},t.registerNativeCallback=function(){s.default.isEnabled()?this._registernativeCallbackHtml5():cc.sys.OS_ANDROID==cc.sys.os?this._registerNativeCallbackJava():cc.sys.OS_IOS==cc.sys.os||cc.sys.OS_OSX==cc.sys.os?this._registerNativeCallbackObjc():cc.warn(ul.format("[warn] mgrNative.registerNativeCallback, platform = %s, don't have native controller",cc.sys.os))},t._temp_isH5=function(){return s.default.isEnabled()},t.onNativeCallback=function(e){cc.log("onNativeCallback",e),ul.dump(e,"data"),e&&this.nativeCallbackPending.push(e)},t._registerNativeCallbackJava=function(){jsb.reflection.callStaticMethod(l,"setCallFuncName",c,u)},t._registerNativeCallbackObjc=function(){},t._registernativeCallbackHtml5=function(){s.default.init(h),this._callNativeHtml5("initUlsdk",null)},t._onNativeCallbackJava=function(e){var t={};try{t=JSON.parse(e||"")}catch(o){cc.warn("mgrNative._onNativeCallbackJava jsonStr error!"),t.text=e}this.onNativeCallback(t)},t._onNativeCallbackObjc=function(e){var t={};try{t=JSON.parse(e||"")}catch(o){cc.warn("mgrNative._onNativeCallbackObjc jsonStr error!"),t.text=e}this.onNativeCallback(t)},t._onNativeCallbackHtml5=function(e){var t={};try{t=JSON.parse(e||"")}catch(o){cc.warn("mgrNative._onNativeCallbackJs jsonStr error!"),t.text=e}this.onNativeCallback(t)},t.callNative=function(e,t){return t=t||{},cc.log("mgrNative.callNative: "+e),ul.dump(t),s.default.isEnabled()?this._callNativeHtml5(e,t):cc.sys.OS_ANDROID==cc.sys.os?this._callNativeJava(e,t):cc.sys.OS_IOS==cc.sys.os||cc.sys.OS_OSX==cc.sys.os?this._callNativeObjc(e,t):(cc.warn(ul.format("[warn] mgrNative.callNative, platform = %s, don't have native controller",cc.sys.os)),null)},t._callNativeJava=function(e,t){try{var o=JSON.stringify(t),n=jsb.reflection.callStaticMethod(l,e,c,o);return JSON.parse(n)}catch(e){return cc.warn("mgrNative._onNativeCallbackJava jsonStr error!"),{error:e}}},t._callNativeObjc=function(e,t){try{var o=JSON.stringify(t),n=jsb.reflection.callStaticMethod("ULNativeController",e+":",o);return JSON.parse(n)}catch(e){return cc.warn("mgrNative._callNativeObjc jsonStr error!"),{error:e}}},t._callNativeHtml5=function(e,t){try{var o=JSON.stringify(t),n=s.default[e](o);return JSON.parse(n)}catch(e){return cc.warn("mgrNative._callNativeHtml5 jsonStr error!"),{error:e}}},t.nativeCallbackPending=null,t.bRegisterNativeCallback=!1,t}(r.default));o.default=g,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Base64":"Base64","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/ULNativeControllerHtml5":"ULNativeControllerHtml5"}],mgrNetwork:[function(e,t,o){"use strict";cc._RF.push(t,"9b767SvZMFC+4wHhZmfMvXC","mgrNetwork");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../ulframework/manager/Manager"),l=e("../../ulframework/network/NetworkManager"),c=e("../../ulframework/network/NetworkAdapterHttpUlServer"),u=e("../../ulframework/network/NetworkAdapterHttp"),d=e("../../ulframework/utils/Timer"),p=e("../view/dialog/vNetworkWaitingDialog"),h=e("../view/dialog/vNetworkFaildDialog"),f=e("../Const"),g=cc._decorator.ccclass,m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this);var t=new c.NetworkAdapterHttpUlServer;t.setHost(f.default.SERVER_HOST),t.setUrlFormat(f.default.SERVER_URL_FORMAT),t.setUlServerArg("ultralisk","pc",f.default.SERVER_APP_ID.toString(),"ultralisk"),t.setTimeout(5),this.networkManager=new l.NetworkManager(t),d.default.callLoop(1/60,this.onTimerSpan.bind(this),!0)},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.onTimerSpan=function(e){var t=e.span;this.networkManager.update(t)},t.send=function(e,t,o){null==t&&(t={});var n={};if(n.cmd=e,null!=t)for(var r in t){var a=t[r];n[r]=a}this.networkManager.addTask(n,this.onResponse.bind(this),this.onFaild.bind(this),this.onRequest.bind(this),o)},t.onRequest=function(e){e.isBackgroundEnabled()||this.showWaiting()},t.onResponse=function(e){this.networkManager.getTasks().length<=1&&this.hideWaiting(),this.sendMsg("MSG_NETWORK_RESPONSE",{requestData:e.getRequestData(),responseData:e.getResponseData()})},t.onFaild=function(e){e.isBackgroundEnabled()?this.stopAllTasks():this.showFaild(),this.sendMsg("MSG_NETWORK_FAILD",{requestData:e.getRequestData(),faildMsg:e.getFaildMsg()})},t.stopAllTasks=function(){for(var e=[],t=this.networkManager.getTasks(),o=0;o<t.length;o++){var n=t[o];e.push({requestData:n.getRequestData()})}this.networkManager.stopAllTasks(),this.hideWaiting(),this.hideFaild();for(o=0;o<e.length;o++){var r=e[o];this.sendMsg("MSG_NETWORK_STOP_TASK",r)}},t.retryCurrentTask=function(){this.networkManager.retryCurrentTask(),this.networkManager.getTasks().length>0&&this.showWaiting()},t.showWaiting=function(){return a(this,void 0,void 0,function(){return i(this,function(e){return this.hideWaiting(),this.hideFaild(),(new p.default).openDialog(),[2]})})},t.hideWaiting=function(){this.sendMsg("MSG_NETWORKE_CLOSE_WAITING")},t.showFaild=function(){this.hideWaiting(),this.hideFaild(),(new h.default).openDialog(!0)},t.hideFaild=function(){this.sendMsg("MSG_NETWORK_CLOSE_FAILD")},t.tryCheckNetwork=function(e,t){if(cc.sys.isBrowser)e();else{var o,n=ul.format("http://%s/cc_patch/fake_version.txt","h005up.ultralisk.cn"),r=new u.NetworkAdapterHttp;r.setReceiveCallback(function(t){o&&o.stop(),e&&e()}),r.setFaildCallback(function(e){o&&o.stop(),t&&t()}),r.send({url:n}),(o=new d.default(.1,50,function(e){e.count>=50&&t&&t()})).start()}},t.tryDownloadImg=function(e,t,o,n){var r,a={};for(var i in t){var s=t[i];s&&(a[i]=s)}a.url=e;var c=new u.NetworkAdapterHttp,p=new l.NetworkManager(c);p.addTask(a,function(e){r&&r.stop();var t=e.getRequestData(),n=e.getResponseData();o({requestData:t,responseData:n})},function(){r&&r.stop(),n()},function(){},!0),p.update(0),(r=new d.default(.1,50,function(e){p.update(.1),e.count>=50&&n&&n()})).start()},t.sendDataToMegadata=function(e,t){if(e){var o=f.default.MEGADATA_TYPE_ID_ARR[t||0]||f.default.MEGADATA_TYPE_ID_ARR[0]||0,n=new u.NetworkAdapterHttp;n.setReceiveCallback(function(e){}),n.setFaildCallback(function(e){}),n.send({url:"http://megadata.ultralisk.cn/appstatusrequest",requestType:"POST",postData:ul.format("updata=%s",JSON.stringify({typeid:o.toString(),updata:e}))})}},t=r([g],t)}(s.default);o.default=m,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/network/NetworkAdapterHttp":"NetworkAdapterHttp","../../ulframework/network/NetworkAdapterHttpUlServer":"NetworkAdapterHttpUlServer","../../ulframework/network/NetworkManager":"NetworkManager","../../ulframework/utils/Timer":"Timer","../Const":"Const","../view/dialog/vNetworkFaildDialog":"vNetworkFaildDialog","../view/dialog/vNetworkWaitingDialog":"vNetworkWaitingDialog"}],mgrOfflinePvp:[function(e,t,o){"use strict";cc._RF.push(t,"5b9a7aHb1xJIrjZFlRfU0Jg","mgrOfflinePvp");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("../struct/sAvatar"),s=e("./mgrRecord"),l=e("./mgrCfg"),c=e("./mgrPlayer"),u=e("../../ulframework/utils/Tools"),d=e("./mgrDirector"),p=e("./mgrAd"),h=e("../Const"),f=e("./mgrChannel"),g=e("./mgrI18n"),m=cc._decorator,_=m.ccclass,v=(m.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){this.setRandomDataCreator(function(){var e=new i.default;return e._debugFillRandom(),[e.serializeToText(),e.calcWeight()]}),this.loadRecord(),this.tryUpdateRank(),this.registerListeners({MSG_I18N_LANGUAGE_CHANGED:this.onMsgI18nLanguageChanged})},t.loadRecord=function(){var e=s.default.getData("offline_pvp")||{};this.pvpDatas=e.pvpDatas||[],this.seasonBeginTime=e.seasonBeginTime,this.seasonEndTime=e.seasonEndTime,this.seasonUpdateDayOfWeek=e.seasonUpdateDayOfWeek,this.seasonSubjectId=e.seasonSubjectId,this.likedCount=e.likedCount||0},t.saveRecord=function(){var e={pvpDatas:this.pvpDatas,seasonBeginTime:this.seasonBeginTime,seasonEndTime:this.seasonEndTime,seasonUpdateDayOfWeek:this.seasonUpdateDayOfWeek,seasonSubjectId:this.seasonSubjectId,likedCount:this.likedCount};s.default.setData("offline_pvp",e)},t.getPlayerData=function(){for(var e=c.default.getUid(),t=0;t<this.pvpDatas.length;t++){var o=this.pvpDatas[t];if(o.uid==e)return o.rank=t+1,o}return null},t.getPvpDatas=function(){for(var e=0;e<this.pvpDatas.length;e++){this.pvpDatas[e].rank=e+1}return ul.clone(this.pvpDatas)},t.getPkList=function(){var e=this.getPvpDatas();return u.default.randomGotArrayDatas(e,3)},t.like=function(e){for(var t=0;t<this.pvpDatas.length;t++){var o=this.pvpDatas[t];o.uid==e&&o.score++}this.pvpDatas=u.default.sortArrayByField(this.pvpDatas,"-score"),c.default.addItemAmount(h.default.ITEM_ID_PVP_REWARD_CURR_NUM,1,""),this.likedCount++,this.likedCount%5==0&&p.default.showIntAd(null,"inter_like_count_five"),this.addLikeCount(-1)},t.resetRewardCount=function(){c.default._setItemAmount(h.default.ITEM_ID_PVP_REWARD_CURR_NUM,0),this.saveRecord()},t.reduceRewardCount=function(e){c.default.addItemAmount(h.default.ITEM_ID_PVP_REWARD_CURR_NUM,-e,""),this.saveRecord()},t.onChoosedHandler=function(){this.addLikeCount(-1),c.default.addItemAmount(h.default.ITEM_ID_PVP_REWARD_CURR_NUM,1,""),this.saveRecord()},t.updatePlayerUid=function(e,t){for(var o=this.pvpDatas||[],n=o.length-1;n>=0;n--){var r=o[n];r.uid==e&&r.uid}this.saveRecord()},t.replacePlayerData=function(e,t,o){for(var n=c.default.getUid(),r=c.default.getName(),a=0,i=this.pvpDatas,s=i.length-1;s>=0;s--){var l=i[s];if(l&&l.uid==n){a=l.score||0,i.splice(s,1);break}}i.push({uid:n,name:r,data:e,weight:t,score:a,rank:0}),this.pvpDatas=u.default.sortArrayByField(i,"-score"),this.saveRecord(),f.default.isRankEnabled()?d.default.warpDialogWithEffect("vHudRankDialog",{backSceneName:"vPvpPkDialog"}):d.default.warpDialogWithEffect("vPvpPkDialog")},t.buildRemainTimeStr=function(e){var t=e-u.default.time();if(t<=0)return"\u5373\u5c06\u7ed3\u675f";var o=Math.floor(t/24/60/60);if(o<=0)return(n=Math.floor(t/60/60))<=0?"\u5373\u5c06\u7ed3\u675f":ul.format("%d\u5c0f\u65f6",n);var n=Math.floor((t-24*o*60*60)/60/60);return ul.format("%d\u5929%d\u5c0f\u65f6",o,n)},t.getBadgeCount=function(){var e=this.getLikeCount()||[0,1],t=e[0];e[1];return t+(this.getAdLikeCount()||0)},t.getLikeCount=function(){return[c.default.getItemAmount(h.default.ITEM_ID_PVP_LIKE_COUNT),c.default.getRecoverMaxAmount(h.default.ITEM_ID_PVP_LIKE_COUNT)]},t.getAdLikeCount=function(){return p.default.getAdEventRemainCount("video_pvp_like_time")},t.addLikeCount=function(e,t){void 0===t&&(t="\u70b9\u8d5e"),c.default.addItemAmount(h.default.ITEM_ID_PVP_LIKE_COUNT,e,t),this.saveRecord()},t.tryUpdateRank=function(){this.seasonBeginTime||this.startSeason(),u.default.time()>=this.seasonEndTime&&this.startSeason();var e=(new Date).getDay(),t=l.default.get("pvp_offline_db",1);if(this.seasonUpdateDayOfWeek<e){for(var o=1;o<=e-this.seasonUpdateDayOfWeek;o++){for(var n=u.default.random(t.dailyCountMin,t.dailyCountMax),r=1;r<=n;r++)this.pvpDatas.push(this.createRandomData());var a=u.default.random(t.dailyLikeCountMin,t.dailyLikeCountMax);this.doRandomLike(a)}this.pvpDatas=u.default.sortArrayByField(this.pvpDatas,"-score"),this.seasonUpdateDayOfWeek=e,this.saveRecord()}},t.doRandomLike=function(e){for(var t=this.pvpDatas,o=0,n=0;n<t.length;n++){o+=(a=t[n]).weight}for(var r=1;r<=e;r++)for(n=0;n<t.length;n++){var a=t[n];u.default.random(o)<=o/2&&(a.score+=1)}},t.stopSeason=function(){this.pvpDatas=[],this.seasonBeginTime=null,this.seasonUpdateDayOfWeek=null,this.saveRecord()},t.startSeason=function(){this.stopSeason();var e=new Date,t=e.getDate()-(e.getDay()-1),o=new Date;o.setFullYear(e.getFullYear(),e.getMonth(),t),o.getDate();var n=new Date;n.setFullYear(e.getFullYear(),e.getMonth(),t+6);for(var r=l.default.get("pvp_offline_db",1),a=u.default.random(r.initCountMin,r.initCountMax),i=1;i<=a;i++)this.pvpDatas.push(this.createRandomData());this.pvpDatas=u.default.sortArrayByField(this.pvpDatas,"-score"),this.seasonBeginTime=o.getTime()/1e3,this.seasonEndTime=n.getTime()/1e3,this.seasonUpdateDayOfWeek=0,this.seasonSubjectId=this.getRandomSubjectId(),this.saveRecord()},t.createRandomData=function(){var e,t=ul.format("random_%06d",this.pvpDatas.length+1),o=this.createUniqueRandomName(),n="";return this.fRandomDataCreator&&(n=(e=this.fRandomDataCreator())[0],e[1]),{uid:t,name:o,data:n,score:0,rank:0,weight:1}},t.createUniqueRandomName=function(){for(var e={},t=0;t<this.pvpDatas.length;t++){e[this.pvpDatas[t].name]=!0}for(;;){var o=c.default.createRandomName(g.default.getLanguage());if(!e[o])return o}},t.getRandomSubject=function(){var e=l.default.getDb("pvp_offline_subject_db");return e[u.default.random(e.length)-1].name},t.getRandomSubjectId=function(){var e=l.default.getDb("pvp_offline_subject_db");return e[u.default.random(e.length)-1].id},t.setRandomDataCreator=function(e){this.fRandomDataCreator=e},t.onMsgI18nLanguageChanged=function(){for(var e=c.default.getUid(),t=0;t<this.pvpDatas.length;t++)e==this.pvpDatas[t].uid?this.pvpDatas[t].name=c.default.getName():this.pvpDatas[t].name=this.createUniqueRandomName();this.saveRecord()},t.pvpDatas=[],t.seasonBeginTime=null,t.seasonEndTime=null,t.seasonUpdateDayOfWeek=null,t.seasonSubjectId=null,t.likedCount=0,t=r([_],t)}(a.default));o.default=v,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","../Const":"Const","../struct/sAvatar":"sAvatar","./mgrAd":"mgrAd","./mgrCfg":"mgrCfg","./mgrChannel":"mgrChannel","./mgrDirector":"mgrDirector","./mgrI18n":"mgrI18n","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord"}],mgrOfflineStoreRank:[function(e,t,o){"use strict";cc._RF.push(t,"bb5fcQo08NKloT2869VJbEt","mgrOfflineStoreRank");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("./mgrRecord"),s=e("./mgrCfg"),l=e("./mgrPlayer"),c=e("../../ulframework/utils/Tools"),u=e("../Const"),d=e("./mgrI18n"),p=cc._decorator,h=p.ccclass,f=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){this.loadRecord(),this.tryUpdateRank(),this.registerListeners({MSG_I18N_LANGUAGE_CHANGED:this.onMsgI18nLanguageChanged})},t.loadRecord=function(){var e=i.default.getData("offline_store_rank")||{};this.pvpDatas=e.pvpDatas||[],this.seasonBeginTime=e.seasonBeginTime,this.seasonEndTime=e.seasonEndTime,this.seasonUpdateDayOfWeek=e.seasonUpdateDayOfWeek,this.seasonSubjectId=e.seasonSubjectId,this.rewardCount=e.rewardCount||0},t.saveRecord=function(){var e={pvpDatas:this.pvpDatas,seasonBeginTime:this.seasonBeginTime,seasonEndTime:this.seasonEndTime,seasonUpdateDayOfWeek:this.seasonUpdateDayOfWeek,seasonSubjectId:this.seasonSubjectId,rewardCount:this.rewardCount};i.default.setData("offline_store_rank",e)},t.getPlayerData=function(){for(var e=l.default.getUid(),t=0;t<this.pvpDatas.length;t++){var o=this.pvpDatas[t];if(o.uid==e)return o.rank=t+1,o}return null},t.getPlayerRank=function(){return(this.getPlayerData()||{}).rank||0},t.getPvpDatas=function(e){this.pvpDatas=c.default.sortArrayByField(this.pvpDatas,"-score");for(var t=0;t<this.pvpDatas.length;t++){this.pvpDatas[t].rank=t+1}return e?this.pvpDatas:ul.clone(this.pvpDatas)},t.getPvpDatasRange=function(e,t){var o=this.getPvpDatas(!0);t=t||o.length,t=Math.max(t,2),e=Math.min(e,t-1),cc.log("----getPvpDatasRange startRank endRank=",e,t);for(var n=[],r=e-1;r<=t-1;r++){var a=o[r];if(!a)break;n.push(a)}return ul.clone(n)},t.getStoreResultData=function(e){var t=this.getPvpDatas(!0),o=e>1?e-1:e,n=1==e?e+1:e;cc.log("----getPvpDatasRange startRank endRank=",o,n);for(var r=[],a=o-1;a<=n-1;a++){var i=t[a];if(!i)break;r.push(i)}return ul.clone(r)},t.getPkList=function(){var e=this.getPvpDatas();return c.default.randomGotArrayDatas(e,3)},t.resetRewardCount=function(){this.rewardCount=0,this.saveRecord()},t.updatePlayerUid=function(e,t){for(var o=this.pvpDatas||[],n=o.length-1;n>=0;n--){var r=o[n];r.uid==e&&r.uid}this.saveRecord()},t.replacePlayerData=function(e,t,o){for(var n=l.default.getUid(),r=l.default.getName(),a=this.pvpDatas,i=a.length-1;i>=0;i--){var s=a[i];if(s&&s.uid==n){a.splice(i,1);break}}a.push({uid:n,name:r,data:e,weight:1,score:t||0,order:o||0,rank:0}),this.pvpDatas=c.default.sortArrayByField(a,"-score"),this.saveRecord()},t.buildRemainTimeStr=function(e){var t=e-c.default.time();if(t<=0)return"\u5373\u5c06\u7ed3\u675f";var o=Math.floor(t/24/60/60);if(o<=0)return(n=Math.floor(t/60/60))<=0?"\u5373\u5c06\u7ed3\u675f":ul.format("%d\u5c0f\u65f6",n);var n=Math.floor((t-24*o*60*60)/60/60);return ul.format("%d\u5929%d\u5c0f\u65f6",o,n)},t.tryUpdateRank=function(){this.seasonBeginTime||this.startSeason(),c.default.time()>=this.seasonEndTime&&this.startSeason();var e=(new Date).getDay(),t=s.default.get("store_rank_offline_db",1);if(this.seasonUpdateDayOfWeek<e){for(var o=1;o<=e-this.seasonUpdateDayOfWeek;o++){for(var n=c.default.random(t.dailyCountMin,t.dailyCountMax),r=1;r<=n;r++)this.pvpDatas.push(this.createRandomData());this.doRandomLike(t.dailyLikeCountMin,t.dailyLikeCountMax)}this.adaptRankScore(t.dailyLikeCountMin,t.dailyLikeCountMax),this.pvpDatas=c.default.sortArrayByField(this.pvpDatas,"-score"),this.seasonUpdateDayOfWeek=e,this.saveRecord()}},t.doRandomLike=function(e,t){for(var o=this.pvpDatas,n=0;n<o.length;n++){var r=o[n];r.uid!=l.default.getUid()&&(r.score+=c.default.random(e,t),r.order+=c.default.random(e,t))}},t.adaptRankScore=function(e,t){for(var o=this.pvpDatas,n=0,r=l.default.getItemAmount(u.default.ITEM_ID_TURNOVER),a=0;a<o.length;a++){(s=o[a]).score>r&&(n+=1)}if(n<=0){var i=c.default.randomGotArrayDatas(o,15);for(a=0;a<i.length;a++){var s;(s=i[a]).uid!=l.default.getUid()&&(a<3?(s.score=r+c.default.random(e,t),s.order=r+c.default.random(e,t)):(s.score=r-c.default.random(e,t),s.order=r-c.default.random(e,t)))}}},t.stopSeason=function(){this.pvpDatas=[],this.seasonBeginTime=null,this.seasonUpdateDayOfWeek=null,this.saveRecord()},t.startSeason=function(){this.stopSeason();var e=new Date,t=e.getDate()-(e.getDay()-1),o=new Date;o.setFullYear(e.getFullYear(),e.getMonth(),t),o.getDate();var n=new Date;n.setFullYear(e.getFullYear(),e.getMonth(),t+6);for(var r=s.default.get("store_rank_offline_db",1),a=c.default.random(r.initCountMin,r.initCountMax),i=1;i<=a;i++)this.pvpDatas.push(this.createRandomData());this.pvpDatas=c.default.sortArrayByField(this.pvpDatas,"-score"),this.seasonBeginTime=o.getTime()/1e3,this.seasonEndTime=n.getTime()/1e3,this.seasonUpdateDayOfWeek=0,this.seasonSubjectId=this.getRandomSubjectId(),this.saveRecord()},t.createRandomData=function(){return{uid:ul.format("random_%06d",this.pvpDatas.length+1),name:this.createUniqueRandomName(),data:"",score:0,rank:0,weight:1,order:0}},t.createUniqueRandomName=function(){for(var e={},t=0;t<this.pvpDatas.length;t++){e[this.pvpDatas[t].name]=!0}for(;;){var o=l.default.createRandomName(d.default.getLanguage());if(!e[o])return o}},t.getRandomSubject=function(){var e=s.default.getDb("store_rank_offline_subject_db");return e[c.default.random(e.length)-1].name},t.getRandomSubjectId=function(){var e=s.default.getDb("store_rank_offline_subject_db");return e[c.default.random(e.length)-1].id},t.setRandomDataCreator=function(e){this.fRandomDataCreator=e},t.onMsgI18nLanguageChanged=function(){for(var e=l.default.getUid(),t=0;t<this.pvpDatas.length;t++)e==this.pvpDatas[t].uid?this.pvpDatas[t].name=l.default.getName():this.pvpDatas[t].name=this.createUniqueRandomName();this.saveRecord()},t.pvpDatas=[],t.seasonBeginTime=null,t.seasonEndTime=null,t.seasonUpdateDayOfWeek=null,t.seasonSubjectId=null,t.rewardCount=0,t=r([h],t)}(a.default));o.default=f,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrCfg":"mgrCfg","./mgrI18n":"mgrI18n","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord"}],mgrOffline:[function(e,t,o){"use strict";cc._RF.push(t,"766a6Th4d5Ng59gr+nDf+7A","mgrOffline");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("./mgrRecord"),s=e("../../ulframework/utils/Tools"),l=e("../../ulframework/utils/Timer"),c=e("./mgrStage"),u=e("./mgrCfg"),d=e("./mgrPlayer"),p=cc._decorator.ccclass,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),l.default.callLoop(1,this.saveRecord.bind(this),!0)},t.loadRecord=function(){e.loadRecord.call(this),this._initOfflineInfo()},t._initOfflineInfo=function(){var e=i.default.getData("offline")||{},t=e.lastOnlineTime||s.default.time(),o=e.offlineDuration||0;this.offlineInfo.lastOnlineTime=t;var n=s.default.time()-t+o;n>28800&&(n=28800),this.offlineInfo.offlineDuration=n;var r=Math.floor(n/3600),a=u.default.get("online_reward_db",r)[0];this.offlineInfo.rewardItemId=a.rewardItemId;var l=a.factor;this.offlineInfo.rewardCount=Math.floor(l*r*(1+c.default.getStageProgress()/c.default.getTotalStages()))},t.saveRecord=function(){e.saveRecord.call(this);var t={lastOnlineTime:s.default.time(),offlineDuration:this.offlineInfo.offlineDuration};i.default.setData("offline",t)},t.getOfflineInfo=function(){return this.offlineInfo},t.resetOfflineInfo=function(){this.offlineInfo.offlineDuration=0,this.offlineInfo.rewardCount=0,this.saveRecord(),d.default.addItemAmount(this.offlineInfo.rewardItemId,this.offlineInfo.rewardCount,"\u9886\u53d6\u79bb\u7ebf\u5956\u52b1")},t.offlineInfo={lastOnlineTime:0,offlineDuration:0,rewardCount:0,rewardItemId:0},t=r([p],t)}(a.default);o.default=h,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","./mgrCfg":"mgrCfg","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrStage":"mgrStage"}],mgrOnline:[function(e,t,o){"use strict";cc._RF.push(t,"b0ef79yzE1IZYPfqN7kP8+u","mgrOnline");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("./mgrRecord"),s=e("../Const"),l=e("../../ulframework/utils/Tools"),c=e("./mgrCfg"),u=e("./mgrPlayer"),d=cc._decorator.ccclass,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return n(t,e),o=t,t.onLoad=function(){e.onLoad.call(this),this.loadRecord()},t.loadRecord=function(){e.loadRecord.call(this);var t=i.default.getData("online")||{};if(this.signedDays=t.signedDays,this.startSignDate=t.startSignDate||0,this.signedDay=t.signedDay||0,this.lastSignTime=t.lastSignTime||0,this.dailyBaseRewardGoldNum=t.dailyBaseRewardGoldNum||0,!this.signedDays){var o={},n=c.default.getDb("online_reward_db")||{};for(var r in n)o[r]={day:1,index:1,signTime:0};this.signedDays=o}},t.saveRecord=function(){e.saveRecord.call(this);var t={signedDays:this.signedDays,startSignDate:this.startSignDate,signedDay:this.signedDay,lastSignTime:this.lastSignTime,dailyBaseRewardGoldNum:this.dailyBaseRewardGoldNum};i.default.setData("online",t)},t.tryRefreshDailyData=function(){if(!l.default.isOneDay(l.default.time(),this.lastSignTime)){this.lastSignTime=l.default.time();var e=!0;if(this.signedDay>=1)o.getSignIndex(this.signedDay)<=1&&(e=!1);e&&(this.signedDay=(this.signedDay||0)+1),this.dailyBaseRewardGoldNum=u.default.getBascRewardGold(),this.sendMsg("MSG_ONLINE_DAILY_INFO_REFRESHED"),this.saveRecord()}},t.hasCanRewardSign=function(){return(o.getState()||s.OnlineState.signed)==s.OnlineState.canSign},t.getFormatedTime=function(e){var t=Math.floor(e/60/60),o=Math.floor(e%3600/60),n=e%60;return ul.format("%d:%02d:%02d",t,o,n)},t.getRewardGoldNumByIndex=function(e){var t=this.getSignDay(),o=c.default.get("online_reward_db",t,e)||{};return Math.ceil(this.dailyBaseRewardGoldNum*(o.factor/100||0))},t.getState=function(e){var t=e||this.getSignDay(),o=this.getSignIndex(t),n=this.signedDays[t];if(!n)return s.OnlineState.signOver;var r=n.signTime,a=c.default.get("online_reward_db",t)||{};for(var i in a){var u=a[i];if(u.index==o&&u.day==t)return l.default.time()-r>=u.rewardGap?s.OnlineState.canSign:s.OnlineState.waitGap}return s.OnlineState.signOver},t.getSignDay=function(){return this.signedDay||1},t.getSignIndex=function(e){var t=this.signedDays[e||this.getSignDay()];return t?t.index:0},t.canReSign=function(e){var t=c.default.get("online_reward_db",e)||{},o=this.signedDays[e];if(!o)return!1;var n=o.index;for(var r in t){if(n<=t[r].index)return!0}return!1},t.sign=function(e){var t={bSuccessd:!1};if(this.getState()!=s.OnlineState.canSign&&!e)return t;var o=e||this.getSignDay(),n=this.getSignIndex(e);return c.default.get("online_reward_db",o,n)?(0==this.startSignDate&&(this.startSignDate=l.default.time()),this.signedDays[o]?(this.signedDays[o].index=this.signedDays[o].index+1,this.signedDays[o].signTime=l.default.time(),e&&e!=this.getSignDay()||(this.lastSignTime=l.default.time()),this.saveRecord(),t.bSuccessd=!0,t.rewardItemId=s.default.ITEM_ID_GOLD,t.rewardAmount=this.getRewardGoldNumByIndex(n),t):t):t},t.getRemainTime=function(){if(this.getState()!=s.OnlineState.waitGap)return 0;var e=this.getSignDay(),t=this.getSignIndex(),o=this.signedDays[e];if(!o)return 0;var n=o.signTime,r=c.default.get("online_reward_db",e)||{};for(var a in r){var i=r[a];if(i.index==t)return i.rewardGap+n-l.default.time()}return 0},t.buildSignLotteryResult=function(){var e=[];return c.default.forDb("sign_lottery_db",function(t,o){var n={cost:[],rewards:[]};n.cost[0]=o.costItemId,n.cost[1]=o.costAmount;for(var r=0;r<o.rewardBoxIds.length;r++)for(var a=o.rewardBoxIds[r],i=u.default.openItemBox(a),s=0;s<i.length;s++)n.rewards.push(i[s]);e.push(n)}),e},t.getBadgeCout=function(){return o.getState()==s.OnlineState.canSign?1:0},t.signedDay=null,t.signedIndex=null,t.lastSignTime=null,t.signedDays={},t.startSignDate=0,t.dailyBaseRewardGoldNum=0,t=o=r([d],t)}(a.default);o.default=p,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrCfg":"mgrCfg","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord"}],mgrOpMidAutumnLottery:[function(e,t,o){"use strict";cc._RF.push(t,"e83f4KFj6JHMrDwe9BpyWx/","mgrOpMidAutumnLottery");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("../../ulframework/utils/Timer"),s=e("../../ulframework/utils/Tools"),l=e("./mgrRecord"),c=cc._decorator.ccclass,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.onTimerLoop(),i.default.callLoop(600,this.onTimerLoop.bind(this),!0)},t.loadRecord=function(){e.loadRecord.call(this);var t=l.default.getData("op_mid_autumn_lottery")||{};this.lotteryedNum=t.lotteryedNum||0,this.lastDailyRefreshTime=t.lastDailyRefreshTime||0,this.lastShowOpMidAutumnLotteryDialogTime=t.lastShowOpMidAutumnLotteryDialogTime||0,this.saveRecord()},t.saveRecord=function(){e.saveRecord.call(this);var t={lotteryedNum:this.lotteryedNum,lastDailyRefreshTime:this.lastDailyRefreshTime,lastShowOpMidAutumnLotteryDialogTime:this.lastShowOpMidAutumnLotteryDialogTime};l.default.setData("op_mid_autumn_lottery",t)},t.refreshDailyData=function(){s.default.isOneDay(s.default.time(),this.lastDailyRefreshTime)||(this.lotteryedNum=0,this.lastDailyRefreshTime=s.default.time(),this.saveRecord())},t.onTimerLoop=function(){this.refreshDailyData()},t.markLotteryed=function(){this.lotteryedNum++,this.saveRecord()},t.lotteryedNum=0,t.lastDailyRefreshTime=0,t.lastShowOpMidAutumnLotteryDialogTime=0,t=r([c],t)}(a.default);o.default=u,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","./mgrRecord":"mgrRecord"}],mgrOpNcov:[function(e,t,o){"use strict";cc._RF.push(t,"42b87Yd80RMaaMR0csSei4n","mgrOpNcov");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("./mgrRecord"),s=e("../../ulframework/utils/Tools"),l=e("./mgrSdk"),c=e("./mgrCfg"),u=e("./mgrPlayer"),d=e("./mgrTip"),p=cc._decorator.ccclass,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord()},t.loadRecord=function(){e.loadRecord.call(this);var t=i.default.getData("op_ncov")||{};this.lastReceivedTime=t.lastReceivedTime||0,this.receivedCount=t.receivedCount||0},t.saveRecord=function(){e.saveRecord.call(this);var t={lastReceivedTime:this.lastReceivedTime||0,receivedCount:this.receivedCount||0};i.default.setData("op_ncov",t)},t.canReceive=function(){if(s.default.isOneDay(s.default.time(),this.lastReceivedTime||0))return!1;if(1!=l.default.getCopNumberValueByKey("b_ncov_tip"))return!1;var e=c.default.get("op_ncov_module_config_db",1);return!((this.receivedCount||0)>=(e.maxReceivedCount||0))},t.tryReceive=function(){if(this.canReceive()){var e=[],t=c.default.get("op_ncov_module_config_db",1).rewards||[];cc.log("mgrOpNcov.tryReceive"),cc.log("  rewards",t);for(var o=0;o<t.length;o++){var n=t[o],r=n[0],a=n[1];cc.log("    ",o,r,a),u.default.addItemAmount(r,a,"\u9632\u75ab\u63d0\u793a\u5956\u52b1"),e.push({itemId:r,amount:a,amountSteps:[[a,0]],customerContext:{bBanAdReward:!0}})}cc.log("  gotItemTipDatas",e),e.length>0&&d.default.addGotItemTipGroup(e),this.lastReceivedTime=s.default.time(),this.receivedCount=this.receivedCount+1,this.saveRecord()}},t=r([p],t)}(a.default);o.default=h,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","./mgrCfg":"mgrCfg","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrSdk":"mgrSdk","./mgrTip":"mgrTip"}],mgrPacking:[function(e,t,o){"use strict";cc._RF.push(t,"d73a4P1/eJExKzcL48XMbCw","mgrPacking");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("../../ulframework/utils/Tools"),s=e("../Const"),l=e("../struct/sAvatar"),c=e("../struct/sPacking"),u=e("./mgrCfg"),d=e("./mgrPlayer"),p=e("./mgrRecord"),h=e("./mgrShop"),f=e("./mgrSound"),g=e("./mgrStage"),m=e("./mgrI18n"),_=cc._decorator.ccclass,v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return n(t,e),o=t,t.onLoad=function(){e.onLoad.call(this),this.registerListeners({MSG_RECORD_UPDATE:this.loadRecord.bind(this),MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this),MSG_SUBJECT_DRESS_REMOVED:this.onMsgSubjectDressRemoved.bind(this)}),this.loadRecord()},t.loadRecord=function(){e.loadRecord.call(this);var t=p.default.getData("packing")||{};this.packingDressDict=t.packingDressDict||{},this.bTrialedPacking=t.bTrialedPacking||!1,this.packingAvatarInitDict=t.packingAvatarInitDict||{},this.bInitedPacking=t.bInitedPacking;var n={};if(u.default.forDb("packing_db",function(e,t){var o=t[0],r=d.default.getItemAmount(o.id);cc.log("----packing =",o.id,r);var a=new c.default(o.id,r);n[o.id]=a}),this.packings=n,this.saveRecord(),!this.bInitedPacking){u.default.forDb("packing_avatar_init_db",function(e,t){var n=t.ids||[],r=new l.default;r.fillByPartIds(n);var a=r.serializeToText();o.setPackingAvatar(t.packingId,a)&&1}),this.bInitedPacking=!0,this.saveRecord()}},t.saveRecord=function(){e.saveRecord.call(this);var t={packingDressDict:this.packingDressDict,bTrialedPacking:this.bTrialedPacking,packingAvatarInitDict:this.packingAvatarInitDict,bInitedPacking:this.bInitedPacking};p.default.setData("packing",t)},t.onMsgItemAmountChanged=function(e){var t=e.itemId,n=this.packings[t];n&&n.level<=0&&(n.setLevel(1),this.saveRecord(),this.sendMsg("MSG_PACKING_LEVEL_CHANGED",{id:n.id}));for(var r in this.packings){if(this.packings[r].template.maxItemId==t){d.default.getItemAmount(t)>0&&(o.upgradeToMax(parseInt(r)),d.default.addItemAmount(parseInt(r),-1,"\u5305\u88c5\u6ee1\u7ea7"));break}}},t.onMsgSubjectDressRemoved=function(e){var t=e.avatarStr;this.deletePackingAvatar(t)},t.setTrialedPacking=function(){this.bTrialedPacking=!0,this.saveRecord()},t.isTrialedPacking=function(){return!0},t.setInitedPackingId=function(e){this.packingAvatarInitDict[e]=!0},t.isInitedPackingId=function(e){return this.packingAvatarInitDict[e]},t.getPacking=function(e){return this.packings[e]},t.getPackings=function(){return this.packings},t.getSortedPackings=function(){var e=this.packings,t=[];for(var o in e)t.push(e[o]);return t=i.default.sortArrayByField(t,"id")},t.getEmptyPackingIdArr=function(){for(var e=[],t=this.getSortedPackings(),o=t.length,n=0;n<o;n++){var r=t[n].id,a=this.packingDressDict[r];a&&""!=a||e.push(r)}return e},t.hasEnoughGoldLvToGrowLevel=function(e){var t=this.getPacking(e);if(!t||this.isMaxLv(e))return!1;for(var o=0,n=t.level,r=u.default.get("packing_db",e),a=i.default.getTableCount(r),l=0;l<a;l++){var c=r[n];if(!c)break;if(n!=t.level&&c.bGrowLevel)break;o+=c.upgradeCostGoldNum,n+=1}return d.default.getItemAmount(s.default.ITEM_ID_GOLD)>=o},t.isMaxLv=function(e){var t=this.getPacking(e);return!!t&&!u.default.get("packing_db",e)[t.level+1]},t.isNextLvGrowup=function(e){var t=this.getPacking(e);if(!t)return!1;var o=u.default.get("packing_db",e);return!!o[t.level+1]&&o[t.level+1].bGrowLevel},t.getSimulateUpgradeResult=function(e,t){var o=this.getPacking(e);if(!o)return{bSuccess:!1,tip:m.default.getText("mgrPacking.1")};var n=u.default.get("packing_db",e)[o.level+1];return n?n.unlockStageId&&!g.default.isStageUnlocked(n.unlockStageId)?{bSuccess:!1,tip:ul.format(m.default.getText("mgrPacking.3"),n.unlockStageId)}:!t&&d.default.getItemAmount(s.default.ITEM_ID_GOLD)<o.template.upgradeCostGoldNum?(h.default.onCostNotEnought(s.default.ITEM_ID_GOLD),{bSuccess:!1,tip:""}):{bSuccess:!0,tip:m.default.getText("mgrPacking.4")}:{bSuccess:!1,tip:m.default.getText("mgrPacking.2")}},t.upgrade=function(e,t){var o=this.getSimulateUpgradeResult(e,t);if(!o||!o.bSuccess)return o;var n=this.getPacking(e);return t||h.default.tryCostByItems([[s.default.ITEM_ID_GOLD,n.template.upgradeCostGoldNum]],"\u5305\u88c5\u5347\u7ea7\u6d88\u8017")?(n.setLevel(n.level+1),this.saveRecord(),this.sendMsg("MSG_PACKING_LEVEL_CHANGED",{packingId:n.id}),f.default.play(108),{bSuccess:!0,tip:m.default.getText("mgrPacking.6")}):{bSuccess:!1,tip:m.default.getText("mgrPacking.5")}},t.upgradeToMax=function(e,t){void 0===t&&(t=!1);var o=this.getPacking(e);if(o){var n=u.default.get("packing_db",e);if(!n[o.level+1])return!1;if(!t&&!h.default.tryCostByItems([[s.default.ITEM_ID_GOLD,o.template.upgradeCostGoldNum]],"\u5305\u88c5\u5347\u7ea7\u6d88\u8017"))return!1;var r=0,a=null;for(var i in n){var l=n[i];l.level>r&&(r=l.level,a=l)}if(!a||o.level>=a.level)return!1;if(!(r<=0))return o.setLevel(r),this.saveRecord(),this.sendMsg("MSG_PACKING_LEVEL_CHANGED",{id:o.id}),f.default.play(108),!0}},t.containAvatarPacking=function(){for(var e=this.getSortedPackings(),t=e.length,o=0;o<t;o++){var n=e[o].id,r=this.packingDressDict[n];if(r&&""!=r)return!0}return!1},t.getPackingAvatarStr=function(e){return this.packingDressDict[e]},t.getPackingAvatar=function(e){var t=this.packingDressDict[e];if(!t||""==t)return null;var o=new l.default;return o.fillBySerializeText(t),o},t.isUnpackAvatar=function(e){if(!e||""==e)return!0;for(var t in this.packingDressDict){var o=this.packingDressDict[t];if(o&&""!=o&&o==e)return!1}return!0},t.setPackingAvatar=function(e,t){return cc.log("---setPackingAvatar"),this.isUnpackAvatar(t)?(this.packingDressDict[e]=t,this.saveRecord(),this.sendMsg("MSG_PACKING_AVATAR_CHANGED",{packingId:e}),!0):(cc.log("---setPackingAvatar samed"),!1)},t.deletePackingAvatar=function(e){for(var t in this.packingDressDict){var o=this.packingDressDict[t];if(o&&""!=o&&o==e)return delete this.packingDressDict[t],this.saveRecord(),void this.sendMsg("MSG_PACKING_AVATAR_CHANGED",{packingId:parseInt(t)})}},t.deletePackingAvatarByPackingId=function(e){for(var t in this.packingDressDict){var o=this.packingDressDict[t];if(o&&""!=o&&parseInt(t)==e)return delete this.packingDressDict[t],this.saveRecord(),this.sendMsg("MSG_PACKING_AVATAR_CHANGED",{packingId:parseInt(t)}),!0}},t.isPackingAvatar=function(e){var t=this.packingDressDict||{};for(var o in t){if(e==t[o])return!0}return!1},t.packings={},t.packingDressDict={},t=o=r([_],t)}(a.default);o.default=v,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","../Const":"Const","../struct/sAvatar":"sAvatar","../struct/sPacking":"sPacking","./mgrCfg":"mgrCfg","./mgrI18n":"mgrI18n","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrShop":"mgrShop","./mgrSound":"mgrSound","./mgrStage":"mgrStage"}],mgrPkMirror:[function(e,t,o){"use strict";cc._RF.push(t,"5ef8f/gdQ5OL5GwCtDd2jY2","mgrPkMirror");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("../struct/sAvatar"),s=e("../../ulframework/utils/Timer"),l=e("./mgrRecord"),c=e("./mgrCfg"),u=e("./mgrPlayer"),d=e("../../ulframework/utils/Tools"),p=e("./mgrAd"),h=e("../Const"),f=e("./mgrI18n"),g=cc._decorator.ccclass,m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return n(t,e),o=t,t.onLoad=function(){this.setRandomDataCreator(function(e){var t=new i.default;return t._specialTypeFillRandom(e),[t.serializeToText(),t.calcWeight()]}),this.loadRecord(),this.registerListeners({MSG_I18N_LANGUAGE_CHANGED:this.onMsgI18nLanguageChanged}),s.default.callLoop(1,this.onTimerLoop.bind(this),!0)},t.loadRecord=function(){var e=l.default.getData("offline_pkmirror")||{};this.pvpDatas=e.pvpDatas||{},this.seasonBeginTime=e.seasonBeginTime,this.seasonEndTime=e.seasonEndTime,this.seasonUpdateDayOfWeek=e.seasonUpdateDayOfWeek,this.seasonSubjectStageId=e.seasonSubjectStageId,this.lastDailyRefreshTime=e.lastDailyRefreshTime||0,this.rewardCount=e.rewardCount||0,this.rewardLevelDict1=e.rewardLevelDict1||{},this.rewardLevelDict2=e.rewardLevelDict2||{},this.levelAchievedDict=e.levelAchievedDict||{},this.historyGotIntegralNum=e.historyGotIntegralNum||0,this.dailyJoinStageNum=e.dailyJoinStageNum||0,this.dailyLvupCount=e.dailyLvupCount||0},t.saveRecord=function(){var e={pvpDatas:this.pvpDatas,seasonBeginTime:this.seasonBeginTime,seasonEndTime:this.seasonEndTime,seasonUpdateDayOfWeek:this.seasonUpdateDayOfWeek,seasonSubjectStageId:this.seasonSubjectStageId,rewardCount:this.rewardCount,rewardLevelDict1:this.rewardLevelDict1,rewardLevelDict2:this.rewardLevelDict2,levelAchievedDict:this.levelAchievedDict,historyGotIntegralNum:this.historyGotIntegralNum,lastDailyRefreshTime:this.lastDailyRefreshTime,dailyJoinStageNum:this.dailyJoinStageNum,dailyLvupCount:this.dailyLvupCount};l.default.setData("offline_pkmirror",e)},t.refreshDailyData=function(){d.default.isOneDay(d.default.time(),this.lastDailyRefreshTime)||(this.tryUpdateRank(),this.dailyLvupCount=0,this.dailyJoinStageNum=0,this.lastDailyRefreshTime=d.default.time(),this.sendMsg("MSG_PK_MIRROR_DAILY_INFO_REFRESHED"),this.saveRecord())},t.onTimerLoop=function(){this.refreshDailyData()},t.getDailyLvupCount=function(){return this.dailyLvupCount||0},t.getDailyJoinedCount=function(){return this.dailyJoinStageNum||0},t.markJoined=function(){this.dailyJoinStageNum+=1,u.default.addItemAmount(h.default.ITEM_ID_PKMIRROR_COUNT,-1,"\u955c\u50cf\u6b21\u6570"),this.saveRecord()},t.getJoinCount=function(){return[u.default.getItemAmount(h.default.ITEM_ID_PKMIRROR_COUNT),u.default.getRecoverMaxAmount(h.default.ITEM_ID_PKMIRROR_COUNT)]},t.getAdCount=function(){return p.default.getAdEventRemainCount("video_pkmirror_time")},t.getBadgeCount=function(){var e=this.getJoinCount(),t=e[0];e[1];return this.getAdCount()+t},t.markReward1Level=function(e){void 0===e&&(e=0),this.rewardLevelDict1[e]=!0,this.saveRecord(),this.sendMsg("MSG_PK_MIRROR_REWARD_RECEIVED")},t.markReward2Level=function(e){void 0===e&&(e=0),this.rewardLevelDict2[e]=!0,this.saveRecord(),this.sendMsg("MSG_PK_MIRROR_REWARD_RECEIVED")},t.isReward1Level=function(e){return void 0===e&&(e=0),!!this.rewardLevelDict1[e]},t.isReward2Level=function(e){return void 0===e&&(e=0),!!this.rewardLevelDict2[e]},t.isAchieveLevel=function(e){return void 0===e&&(e=0),!!this.levelAchievedDict[e]},t.getIntegralNum=function(){return this.historyGotIntegralNum||0},t.getStarNum=function(){return u.default.getItemAmount(h.default.ITEM_ID_MIRROR_STAR)},t.getRealLevelTemplate=function(){var e=this.getStarNum();return this.getLevelTemplateByStar(e,!0)},t.getShowLevelTemplate=function(){var e=this.getStarNum();return this.getLevelTemplateByStar(e)},t.getLevelTemplateByStar=function(e,t){void 0===t&&(t=!1);var o=e||0,n=c.default.getDb("pkmirror_level_db")||{},r=[];for(var a in n)r.push(n[a]);r=d.default.sortArrayByField(r,"id");for(var i=null,s=0;s<r.length;s++){var l=r[s];if(0==l.basicStarNum){if(o<=l.starNum)return l}else if(o<=l.basicStarNum+l.starNum-1)return l;i=l}return i},t.getPlayerData=function(){for(var e=u.default.getUid(),t=0;t<this.pvpDatas.length;t++){var o=this.pvpDatas[t];if(o.uid==e)return o.rank=t+1,o}return null},t.getPvpDatas=function(){for(var e=0;e<this.pvpDatas.length;e++){this.pvpDatas[e].rank=e+1}return this.pvpDatas},t.getPkTarget=function(){var e=u.default.getUid(),t=u.default.getItemAmount(h.default.ITEM_ID_MIRROR_STAR)||0,o=[],n=this.getPvpDatas();for(var r in n){var a=n[r],i=a.score||0;Math.abs(i-t)<=1&&a.uid!=e&&o.push(a)}var s=(o=o.length>0?o:n)[d.default.random(0,o.length-1)];return s&&s.uid==e?this.getPkTarget():s},t.updatePlayerUid=function(e,t){for(var o=this.pvpDatas||[],n=o.length-1;n>=0;n--){var r=o[n];r.uid==e&&r.uid}this.saveRecord()},t.replacePlayerData=function(e,t,o){for(var n=u.default.getUid(),r=u.default.getName(),a=this.pvpDatas,i=a.length-1;i>=0;i--){a[i].uid==n&&a.splice(i,1)}a.push({uid:n,name:r,data:e,weight:t,score:o||0,rank:0}),this.pvpDatas=d.default.sortArrayByField(a,"-score"),this.saveRecord()},t.buildRemainTimeStr=function(e){var t=e-d.default.time();if(t<=0)return"\u5373\u5c06\u7ed3\u675f";var o=Math.floor(t/24/60/60);if(o<=0)return(n=Math.floor(t/60/60))<=0?"\u5373\u5c06\u7ed3\u675f":ul.format("%d\u5c0f\u65f6",n);var n=Math.floor((t-24*o*60*60)/60/60);return ul.format("%d\u5929%d\u5c0f\u65f6",o,n)},t.tryUpdateRank=function(){this.seasonBeginTime||this.startSeason(),d.default.time()>=this.seasonEndTime&&this.startSeason();var e=(new Date).getDay(),t=c.default.get("pkmirror_offline_db",1);if(this.seasonUpdateDayOfWeek<e){for(var o=e-this.seasonUpdateDayOfWeek,n=1;n<=o;n++){for(var r=d.default.random(t.dailyCountMin,t.dailyCountMax),a=1;a<=r;a++)this.pvpDatas.push(this.createRandomData([]));var i=d.default.random(t.dailyLikeCountMin,t.dailyLikeCountMax);this.doRandomLike(i)}this.pvpDatas=d.default.sortArrayByField(this.pvpDatas,"-score"),this.seasonUpdateDayOfWeek=e,this.saveRecord()}},t.doRandomLike=function(e){for(var t=this.pvpDatas,o=0,n=0;n<t.length;n++){o+=(a=t[n]).weight}for(var r=1;r<=e;r++)for(n=0;n<t.length;n++){var a=t[n];if(d.default.random(o)<=o/2&&(a.score+=1,this.fRandomDataCreator)){var i=c.default.get("pkmirror_star_types_db",Math.min(a.score,this.MAX_LEVEL_STAR))||{},s=this.fRandomDataCreator(i.types||[]),l=s[0],u=s[1];a.data=l,a.weight=u}}},t.stopSeason=function(){this.pvpDatas=[],this.seasonBeginTime=null,this.seasonUpdateDayOfWeek=null,u.default._setItemAmount(h.default.ITEM_ID_MIRROR_STAR,0),this.saveRecord()},t.startSeason=function(){this.stopSeason();var e=new Date,t=e.getDate()-(e.getDay()-1),o=new Date;o.setFullYear(e.getFullYear(),e.getMonth(),t),o.getDate();var n=new Date;n.setFullYear(e.getFullYear(),e.getMonth(),t+6);for(var r=c.default.get("pkmirror_offline_db",1),a=d.default.random(r.initCountMin,r.initCountMax),i=1;i<=a;i++)this.pvpDatas.push(this.createRandomData([]));this.pvpDatas=d.default.sortArrayByField(this.pvpDatas,"-score"),this.seasonBeginTime=o.getTime()/1e3,this.seasonEndTime=n.getTime()/1e3,this.seasonUpdateDayOfWeek=0,this.seasonSubjectStageId=this.getRandomSubjectStageId(),this.saveRecord()},t.createRandomData=function(e){var t,o=ul.format("random_%06d",this.pvpDatas.length+1),n=this.createUniqueRandomName(),r="";return this.fRandomDataCreator&&(r=(t=this.fRandomDataCreator(e))[0],t[1]),{uid:o,name:n,data:r,score:0,rank:0,weight:1}},t.createUniqueRandomName=function(){for(var e={},t=0;t<this.pvpDatas.length;t++){e[this.pvpDatas[t].name]=!0}for(;;){var o=u.default.createRandomName(f.default.getLanguage());if(!e[o])return o}},t.getRandomSubjectStageId=function(e){var t=c.default.getDb("pkmirror_subject_db"),o=d.default.getTableCount(t),n=[];for(var r in t){var a=t[r];e&&a.id==e&&o>1||n.push(a)}return n[d.default.random(0,n.length-1)].stageId},t.setRandomDataCreator=function(e){this.fRandomDataCreator=e},t.finishStage=function(e,t,o){var n;this.markJoined();var r={stageId:e,bSuccess:!1,rewards:{},templateLvOld:{},templateLvNew:{},oldStarNum:0,newStarNum:0,score:0,scoreTarget:null},a=this.getShowLevelTemplate();o+=a.offsetTargetScore||0;var i=t>(o=d.default.clampf(o,d.default.random(10,15),1e3)),s=2,l=i?1:0;t!=o&&(s=i?0:1),r.score=t,r.scoreTarget=o;var p=a.integralRewards[s],f=a.silverRewards[s],g=a.rmbRewards[s];this.historyGotIntegralNum=this.historyGotIntegralNum+p;var m=((n={})[h.default.ITEM_ID_MIRROR_STAR]=l,n[h.default.ITEM_ID_MIRROR_SILVER]=f,n[h.default.ITEM_ID_HUMBER]=g,n),_=u.default.getItemAmount(h.default.ITEM_ID_MIRROR_STAR);for(var v in m){var y=parseInt(v),C=m[v];u.default.addItemAmount(y,C,"\u955c\u50cf\u7ed3\u7b97\u5956\u52b1")}var S=this.getRealLevelTemplate(),b=this.getShowLevelTemplate(),R=u.default.getItemAmount(h.default.ITEM_ID_MIRROR_STAR),T=c.default.getDb("pkmirror_level_db")||{};for(var v in T){var A=T[v];A&&A.id<S.id&&(this.levelAchievedDict[A.id]=!0)}return S.basicStarNum+S.starNum==R&&(this.levelAchievedDict[S.id]=!0,this.dailyLvupCount+=1),this.seasonSubjectStageId=this.getRandomSubjectStageId(),this.saveRecord(),r.bSuccess=i,r.rewards=m,r.templateLvOld=a,r.templateLvNew=b,r.oldStarNum=_,r.newStarNum=R,r},t.canReceiveLevelReward=function(e){return this.isReward1Level(e)?{bCan:!1,tip:f.default.getText("mgrPkMirror.1")}:this.levelAchievedDict[e]?{bCan:!0,tip:""}:{bCan:!1,tip:f.default.getText("mgrPkMirror.2")}},t.getFreeChangeEnemyCount=function(){return u.default.getItemAmount(h.default.ITEM_ID_PKMIRROR_CHANGE_ENEMY_COUNT)},t.getAdChangeEnemyCount=function(){return p.default.preCheckCanTriggerAdEvent("video_pkmirror_change_enemy_time")?p.default.getAdEventRemainCount("video_pkmirror_change_enemy_time"):0},t.canRewardLevel=function(){var e=c.default.getDb("pkmirror_level_db")||{};for(var t in e){var n=e[t],r=o.isReward1Level(n.id),a=o.isReward2Level(n.id),i=o.isAchieveLevel(n.id);if(!r&&i||!a&&i)return!0}return!1},t.onMsgI18nLanguageChanged=function(){for(var e=u.default.getUid(),t=0;t<this.pvpDatas.length;t++)e==this.pvpDatas[t].uid?this.pvpDatas[t].name=u.default.getName():this.pvpDatas[t].name=this.createUniqueRandomName();this.saveRecord()},t.pvpDatas=[],t.seasonBeginTime=null,t.seasonEndTime=null,t.seasonUpdateDayOfWeek=null,t.seasonSubjectStageId=null,t.rewardCount=0,t.historyGotIntegralNum=0,t.MAX_WEIGHT_DITANCE=250,t.rewardLevelDict1={},t.rewardLevelDict2={},t.levelAchievedDict={},t.MAX_LEVEL_STAR=6,t=o=r([g],t)}(a.default);o.default=m,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const","../struct/sAvatar":"sAvatar","./mgrAd":"mgrAd","./mgrCfg":"mgrCfg","./mgrI18n":"mgrI18n","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord"}],mgrPlayer:[function(e,t,o){"use strict";cc._RF.push(t,"2d698uw/VFAtrVpD4XImhCp","mgrPlayer");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("./mgrRecord"),s=e("./mgrCfg"),l=e("../../ulframework/utils/Timer"),c=e("../../ulframework/utils/Tools"),u=e("../Const"),d=e("./mgrTip"),p=e("./mgrShop"),h=e("./mgrWordFilter"),f=e("./mgrSdk"),g=e("./mgrGuide"),m=e("./mgrStage"),_=e("./mgrPkMirror"),v=e("./mgrOfflinePvp"),y=e("./mgrStatics"),C=e("./mgrChannel"),S=e("./mgrI18n"),b=cc._decorator.ccclass,R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return n(t,e),o=t,t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.offlineRewardFlagedTime=this.lastReceiveOfflineRewardTime,l.default.callLoop(1,this.onTimerLoop.bind(this),!0),this.registerListeners({MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged,MSG_SDK_SHARE_RESULT:this.onMsgShareResult,MSG_WX_GZH_ENTER_INIT:this.onMsgWxgzhEnterInit,MSG_WX_GZH_ENTER_GAME:this.onMsgWxgzhEnterGame,MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult})},t.loadRecord=function(){e.loadRecord.call(this);var t=i.default.getData("player")||{};this._playerNameObj=t.playerNameObj||{},this._items=t.items||{},this._historyGotItems=t.historyGotItems||{},this._historyUsedItems=t.historyUsedItems||{},this._dailyGotItems=t.dailyGotItems||{},this._dailyUsedItems=t.dailyUsedItems||{},this._historyDailyMaxGotItems=t.historyDailyMaxGotItems||{},this._historyDailyMaxUsedItems=t.historyDailyMaxUsedItems||{},this._recoverCostTimes=t.recoverCostTimes||{},this._dailyRecoveredAmounts=t.dailyRecoveredAmounts||{},this._dailyBoughtShopIds=t.dailyBoughtShopIds||{},this._lastDailyRefreshTime=t.lastDailyRefreshTime||0,this._limitTimeOwnItemDict=t.limitTimeOwnItemDict||{},this.lastReceiveOfflineRewardTime=t.lastReceiveOfflineRewardTime||0,this.bEnterHud=t.bEnterHud,this.bTakedInstallShortCut=t.bTakedInstallShortCut||!1,this.rewardedSuitIdDict=t.rewardedSuitIdDict||{},this.deviceCode?this.uid=this.deviceCode:this.uid=t.uid;var o=this._items,n=s.default.getDb("item_template_db");for(var r in n){var a=n[r];null==o[l=a.id]&&(o[l]=a.defaultAmount)}for(var l in o){var c=o[l];this._historyDisplayedGotItems[l]=c>0}this.refreshDailyData(),this.refreshRecoverItem()},t.saveRecord=function(){e.saveRecord.call(this);var t={playerNameObj:this._playerNameObj,items:this._items,historyGotItems:this._historyGotItems,historyUsedItems:this._historyUsedItems,dailyGotItems:this._dailyGotItems,dailyUsedItems:this._dailyUsedItems,historyDailyMaxGotItems:this._historyDailyMaxGotItems,historyDailyMaxUsedItems:this._historyDailyMaxUsedItems,dailyRecoveredAmounts:this._dailyRecoveredAmounts,dailyBoughtShopIds:this._dailyBoughtShopIds,lastDailyRefreshTime:this._lastDailyRefreshTime,recoverCostTimes:this._recoverCostTimes,uid:this.uid,limitTimeOwnItemDict:this._limitTimeOwnItemDict,lastReceiveOfflineRewardTime:this.lastReceiveOfflineRewardTime||0,bEnterHud:this.bEnterHud,bTakedInstallShortCut:this.bTakedInstallShortCut,rewardedSuitIdDict:this.rewardedSuitIdDict||{}};i.default.setData("player",t)},t.onTimerLoop=function(e){this.refreshDailyData(),this.refreshRecoverItem(),this.lastReceiveOfflineRewardTime=c.default.time(),this.saveRecord()},t.setEnterHud=function(){this.bEnterHud=!0},t.isEnterHud=function(){return this.bEnterHud},t.getHudItemNodePos=function(e){return this.hudItemNodePosDict[e]},t.setHudItemNodePos=function(e,t){cc.log("----setHudItemNodePos=",e,t),this.hudItemNodePosDict[e]=t},t.getName=function(){return this._playerName=this._playerNameObj[S.default.getLanguage()]||"",this._playerName},t.setName=function(e){for(var t=["en","id","pt","vi","zhcn"],o=0;o<t.length;o++)this._playerNameObj[t[o]]=S.default.getLanguage()==t[o]?e:this.createRandomName(t[o]);this.saveRecord(),this.sendMsg("MSG_PLAYER_NAME_CHANGED")},t.getItemChangedAge=function(){return this._itemChangedAge},t.getUid=function(){return this.uid||(this.uid=ul.format("%s%s%03d",ul.formatDate(new Date,"yyyyMMddhhmmss"),(new Date).getTime().toString(),c.default.random(999999)),this.saveRecord()),this.uid},t._setDeviceCode=function(e){e&&""!=e&&(this.deviceCode=e,this.uid&&this.uid!=e&&(_.default.updatePlayerUid(this.uid,e),v.default.updatePlayerUid(this.uid,e),this.uid=e,this.saveRecord()))},t.getItemAmount=function(e){return this._items[e]||0},t._setItemAmount=function(e,t){if(null!=e&&null!=t){var o=this.getItemAmount(e);if(o!=t){this._items[e]=Math.max(t,0);var n={itemId:e,amountDelta:t-o};this.sendMsg("MSG_ITEM_AMOUNT_CHANGED",n),this.saveRecord(),this._itemChangedAge++}}},t.addItemAmount=function(e,t,n){if(null!=e&&null!=t){if(t>0){var r=s.default.get("item_template_db",e);r&&0!=r.sellItemId&&(this.getItemAmount(e)>=1?(e=r.sellItemId,t=r.sellItemAmount*t):r.flag==u.default.ITEM_FLAG_PART&&o.addItemAmount(919,1,"\u4efb\u52a1\u7269\u54c1"))}var a=this.getItemAmount(e);this._setItemAmount(e,a+t),y.default.statisOnAddItemAmount(e,t,n)}},t.getItemDailyGotAmount=function(e){return this._dailyGotItems[e]||0},t.getItemHistoryGotAmount=function(e){return this._historyGotItems[e]||0},t.getItemHistoryDailyMaxGotAmount=function(e){return this._historyDailyMaxGotItems[e]||0},t.getItemDailyUsedAmount=function(e){return this._dailyUsedItems[e]||0},t.getItemHistoryUsedAmount=function(e){return this._historyUsedItems[e]||0},t.getItemHistoryDailyMaxUsedAmount=function(e){return this._historyDailyMaxUsedItems[e]||0},t.isDisplayedGotItem=function(e){return 1==this._historyDisplayedGotItems[e]},t.markDisplayedGotItem=function(e){this._historyDisplayedGotItems[e]=!0},t.markDailyBoughtShop=function(e){this._dailyBoughtShopIds[e]=!0,s.default.get("cosmetic_part_db",e)&&o.addItemAmount(925,1,"\u4efb\u52a1\u7269\u54c1"),this.saveRecord()},t.isDailyBoughtShop=function(e){return!!this._dailyBoughtShopIds[e]},t.setLimitOwnItem=function(e,t){this._limitTimeOwnItemDict[e]=t,this.saveRecord()},t.removeLimitOwnItem=function(e){delete this._limitTimeOwnItemDict[e],this.saveRecord()},t.isLimitOwnItem=function(e){var t=this._limitTimeOwnItemDict[e];return!!(t&&c.default.time()<t)},t.onMsgItemAmountChanged=function(e){var t=e,o=t.itemId,n=t.amountDelta;n>0?(this._historyGotItems[o]=(this._historyGotItems[o]||0)+n,this._dailyGotItems[o]=(this._dailyGotItems[o]||0)+n,this._historyDailyMaxGotItems[o]=Math.max(this._historyDailyMaxGotItems[o]||0,this._dailyGotItems[o])):(this._historyUsedItems[o]=(this._historyUsedItems[o]||0)+-n,this._dailyUsedItems[o]=(this._dailyUsedItems[o]||0)+-n,this._historyDailyMaxUsedItems[o]=Math.max(this._historyDailyMaxUsedItems[o]||0,this._dailyUsedItems[o]))},t.refreshDailyData=function(){if(!c.default.isOneDay(c.default.time(),this._lastDailyRefreshTime)){this._dailyGotItems={},this._dailyUsedItems={},this._dailyRecoveredAmounts={},this._dailyBoughtShopIds={},this._historyDailyMaxGotItems={},this._lastDailyRefreshTime=c.default.time();for(var e=911;e<=925;e++)this._items[e]=0;this.saveRecord()}},t.refreshRecoverItem=function(){var e=c.default.time(),t=s.default.getDb("item_recover_db");for(var o in t){var n=t[o],r=n.id,a=n.dailyMaxAmount||0,i=this._getDailyRecoveredAmount(r);if(!(a>0&&i>=a)){var l=this.getItemAmount(r),u=this.getRecoverMaxAmount(r),d=this._getRecoverCostTime(r),p=0;if(1==n.mode){if(u<=l){0!=d&&this._setRecoverCostTime(r,0);continue}if(e<d&&(d=e,this._setRecoverCostTime(r,d)),d<=0){if(u<=l)continue;d=e,this._setRecoverCostTime(r,d)}var h=e-d,f=this.getRecoverTime(r);if((p=Math.floor(h/f))<=0)continue;d+=f*p}else{if(2!=n.mode)continue;if(d<=0){this._setRecoverCostTime(r,e);continue}if(c.default.isOneDay(e,d))continue;p=1,d=e}u<=(l+=this._getRecoverAmount(r)*p)&&(l=u,d=0),a>0&&i+l>=a&&(l=a-i),this._setItemAmount(r,l),this._setRecoverCostTime(r,d),this._addDailyRecoveredAmount(r,l)}}},t.getRecoverMaxAmount=function(e){var t=s.default.get("item_recover_db",e);if(t)return 0!=t.maxAmountRefItemId?this.getItemAmount(t.maxAmountRefItemId):t.maxAmount},t.getRecoverTime=function(e){var t=s.default.get("item_recover_db",e);if(!t)return 0;var o=t.recoverTimes,n=o[0];1==t.maxAmount&&(n=o[this._getDailyRecoveredAmount(e)||0]||o[o.length-1]);return n=n||0},t._getRecoverAmount=function(e){return s.default.get("item_recover_db",e,"recoverAmount")},t._getRecoverCostTime=function(e){return this._recoverCostTimes[e]||0},t._setRecoverCostTime=function(e,t){this._recoverCostTimes[e]=t,this.saveRecord()},t._addDailyRecoveredAmount=function(e,t){this._dailyRecoveredAmounts[e]=(this._dailyRecoveredAmounts[e]||0)+t,this.saveRecord()},t._getDailyRecoveredAmount=function(e){return this._dailyRecoveredAmounts[e]||0},t.getRecoverRemainTime=function(e){var t=s.default.get("item_recover_db",e);if(!t)return cc.log(ul.format("[ERROR]---getRecoverRemainTime itemId=",e)),null;var o=t.dailyMaxAmount||0,n=this._getDailyRecoveredAmount(e);if(o>0&&n>=o)return null;if(1==t.mode){var r=this._getRecoverCostTime(e);if(r<=0)return null;var a=c.default.time()-r,i=this.getRecoverTime(e);return i<a?0:i-a}if(2==t.mode){if(this.getItemAmount(e)>=this.getRecoverMaxAmount(e))return null;var l=new Date;return l.setDate(l.getDate()+1),l.setHours(0),l.setMinutes(0),l.setSeconds(0),l.getTime()/1e3-c.default.time()}return null},t.getBoxItems=function(e){if(!e)return[];var t=s.default.get("item_box_db",e);if(!t)return[];for(var o=[],n=0;n<t.items.length;n++){var r=t.items[n];o.push([r.itemId,r.minAmount,r.maxAmount])}return o},t.getBoxItemIdDictionary=function(e){var t={},o=this.getBoxItems(e);for(var n in o){var r=o[n];r[0]&&(t[r[0]]=r[0])}return t},t.openItemBox=function(e){if(!e)return[];var t=s.default.get("item_box_db",e);return this.openItemBoxByBoxData(t)},t.openItemBoxByBoxData=function(e){if(!e)return[];var t=[];if(e.triggerRatio<1e4&&c.default.random(1e4)>e.triggerRatio)return t;var o=e.ratioType;if(1==o)for(var n=0;n<e.items.length;n++){if((a=e.items[n]).ratio>=1e4||c.default.random(1e4)<=a.ratio){var r=c.default.random(a.minAmount,a.maxAmount);t.push([a.itemId,r])}}else if(2==o){if(a=c.default.calcWheelTarget(e.items,"ratio")){r=c.default.random(a.minAmount,a.maxAmount);t.push([a.itemId,r])}}else if(3==o)for(n=0;n<e.items.length;n++){var a=e.items[n];r=c.default.random(a.minAmount,a.maxAmount);t.push([a.itemId,r])}return t},t.calcRandomHeadIcon=function(){var e=c.default.random(1,6);return ul.format("2d/npc/npc_q_0%d",e)},t.getIcon=function(e){e=e||0;var t=s.default.get("item_template_db",e);return t&&""!=t.icon?t.icon:"2d/icon/unknown.png"},t.createRandomName=function(e){var t="";switch(e){case"zhcn":var o=s.default.getDb("random_name_part1_db"),n=s.default.getDb("random_name_part2_db");t=o[c.default.random(o.length)-1].word+n[c.default.random(n.length)-1].word;break;case"vi":var r=s.default.getDb("vi_random_name_part1_db"),a=s.default.getDb("vi_random_name_part2_db");t=r[c.default.random(r.length)-1].word+a[c.default.random(a.length)-1].word;break;case"hi":var i=s.default.getDb("hi_random_name_part1_db"),l=s.default.getDb("hi_random_name_part2_db");t=i[c.default.random(i.length)-1].word+l[c.default.random(l.length)-1].word;break;case"id":var u=s.default.getDb("id_random_name_part1_db"),d=s.default.getDb("id_random_name_part2_db");t=u[c.default.random(u.length)-1].word+d[c.default.random(d.length)-1].word;break;case"pt":var p=s.default.getDb("pt_random_name_part1_db"),h=s.default.getDb("pt_random_name_part2_db");t=p[c.default.random(p.length)-1].word+h[c.default.random(h.length)-1].word;break;case"en":var f=s.default.getDb("en_random_name_part1_db"),g=s.default.getDb("en_random_name_part2_db");t=f[c.default.random(f.length)-1].word+g[c.default.random(g.length)-1].word}return t},t.createRandomPetName=function(){for(var e=s.default.getDb("random_name_part2_db"),t="",o=1;o<1e3&&(!(t=e[c.default.random(e.length-1)]||"")||h.default.hasSymbol(t)||!h.default.checkStr(t));o++);return t},t.canNoRewardShare=function(){var e=1==f.default.getCopNumberValueByKey("b_share");return!g.default.isGuiding()&&e&&C.default._isShareEnabled},t.tryPromptNoRewardShare=function(e,t,o,n){var r=this;cc.log("--1-tryPromptNoRewardShare"),this.canNoRewardShare()?(cc.log("--2-tryPromptNoRewardShare"),d.default.alertPromptImg2(e||"\u5206\u4eab",t||"\u548c\u670b\u53cb\u4eec\u4e00\u8d77\u5206\u4eab\u5427","\u53d6\u6d88","\u5206\u4eab","2d/ui/store/img_gold_big",function(){o&&o()},function(){r.tryNoRewardShare(n),o&&o()})):cc.log("---cant no reward share")},t.tryNoRewardShare=function(e){if(this.canNoRewardShare()){y.default.statisShareOpen(e,!1);var t=C.default.getShareDataRandom();f.default.openShare("",t.content||"","",(t.index+1).toString(),t.imgPath||"",JSON.stringify({bNoRewardShare:!0,viewName:e||""}))}},t.canShare=function(){var e=o.getItemAmount(u.default.ITEM_ID_SHARE_COUNT)>0,t=1==f.default.getCopNumberValueByKey("b_share");return e&&!g.default.isGuiding()&&t&&C.default._isShareEnabled},t.tryShowShare=function(e,t,n){if(void 0===t&&(t=null),o.getItemAmount(u.default.ITEM_ID_SHARE_COUNT)<=0)t&&t();else{var r=o.getItemAmountStr(Math.ceil(o.getBascRewardGold())),a="";a=e?e+"\u5206\u4eab\u53ef\u83b7\u5f97 "+r+" \u91d1\u5e01":"\u5206\u4eab\u53ef\u83b7\u5f97 "+r+" \u91d1\u5e01",d.default.alertPromptImg2("\u6bcf\u65e5\u5206\u4eab",a,"2d/ui/store/img_gold_big","\u53d6\u6d88","\u5206\u4eab",function(){t&&t()},function(){y.default.statisShareOpen(n,!1);var e=C.default.getShareDataRandom();f.default.openShare("",e.content||"","",(e.index+1).toString(),e.imgPath||"",JSON.stringify({viewName:n||""})),t&&t()})}},t.onMsgShareResult=function(e){var t=e,n=t.bSuccessful,r=!1,a="";if(n&&t.userData&&""!=t.userData)try{var i=JSON.parse(t.userData||"{}");i&&(r=i.bNoRewardShare,a=i.viewName)}catch(e){}if(y.default.statisShareResult(a,!1,n),n){if(d.default.showMsgTip("\u5206\u4eab\u6210\u529f"),this.getItemAmount(u.default.ITEM_ID_SHARE_COUNT)<=0||r)return;var s=Math.ceil(o.getBascRewardGold());o.addItemAmount(u.default.ITEM_ID_GOLD,s,"\u5206\u4eab\u6210\u529f"),d.default.addGotItemTip(u.default.ITEM_ID_GOLD,s,null),o.addItemAmount(u.default.ITEM_ID_SHARE_COUNT,-1,"\u5206\u4eab")}else d.default.showMsgTip("\u5206\u4eab\u5931\u8d25")},t.takeWxgzhReward=function(){this.isNeedAlertWxgzhReward=!1,this.isGetWxgzhReward=!0;return o.addItemAmount(u.default.ITEM_ID_GOLD,300,"\u5fae\u4fe1\u516c\u4f17\u53f7\u5956\u52b1"),this.saveRecord(),300},t.onMsgWxgzhEnterInit=function(e){this.isGetWxgzhReward||(this.isNeedAlertWxgzhReward=!0)},t.onMsgWxgzhEnterGame=function(e){if(!this.isGetWxgzhReward){var t=this.takeWxgzhReward();l.default.callLater(.5,function(){d.default.showMsgTip("\u5fae\u4fe1\u516c\u4f17\u53f7\u5956\u52b1 \u91d1\u5e01x"+t)})}},t.onMsgSdkShareVideoResult=function(e){if(e.bSuccessful){if(d.default.showMsgTip("\u5206\u4eab\u6210\u529f"),o.getItemAmount(u.default.ITEM_ID_VIDEO_SHARE_COUNT)>0){var t=Math.ceil(o.getBascRewardGold());o.addItemAmount(u.default.ITEM_ID_VIDEO_SHARE_COUNT,-1,"\u5206\u4eab\u6210\u529f"),o.addItemAmount(u.default.ITEM_ID_GOLD,t,"\u5206\u4eab\u6210\u529f"),d.default.addGotItemTip(u.default.ITEM_ID_GOLD,t,null)}}else d.default.showMsgTip("\u5206\u4eab\u5931\u8d25")},t.getItemAmountStr=function(e){var t=e.toString();return e>=1e9?t=Math.floor(e/10/1e3/1e3)/100+"km":e>=1e6?t=Math.floor(e/10/1e3)/100+"m":e>=1e3&&(t=Math.floor(e/10)/100+"k"),t},t.getOwnPartCount=function(){var e=0,t=s.default.getDb("cosmetic_part_db");for(var n in t)o.getItemAmount(parseInt(n))>0&&e++;return e},t.getUnownPartIds=function(){var e=[],t=s.default.getDb("cosmetic_part_db");for(var n in t)o.getItemAmount(parseInt(n))>0&&e.push(parseInt(n));return e},t.getCollectSuitProgress=function(e){var t=0,n=1,r=s.default.quietGet("suit_db",e);if(r){n=0;for(var a=r.displayIds||[],i=a.length||0,l=0;l<i;l++){var c=a[l];o.getItemAmount(c)>0&&t++,n++}n=Math.max(n,1)}return[t,n]},t.tryRandomBuyPart=function(e){var t=s.default.get("suit_db",e),n=this.getCollectSuitProgress(e),r=n[0],a=(n[1],[]),i=t.displayIds||[],l=!1;for(var d in i){var h=parseInt(i[d]);if(o.getItemAmount(h)<=0){var f=s.default.get("cosmetic_part_db",h),g=!0;f.unlockStageId&&!m.default.isStageUnlocked(f.unlockStageId)&&(g=!1),g?a.push(parseInt(i[d])):l=!0}}if(!a||a.length<=0)return l?{id:0,tip:S.default.getText("mgrPlayer.1")}:{id:0,tip:S.default.getText("mgrPlayer.2")};var _=(s.default.get("part_price_db",e,r)||{}).price||9999;return p.default.tryCostByItems([[u.default.ITEM_ID_GOLD,_]],"\u4e70\u90e8\u4ef6\u6d88\u8017")?{id:(c.default.randomGotArrayDatas(a,1)||[])[0],tip:"",price:_}:{id:0,tip:""}},t.receiveOfflineReward=function(){if(this.offlineRewardFlagedTime){var e=c.default.time()-this.offlineRewardFlagedTime;if(!((e=Math.min(e,28800))<1200)){cc.log("----passTime\u79d2=",e);var t=o.getBascRewardGold(),n=Math.floor(Math.floor(e/60)*t*.005);if(n&&!(n<=0))return this.offlineRewardFlagedTime=null,{amount:n,time:Math.floor(e/60)}}}},t.getFormatedTimeStr=function(e){e=Math.max(0,e);var t=Math.floor(e/3600),o=Math.floor(e%3600/60),n=Math.floor(e%60),r="";return t&&(r=ul.format("%02d:",t)),r+=ul.format("%02d:",o),r+=ul.format("%02d",n)},t.getBascRewardGold=function(){return o.getItemAmount(u.default.ITEM_ID_TURNOVER)},t.tryRewardSuit=function(e){if(this.isRewardedSuit(e))return{itemId:null,amount:null,tip:S.default.getText("mgrPlayer.3")};if(!this.isSuitPartAllCollected(e))return{itemId:null,amount:null,tip:S.default.getText("mgrPlayer.4")};var t=s.default.get("suit_db",e);return this.rewardedSuitIdDict[e]=!0,this.saveRecord(),{itemId:t.rewardItemId,amount:t.rewardItemAmount,tip:S.default.getText("mgrPlayer.5")}},t.isRewardedSuit=function(e){return!!this.rewardedSuitIdDict[e]},t.isSuitPartAllCollected=function(e){for(var t=s.default.get("suit_db",e),n=!0,r=0;r<t.displayIds.length;r++){var a=t.displayIds[r];if(o.getItemAmount(a)<=0){n=!1;break}}return n},t.hasSuitCanReward=function(){var e=s.default.getDb("suit_db");for(var t in e)if(!this.isRewardedSuit(t)&&this.isSuitPartAllCollected(t))return!0;return!1},t.hasSuitCanRewardByCategory=function(e){var t=s.default.getDb("suit_db");for(var o in t)if(!this.isRewardedSuit(o)&&t[o].category==e&&this.isSuitPartAllCollected(o))return!0;return!1},t.hasSuitCanRewardBySuitId=function(e){return!!s.default.get("suit_db",e)&&(!this.isRewardedSuit(e)&&!!this.isSuitPartAllCollected(e))},t._items={},t._playerName="",t._playerNameObj={},t._itemChangedAge=0,t._historyDisplayedGotItems={},t._historyGotItems={},t._historyUsedItems={},t._dailyGotItems={},t._dailyUsedItems={},t._historyDailyMaxGotItems={},t._historyDailyMaxUsedItems={},t._dailyRecoveredAmounts={},t._dailyBoughtShopIds={},t._lastDailyRefreshTime=null,t._recoverCostTimes={},t.hudItemNodePosDict={},t._trialingItems={},t._limitTimeOwnItemDict={},t.uid="",t.deviceCode="",t.lastReceiveOfflineRewardTime=0,t.offlineRewardFlagedTime=0,t.bTakedInstallShortCut=!1,t=o=r([b],t)}(a.default);o.default=R,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrCfg":"mgrCfg","./mgrChannel":"mgrChannel","./mgrGuide":"mgrGuide","./mgrI18n":"mgrI18n","./mgrOfflinePvp":"mgrOfflinePvp","./mgrPkMirror":"mgrPkMirror","./mgrRecord":"mgrRecord","./mgrSdk":"mgrSdk","./mgrShop":"mgrShop","./mgrStage":"mgrStage","./mgrStatics":"mgrStatics","./mgrTip":"mgrTip","./mgrWordFilter":"mgrWordFilter"}],mgrPool:[function(e,t,o){"use strict";cc._RF.push(t,"97f69CulKBN3pqAzZZQdVGA","mgrPool");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("../../ulframework/utils/PoolManager"),s=e("./mgrCfg"),l=e("../../ulframework/view/Spine"),c=e("../../ulframework/view/Particle"),u=e("./mgrDirector"),d=e("../../ulframework/view/AnimNode"),p=cc._decorator.ccclass,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.poolManager=new i.default,this._regsiterPoolConfig()},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t._regsiterPoolConfig=function(){this.poolManager.register("spine",function(e,t){return s.default.get("spine_db",e)?new l.default(e,t):(t&&t(e),null)},function(e){e instanceof l.default&&e.reset()},function(e){e instanceof l.default&&(e.stopAllActions(),e.unregisterEventCallback())},function(e){},100),this.poolManager.register("animNode",function(e,t){return s.default.get("anim_node_db",e)?new d.default(e,t):(t&&t(e),null)},function(e){e instanceof d.default&&e.reset()},function(e){e instanceof d.default&&(e.stopAllActions(),e.unregisterEventCallback())},function(e){},100),this.poolManager.register("particle",function(e,t){return s.default.get("particle_db",e)?new c.default(e,t):(t&&t(e),null)},function(e){e instanceof c.default&&e.reset()},function(e){},function(e){},100),this.poolManager.register("view",function(e,t){return t&&t(e),u.default.createView(e)},function(e){},function(e){},function(e){},100)},t.preload=function(e,t,o){var n=this;if(this.contain(e,t))o&&o(t);else{var r=null;r=this.poolManager.get(e,t,function(){r&&n.put(r),o&&o(t)})}},t.get=function(e,t,o){return this.poolManager.get(e,t,o)},t.put=function(e){this.poolManager.put(e)},t.clean=function(e,t){this.poolManager&&this.poolManager.clean(e,t)},t.contain=function(e,t){return this.poolManager.contain(e,t)},t=r([p],t)}(a.default);o.default=h,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/PoolManager":"PoolManager","../../ulframework/view/AnimNode":"AnimNode","../../ulframework/view/Particle":"Particle","../../ulframework/view/Spine":"Spine","./mgrCfg":"mgrCfg","./mgrDirector":"mgrDirector"}],mgrPvp:[function(e,t,o){"use strict";cc._RF.push(t,"3aef4N+o7pBzIeciuhRG8Vg","mgrPvp");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("../struct/sRankPlayer"),s=e("./mgrRecord"),l=e("../Const"),c=e("./mgrNetwork"),u=e("../../ulframework/utils/Tools"),d=e("./mgrPlayer"),p=e("./mgrAd"),h=e("../struct/sAvatar"),f=e("../../ulframework/utils/Base64"),g=e("./mgrI18n"),m=cc._decorator.ccclass,_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){this.loadRecord(),this.registerListeners({MSG_NETWORK_RESPONSE:this.onMsgNetworkResponse.bind(this),MSG_PVP_LIKE_SUCCESS:this.onMsgPvpLikeSuccess.bind(this)})},t.loadRecord=function(){var e=s.default.getData("pvp")||{};this.rewardCount=e.rewardCount||0,this.serverSubject=e.serverSubject,this.serverPlayersDict=e.serverPlayersDict||{},this.lastServerSubject=e.lastServerSubject,this.lastServerPlayersDict=e.lastServerPlayersDict||{}},t.saveRecord=function(){var e={rewardCount:this.rewardCount,serverSubject:this.serverSubject,serverPlayersDict:this.serverPlayersDict,lastServerSubject:this.lastServerSubject,lastServerPlayersDict:this.lastServerPlayersDict};s.default.setData("pvp",e)},t.requestLikeList=function(e){void 0===e&&(e=1);var t=this.serverPlayerCount||0;if(t<=1)this.sendMsg("MSG_PVP_NO_DATA");else{var o=u.default.randomGetListArr(1,t,e),n=[];for(var r in o)n.push(ul.format("%s",o[r]));u.default.random(t);var a={info:{rankarry:n,rankid:l.default.SERVER_RANK_ID.toString(),sorttype:"REVRANGE"}};c.default.send("/get/getPlayerInoByRankid",a)}},t.requestCommonData=function(e,t){if(null==this.serverPlayerCount||t){var o="/get/getUserNumInRank",n={info:{rankidarry:[l.default.SERVER_RANK_ID.toString()]}};c.default.send(o,n,e)}if(null==this.selfPvpPlayer||t){o="/get/getPlayerInfoByUid",n={info:{uidarry:[d.default.getUid()],rankid:l.default.SERVER_RANK_ID.toString(),sorttype:"REVRANGE"}};c.default.send(o,n,e)}if(null==this.serverSubject||t){o="/get/getRankName",n={info:{rankidarry:[l.default.SERVER_RANK_ID.toString()]}};c.default.send(o,n,e)}},t.requestList=function(e,t){for(var o=[],n=e;n<=t;n++)o.push(n.toString());var r={info:{rankarry:o,rankid:l.default.SERVER_RANK_ID.toString(),sorttype:"REVRANGE"}};c.default.send("/get/getPlayerInoByRankid",r)},t.requestLike=function(e){var t={info:{uidarry:[e],scorearry:["1"],rankid:l.default.SERVER_RANK_ID.toString()}};c.default.send("/set/modifyScoreByArry",t,!0)},t.requestUpload=function(e,t,o){o=o||d.default.getName();var n={info:{uidarray:[t=t||d.default.getUid()],dataarray:[this._packPlayerData(o,e)],scorearray:["0"],rankid:l.default.SERVER_RANK_ID.toString()}};c.default.send("/set/setPlayerInfoWithScoreArray",n)},t.getLastSeasonPlayerDatas=function(){if(null!=this.lastServerPlayersDict){var e=this.lastServerPlayersDict,t=[];for(var o in e){var n=e[o];n&&t.push(n)}return t=u.default.sortArrayByField(t,"rank")}},t.autoUploadRobotAvatar=function(){var e=this.robotDatas||[];for(var t in e){var o=e[t],n=o.uid,r=o.name;if(n&&r){var a=new h.default;a._debugFillRandom(),this.requestUpload(a,n,r)}}e&&0!=e.length&&this.requestCommonData(!0,!0)},t.onMsgNetworkResponse=function(e){var t=e,o=t.requestData,n=t.responseData;if(-1!=n.code){var r=o.cmd;if("/get/getUserNumInRank"==r){var a=parseInt(n.msg[l.default.SERVER_RANK_ID.toString()])||0;this.serverPlayerCount=a,this.bGotServerPlayerCount=!0,this.sendMsg("MSG_PVP_PLAYER_COUNT_CHANGED")}else if("/get/getRankName"==r){var s=n.msg[l.default.SERVER_RANK_ID.toString()]||"unknown";if((!this.serverSubject||s!=this.serverSubject)&&(this.lastServerSubject=this.serverSubject,this.lastServerPlayersDict=this.serverPlayersDict,this.serverSubject=null,this.serverPlayersDict={},this.bGotServerPlayerCount&&(!this.serverPlayerCount||this.serverPlayerCount<=this.MAX_ROBOT_NUM))){this.robotDatas=[];for(var c=1;c<=this.MAX_ROBOT_NUM;++c)this.robotDatas.push({uid:ul.format("%s%d","robot_uid_",c),name:d.default.createRandomName(g.default.getLanguage())});this.autoUploadRobotAvatar()}this.serverSubject=s,this.saveRecord(),this.sendMsg("MSG_PVP_SUBJECT_CHANGED")}else if("/get/getPlayerInfoByUid"==r){var p=d.default.getUid();if(T=n.msg[p])if(R=JSON.parse(T)){var h=R.data.toString(),f=R.rank.toString(),m=R.score.toString(),_=R.stageId,v=this._unpackPlayerData(h),y=v[0],C=v[1],S=new i.default(p,f,m,y,C,_,null);this.selfPvpPlayer=S,this.sendMsg("MSG_PVP_SELF_DATA_CHANGED")}else;else;}else if("/get/getPlayerInoByRankid"==r){var b=[];for(var f in n.msg)if(n.msg.hasOwnProperty(f)){var R,T=n.msg[f];if(R=JSON.parse(T)){if(""!=R.data){var A=R.data.toString(),D=(p=R.uid.toString(),m=R.score.toString(),_=R.stageId,this._unpackPlayerData(A));y=D[0],C=D[1],S=new i.default(p,parseInt(f),m,y,C,_,null);b.push(S)}}else;}this.saveRecord(),b=u.default.sortArrayByField(b,"rank"),this.sendMsg("MSG_PVP_RESPONSE_PLAYER_FROM_RANK",{players:b,requestData:o})}else if("/set/modifyScoreByArry"==r)this.selfPvpPlayer=null,this.sendMsg("MSG_PVP_LIKE_SUCCESS");else if("/set/setPlayerInfoWithScoreArray"==r){p=d.default.getUid();o&&o.info&&o.info.uidarray&&o.info.uidarray[0]==p&&(this.selfPvpPlayer=null,this.sendMsg("MSG_PVP_UPLOAD_SUCCESS"))}}},t.onMsgPvpLikeSuccess=function(e){},t.onChoosedHandler=function(){this.addLikeCount(-1),this.rewardCount++,this.saveRecord()},t._packPlayerData=function(e,t){var o=t.serializeToText();return f.default.encodeForUrl(e)+"|"+o},t._unpackPlayerData=function(e){var t=e.indexOf("|");if(null==t)return[g.default.getText("mgrPvp.1"),""];var o=e.substring(0,t);return[f.default.decodeForUrl(o)||g.default.getText("mgrPvp.1"),e.substring(t+1,e.length)]},t.getBadgeCount=function(){var e=this.getLikeCount()||[0,1],t=e[0];e[1];return t+(this.getAdLikeCount()||0)},t.getLikeCount=function(){return[d.default.getItemAmount(l.default.ITEM_ID_PVP_LIKE_COUNT),d.default.getRecoverMaxAmount(l.default.ITEM_ID_PVP_LIKE_COUNT)]},t.getAdLikeCount=function(){return p.default.getAdEventRemainCount("video_pvp_like_time")},t.addLikeCount=function(e){d.default.addItemAmount(l.default.ITEM_ID_PVP_LIKE_COUNT,e,"\u70b9\u8d5e"),this.saveRecord()},t.rewardCount=0,t.serverPlayerCount=null,t.serverSubject=null,t.selfPvpPlayer=null,t.serverPlayers=[],t.serverPlayersDict={},t.lastServerSubject=null,t.lastServerPlayersDict={},t.MAX_ROBOT_NUM=10,t=r([m],t)}(a.default);o.default=_,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Base64":"Base64","../../ulframework/utils/Tools":"Tools","../Const":"Const","../struct/sAvatar":"sAvatar","../struct/sRankPlayer":"sRankPlayer","./mgrAd":"mgrAd","./mgrI18n":"mgrI18n","./mgrNetwork":"mgrNetwork","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord"}],mgrRandomEvent:[function(e,t,o){"use strict";cc._RF.push(t,"83660RxkWJGdr9YbfmLCt+P","mgrRandomEvent");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("./mgrRecord"),s=cc._decorator.ccclass,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({})},t.loadRecord=function(){e.loadRecord.call(this);var t=i.default.getData("random_event")||{};this.lastRandomEventId=t.lastRandomEventId||0},t.saveRecord=function(){e.saveRecord.call(this);var t={lastRandomEventId:this.lastRandomEventId};i.default.setData("random_event",t)},t.onTimerLoop=function(){},t.tryTriggerRandomEvent=function(){},t.getTriggeringEventId=function(){},t.getTriggeringEventTemplate=function(){},t.lastRandomEventId=0,t.lastRandomEventState=0,t=r([s],t)}(a.default);o.default=l,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","./mgrRecord":"mgrRecord"}],mgrRecord:[function(e,t,o){"use strict";cc._RF.push(t,"b01ccp08MRNpa9et5mKMFwU","mgrRecord");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("../../ulframework/utils/Timer"),s=cc._decorator.ccclass,l="record_game70001",c="__version__",u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this._readRecord(),i.default.callLoop(.1,this.onTimerSpan.bind(this),!0)},t.onTimerSpan=function(e){this.bNeedFlush&&(this.bNeedFlush=!1,this._writeRecord())},t._readRecord=function(e){if(e||(e=cc.sys.localStorage.getItem(l)),e){var t=JSON.parse(e);t&&1==t[c]?this.record=t:this.resetRecord()}else this.resetRecord()},t._writeRecord=function(){var e=JSON.stringify(this.record);cc.sys.localStorage.setItem(l,e)},t._requestFlush=function(){this._bDebugBanWrite||(this.bNeedFlush=!0)},t._setDebugBanWrite=function(e){this._bDebugBanWrite=e},t.getData=function(e){return this.record[e]},t.setData=function(e,t){this.record[e]=t,this._requestFlush()},t.resetRecord=function(){this.record={},this.record[c]=1,this._requestFlush(),this.sendMsg("MSG_RECORD_RESET")},t.record={},t.bNeedFlush=!1,t._bDebugBanWrite=!1,t=r([s],t)}(a.default);o.default=u,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer"}],mgrSdk:[function(e,t,o){"use strict";cc._RF.push(t,"467e7ztU4NEF4z8bAbZNEzP","mgrSdk");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("../Const"),s=e("./mgrNative"),l=e("./mgrTip"),c=e("./mgrPlayer"),u=e("./mgrCop"),d=e("./mgrChannel"),p=e("./mgrShop"),h=e("./mgrSound"),f=e("../../ulframework/utils/Timer"),g=e("./mgrVideoRecorder"),m=e("./mgrI18n"),_=cc._decorator.ccclass,v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return n(t,e),o=t,t.registerCmdCallback=function(e,t){this.cmdCallbacks[e]=t},t.unregisterCmdCallback=function(e){this.cmdCallbacks[e]=null},t.dispatchCmd=function(e,t){var o=this.cmdCallbacks[e];o?o(t):cc.warn("mgrSdk: dispatchCmd: "+e+",can't find callback!")},t.registerAllCmds=function(){this.registerCmdCallback("/c/channelInfoResult",this.sdkback_channelInfoResult.bind(this)),this.registerCmdCallback("/c/payResult",this.sdkback_payResult.bind(this)),this.registerCmdCallback("/c/prePayResult",this.sdkback_prePayResult.bind(this)),this.registerCmdCallback("/c/shareResult",this.sdkback_shareResult.bind(this)),this.registerCmdCallback("/c/lifeCycle",this.sdkback_lifeCycle.bind(this)),this.registerCmdCallback("/c/copInfoResult",this.sdkback_copInfoResult.bind(this)),this.registerCmdCallback("/c/megadataServer",this.sdkback_megadataServer.bind(this)),this.registerCmdCallback("/c/useCdkey",this.sdkback_useCdkey.bind(this)),this.registerCmdCallback("/c/openAdvResult",this.sdkback_openAdvResult.bind(this)),this.registerCmdCallback("/c/openNativeAdvResult",this.sdkback_openNativeAdvResult.bind(this)),this.registerCmdCallback("/c/clickNativeAdvResult",this.sdkback_clickNativeAdvResult.bind(this)),this.registerCmdCallback("/c/clickAdvResult",this.sdkback_clickAdvResult.bind(this)),this.registerCmdCallback("/c/closeAdvResult",this.sdkback_closeAdvResult.bind(this)),this.registerCmdCallback("/c/closeNativeAdvResult",this.sdkback_closeNativeAdvResult.bind(this)),this.registerCmdCallback("/c/userLoginResult",this.sdkback_userLoginResult.bind(this)),this.registerCmdCallback("/c/userLoginReportResult",this.sdkback_userLoginReportResult.bind(this)),this.registerCmdCallback("/c/userIsLoginResult",this.sdkback_userIsLoginResult.bind(this)),this.registerCmdCallback("/c/loginOutResult",this.sdkback_loginOutResult.bind(this)),this.registerCmdCallback("/c/advValidCountResult",this.sdkback_advValidCountResult.bind(this)),this.registerCmdCallback("/c/saveRankDataResult",this.sdkback_saveRankDataResult.bind(this)),this.registerCmdCallback("/c/getRankDataResult",this.sdkback_getRankDataResult.bind(this)),this.registerCmdCallback("/c/recorderGameVideoResult",this.sdkback_recorderGameVideoResult.bind(this)),this.registerCmdCallback("/c/shareGameVideoResult",this.sdkback_shareGameVideoResult.bind(this)),this.registerCmdCallback("/c/jumpOtherGameResult",this.sdkback_jumpOtherGameResult.bind(this)),this.registerCmdCallback("/c/extraBonus",this.sdkback_extraBonus.bind(this)),this.registerCmdCallback("/c/openRecommendationResult",this.sdkback_openRecommendationResult.bind(this)),this.registerCmdCallback("/c/closeRecommendationResult",this.sdkback_closeRecommendationResult.bind(this)),this.registerCmdCallback("/c/saveUserDataResult",this.sdkback_saveUserDataResult.bind(this)),this.registerCmdCallback("/c/getUserDataResult",this.sdkback_getUserDataResult.bind(this)),this.registerCmdCallback("/c/addGameToMyFavoriteResult",this.sdkback_addGameToMyFavoriteResult.bind(this)),this.registerCmdCallback("/c/getUserInfoMsgResult",this.sdkback_getUserInfoMsgResult.bind(this)),this.registerCmdCallback("/c/appShareResult",this.sdkback_appShareResult.bind(this)),this.registerCmdCallback("/c/installShortcutResult",this.sdkback_installShortcutResult.bind(this)),this.registerCmdCallback("/c/getShortcutStateResult",this.sdkback_getShortcutStateResult.bind(this)),this.registerCmdCallback("/c/setClipboardDataResult",this.sdkback_setClipboardDataResult.bind(this)),this.registerCmdCallback("/c/getClipboardDataResult",this.sdkback_getClipboardDataResult.bind(this)),this.registerCmdCallback("/c/pauseSound",this.sdkback_pauseSound.bind(this)),this.registerCmdCallback("/c/resumeSound",this.sdkback_resumeSound.bind(this)),this.registerCmdCallback("/c/openJumpResult",this.sdkback_openJumpResult.bind(this)),this.registerCmdCallback("/c/jumpOtherGameRewardResult",this.sdkback_jumpOtherGameRewardResult.bind(this))},t.onLoad=function(){e.onLoad.call(this),this.registerAllCmds(),this.registerListeners({MSG_NATIVE_CALLBACK:this.onMsgNativeCallback,MSG_SDK_LIFE_CYCLE:this.onMsgSdkLifeCycle}),this.registerKeyboardListener(),f.default.callLoop(1,this.onTimerLoop.bind(this),!0)},t.onTimerLoop=function(){this.bRecordVideo&&(this.lastRecordVideoTime+=1)},t.onLoadingComplete=function(){console.log("----------mgrsdk.onLoadingComplete"),this.setVersion(2)},t.getCopNumberValueByKey=function(e){return u.default.getNumberValue(e)},t.getCopByKey=function(e){return u.default.get(e)},t.registerKeyboardListener=function(){cc.sys.isBrowser?cc.warn("mgrSdk.registerKeyboardListener browser can't register."):cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onSystemKeyDown,this)},t.onSystemKeyDown=function(e){var t=e.keyCode;if(cc.log("mgrSdk.onSystemKeyDwon",t),t==cc.macro.KEY.back||t==cc.macro.KEY.escape){if(s.default._temp_isH5())return;this.onClickBack()}},t.onMsgSdkLifeCycle=function(e){if("onBackPressed"==e.lifeCycle){if(s.default._temp_isH5())return;this.onClickBack()}},t.onClickBack=function(){var e=this;if(d.default._isThirdExit)this.thirdExitGame();else{if(this.__back_prompt_dialog)return this.__back_prompt_dialog.closeDialog(),void(this.__back_prompt_dialog=null);var t=l.default.alertPrompt2(m.default.getText("mgrSdk.1"),m.default.getText("mgrSdk.2"),m.default.getText("mgrSdk.3"),m.default.getText("mgrSdk.4"),function(){e.__back_prompt_dialog&&(e.__back_prompt_dialog.closeDialog(),e.__back_prompt_dialog=null)},function(){cc.game.end()});this.__back_prompt_dialog=t}},t.sendMsgToSdk=function(e){(this.bInit||"/c/setVersion"==e.cmd)&&s.default.callNative("sendMsgToSdk",e)},t.onMsgNativeCallback=function(e){var t=e.responseData,o=t.cmd,n=t.data||{};console.log("mgrSdk.onMsgNativeCallback",o,n),this.dispatchCmd(o,n)},t.sdkback_channelInfoResult=function(e){console.info("mgrSdk:  copInfo",e.copInfo),u.default.onReceiveSdkCop(e.copInfo),ul.dump(e.copInfo),d.default._cardType=e.cardType,d.default._isThirdExit=e.isThirdExit,d.default._isAbout=e.isAbout,d.default._isMoreGame=e.isMoreGame,d.default._isULMoreGame=e.isULMoreGame,d.default._isShowUrlAdIcon=e.isShowUrlAdIcon,i.default.IS_SHOW_MORE_WONDERFUL=e.isJumpLeisureEnabled,null==e.isPayEnabled?d.default._isPayEnabled=!0:d.default._isPayEnabled=e.isPayEnabled,d.default._isShareEnabled=e.isShareEnabled,d.default._isUseSdkRank=e.isUseSdkRank,d.default._isSupportRecordShare=e.isSupportRecordShare,d.default._isSupportClipboardData=e.isSupportClipboardData,d.default._isSupportFindMinigames=e.isSupportFindMinigames,d.default._isSupportRecommendationBtn=e.isSupportRecommendationBtn,d.default._is4399Watermark=e.is4399Watermark,d.default._isSupportChannelMoreGameBox=e.isSupportChannelMoreGameBox,d.default.findmeImageUrl=e.findMinigamesImageUrl,d.default.setInterPushConfig(e.jumpInfo||[]),p.default.setSdkPayInfo(e.payInfo),c.default._setDeviceCode(e.uuid),i.default.sdcardPath=e.sdcardPath,i.default.packageVersion=e.packageVersion,i.default.copChannelId=e.copChannelId,i.default.ulsdkVersion=e.ulsdkVersion,i.default.cdkChannelId=e.cdkChannelId,d.default.setChannelName(e.appName),m.default.setSdkLanguage(e.gameLanguage),this.bInit=!0,this.sendMsg("MSG_SDK_CHANNEL_INFO_RESULT")},t.sdkback_payResult=function(e){var t=e.code,o=e.msg,n=e.payId,r=e.userData,a=1==t;l.default.closeWaitingDialog(),l.default.showMsgTip(o),this.sendMsg("MSG_SDK_PAY_RESULT",{payId:n,userData:r,code:t,msg:o,bSuccessful:a})},t.sdkback_prePayResult=function(e){var t=e.code,o=e.msg,n=e.payId,r=e.userData,a=1==t;this.sendMsg("MSG_SDK_PRE_PAY_RESULT",{code:t,msg:o,payId:n,userData:r,bSuccessful:a})},t.sdkback_shareResult=function(e){var t=e.code,o=e.msg,n=1==t;this.sendMsg("MSG_SDK_SHARE_RESULT",{bSuccessful:n,code:t,msg:o})},t.sdkback_lifeCycle=function(e){var t=e.lifeCycle||"";this.sendMsg("MSG_SDK_LIFE_CYCLE",{lifeCycle:t})},t.sdkback_copInfoResult=function(e){var t=e.copInfo;u.default.onReceiveSdkCop(t)},t.sdkback_megadataServer=function(e){var t=e.code;e.message;0==t?cc.log("\u5927\u6570\u636e\u7edf\u8ba1: \u5931\u8d25"):1==t&&cc.log("\u5927\u6570\u636e\u7edf\u8ba1: \u6210\u529f")},t.sdkback_useCdkey=function(e){var t=e.code,o=e.data||[],n=e.message;if(l.default.closeWaitingDialog(),1==t){l.default.showMsgTip(n);for(var r=[],a=0;a<o.length;a++){var i=o[a],s=i.goodsid,u=i.count;c.default.addItemAmount(s,u,"cdk"),r.push({itemId:s,amount:u})}this.sendMsg("MSG_SDK_USE_CDK_SUCCESSFUL",{items:r})}else l.default.showMsgTip(n)},t.sdkback_openAdvResult=function(e){this.sendMsg("MSG_SDK_OPEN_ADV_RESULT",e)},t.sdkback_openNativeAdvResult=function(e){this.sendMsg("MSG_SDK_OPEN_NATIVE_ADV_RESULT",e)},t.sdkback_clickNativeAdvResult=function(e){this.sendMsg("MSG_SDK_CLICK_NATIVE_ADV_RESULT",e)},t.sdkback_clickAdvResult=function(e){this.sendMsg("MSG_SDK_CLICK_ADV_RESULT",e)},t.sdkback_closeAdvResult=function(e){this.sendMsg("MSG_SDK_ADV_CLOSE_RESULT",e)},t.sdkback_closeNativeAdvResult=function(e){this.sendMsg("MSG_SDK_CLOSE_NATIVE_ADV_RESULT",e)},t.sdkback_userLoginResult=function(e){var t=e.code,o=e.userData,n=1==t;this.sendMsg("MSG_SDK_USER_LOGIN_RESULT",{bSuccessful:n,userData:o,code:t})},t.sdkback_userLoginReportResult=function(e){var t=e.code,o=e.userData,n=1==t;this.sendMsg("MSG_SDK_USER_LOGIN_REPORT_RESULT",{bSuccessful:n,userData:o,code:t})},t.sdkback_userIsLoginResult=function(e){var t=!1;1==e.code?(console.log("\u767b\u5f55\u67e5\u8be2: \u5df2\u767b\u5f55"),t=!0):(console.log("\u767b\u5f55\u67e5\u8be2: \u672a\u767b\u5f55"),t=!1),this.sendMsg("MSG_SDK_USER_IS_LOGIN_RESULT",{bLogin:t})},t.sdkback_loginOutResult=function(e){var t=e.code,o=!1;1==t?(console.log("\u767b\u51fa\u6210\u529f"),o=!0):0==t&&(console.log("\u767b\u51fa\u5931\u8d25"),o=!1),this.sendMsg("MSG_SDK_USER_LOGIN_OUT_RESULT",{bSuccessful:o})},t.sdkback_advValidCountResult=function(e){this.sendMsg("MSG_SDK_ADV_VALID_COUNT",e)},t.sdkback_saveRankDataResult=function(e){var t=e.code,o=e.msg,n=!1;1==t?(n=!0,console.log("\u4e0a\u4f20\u6392\u884c\u699c\u6570\u636e\u6210\u529f")):(n=!1,console.log("\u4e0a\u4f20\u6392\u884c\u699c\u6570\u636e\u5931\u8d25")),this.sendMsg("MSG_SDK_SAVE_RANK_DATA_RESUTL",{bSuccessful:n,msg:o})},t.sdkback_getRankDataResult=function(e){var t=!1;1==e.code?(console.log("\u83b7\u53d6\u6392\u884c\u699c\u6570\u636e\u6210\u529f!"),t=!0):(console.log("\u83b7\u53d6\u6392\u884c\u699c\u6570\u636e\u5931\u8d25!"),t=!1),this.sendMsg("MSG_SDK_GET_RANK_DATA_RESULT",{bSuccessful:t})},t.sdkback_recorderGameVideoResult=function(e){var t=e.code,o=!1,n=e.msg,r=e.action;1==t?(o=!0,console.log("\u89c6\u9891\u5f55\u5236\u52a8\u4f5c\u6210\u529f:"+r),g.default.recordStatus=g.default.RECORDING):2==t?(o=!0,console.log("\u89c6\u9891\u5f55\u5236\u52a8\u4f5c\u6210\u529fpause:"+r)):3==t?(o=!0,console.log("\u89c6\u9891\u5f55\u5236\u52a8\u4f5c\u6210\u529fresume:"+r),g.default.recordStatus=g.default.RECORDING):4==t?(o=!0,console.log("\u89c6\u9891\u5f55\u5236\u52a8\u4f5c\u6210\u529fstop:"+r),g.default.setRecordStatus(g.default.RECORD_FINISH)):(console.log("\u89c6\u9891\u5f55\u5236\u52a8\u4f5c\u5931\u8d25:"+r),o=!1,g.default.setRecordStatus(g.default.PRE_RECORD)),this.sendMsg("MSG_SDK_RECORD_GAME_VIDEO_RESULT",{bSuccessful:o,msg:n,action:r})},t.sdkback_shareGameVideoResult=function(e){var t=e.code,o=e.msg,n=e.userData,r=!1;1==t?(console.log("\u5f55\u5c4f\u5206\u4eab\u6210\u529f!"),r=!0):console.log("\u5f55\u5c4f\u5206\u4eab\u5931\u8d25!"),g.default.setRecordStatus(g.default.PRE_RECORD),this.sendMsg("MSG_SDK_SHARE_VIDEO_RESULT",{msg:o,userData:n,bSuccessful:r})},t.sdkback_openJumpResult=function(e){var t=e.jumpInfo,o=e.code,n=e.msg,r=e.type,a=e.userData;1==o?"reward"==r?(console.info("\u6fc0\u52b1\u4e92\u63a8\u6570\u636e\u8bf7\u6c42\u6210\u529f!"),this.sendMsg("MSG_SDK_OPEN_JUMP_RESULT",{jumpInfo:t,type:r,msg:n,userData:a})):console.info("\u4e0d\u662f\u6fc0\u52b1\u4e92\u63a8\u6570\u636e!"):console.info("\u6fc0\u52b1\u4e92\u63a8\u6570\u636e\u8bf7\u6c42\u5931\u8d25!")},t.sdkback_jumpOtherGameRewardResult=function(e){var t=e.code,o=e.msg,n=e.userData,r=e.rewards,a=!1;1==t?(console.info("\u6fc0\u52b1\u4e92\u63a8\u8df3\u8f6c\u6210\u529f!"),a=!0):console.info("\u6fc0\u52b1\u4e92\u63a8\u8df3\u8f6c\u5931\u8d25!"),this.sendMsg("MSG_SDK_JUMP_OTHER_GAME_REWARD_RESULT",{bSuccessful:a,msg:o,userData:n,rewards:r})},t.sdkback_jumpOtherGameResult=function(e){var t=e.code,o=e.msg,n=e.userData,r=!1;1==t?(console.log("\u8df3\u8f6c\u5176\u4ed6\u6e38\u620f\u6210\u529f!"),r=!0):console.log("\u8df3\u8f6c\u5176\u4ed6\u6e38\u620f\u5931\u8d25!"),this.sendMsg("MSG_SDK_JUMP_OTHER_GAME_RESULT",{bSuccessful:r,msg:o,userData:n})},t.sdkback_extraBonus=function(e){var t=e.code,o=e.msg,n=1==e.isInitGame;this.sendMsg("MSG_SDK_WX_GZH_ENTER",{msg:o,code:t,bInit:n})},t.sdkback_openRecommendationResult=function(e){var t=e.code,o=e.msg,n=!1;1==t?(console.log("\u5f00\u542f\u4ea4\u53c9\u63a8\u8350\u6210\u529f!"),n=!0):console.log("\u5f00\u542f\u4ea4\u53c9\u63a8\u8350\u5931\u8d25!"),this.sendMsg("MSG_SDK_OPEN_RECOMMEND_RESULT",{bSuccessful:n,msg:o})},t.sdkback_closeRecommendationResult=function(e){var t=e.code,o=e.msg,n=!1;n=1==t,this.sendMsg("MSG_SDK_CLOSE_RECOMEND_RESULT",{code:t,bSuccessful:n,msg:o})},t.sdkback_saveUserDataResult=function(e){var t=e.code,o=e.msg,n=!1;n=1==t,this.sendMsg("MSG_SDK_SAVE_USER_DATA_RESULT",{code:t,bSuccessful:n,msg:o})},t.sdkback_getUserDataResult=function(e){var t=e.code,o=e.msg,n=e.userData,r=1==t;this.sendMsg("MSG_SDK_GET_USER_DATA_RESULT",{code:t,bSuccessful:r,msg:o,storageData:n})},t.sdkback_addGameToMyFavoriteResult=function(e){var t=e.code,o=e.userData,n=e.msg,r=1==t;this.sendMsg("MSG_SDK_ADD_GAME_TO_MY_FAVORITE_RESULT",{code:t,bSuccessful:r,userData:o,msg:n})},t.sdkback_getUserInfoMsgResult=function(e){var t=e.code,o=e.msg,n=1==t;this.sendMsg("MSG_SDK_GET_USER_INFO_MSG_RESULT",{code:t,bSuccessful:n,msg:o})},t.sdkback_appShareResult=function(e){var t=e.code,o=e.msg,n=1==t;this.sendMsg("MSG_SDK_APP_SHARE_RESULT",{code:t,msg:o,bSuccessful:n})},t.sdkback_installShortcutResult=function(e){var t=e.code,o=1==t,n=e.msg,r=e.userData;this.sendMsg("MSG_SDK_INSTALL_SHORTCUT_RESULT",{code:t,bSuccessful:o,msg:n,userData:r})},t.sdkback_getShortcutStateResult=function(e){e.code;var t=e.state,o=!!e.bHasPrompt,n=e.userData;this.sendMsg("MSG_SDK_GET_SHORTCUT_STATE_RESULT",{state:t,bHasPrompt:o,userData:n})},t.sdkback_setClipboardDataResult=function(e){var t=e.code,o=1==t,n=e.msg,r=e.clipboardData,a=e.userData;this.sendMsg("MSG_SDK_SET_CLIPBOARD_DATA_RESULT",{code:t,msg:n,bSuccessful:o,clipboardData:r,userData:a})},t.sdkback_getClipboardDataResult=function(e){var t=e.code,o=1==t,n=e.msg,r=e.clipboardData,a=e.userData;this.sendMsg("MSG_SDK_GET_CLIPBOARD_DATA_RESULT",{code:t,bSuccessful:o,msg:n,clipboardData:r,userData:a})},t.sdkback_pauseSound=function(e){h.default.pauseSound("sdk")},t.sdkback_resumeSound=function(e){h.default.resumeSound("sdk")},t.setVersion=function(e){this.sendMsgToSdk({cmd:"/c/setVersion",data:e})},t.openMoreGame=function(){this.sendMsgToSdk({cmd:"/c/openMoreGame"})},t.openULMoreGame=function(){this.sendMsgToSdk({cmd:"/c/openUlMoreGame"})},t.openChannelMoreGameBox=function(){console.log("openChannelMoreGameBox..."),this.sendMsgToSdk({cmd:"/c/openChannelMoreGameBox"})},t.openPay=function(e,t){void 0===t&&(t="{}"),l.default.isWaitingDialogOpened()?l.default.showMsgTip("\u6709\u5546\u54c1\u6b63\u5728\u652f\u4ed8\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u8d2d\u4e70"):(l.default.openWaitingDialog("\u63d0\u793a","\u652f\u4ed8\u4e2d..."),this.sendMsgToSdk({cmd:"/c/openPay",data:{payId:e,userData:t}}))},t.openShare=function(e,t,o,n,r,a){void 0===n&&(n="1"),void 0===a&&(a=""),this.DEBUG&&console.info("mgrSdk:openAdH5",e,t,o,r),this.sendMsgToSdk({cmd:"/c/openShare",data:{title:e,content:t,url:o,imagePath:r,userData:a,queryMsg:n}})},t.callPhone=function(e){this.sendMsgToSdk({cmd:"/c/callPhone",data:{phoneNum:e}})},t.ulWebView=function(e){this.sendMsgToSdk({cmd:"/c/ulWebView",data:{url:e}})},t.openMoreWonderful=function(){this.sendMsgToSdk({cmd:"/c/jumpLeisureSubject",data:{}})},t.thirdExitGame=function(){this.sendMsgToSdk({cmd:"/c/exitGame",data:{}})},t.megadataServer=function(e){this.sendMsgToSdk({cmd:"/c/megadataServer",data:e})},t.useCdk=function(e){console.log("mgrSdk useCdk cdk: ",e),l.default.isWaitingDialogOpened()?l.default.showMsgTip("\u9886\u53d6\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u9886\u53d6"):(l.default.openWaitingDialog("\u63d0\u793a","\u9886\u53d6\u4e2d..."),this.sendMsgToSdk({cmd:"/c/useCdkey",data:{userId:c.default.getUid(),cdkStr:e,channelId:0}}))},t.openAdv=function(e,t,o){void 0===t&&(t="{}"),this.sendMsgToSdk({cmd:"/c/openAdv",data:{advId:e,userData:t,tag:o}})},t.clickNativeAdv=function(e,t,o){void 0===t&&(t="{}"),this.sendMsgToSdk({cmd:"/c/clickNativeAdv",data:{advId:e,userData:t,tag:o}})},t.closeAdv=function(e,t){void 0===t&&(t="{}"),this.sendMsgToSdk({cmd:"/c/closeAdv",data:{advId:e,userData:t}})},t.closeNativeAdv=function(e,t,o){void 0===t&&(t="{}");var n=o?1:0;this.sendMsgToSdk({cmd:"/c/closeNativeAdv",data:{advId:e,closeType:n,userData:t}})},t.userLogin=function(e){void 0===e&&(e="{}"),console.log("mgrsdk userLogin"),o.sendMsgToSdk({cmd:"/c/userLogin"})},t.userLoginReport=function(e,t,n){o.sendMsgToSdk({cmd:"/c/userLoginReport",data:{playerLevel:e,coin:t,userData:n}})},t.userIsLogin=function(){o.sendMsgToSdk({cmd:"/c/userIsLogin"})},t.loginOut=function(){o.sendMsgToSdk({cmd:"/c/loginOut"})},t.saveRankData=function(e,t,n,r,a){cc.log("saveRankData===",e,t,n,r,a),o.sendMsgToSdk({cmd:"/c/saveRankData",data:{startTime:e,endTime:t,rankName:n,score:r,order:a}})},t.getRankListSdk=function(e,t,n,r){console.log("getRankListSdk"),o.sendMsgToSdk({cmd:"/c/getRankData",data:{dataNum:e,rankName:t,order:n,rankType:r}})},t.recordGameVideo=function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=60),console.log("mgrsdk recordGameVidoe"),o.sendMsgToSdk({cmd:"/c/recorderGameVideo",data:{action:e,isRecordVoice:t,durationTime:n}})},t.shareGameVideo=function(e,t,n,r){void 0===e&&(e=""),void 0===t&&(t="\u4f60\u7684\u4e13\u5c5e\u53f6\u7f57\u4e3d\u5a03\u5a03\u5e97\u5f00\u5e97\u5566\uff01"),void 0===r&&(r="{}"),console.log("mgrsdk shareGameVideo"),o.sendMsgToSdk({cmd:"/c/shareGameVideo",data:{title:e,content:t,imagePath:n,userData:r}})},t.openJump=function(e,t,o){void 0===o&&(o=0),console.info("mgrSdk openJump"),this.sendMsgToSdk({cmd:"/c/openJump",data:{gameIndex:e,type:t,count:o}})},t.jumpOtherGame=function(e,t,o){void 0===o&&(o="{}"),console.log("mgrSdk jumpOtherGame"),this.sendMsgToSdk({cmd:"/c/jumpOtherGame",data:{gameIndex:e,type:t,userData:o}})},t.openCrossRecommend=function(e,t,o){void 0===o&&(o=0),console.log("mgrSdk openCrossRecommend"),this.sendMsgToSdk({cmd:"/c/openRecommendation",data:{typeId:o,style:{left:e,top:t}}})},t.closeCrossRecommend=function(){console.log("mgrSdk closeCrossRecommend"),this.sendMsgToSdk({cmd:"/c/closeRecommendation",data:null})},t.saveServerRecord=function(e){console.log("mgrSdk saveServerRecord"),this.sendMsgToSdk({cmd:"/c/saveUserData",data:{userData:e}})},t.getServerRecord=function(){console.log("mgrSdk getServerRecord"),this.sendMsgToSdk({cmd:"/c/getUserData",data:null})},t.addGameToMyFavorite=function(e,t,o){void 0===o&&(o="{}"),console.log("mgrSdk addGameToMyFavorite"),this.sendMsgToSdk({cmd:"/c/addGameToMyFavorite",data:{typeId:e,content:t,userData:JSON.stringify({})}})},t.getUserInfoMsg=function(){this.sendMsgToSdk({cmd:"/c/getUserInfoMsgResult"})},t.installShortcut=function(e){void 0===e&&(e="{}"),console.log("mgrSdk installShortcut"),this.sendMsgToSdk({cmd:"/c/installShortcut",data:{userData:e}})},t.getShortcutState=function(e){void 0===e&&(e="{}"),console.log("mgrSdk getShortcutState"),this.sendMsgToSdk({cmd:"/c/getShortcutState",data:{userData:e}})},t.setClipboardData=function(e,t){void 0===t&&(t="{}"),this.sendMsgToSdk({cmd:"/c/setClipboardData",data:{clipboardData:e,userData:t}})},t.getClipboardData=function(e){void 0===e&&(e="{}"),this.sendMsgToSdk({cmd:"/c/getClipboardData",data:{userData:e}})},t.statisOnStageStart=function(e,t){this.DEBUG&&console.info("mgrSdk:statisOnStageStart(stageId)",e);var o=["gameLevelStart",e.toString(),t];this.megadataServer(o)},t.statisOnStageEnd=function(e,t,o,n){n=Math.ceil(n),this.DEBUG&&console.info("mgrSdk:statisOnStageEnd(stageId)",e,t,o,n);var r=["gameLevelComplete",e.toString(),t.toString(),o,"0","0","0","0","0",n.toString()];this.megadataServer(r)},t.statisOnAddItemAmount=function(e,t,o){if(this.DEBUG&&console.info("mgrSdk:statisOnAddItemAmount(itemId)",e," amountDelta: ",t,"reason: ",o),t>0){var n=["gameCoinAdd",e.toString(),t.toString(),o];this.megadataServer(n)}else{n=["gameCoinLost",e.toString(),Math.abs(t).toString(),o];this.megadataServer(n)}},t.statisOnItemBought=function(e,t,o){var n=["itemBuy",e.toString(),Math.abs(t).toString(),o];this.megadataServer(n)},t.statisOnBuyAction=function(e,t,o){var n=["buyAction",e,t,e,o.toString()];this.megadataServer(n)},t.statisCommonEvent=function(e,t){var o=["commonEventMultiField",e,t];this.megadataServer(o)},t.isOpenVideoRecord=function(){return this.isCopOpenVideoRecord()&&i.default.IS_OPEN_VIDEO_RECORD},t.isCopOpenVideoRecord=function(){return"1"==o.getCopByKey("b_record_video")&&d.default._isSupportRecordShare},t.getLastRecordVideoTime=function(){return this.lastRecordVideoTime||0},t.tryStartRecordGameVideo=function(e){void 0===e&&(e=60),this.recordGameVideoActioningName&&"stop"!=this.recordGameVideoActioningName?this.recordGameVideoActioningName&&"pause"==this.recordGameVideoActioningName&&this.resumeRecordGameVideo():this.startRecordGameVideo(e)},t.startRecordGameVideo=function(e){this.lastRecordVideoTime=0,this.recordGameVideo("start",!0,e),this.recordGameVideoActioningName="start",this.bRecordVideo=!0},t.stopRecordGameVideo=function(){this.recordGameVideo("stop"),this.recordGameVideoActioningName="stop",this.bRecordVideo=!1},t.pauseRecordGameVideo=function(){this.recordGameVideo("pause"),this.recordGameVideoActioningName="pause",this.bRecordVideo=!1},t.resumeRecordGameVideo=function(){this.recordGameVideo("resume"),this.recordGameVideoActioningName="resume",this.bRecordVideo=!0},t.DEBUG=!0,t.bInit=!1,t.__back_prompt_dialog=null,t.cmdCallbacks={},t=o=r([_],t)}(a.default);o.default=v,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../Const":"Const","./mgrChannel":"mgrChannel","./mgrCop":"mgrCop","./mgrI18n":"mgrI18n","./mgrNative":"mgrNative","./mgrPlayer":"mgrPlayer","./mgrShop":"mgrShop","./mgrSound":"mgrSound","./mgrTip":"mgrTip","./mgrVideoRecorder":"mgrVideoRecorder"}],mgrShader:[function(e,t,o){"use strict";cc._RF.push(t,"8ed15qxNnNJOqVc5NtZPCvD","mgrShader");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../ulframework/manager/Manager"),l=e("../../ulframework/utils/Timer"),c=cc._decorator.ccclass,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){var t=this;e.onLoad.call(this),l.default.callLoop(.01,function(){t.update()})},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.setShader=function(e,t){return a(this,void 0,void 0,function(){return i(this,function(e){return[2,null]})})},t.update=function(){},t._promiseLoadFile=function(e){return null},t.setGray=function(e){},t.setNormal=function(e){},t.setLinePos=function(e){},t.shaderPrograms={},t.textColorCache={},t.startTimes={},t.line_pos=[cc.v2(0,100),cc.v2(100,100),cc.v2(200,100),cc.v2(200,100),cc.v2(300,100),cc.v2(500,100),cc.v2(600,100),cc.v2(700,100),cc.v2(800,100),cc.v2(900,100)],t.paramArray=[0,100,100,100,200,100,300,100,500,100,600,100,700,100,800,100,900,100],t=r([c],t)}(s.default);o.default=u,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer"}],mgrShare:[function(e,t,o){"use strict";cc._RF.push(t,"a0ba6lzhMdL3ZOaPeZOKBpU","mgrShare");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("./mgrRecord"),s=e("../../ulframework/utils/Timer"),l=e("../../ulframework/utils/Tools"),c=e("./mgrCfg"),u=e("./mgrPlayer"),d=e("./mgrTip"),p=cc._decorator.ccclass,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),s.default.callLoop(1,this.onTimerLoop.bind(this),!0)},t.loadRecord=function(){e.loadRecord.call(this);var t=i.default.getData("share")||{};this.rewardReceiveCount=t.rewardReceiveCount||0,this.lastResetTime=t.lastResetTime||0},t.saveRecord=function(){e.saveRecord.call(this);var t={rewardReceiveCount:this.rewardReceiveCount,lastResetTime:this.lastResetTime};i.default.setData("share",t)},t.onTimerLoop=function(e){this.refreshDailyData()},t.refreshDailyData=function(){l.default.isOneDay(l.default.time(),this.lastResetTime)||(this.rewardReceiveCount=0,this.lastResetTime=l.default.time(),this.saveRecord())},t.getRewardCount=function(){var e=c.default.get("share_config_db",1).dailyRewardCount;return[e-this.rewardReceiveCount,e]},t.getShareData=function(){var e=c.default.get("share_config_db",1);return{title:e.title,content:e.content,imgPath:e.url}},t.getRandomShareData=function(){var e=c.default.getDb("share_config_db"),t=[];for(var o in e){var n=e[o];t.push(n)}var r=null;return{title:(r=t.length<=0?t[0]:t[l.default.random(0,t.length-1)]).title,content:r.content,imgPath:r.url}},t.getRewards=function(){return c.default.get("share_config_db",1).rewards},t.tryReceiveReward=function(){var e=this.getRewardCount(),t=e[0];e[1];if(t<=0)return d.default.showMsgTip("\u4eca\u65e5\u5206\u4eab\u5956\u52b1\u9886\u53d6\u5b8c\u6bd5\uff0c\u660e\u5929\u518d\u6765\u5427\uff01"),[];this.rewardReceiveCount++,this.saveRecord();for(var o=c.default.get("share_config_db",1).rewards,n=0;n<o.length;n++){var r=o[n],a=r[0],i=r[1];u.default.addItemAmount(a,i,"\u5206\u4eab\u5956\u52b1")}return o},t.rewardReceiveCount=0,t.lastResetTime=0,t=r([p],t)}(a.default);o.default=h,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","./mgrCfg":"mgrCfg","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrTip":"mgrTip"}],mgrShop:[function(e,t,o){"use strict";cc._RF.push(t,"5912dgiR6xC2LqgHfLrNM7b","mgrShop");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("../../ulframework/utils/Tools"),s=e("./mgrAd"),l=e("./mgrAlu"),c=e("./mgrCfg"),u=e("./mgrCop"),d=e("./mgrDirector"),p=e("./mgrPlayer"),h=e("./mgrRecord"),f=e("./mgrSdk"),g=e("./mgrSound"),m=e("./mgrTip"),_=e("./mgrStatics"),v=e("../Const"),y=e("./mgrChannel"),C=e("./mgrI18n"),S=cc._decorator.ccclass,b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return n(t,e),o=t,t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventClicked.bind(this),MSG_AD_EVENT_CLICKED:this.onMsgAdEventClicked.bind(this),MSG_SDK_PAY_RESULT:this.onMsgSdkPayResult,MSG_SDK_PRE_PAY_RESULT:this.onMsgSdkPrePayResult})},t.loadRecord=function(){e.loadRecord.call(this);var t=h.default.getData("shop")||{};this.discountList=t.discountList||[],this.discountLastRefreshTime=t.discountLastRefreshTime,this.watchAdNumber=t.watchAdNumber||0,this.lastWatchTime=t.lastWatchTime||0,this.watchAdDailyGetNumber=t.watchAdDailyGetNumber||{},this.tryResetWatchAdNumber(),this.applyDiscountList(this.discountList),this.tryRefreshDiscount()},t.saveRecord=function(){e.saveRecord.call(this);var t={discountList:this.discountList,discountLastRefreshTime:this.discountLastRefreshTime,watchAdNumber:this.watchAdNumber,lastWatchTime:this.lastWatchTime,watchAdDailyGetNumber:this.watchAdDailyGetNumber};h.default.setData("shop",t)},t.tryResetWatchAdNumber=function(){i.default.isOneDay(this.lastWatchTime,i.default.time())||(this.watchAdNumber=0,this.lastWatchTime=i.default.time(),this.watchAdDailyGetNumber={})},t.getCanbuyShopItemListByCategory=function(e){var t=this;if(!e)return[];for(var o={},n=0;n<e.length;n++){var r=e[n];o[r]=!0}var a=[];return c.default.forDb("shop_template_db",function(e,n){o[n.category]&&l.default.check(n.aluId)&&t.isShopItemCanBuy(n.id)&&a.push(n)}),a=i.default.sortArrayByField(a,["-order","id"])},t.getAllShopItemListByCategory=function(e){if(!e)return[];for(var t={},o=0;o<e.length;o++){var n=e[o];t[n]=!0}var r=[];return c.default.forDb("shop_template_db",function(e,o){t[o.category]&&l.default.check(o.aluId)&&r.push(o)}),r=i.default.sortArrayByField(r,["-order","id"])},t.isShopItemCanBuy=function(e){var t=c.default.get("shop_template_db",e);if(!t)return!1;if(this.banShopIds[e])return!1;if(!l.default.check(t.aluId))return!1;if(t.rebuyCheckIds.length<=0)return!0;var o=t.rebuyCheckMode;if(1==o){for(var n=0;n<t.rebuyCheckIds.length;n++){var r=t.rebuyCheckIds[n];if(p.default.getItemAmount(r)>0)return!1}return!0}if(2==o){for(n=0;n<t.rebuyCheckIds.length;n++){r=t.rebuyCheckIds[n];if(p.default.getItemAmount(r)<=0)return!0}return!1}return 3!=o||s.default.isAdEventHasChanceTrigger(t.adEventId)&&s.default.getAdEventRemainCount(t.adEventId)>0},t.getPrice=function(e,t){null==t&&(t=1);var o=c.default.get("shop_template_db",e);return o?[o.priceUnit,o.price*t]:[0,0]},t.getFormattedPrice=function(e,t){var o=this.getPrice(e,t),n=o[0],r=o[1];return this.formatPrice(n,r)},t.formatPrice=function(e,t){return 0==e?ul.format("%s\u5143",t):ul.format("%d%s",t,c.default.get("item_template_db",e,"name"))},t.formatPriceByCosts=function(e){if(!e||e.length<=0)return"\u514d\u8d39";for(var t="",o=0;o<e.length;o++){var n=e[o],r=n[0],a=n[1];null!=r&&null!=a&&(t+=this.formatPrice(r,a),o!=e.length-1&&(t+=","))}return t},t.getShopDataByPayId=function(e){var t=null;return c.default.forDb("shop_template_db",function(o,n){if(n.payId==e)return t=n,!0}),t},t.checkCostItemsAllEnough=function(e){for(var t=0;t<e.length;t++){var o=e[t],n=o[0],r=o[1];if(!c.default.get("item_template_db",n))return!1;if(p.default.getItemAmount(n)<r)return!1}return!0},t.tryCostByItems=function(e,t){for(var o=0;o<e.length;o++){var n=e[o],r=n[0],a=n[1],i=c.default.get("item_template_db",r);if(!i)return!1;if(p.default.getItemAmount(r)<a)return this.onCostNotEnought(i.id),!1}for(o=0;o<e.length;o++){var s=e[o];r=s[0],a=s[1];p.default.addItemAmount(r,-a,t)}return!0},t.requestBuy=function(e,t,o,n){null==t&&(t=1);var r={bSuccess:!1,shopId:e,amount:t,reason:o,bIgnoreGotTip:n,msg:""},a=this.getPrice(e,t),i=a[0],l=a[1];c.default.get("shop_template_db",e);if(0==i)console.log("---\u529f\u80fd\u672a\u5b9e\u73b0");else if(3==i)this.adTriggerId="free_mall_exchange",s.default.triggerAdEvent(this.adTriggerId);else{var u=c.default.get("item_template_db",i);if(!u)return void m.default.showMsgTip(ul.format("\u8d27\u5e01\u5355\u4f4d\u9519\u8bef\uff01shopId = %d",r.shopId));p.default.getItemAmount(i)>=l?(p.default.addItemAmount(i,-l,o),r.bSuccess=!0,this.onResponseBuy(r)):this.onCostNotEnought(u.id)}},t.onResponseBuy=function(e){var t=c.default.get("shop_template_db",e.shopId);if(t)if(e.bSuccess){var o=e.amount||1;g.default.play(111);for(var n=0;n<t.items.length;n++){var r=t.items[n],a=r[0],i=r[1],s=r[2];if(p.default.addItemAmount(a,i*o,e.reason),!s&&!e.bIgnoreGotTip){var l=p.default.getItemAmount(a);m.default.addGotItemTip(a,i*o,null,{bDisableDressGuide:!0},l)}}p.default.markDailyBoughtShop(e.shopId),this.sendMsg("MSG_ITEM_BUY_SUCCESSED",{shopId:e.shopId}),_.default.statisOnItemBought(e.shopId,o,e.reason)}else m.default.showMsgTip(C.default.getText("mgrShop.1"))},t.onCostNotEnought=function(e){var t=c.default.get("item_template_db",e);m.default.showMsgTip(ul.format(C.default.getText("mgrShop.2"),C.default.getText(t.name))),this.showRouterTargetWithDialog(t.id,ul.format("%s\u4e0d\u8db3",t.name))},t.onReceiveSdkPayInfo=function(e){for(var t={},o=0;o<e.length;o++){var n=e[o];t[n.payId]=!0}var r={},a=[];c.default.forDb("shop_template_db",function(e,o){0==o.priceUnit&&o.payId&&(t[o.payId]||(r[o.id]=!0,a.push(o.id)))}),this.banShopIds=r,this.sendMsg("MSG_ITEM_BUY_SUCCESSED",{shopId:0})},t.getRouterData=function(e){var t=null;return c.default.forDb("shop_router_db",function(o,n){if(n.id==e&&l.default.checkIds(n.aluIds))return t=n,!0}),t},t.getRouterAllTargetIds=function(e){var t=this.getRouterData(e);if(!t)return[];for(var o=[],n=0;n<t.targets.length;n++){var r=t.targets[n][0];this.isShopItemCanBuy(r)&&o.push(r)}return o},t.calcRouterTarget=function(e){var t={bTrigger:!1,shopId:null,viewName:null},o=this.getRouterData(e);if(!o)return t;var n=o.triggerRatio;n.triggerRatioFromCopKey&&(n=u.default.getNumberValue(n.triggerRatioFromCopKey));var r=i.default.random(100);if(r>n)return t;for(var a=0,s={},l=0;l<o.targets.length;l++){var c=o.targets[l],d=c[0],p=c[1];this.isShopItemCanBuy(d)&&(s[l]=!0,a+=p)}r=i.default.random(Math.min(100,a));for(l=0;l<o.targets.length;l++)if(s[l]){var h=o.targets[l],f=(d=h[0],p=h[1],h[2]);if(r<=p)return t.bTrigger=!0,t.shopId=d,t.viewName=f,t;r-=p}return t},t.showRouterTargetWithDialog=function(e,t,o){var n=this.calcRouterTarget(e);if(!n.bTrigger)return cc.log("-------noTrigger"),!1;if(!n.viewName)return cc.warn(ul.format("mgrShop:showRouterTargetWithDialog viewName not found! routerId = %d."+e)),!1;var r=o||{};return r.shopId=n.shopId,r.reason=t,107==e&&1==f.default.getCopNumberValueByKey("b_open_hud_free_gold_dialog")?s.default.triggerAdEvent("video_free_gold_name",null,!0):d.default.warpDialogWithSmallEffect(n.viewName,r),!0},t.buildDiscountList=function(){var e,t=(c.default.getDb("shop_discount_config")||[])[0]||{},o=this.getCanbuyShopItemListByCategory(t.categorys)||[],n={},r=((e={})[1]=!0,e[2]=!0,e);for(var a in o){if(!(_=o[a]).specialPartType&&r[_.priceUnit]&&!_.bLimitOwn)(m=n[_.priceUnit])||(m=[],n[_.priceUnit]=m),m.push(_)}var s=c.default.getDb("shop_discount_item_db")||{},l=i.default.getTableCount(s),u=[],d=t.minCountsByPriceUnit;for(var a in d){for(var p=(_=d[a])[0],h=_[1],f=1;f<=h;f++){if((m=n[p]||[]).length>0){var g=m[b=i.default.random(0,m.length-1)];m.splice(b,1),u.push(g)}if(u.length>=l)break}if(u.length>=l)break}if(u.length<l){var m=[];for(var a in n){var _=n[a];for(var v in _){var y=_[v];m.push(y)}}for(f=u.length+1;f<=l&&!(m.length<=0);f++){g=m[b=i.default.random(0,m.length-1)];m.splice(b,1),u.push(g)}}var C=[],S=c.default.getDb("shop_discount_item_db");for(var a in S){_=S[a];var b,R=u[b=i.default.random(0,u.length-1)];u.splice(b,1),C.push({shopId:R.id,discountId:_.id})}return C},t.applyDiscountList=function(e){var t=c.default.getDb("shop_template_db"),o=[];for(var n in e){var r=e[n],a=c.default.get("shop_template_db",r.shopId),s=c.default.get("shop_discount_item_db",r.discountId);if(a){var l=i.default.clone(a);l.category=v.CPartType.DISCOUNT,l.originPrice=a.price,l.price=Math.ceil(a.price*s.priceRatio),l.discountData=s,o.push(l)}}for(var u=o.length,d=0;d<u;d++){(r=o[d]).id=1e4+d,r.order=1e3-d}t=c.default.getDb("shop_template_db");for(var n in t){if(r=t[n]){var p=r.id;r.category==v.CPartType.DISCOUNT&&(t[p]=null)}}for(var n in o){t[(r=o[n]).id]=r}},t.tryRefreshDiscount=function(){var e=this.discountLastRefreshTime||0;if(!(i.default.time()-e<=(((c.default.getDb("shop_discount_config")||[])[0]||{}).refreshGap||86400)))if(i.default.isOneDay(e,i.default.time()));else{var t=this.buildDiscountList();this.discountList=t,this.discountLastRefreshTime=i.default.time(),this.saveRecord(),this.applyDiscountList(this.discountList)}},t.getDiscountRemainTime=function(){var e=(this.discountLastRefreshTime||0)+(((c.default.getDb("shop_discount_config")||[])[0]||{}).refreshGap||86400);return Math.max(0,e-i.default.time())},t.getBuySource=function(e){var t=c.default.get("item_template_db",e);if(t){var o=c.default.quietGet("cosmetic_part_db",e);if(o)switch(o.specialSource){case 1:return{desc:"\u5360\u535c\u5c0f\u5c4b",promptTitle:"\u63d0\u793a",promptContent:ul.format("\u662f\u5426\u524d\u5f80\u5360\u535c\u5c0f\u5c4b\u83b7\u53d6\u90e8\u4ef6\uff1a\n[%s]\uff1f",t.name),bBtnEnabled:!0,targetDialogName:"vWishDialog",targetSceneName:null,targetContext:null};case 2:return y.default.isCanShowMidAutumn()?{desc:"\u4e2d\u79cb\u6d3b\u52a8",promptTitle:"\u63d0\u793a",promptContent:ul.format("\u662f\u5426\u524d\u5f80\u4e2d\u79cb\u6d3b\u52a8\u83b7\u53d6\u90e8\u4ef6\uff1a\n[%s]\uff1f",t.name),bBtnEnabled:!0,targetDialogName:"vOpMidAutumnLotteryDialog",targetSceneName:null,targetContext:null}:{desc:"\u4e2d\u79cb\u6d3b\u52a8",promptTitle:"\u63d0\u793a",promptContent:ul.format("\u6d3b\u52a8\u5df2\u7ed3\u675f\uff0c\u6682\u65f6\u65e0\u6cd5\u83b7\u5f97[%s]",t.name),bBtnEnabled:!1,targetDialogName:null,targetSceneName:null,targetContext:null}}return null}},t.openBuySource=function(e){e?e.bBtnEnabled?m.default.alertPrompt2(e.promptTitle,e.promptContent,"\u53d6\u6d88","\u524d\u5f80",null,function(){e.targetDialogName?d.default.openDialog(e.targetDialogName,e.targetContext):e.targetSceneName&&d.default.warpDialogWithEffect(e.targetSceneName,e.targetContext)}):m.default.alertPrompt(e.promptTitle,e.promptContent,"\u597d\u7684"):m.default.showMsgTip(C.default.getText("mgrShop.3"))},t.getWatchAdNumber=function(e){return this.watchAdNumber||0},t.getAdShopGetRewardCount=function(e){var t=this.watchAdDailyGetNumber[e]||0,o=c.default.get("shop_template_db",e);return o?[t,o.dailyAdBuyCount||0]:[0,0]},t.onMsgAdEventClicked=function(e){var t=e;t.adEventId!=this.adTriggerId&&t.userData.originAdEventId!=this.adTriggerId||(o.watchAdNumber=o.watchAdNumber||0,o.watchAdNumber++,this.saveRecord(),this.sendMsg("MSG_SHOP_AD_SUCCESSED"))},t.getAdReward=function(e){var t=c.default.get("shop_template_db",e);g.default.play(111);for(var n=0;n<t.items.length;n++){var r=t.items[n],a=r[0],i=r[1];r[2];p.default.addItemAmount(a,i,"\u514d\u8d39\u5546\u57ce\u9886\u53d6\u5e7f\u544a\u5956\u52b1");var s=p.default.getItemAmount(a);m.default.addGotItemTip(a,i,null,null,s)}this.watchAdDailyGetNumber[e]||(this.watchAdDailyGetNumber[e]=0),this.watchAdDailyGetNumber[e]++,o.watchAdNumber=o.watchAdNumber-t.needWatchCount,this.saveRecord(),this.sendMsg("MSG_ITEM_BUY_SUCCESSED",{shopId:e})},t.getShopIdByPayId=function(e){var t;return c.default.forDb("shop_template_db",function(o,n){if(n.payId==e)return t=n.id,!0}),t},t.setSdkPayInfo=function(e){var t=this;i.default.forEachMap(e,function(e,o){t.sdkPayInfo[o.payCode]={payCode:o.payCode,price:o.price,proName:o.proName}})},t.onMsgSdkPayResult=function(e){if(e.bSuccessful){var t={bSuccess:!0,shopId:this.getShopIdByPayId(e.payId),amount:1,reason:"",bIgnoreGotTip:!1,msg:""};this.onResponseBuy(t)}},t.onMsgSdkPrePayResult=function(e){if(e.bSuccessful){m.default.showMsgTip("\u8865\u53d1\u8ba2\u5355...");var t={bSuccess:!0,shopId:this.getShopIdByPayId(e.payId),amount:1,reason:"",bIgnoreGotTip:!1,msg:""};this.onResponseBuy(t)}},t.banShopIds={},t.discountLastRefreshTime=0,t.watchAdNumber=0,t.watchAdDailyGetNumber={},t.lastWatchTime=0,t.adTriggerId="native_free_mall",t.sdkPayInfo={},t=o=r([S],t)}(a.default);o.default=b,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrAd":"mgrAd","./mgrAlu":"mgrAlu","./mgrCfg":"mgrCfg","./mgrChannel":"mgrChannel","./mgrCop":"mgrCop","./mgrDirector":"mgrDirector","./mgrI18n":"mgrI18n","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrSdk":"mgrSdk","./mgrSound":"mgrSound","./mgrStatics":"mgrStatics","./mgrTip":"mgrTip"}],mgrSign:[function(e,t,o){"use strict";cc._RF.push(t,"13f524IE+ZCqKNbXuUfCYCO","mgrSign");var n,r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../ulframework/manager/Manager"),s=e("./mgrRecord"),l=e("../Const"),c=e("../../ulframework/utils/Tools"),u=e("./mgrCfg"),d=e("./mgrPlayer"),p=e("../../ulframework/utils/Timer"),h=cc._decorator,f=h.ccclass,g=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.tryResetSignInfo(),p.default.callLoop(1,this.onTimerLoop.bind(this),!0)},t.loadRecord=function(){e.loadRecord.call(this);var t=s.default.getData("sign")||{};this.signedDays=t.signedDays||this.DEFAULT_SIGN_DATA,this.signedDay=t.signedDay||0,this.bSignedOneTurn=t.bSignedOneTurn||!1},t.saveRecord=function(){e.saveRecord.call(this);var t={signedDays:this.signedDays,signedDay:this.signedDay,bSignedOneTurn:this.bSignedOneTurn};s.default.setData("sign",t)},t.onTimerLoop=function(){var e=this.getLastSignTime();e&&!c.default.isOneDay(c.default.time(),e)&&(this.signedDay+=1,this.tryResetSignInfo())},t.tryResetSignInfo=function(){this.bSignedOneTurn&&u.default.coverDb("sign_db2","sign_db"),!this.signedDay||this.signedDay<7||(u.default.coverDb("sign_db2","sign_db"),this.signedDays=this.DEFAULT_SIGN_DATA,this.signedDay=0,this.bSignedOneTurn=!0,this.saveRecord())},t.hasCanRewardSign=function(){return(o.getState()||l.SignState.signed)==l.SignState.canSign},t.getFormatedTime=function(e){var t=Math.floor(e/60/60),o=Math.floor(e%3600/60),n=e%60;return ul.format("%d:%02d:%02d",t,o,n)},t.getState=function(e){var t=e||this.getSignDay(),o=this.getSignIndex(e),n=this.signedDays[t].signTime,r=u.default.get("sign_db",t)||{};for(var a in r){var i=r[a];if(i.index==o&&i.day==t)return c.default.time()-n>=i.rewardGap?l.SignState.canSign:l.SignState.waitGap}return l.SignState.signOver},t.getSignDay=function(){return this.signedDay+1},t.getSignIndex=function(e){return this.signedDays[e||this.getSignDay()].index},t.canReSign=function(e){var t=u.default.get("sign_db",e)||{},o=this.signedDays[e].index;for(var n in t){if(o<=t[n].index)return!0}return!1},t.sign=function(e,t){var o={bSuccessd:!1};if(this.getState()!=l.SignState.canSign&&!e)return o;var n=e||this.getSignDay(),r=this.getSignIndex(e),a=u.default.get("sign_db",n,r);this.signedDays[n].index=this.signedDays[n].index+1,this.signedDays[n].signTime=c.default.time(),this.saveRecord();var i=a.rewardAmount1,s=a.rewardAmount2;t?(d.default.addItemAmount(a.rewardItemId1,i,"\u7b7e\u5230"),d.default.addItemAmount(a.rewardItemId2,s,"\u7b7e\u5230")):(i=0,d.default.addItemAmount(a.rewardItemId2,s,"\u7b7e\u5230"));var p=c.default.random(100)<=a.lotteryRatio,h=a.lotterySuitIds||[],f=0;if(p)for(var g in h){var m=u.default.get("suit_db",h[g]).displayIds||[];for(var _ in m)if(d.default.getItemAmount(m[_])<=0){f=h[g];break}if(f)break}return d.default.addItemAmount(918,1,"\u4efb\u52a1\u7269\u54c1"),o.bSuccessd=!0,o.rewardItemId1=a.rewardItemId1,o.rewardAmount1=i,o.rewardItemId2=a.rewardItemId2,o.rewardAmount2=s,o.bLottery=p,o.suitId=f,o},t.getRemainTime=function(){if(this.getState()!=l.SignState.waitGap)return 0;var e=this.getSignDay(),t=this.getSignIndex(),o=this.signedDays[e].signTime,n=u.default.get("sign_db",e)||{};for(var r in n){var a=n[r];if(a.index==t)return a.rewardGap+o-c.default.time()}return 0},t.getLastSignTime=function(){var e=this.getSignDay();return this.signedDays[e].signTime},t.buildSignLotteryResult=function(){var e=[];return u.default.forDb("sign_lottery_db",function(t,o){var n={cost:[],rewards:[]};n.cost[0]=o.costItemId,n.cost[1]=o.costAmount;for(var r=0;r<o.rewardBoxIds.length;r++)for(var a=o.rewardBoxIds[r],i=d.default.openItemBox(a),s=0;s<i.length;s++)n.rewards.push(i[s]);e.push(n)}),e},t.getBadgeCout=function(){return o.getState()==l.SignState.canSign?1:0},t.DEFAULT_SIGN_DATA=((n={})[1]={day:1,index:1,signTime:0},n[2]={day:2,index:1,signTime:0},n[3]={day:3,index:1,signTime:0},n[4]={day:4,index:1,signTime:0},n[5]={day:5,index:1,signTime:0},n[6]={day:6,index:1,signTime:0},n[7]={day:7,index:1,signTime:0},n),t.DAY=86400,t.WEEK=604800,t.signedDay=0,t.signedDays={},t=o=a([f],t)}(i.default));o.default=g,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrCfg":"mgrCfg","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord"}],mgrSound:[function(e,t,o){"use strict";cc._RF.push(t,"d62efGiv1FBWZE+W4nbmQMF","mgrSound");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("./mgrRecord"),s=e("./mgrCfg"),l=e("./mgrDirector"),c=cc._decorator.ccclass,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return n(t,e),o=t,t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),cc.game.on(cc.game.EVENT_HIDE,function(){cc.log("cc.game.EVENT_HIDE"),o.pauseSound(o.SOUND_OPERATION_TAG_PLAYER)}),cc.game.on(cc.game.EVENT_SHOW,function(){cc.log("cc.game.EVENT_SHOW"),o.resumeSound(o.SOUND_OPERATION_TAG_PLAYER)}),this.registerListeners({MSG_SCENE_LOADED:this.onMsgSceneLoaded}),this._createRootNode(),this._createMusicSource()},t.loadRecord=function(){e.loadRecord.call(this);var t=i.default.getData("sound")||{};this.musicVolume=null!=t.musicVolume?t.musicVolume:1,this.effectVolume=null!=t.effectVolume?t.effectVolume:1,this.setMusicVomue(this.musicVolume,!0),this.setEffectVolume(this.effectVolume,!0)},t.saveRecord=function(){e.saveRecord.call(this);var t={musicVolume:this.musicVolume,effectVolume:this.effectVolume};i.default.setData("sound",t)},t.onMsgSceneLoaded=function(){this.playingMusicSoundId&&this._playMusic(this.playingMusicSoundId)},t._createRootNode=function(){var e=cc.director.getScene().getChildByName("sound");e||((e=new cc.Node).name="sound",e.parent=cc.director.getScene(),cc.game.addPersistRootNode(e));this._nodeRoot=e},t._createMusicSource=function(){var e=new cc.Node;e.parent=this._nodeRoot;var t=e.addComponent(cc.AudioSource);this._musicSource=t},t._playMusic=function(e){var t=this.allAudioClips[e];if(t&&this._musicSource){var o=this._musicSource;o.clip=t,o.loop=!0,o.volume=this.musicVolume,o.setCurrentTime(0),o.play()}},t._stopMusic=function(){this._musicSource&&this._musicSource.stop()},t._playEffect=function(e,t){void 0===t&&(t=!1);var o=this.allAudioClips[e];if(o){var n=this._effectSources[e];n||(n=[],this._effectSources[e]=n);for(var r=null,a=0;a<n.length;a++){var i=n[a];if(!i.isPlaying){r=i;break}}if(!r){var s=new cc.Node;s.parent=this._nodeRoot,r=s.addComponent(cc.AudioSource),n.push(r)}r.clip=o,r.loop=!!t,r.volume=this.effectVolume,r.setCurrentTime(0),r.play()}},t._stopEffects=function(){for(var e in this._effectSources)for(var t=this._effectSources[e],o=0;o<t.length;o++){t[o].stop()}},t._stopEffect=function(e){var t=this._effectSources[e];if(t)for(var o in t){var n=t[o];n.isPlaying&&n.stop()}},t.play=function(e){var t=this,o=this.allAudioClips[e],n=s.default.get("sound_db",e);if(n)if(1==n.type){if(this.musicVolume<=0)return;if(e==this.playingMusicSoundId)return;if(this.playingMusicSoundId=e,o)this._playMusic(e);else{if(!(r=this.getUrl(e)))return;l.default.loadRes(r,cc.AudioClip,function(o,n){o||(t.allAudioClips[e]=n,e==t.playingMusicSoundId&&t.musicVolume>0&&t._playMusic(e))})}}else{if(this.effectVolume<=0)return;if(n.bStopAllEffect&&this._stopEffects(),o)this._playEffect(e,n.bLoop);else{var r;if(!(r=this.getUrl(e)))return;l.default.loadRes(r,cc.AudioClip,function(o,r){o||(t.allAudioClips[e]=r,t._playEffect(e,n.bLoop))})}}},t.stop=function(e){if(this.allAudioClips[e]){var t=s.default.get("sound_db",e);if(t)1==t.type?this._stopMusic():this._stopEffect(e)}},t.getUrl=function(e){var t=s.default.get("sound_db",e);if(!t)return"";var o=t.fileName.split(".");return 2!=o.length?t.fileName:o[0]},t.stopAll=function(){this._stopEffects(),this._stopMusic()},t.pauseSound=function(e){console.info("\u6682\u505c\u58f0\u97f3"),this.pauseSoundTagDict[e]=!0,this.lastMusicVol||(this.lastMusicVol=this.getMusicVolmue()),this.lastSoundVol||(this.lastSoundVol=this.getEffectVolume()),this.setMusicVomue(0,!0),this.setEffectVolume(0,!0)},t.resumeSound=function(e){console.info("\u6062\u590d\u58f0\u97f3"),this.pauseSoundTagDict[e]=!1;for(var t in this.pauseSoundTagDict)if(this.pauseSoundTagDict[t])return;this.lastMusicVol&&(this.setMusicVomue(this.lastMusicVol,!0),this.lastMusicVol=null),this.lastSoundVol&&(this.setEffectVolume(this.lastSoundVol,!0),this.lastSoundVol=null)},t.getPlayingMusicSoundId=function(){return this.playingMusicSoundId},t.getMusicVolmue=function(){return this.musicVolume},t.setMusicVomue=function(e,t){this.musicVolume=e,e<=0?this._stopMusic():this.playingMusicSoundId&&this._playMusic(this.playingMusicSoundId),t||this.saveRecord()},t.getEffectVolume=function(){return this.effectVolume},t.setEffectVolume=function(e,t){this.effectVolume=e,e<=0&&this._stopEffects(),t||this.saveRecord()},t.preload=function(e,t){var o=this,n=this.getUrl(e);n&&!cc.loader.getRes(n,cc.AudioClip)?l.default.loadRes(n,cc.AudioClip,function(n,r){n||(o.allAudioClips[e]=r),t&&t(e)}):t&&t(e)},t.playingMusicSoundId=null,t.musicVolume=1,t.effectVolume=1,t.allAudioClips={},t.lastMusicVol=null,t.lastSoundVol=null,t._nodeRoot=null,t._musicSource=null,t._effectSources={},t.pauseSoundTagDict={},t.SOUND_OPERATION_TAG_AD=1,t.SOUND_OPERATION_TAG_PLAYER=2,t=o=r([c],t)}(a.default);o.default=u,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","./mgrCfg":"mgrCfg","./mgrDirector":"mgrDirector","./mgrRecord":"mgrRecord"}],mgrStage:[function(e,t,o){"use strict";cc._RF.push(t,"62d25C1vvlEvY/VQxvAbWbd","mgrStage");var n,r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../ulframework/manager/Manager"),s=e("./mgrCfg"),l=e("../../ulframework/utils/Tools"),c=e("./mgrRecord"),u=e("./mgrTip"),d=e("./mgrPlayer"),p=e("../Const"),h=e("./mgrShop"),f=e("./mgrDirector"),g=e("./mgrDebug"),m=e("./mgrAd"),_=cc._decorator.ccclass,v=((n={})[0]="\u65e0\u8bb0\u5f55",n[1]="\u5dee",n[2]="\u4e2d",n[3]="\u826f",n[4]="\u4f18",n),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.onLoad=function(){e.onLoad.call(this),this.loadRecord()},t.loadRecord=function(){var t=this;e.loadRecord.call(this);var n=c.default.getData("stage")||{};this.stageDatas=n.stageDatas||{},this.stageProgress=n.stageProgress||0,this.standStageIdDict=n.standStageIdDict||{},this.standedStageIds=n.standedStageIds||{},this.chapterRewardReceiveds=n.chapterRewardReceiveds||{},this.bHardLevelIsOpen=n.bHardLevelIsOpen||!1,this.firstOpenHardLevel=n.firstOpenHardLevel||!1,this.confuseRewardTriggeredStageIds=n.confuseRewardTriggeredStageIds||{},this.firstRewardedStageDict=n.firstRewardedStageDict||{},s.default.forDb("stage_db",function(e,n){var r=t.stageDatas[n.id]||{rating:0};t.stageDatas[n.id]=r,n.stageProgress&&n.stageProgress<=t.stageProgress&&o.setStandStageId(n.id)}),this.saveRecord()},t.saveRecord=function(){e.saveRecord.call(this);var t={stageDatas:this.stageDatas,stageProgress:this.stageProgress,standStageIdDict:this.standStageIdDict,standedStageIds:this.standedStageIds,chapterRewardReceiveds:this.chapterRewardReceiveds,bHardLevelIsOpen:this.bHardLevelIsOpen||!1,firstOpenHardLevel:this.firstOpenHardLevel||!1,confuseRewardTriggeredStageIds:this.confuseRewardTriggeredStageIds||{},firstRewardedStageDict:this.firstRewardedStageDict||{}};c.default.setData("stage",t)},t.beginStage=function(e,t,o){void 0===t&&(t={});var n=s.default.get("stage_db",e);if(!n)return!1;if(d.default.getItemAmount(p.default.ITEM_ID_ENERGY)<n.energy)return m.default.preCheckCanTriggerAdEvent("video_preview_dialog_energy")?m.default.triggerAdEvent("video_preview_dialog_energy"):h.default.onCostNotEnought(p.default.ITEM_ID_ENERGY),!1;var r={stageId:e};for(var a in t){var i=t[a];r[a]=i}return this.setStandStageId(e),o=function(){},f.default.warpDialogWithEffect("vRoomDialog",r,o),!0},t.finishStage=function(e,t,o){var n=s.default.get("stage_db",e),r={petId:0,stageId:null,energySkillId:null,goldRewardNum:0,score:0,scoreSteps:[],rating:0,rewards:[]};r.stageId=e,r.petId=o,n.stageProgress&&(!this.stageProgress||this.stageProgress<n.stageProgress)&&(this.stageProgress=n.stageProgress);var a=[];a.push([t,0]);var i=0;for(var l in a){i+=a[l][0]}r.score=i,r.scoreSteps=a;var c=this.getStageRatingFromScore(i);r.rating=c;var u=!1;this.stageDatas[e].rating<c&&(this.stageDatas[e].rating=c,u=!0),c>1&&d.default.addItemAmount(920,1,"\u4efb\u52a1\u7269\u54c1");var h=n.energy;d.default.addItemAmount(p.default.ITEM_ID_ENERGY,-h,"\u5173\u5361\u6d88\u8017\u4f53\u529b");var f=Math.ceil(n.rewardGoldNum*(i/100));return d.default.addItemAmount(p.default.ITEM_ID_GOLD,f,"\u5173\u5361\u7ed3\u7b97"),r.rewards=[],r.goldRewardNum=f,this.saveRecord(),u&&this.sendMsg("MSG_STAGE_RATING_CHAGNED",{stageId:e,rating:c}),r},t.getRewardBoxChest=function(e){var t=l.default.clone(s.default.get("item_box_db",e));for(var o in t.items){var n=t.items[o];if(s.default.get("item_template_db",n.itemId).flag==p.default.ITEM_FLAG_CHEST)return n.itemId}},t.openChest=function(e){d.default.addItemAmount(p.default.ITEM_ID_OPEN_CHEST,1,"\u5b9d\u7bb1\u5f00\u542f\u6b21\u6570");var t={rewards:null},o=[],n=s.default.get("item_template_db",e).data.rewards;for(var r in n){var a=n[r],i=d.default.openItemBox(a);for(var l in i){var c=(f=i[l])[0],u=f[1];o.push({itemId:c,amount:u})}}for(var h in o){var f=o[h];d.default.addItemAmount(f.itemId,f.amount,"\u5f00\u5b9d\u7bb1\u5956\u52b1")}return d.default.addItemAmount(e,-1,"\u5f00\u7bb1\u5b50"),t.rewards=o,t},t.calcStageRating=function(e,t){var o=s.default.get("stage_db",e);if(!o)return 0;return t>=o.income3?4:t>=o.income2?3:t>=o.income1?2:1},t.getRatingDesc=function(e){return v[e]||"\u672a\u77e5"},t.getHardLevelIsOpen=function(){return this.refreshHardLevelIsOpen(),this.bHardLevelIsOpen},t.getFirstOpenHardLevel=function(){return this.refreshHardLevelIsOpen(),this.firstOpenHardLevel||!1},t.markFirstOpenHardLevel=function(){this.refreshHardLevelIsOpen(),this.firstOpenHardLevel=!1,this.saveRecord()},t.refreshHardLevelIsOpen=function(){var e=this.bHardLevelIsOpen;if(!this.bHardLevelIsOpen){this.bHardLevelIsOpen=!1;var t=s.default.getDb("stage_chapter_db");for(var o in t){var n=parseInt(o),r=t[o];r.hardLevel&&r.hardLevel==p.default.STAGE_MAP_HARD_HARD_LEVEL&&(this.bHardLevelIsOpen=this.bHardLevelIsOpen||this.isChapterUnlocked(n))}}!e&&this.bHardLevelIsOpen&&(this.firstOpenHardLevel=!0,this.saveRecord())},t.isStageStanded=function(e){return!0},t.getStandStageId=function(e){return void 0===e&&(e=1),this.standStageIdDict[e]},t._setStandStageId=function(e,t){void 0===t&&(t=1),e&&(this.standStageIdDict[t]=e,this.standedStageIds[e]=!0,this.saveRecord())},t.setStandStageId=function(e){e=parseInt(e);var t=s.default.getDb("stage_chapter_db")||{};for(var o in t){var n=t[o],r=n.pathStageIds||[];for(var a in r)if(e==r[a])return void this._setStandStageId(e,n.hardLevel)}},t.getStageProgress=function(){return this.stageProgress},t.getStageRating=function(e){var t=this.stageDatas[e];return t&&t.rating||0},t.isStageUnlocked=function(e){return!!(g.default.bUnlockAllStage||e<=1)||this.getStageRating(e-1)>=2},t.isStageDisplay=function(e){return!0},t.isChapterLastStage=function(e){if(!e)return!1;var t=s.default.get("stage_db",e);if(!t)return!1;var o=t.chapter.pathStageIds||[],n=o[o.length-1];return!(!n||n!=e)},t.isChapterUnlocked=function(e){if(g.default.bUnlockAllStage)return!0;var t=s.default.get("stage_chapter_db",e-1);if(!t)return!0;var o=t.pathStageIds||[];return this.getStageRating(o[o.length-1])>=2},t.isChapterStageFighted=function(e){if(!e)return!1;var t=s.default.get("stage_chapter_db",e)||{};if(!t.stageIds)return!1;var o=t.stageIds;for(var n in o){var r=o[n],a=this.getStageRating(r);if(!a||a<=0)return!1}return!0},t.hasPrevChapter=function(e){return null!=s.default.quietGet("stage_chapter_db",e-1)},t.hasNextChapter=function(e){return null!=s.default.quietGet("stage_chapter_db",e+1)},t.getStageRatingFromScore=function(e){for(var t=s.default.getDb("stage_score_mapping_db"),o=t.length-1;o>=0;o--){var n=t[o];if(n.score<=e)return n.rating}return t[0].rating},t.getRatingTexture=function(e){if(!this._ratingTextures){var t={},o=s.default.getDb("stage_score_mapping_db");for(var n in o){var r=o[n];t[r.rating]=r.texture}this._ratingTextures=t}return this._ratingTextures[e]||"2d/icon/unknown.png"},t.getRatingTextureInStageMap=function(e){if(!this._ratingInStageMapTextures){var t={},o=s.default.getDb("stage_score_mapping_db");for(var n in o){var r=o[n];t[r.rating]=r.textureInStageMap||r.texture}this._ratingInStageMapTextures=t}return this._ratingInStageMapTextures[e]||"2d/icon/unknown.png"},t.calcChapterIdByStageId=function(e){var t;return s.default.forDb("stage_chapter_db",function(o,n){for(var r=0;r<n.stageIds.length;r++)if(e==n.stageIds[r])return t=n.id,!0}),t},t.getMaxUnlockedStageIdByChapterId=function(e){var t=s.default.get("stage_chapter_db",e),o=0;for(var n in t.stageIds){var r=t.stageIds[n];r>0&&this.isStageUnlocked(r)&&o<r&&(o=r)}return 0==o?null:o},t.getMaxUnlockedChapterId=function(e){e=e||p.default.STAGE_MAP_NORMAL_HARD_LEVEL;var t=0,o=s.default.getDb("stage_chapter_db");for(var n in o){var r=o[n];if(r.hardLevel==e){var a=r.id;this.isChapterUnlocked(a)&&t<a&&(t=a)}}return 0==t?null:t},t.getChapterIdByStageId=function(e){var t=s.default.getDb("stage_chapter_db");for(var o in t){var n=t[o];for(var r in n.stageIds){if(n.stageIds[r]==e)return n.id}}return null},t.isChapterRewardCanReceived=function(e){return!this.chapterRewardReceiveds[e]&&(!(s.default.get("stage_chapter_db",e).rewardBoxIds.length<=0)&&(!!this.hasNextChapter(e)&&!!this.isChapterUnlocked(e+1)))},t.isCanReceiveChapterRewardAndGiveTips=function(e){return this.chapterRewardReceiveds[e]?(u.default.showMsgTip("\u5df2\u9886\u53d6"),!1):s.default.get("stage_chapter_db",e).rewardBoxIds.length<=0?(u.default.showMsgTip("\u6ca1\u6709\u7ae0\u8282\u5956\u52b1"),!1):this.hasNextChapter(e)?!!this.isChapterUnlocked(e+1)||(u.default.showMsgTip("\u8bf7\u901a\u8fc7\u6240\u6709\u5173\u5361"),!1):(u.default.showMsgTip("\u6700\u540e\u4e00\u7ae0\u6ca1\u6709\u5956\u52b1"),!1)},t.receiveChapterReward=function(e){if(!this.isChapterRewardCanReceived(e))return!1;var t=s.default.get("stage_chapter_db",e);this.chapterRewardReceiveds[e]=!0,this.saveRecord();for(var o in t.rewardBoxIds){var n=t.rewardBoxIds[o],r=d.default.openItemBox(n);for(var a in r){var i=r[a],l=i[0],c=i[1];d.default.addItemAmount(l,c,"\u7ae0\u8282\u5956\u52b1");var p=d.default.getItemAmount(l);u.default.addGotItemTip(l,c,null,null,p)}}return!0},t.resetCurHardLevel=function(){this.curHardLevel=p.default.STAGE_MAP_NORMAL_HARD_LEVEL},t.getCurHardLevel=function(){return null==this.curHardLevel&&(this.curHardLevel=p.default.STAGE_MAP_NORMAL_HARD_LEVEL),this.curHardLevel},t.setCurHardLevel=function(e){this.curHardLevel=e},t.switchHardLevel=function(){this.curHardLevel==p.default.STAGE_MAP_NORMAL_HARD_LEVEL?this.curHardLevel=p.default.STAGE_MAP_HARD_HARD_LEVEL:this.curHardLevel==p.default.STAGE_MAP_HARD_HARD_LEVEL&&(this.curHardLevel=p.default.STAGE_MAP_NORMAL_HARD_LEVEL)},t.getMinChapterIdByHardLevel=function(e){var t=1e5,o=s.default.getDb("stage_chapter_db");for(var n in o){var r=o[n],a=parseInt(n);r.hardLevel==e&&(t=Math.min(a,t))}return t},t.hasConfuseReward=function(e){return!(s.default.get("stage_db",e).confuseRewardId<=0)},t.isStageTriggeredConfuseReward=function(e){return 1==this.confuseRewardTriggeredStageIds[e]},t.markConfuseRewardTriggered=function(e){this.confuseRewardTriggeredStageIds[e]=!0,this.saveRecord()},t.genConfuseConfig=function(e){var t=s.default.get("confuse_reward_db",e);if(!t)return[];if(t.triggerRatio<=l.default.random(100))return[];for(var o=l.default.random(t.minCount,t.maxCount),n=l.default.random(t.minGiftCount,t.maxGiftCount),r=[],a=1;a<=o;a++){var i=null;a<=n&&(i=t.guideNodeNames[l.default.random(t.guideNodeNames.length-1)]);var c=d.default.openItemBox(t.boxId);if(c.length>0){var u=c[0],p=u[0],h=u[1];r.push({rewardItemId:p,rewardItemAmount:h,guideNodeName:i})}}return r},t.addStageSubject=function(e,t,o,n){void 0===o&&(o=1),void 0===n&&(n=10);var r=parseInt(e||0),a=s.default.get("stage_db",r);if(a)return this.addSubjectNodes(a.gradeIds,t,o,n)},t.addSubjectNodes=function(e,t,o,n){if(void 0===o&&(o=1),void 0===n&&(n=10),e){var r=[];for(var a in e){var i=e[parseInt(a)],c=s.default.get("cosmetic_subject_tag_db",parseInt(i));if(c){var u=new cc.Node;if(u.setContentSize(cc.size(32,32)),u.parent=t,u.scale=o,u.addComponent(cc.Sprite).loadSpriteFrameAndKeepSize(c.texture),r.push(u),r.length>=p.default.MAX_SHOW_SUBJECT_NUM)break}}return l.default.layoutNodesHorizonCenter(r,n),r}},t.stageDatas={},t.firstRewardedStageDict={},t=o=a([_],t)}(i.default);o.default=y,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrAd":"mgrAd","./mgrCfg":"mgrCfg","./mgrDebug":"mgrDebug","./mgrDirector":"mgrDirector","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrShop":"mgrShop","./mgrTip":"mgrTip"}],mgrStatics:[function(e,t,o){"use strict";cc._RF.push(t,"75340bqMetG7riP9ZFvjiE9","mgrStatics");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=(e("./mgrPlayer"),e("../../ulframework/utils/Tools"),e("./mgrSdk")),s=e("./mgrNetwork"),l=e("../Const"),c=e("./mgrCfg"),u=cc._decorator.ccclass,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadLocalUIDescs()},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.loadLocalUIDescs=function(){},t.sendStatisData=function(e,t){1==i.default.getCopNumberValueByKey("b_statics_interactive")&&(this.bUseMegaStatics?s.default.sendDataToMegadata(e,t):i.default.megadataServer(e))},t.getViewNameByClassName=function(e){},t.getTargetNameByNodeName=function(e){},t._getBasicStaticsDataArr=function(){return[]},t.staticsUIStart=function(e,t){void 0===t&&(t=null)},t.staticsUIDestroy=function(e,t,o){void 0===o&&(o=null)},t.staticsUIClick=function(e,t,o){void 0===o&&(o=null)},t.staticsUIInfo=function(e,t,o,n){void 0===t&&(t=null),void 0===o&&(o=null),void 0===n&&(n=!1)},t.staticsFreeMall=function(e){},t.staticsError=function(e){},t.getViewNameByResourceName=function(e){},t.staticsAccountRegister=function(){},t.staticsAccountLogin=function(){},t.staticsRoleCreate=function(){},t.staticsRoleLogin=function(){},t.staticsAuhSuccess=function(){},t.staticsClickOutLink=function(e){},t.staticsOutLinkSuccess=function(e){},t.staticsEnterView=function(e,t){},t.statisOnStageStart=function(e,t){void 0===t&&(t="\u672a\u77e5\u539f\u56e0");var o=["gameLevelStart",e.toString(),t];this.sendStatisData(o)},t.statisOnStageEnd=function(e,t,o){void 0===o&&(o="\u672a\u77e5\u539f\u56e0");var n=["gameLevelComplete",e.toString(),(t?1:0).toString(),o,"0","0","0","0","0","0"];this.sendStatisData(n)},t.statisOnSign=function(e,t){var o=this._getBasicStaticsDataArr();o.unshift("sign"),o.push(e.toString()),o.push(t.toString()),this.sendStatisData(o)},t.statisOnGuide=function(e,t,o){var n=this._getBasicStaticsDataArr();n.unshift("guide"),n.push(e.toString()),n.push(t.toString()),n.push(o.toString()),this.sendStatisData(n)},t.statisShareOpen=function(e,t){},t.statisShareResult=function(e,t,o){},t.statisOnAdvRequest=function(e,t,o){void 0===o&&(o=[])},t.statisOnAdvClick=function(e,t,o,n){void 0===n&&(n=[])},t.statisOnAdvResult=function(e,t,o,n){void 0===n&&(n=[])},t.statisOnAddItemAmount=function(e,t,o){if(t&&0!=t&&e&&!this.DISABLE_STATICS_ITEM_ITEM_ID_DICT[e]&&(e!=l.default.ITEM_ID_GOLD||"1"==i.default.getCopByKey("b_open_statics_gold"))){var n=null,r=c.default.get("item_template_db",e);n=r.flag&&r.flag==l.default.ITEM_FLAG_PART?"\u90e8\u4ef6\u7edf\u79f0":r.name||"0";var a=this._getBasicStaticsDataArr();t<0?a.unshift("gameCoinLost"):a.unshift("gameCoinAdd"),a.push(n.toString()),a.push(Math.abs(t).toString()),a.push((o||"0").toString()),this.sendStatisData(a)}},t.statisOnItemBought=function(e,t,o){},t.statisCommonEvent=function(e){},t.bUseMegaStatics=!1,t.localUIDescDict={},t.DISABLE_STATICS_ITEM_ITEM_ID_DICT={902:!0,903:!0,904:!0,911:!0,912:!0,913:!0,914:!0,915:!0,916:!0,917:!0,918:!0,919:!0,920:!0,922:!0,923:!0,924:!0,31:!0,32:!0,33:!0,34:!0,35:!0,36:!0,37:!0,38:!0,39:!0,40:!0},t=r([u],t)}(a.default);o.default=d,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrCfg":"mgrCfg","./mgrNetwork":"mgrNetwork","./mgrPlayer":"mgrPlayer","./mgrSdk":"mgrSdk"}],mgrSubjectDress:[function(e,t,o){"use strict";cc._RF.push(t,"57e28iXNYRGlYHKp/tZn5Ia","mgrSubjectDress");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("../../ulframework/utils/Tools"),s=e("./mgrCfg"),l=e("./mgrRecord"),c=e("./mgrPlayer"),u=e("./mgrTip"),d=e("./mgrI18n"),p=cc._decorator,h=p.ccclass,f=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd.bind(this)})},t.loadRecord=function(){e.loadRecord.call(this);var t=(l.default.getData("subject_dress")||{}).subjectDressDict||{},o={};for(var n in t){var r=[],a=t[n];for(var s in a)r.push(a[s]);r&&r.length>0&&(r=i.default.sortArrayByField(r,"-addTime")),o[n]=r}this.subjectDressDict=o},t.saveRecord=function(){e.saveRecord.call(this);var t={subjectDressDict:this.subjectDressDict};l.default.setData("subject_dress",t)},t.getSubjectDressCount=function(){cc.log("--this.subjectDressDict=",this.subjectDressDict);var e=0,t=s.default.getDb("cosmetic_subject_tag_db");for(var o in t){var n=t[o];e+=this.getSubjectDressArr(n.id).length}return e},t.getAllSubjectDressArr=function(){var e=[],t=s.default.getDb("cosmetic_subject_tag_db");for(var o in t){var n=t[o],r=this.getSubjectDressArr(n.id);for(var a in r)e.push(r[a])}return e},t.getSubjectDressArr=function(e){return(this.subjectDressDict||[])[e]||[]},t.addDressAvatar=function(e,t){var o=t.serializeToText(),n=this.getSubjectDressArr(e);for(var r in n){var a=n[r];if(a&&a.avatarStr&&""!=a.avatarStr&&a.avatarStr==o)return{bSuccess:!1,tip:d.default.getText("mgrSubjectDress.1")}}return n.length>=this.MAX_SAVE_SUIT_COUNT&&n.splice(n.length-1,1),n.push({addTime:i.default.time(),avatarStr:o}),this.subjectDressDict=this.subjectDressDict||{},this.subjectDressDict[e]=n,this.saveRecord(),this.sendMsg("MSG_SUBJECT_DRESS_ADDED",{avatarStr:o}),{bSuccess:!0,tip:d.default.getText("mgrSubjectDress.2")}},t.deleteRecordByAvatarStr=function(e){var t=this.subjectDressDict||{};for(var o in t)for(var n=t[o]||[],r=n.length,a=0;a<r;a++){var i=n[a];if(i&&i.avatarStr&&""!=i.avatarStr&&i.avatarStr==e)return n.splice(a,1),this.subjectDressDict[o]=n,this.saveRecord(),void this.sendMsg("MSG_SUBJECT_DRESS_REMOVED",{avatarStr:e})}},t.getLeftEmptyCaseCount=function(e){var t=this.getSubjectDressArr(e).length;return Math.max(0,this.MAX_SAVE_SUIT_COUNT-t)},t.onMsgAdEventSuccessd=function(e){var t=e,o=t.adEventId;t.userData;cc.log("mgrSubjectDress.onMsgAdEventSuccessd.data==",t),"video_free_suit"==o&&(c.default.addItemAmount(1,10,"\u9886\u53d6\u8fc7\u5957\u88c5\u7684\u514d\u8d39\u5956\u52b1"),u.default.addGotItemTip(1,10,null,{autoCloseDialogDelayTime:.8}))},t.setCurrSelectedSubjectId=function(e){this.currSelectedSubjectId=e},t.getCurrSelectedSubjectId=function(){return this.currSelectedSubjectId},t.subjectDressDict={},t.MAX_SAVE_SUIT_COUNT=20,t.currSelectedSubjectId=1,t=r([h],t)}(a.default));o.default=f,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","./mgrCfg":"mgrCfg","./mgrI18n":"mgrI18n","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrTip":"mgrTip"}],mgrTimer:[function(e,t,o){"use strict";cc._RF.push(t,"a4ac9tk1R9PRJWGdaJACgaD","mgrTimer");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("../../ulframework/utils/Timer"),s=e("../../ulframework/utils/Tools"),l=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord(),i.default.callLoop(.06,this.onTimerLoop.bind(this),!0),this.registerListeners({})},t.loadRecord=function(){e.loadRecord.call(this),this.timerEventDict={}},t.saveRecord=function(){e.saveRecord.call(this)},t.onTimerLoop=function(){var e=s.default.time();for(var t in this.timerEventDict){var o=this.timerEventDict[t];if(o){var n=o.node,r=o.repeatCount,a=o.runCount||0;if(!r&&!cc.isValid(n)||r>0&&r==a)this.timerEventDict[t]=null;else e-(o.lastRunTime||e)<(o.span||0)||(o.lastRunTime=e,0!=r?o.runCount=(o.runCount||0)+1:o.bIgnoreForeverWarn||cc.log("------Timer Repeat forever"),o.callback&&o.callback())}}},t.addTimerData=function(e){e&&(this.timerAutoCount+=1,this.timerEventDict[this.timerAutoCount]=e)},t.callLater=function(e,t,o){var n={span:e||0,callback:t,node:o,repeatCount:1,lastRunTime:s.default.time()};this.addTimerData(n)},t.callLoop=function(e,t,o){if(1==o){var n={span:e||0,callback:t,node:null,repeatCount:0,bIgnoreForeverWarn:o,lastRunTime:s.default.time()};this.addTimerData(n)}else if(o instanceof cc.Node){n={span:e||0,callback:t,node:o,repeatCount:-1,lastRunTime:s.default.time()};this.addTimerData(n)}else{n={span:e||0,callback:t,node:null,repeatCount:0,bIgnoreForeverWarn:!1,lastRunTime:s.default.time()};this.addTimerData(n)}},t.timerEventDict={},t.timerAutoCount=0,t=r([l],t)}(a.default);o.default=c,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools"}],mgrTip:[function(e,t,o){"use strict";cc._RF.push(t,"5653cyPaHRLGYVjQSV6Sg4n","mgrTip");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("./mgrPlayer"),s=e("./mgrDirector"),l=e("../../ulframework/utils/Timer"),c=e("../view/dialog/vPromptDialog"),u=e("../view/node/vMsgTip"),d=e("../Const"),p=e("./mgrCfg"),h=e("../../ulframework/utils/Tools"),f=e("./mgrPool"),g=e("../view/dialog/vPromptImgDialog"),m=e("./mgrChannel"),_=e("../view/node/vJumpOtherGameBannerItem"),v=e("./mgrAd"),y=e("../view/dialog/vNativeBanner"),C=e("./mgrI18n"),S=cc._decorator.ccclass,b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return n(t,e),o=t,t.onLoad=function(){e.onLoad.call(this),this.msgTipQueue=[]},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t.alertPrompt=function(e,t,o,n,r){return this._alertPrompt(e,t,[o],[n],r||"")},t.alertPrompt2=function(e,t,o,n,r,a,i){return this._alertPrompt(e,t,[o,n],[r,a],i||"")},t._alertPrompt=function(e,t,o,n,r){var a=new c.default({title:e,content:t,btnTexts:o,callbacks:n,adEventId:r});return a.openDialog(),a},t.alertPromptImg=function(e,t,o,n,r){return this._alertPromptImg(e,t,o,[n],[r])},t.alertPromptImg2=function(e,t,o,n,r,a,i){return this._alertPromptImg(e,t,o,[n,r],[a,i])},t._alertPromptImg=function(e,t,o,n,r){var a=new g.default({title:e,content:t,imgPath:o,btnTexts:n,callbacks:r});return a.openDialog(),a},t.showMsgTip=function(e,t,o){try{if(t=t||cc.v2(.5*s.default.width,.75*s.default.height),this.msgTipQueue.push({text:e,startPosition:t,params:o}),!this.msgTipTimer){var n=new l.default(.3,-1,this._onMsgTipTimerLoop.bind(this));n.start(!0),this.msgTipTimer=n,this._onMsgTipTimerLoop(n)}}catch(e){}},t._onMsgTipTimerLoop=function(e){if(this.msgTipQueue.length<=0)return e.stop(),void(this.msgTipTimer=null);var t=this.msgTipQueue.shift(),o=t.params||{},n=o.textColor,r=o.outlineColor,a=new u.default;a.setText(t.text),a.setColorEx(n||cc.color(255,255,255),r||cc.color(102,102,102)),a.play(t.startPosition)},t.getTipRootNode=function(){var e=s.default.getRunningSceneCanvas(),t=e.getChildByName("__tip_root__");return cc.isValid(t)||((t=new cc.Node).parent=e,t.name="__tip_root__",t.zIndex=d.default.GLOBAL_ORDER_TIP),t},t.cleanGotItemTip=function(){this.defaultGotItemQueue.length<=0||(this.defaultGotItemQueue.splice(0,this.defaultGotItemQueue.length),this.gotItemDialogShowingFlags={})},t.addGotItemTip=function(e,t,o,n,r){t<=0||(this.defaultGotItemQueue.push({itemId:e,amount:t,nowAmount:r||i.default.getItemAmount(e),amountSteps:o,customerContext:n}),this._tryShowGotItemDialog())},t.insertGotItemTip=function(e,t,o,n,r){this.defaultGotItemQueue.unshift({itemId:e,amount:t,nowAmount:r||i.default.getItemAmount(e),amountSteps:o,customerContext:n}),this._tryShowGotItemDialog()},t.addGotItemTipGroup=function(e){var t=this,o=null;h.default.forEachMap(this.gotItemQueues,function(e,n){if(n!=t.defaultGotItemQueue&&n.length<=0)return o=n,!0}),o||(o=[],this.gotItemQueues.push(o));for(var n=0;n<e.length;n++){var r=e[n];o.push(r)}this._tryShowGotItemDialog()},t._tryShowGotItemDialog=function(){for(var e=this,t=function(t){var n=o.gotItemQueues[t];if(!o.gotItemDialogShowingFlags[t]&&n.length>0){o.gotItemDialogShowingFlags[t]=!0;var r=n.shift(),a={};r.customerContext&&h.default.forEachMap(r.customerContext,function(e,t){a[e]=t}),a.itemId=r.itemId,a.amount=r.amount,a.amountSteps=r.amountSteps,a.fOnDialogClose=function(){e.gotItemDialogShowingFlags[t]=!1,r.customerContext&&"function"==typeof r.customerContext.fOnDialogClose&&r.customerContext.fOnDialogClose(),e._tryShowGotItemDialog()},s.default.openDialog("vGotItemDialog",a)}},o=this,n=0;n<this.gotItemQueues.length;n++)t(n)},t.isAllGotItemTipDisplayed=function(){var e=!1;if(h.default.forEachMap(this.gotItemDialogShowingFlags,function(t,o){if(o)return e=!0,!0}),e)return!1;for(var t=0;t<this.gotItemQueues.length;t++){if(this.gotItemQueues[t].length>0)return!1}return!0},t.showItemDetailDialog=function(e,t,o){var n=p.default.get("item_template_db",e);if(n){o=o||{},t=t||1,o.itemId=e,o.amount=t,o.bDetail=!0,o.bDisableTip=!0,o.bDisableSound=!0,o.bDisableOpenEffect=!0;var r="vGotItemDialog";return n.flag==d.default.ITEM_FLAG_PART&&(r="vGotItemDialog"),s.default.openDialog(r,o)}},t.isWaitingDialogOpened=function(){return null!=this.waitingDialog},t.openWaitingDialog=function(e,t,o){var n=this;if(!this.isWaitingDialogOpened()){var r=new c.default({title:e||C.default.getText("mgrTip.1"),content:t||C.default.getText("mgrTip.2"),btnTexts:[o||C.default.getText("mgrTip.3")],fOnDialogClose:function(){n.waitingDialog=null}});r.openDialog(),this.waitingDialog=r}},t.closeWaitingDialog=function(){this.waitingDialog&&(this.waitingDialog.closeDialog(),this.waitingDialog=null)},t.closeAllTipDialog=function(){this.closeWaitingDialog(),this.cleanGotItemTip()},t.playParticleOnce=function(e,t,o,n,r,a){var i=f.default.get("particle",e);i&&(i.parent=a||this.getTipRootNode(),i.position=a?cc.v2(t,o):i.parent.convertToNodeSpace(cc.v2(t,o)),null!=n&&(i.scale=n),null!=r&&(i.rotation=r),i.setAutoRemoveOnFinish(!0))},t.playAnimNodeOnce=function(e,t,o,n){void 0===n&&(n=1);var r=f.default.get("animNode",e);if(r){var a=new cc.Node;a.parent=this.getTipRootNode(),r.parent=a,a.scale=n,a.position=a.parent.convertToNodeSpace(cc.v2(t,o)),r.play(),r.registerEventCallback(function(e){"finished"==e.name&&(r.removeFromParent(),f.default.put(r),r=null)})}},t.setBadgeEnabled=function(e,t,o,n){void 0===o&&(o=0),void 0===n&&(n=0),t?this.addBadge(e,o,n):this.removeBadge(e)},t.addBadge=function(e,t,o){if(void 0===t&&(t=0),void 0===o&&(o=0),!e.__sprite_badge){t=t||0,o=o||0;var n=e.getContentSize(),r=s.default.createSpriteNode("2d/ui/common/art_01.png");r.parent=e,r.zIndex=3e4,r.setPosition(.8*n.width+t,.8*n.height+o),r.runAction(cc.repeatForever(cc.spawn(cc.sequence(cc.rotateTo(.1,10),cc.rotateTo(.1,-10),cc.rotateTo(.1,10),cc.rotateTo(.1,0)),cc.sequence(cc.moveBy(.1,cc.v2(0,-2)),cc.moveBy(.1,cc.v2(1,0)),cc.moveBy(.1,cc.v2(0,2)),cc.moveBy(.1,cc.v2(-1,0)))))),e.__sprite_badge=r}},t.removeBadge=function(e){e.__sprite_badge&&(e.__sprite_badge.removeFromParent(),e.__sprite_badge=null)},t.setCountBadgeValue=function(e,t,o,n,r,a){void 0===o&&(o=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===a&&(a=!1),t>0?this.addCountBadge(e,t,o,n,r,a):this.removeCountBadge(e)},t.addCountBadge=function(e,t,o,n,r,a){void 0===o&&(o=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===a&&(a=!1);var i=e.__count_badge;i||((i=s.default.createView("vCountBadge")).parent=e,i.scale=r,i.zIndex=3e4,a||i.runAction(cc.repeatForever(cc.spawn(cc.sequence(cc.rotateTo(.07,10),cc.rotateTo(.07,-10),cc.rotateTo(.07,10),cc.rotateTo(.07,0)),cc.sequence(cc.moveBy(.07,cc.v2(0,-2)),cc.moveBy(.07,cc.v2(1,0)),cc.moveBy(.07,cc.v2(0,2)),cc.moveBy(.07,cc.v2(-1,0)))))),e.__count_badge=i),i.setCount(t),o=o||0,n=n||0;var l=e.getContentSize();i.setPosition(l.width/2*.8+o,l.height/2*.8+n)},t.removeCountBadge=function(e){e.__count_badge&&(e.__count_badge.removeFromParent(),e.__count_badge=null)},t.setBadgeParticleEnabled=function(e,t,o,n,r,a){void 0===o&&(o=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===a&&(a=null),t?this.addBadgeParticle(e,o,n,r,a):this.removeBadgeParticle(e)},t.addBadgeParticle=function(e,t,o,n,r){if(void 0===t&&(t=0),void 0===o&&(o=0),void 0===n&&(n=1),void 0===r&&(r=null),!e.__particle_badge){t=t||0,o=o||0,r=r||"nail_light1",n=n||1;var a=f.default.get("particle",r);a&&(a.parent=e,a.zIndex=3e4,a.scale=n,a.position=cc.v2(t,o),e.__particle_badge=a)}},t.removeBadgeParticle=function(e){e.__particle_badge&&(f.default.put(e.__particle_badge),e.__particle_badge.removeFromParent(),e.__particle_badge=null)},t.addJumpOtherGameBannerItem=function(e,t){if(void 0===t&&(t=cc.v2(0,0)),m.default.canGameInterPush3()){var o=new _.default;o.parent=e;var n=v.default.getBannerHeight();return o.y=-s.default.height/2+n+t.y,o.x=t.x,!0}},t.showNativeBanner=function(e,t,o){if(void 0===t&&(t=cc.v2(0,0)),o=o||d.default.AD_BANNER_NAME,v.default.preCheckCanTriggerAdEvent(o)){var n=new y.default({adEventId:o});return n.parent=e,n.y=-s.default.height/2+t.y,n.x=t.x,this.nativeAdBanner=n,!0}},t.hideNativeBanner=function(){this.nativeAdBanner&&cc.isValid(this.nativeAdBanner)&&this.nativeAdBanner.destroy(),this.nativeAdBanner=null},t.defaultGotItemQueue=[],t.gotItemQueues=[o.defaultGotItemQueue],t.gotItemDialogShowingFlags={},t.waitingDialog=null,t=o=r([S],t)}(a.default);o.default=b,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../../ulframework/utils/Tools":"Tools","../Const":"Const","../view/dialog/vNativeBanner":"vNativeBanner","../view/dialog/vPromptDialog":"vPromptDialog","../view/dialog/vPromptImgDialog":"vPromptImgDialog","../view/node/vJumpOtherGameBannerItem":"vJumpOtherGameBannerItem","../view/node/vMsgTip":"vMsgTip","./mgrAd":"mgrAd","./mgrCfg":"mgrCfg","./mgrChannel":"mgrChannel","./mgrDirector":"mgrDirector","./mgrI18n":"mgrI18n","./mgrPlayer":"mgrPlayer","./mgrPool":"mgrPool"}],mgrVideoRecorder:[function(e,t,o){"use strict";cc._RF.push(t,"e5cc5AIHCxC+bqRjEGlrRnq","mgrVideoRecorder");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/manager/Manager"),a=e("../Const"),i=e("./mgrChannel"),s=e("../../ulframework/utils/Timer"),l=e("./mgrSdk"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),s.default.callLoop(1,this.onTimerLoop.bind(this),!0)},t.onTimerLoop=function(){this.bRecordVideo&&(this.lastRecordVideoTime+=1,this.lastRecordVideoTime>=this.maxRecordTime&&this.stopRecordGameVideo())},t.isOpenVideoRecord=function(){return this.isCopOpenVideoRecord()&&a.default.IS_OPEN_VIDEO_RECORD},t.isCopOpenVideoRecord=function(){return"1"==l.default.getCopByKey("b_record_video")&&i.default._isSupportRecordShare},t.getLastRecordVideoTime=function(){return this.lastRecordVideoTime||0},t.tryStartRecordGameVideo=function(e){void 0===e&&(e=60),console.log("mgrRecord.tryStartRecordGameVideo===",this.recordStatus,this.recordGameVideoActioningName),l.default.isOpenVideoRecord()?this.recordStatus!=this.RECORDING&&this.startRecordGameVideo(e):console.log("\u5c1a\u672a\u5f00\u542f\u5f55\u5c4f")},t.startRecordGameVideo=function(e){console.log("mgrRecord.startRecordGameVideo===",this.recordStatus,this.recordGameVideoActioningName),this.lastRecordVideoTime=0,l.default.recordGameVideo("start",!0,e),this.recordGameVideoActioningName="start",this.bRecordVideo=!0},t.stopRecordGameVideo=function(){console.log("mgrRecord.stopRecordGameVideo===",this.recordStatus,this.recordGameVideoActioningName),l.default.isOpenVideoRecord()?this.recordStatus!=this.PRE_RECORD&&this.recordStatus!=this.RECORD_FINISH&&(this.lastRecordVideoTime<this.minRecordTime||(l.default.recordGameVideo("stop"),this.recordGameVideoActioningName="stop",this.bRecordVideo=!1)):console.log("\u5c1a\u672a\u5f00\u542f\u5f55\u5c4f")},t.pauseRecordGameVideo=function(){console.log("mgrRecord.pauseRecordGameVideo==",this.recordStatus,this.recordGameVideoActioningName),l.default.isOpenVideoRecord()?(l.default.recordGameVideo("pause"),this.recordGameVideoActioningName="pause",this.bRecordVideo=!1):console.log("\u5c1a\u672a\u5f00\u542f\u5f55\u5c4f")},t.resumeRecordGameVideo=function(){console.log("mgrRecord.resumeRecordGameVideo==",this.recordStatus,this.recordGameVideoActioningName),l.default.isOpenVideoRecord()?(l.default.recordGameVideo("resume"),this.recordGameVideoActioningName="resume",this.bRecordVideo=!0):console.log("\u5c1a\u672a\u5f00\u542f\u5f55\u5c4f")},t.setRecordStatus=function(e){this.recordStatus=e},t.getRecordStatus=function(){return this.recordStatus},t.isRecording=function(){return this.bRecordVideo&&this.recordStatus==this.RECORDING},t.lastRecordVideoTime=0,t.bRecordVideo=!1,t.recordStatus=1,t.minRecordTime=5,t.maxRecordTime=60,t.PRE_RECORD=1,t.RECORDING=2,t.RECORD_FINISH=3,t}(r.default);o.default=c,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Timer":"Timer","../Const":"Const","./mgrChannel":"mgrChannel","./mgrSdk":"mgrSdk"}],mgrWish:[function(e,t,o){"use strict";cc._RF.push(t,"c5684U7aB9JAriFouPXziF4","mgrWish");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=e("./mgrRecord"),s=e("../../ulframework/utils/Tools"),l=e("./mgrCfg"),c=e("./mgrPlayer"),u=e("./mgrTip"),d=e("../Const"),p=e("./mgrShop"),h=cc._decorator.ccclass,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this.loadRecord()},t.loadRecord=function(){e.loadRecord.call(this);var t=i.default.getData("wish")||{};this.allWishCount=t.allWishCount||0,this.goldWishCount=t.goldWishCount||0,this.specialWishCount=t.specialWishCount||0,this.specialWishProgress=t.specialWishProgress||0,this.calSpecialParIds()},t.saveRecord=function(){e.saveRecord.call(this);var t={allWishCount:this.allWishCount,goldWishCount:this.goldWishCount,specialWishProgress:this.specialWishProgress,specialWishCount:this.specialWishCount};i.default.setData("wish",t)},t.calSpecialParIds=function(){var e=l.default.get("wish_module_config_db",1);if(e){var t=e.suitIds,o=l.default.get("suit_db",t[0]||0),n=l.default.get("suit_db",t[1]||0);if(o)for(var r=0;r<o.displayIds.length;r++){var a=o.displayIds[r];this.specialPartIds[a]=!0}if(n)for(r=0;r<n.displayIds.length;r++){a=n.displayIds[r];this.specialPartIds[a]=!0}}},t.tryWish=function(e){var t=this,o=l.default.get("wish_module_config_db",1);if(o){var n=this.getWishCost();if(cc.log("goldWishCount, costAmount",this.goldWishCount,n),(e||p.default.tryCostByItems([[d.default.ITEM_ID_GOLD,n]],"\u5360\u535c\u6d88\u8017"))&&!this.trySpecialWish(e)){var r=!1;if(this.allWishCount<30){var a=o.preBoxIds[s.default.random(o.preBoxIds.length)-1];c.default.openItemBox(a).forEach(function(e){var t=e[0],o=e[1];c.default.addItemAmount(t,o,"\u5360\u535c\u5c0f\u5c4b"),u.default.addGotItemTip(t,o)})}else{a=o.normalBoxIds[s.default.random(o.normalBoxIds.length)-1];c.default.openItemBox(a).forEach(function(e){var o=e[0],n=e[1];c.default.addItemAmount(o,n,"\u5360\u535c\u5c0f\u5c4b"),u.default.addGotItemTip(o,n),r=!!r||1==t.specialPartIds[o]})}r?(this.specialWishProgress=0,this.specialWishCount++):this.specialWishProgress++,this.allWishCount++,this.goldWishCount+=e?0:1,this.saveRecord(),this.sendMsg("MSG_WISH_SUCCESS")}}},t.trySpecialWish=function(e){var t=this.getSpecialWishProgress();if(t[0]>=t[1]){var o=l.default.get("wish_special_db",this.specialWishCount%7+1);if(!o)return!1;for(var n=0;n<o.rewards.length;n++){var r=o.rewards[n],a=r[0],i=r[1];c.default.addItemAmount(a,i,"\u5360\u535c\u6c34\u6676\u7403"),u.default.addGotItemTip(a,i)}return this.specialWishProgress=0,this.specialWishCount++,this.allWishCount++,this.goldWishCount+=e?0:1,this.saveRecord(),this.sendMsg("MSG_WISH_SUCCESS"),!0}return!1},t.getSpecialWishProgress=function(){var e=l.default.get("wish_special_db",this.specialWishCount%7+1);return this.specialWishCount>=7&&(e=l.default.get("wish_special_db",7)),[this.specialWishProgress,e.needWishCount]},t.getWishCost=function(){var e=l.default.get("wish_module_config_db",1);return e?e.firstCost+e.costGrowthBase*(this.goldWishCount*(this.goldWishCount+1)/2):0},t.allWishCount=0,t.goldWishCount=0,t.specialWishCount=0,t.specialWishProgress=0,t.specialPartIds={},t=r([h],t)}(a.default);o.default=f,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager","../../ulframework/utils/Tools":"Tools","../Const":"Const","./mgrCfg":"mgrCfg","./mgrPlayer":"mgrPlayer","./mgrRecord":"mgrRecord","./mgrShop":"mgrShop","./mgrTip":"mgrTip"}],mgrWordFilter:[function(e,t,o){"use strict";cc._RF.push(t,"a1118JdzxdJhYgV0aWBnGCX","mgrWordFilter");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../ulframework/manager/Manager"),i=cc._decorator.ccclass,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.onLoad=function(){e.onLoad.call(this),this._loadWords()},t.loadRecord=function(){e.loadRecord.call(this)},t.saveRecord=function(){e.saveRecord.call(this)},t._loadWords=function(){},t.checkStr=function(e){return!0},t.filterStr=function(e,t){return e},t.hasSymbol=function(e){return!1},t.filterSymbol=function(e){return e||""},t=r([i],t)}(a.default);o.default=s,cc._RF.pop()},{"../../ulframework/manager/Manager":"Manager"}],"polyglot.min":[function(e,t,o){"use strict";cc._RF.push(t,"09470GwJUNIP7IRGdiXwx78","polyglot.min");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(e,r){"function"==typeof define&&define.amd?define([],function(){return r(e)}):"object"==(void 0===o?"undefined":n(o))?t.exports=r(e):e.Polyglot=r(e)})(void 0,function(e){function t(e){e=e||{},this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en",this.allowMissing=!!e.allowMissing,this.warn=e.warn||c}function o(e){var t,o,n,r={};for(t in e)if(e.hasOwnProperty(t)){o=e[t];for(n in o)r[o[n]]=t}return r}function r(e){return e.replace(/^\s+|\s+$/g,"")}function a(e,t,o){var n,a;return null!=o&&e?n=r((a=e.split(d))[s(t,o)]||a[0]):n=e,n}function i(e){var t=o(h);return t[e]||t.en}function s(e,t){return p[i(e)](t)}function l(e,t){for(var o in t)"_"!==o&&t.hasOwnProperty(o)&&(e=e.replace(new RegExp("%\\{"+o+"\\}","g"),t[o]));return e}function c(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}function u(e){var t={};for(var o in e)t[o]=e[o];return t}t.VERSION="0.4.3",t.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},t.prototype.extend=function(e,t){var o;for(var r in e)e.hasOwnProperty(r)&&(o=e[r],t&&(r=t+"."+r),"object"==(void 0===o?"undefined":n(o))?this.extend(o,r):this.phrases[r]=o)},t.prototype.clear=function(){this.phrases={}},t.prototype.replace=function(e){this.clear(),this.extend(e)},t.prototype.t=function(e,t){var o,n;return"number"==typeof(t=null==t?{}:t)&&(t={smart_count:t}),"string"==typeof this.phrases[e]?o=this.phrases[e]:"string"==typeof t._?o=t._:this.allowMissing?o=e:(this.warn('Missing translation for key: "'+e+'"'),n=e),"string"==typeof o&&(t=u(t),n=l(n=a(o,this.currentLocale,t.smart_count),t)),n},t.prototype.has=function(e){return e in this.phrases};var d="||||",p={chinese:function(e){return 0},german:function(e){return 1!==e?1:0},french:function(e){return e>1?1:0},russian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){return 1===e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0}},h={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return t}),cc._RF.pop()},{}],pt:[function(e,t,o){"use strict";cc._RF.push(t,"7d234bCs9VIKI33TnU83C70","pt"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.pt={mgrPkMirror:{1:"J\xe1 solicitado",2:"Requer maior n\xedvel"},vSubjectSuitDetailDialog:{1:"Pronto",3:"Usado com sucesso",2:"Usar",4:"Nenhum item dispon\xedvel"},vHudDialog:{1:"Grandes ondas de pedidos est\xe3o chegando!",3:"Acelerar",2:"Agora n\xe3o",5:"Adicionar ao m\xe1ximo",4:"Adicionar ao m\xe1ximo de pedidos",7:"Confirmar",6:"\xd3timo! Comece seu neg\xf3cio agora mesmo!",9:"Pedidos completos",8:"Cancelar"},mgrAd:{1:"Em espera, tente de novo mais tarde",2:"Falha ao reproduzir"},vPromptAdDialog:{1:"Dica",3:"Agora n\xe3o",2:"Assistir v\xeddeo",5:"Assista an\xfancios para obter recompensas",4:"Obter",7:"N\xe3o \xe9 necess\xe1rio",6:"Recompensa de v\xeddeo",8:"OK"},vAdFaildDialog:{1:"Dica",3:"Cancelar",2:"Falha ao conectar. Verifique as condi\xe7\xf5es da sua rede ou tente de novo mais tarde",4:"Tentar novamente"},vDailyQuestDialog:{1:"Tarefas",2:"Medalhas insuficientes, conclua mais algumas tarefas"},vPromptHudCrazyDialog:{1:"Grandes ondas de pedidos est\xe3o chegando!",3:"Obter",2:"Agora n\xe3o",4:"acelerar"},vProductResultDialog:{1:"Vender",3:"Esta boneca j\xe1 est\xe1 \xe0 venda",2:"Confirmar",5:"N\xe3o foi poss\xedvel vender",4:"Colocado \xe0 venda com sucesso"},vHudRankDialog:{10:"Lojas",1:"N\xe3o classificado",3:"Ir para batalha",2:"Ir",5:"Nome",4:"Posi\xe7\xe3o",7:"Classifica\xe7\xe3o",6:"Maior renda",9:"Batalha",8:"Partida"},mgrShop:{1:"N\xe3o foi poss\xedvel comprar",3:"Indispon\xedvel",2:"[%s] insuficiente(s)"},vPartRankItem:{1:"Possu\xeddo"},vPackingLvupDialog:{1:"Embalagem"},vPromptAdSelectDialog:{1:"Dica",3:"Assista an\xfancios para obter gr\xe1tis",2:"Assista v\xeddeos para dobrar",5:"Obter",4:"Agora n\xe3o",6:"Assista an\xfancios para obter gr\xe1tis"},vOfflineRewardDialog:{1:"Obter",3:"Recompensa de v\xeddeo",2:"Assista an\xfancios para dobrar as recompensas",5:"OK",4:"N\xe3o \xe9 necess\xe1rio",7:"Agora n\xe3o",6:"Solicitar 2x"},vPkMirrorDialog:{1:"No palco",3:"Vestir",2:"Obter recompensas",5:"Vezes insuficientes, tente de novo mais tarde",4:"Gr\xe1tis"},vBuildingStoreDialog:{11:"Assistir an\xfancio",10:"Assista an\xfancios para obter 2 de Vigor gr\xe1tis",13:"Dica",12:"Vigor insuficiente",15:"Cancelar",14:"Voc\xea deseja mesmo fechar a loja?",17:"Pedidos completos",16:"Sim",18:"N\xe3o \xe9 poss\xedvel contratar mais",1:"Casa de Bonecas",3:"Pedidos insuficientes. Obtenha mais pedidos agora!",2:"Embalagem",5:"Adicionar ao m\xe1ximo",4:"Agora n\xe3o",7:"Nenhum outro cliente",6:"N\xedvel: %s",9:"Abrir",8:"Algo saiu errado?"},vAdWaitingDialog:{1:"Dica",3:"Cancelar",2:"Conectando\u2026"},vBuildingStoreDetailDialog:{11:"Melhorado com sucesso!",10:"Desbloqueado com sucesso!",1:"N\xedvel atual:",3:"Pr\xf3ximo n\xedvel:",2:"Capacidade:",5:"Melhorar",4:"Casa de Bonecas",7:"Gr\xe1tis",6:"Assista an\xfancios para melhorar gr\xe1tis",9:"M\xe1ximo",8:"Agora n\xe3o"},vSignLotteryItem:{1:"Desbloqueia no n\xedvel %s"},daily_quest_template_db_desc:{1:"Conclua batalhas 3 vezes",3:"Envie curtidas na partida semanal 10 vezes",2:"Ven\xe7a uma batalha 1 vez",5:"Obtenha recompensa de check-in 1 vez",4:"Conclua a partida semanal 1 vez",7:"Abra a loja com sucesso 2 vezes",6:"Obtenha 1 novo item",8:"Acelere a distribui\xe7\xe3o de folhetos 100 vezes"},vDailyQuestListItem:{1:"Ir para",2:"Obter"},vWarpSmallDialogNode:{1:"Carregando\u2026"},vSignLotteryDialog:{1:"Sorteio",3:"Assista v\xeddeos para sortear gr\xe1tis",2:"Gr\xe1tis",5:"Nenhum outro",4:"Volte na pr\xf3xima vez",6:"Volte na pr\xf3xima vez"},mgrSubjectDress:{1:"J\xe1 possui o mesmo traje",2:"Salvo com sucesso"},vPricePromoteAdDialog:{1:"Dica",3:"Agora n\xe3o",2:"Assista v\xeddeos para aumentar o pre\xe7o",4:"3x"},vSignDialog:{11:"Entre online para se conectar e obter recompensas! Verifique sua rede e tente de novo",10:"Dica",13:"Check-in j\xe1 realizado",12:"Confirmar",15:"Aguardar",14:"N\xe3o \xe9 poss\xedvel fazer check-in agora",1:"Check-in",3:"Assista an\xfancios para obter recompensas",2:"Solicitar 2x",5:"N\xe3o \xe9 necess\xe1rio",4:"Recompensa de v\xeddeo",7:"Apenas diamantes",6:"Solicitar tudo",9:"OK",8:"Obter"},vInputNameDialog:{1:"Apelido:",3:"Criar nome",2:"Obter um nome aleat\xf3rio",4:"Confirmar"},vGoldRainDialog:{1:"Sacudir",3:"Uma onda de moedas est\xe1 chegando",2:"Toque no bot\xe3o para obter moedas",5:"Dica",4:"Iniciar",7:"Cancelar",6:"Voc\xea perder\xe1 muitas moedas se sair agora, ainda deseja sair?",8:"Sim"},vMallItemFreeRmb:{1:"Diamantes gr\xe1tis",2:"Gr\xe1tis"},mgrSdk:{1:"Dica",3:"Cancelar",2:"Voc\xea quer sair agora?",4:"Sair do jogo"},vLoadingDialog:{1:"Carregando\u2026",2:"Conclu\xeddo"},StageScriptBase:{1:"Criar",3:"Dica",2:"Bloqueado",5:"Cancelar",4:"Sair agora?",7:"Este traje est\xe1 \xe0 venda",6:"Sim",8:"OK"},mgrTip:{1:"Dica",3:"Cancelar",2:"Aguarde..."},vSubjectSuitDressListItem:{1:"Gr\xe1tis"},vPkMirrorRankListItem:{1:"Estrela: %d"},mgrPlayer:{1:"Este item est\xe1 bloqueado.",3:"J\xe1 solicitado",2:"Impressionante. Voc\xea possui todos os itens deste traje",5:"Solicitado",4:"Nem todos os itens necess\xe1rios coletados"},vRoomDialog:{11:"Esta boneca j\xe1 est\xe1 \xe0 venda",10:"Envio realizado com sucesso!",13:"N\xe3o foi poss\xedvel vender",12:"Colocado \xe0 venda com sucesso",1:"Nenhum item",3:"Criar",2:"Trajes",5:"Original: %s",4:"Pre\xe7o",7:"Deve se vestir adequadamente para enviar",6:"Dica",9:"Deve usar uma saia para enviar",8:"OK"},vGotItemDialog:{1:"Item possu\xeddo! Convertido para:",3:"Gr\xe1tis",2:"Comprar",5:"Obter",4:"Assista an\xfancios para obter gr\xe1tis"},vWishDialog:{1:"Adivinhar",2:"Tentativas: %d"},item_template_db_name:{1:"Diamantes",2:"Moedas",4:"Vigor",16:"Estrela"},StageScriptFree:{1:"Dica",3:"Cancelar",2:"Enviar o traje para a partida?",5:"Voc\xea deseja sair?",4:"Enviar",7:"Conclu\xeddo",6:"Sim"},StageScriptPvp:{1:"Dica",3:"Cancelar",2:"Enviar o traje para a partida?",5:"Bloqueado",4:"Enviar",7:"Sim",6:"Voc\xea deseja sair?",8:"Partida"},vPkMirrorAdventureDialog:{10:"Solicitado",1:"5 estrelas dispon\xedveis",3:"Assista an\xfancios para obter recompensas",2:"Precisa de maior n\xedvel para receber",5:"N\xe3o \xe9 necess\xe1rio",4:"Recompensa de v\xeddeo",7:"OK",6:"Obter",9:"Apenas diamantes",8:"Solicitar tudo"},vShopDialog:{1:"Comprar",2:"Especial"},vMallItemFreeGold:{1:"Moedas gr\xe1tis",2:"Gr\xe1tis"},vNetworkFaildDialog:{1:"Dica",3:"Cancelar",2:"N\xe3o foi poss\xedvel conectar, verifique a rede ou volte ao n\xedvel do jogo para continuar",4:"Tentar novamente"},vPromptOpenStoreDialog:{1:"Conte\xfado"},mgrPacking:{1:"Produzindo embalagem",3:"Desbloqueie o n\xedvel %s primeiro",2:"N\xedvel m\xe1ximo atingido",5:"Moedas insuficientes",4:"Melhoria dispon\xedvel",6:"Melhorado com sucesso"},sign_db_title:{1:"Dia 1",3:"Dia 3",2:"Dia 2",5:"Dia 5",4:"Dia 4",7:"Dia 7",6:"Dia 6"},vRoomListItemPart:{1:"Teste gr\xe1tis"},StageScriptPkMirror:{1:"Bloqueado",3:"Se voc\xea sair agora, perder\xe1 o jogo. Ainda quer sair?",2:"Dica",5:"Sim",4:"Cancelar",6:"Enviar"},vPromptGoldRainDialog:{1:"Dica",3:"Obter",2:"OK",5:"Que sorte de receber %s moedas",4:"Desculpe, nenhuma moeda recebida"},mgrDailyQuest:{1:"Verifique suas tarefas incompletas",2:"Recompensa solicitada"},vPromptAdRewardDialog:{11:"4x",10:"3x",13:"Gigante",12:"5x",15:"OK",14:"Assista v\xeddeos para obter [%s]",1:"Dica",3:"Agora n\xe3o",2:"Assista v\xeddeos para dobrar",5:"Assista an\xfancios para obter recompensas",4:"Obter",7:"N\xe3o \xe9 necess\xe1rio",6:"Recompensa de v\xeddeo",9:"2x",8:"1x"},vNetworkWaitingDialog:{1:"Dica",3:"Cancelar",2:"Conectando\u2026"},vPkMirrorResultDialog:{1:"OK"},achievement_db_desc:{42:"Ven\xe7a a batalha 100 vezes",43:"Ven\xe7a a batalha 150 vezes",24:"Colete 40 conjuntos no total",25:"Participe em 5 jogos",26:"Participe em 10 jogos",27:"Participe em 20 jogos",20:"Colete 20 conjuntos no total",21:"Colete 25 conjuntos no total",22:"Colete 30 conjuntos no total",23:"Colete 35 conjuntos no total",44:"Ven\xe7a a batalha 200 vezes",28:"Participe em 30 jogos",29:"Participe em 50 jogos",40:"Ven\xe7a a batalha 60 vezes",41:"Ven\xe7a a batalha 80 vezes",1:"Acumulou 3000 moedas de ouro",3:"Acumulou 200000 moedas de ouro",2:"Acumulou 50000 moedas de ouro",5:"Acumulou 2000000 moedas de ouro",4:"Acumulou 700000 moedas de ouro",7:"Acumulou 50000000 moedas de ouro",6:"Acumulou 5000000 moedas de ouro",9:"Obtenha 100 diamantes no total",8:"Obtenha 20 diamantes no total",39:"Ven\xe7a a batalha 50 vezes",38:"Ven\xe7a a batalha 30 vezes",11:"Obtenha 500 diamantes no total",10:"Obtenha 200 diamantes no total",13:"Obtenha 2000 diamantes no total",12:"Obtenha 1000 diamantes no total",15:"Obtenha 5000 diamantes no total",14:"Obtenha 3000 diamantes no total",17:"Colete 7 conjuntos no total",16:"Colete 4 conjuntos no total",19:"Colete 15 conjuntos no total",18:"Colete 10 conjuntos no total",31:"Participe em 100 jogos",30:"Participe em 70 jogos",37:"Ven\xe7a a batalha 20 vezes",36:"Ven\xe7a a batalha 10 vezes",35:"Ven\xe7a a batalha 5 vezes",34:"Participe em 500 jogos",33:"Participe em 200 jogos",32:"Participe em 150 jogos"},vBuildStoreResultDialog:{11:"O lucro est\xe1 muito bom hoje",10:"N\xe3o \xe9 necess\xe1rio",13:"Precisa trabalhar mais",12:"Continue assim",15:"Agora n\xe3o",14:"V\xe1 coletar mais itens",16:"OK",1:"Posi\xe7\xe3o",3:"Maior renda",2:"Nome",5:"Obter",4:"Renda",7:"Roda da Sorte",6:"2x",9:"Recompensa de v\xeddeo",8:"Assista an\xfancios para obter recompensas"},vPackingLvupListItem:{10:"Gr\xe1tis",1:"N\xedvel atual:",3:"Pr\xf3ximo n\xedvel:",2:"Pre\xe7o",5:"Desbloquear",4:"N\xedvel m\xe1ximo atingido",7:"Desbloqueado com sucesso",6:"Melhorar",9:"Assista v\xeddeos para melhorar gr\xe1tis",8:"Melhorado com sucesso"},vSettingDialog:{1:"Configura\xe7\xf5es",3:"Desligado",2:"Ligado",4:"Escolha um idioma"},vSelectPackingDialog:{1:"Selecionar posi\xe7\xe3o",3:"Substitu\xeddo com sucesso",2:"Bloqueado"},vPromptImgDialog:{1:"T\xedtulo",2:"Conte\xfado"},mgrPvp:{1:"Desconhecido"},vPvpPkDialog:{11:"Ainda n\xe3o \xe9 poss\xedvel solicitar recompensa(s)",10:"Nenhum dado, participe da partida",1:"Restante:",3:"Partida",2:"Assistir v\xeddeos:",5:"Carregando\u2026",4:"Enviando presentes:",7:"Votos insuficientes, tente de novo mais tarde",6:"Dados insuficientes, n\xe3o \xe9 poss\xedvel largar no momento",9:"Gr\xe1tis",8:"Assista v\xeddeos para obter curtidas 5 vezes gr\xe1tis"},vPromptDialog:{1:"T\xedtulo",2:"Conte\xfado"},vPvpPkItemLeft:{1:"Desconhecido"}},cc._RF.pop()},{}],sAchievement:[function(e,t,o){"use strict";cc._RF.push(t,"df9acjbimpDF7WcsF7sZtia","sAchievement");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Const"),a=e("../manager/mgrCfg"),i=e("../manager/mgrAchievement"),s=e("../manager/mgrPlayer"),l=e("../manager/mgrStage"),c=e("../manager/mgrEmployee"),u=e("../manager/mgrPkMirror"),d=e("../manager/mgrBuildingStore"),p=e("../manager/mgrPacking"),h=cc._decorator.ccclass,f=function(){function e(e){this.id=e,this.template=a.default.get("achievement_db",e),this.count=0,this.maxCount=0,this.state=r.QuestState.normal}return e.prototype.setState=function(e){this.state=e},e.prototype.refreshCount=function(e){var t=this.template.targetType,o=a.default.get("achievement_target_db",t);if(o&&(!e||o.cmdHash[e])){var n=this[o.calcCountHandlerName];if("function"==typeof n){var r=n.bind(this)(),s=r[0],l=r[1],c=null!=this.count&&this.count!=s;this.count=s,this.maxCount=l,c&&i.default.sendMsg("MSG_ACHIEVEMENT_COUNT_CHANGED",{achievementId:this.id})}}},e.prototype.refreshState=function(e){return(this.state==r.QuestState.normal||0==this.maxCount)&&(this.refreshCount(e),this.state==r.QuestState.normal&&this.maxCount<=this.count&&(this.state=r.QuestState.finished,!0))},e.prototype._calcCount1=function(){var e=this.template,t=e.data1;return 1,[e.data2<=l.default.getStageRating(t)?1:0,1]},e.prototype._calcCount2=function(){var e=this.template,t=0,o=e.data1,n=e.data2,r=e.data3,i=a.default.quietGet("stage_chapter_db",o);if(t=0,i)for(var s=i.stageIds.length||0,c=0;c<s;c++){var u=i.stageIds[c];r<=l.default.getStageRating(u)&&t++}else;return[t,n]},e.prototype._calcCount4=function(){var e=this.template,t=e.data1,o=e.data2;return[s.default.getItemAmount(t),o]},e.prototype._calcCount5=function(){var e=this.template,t=e.data1,o=e.data2;return[this.__getItemAmountByFlag(t),o]},e.prototype._calcCount7=function(){var e=this.template,t=e.data1,o=e.data2;return[Math.min(s.default.getItemHistoryGotAmount(t),o),o]},e.prototype._calcCount8=function(){var e=this.template,t=0,o=e.data1,n=e.data2,r=a.default.getDb("item_template_db");t=0;for(var i in r){r[i].flag==o&&(t+=s.default.getItemHistoryGotAmount(parseInt(i)))}return[t=Math.min(t,n),n]},e.prototype._calcCount9=function(){this.template;return[0,1]},e.prototype._calcCount10=function(){var e=0,t=1,o=this.template.data1,n=a.default.quietGet("suit_db",o);if(n){for(var r=n.displayIds||[],i=r.length||0,l=0;l<i;l++){var c=r[l];s.default.getItemAmount(c)>0&&e++}t=Math.max(i,1)}else;return[e,t]},e.prototype._calcCount11=function(){var e=0,t=this.template.data1;e=0;var o=a.default.getDb("suit_db");for(var n in o){var r=o[n],i=r.displayIds||[],l=i.length||0;if(0<r.category&&0<l){var c=!0;for(var u in i){var d=i[u];if(s.default.getItemAmount(d)<=0){c=!1;break}}c&&(e+=1)}}return[e,t]},e.prototype._calcCount12=function(){var e=this.template,t=(e.data1,e.data2);return[s.default.getItemAmount(r.default.ITEM_ID_OPEN_CHEST),t]},e.prototype._calcCount13=function(){this.template;return[0,1]},e.prototype._calcCount14=function(){this.template;return[0,1]},e.prototype._calcCount15=function(){return 0,[0,this.template.data1]},e.prototype._calcCount16=function(){return 0,[0,this.template.data1]},e.prototype._calcCount17=function(){var e=this.template;e.data1;return 0,[0,e.data2]},e.prototype._calcCount18=function(){var e=0,t=this.template.data1;e=0;var o=a.default.getDb("cloth_db")||{};for(var n in o){var r=o[n];r.type>=800&&r.type<900&&s.default.getItemAmount(r.id)>0&&(e+=1)}return[e,t]},e.prototype._calcCount19=function(){var e=this.template,t=0,o=e.data1,n=e.data2,r=c.default.getEmployee(o);return r&&(t=r.level||0),[t,n]},e.prototype._calcCount20=function(){var e=this.template.data1||1;return[Math.min(s.default.getItemAmount(920)||0,e),e]},e.prototype._calcCount21=function(){var e=this.template.data1||1;return[Math.min(s.default.getItemAmount(924)||0,e),e]},e.prototype._calcCount22=function(){var e=this.template.data1||1;return[Math.min(u.default.getDailyJoinedCount(),e),e]},e.prototype._calcCount23=function(){var e=this.template.data1||1;return[Math.min(u.default.getDailyLvupCount(),e),e]},e.prototype._calcCount24=function(){var e=this.template.data1||1,t=d.default.getBuildingStore()||{};return[Math.min(t.level||0,e),e]},e.prototype._calcCount25=function(){var e=0,t=this.template.data1||1,o=p.default.getPackings();for(var n in o){var r=o[n];e=Math.max(e,r.level||0)}return[e,t]},e.prototype._calcCount26=function(){return this._calcCount10()},e.prototype._calcCount27=function(){var e=this.template.data1||1;return[Math.min(s.default.getItemHistoryGotAmount(r.default.ITEM_ID_GOLD),e),e]},e.prototype.__getItemAmountByFlag=function(e){var t=0;return a.default.forDb("item_template_db",function(o,n){n.flag==e&&s.default.getItemAmount(n.id)>0&&(t+=1)}),t},e=n([h],e)}();o.default=f,cc._RF.pop()},{"../Const":"Const","../manager/mgrAchievement":"mgrAchievement","../manager/mgrBuildingStore":"mgrBuildingStore","../manager/mgrCfg":"mgrCfg","../manager/mgrEmployee":"mgrEmployee","../manager/mgrPacking":"mgrPacking","../manager/mgrPkMirror":"mgrPkMirror","../manager/mgrPlayer":"mgrPlayer","../manager/mgrStage":"mgrStage"}],sAvatar:[function(e,t,o){"use strict";cc._RF.push(t,"d20a2ebMkBPKp0irGwafLcZ","sAvatar");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../ulframework/utils/Tools"),a=e("../manager/mgrCfg"),i=e("../Const"),s=cc._decorator.ccclass,l=function(){function e(){this.SERIALIZE_VERSION=1,this.SERIALIZE_FORMAT_TYPES=[i.CPartType.HAIR,i.CPartType.UP,i.CPartType.DOWN,i.CPartType.SOCK,i.CPartType.SHOE,i.CPartType.FACE,i.CPartType.HAIR_DECO,i.CPartType.HAND_DECO,i.CPartType.SPECIAL,i.CPartType.BODY,i.CPartType.PET],this.setToDefault(),this._registerCmdHander()}return e.prototype._registerCmdHander=function(){var e,t=((e={}).CMD_AVATAR_PART_ADD=this._onCmdPartAdd.bind(this),e.CMD_AVATAR_PART_MOVE=this._onCmdPartMove.bind(this),e.CMD_AVATAR_PART_REMOVE=this._onCmdPartRemove.bind(this),e.CMD_AVATAR_PART_REPLACE=this._onCmdPartReplace.bind(this),e);this.cmdHanders=t},e.prototype.onCmd=function(e,t){var o=this.cmdHanders[e];o&&o(t)},e.prototype.setToDefault=function(){var e={},t=a.default.getDb("cosmetic_part_type_db");for(var o in t){var n=t[o],r=[];if(0!=n.defaultId)for(var i=0;i<n.fixedPartCount;i++)r.push({partId:n.defaultId,x:0,y:0});e[n.id]=r}this.allParts=e,this._checkDefaultPartAndBasePart()},e.prototype._onCmdPartAdd=function(e){var t=e.partType,o=e.partId,n=e.x,r=e.y;0<a.default.get("cosmetic_part_type_db",t).fixedPartCount||a.default.get("cosmetic_part_db",o)&&this.allParts[t].push({partType:e.partType,x:n,y:r})},e.prototype._onCmdPartRemove=function(e){var t=e.partType,o=e.index||0,n=e.bIgnoreDefault,r=a.default.get("cosmetic_part_type_db",t);if(!(r.fixedPartCount<=0)){var s=this.allParts[t];if(s[o]={},!n)if(i.default.ENABLED_CHECK_MUTEX_TYPES)this._checkDefaultPartAndBasePart();else if(0!=r.defaultId)s[o].partId=r.defaultId}},e.prototype._onCmdPartMove=function(e){var t=e.partType,o=e.index||0,n=e.x,r=e.y,a=this.allParts[t][o];a&&(a.x=n,a.y=r)},e.prototype._onCmdPartReplace=function(e){var t=e.partType,o=e.index||0,n=e.partId,r=e.x||0,i=e.y||0,s=this.allParts[t];if(s){var l=a.default.get("cosmetic_part_db",n);if(l){var c=l.typeData.beforeAddRemoveTypes||[];for(var u in c){var d=c[u];this.isEmptyPartType(d)||this.removePartsByType(d,!0)}var p=s[o];p||(p={},s[o]=p),p.partId=n,p.x=r,p.y=i,this._checkDefaultPartAndBasePart()}}},e.prototype._checkDefaultPartAndBasePart=function(){var e=this;if(i.default.ENABLED_CHECK_MUTEX_TYPES){var t=this.allParts,o=function(o){var n=o,r=o.id;if(e.isEmptyPartType(r)&&0!=n.defaultId){var a=!0,i=n.beforeAddRemoveTypes||[];for(var s in i){var l=i[s];if(!e.isEmptyPartType(l)){a=!1;break}}for(var c=0;c<n.fixedPartCount;c++){t[r][c]=a?{partId:n.defaultId,x:0,y:0}:{}}}},n=a.default.getDb("cosmetic_part_type_db");for(var r in n){o(n[r])}}},e.prototype.isEmptyPartType=function(e,t){void 0===t&&(t=!1);var o=a.default.get("cosmetic_part_type_db",e);if(!o)return cc.log("-no--partType=",e),!0;for(var n=0;n<o.fixedPartCount;n++){var r=this.getPartId(e,n);if(r&&r>0){if(t&&o.defaultId&&r==o.defaultId)continue;return!1}}return!0},e.prototype.removePartsByType=function(e,t){void 0===t&&(t=!1);for(var o=a.default.get("cosmetic_part_type_db",e),n=0;n<o.fixedPartCount;n++)this.onCmd("CMD_AVATAR_PART_REMOVE",{partType:e,index:n,bIgnoreDefault:t})},e.prototype.getPartId=function(e,t){var o=this.allParts[e];if(!o)return null;var n=o[t];return n?n.partId:null},e.prototype.getFinishedPartId=function(e){for(var t=a.default.get("cosmetic_part_type_db",e),o=null,n=0;n<t.fixedPartCount;n++){var r=this.getPartId(e,n);if(!r)return null;if(r!=(o=o||r))return null}return o},e.prototype.getUsedPartIds=function(e){void 0===e&&(e=!1);var t={};for(var o in this.allParts){var n=this.allParts[o];for(var r in n){var i=n[r];if(i.partId){var s=a.default.get("cosmetic_part_db",i.partId);e?t[i.partId]=!0:s&&!s.bIgnoreInGrade&&(t[i.partId]=!0)}}}var l=[];for(var c in t){t[c];l.push(parseInt(c))}return l.sort(),l},e.prototype.isPartUsed=function(e){var t=this.getUsedPartIds();for(var o in t){if(t[o]==e)return!0}return!1},e.prototype.isAllUsedPartIsDefault=function(){var e=this.getUsedPartIds(!0);for(var t in e){var o=e[t],n=a.default.get("cosmetic_part_db",o);if(n&&n.typeData&&0!=o&&n.typeData.defaultId!=o)return!1}return!0},e.prototype.serializeToText=function(){var e=[this.SERIALIZE_VERSION,"|"],t=this.allParts;for(var o in this.SERIALIZE_FORMAT_TYPES){var n=t[this.SERIALIZE_FORMAT_TYPES[o]]||[];for(var r in n){var a=n[r];e.push(a.partId),0==a.x&&0==a.y||(e[e.length]=e.push(","),e[e.length]=e.push(a.x||0),e[e.length]=e.push(","),e[e.length]=e.push(a.y||0)),e.push("@")}0<n.length&&e.splice(e.length-1,1),e.push("|")}e.splice(e.length-1,1);for(var i in e){var s=e[i];"number"==typeof s&&s>0&&(e[i]=ul.format("%x",s))}return e.join("")},e.prototype.fillBySerializeText=function(e){if(e){this.setToDefault();var t=e.split("|");if(t.length==this.SERIALIZE_FORMAT_TYPES.length+1&&parseInt(t[0])==this.SERIALIZE_VERSION)for(var o=this.SERIALIZE_FORMAT_TYPES.length,n=0;n<o;n++){var r=this.SERIALIZE_FORMAT_TYPES[n],a=t[n+1];if(a){var i=a.split("@");for(var s in i){var l=parseInt(s),c=i[l].split(","),u=parseInt("0x"+c[0]),d=parseInt(c[1])||0,p=parseInt(c[2])||0;this.onCmd("CMD_AVATAR_PART_REPLACE",{partType:r,index:l,partId:u,x:d,y:p})}}}}},e.prototype.fillByPartIds=function(e,t){void 0===t&&(t=!1),t||this.setToDefault();for(var o in e){var n=e[o],r=a.default.get("cosmetic_part_db",n);if(r)for(var i=0;i<r.typeData.fixedPartCount;i++)this.onCmd("CMD_AVATAR_PART_REPLACE",{partType:r.type,index:i,partId:n})}},e.prototype.getPartDatas=function(){var e=[],t=this.getUsedPartIds();for(var o in t){var n=t[o],r=a.default.get("cosmetic_part_db",n);r&&r.typeData&&0!=n&&r.typeData.defaultId!=n&&e.push(n)}return e},e.prototype.dump=function(){var e=[],t=a.default.getDb("cosmetic_part_type_db");for(var o in t){var n=t[o];e.push(n)}e=r.default.sortArrayByField(e,"id");for(var i in e){var s=e[i].id,l=this.allParts[s]||[];if(0<l.length){var c="";for(var u in l){n=l[u];var d=a.default.get("cosmetic_part_db",n.partId);c=0!=n.x||0!=n.y?c+", "+ul.format("[%d.%s %d, %d]",n.partId,d.name,n.x,n.y):c+", "+ul.format("[%d.%s]",n.partId,d.name)}}}},e.prototype.calcWeight=function(){var e=this.getUsedPartIds(!0),t=0;for(var o in e){var n=e[o],r=a.default.quietGet("cosmetic_part_db",n);r&&(t+=r.level||0)}return t},e.prototype._getRandomPartIdByPartType=function(e){var t=[],o=a.default.getDb("cosmetic_part_db");for(var n in o){var i=o[n];i.type!=e||i.bIgnoreInGrade||t.push(i.id)}return t.length<=0?0:t[r.default.random(t.length-1)]},e.prototype._debugFillRandom=function(){this.setToDefault();var e=[];e.push(i.CPartType.BODY),e.push(i.CPartType.HAIR),e.push(i.CPartType.UP),e.push(i.CPartType.DOWN),r.default.random(100)<=50&&e.push(i.CPartType.SOCK),r.default.random(100)<=50&&e.push(i.CPartType.SHOE),r.default.random(100)<=50&&e.push(i.CPartType.FACE),r.default.random(100)<=50&&e.push(i.CPartType.HAIR_DECO),r.default.random(100)<=50&&e.push(i.CPartType.HAND_DECO),r.default.random(100)<=50&&e.push(i.CPartType.SPECIAL),r.default.random(100)<=50&&e.push(i.CPartType.PET);for(var t in e){var o=e[t],n=this._getRandomPartIdByPartType(o);if(0!=n){var s=a.default.get("cosmetic_part_type_db",o),l=1;l=0<s.fixedPartCount?s.fixedPartCount:1;for(var c=0;c<l;c++)this.onCmd("CMD_AVATAR_PART_REPLACE",{partType:o,index:c,partId:n,x:0,y:0})}}},e.prototype._specialTypeFillRandom=function(e){this.setToDefault();var t={};for(var o in e)t[e[o]]=!0;var n=[];n.push(i.CPartType.BODY),n.push(i.CPartType.HAIR),n.push(i.CPartType.UP),n.push(i.CPartType.DOWN),t[i.CPartType.SOCK]&&r.default.random(100)<=50&&n.push(i.CPartType.SOCK),t[i.CPartType.SHOE]&&r.default.random(100)<=50&&n.push(i.CPartType.SHOE),t[i.CPartType.FACE]&&r.default.random(100)<=50&&n.push(i.CPartType.FACE),t[i.CPartType.HAIR_DECO]&&r.default.random(100)<=50&&n.push(i.CPartType.HAIR_DECO),t[i.CPartType.HAND_DECO]&&r.default.random(100)<=50&&n.push(i.CPartType.HAND_DECO),t[i.CPartType.SPECIAL]&&r.default.random(100)<=50&&n.push(i.CPartType.SPECIAL),t[i.CPartType.PET]&&r.default.random(100)<=50&&n.push(i.CPartType.PET);for(var o in n){var s=n[o],l=this._getRandomPartIdByPartType(s);if(0!=l){var c=a.default.get("cosmetic_part_type_db",s),u=1;u=0<c.fixedPartCount?c.fixedPartCount:1;for(var d=0;d<u;d++)this.onCmd("CMD_AVATAR_PART_REPLACE",{partType:s,index:d,partId:l,x:0,y:0})}}},e=n([s],e)}();o.default=l,cc._RF.pop()},{"../../ulframework/utils/Tools":"Tools","../Const":"Const","../manager/mgrCfg":"mgrCfg"}],sBuildingStore:[function(e,t,o){"use strict";cc._RF.push(t,"853d7GZwjVKZpxmy9+KThQa","sBuildingStore");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../manager/mgrCfg"),a=e("../manager/mgrEmployee"),i=e("../manager/mgrPlayer"),s=e("../Const"),l=cc._decorator.ccclass,c=function(){function e(e,t){this.speedCompletedTime=0,this.id=e,this.level=null,this.setLevel(t)}return e.prototype.setLevel=function(e){var t=!1;this.level&&this.level==e||(t=!0),this.level=e;var o=r.default.get("building_store_db",this.id,e);this.template=o,t&&(i.default._setItemAmount(this.id,e),i.default._setItemAmount(s.default.ITEM_ID_MAX_AVATAR_ORDER,this.template.entertainMaxOrderNum),i.default.getItemAmount(s.default.ITEM_ID_AVATAR_ORDER)<this.template.entertainBaseOrderNum&&i.default._setItemAmount(s.default.ITEM_ID_AVATAR_ORDER,this.template.entertainBaseOrderNum),a.default.sendMsg("MSG_BUILDING_STORE_LEVEL_CHANGED",{id:this.id}))},e.prototype.resetAvatarOrderNum=function(){this.template&&i.default._setItemAmount(s.default.ITEM_ID_AVATAR_ORDER,this.template.entertainBaseOrderNum)},e.prototype.getNextTemplate=function(){return r.default.get("building_store_db",this.id,this.level+1)},e=n([l],e)}();o.default=c,cc._RF.pop()},{"../Const":"Const","../manager/mgrCfg":"mgrCfg","../manager/mgrEmployee":"mgrEmployee","../manager/mgrPlayer":"mgrPlayer"}],sEmployee:[function(e,t,o){"use strict";cc._RF.push(t,"07314vf0CVAbJvoo/w3uako","sEmployee");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../manager/mgrCfg"),a=e("../manager/mgrEmployee"),i=e("../manager/mgrPlayer"),s=cc._decorator.ccclass,l=function(){function e(e,t){this.speedCompletedTime=0,this.id=e,this.level=null,this.setLevel(t)}return e.prototype.setLevel=function(e){var t=!1;this.level&&this.level==e||(t=!0),this.level=e;var o=r.default.get("employee_template_db",this.id,e);this.template=o,t&&(i.default._setItemAmount(this.id,e),a.default.sendMsg("MSG_EMPLOYEE_LEVEL_CHANGED",{id:this.id}))},e=n([s],e)}();o.default=l,cc._RF.pop()},{"../manager/mgrCfg":"mgrCfg","../manager/mgrEmployee":"mgrEmployee","../manager/mgrPlayer":"mgrPlayer"}],sPacking:[function(e,t,o){"use strict";cc._RF.push(t,"4709587259DqYdTV0TWBI/B","sPacking");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../manager/mgrCfg"),a=e("../../ulframework/utils/Tools"),i=e("../manager/mgrPlayer"),s=e("../manager/mgrPacking"),l=e("../Const"),c=cc._decorator.ccclass,u=function(){function e(e,t){this.id=e,this.level=0,this.expValue=0,this.levelGrow=null,this.sortedTemplates=null,this.tryGenSortedPetTemplates(),this.setLevel(t)}return e.prototype.setLevel=function(e){var t=!1;this.level!=e&&(t=!0),this.level=e;var o=r.default.get("packing_db",this.id,e);this.template=o,t&&(i.default._setItemAmount(this.id,e),s.default.sendMsg("MSG_FLOWER_LEVEL_CHANGED",{id:this.id}));for(var n=0,a=this.sortedTemplates.length-1;a>=0;a--){var l=this.sortedTemplates[a];if(l.level>this.level)break;l.bGrowLevel&&(n+=1)}var c=!1;this.levelGrow&&n!=this.levelGrow&&(c=!0),this.levelGrow=n,c&&s.default.sendMsg("MSG_FLOWER_LEVEL_GROW_CHANGED",{id:this.id})},e.prototype.getNextTemplate=function(){return r.default.get("packing_db",this.id,this.level+1)},e.prototype.getGrowLevelProgress=function(){for(var e=this.level||0,t=this.sortedTemplates.length,o=null,n=null,r=t-1;r>=0;r--){var a=this.sortedTemplates[r];if(a.bGrowLevel){if(!(a.level<=e)){n=a;break}o=a}}o=o||this.sortedTemplates[t-1],n=n||this.sortedTemplates[0];var i=e-o.level,s=n.level-o.level;return[i,s=(s-=1)||1]},e.prototype.tryGenSortedPetTemplates=function(){if(!this.sortedTemplates){var e=[],t=r.default.get("packing_db",this.id);for(var o in t){var n=t[o];e.push(n)}e=a.default.sortArrayByField(e,"-level"),this.sortedTemplates=e}},e.prototype.startCollect=function(){return!this.bCollecting&&(!(!this.level||!this.template)&&(this.resetCollect(),this.bCollecting=!0,this.startCollectTime=a.default.time(),this.collectBaseTime=this.template.produceTime,!0))},e.prototype.setCollectSpeedAppendRatioFunc=function(e){this.collectSpeedAppendRatioFunc=e},e.prototype.addCollectTimeByRatio=function(e){this.isCollecting()&&!this.isCollectCompleted()&&(this.collectTimeSpeeded+=this.collectBaseTime*e)},e.prototype.resetCollect=function(){this.bCollecting=!1,this.startCollectTime=0,this.collectBaseTime=0,this.collectTimeSpeeded=0,this.collectSpeedRatio=1,this.collectSpeedAppendRatio=0},e.prototype.isCollectCompleted=function(){var e=this.getCollectProgress();return e[0]>=e[1]},e.prototype.isCollecting=function(){return this.bCollecting},e.prototype.getCollectReward=function(){return[[l.default.ITEM_ID_GOLD,this.template.produceGoldNum||0]]},e.prototype.getCollectProgress=function(){if(!this.isCollecting())return[0,1];var e=0;this.collectSpeedAppendRatioFunc&&(e=this.collectSpeedAppendRatioFunc()||0);var t=this.collectBaseTime;return[(this.collectSpeedRatio+this.collectSpeedAppendRatio+e)*(a.default.time()-this.startCollectTime+this.collectTimeSpeeded),t]},e=n([c],e)}();o.default=u,cc._RF.pop()},{"../../ulframework/utils/Tools":"Tools","../Const":"Const","../manager/mgrCfg":"mgrCfg","../manager/mgrPacking":"mgrPacking","../manager/mgrPlayer":"mgrPlayer"}],sRankPlayer:[function(e,t,o){"use strict";cc._RF.push(t,"68537K65VxPfLrJG4uQ1xpn","sRankPlayer");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator.ccclass,a=function(){function e(e,t,o,n,r,a,i){this.uid=e,this.rank=t,this.score=o,this.data=r,this.name=n,this.stageId=a,this.params=i}return e=n([r],e)}();o.default=a,cc._RF.pop()},{}],ul:[function(e,t,o){"use strict";function n(e,t){e.sign=t?"":e.negative?"-":e.sign;var o=e.min-e.argument.length+1-e.sign.length,n=new Array(o<0?0:o).join(e.pad);return e.left?"0"==e.pad||t?e.sign+e.argument+n.replace(/0/g," "):e.sign+e.argument+n:"0"==e.pad||t?e.sign+n+e.argument:n+e.sign+e.argument}function r(e,t){var o="";t||(t=0);for(var n="",a=0;a<t+1;a++)n+="    ";if("object"==typeof e)for(var i in e){var s=e[i];"object"==typeof s?(o+=n+"'"+i+"' ...\n",o+=r(s,t+1)):o+=n+"'"+i+"' => \""+s+'"\n'}else o="===>"+e+"<===("+typeof e+")";return o}function a(e){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(e)]}cc._RF.push(t,"2f20f/O6ERNBZxpEn6hffbG","ul"),ul.format=function(){if(void 0===arguments)return null;if(arguments.length<1)return null;if("string"!=typeof arguments[0])return null;if("undefined"==typeof RegExp)return null;for(var e=arguments[0],t=new RegExp(/(%([%]|(\-)?(\+|\x20)?(0)?(\d+)?(\.(\d)?)?([bcdfosxX])))/g),o=new Array,r=new Array,a=0,i=0,s=0,l=0,c="",u=null;u=t.exec(e);)u[9]&&(a+=1),i=l,s=t.lastIndex-u[0].length,r[r.length]=e.substring(i,s),l=t.lastIndex,o[o.length]={match:u[0],left:!!u[3],sign:u[4]||"",pad:u[5]||" ",min:u[6]||0,precision:u[8],code:u[9]||"%",negative:parseInt(arguments[a])<0,argument:String(arguments[a])};if(r[r.length]=e.substring(l),0==o.length)return e;if(arguments.length-1<a)return null;u=null;var d=null,p=null;for(p=0;p<o.length;p++)"%"==o[p].code?d="%":"b"==o[p].code?(o[p].argument=String(Math.abs(parseInt(o[p].argument)).toString(2)),d=n(o[p],!0)):"c"==o[p].code?(o[p].argument=String(String.fromCharCode(Math.abs(parseInt(o[p].argument)))),d=n(o[p],!0)):"d"==o[p].code?(o[p].argument=String(Math.abs(parseInt(o[p].argument))),d=n(o[p])):"f"==o[p].code?(o[p].argument=String(Math.abs(parseFloat(o[p].argument)).toFixed(o[p].precision?o[p].precision:6)),d=n(o[p])):"o"==o[p].code?(o[p].argument=String(Math.abs(parseInt(o[p].argument)).toString(8)),d=n(o[p])):"s"==o[p].code?(o[p].argument=o[p].argument.substring(0,o[p].precision?o[p].precision:o[p].argument.length),d=n(o[p],!0)):"x"==o[p].code?(o[p].argument=String(Math.abs(parseInt(o[p].argument)).toString(16)),d=n(o[p])):"X"==o[p].code?(o[p].argument=String(Math.abs(parseInt(o[p].argument)).toString(16)),d=n(o[p]).toUpperCase()):d=o[p].match,c+=r[p],c+=d;return c+=r[p]},ul.formatDate=function(e,t){var o={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in o)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?o[n]:("00"+o[n]).substr((""+o[n]).length)));return t},ul.dump=function(e,t,o){r(e)},ul.actionFloat=function(e,t,o,n){var r=cc.delayTime(e);return r.update=function(e){n(t*(1-e)+o*e)},r},ul.clone=function e(t){var o,n=a(t);if(t instanceof cc.Node)return t;if("object"===n)o={};else{if("array"!==n)return t;o=[]}if("array"===n)for(var r=0,i=t.length;r<i;r++)o.push(e(t[r]));else if("object"===n)for(var s in t)o[s]=e(t[s]);return o},ul.length=function(e){var t=a(e);if("array"===t)return e.length;if("object"===t){var o=0;for(var n in e)e[n]&&o++;return o}return 0},ul.clamp=function(e,t,o){return e<t&&(e=t),e>o&&(e=o),e},cc._RF.pop()},{}],vAdFaildDialog:[function(e,t,o){"use strict";cc._RF.push(t,"278666HCPxBiazfz9QMRTF8","vAdFaildDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrAd"),l=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vPromptDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[a.default,"onTouchButton1"],CC_button2:[a.default,"onTouchButton2"],CC_button3:[a.default,"onTouchButton3"],CC_buttonClose:[a.default,"onTouchButtonClose"],CC_labelButton1:[cc.Label],CC_labelButton2:[cc.Label],CC_labelButton3:[cc.Label],CC_labelContent:[cc.Label],CC_labelTitle:[cc.Label],CC_layoutBg:[cc.Layout]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.registerListeners({MSG_AD_CLOSE_FAILD:this.onMsgAdCloseFaild})},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.labelTitle.setLocalizedString("vAdFaildDialog.1"),this.labelContent.setLocalizedString("vAdFaildDialog.2"),this.button1.node.getComponentInChildren(cc.Label).setLocalizedString("vAdFaildDialog.3"),this.button2.node.getComponentInChildren(cc.Label).setLocalizedString("vAdFaildDialog.4"),this.button3.node.active=!1,this.buttonClose.node.active=!1,s.default.isShowFailding()||this.closeDialog(!0)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onTouchButton1=function(e){e.isClick()&&(this.closeDialog(),s.default.discardLastTriggerAdEvent())},t.prototype.onTouchButton2=function(e){e.isClick()&&(this.closeDialog(),s.default.retryLastTriggerAdEvent())},t.prototype.onTouchButton3=function(e){},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onMsgAdCloseFaild=function(){this.closeDialog(!0)},t=r([l],t)}(i.default);o.default=c,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd"}],vAdWaitingDialog:[function(e,t,o){"use strict";cc._RF.push(t,"825ebb3kEpGepPOvW2tne/+","vAdWaitingDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/DialogBase"),c=e("../../../ulframework/utils/Timer"),u=e("../../manager/mgrAd"),d=e("../../../ulframework/utils/Tools"),p=cc._decorator.ccclass,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vPromptDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[s.default,"onTouchButton1"],CC_button2:[s.default,"onTouchButton2"],CC_button3:[s.default,"onTouchButton3"],CC_buttonClose:[s.default,"onTouchButtonClose"],CC_labelButton1:[cc.Label],CC_labelButton2:[cc.Label],CC_labelButton3:[cc.Label],CC_labelContent:[cc.Label],CC_labelTitle:[cc.Label],CC_layoutBg:[cc.Layout]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.registerListeners({MSG_AD_CLOSE_WAITING:this.onMsgAdCloseWaiting})},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.labelTitle.setLocalizedString("vAdWaitingDialog.1"),this.labelContent.setLocalizedString("vAdWaitingDialog.2"),this.button1.node.getComponentInChildren(cc.Label).setLocalizedString("vAdWaitingDialog.3"),this.button2.node.active=!1,this.button3.node.active=!1,this.buttonClose.node.active=!1,this.button1.node.x=0,u.default.isShowWaiting()||this.closeDialog(!0)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.openDialog=function(){return a(this,void 0,void 0,function(){var t=this;return i(this,function(o){return e.prototype.openDialog.call(this,!0),this.waitLoadingFinished(function(){var e=t.getCurrentAsyncValue("nodeResource"),o=t.layerShadow;o.opacity=0,e.active=!1,c.default.callLater(1,function(){cc.isValid(o)&&(o.runAction(cc.fadeTo(.2,t.getShadowOpacity())),e.active=!0)},t)}),[2]})})},t.prototype.onTouchButton1=function(e){e.isClick()&&(u.default.stopTimeoutTimer(),u.default.discardLastTriggerAdEvent(),this.closeDialog())},t.prototype.onTouchButton2=function(e){},t.prototype.onTouchButton3=function(e){},t.prototype.onTouchButtonClose=function(e){!e.isClick()||d.default.pDistance(e.getStartLocation(),e.getLocation())>20||this.closeDialog()},t.prototype.onMsgAdCloseWaiting=function(){this.closeDialog(!0)},t=r([p],t)}(l.default);o.default=h,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd"}],vAvatar:[function(e,t,o){"use strict";cc._RF.push(t,"266c2hrKetIQII73l89PPQ/","vAvatar");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/utils/Tools"),l=e("../../../ulframework/view/ViewBase"),c=e("../../Const"),u=e("../../manager/mgrCfg"),d=e("../../manager/mgrCosmetic"),p=cc._decorator.ccclass,h=function(e){function t(){var t,o=null!==e&&e.apply(this,arguments)||this;return o.bExtraPosEnabled=!0,o.bEffectEnabled=!0,o.bEyeOpend=!0,o.FLIP_PART_OFFSET_X=0,o.EFFECT_ORDER=1e3,o.DELAY_REFRESH_ALL_TIME=0,o.waitingHandlerDatas=[],o._greyPartIdDict={},o.nodeLoading=null,o.MOV_NAME_HAPPY="mov_5",o.MOV_NAME_SAD="mov_6",o.bEnablePreloadDelayRefresh=!1,o.bEnabledPreload=!0,o.refreshAllVersion=0,o.PRELOAD_PART_TYPE_DICT=((t={})[c.CPartType.UP]=!0,t[c.CPartType.DOWN]=!0,t[c.CPartType.HAIR]=!0,t[c.CPartType.FACE]=!0,t),o}return n(t,e),t.prototype._getResourceName=function(){return"node/vAvatar"},t.prototype._getResourceBindingConfig=function(){return{CC_nodeLoading:[cc.Node]}},t.prototype.onLoad=function(){this.buildUi(),e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&this.onEnterFrame()},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._greyPartIdDict=null;for(var t in this.allParts){var o=this.allParts[t];for(var n in o){var r=o[n];this._removeResNodes(r.nodes),this._removeResNodes(r.srcNodes),this._removeResNodes(r.dstNodes),this._removeResNodes(r.hintNodes)}}this.allParts=null;for(var a in this.effects){(o=this.effects[a])&&this._removeResNodes(o.nodes)}},t.prototype.onEnterFrame=function(){this.adaptAllPartSpineMutex(),this.adaptPreloadRefreshAll()},t.prototype.adaptPreloadRefreshAll=function(){if(this.bWaitDelayRefresh&&s.default.time()>=this.currDelayRefreshTime)return this.currDelayRefreshTime=null,void this.refreshAllResLoaded();!this.bWaitDelayRefresh&&this.bPreload&&this.tryPreloadResources()&&(this.bWaitDelayRefresh=!0,this.currDelayRefreshTime=s.default.time()+(this.bEnablePreloadDelayRefresh?this.DELAY_REFRESH_ALL_TIME:0))},t.prototype.adaptAllPartSpineMutex=function(){var e=[],t=this.context.structAvatar.getUsedPartIds(!0);for(var o in t){var n=t[o],r=u.default.get("cosmetic_part_db",n);if(r){var a=r.hideTargetPartDatas||[];for(var i in a){var l=a[i],c=l[0];if(c){for(var d={},p=l.length,h=1;h<p;h++){d[l[h]]=!0}s.default.getTableCount(d)<=0||(e[c]=d)}}}}for(var o in this.allParts){var f=this.allParts[o];for(var g in f)for(var m=f[g],_=(d=e[n=m.partId]||{},m.nodes||[]),v=_.length,y=0;y<v;y++){_[y].active=!d[y]}}},t.prototype.buildUi=function(){this.allParts={},this.effects={},this.partTypeOpacitys={},this.scale=.8;new cc.Node;this.nodeAvatarRoot=this;this.nodeAvatarRoot.stopAllActions(),this.nodeAvatarRoot.runAction(cc.repeatForever(cc.sequence(cc.skewBy(.5,-.1,0),cc.skewBy(1,.2,0),cc.skewBy(.5,-.1,0)))),this._registerCmdHander()},t.prototype._registerCmdHander=function(){var e,t=((e={}).CMD_AVATAR_EYE_BLINK=this._onCmdEyeBlink.bind(this),e.CMD_AVATAR_PART_REPLACE=this._onCmdPartReplace.bind(this),e.CMD_AVATAR_HAPPY=this._onCmdHappy.bind(this),e.CMD_AVATAR_SAD=this._onCmdSad.bind(this),e);this.cmdHanders=t},t.prototype._removeResNodes=function(e){if(e)for(var t in e){var o=e[t];d.default.removeResNode(o)}},t.prototype._createResNodes=function(e,t,o){void 0===o&&(o=null);var n=u.default.get("cosmetic_part_db",e);if(!n)return[];this.partTypeOpacitys[n.typeData.id]=255;var r=[],a=n.resources;(o||s.default.isZero(o))&&(a=n.extraResources[o]);for(var i=n.resourceOffset||[0,0],l=n.resourcePoses,p=n.typeData.orders,h=0;h<a.length;h++){var f=a[h],g=f[0],m=l[h];m=cc.v2(m.x+i[0],m.y+i[1]);var _=d.default.createResNode(f[0],f[1],!0);t?(g==c.CPartResType.SPRITE&&_.setPosition(-m.x,m.y),_.setScale(-1,1),_.setPosition(_.x+this.FLIP_PART_OFFSET_X,_.y)):_.setPosition(m.x,m.y),_.parent=this.nodeAvatarRoot,_.zIndex=p[h],_._normalPos=_.position,_._bFlip=t,_._resType=g,r.push(_)}return this.bEyeOpend?this._nodesPlaySpineAnimation(r,"mov_1"):this._nodesPlaySpineAnimation(r,"mov_2"),r},t.prototype._nodesPlaySpineAnimation=function(e,t,o){void 0===o&&(o=null);var n=null;for(var r in e){var a=e[r].spine;a&&(this.context.bDisableSpine&&a.setTimeScale(1e-6),a.play(t,!0),n=n||a)}o&&n&&n.registerEventCallback(function(e){"complete"==e.name&&(n.unregisterEventCallback(),o&&o())})},t.prototype._nodesPlaySpineAnimations=function(e,t,o){if(void 0===o&&(o=null),!(t.length<=0))if(1!=t.length){var n=null;for(var r in e){var a=e[r].spine;a&&(this.context.bDisableSpine&&a.setTimeScale(1e-6),a.play(t,!0),n=n||a)}o&&n&&n.registerEventCallback(function(e){"complete"==e.name&&(n.unregisterEventCallback(),o&&o())})}else this._nodesPlaySpineAnimation(e,t[0])},t.prototype.tryPreloadResources=function(){var e=this.context.structAvatar.allParts;for(var t in e){var o=parseInt(t),n=e[o];if(this.PRELOAD_PART_TYPE_DICT[o])for(var r in n){var a=n[r];if(a.partId&&(d.default.preloadPartResources(a.partId),!d.default.isPreloadedPart(a.partId)))return!1}}return!0},t.prototype.getRefreshVersion=function(){return this.refreshAllVersion},t.prototype.showLoading=function(){this.allParts&&s.default.getTableCount(this.allParts)>0||(this.nodeLoading.opacity=255,this.nodeLoading.runAction(cc.repeatForever(cc.sequence(cc.rotateBy(5,180),cc.rotateBy(5,180)))))},t.prototype.hideLoading=function(){this.nodeLoading.opacity=0,this.nodeLoading.stopAllActions()},t.prototype.refreshAll=function(e){if(void 0===e&&(e=null),this.showLoading(),this.refreshedAllCallback=e,this.bEnabledPreload&&!this.tryPreloadResources())return this.bPreload=!0,void this.update(0);this.refreshAllResLoaded()},t.prototype.refreshAllResLoaded=function(){return a(this,void 0,void 0,function(){var e,t,o,n,r,a,s,l,c,d,p,h,f,g,m,_,v,y;return i(this,function(i){if(this.hideLoading(),this.bPreload=!1,this.bWaitDelayRefresh=!1,this.currDelayRefreshTime=null,this.refreshAllVersion+=1,this.allParts){for(v in this.allParts){e=this.allParts[v];for(t in e)o=e[t],this._removeResNodes(o.nodes),this._removeResNodes(o.srcNodes),this._removeResNodes(o.dstNodes);this.partTypeOpacitys[v]=0}this.allParts=null}n=this.context.structAvatar,r={},a=n.allParts;for(s in a){l=a[s],c=[],d=u.default.get("cosmetic_part_type_db",s);for(p in l)h=parseInt(p),(f=l[p]).partId&&(g=d.fixedPartCount,m=2==g&&h==g-1,_=this._createResNodes(f.partId,m),c.push({partId:f.partId,nodes:_}));r[s]=c}if(this.allParts=r,!this.bRefreshedAll){this.bRefreshedAll=!0;for(v in this.waitingHandlerDatas)y=this.waitingHandlerDatas[v],this.onCmd(y.cmd,y.cmdData);this.waitingHandlerDatas=[]}return this.refreshEffect(),this.updateAllPartExtraPos(),this.refreshedAllCallback&&(this.refreshedAllCallback(),this.refreshedAllCallback=null),[2]})})},t.prototype.refreshEffect=function(){if(this.bEffectEnabled){var e=this.context.structAvatar,t=e.allParts;for(var o in t){var n=parseInt(o),r=this.effects[n],a=null;if(!this.bEyeOpend&&c.default.CPART_EYE_SUB_TYPE_HASH[n]||(a=e.getFinishedPartId(n)),a){if(r||(r={},this.effects[n]=r),r.partId!=a){r.partId=a,r.nodes&&(this._removeResNodes(r.nodes),r.nodes=null);var i=u.default.get("cosmetic_part_db",a);if(i&&i.effectResources){var s=[],l=i.effectResources;for(var p in l){var h=l[p],f=d.default.createResNode(h.resType,h.id);f.parent=this.nodeAvatarRoot,f.zIndex=h.order+this.EFFECT_ORDER,f.setPosition(h.posX||0,h.posY||0),f.setScale(h.scaleX||1,h.scaleY||1),f.rotation=h.rotate,f._normalPos=f.position,s.push(f)}r.nodes=s}}}else r&&(this._removeResNodes(r.nodes),this.effects[n]=null)}}},t.prototype._getPart=function(e,t){var o=this.allParts[e];return o?o[t]:null},t.prototype.setEffectEnabled=function(e){this.bEffectEnabled=e},t.prototype.setExtraPosEnabled=function(e){this.bExtraPosEnabled=e},t.prototype.setPreloadDelayRefresh=function(e){this.bEnablePreloadDelayRefresh=e},t.prototype.setPreloadEnable=function(e){this.bEnabledPreload=e},t.prototype._onCmdEyeBlink=function(e){var t=this;this.bEyeOpend=!1;var o=!1,n=this.allParts;for(var r in c.default.CPART_EYE_SUB_TYPES){var a=n[c.default.CPART_EYE_SUB_TYPES[r]];for(var i in a){var s=a[i];o?this._nodesPlaySpineAnimations(s.nodes,["mov_4","mov_3","mov_1"]):(o=!0,this._nodesPlaySpineAnimations(s.nodes,["mov_4","mov_3","mov_1"],function(){t.bEyeOpend=!0,t.refreshEffect()}))}}},t.prototype._onCmdPartReplace=function(e){var t=e.partType,o=e.index||0;if(c.default.ENABLED_CHECK_MUTEX_TYPES)this.refreshAll();else{var n=this._getPart(t,o);if(!n){var r=this.allParts[t]||{};this.allParts[t]=r,n={},r[o]=n}this._removeResNodes(n.nodes),n.nodes=null;var a=(this.context.structAvatar.allParts[t]||{})[o]||{};if(a.partId){var i=2==u.default.get("cosmetic_part_db",a.partId).typeData.fixedPartCount&&1==o;n.partId=a.partId,n.nodes=this._createResNodes(n.partId,i)}this.updateAllPartExtraPos()}},t.prototype.operationAllParticle=function(e,t){var o=e.getComponent(cc.ParticleSystem);o&&(o.enabled=t);for(var n=0;n<e.children.length;n++){var r=e.children[n];this.operationAllParticle(r,t)}},t.prototype._onCmdHappy=function(e){e=e||{};var t=c.CPartType.FACE,o=e.index||0,n=this._getPart(t,o);if(n){var r=[this.MOV_NAME_HAPPY,"mov_1"];this._nodesPlaySpineAnimations(n.nodes,r),n.srcNodes&&s.default.getTableCount(n.srcNodes)>0&&this._nodesPlaySpineAnimation(n.srcNodes,r),n.dstNodes&&s.default.getTableCount(n.dstNodes)>0&&this._nodesPlaySpineAnimation(n.dstNodes,r),n.hintNodes&&s.default.getTableCount(n.hintNodes)>0&&this._nodesPlaySpineAnimation(n.hintNodes,r)}},t.prototype._onCmdSad=function(e){e=e||{};var t=c.CPartType.FACE,o=e.index||0,n=this._getPart(t,o);if(n){var r=[this.MOV_NAME_SAD,"mov_1"];this._nodesPlaySpineAnimations(n.nodes,r),n.srcNodes&&s.default.getTableCount(n.srcNodes)>0&&this._nodesPlaySpineAnimation(n.srcNodes,r),n.dstNodes&&s.default.getTableCount(n.dstNodes)>0&&this._nodesPlaySpineAnimation(n.dstNodes,r),n.hintNodes&&s.default.getTableCount(n.hintNodes)>0&&this._nodesPlaySpineAnimation(n.hintNodes,r)}},t.prototype.onCmd=function(e,t){if(this.cmdHanders&&this.bRefreshedAll){var o=this.cmdHanders[e];o&&o(t)}else this.waitingHandlerDatas.push({cmd:e,cmdData:t})},t.prototype.getResNodesByPartType=function(e){var t=this.allParts[e];if(!t)return null;var o=null;for(var n in t){var r=t[n];if(r.nodes)for(var a in r.nodes){var i=r.nodes[a];(o=o||[]).push(i)}}return o},t.prototype.getEffectsByPartType=function(e){return(this.effects[e]||{}).nodes},t.prototype.getEffectNodesByPartId=function(e){var t=u.default.get("cosmetic_part_db",e);return t?(this.effects[t.type]||{}).nodes:null},t.prototype.getPartTypeOpacity=function(e){return this.partTypeOpacitys[e]},t.prototype.updateAllPartExtraPos=function(){if(this.bExtraPosEnabled){var e=this.context.structAvatar.getUsedPartIds(!0);for(var t in e){var o=e[t];this.updatePartExtraPos(o)}}},t.prototype.updatePartExtraPos=function(e){var t=u.default.get("cosmetic_part_db",e);if(t){var o=d.default.getExtraPosByPartIdAndAvatar(e,this.context.structAvatar),n=this.getResNodesByPartType(t.type)||[],r=this.getEffectNodesByPartId(e)||[];for(var a in n){(i=n[a])&&(i.position=cc.v2(i._normalPos.x+o.x,i._normalPos.y+o.y))}for(var a in r){var i;(i=r[a])&&(i.position=cc.v2(i._normalPos.x+o.x,i._normalPos.y+o.y))}}},t.prototype.updatePartOffsetPos=function(e){return a(this,void 0,void 0,function(){var t,o,n,r,a,s,l,d,p;return i(this,function(i){if(!(t=u.default.get("cosmetic_part_db",e)))return[2];for(o=this.getResNodesByPartType(t.type)||[],n=t.resourceOffset||[0,0],r=t.resourcePoses,a=0;a<o.length;a++)s=o[a],l=s._bFlip,d=s._resType,p=r[a],p=cc.v2(p.x+n[0],p.y+n[1]),l?(d==c.CPartResType.SPRITE&&s.setPosition(-p.x,p.y),s.setPosition(s.x+this.FLIP_PART_OFFSET_X,s.y)):s.setPosition(p.x,p.y),s._normalPos=s.position;return[2]})})},t.prototype.happy=function(){this.onCmd("CMD_AVATAR_HAPPY",{})},t.prototype.sad=function(){this.onCmd("CMD_AVATAR_SAD",{})},r([l.default.requireResourceLoaded],t.prototype,"showLoading",null),r([l.default.requireResourceLoaded],t.prototype,"hideLoading",null),r([l.default.requireResourceLoaded],t.prototype,"refreshAllResLoaded",null),t=r([p],t)}(l.default);o.default=h,cc._RF.pop()},{"../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrCfg":"mgrCfg","../../manager/mgrCosmetic":"mgrCosmetic"}],vBuildStoreResultDialog:[function(e,t,o){"use strict";cc._RF.push(t,"5337dsZicZFMbP59Rlfjp2U","vBuildStoreResultDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrPlayer"),l=e("../../Const"),c=e("../../manager/mgrTip"),u=e("../../manager/mgrAd"),d=e("../../../ulframework/utils/Tools"),p=e("../node/vStoreResultRankItem"),h=e("../../manager/mgrOfflineStoreRank"),f=e("../node/vCommonTitleBarRmbGold"),g=e("../../manager/mgrDirector"),m=e("../../manager/mgrSound"),_=e("../../manager/mgrCfg"),v=e("../../manager/mgrPool"),y=e("../../../ulframework/component/ToggleButton"),C=e("../../manager/mgrSdk"),S=e("../../manager/mgrChannel"),b=e("../../manager/mgrAdNative"),R=e("../../../ulframework/utils/Timer"),T=e("../../manager/mgrCop"),A=e("../../manager/mgrVideoRecorder"),D=e("../../manager/mgrGuide"),I=e("../../manager/mgrI18n"),w=cc._decorator,L=w.ccclass,P=(w.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonNeedAdv=null,t.buttonNoNeedAdv=null,t.buttonReward=null,t.buttonRewardVideo=null,t.buttonShare=null,t.buttonVideoShare=null,t.buttonVideoShareClose=null,t.buttonVideoShareContent1=null,t.buttonVideoShareContent2=null,t.buttonVideoShareContent3=null,t.labelAdContent=null,t.labelAdTarget=null,t.labelAdTitle=null,t.labelButtonReward=null,t.labelButtonRewardVideo=null,t.labelNeedAdv=null,t.labelNoNeedAdv=null,t.labelNoRankTalk=null,t.labelProcessLottery=null,t.labelReward=null,t.labelRewardVideo=null,t.labelScore=null,t.labelTalk=null,t.labelTitle=null,t.labelVideoShare=null,t.labelVideoShareClose=null,t.labelVideoShareTipNum=null,t.layoutBg=null,t.layoutOnline=null,t.nodeAdButtonFlag=null,t.nodeAdImg=null,t.nodeContent=null,t.nodeGouMode=null,t.nodeNative=null,t.nodeNewRecordFlag=null,t.nodeProgressLottery=null,t.nodeProgressLotteryFlag=null,t.nodeRank=null,t.nodeRankBase=null,t.nodeRewardBtns=null,t.nodeShine=null,t.nodeSpine=null,t.nodeStar=null,t.nodeTalk=null,t.nodeTitle=null,t.nodeTitleBar=null,t.nodeVideoShare=null,t.nodeVideoShareContent=null,t.nodeVideoShareTips=null,t.progressBarLottery=null,t.spriteAd=null,t.spriteFinger=null,t.spriteNeedGou=null,t.spriteNoNeedGou=null,t.toggleTipSelect=null,t.AD_REWARD_NAME="video_building_store_result_reward",t.TALK_GOOD_RATE_ARR=[I.default.getText("vBuildStoreResultDialog.11"),I.default.getText("vBuildStoreResultDialog.12")],t.TALK_BAD_RATE_ARR=[I.default.getText("vBuildStoreResultDialog.13"),I.default.getText("vBuildStoreResultDialog.14")],t.LOTTERY_SUIT_ID_ARR=[2006,4007,5007],t.LOTTERY_READY_MAX_COUNT=4,t.isNeedAdv=!0,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vBuildStoreResultDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_buttonNeedAdv:[a.default,"onTouchButtonNeedAdv"],CC_buttonNoNeedAdv:[a.default,"onTouchButtonNoNeedAdv"],CC_buttonReward:[a.default,"onTouchButtonReward"],CC_buttonRewardVideo:[a.default,"onTouchButtonRewardVideo"],CC_buttonShare:[a.default,"onTouchButtonShare"],CC_buttonVideoShare:[a.default,"onTouchButtonVideoShare"],CC_buttonVideoShareClose:[a.default,"onTouchButtonVideoShareClose"],CC_buttonVideoShareContent1:[a.default,"onTouchButtonVideoShareContent1"],CC_buttonVideoShareContent2:[a.default,"onTouchButtonVideoShareContent2"],CC_buttonVideoShareContent3:[a.default,"onTouchButtonVideoShareContent3"],CC_toggleTipSelect:[y.default,"onTouchToggleTipSelect"],CC_labelAdContent:[cc.Label],CC_labelAdTarget:[cc.Label],CC_labelAdTitle:[cc.Label],CC_labelButtonReward:[cc.Label],CC_labelButtonRewardVideo:[cc.Label],CC_labelNeedAdv:[cc.Label],CC_labelNoNeedAdv:[cc.Label],CC_labelNoRankTalk:[cc.Label],CC_labelProcessLottery:[cc.Label],CC_labelReward:[cc.Label],CC_labelRewardVideo:[cc.Label],CC_labelScore:[cc.Label],CC_labelTalk:[cc.Label],CC_labelTitle:[cc.Label],CC_labelVideoShare:[cc.Label],CC_labelVideoShareClose:[cc.Label],CC_labelVideoShareTipNum:[cc.Label],CC_layoutBg:[cc.Layout],CC_layoutOnline:[cc.Layout],CC_nodeAdButtonFlag:[cc.Node],CC_nodeAdImg:[cc.Node],CC_nodeContent:[cc.Node],CC_nodeGouMode:[cc.Node],CC_nodeNative:[cc.Node],CC_nodeNewRecordFlag:[cc.Node],CC_nodeProgressLottery:[cc.Node],CC_nodeProgressLotteryFlag:[cc.Node],CC_nodeRank:[cc.Node],CC_nodeRankBase:[cc.Node],CC_nodeRewardBtns:[cc.Node],CC_nodeShine:[cc.Node],CC_nodeSpine:[cc.Node],CC_nodeStar:[cc.Node],CC_nodeTalk:[cc.Node],CC_nodeTitle:[cc.Node],CC_nodeTitleBar:[cc.Node],CC_nodeVideoShare:[cc.Node],CC_nodeVideoShareContent:[cc.Node],CC_nodeVideoShareTips:[cc.Node],CC_progressBarLottery:[cc.ProgressBar],CC_spriteAd:[cc.Sprite],CC_spriteFinger:[cc.Sprite],CC_spriteNeedGou:[cc.Sprite],CC_spriteNoNeedGou:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(g.default.size),this.setContentSize(g.default.size);C.default.isOpenVideoRecord()&&C.default.getLastRecordVideoTime()>=10&&S.default._isSupportRecordShare,1!=C.default.getCopNumberValueByKey("b_share")||S.default._isShareEnabled;this.buttonShare.node.active=!1,this.nodeVideoShare.active=!1,this.nodeContent.y=-g.default.height/2+this.nodeContent.height/2+T.default.getNumberValue("ui_banner_height")+100;var t=this.context.rewardGold||0;this.buttonClose.node.active=t<=0,u.default.isAdEventHasChanceTrigger(this.AD_REWARD_NAME)||(this.buttonRewardVideo.node.active=!1,this.buttonReward.node.x=0),S.default.isRankEnabled()||(this.nodeRankBase.active=!1,this.nodeTalk.active=!1,this.labelNoRankTalk.node.opacity=255),u.default.showIntAd(null,"inter_result_dialog"),b.default.registerNativeBannerRefreshFun("ad_native_building_store_result_dialog",this.adaptNativeAd.bind(this),this.nodeNative)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.spine&&(v.default.put(this.spine),this.spine.removeFromParent(),this.spine=null)},t.prototype.onCloseDialogStart=function(){u.default.closeBannerAd()},t.prototype.onOpenDialogCompleted=function(){this.onLoadedInit()},t.prototype.videoShareAdapt=function(){var e=this;if(!D.default.isGuiding()&&C.default.isOpenVideoRecord()&&A.default.recordStatus==A.default.RECORD_FINISH&&A.default.lastRecordVideoTime>A.default.minRecordTime){if(this.nodeVideoShare.active=!0,this.buttonVideoShareClose.node.active=!1,S.default.isShowVideoRecorderFinger()&&(this.spriteFinger.node.active=!0,this.spriteFinger.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.2).easing(cc.easeBackOut()),cc.scaleTo(.5,.8).easing(cc.easeBackOut()))))),s.default.getItemAmount(l.default.ITEM_ID_VIDEO_SHARE_COUNT)>0){var t=Math.ceil(s.default.getBascRewardGold());this.labelVideoShareTipNum.string="*"+t,this.nodeVideoShareTips.active=!0}else this.nodeVideoShareTips.active=!1;S.default.isCanClickVideoShareDialogContent()&&(this.nodeVideoShareContent.active=!0);var o=C.default.getCopNumberValueByKey("build_store_result_dialog_video_share_cancel_delay_time")||0,n=C.default.getCopNumberValueByKey("build_store_result_dialog_video_share_cancel_delay_ratio")||0;d.default.random(100)<=n?R.default.callLater(o,function(){e.buttonVideoShareClose.node.active=!0},this):this.buttonVideoShareClose.node.active=!0,this.buttonReward.node.active=!1,this.buttonRewardVideo.node.active=!1}else this.adaptAdMode()},t.prototype.adaptAdMode=function(){this.layoutOnline.node.active=u.default.isOnline(),this.buttonReward.node.active=u.default.isMcprc(),u.default.isAdEventHasChanceTrigger(this.AD_REWARD_NAME)?this.buttonRewardVideo.node.active=!0:(this.buttonRewardVideo.node.active=!1,this.buttonReward.node.x=0),u.default.isOnline()&&(this.labelRewardVideo._oldString=this.labelRewardVideo._oldString||this.labelRewardVideo.string,this.toggleTipSelect.isPressed()?(this.labelButtonRewardVideo.setLocalizedString("vBuildStoreResultDialog.6"),this.nodeAdButtonFlag.active=!0,this.labelRewardVideo.string=this.labelRewardVideo._oldString):(this.labelButtonRewardVideo.setLocalizedString("vBuildStoreResultDialog.15"),this.nodeAdButtonFlag.active=!1,this.labelRewardVideo.string=this.labelReward.string))},t.prototype.adaptTickModeUi=function(){this.nodeGouMode.active=!1,this.buttonNeedAdv.node.active=!1,this.buttonNoNeedAdv.node.active=!1,!D.default.isGuiding()&&S.default.isCanVideoTick()&&this.buttonRewardVideo.node.active&&(this.nodeGouMode.active=!0,this.layoutOnline.node.active=!1,this.buttonClose.node.active=!1,this.buttonReward.node.active=!0,this.randomNeedAdv()?(this.buttonNeedAdv.node.active=!0,this.labelButtonReward.setLocalizedString("vBuildStoreResultDialog.5")):(this.buttonNoNeedAdv.node.active=!0,this.labelButtonReward.setLocalizedString("vBuildStoreResultDialog.16")))},t.prototype.randomNeedAdv=function(){return d.default.random(100)>50?(this.isNeedAdv=!0,!0):(this.isNeedAdv=!1,!1)},t.prototype.onLoadedInit=function(){new f.default({bHideEnergy:!0}).parent=this.nodeTitleBar;var e=this.context.initOrder||0,t=this.context.completedOrder||0,o=this.context.rewardGold||0;this.labelScore.string=ul.format("%s",s.default.getItemAmountStr(o)),this.labelReward.string=ul.format("%s",s.default.getItemAmountStr(o)),this.labelRewardVideo.string=ul.format("%s",s.default.getItemAmountStr(2*o)),(!o||o<=0)&&(this.nodeRewardBtns.active=!1),this.nodeNewRecordFlag.active=!!this.context.bNewRecord;var n="";n=t>=e/2?this.TALK_GOOD_RATE_ARR[d.default.random(0,this.TALK_GOOD_RATE_ARR.length-1)]:this.TALK_BAD_RATE_ARR[d.default.random(0,this.TALK_BAD_RATE_ARR.length-1)],this.labelTalk.string=n||"",this.labelNoRankTalk.string=n||"",this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd.bind(this),MSG_AD_EVENT_FAILD:this.onMsgAdEventFaild.bind(this),MSG_AD_EVENT_CANCELED:this.onMsgAdEventCanceled.bind(this),MSG_ROLL_TITLE_BAR_ITEM_AMOUNT:this.onMsgRollTitleBarItemAmount.bind(this),MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult.bind(this),MSG_SDK_SHARE_RESULT:this.onMsgShareResult.bind(this)}),this.initRankItems(),this.fillRankItems(),t>=5&&s.default.addItemAmount(l.default.ITEM_ID_STORE_RESULT_LOTTERY_READY_COUNT,1,"\u7ed3\u7b97\u51c6\u5907\u62bd\u5956"),this.refreshLotteryInfo(),this.nodeShine.runAction(cc.repeatForever(cc.sequence(cc.rotateBy(5,180),cc.rotateBy(5,180)))),this.nodeStar.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.05,1.05),cc.scaleTo(1,.95,.95),cc.scaleTo(.5,1,1))));var r=v.default.get("spine","jiesuanwawa");r&&(r.play("mov_1",!0),r.parent=this.nodeSpine,this.spine=r),this.videoShareAdapt(),this.adaptTickModeUi(),this.context.bForce&&(this.buttonClose.node.active=!0),u.default.showBannerAd(this.nodeResource,"ad_banner_build_store_result_dialog")},t.prototype.refreshLotteryInfo=function(){var e=Math.min(s.default.getItemAmount(l.default.ITEM_ID_STORE_RESULT_LOTTERY_READY_COUNT)||0,this.LOTTERY_READY_MAX_COUNT);this.labelProcessLottery.string=ul.format("%s/%s",e,this.LOTTERY_READY_MAX_COUNT),this.progressBarLottery.progress=e/this.LOTTERY_READY_MAX_COUNT},t.prototype.initRankItems=function(){for(var e=[],t=0;t<2;t++){var o=new p.default({});o.parent=this.nodeRank,e.push(o)}this.rankItems=e},t.prototype.fillRankItems=function(){for(var e=h.default.getStoreResultData(this.context.newOfflineStoreRankNum),t=this.rankItems.length,o=0;o<=t-1;o++){var n=this.rankItems[t-1-o],r=e[o];n.zIndex=10-o,r&&n?(n.active=!0,n.fillByPlayer(r)):n.active=!1}d.default.layoutChildren(this.nodeRank,"up",60)},t.prototype.doReward=function(e){var t=this,o=this.context.rewardGold||0;e&&(o*=2);var n=l.default.ITEM_ID_GOLD;s.default.addItemAmount(n,o,e?"\u5546\u5e97\u7ed3\u7b97_\u5e7f\u544a":"\u5546\u5e97\u7ed3\u7b97"),c.default.addGotItemTip(n,o,null,{autoCloseDialogDelayTime:.8}),this.nodeRewardBtns.active=!1,m.default.play(402),this.bRewarded=!0,R.default.callLoop(.016,function(e){c.default.isAllGotItemTipDisplayed()&&(e.stop(),t.onMsgRollTitleBarItemAmount(null))},this)},t.prototype.adaptNativeAd=function(e){e?(this.nodeNative.active=!0,this.nodeContent.height=550,this.labelAdTitle.string=e.title||"",this.labelAdContent.string=e.desc||"",this.labelAdTarget.string=e.targetTitle||"",this.spriteAd.spriteFrame=e.spriteFrame,this.spriteAd.node.scale=Math.min(this.nodeAdImg.height/this.spriteAd.node.height,this.nodeAdImg.width/this.spriteAd.node.width)):(this.nodeNative.active=!1,this.nodeContent.height=410)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonReward=function(e){if(e.isClick()){if(!D.default.isGuiding()&&S.default.isCanVideoTick()&&this.nodeGouMode.active&&this.buttonRewardVideo.node.active){if(this.isNeedAdv&&this.buttonNeedAdv.node.active&&this.spriteNeedGou.node.active)return void u.default.triggerAdEvent(this.AD_REWARD_NAME,null,!0);if(!this.isNeedAdv&&this.buttonNoNeedAdv.node.active&&!this.spriteNoNeedGou.node.active)return void u.default.triggerAdEvent(this.AD_REWARD_NAME,null,!0)}this.doReward(!1)}},t.prototype.onTouchButtonRewardVideo=function(e){e.isClick()&&(!u.default.isOnline()||this.toggleTipSelect.isPressed()?u.default.triggerAdEvent(this.AD_REWARD_NAME,null,!0):this.doReward(!1))},t.prototype.onTouchButtonShare=function(e){if(e.isClick()){var t=!!(C.default.isOpenVideoRecord()&&C.default.getLastRecordVideoTime()>=10&&S.default._isSupportRecordShare),o=!(1!=C.default.getCopNumberValueByKey("b_share")||!S.default._isShareEnabled);t?C.default.shareGameVideo("","\u5a03\u5a03\u5236\u4f5c\u5b8c\u6210\u754c\u9762"):o&&s.default.tryNoRewardShare("\u5a03\u5a03\u5236\u4f5c\u5b8c\u6210\u754c\u9762"),this.buttonShare.node._originActive=!0,this.buttonShare.node.active=!1}},t.prototype.onTouchToggleTipSelect=function(e){e.isClick()&&this.adaptAdMode()},t.prototype.onTouchButtonVideoShare=function(e){e.isClick()&&C.default.shareGameVideo()},t.prototype.onTouchButtonVideoShareClose=function(e){e.isClick()&&(this.nodeVideoShare.active=!1,this.adaptAdMode())},t.prototype.onTouchButtonNeedAdv=function(e){e.isClick()&&(this.spriteNeedGou.node.active?(this.spriteNeedGou.node.active=!1,this.labelButtonReward.setLocalizedString("vBuildStoreResultDialog.16")):(this.spriteNeedGou.node.active=!0,this.labelButtonReward.setLocalizedString("vBuildStoreResultDialog.5")))},t.prototype.onTouchButtonNoNeedAdv=function(e){e.isClick()&&(this.spriteNoNeedGou.node.active?(this.spriteNoNeedGou.node.active=!1,this.labelButtonReward.setLocalizedString("vBuildStoreResultDialog.5")):(this.spriteNoNeedGou.node.active=!0,this.labelButtonReward.setLocalizedString("vBuildStoreResultDialog.16")))},t.prototype.onTouchButtonVideoShareContent1=function(e){e.isClick()&&C.default.shareGameVideo()},t.prototype.onTouchButtonVideoShareContent2=function(e){e.isClick()&&C.default.shareGameVideo()},t.prototype.onTouchButtonVideoShareContent3=function(e){e.isClick()&&C.default.shareGameVideo()},t.prototype.onMsgAdEventSuccessd=function(e){e.adEventId==this.AD_REWARD_NAME&&this.doReward(!0)},t.prototype.onMsgAdEventFaild=function(e){e.adEventId==this.AD_REWARD_NAME&&this.doReward(!1)},t.prototype.onMsgAdEventCanceled=function(e){this.onMsgAdEventFaild(e)},t.prototype.onMsgRollTitleBarItemAmount=function(e){var t=this;this.bRewarded&&this.getNumberOfRunningActions()<=0&&!this.bLottery&&this.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){if(s.default.getItemAmount(l.default.ITEM_ID_STORE_RESULT_LOTTERY_READY_COUNT)>=t.LOTTERY_READY_MAX_COUNT){t.bLottery=!0,s.default._setItemAmount(l.default.ITEM_ID_STORE_RESULT_LOTTERY_READY_COUNT,0);var e=t.LOTTERY_SUIT_ID_ARR||[],o=0;for(var n in e){var r=_.default.get("suit_db",e[n]).displayIds||[];for(var a in r)if(s.default.getItemAmount(r[a])<=0){o=e[n];break}if(o)break}g.default.warpDialogWithSmallEffect("vSignLotteryDialog",{suitId:o,fOnDialogClose:function(){t.closeDialog(!0)}})}else t.closeDialog()})))},t.prototype.onMsgSdkShareVideoResult=function(e){this.nodeVideoShare.active=!1,this.buttonVideoShareClose.node.active=!1,this.adaptAdMode()},t.prototype.onMsgShareResult=function(e){},t=r([L],t)}(i.default));o.default=P,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/component/ToggleButton":"ToggleButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrAdNative":"mgrAdNative","../../manager/mgrCfg":"mgrCfg","../../manager/mgrChannel":"mgrChannel","../../manager/mgrCop":"mgrCop","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n","../../manager/mgrOfflineStoreRank":"mgrOfflineStoreRank","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrPool":"mgrPool","../../manager/mgrSdk":"mgrSdk","../../manager/mgrSound":"mgrSound","../../manager/mgrTip":"mgrTip","../../manager/mgrVideoRecorder":"mgrVideoRecorder","../node/vCommonTitleBarRmbGold":"vCommonTitleBarRmbGold","../node/vStoreResultRankItem":"vStoreResultRankItem"}],vBuildingStoreDetailDialog:[function(e,t,o){"use strict";cc._RF.push(t,"d65c8rsx91CZZ7p729L1DN8","vBuildingStoreDetailDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrBuildingStore"),l=e("../../manager/mgrTip"),c=e("../../manager/mgrDirector"),u=e("../../manager/mgrAd"),d=e("../../../ulframework/utils/Tools"),p=e("../../manager/mgrPlayer"),h=e("../../../ulframework/component/ToggleButton"),f=e("../../manager/mgrGuide"),g=e("../../manager/mgrSound"),m=e("../../manager/mgrPool"),_=e("../node/vCommonTitleBarRmbGold"),v=e("../../manager/mgrCop"),y=e("../../manager/mgrGoldRain"),C=e("../../manager/mgrChannel"),S=e("../../manager/mgrI18n"),b=cc._decorator,R=b.ccclass,T=(b.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonLvup=null,t.buttonVideoLvup=null,t.labelButtonRewardVideo=null,t.labelCurrLvDesc=null,t.labelCurrOrderDesc=null,t.labelLvup=null,t.labelLvupCost=null,t.labelLvupCostVideo=null,t.labelNextLvDesc=null,t.labelNextOrderDesc=null,t.labelTitle=null,t.layoutOnline=null,t.nodeAdButtonFlag=null,t.nodeBg=null,t.nodeContent=null,t.nodeLvup=null,t.nodeMidAutumn=null,t.nodeNormal=null,t.nodePriceVideo=null,t.nodeStoreIcon=null,t.nodeTitle=null,t.nodeTitleBar=null,t.toggleTipSelect=null,t.AD_VIDEO_LVUP_BUILDING_STORE_NAME="video_lvup_building_store",t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vBuildingStoreDetailDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_buttonLvup:[a.default,"onTouchButtonLvup"],CC_buttonVideoLvup:[a.default,"onTouchButtonVideoLvup"],CC_toggleTipSelect:[h.default,"onTouchToggleTipSelect"],CC_labelButtonRewardVideo:[cc.Label],CC_labelCurrLvDesc:[cc.Label],CC_labelCurrOrderDesc:[cc.Label],CC_labelLvup:[cc.Label],CC_labelLvupCost:[cc.Label],CC_labelLvupCostVideo:[cc.Label],CC_labelNextLvDesc:[cc.Label],CC_labelNextOrderDesc:[cc.Label],CC_labelTitle:[cc.Label],CC_layoutOnline:[cc.Layout],CC_nodeAdButtonFlag:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeContent:[cc.Node],CC_nodeLvup:[cc.Node],CC_nodeMidAutumn:[cc.Node],CC_nodeNormal:[cc.Node],CC_nodePriceVideo:[cc.Node],CC_nodeStoreIcon:[cc.Node],CC_nodeTitle:[cc.Node],CC_nodeTitleBar:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),C.default.isCanShowMidAutumn()&&this.tryChangeMidAutumnUi(),this.refreshAdBtn(),this.nodeResource.setContentSize(c.default.size),this.setContentSize(c.default.size),this.nodeContent.y=-c.default.height/2+this.nodeBg.height/2+v.default.getNumberValue("ui_banner_height")+120,this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd.bind(this),MSG_AD_EVENT_FAILD:this.onMsgAdEventFaild.bind(this),MSG_AD_EVENT_CANCELED:this.onMsgAdEventCanceled.bind(this),MSG_SDK_ADV_VALID_COUNT:this.onMsgAdvValidCount.bind(this)}),y.default.openGoldRain(4),u.default.isMcprc()?u.default.showIntAd():u.default.showViewEnterAd(this.nodeResource,null,null,"ad_banner_building_store_detail_dialog")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onOpenDialogCompleted=function(){this.onLoadedInit()},t.prototype.onCloseDialogStart=function(){u.default.closeBannerAd()},t.prototype.refreshAdBtn=function(){u.default.isAdEventHasChanceTrigger(this.AD_VIDEO_LVUP_BUILDING_STORE_NAME)?d.default.layoutNodesHorizonCenter([this.buttonLvup.node,this.buttonVideoLvup.node],30):(this.buttonVideoLvup.node.active=!1,d.default.layoutNodesHorizonCenter([this.buttonLvup.node],30))},t.prototype.tryChangeMidAutumnUi=function(){this.nodeNormal.active=!1,this.nodeMidAutumn.active=!0},t.prototype.adaptAdMode=function(){if(this.refreshAdBtn(),!this.buttonVideoLvup.node.active)return this.layoutOnline.node.active=!1,void(this.buttonLvup.node.active=!0);this.layoutOnline.node.active=u.default.isOnline(),this.buttonLvup.node.active=u.default.isMcprc(),this.nodePriceVideo.active=!1,u.default.isOnline()&&(this.toggleTipSelect.isPressed()?(this.labelButtonRewardVideo.setLocalizedString("vBuildingStoreDetailDialog.7"),this.nodeAdButtonFlag.active=!0):(this.labelButtonRewardVideo.setLocalizedString("vBuildingStoreDetailDialog.8"),this.nodeAdButtonFlag.active=!1,this.labelLvupCostVideo.string=this.labelLvupCost.string,this.nodePriceVideo.active=!0))},t.prototype.onLoadedInit=function(){(new _.default).parent=this.nodeTitleBar,this.nodeBg._originSize=this.nodeBg.getContentSize(),this.refresh(),f.default.isGuiding()&&(this.layoutOnline.node.active=!0,this.toggleTipSelect.setPressStatus(!1)),this.adaptAdMode(),u.default.isOnline()&&this.buttonVideoLvup.node.active?f.default.registerGuideNode("vBuildingStoreDetailDialog.buttonLvup",this.buttonVideoLvup.node):f.default.registerGuideNode("vBuildingStoreDetailDialog.buttonLvup",this.buttonLvup.node)},t.prototype.refresh=function(){var e=s.default.getBuildingStore();this.labelLvupCost.string=ul.format("%s",p.default.getItemAmountStr(e.template.upgradeCostGoldNum));var t=e.getNextTemplate();this.labelCurrLvDesc.string=ul.format("%s",e.level),this.labelCurrOrderDesc.string=e.template.entertainMaxOrderNum,t?(this.labelNextLvDesc.string=ul.format("%s",e.level+1),this.labelNextOrderDesc.string=ul.format("%s",t.entertainMaxOrderNum),this.nodeLvup.active=!0):(this.labelNextLvDesc.string=ul.format("%s",S.default.getText("vBuildingStoreDetailDialog.9")),this.labelNextOrderDesc.string=ul.format("%s",this.labelCurrOrderDesc.string),this.nodeLvup.active=!1)},t.prototype.doUnlock=function(e){var t=s.default.getBuildingStore().level;if(s.default.upgradeBuildingStore(e)){t<=0?l.default.showMsgTip(S.default.getText("vBuildingStoreDetailDialog.10")):l.default.showMsgTip(S.default.getText("vBuildingStoreDetailDialog.11")),this.nodeStoreIcon.runAction(cc.sequence(cc.scaleTo(.1,1.2,1.2),cc.scaleTo(.1,1,1))),g.default.play(108);var o=m.default.get("particle","bao_2");if(!o)return;o.scale=.9,o.parent=this.nodeStoreIcon,o.setAutoRemoveOnFinish(!0),this.adaptAdMode()}this.refresh()},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonLvup=function(e){e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"vBuildingStoreDetailDialog.buttonLvup.click"}),this.doUnlock(!1),y.default.openGoldRain(1))},t.prototype.onTouchButtonVideoLvup=function(e){e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"vBuildingStoreDetailDialog.buttonLvup.click"}),!u.default.isOnline()||this.toggleTipSelect.isPressed()?u.default.triggerAdEvent(this.AD_VIDEO_LVUP_BUILDING_STORE_NAME,null,!0):this.doUnlock(!1))},t.prototype.onTouchToggleTipSelect=function(e){e.isClick()&&this.adaptAdMode()},t.prototype.onMsgAdEventSuccessd=function(e){e.adEventId==this.AD_VIDEO_LVUP_BUILDING_STORE_NAME&&this.doUnlock(!0)},t.prototype.onMsgAdEventFaild=function(e){},t.prototype.onMsgAdEventCanceled=function(e){this.onMsgAdEventFaild(e)},t.prototype.onMsgAdvValidCount=function(e){this.adaptAdMode()},t=r([R],t)}(i.default));o.default=T,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/component/ToggleButton":"ToggleButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrBuildingStore":"mgrBuildingStore","../../manager/mgrChannel":"mgrChannel","../../manager/mgrCop":"mgrCop","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGoldRain":"mgrGoldRain","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrPool":"mgrPool","../../manager/mgrSound":"mgrSound","../../manager/mgrTip":"mgrTip","../node/vCommonTitleBarRmbGold":"vCommonTitleBarRmbGold"}],vBuildingStoreDialog:[function(e,t,o){"use strict";cc._RF.push(t,"4dfd4K3w6tGz4KrLxOUyrew","vBuildingStoreDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../node/vPackingAvatar"),l=e("../../../ulframework/utils/Tools"),c=e("../node/vShoper"),u=e("../../manager/mgrDirector"),d=e("../../manager/mgrPlayer"),p=e("../../Const"),h=e("../../manager/mgrBuildingStore"),f=e("../../manager/mgrPacking"),g=e("../../manager/mgrTip"),m=e("../node/vHudStaffUnit"),_=e("../../manager/mgrEmployee"),v=e("../../struct/sAvatar"),y=e("../../manager/mgrCfg"),C=e("../../manager/mgrCosmetic"),S=e("../../manager/mgrSound"),b=e("../../manager/mgrEffect"),R=e("../node/vOrderTitleBar"),T=e("../../manager/mgrOfflineStoreRank"),A=e("../../manager/mgrGuide"),D=e("../node/vCommonTitleBarHorzental"),I=e("../../../ulframework/view/ReuseList"),w=e("../../../ulframework/view/ReuseLayouterHGrid"),L=e("../../manager/mgrPool"),P=e("../../manager/mgrSdk"),k=e("../../manager/mgrChannel"),E=e("../../manager/mgrAd"),N=e("../../manager/mgrGoldRain"),O=e("../../manager/mgrVideoRecorder"),M=e("./vPromptHudCrazyDialog"),B=e("../../manager/mgrI18n"),U=cc._decorator,x=U.ccclass,G=(U.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.packingAvatars=[],t.waitingShoperArr=[],t.boughtShoperArr=[],t.currOrderNum=0,t.genedShoperCount=0,t.nextsGenPlayerShoperTime=0,t.lastGenEmployeeShoperTime=0,t.staffUnitArr=[],t.staffUnitIdDict={},t.storePassTime=0,t.turnoverNum=0,t.bFirstOpenShop=!0,t.continuationRightSubjectCount=0,t.canRandomData=[],t.buttonBack=null,t.buttonClose=null,t.buttonInvateEmployee=null,t.buttonLvup=null,t.buttonMoreGameBox=null,t.buttonPacking=null,t.buttonStart=null,t.labelStoreLeftTime=null,t.labelStoreLeftTimeRed=null,t.labelStoreLv=null,t.nodeBottomBtns=null,t.nodeBottomCenter=null,t.nodeButtonStart=null,t.nodeDeskAvatarHolder=null,t.nodeEmployeeHolder1=null,t.nodeEmployeeHolder1EnterInPath1=null,t.nodeEmployeeHolder1EnterInPath2=null,t.nodeEmployeeHolder2=null,t.nodeEmployeeHolder2EnterInPath1=null,t.nodeEmployeeHolder2EnterInPath2=null,t.nodeEmployeeHolder3=null,t.nodeEmployeeHolder3EnterInPath1=null,t.nodeEmployeeHolder3EnterInPath2=null,t.nodeEnergyEffect=null,t.nodeLeftTop=null,t.nodeMap=null,t.nodeMask=null,t.nodeOrder=null,t.nodePackingList=null,t.nodeRightTop=null,t.nodeShoperEmployeeOutHolder1=null,t.nodeShoperEmployeeOutHolder2=null,t.nodeShoperEmployeeOutHolder3=null,t.nodeShoperHolder1=null,t.nodeShoperHolder10=null,t.nodeShoperHolder11=null,t.nodeShoperHolder12=null,t.nodeShoperHolder2=null,t.nodeShoperHolder3=null,t.nodeShoperHolder4=null,t.nodeShoperHolder5=null,t.nodeShoperHolder6=null,t.nodeShoperHolder7=null,t.nodeShoperHolder8=null,t.nodeShoperHolder9=null,t.nodeShoperInitHolder1=null,t.nodeShoperInitHolder11=null,t.nodeShoperInitHolder12=null,t.nodeShoperInitHolder13=null,t.nodeShoperInitHolder2=null,t.nodeShoperOutHolde9=null,t.nodeShoperOutHolder=null,t.nodeShoperOutHolder1=null,t.nodeShoperOutHolder2=null,t.nodeShoperOutHolder3=null,t.nodeShoperOutHolder4=null,t.nodeShoperOutHolder5=null,t.nodeShoperOutHolder6=null,t.nodeShoperOutHolder7=null,t.nodeShoperOutHolder8=null,t.nodeShoperStandbyHolder1=null,t.nodeShoperStandbyHolder2=null,t.nodeShoperStandbyHolder3=null,t.nodeShoperToEmployeeBuyHolder1=null,t.nodeShoperToEmployeeBuyHolder2=null,t.nodeShoperToEmployeeBuyHolder3=null,t.nodeStoreStatus=null,t.nodeStoreStatusContent=null,t.nodeSubject=null,t.nodeTitleBar=null,t.nodeUIRoot=null,t.nodeUnitMaxScaleHolder=null,t.nodeUnitMidScaleHolder=null,t.nodeUnitMinScaleHolder=null,t.nodeWater4399=null,t.spriteCurrSubjectIcon=null,t.PER_GUIDE_SHOPER_GEN_GAP_TIME=1,t.SHOPER_MOVE_TO_WAIT_HOLDER_FPS=450,t.SHOPER_MOVE_OUT_FPS=250,t.MAX_EMPLOYEE_COUNT=3,t.MAX_DESK_WAIT_SHOPER_COUNT=3,t.MAP_UNIT_MAX_SCALE=1,t.MAP_UNIT_MID_SCALE=.8,t.MAP_UNIT_MIN_SCALE=.55,t.STAFF_UNIT_INIT_SCALE=2,t.NPC_UNIT_INIT_SCALE=1,t.SHOPER_UNIT_INIT_SCALE=1,t.AD_FREE_ENERGY_NAME="video_free_energy_name",t.AD_INTER_VIEW_NAME="inter_building_store_dialog",t.AD_VIDEO_PRICE_PROMOTE="video_price_promote",t.AD_VIDEO_ADD_ORDER="video_store_add_order",t.multiplePricePackingId=0,t.pricePromotePackingId=0,t.pricePromotePrice=0,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vBuildingStoreDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBack:[a.default,"onTouchButtonBack"],CC_buttonClose:[a.default,"onTouchButtonClose"],CC_buttonInvateEmployee:[a.default,"onTouchButtonInvateEmployee"],CC_buttonLvup:[a.default,"onTouchButtonLvup"],CC_buttonMoreGameBox:[a.default,"onTouchButtonMoreGameBox"],CC_buttonPacking:[a.default,"onTouchButtonPacking"],CC_buttonStart:[a.default,"onTouchButtonStart"],CC_labelStoreLeftTime:[cc.Label],CC_labelStoreLeftTimeRed:[cc.Label],CC_labelStoreLv:[cc.Label],CC_nodeBottomBtns:[cc.Node],CC_nodeBottomCenter:[cc.Node],CC_nodeButtonStart:[cc.Node],CC_nodeDeskAvatarHolder:[cc.Node],CC_nodeEmployeeHolder1:[cc.Node],CC_nodeEmployeeHolder1EnterInPath1:[cc.Node],CC_nodeEmployeeHolder1EnterInPath2:[cc.Node],CC_nodeEmployeeHolder2:[cc.Node],CC_nodeEmployeeHolder2EnterInPath1:[cc.Node],CC_nodeEmployeeHolder2EnterInPath2:[cc.Node],CC_nodeEmployeeHolder3:[cc.Node],CC_nodeEmployeeHolder3EnterInPath1:[cc.Node],CC_nodeEmployeeHolder3EnterInPath2:[cc.Node],CC_nodeEnergyEffect:[cc.Node],CC_nodeLeftTop:[cc.Node],CC_nodeMap:[cc.Node],CC_nodeMask:[cc.Node],CC_nodeOrder:[cc.Node],CC_nodePackingList:[cc.Node],CC_nodeRightTop:[cc.Node],CC_nodeShoperEmployeeOutHolder1:[cc.Node],CC_nodeShoperEmployeeOutHolder2:[cc.Node],CC_nodeShoperEmployeeOutHolder3:[cc.Node],CC_nodeShoperHolder1:[cc.Node],CC_nodeShoperHolder10:[cc.Node],CC_nodeShoperHolder11:[cc.Node],CC_nodeShoperHolder12:[cc.Node],CC_nodeShoperHolder2:[cc.Node],CC_nodeShoperHolder3:[cc.Node],CC_nodeShoperHolder4:[cc.Node],CC_nodeShoperHolder5:[cc.Node],CC_nodeShoperHolder6:[cc.Node],CC_nodeShoperHolder7:[cc.Node],CC_nodeShoperHolder8:[cc.Node],CC_nodeShoperHolder9:[cc.Node],CC_nodeShoperInitHolder1:[cc.Node],CC_nodeShoperInitHolder11:[cc.Node],CC_nodeShoperInitHolder12:[cc.Node],CC_nodeShoperInitHolder13:[cc.Node],CC_nodeShoperInitHolder2:[cc.Node],CC_nodeShoperOutHolde9:[cc.Node],CC_nodeShoperOutHolder:[cc.Node],CC_nodeShoperOutHolder1:[cc.Node],CC_nodeShoperOutHolder2:[cc.Node],CC_nodeShoperOutHolder3:[cc.Node],CC_nodeShoperOutHolder4:[cc.Node],CC_nodeShoperOutHolder5:[cc.Node],CC_nodeShoperOutHolder6:[cc.Node],CC_nodeShoperOutHolder7:[cc.Node],CC_nodeShoperOutHolder8:[cc.Node],CC_nodeShoperStandbyHolder1:[cc.Node],CC_nodeShoperStandbyHolder2:[cc.Node],CC_nodeShoperStandbyHolder3:[cc.Node],CC_nodeShoperToEmployeeBuyHolder1:[cc.Node],CC_nodeShoperToEmployeeBuyHolder2:[cc.Node],CC_nodeShoperToEmployeeBuyHolder3:[cc.Node],CC_nodeStoreStatus:[cc.Node],CC_nodeStoreStatusContent:[cc.Node],CC_nodeSubject:[cc.Node],CC_nodeTitleBar:[cc.Node],CC_nodeUIRoot:[cc.Node],CC_nodeUnitMaxScaleHolder:[cc.Node],CC_nodeUnitMidScaleHolder:[cc.Node],CC_nodeUnitMinScaleHolder:[cc.Node],CC_nodeWater4399:[cc.Node],CC_spriteCurrSubjectIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(u.default.size),this.setContentSize(u.default.size),E.default.showIntAd(null,this.AD_INTER_VIEW_NAME)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.onEnterFrame(t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.trialPackingId&&(f.default.deletePackingAvatarByPackingId(this.trialPackingId),this.trialPackingId=null)},t.prototype.onOpenDialogCompleted=function(){this.onLoadedInit(),E.default.isMcprc()&&E.default.closeBannerAd()},t.prototype.onLoadedInit=function(){var e=this;S.default.play(733),this.buttonMoreGameBox.node.active=!!k.default._isSupportChannelMoreGameBox&&1==P.default.getCopNumberValueByKey("b_more_game_box"),this.nodeWater4399.active=!!k.default._is4399Watermark,this.bFirstOpenShop=0==d.default.getItemAmount(p.default.ITEM_ID_OPEN_SHOP_COUNT),this.currTotalTime=60,this.tryInitTrialPacking(),this.context.bFromGame&&this.context.bStartedStore?(this.currInitOrderNum=this.context.initOrderNum||1,this.currOrderNum=this.context.currOrderNum||1,this.storePassTime=this.context.storePassTime||0,this.turnoverNum=this.context.turnoverNum||0,this.genedShoperCount=this.context.genedShoperCount||0):(this.currOrderNum=Math.min(d.default.getItemAmount(p.default.ITEM_ID_AVATAR_ORDER),d.default.getItemAmount(p.default.ITEM_ID_AVATAR_ORDER)),this.currInitOrderNum=this.currOrderNum,this.turnoverNum=0);var t=new D.default({bHideRmb:!0,bHideGold:!0});t.parent=this.nodeTitleBar,this.titleBar=t;var o=new R.default({fGetOrderAmountFunc:function(){return e.currOrderNum||0},bDisableAutoRefresh:!0});o.y=50,o.parent=this.nodeOrder,this.orderTitleBar=o,this.tryShowAddOrderDialog();var n=this.nodePackingList,r=new I.default;r.setLayouter((new w.default).setCellSize(110,168).setRows(1).setGap(15,6).setPending(8)),r.setCreator(function(t){var o=new s.default({fOnClick:e.onClickAvatarItem.bind(e),bEnableShowPrice:!0,bDisableZeroPacking:!0});o.parent=t,t.item=o}),r.setSetter(function(e,t){e.item.fillByPacking(t)}),r.parent=n,r.setContentSize(n.getContentSize()),r.setAnchorPoint(.5,.5),r.setReuseEnabled(!1),this.reuseListPacking=r,this.initHolder(),this.initAvatar(),this.initShoper(),this.initEmployee(),this.refreshStoreInfo();this.playUIActionIn(function(){e.titleBar.setItemNodePos(),e.context.bStartedStore&&e.doStart()}),this.updateOpenTime(),this.registerListeners({MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this),MSG_GUIDE_OPEN_STORE_BEGIN:this.onMsgGuideOpenStoreBegin.bind(this),MSG_GUIDE_OPEN_STORE_COMPLETED:this.onMsgGuideOpenStoreCompleted.bind(this),MSG_SHOW_BILDING_STORE_SOFTLY:this.onMsgShowBuildingStoreSoftly.bind(this),MSG_BUILDING_STORE_LEVEL_CHANGED:this.onBuildingStoreLevelChanged.bind(this),MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd.bind(this)}),this._tryGuide(),A.default.isGuiding()},t.prototype.tryShowAddOrderDialog=function(){var e=this;if(d.default.getItemAmount(p.default.ITEM_ID_AVATAR_ORDER)<d.default.getItemAmount(p.default.ITEM_ID_MAX_AVATAR_ORDER)&&E.default.preCheckCanTriggerAdEvent(this.AD_VIDEO_ADD_ORDER)){var t=B.default.getText("vBuildingStoreDialog.3");new M.default({contentStr:t,btnRefuseStr:B.default.getText("vBuildingStoreDialog.4"),btnVideoStr:B.default.getText("vBuildingStoreDialog.5"),bShowBanner:!0,bShowOrderNum:!0,currOrderNum:this.currOrderNum,fOnClickVideo:function(){E.default.triggerAdEvent(e.AD_VIDEO_ADD_ORDER,null,!0)}}).openDialog()}},t.prototype.updateOpenTime=function(){var e=h.default.getBuildingStore();this.currTotalTime=e.template.storeOpenTime||60},t.prototype.playUIActionIn=function(e){var t=this;this.nodeStoreStatus._originPos=this.nodeStoreStatus.position,this.buttonLvup.node._originPos=this.buttonLvup.node.position,this.buttonPacking.node._originPos=this.buttonPacking.node.position,this.nodeButtonStart._originPos=this.nodeButtonStart.position,this.nodeButtonStart.x=1e3,this.nodeUIRoot.active=!0;var o=[],n=null;n=[this.nodeOrder];for(var r=0;r<n.length;r++){(a=n[r])._originPos=a._originPos||a.position,a.active&&o.push({node:a,beginPos:cc.v2(a.x+300,a.y),endPos:a._originPos,delayTime:.01*r,dur:.3})}n=[this.nodeTitleBar];for(r=0;r<n.length;r++){var a;(a=n[r])._originPos=a._originPos||a.position,a.active&&o.push({node:a,beginPos:cc.v2(a.x-300,a.y),endPos:a._originPos,delayTime:.01*r,dur:.3})}b.default.playMoveToActionArr(o,1,null),this.nodeUIRoot.runAction(cc.sequence(cc.delayTime(1.5),cc.callFunc(function(){t.bFirstOpenShop?t.buttonBack.node.active=!1:(t.buttonBack.node.active=!0,t.buttonBack.node.runAction(cc.fadeIn(.3))),t.nodeButtonStart.opacity=255,t.nodeButtonStart.runAction(cc.sequence(cc.delayTime(.3),cc.moveTo(.3,t.nodeButtonStart._originPos).easing(cc.easeElasticOut(1.2)),cc.callFunc(function(){t.nodeButtonStart.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.05,cc.v2(-6,0)),cc.moveBy(.1,cc.v2(12,0)),cc.moveBy(.05,cc.v2(-6,0)),cc.moveBy(.05,cc.v2(-6,0)),cc.moveBy(.1,cc.v2(12,0)),cc.moveBy(.05,cc.v2(-6,0)),cc.moveBy(.05,cc.v2(-6,0)),cc.moveBy(.1,cc.v2(12,0)),cc.moveBy(.05,cc.v2(-6,0)),cc.delayTime(1))))}))),t.buttonLvup.node.runAction(cc.sequence(cc.delayTime(.6),cc.scaleTo(.5,1,1))),t.buttonPacking.node.runAction(cc.sequence(cc.delayTime(.6),cc.scaleTo(.5,1,1))),e&&e()})))},t.prototype.tryInitTrialPacking=function(){var e=this;if(!f.default.isTrialedPacking()){d.default._setItemAmount(p.default.ITEM_ID_AVATAR_ORDER,d.default.getItemAmount(p.default.ITEM_ID_MAX_AVATAR_ORDER));var t=f.default.getEmptyPackingIdArr();cc.log("--emptyPackingIdArr=",t);var o=0;y.default.forDb("packing_avatar_init_db",function(n,r){cc.log("--tryInitTrialPacking--template=",r);var a=r.ids||[],i=new v.default;i.fillByPartIds(a);var s=i.serializeToText();if(r.bTrial){(u=t[o])&&(f.default.setPackingAvatar(u,s),e.trialPackingId=u,o+=1)}else{f.default.setInitedPackingId(r.id);for(var l in a){var c=a[l];c&&d.default.addItemAmount(c,1,"\u521d\u59cb\u5305\u88c5\u7ed9\u90e8\u4ef6")}var u;if(u=t[o])f.default.setPackingAvatar(u,s)&&(o+=1)}}),f.default.setTrialedPacking()}},t.prototype.initHolder=function(){this.nodeUnitMaxScaleHolder.position=this.nodeShoperHolder1.position,this.nodeUnitMidScaleHolder.position=this.nodeShoperHolder2.position,this.nodeUnitMinScaleHolder.position=this.nodeShoperInitHolder1.position,this.shoperWaitHolderPosArr=[];for(var e=1;e<=50;e++){var t=this["nodeShoperHolder"+e];if(!t)break;this.shoperWaitHolderPosArr.push(t.position)}this.MAX_DESK_WAIT_SHOPER_COUNT=Math.min(this.MAX_DESK_WAIT_SHOPER_COUNT,this.shoperWaitHolderPosArr.length)},t.prototype.initAvatar=function(){var e=[],t=f.default.getSortedPackings(),o=t[l.default.random(0,2)];this.multiplePricePackingId=o.id,console.log("packings=====",t),this.reuseListPacking.setDatas(t);for(var n=this.reuseListPacking.getActiveCellsByFilter(function(){return!0}),r=n.length,a=0;a<r;a++){var i=n[a].item;e.push(i),A.default.registerGuideNode("vBuildingStoreDialog.packingAvatar"+a,i)}this.packingAvatars=e,cc.log("packingAvatar count=",e.length)},t.prototype.initShoper=function(){for(var e=h.default.getBuildingStore(),t=e.template.perShoperRandomMinOrderNum||1,o=e.template.perShoperRandomMaxOrderNum||3,n=[],r=this.currOrderNum;r>0;){var a=Math.min(r,t),i=Math.min(r,o),s=l.default.random(a,i),c={orderNum:s};n.push(c),r-=s}this.shoperInfoArr=n},t.prototype.initEmployee=function(){},t.prototype.tryAddEmployee=function(e){var t=[],o=_.default.getEmployees();for(var n in o){var r=o[n];this.staffUnitIdDict[r.id]||r.level<=0||t.push(r)}if(t&&0!=t.length){var a=this["nodeEmployeeHolder"+(this.staffUnitArr.length+1)];if(a){var i=t[l.default.random(0,t.length-1)],s=new m.default({staffId:i.id,initUnitScale:this.STAFF_UNIT_INIT_SCALE});s.position=cc.v2(a.position.x+u.default.size.width/2,a.position.y),s.changeScaleX(-s.scaleX),s.zIndex=100*(this.staffUnitArr.length+1),s.parent=this.nodeMap,s._originPos=a.position,s._unitIndex=this.staffUnitArr.length,s.walk(),s.runAction(cc.sequence(cc.delayTime(e||0),cc.moveTo(1.6,a.position),cc.callFunc(function(){s.idle()}))),this.staffUnitArr.push(s),this.staffUnitIdDict[i.id]=!0}}},t.prototype.tryGenShoper=function(){if(!this.shoperInfoArr||this.shoperInfoArr.length<=0)return null;var e=this.genedShoperCount;this.genedShoperCount+=1;var t=this.shoperInfoArr.shift();cc.log("-tryGenShoper--data=",t);if(this.canRandomData.length<=0){var o=h.default.getBuildingStore(),n=Math.min(o.template.entertainMaxOrderNum||p.default.SHOPER_SPINE_ARR.length);this.canRandomData=ul.clone(p.default.SHOPER_SPINE_ARR.slice(0,n))}var r=l.default.randomRemoveArrayDatas(this.canRandomData,1)[0],a=new c.default({mov:"mov_2",orderNum:t.orderNum,initUnitScale:this.SHOPER_UNIT_INIT_SCALE,genedShoperCount:this.genedShoperCount,fOnRegisterShoperGuideNode:function(e,t){A.default.registerGuideNode("vBuildingStoreDialog.nodeShoperSubject"+e,t)},spineData:r});a.parent=this.nodeMap,a.position=cc.v2(1e4,0),a.zIndex=1e3-e;var i=!1;return A.default.isGuiding()&&(1==this.genedShoperCount?(a.setShoperSubjectId(1),i=!0):2==this.genedShoperCount&&(a.setShoperSubjectId(4),i=!0)),this.bFirstOpenShop&&!i&&a.setShoperSubjectId(l.default.random(1,4)),a},t.prototype.onEnterFrame=function(e){this.isResourceLoaded()&&(this.reuseListPacking.setTouchScrollEnabled(!this.reuseListPacking||!A.default.isGuiding()),this.buttonInvateEmployee.node.active=!(this.staffUnitArr.length>=this.MAX_EMPLOYEE_COUNT),this.refreshOrderInfo(),this.updateMapChildrenZIndex(),this.bStarted&&(this.tryComeInNewShoperToWait(),this.tryResult(),!this.bStartTime||this.bPause||this.bGuidingOpenStore||A.default.isGuiding()||(this.storePassTime+=e)))},t.prototype.tryResult=function(){if(this.bStarted)return this.currOrderNum<=0&&(this.bGameOver=!0),this.bGameOver?(this.doResult(),!0):void 0},t.prototype.doResult=function(e,t){O.default.stopRecordGameVideo(),this.bStarted=!1,this.bGameOver=!0;var o=this.currInitOrderNum,n=this.currInitOrderNum-this.currOrderNum,r=this.turnoverNum||0,a=T.default.getPlayerRank(),i=!1,s=d.default.getItemAmount(p.default.ITEM_ID_TURNOVER),c=0,h=T.default.getPlayerData();h&&h.score&&(c=d.default.getItemAmountStr(T.default.getPlayerData().score)),r>c&&(c=r),P.default.saveRankData(l.default.time().toString(),l.default.time().toString(),"offlineStoreRank",c,2),s<r?(i=!0,d.default.addItemAmount(p.default.ITEM_ID_TURNOVER,Math.floor(r-s),"\u8425\u4e1a\u989d\u589e\u52a0"),T.default.replacePlayerData({},r,n)):a||T.default.replacePlayerData({},r,n);var f=T.default.getPlayerRank(),g={initOrder:o,completedOrder:n,rewardGold:r,fOnDialogClose:e=e||function(){u.default.warpDialogWithEffect("vHudDialog")},oldOfflineStoreRankNum:a,newOfflineStoreRankNum:f,bNewRecord:i,bForce:t};t?u.default.warpDialogWithSmallEffect("vBuildStoreResultDialog",g):(this.nodeMask.active=!0,this.nodeResource.runAction(cc.sequence(cc.delayTime(1.5),cc.callFunc(function(){u.default.warpDialogWithSmallEffect("vBuildStoreResultDialog",g)}))))},t.prototype.tryClose=function(e){O.default.stopRecordGameVideo();var t=function(){u.default.warpDialogWithEffect("vHudDialog")};this.bStarted?this.doResult(t,e):t()},t.prototype.shoperMoveOutShop=function(e){for(var t=this,o=[],n=1;n<=20;n++){var r=this["nodeShoperOutHolder"+n];if(!r)break;o.push(r.position)}var a=[],i=e.position;for(var s in o){var l=o[s],c=i.sub(l).mag()/this.SHOPER_MOVE_OUT_FPS;l.x<i.x?a.push(cc.callFunc(function(){e.changeScaleX(-1*Math.abs(e.scaleX))})):a.push(cc.callFunc(function(){e.changeScaleX(Math.abs(e.scaleX))})),a.push(cc.moveTo(c,l)),a.push(cc.callFunc(function(){})),i=l}a.push(cc.callFunc(function(){})),a.push(cc.removeSelf(!0)),e.boughtGo(),e.runAction(cc.spawn(cc.sequence(cc.delayTime(.1),cc.callFunc(function(){t.tryCorrectShoperPos()})),cc.sequence(a)))},t.prototype.getShoperMoveInActionsByPosArr=function(e,t,o){var n=[],r=e.position;for(var a in t){var i=t[a],s=r.sub(i).mag()/(o||this.SHOPER_MOVE_TO_WAIT_HOLDER_FPS);i.x<r.x?n.push(cc.callFunc(function(){e.changeScaleX(-1*Math.abs(e.scaleX))})):n.push(cc.callFunc(function(){e.changeScaleX(Math.abs(e.scaleX))})),n.push(cc.moveTo(s,i)),r=i}return n},t.prototype.tryComeInNewShoperToLook=function(){var e=this;if(!this.shoperToLook){var t=this.tryGenShoper();if(t){t._lookHolderIndex=1;var o=cc.callFunc(function(){for(var n=[],r=t._lookHolderIndex,a=r;r==a;)a=l.default.random(1,3);t._lookHolderIndex=a;var i=e["nodeShoperStandbyHolder"+a];n.push(i.position);var s=e.getShoperMoveInActionsByPosArr(t,n,e.SHOPER_MOVE_OUT_FPS);s.push(cc.callFunc(function(){t.idle()})),s.push(cc.delayTime(l.default.random(1,3))),s.push(o),t.walk(),t.runAction(cc.sequence(s))});this.shoperToLook=t,t.position=this.nodeShoperInitHolder1.position;var n=[this.nodeShoperInitHolder2.position];n.push(this.nodeShoperStandbyHolder1.position);var r=this.getShoperMoveInActionsByPosArr(t,n);r.push(cc.callFunc(function(){t.idle()})),r.push(cc.delayTime(l.default.random(1,3))),r.push(o),t.walk(),t.runAction(cc.sequence(r))}}},t.prototype.tryComeInNewShoperToWait=function(){var e=this;if(!(!this.shoperInfoArr||this.shoperInfoArr.length<=0&&!this.shoperToLook||l.default.time()<this.nextsGenPlayerShoperTime))if(this.waitingShoperArr.length>=this.MAX_DESK_WAIT_SHOPER_COUNT)this.tryComeInNewShoperToLook();else{var t=null;t=this.waitingShoperArr.length<3?l.default.random(2,3):l.default.random(3,6),this.nextsGenPlayerShoperTime=l.default.time()+t;var o=[],n=null,r=this.waitingShoperArr.length,a=this.shoperWaitHolderPosArr[r];if(this.shoperToLook)n=this.shoperToLook,this.shoperToLook=null,n.stopAllActions();else{if(!(n=this.tryGenShoper()))return;n.position=this.nodeShoperInitHolder1.position,o.push(this.nodeShoperInitHolder2.position);for(var i=this.shoperWaitHolderPosArr.length-1;i>=r;i--){var s=this.shoperWaitHolderPosArr[i];o.push(s)}}o.push(a),this.waitingShoperArr.push(n);var c=this.getShoperMoveInActionsByPosArr(n,o);c.push(cc.callFunc(function(){0==r&&(n.showSubject(),n.changeScaleX(Math.abs(n.scaleX)),e.bStartTime||0!=r||(e.bStartTime=!0,d.default.addItemAmount(p.default.ITEM_ID_OPEN_SHOP_COUNT,1,"\u5f00\u5e97"),e.sendMsg("MSG_GUIDE_POINT",{id:"vBuildingStoreDialog.shoper.already"}))),n.idle(),e.tryCorrectShoperPos()})),n.walk(),n.runAction(cc.sequence(c))}},t.prototype.updateMapChildrenZIndex=function(){try{for(var e=this.nodeMap.children,t=this.nodeUnitMaxScaleHolder,o=this.nodeUnitMidScaleHolder,n=this.nodeUnitMinScaleHolder,r=(Math.abs(n.y-t.y),Math.abs(n.y-o.y)||1),a=Math.abs(o.y-t.y)||1,i=l.default.sortArrayByField(e,["-y"]),s=i.length,c=0;c<s;c++){var u=i[c];if(!u._bDisableSortZIndex&&(u.zIndex=1e3+c,u.setUnitScale)){var d=null;if(u.y>=n.y)d=this.MAP_UNIT_MIN_SCALE;else if(u.y<=t.y)d=this.MAP_UNIT_MAX_SCALE;else if(u.y>o.y){var p=Math.abs(n.y-u.y)/r;d=this.MAP_UNIT_MIN_SCALE+(this.MAP_UNIT_MID_SCALE-this.MAP_UNIT_MIN_SCALE)*p}else{p=Math.abs(o.y-u.y)/a;d=this.MAP_UNIT_MID_SCALE+(this.MAP_UNIT_MAX_SCALE-this.MAP_UNIT_MID_SCALE)*p}u.setUnitScale(d)}}}catch(e){cc.log("---updateMapChildrenZIndex error")}},t.prototype.tryCorrectShoperPos=function(){for(var e=this,t=this.waitingShoperArr.length,o=function(t){var o=n.waitingShoperArr[t];if(!o||o.getNumberOfRunningActions()>0)return"continue";var r=n.shoperWaitHolderPosArr[t],a=o.position.sub(r).mag();if(a<2)return"continue";var i=a/n.SHOPER_MOVE_TO_WAIT_HOLDER_FPS;r.x<o.x?o.changeScaleX(-1*Math.abs(o.scaleX)):o.changeScaleX(Math.abs(o.scaleX)),o.walk(),o.runAction(cc.sequence(cc.callFunc(function(){0==t&&o.showSubject()}),cc.moveTo(i,r),cc.callFunc(function(){if(0==t)o.changeScaleX(Math.abs(o.scaleX));else{var n=e.shoperWaitHolderPosArr[t-1];n&&(n.x<o.x?o.changeScaleX(-1*Math.abs(o.scaleX)):o.changeScaleX(Math.abs(o.scaleX)))}o.idle(),e.tryCorrectShoperPos()})))},n=this,r=0;r<t;r++)o(r)},t.prototype.refreshStoreInfo=function(){this.labelStoreLv.string=ul.format(B.default.getText("vBuildingStoreDialog.6"),h.default.getBuildingStore().level)},t.prototype.refreshOrderInfo=function(){this.orderTitleBar.refreshData();var e=Math.max(this.currTotalTime-this.storePassTime,0),t=ul.format("%s",d.default.getFormatedTimeStr(this.currTotalTime-this.storePassTime));this.labelStoreLeftTime.string=t,this.labelStoreLeftTimeRed.string=t,this.labelStoreLeftTime.node.opacity=e>11?255:0,this.labelStoreLeftTimeRed.node.active=e<=11,e<=11?this.labelStoreLeftTimeRed.node._lastLeftTime&&this.labelStoreLeftTimeRed.node._lastLeftTime==Math.ceil(e)||(this.labelStoreLeftTimeRed.node._lastLeftTime=Math.ceil(e),this.labelStoreLeftTimeRed.node.scale=3,this.labelStoreLeftTimeRed.node.opacity=127.5,this.labelStoreLeftTimeRed.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(.15,1.3,1.3),cc.fadeIn(.15)),cc.callFunc(function(){})))):(this.labelStoreLeftTimeRed.node.stopAllActions(),this.labelStoreLeftTimeRed.node.scale=1),this.bStarted&&!this.bGameOver&&e<=0&&this.tryClose()},t.prototype.onClickAvatarItem=function(e){var t=this;if(cc.log("------packingId=",e),!this.bAvatarSelling){this.bAvatarSelling=!0,this.sendMsg("MSG_GUIDE_POINT",{id:ul.format("vBuildingStoreDialog.packingAvatar%s.click",e)});var o=f.default.getPackingAvatarStr(e);if(!this.bStarted||!o||""==o){if(this.bStarted)if(Math.max(this.currTotalTime-this.storePassTime,0)<=3)return;return this.bPause=this.bStarted,u.default.warpDialogWithSmallEffect("vRoomDialog",{packingId:e,stageId:2002,bOnlyCloseRoom:!0,bImmediately:!0,bFirstOpenShop:this.bFirstOpenShop,avatarStr:o},function(){t.nodeResource._originPos=t.nodeResource.position,t.nodeResource.y=1e4}),void(this.bAvatarSelling=!1)}var n=this.waitingShoperArr[0];if(!n)return g.default.showMsgTip(B.default.getText("vBuildingStoreDialog.7")),void(this.bAvatarSelling=!1);if(n.isBought()&&n.getUncompleteOrderNum()<=0)this.bAvatarSelling=!1;else if(n.position.sub(this.nodeShoperHolder1.position).mag()>5)this.bAvatarSelling=!1;else if(this.waitingShoperArr&&0!=this.waitingShoperArr.length){this.tryStartPlayerSellEffect(e,function(){t.bAvatarSelling=!1})}}},t.prototype.tryStartPlayerSellEffect=function(e,t){var o=this,n=f.default.getPackingAvatar(e),r=null;for(var a in this.packingAvatars){var i=this.packingAvatars[a];if(i.getPackingId()==e){r=i;break}}if(!r)return g.default.showMsgTip(B.default.getText("vBuildingStoreDialog.8")),void t();var c=C.default.getSubjectByPackingId(e),d=C.default.getAvatarScoreBySubjectId(n,c),h=r.parent.convertToWorldSpaceAR(r.position),m=this.nodeUIRoot.convertToNodeSpaceAR(h),_=cc.v2(0,0),v=this.waitingShoperArr[0];v.addGotOrderNum(v.getOrderNum()),v.isBought()||(v.setBought(!0),v.boughtCatch()),v.hideSubject();var y=f.default.getPacking(e),b=v.getShoperSubjectId()==c;b?this.continuationRightSubjectCount+=1:this.continuationRightSubjectCount=0;var R=Math.ceil(d+y.template.productGoldNumRatio/1e4*d),T=b?R:0,A=0;this.continuationRightSubjectCount>=3&&(A=Math.ceil(.2*R));var D=b?p.GoodsRate.best:p.GoodsRate.good,I=null,w=(I=v.isMan()?b?[441,442]:[446]:b?[431,432,433,434]:[436])[l.default.random(0,I.length-1)];S.default.play(w);for(var L=this.nodeDeskAvatarHolder.parent.convertToWorldSpaceAR(this.nodeDeskAvatarHolder.position),P=this.nodeUIRoot.convertToNodeSpaceAR(L),k=function(n,r){n=n||0;var a=new cc.Node;a.opacity=0,a.parent=o.nodeUIRoot,a.position=m;var i=new s.default({packing:y,bDisableChange:!0});i.scale=.6,i.parent=a;var c=v.getAvatarNodeWorldPos();_=o.nodeUIRoot.convertToNodeSpaceAR(c);var d=v.getShoperCatchOffsetPos(),p=Math.min(.1*Math.abs(a.x-_.x),50),h=0;h=a.x>_.x?_.x+p:_.x-p;var f=l.default.random(100)>50?-1*l.default.random(5):1*l.default.random(5);a.runAction(cc.sequence(cc.delayTime(n),cc.fadeIn(0),cc.spawn(cc.jumpTo(.3,cc.v2(h,_.y+80),100,1),cc.scaleTo(.3,1,1),cc.rotateTo(.3,15)),cc.spawn(cc.moveTo(.1,cc.v2(_.x+d.x,_.y+50+d.y)),cc.scaleTo(.1,.8,.8),cc.rotateTo(.1,15+f)),cc.callFunc(function(){v.addAvatar(a)}),cc.delayTime(.3),cc.callFunc(function(){v.addAdditionCostAmount(T),v.addContinuesRewardAmount(A),e==o.pricePromotePackingId?v.addNormalCostAmount(3*R):v.addNormalCostAmount(R),r&&(v.showRate(D),a.runAction(cc.sequence(cc.delayTime(.8),cc.callFunc(function(){S.default.play(401);var e=v.getAdditionCostAmount()>0,t=[];A>0?(t.push(P),t.push(cc.v2(P.x-150,P.y)),t.push(cc.v2(P.x+150,P.y))):e?(t.push(cc.v2(P.x-100,P.y)),t.push(cc.v2(P.x+100,P.y))):t.push(P);var n=new cc.Node;n.parent=o.nodeUIRoot;var r=u.default.createView("vSellMoneyNode",{bRight:b,amount:v.getNormalCostAmount()});if(r.parent=n,n.scale=.1,n.position=_,n.runAction(cc.sequence(cc.spawn(cc.jumpTo(.3,t[0],100,1),cc.scaleTo(.3,1,1)),cc.callFunc(function(){r.play()}),cc.delayTime(.8),cc.fadeOut(.1),cc.removeSelf())),e){var a=new cc.Node;a.parent=o.nodeUIRoot;var i=u.default.createView("vSellMoneyNode",{bRight:!1,amount:v.getAdditionCostAmount()});if(i.parent=a,a.scale=0,a.position=_,a.runAction(cc.sequence(cc.delayTime(.08),cc.spawn(cc.jumpTo(.3,t[1],100,1),cc.scaleTo(.3,1,1)),cc.callFunc(function(){i.play()}),cc.delayTime(.8),cc.fadeOut(.1),cc.removeSelf())),A>0){var s=new cc.Node;s.parent=o.nodeUIRoot;var l=u.default.createView("vSellMoneyNode",{bRight:!1,amount:v.getContinuesRewardAmount()});l.parent=s,s.scale=0,s.position=_,s.runAction(cc.sequence(cc.delayTime(.15),cc.spawn(cc.jumpTo(.3,t[2],100,1),cc.scaleTo(.3,1,1)),cc.callFunc(function(){l.play()}),cc.delayTime(.8),cc.fadeOut(.1),cc.removeSelf()))}}}),cc.delayTime(.6),cc.callFunc(function(){o.currOrderNum-=v.getOrderNum(),o.turnoverNum+=v.getCostAmount(),console.log("tryStartPlayerSellEffect.packingId=====1===",e,o.turnoverNum,o.pricePromotePackingId,o.pricePromotePrice),e==o.pricePromotePackingId&&(o.turnoverNum+=o.pricePromotePrice),v.stopAllActions(),v.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){o.sendMsg("MSG_GUIDE_POINT",{id:"vBuildingStoreDialog.sellAvatar.gotGold"}),o.shoperMoveOutShop(v)}),cc.delayTime(1),cc.callFunc(function(){o.waitingShoperArr.shift(),o.boughtShoperArr.push(v),o.tryCorrectShoperPos()}),cc.delayTime(.5),cc.callFunc(function(){t()})))}))))})))},E=v.getOrderNum(),N=0;N<E;N++)k(.3*N,N==E-1)},t.prototype.doStart=function(e){var t=this;void 0===e&&(e=!1);for(var o in this.packingAvatars){this.packingAvatars[o].setDisableChange()}this.bStarted=!0,this.nodeButtonStart.stopAllActions(),this.nodeButtonStart.scale=1,this.nodeButtonStart.x=this.nodeButtonStart._originPos.x+5e3,this.buttonLvup.node.x=this.buttonLvup.node._originPos.x+5e3,this.buttonPacking.node.x=this.buttonPacking.node._originPos.x+5e3,this.nodeTitleBar.active=!1,this.nodeOrder.runAction(cc.sequence(cc.moveBy(.1,cc.v2(0,-60)),cc.scaleBy(.08,1,.5),cc.scaleBy(.08,1,1.2),cc.scaleTo(.08,1))),e||(h.default.resetAvatarOrderNum(),d.default.addItemAmount(920,1,"\u4efb\u52a1\u7269\u54c1"),g.default.showMsgTip(B.default.getText("vBuildingStoreDialog.9"))),this.nodeStoreStatus.y=500,this.nodeStoreStatus.active=!0,A.default.registerGuideNode("vBuildingStoreDialog.nodeStoreStatusContent",this.nodeStoreStatusContent),this.sendMsg("MSG_GUIDE_POINT",{id:"vBuildingStoreDialog.buttonStart.click"}),this.nodeStoreStatus.stopAllActions(),this.nodeStoreStatus.runAction(cc.sequence(cc.callFunc(function(){t.refreshStoreInfo()}),cc.spawn(cc.moveTo(e?0:.3,this.nodeStoreStatus._originPos).easing(cc.easeElasticOut(1.2)),cc.sequence(cc.delayTime(e?0:.3),cc.callFunc(function(){})))))},t.prototype._tryGuide=function(){A.default.registerGuideNode("vBuildingStoreDialog.buttonStart",this.buttonStart.node),A.default.registerGuideNode("vBuildingStoreDialog.buttonLvup",this.buttonLvup.node),A.default.registerGuideNode("vBuildingStoreDialog.buttonPacking",this.buttonPacking.node),this.sendMsg("MSG_GUIDE_POINT",{id:"vBuildingStoreDialog.onEnterTransitionFinish",bOpenedShopFlag:this.bFirstOpenShop?0:1})},t.prototype.onTouchButtonChange=function(e){e.isClick()&&u.default.warpDialogWithEffect("vRoomDialog",{stageId:2002,bFirstOpenShop:this.bFirstOpenShop,backSceneName:"vBuildingStoreDialog",backSceneContext:{bFirstOpenShop:this.bFirstOpenShop,bStartedStore:this.bStarted,storePassTime:this.storePassTime,initOrderNum:this.currInitOrderNum,currOrderNum:this.currOrderNum,turnoverNum:this.turnoverNum}})},t.prototype.onTouchButtonLvup=function(e){e.isClick()&&(u.default.warpDialogWithSmallEffect("vBuildingStoreDetailDialog"),this.sendMsg("MSG_GUIDE_POINT",{id:"vBuildingStoreDialog.buttonLvup.click"}))},t.prototype.onTouchButtonPacking=function(e){e.isClick()&&(u.default.warpDialogWithSmallEffect("vPackingLvupDialog"),this.sendMsg("MSG_GUIDE_POINT",{id:"vBuildingStoreDialog.buttonPacking.click"}))},t.prototype.onTouchButtonStart=function(e){var t=this;if(e.isClick()&&!N.default.openGoldRain(3))if(d.default.getItemAmount(p.default.ITEM_ID_ENERGY)<=0)if(E.default.isAdEventHasChanceTrigger(this.AD_FREE_ENERGY_NAME)){var o={contentStr:ul.format(B.default.getText("vBuildingStoreDialog.10")),btnVideoStr:B.default.getText("vBuildingStoreDialog.11"),btnRefuseStr:null,fOnClickRefused:function(){},fOnClickVideo:function(){E.default.triggerAdEvent(t.AD_FREE_ENERGY_NAME,null,!0)}};u.default.warpDialogWithSmallEffect("vPromptAdDialog",o)}else g.default.showMsgTip(B.default.getText("vBuildingStoreDialog.12"));else{if(E.default.preCheckCanTriggerAdEvent(this.AD_VIDEO_PRICE_PROMOTE)){var n=f.default.getPacking(this.multiplePricePackingId),r=new v.default,a=f.default.getPackingAvatarStr(n.id),i=C.default.getSubjectByPackingId(n.id);r.fillBySerializeText(a);var s=y.default.get("cosmetic_subject_tag_db",i),l=C.default.getAvatarScoreBySubjectId(r,i),c=Math.ceil(l+n.template.productGoldNumRatio/1e4*l),h=s.texture;return void u.default.openDialog("vPricePromoteAdDialog",{price:3*c,subjectImgPath:h,packingData:n,fOnClickRefused:function(){t.tryStart()},fOnClickVideo:function(){E.default.triggerAdEvent(t.AD_VIDEO_PRICE_PROMOTE,{packingId:n.id,price:c},!0)}})}this.tryStart()}},t.prototype.tryStart=function(){d.default.addItemAmount(p.default.ITEM_ID_ENERGY,-1,"\u8425\u4e1a"),this.nodeEnergyEffect.opacity=255,this.nodeEnergyEffect.runAction(cc.sequence(cc.moveBy(.5,cc.v2(0,80)),cc.fadeOut(.1))),this.doStart()},t.prototype.onTouchButtonInvateEmployee=function(e){e.isClick()&&(this.staffUnitArr.length>=this.MAX_EMPLOYEE_COUNT?g.default.showMsgTip(B.default.getText("vBuildingStoreDialog.18")):this.tryAddEmployee())},t.prototype.onTouchButtonBack=function(e){var t=this;e.isClick()&&(this.bStarted?(this.bPause=!0,g.default.alertPrompt2(B.default.getText("vBuildingStoreDialog.13"),B.default.getText("vBuildingStoreDialog.14"),B.default.getText("vBuildingStoreDialog.15"),B.default.getText("vBuildingStoreDialog.16"),function(){t.bPause=!1},function(){t.bPause=!1,t.tryClose(!0)},"ad_banner_stop_building_dialog")):this.tryClose(!0))},t.prototype.onTouchButtonClose=function(e){this.onTouchButtonBack(e)},t.prototype.onTouchButtonMoreGameBox=function(e){e.isClick()&&P.default.openChannelMoreGameBox()},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onMsgItemAmountChanged=function(e){this.refreshStoreInfo()},t.prototype.onMsgGuideOpenStoreBegin=function(){this.bGuidingOpenStore=!0},t.prototype.onMsgGuideOpenStoreCompleted=function(){this.bGuidingOpenStore=!1},t.prototype.onMsgShowBuildingStoreSoftly=function(e){var t=this;cc.log("------onMsgShowBuildingStoreSoftly"),this.nodeResource.y=this.nodeResource._originPos.y;var o=function(){t.bPause=!1},n=e.resultDialog;if(n){for(var r=null,a=n.context.packingId,i=0;i<this.packingAvatars.length;i++){var s=this.packingAvatars[i];if(a==s.getPackingId()){r=s;break}}r||o();var l=n.getCardNode(),c=r.parent.convertToWorldSpaceAR(r.position),u=l.parent.convertToNodeSpaceAR(c);l.runAction(cc.sequence(cc.spawn(cc.rotateBy(1,360),cc.scaleTo(1,.16,.16),cc.moveTo(1,u)),cc.callFunc(function(){t.sendMsg("MSG_GUIDE_POINT",{id:"vBuildingStoreDialog.newPackingAvatar.gen"});var e=L.default.get("animNode","70_jiesuan");if(e){var a=new cc.Node;a.parent=r,e.parent=a,a.scale=.3,e.play(),e.registerEventCallback(function(t){"finished"==t.name&&(e.removeFromParent(),L.default.put(e),e=null)})}l.stopAllActions(),l.rotation=0,o(),n.closeDialog(!0)})))}else o()},t.prototype.onBuildingStoreLevelChanged=function(){this.updateOpenTime()},t.prototype.onMsgAdEventSuccessd=function(e){var t=e.adEventId;if(t==this.AD_FREE_ENERGY_NAME)d.default.addItemAmount(p.default.ITEM_ID_ENERGY,2,"\u770b\u5e7f\u544a");else if(t==this.AD_VIDEO_PRICE_PROMOTE){var o=e.userData.packingId,n=e.userData.price;this.pricePromotePackingId=o,this.pricePromotePrice=2*n;for(var r in this.packingAvatars){var a=this.packingAvatars[r];if(a.getPackingId()==o){a.labelSuggestPrice.string=3*n;break}}this.tryStart()}else if(t==this.AD_VIDEO_ADD_ORDER){var i=d.default.getItemAmount(p.default.ITEM_ID_MAX_AVATAR_ORDER)-d.default.getItemAmount(p.default.ITEM_ID_AVATAR_ORDER);d.default.addItemAmount(p.default.ITEM_ID_AVATAR_ORDER,i,"\u5e97\u94fa\u52a0\u6ee1\u8ba2\u5355"),this.currOrderNum=d.default.getItemAmount(p.default.ITEM_ID_AVATAR_ORDER),this.refreshOrderInfo(),g.default.showMsgTip(B.default.getText("vBuildingStoreDialog.17")),this.initShoper()}},t=r([x],t)}(i.default));o.default=G,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../../ulframework/view/ReuseLayouterHGrid":"ReuseLayouterHGrid","../../../ulframework/view/ReuseList":"ReuseList","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrBuildingStore":"mgrBuildingStore","../../manager/mgrCfg":"mgrCfg","../../manager/mgrChannel":"mgrChannel","../../manager/mgrCosmetic":"mgrCosmetic","../../manager/mgrDirector":"mgrDirector","../../manager/mgrEffect":"mgrEffect","../../manager/mgrEmployee":"mgrEmployee","../../manager/mgrGoldRain":"mgrGoldRain","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n","../../manager/mgrOfflineStoreRank":"mgrOfflineStoreRank","../../manager/mgrPacking":"mgrPacking","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrPool":"mgrPool","../../manager/mgrSdk":"mgrSdk","../../manager/mgrSound":"mgrSound","../../manager/mgrTip":"mgrTip","../../manager/mgrVideoRecorder":"mgrVideoRecorder","../../struct/sAvatar":"sAvatar","../node/vCommonTitleBarHorzental":"vCommonTitleBarHorzental","../node/vHudStaffUnit":"vHudStaffUnit","../node/vOrderTitleBar":"vOrderTitleBar","../node/vPackingAvatar":"vPackingAvatar","../node/vShoper":"vShoper","./vPromptHudCrazyDialog":"vPromptHudCrazyDialog"}],vCdkDialog:[function(e,t,o){"use strict";cc._RF.push(t,"1589cs32RZDNJA9XSlmp0Ty","vCdkDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrTip"),l=e("../../manager/mgrSdk"),c=cc._decorator.ccclass,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonConfrim=null,t.editboxInput=null,t.labelDisplay=null,t.labelTitle=null,t.layoutBg=null,t.layoutVersion=null,t.nodeTitle=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vCdkDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_buttonConfrim:[a.default,"onTouchButtonConfrim"],CC_editboxInput:[cc.EditBox],CC_labelDisplay:[cc.Label],CC_labelTitle:[cc.Label],CC_layoutBg:[cc.Layout],CC_layoutVersion:[cc.Layout],CC_nodeTitle:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonConfrim=function(e){if(e.isClick()){var t=this.editboxInput.string;t||s.default.showMsgTip("\u8bf7\u8f93\u5165\u5151\u6362\u7801"),l.default.useCdk(t)}},t.prototype.isClickShadowClose=function(){return!1},t=r([c],t)}(i.default);o.default=u,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrSdk":"mgrSdk","../../manager/mgrTip":"mgrTip"}],vCommonTitleBarHorzental:[function(e,t,o){"use strict";cc._RF.push(t,"25654MDC8RAKY3bnvfEftV8","vCommonTitleBarHorzental");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./vCommonTitleBar"),i=cc._decorator,s=i.ccclass,l=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"node/vCommonTitleBarHorzental"},t=r([s],t)}(a.default));o.default=l,cc._RF.pop()},{"./vCommonTitleBar":"vCommonTitleBar"}],vCommonTitleBarRmbGold:[function(e,t,o){"use strict";cc._RF.push(t,"c85bdKnIhpL6IQCL4DRqtwT","vCommonTitleBarRmbGold");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./vCommonTitleBar"),i=cc._decorator,s=i.ccclass,l=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"node/vCommonTitleBarRmbGold"},t=r([s],t)}(a.default));o.default=l,cc._RF.pop()},{"./vCommonTitleBar":"vCommonTitleBar"}],vCommonTitleBar:[function(e,t,o){"use strict";cc._RF.push(t,"baca2UxM1pP7ZPLRHIFyVt+","vCommonTitleBar");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../Const"),l=e("../../manager/mgrPlayer"),c=e("../../manager/mgrPool"),u=e("../../manager/mgrShop"),d=e("../../manager/mgrAlu"),p=e("../../../ulframework/utils/Timer"),h=e("../../manager/mgrSdk"),f=cc._decorator.ccclass,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonAddEnergy=null,t.buttonAddGold=null,t.buttonAddRmb=null,t.labelEnergy=null,t.labelEnergyRecoverTime=null,t.labelGold=null,t.labelRmb=null,t.nodeEnergy=null,t.nodeEnergyIcon=null,t.nodeEnergyParticle=null,t.nodeGold=null,t.nodeGoldIcon=null,t.nodeGoldParticle=null,t.nodeRmb=null,t.nodeRmbIcon=null,t.nodeRmbParticle=null,t.spriteAddGold=null,t.spriteAddGoldAdIcon=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vCommonTitleBar"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonAddEnergy:[a.default,"onTouchButtonAddEnergy"],CC_buttonAddGold:[a.default,"onTouchButtonAddGold"],CC_buttonAddRmb:[a.default,"onTouchButtonAddRmb"],CC_labelEnergy:[cc.Label],CC_labelEnergyRecoverTime:[cc.Label],CC_labelGold:[cc.Label],CC_labelRmb:[cc.Label],CC_nodeEnergy:[cc.Node],CC_nodeEnergyIcon:[cc.Node],CC_nodeEnergyParticle:[cc.Node],CC_nodeGold:[cc.Node],CC_nodeGoldIcon:[cc.Node],CC_nodeGoldParticle:[cc.Node],CC_nodeRmb:[cc.Node],CC_nodeRmbIcon:[cc.Node],CC_nodeRmbParticle:[cc.Node],CC_spriteAddGold:[cc.Sprite],CC_spriteAddGoldAdIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){var t=this;e.prototype.onResourceLoaded.call(this),this.initData(),this.nodeGoldIcon._originScale=this.nodeGoldIcon.scale,this.nodeRmbIcon._originScale=this.nodeRmbIcon.scale,1==h.default.getCopNumberValueByKey("b_open_hud_free_gold_dialog")&&this.spriteAddGoldAdIcon&&this.spriteAddGoldAdIcon.node&&(this.spriteAddGoldAdIcon.node.active=!0),this.setItemNodePos(),p.default.callLater(2,function(){t.setItemNodePos()})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.refreshTime()},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.initData=function(){this.refreshAddBtn(),this.context.bHideEnergy&&this.nodeEnergy&&(this.nodeEnergy.active=!1),this.context.bHideRmb&&this.nodeRmb&&(this.nodeRmb.active=!1),this.context.bHideGold&&this.nodeGold&&(this.nodeGold.active=!1);var e=[];this.nodeRmb.active&&e.push(this.nodeRmbParticle),this.nodeGold.active&&e.push(this.nodeGoldParticle),this.nodeEnergy.active&&e.push(this.nodeEnergyParticle);for(var t in e){var o=e[t];c.default.get("spine","shan_xx").parent=o}this.registerListeners({MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this),MSG_ROLL_TITLE_BAR_ITEM_AMOUNT:this.onMsgRollTitleBarItemAmount.bind(this),MSG_SDK_ADV_VALID_COUNT:this.onMsgAdvValidCount.bind(this)}),this.refreshData()},t.prototype.onMsgAdvValidCount=function(e){this.refreshAddBtn()},t.prototype.refreshAddBtn=function(){this.isResourceLoaded()&&(this.buttonAddEnergy&&(this.buttonAddEnergy.node.active=!1),this.buttonAddGold.node.active=!(this.context.bDisableButtonAdd||!d.default.check("video_gold_yes")),this.buttonAddRmb.node.active=!1)},t.prototype.refreshTime=function(){if(this.isResourceLoaded()&&this.labelEnergyRecoverTime){var e=l.default.getRecoverRemainTime(s.default.ITEM_ID_ENERGY);if(e){var t=Math.floor(e/60),o=e%60;this.labelEnergyRecoverTime.node.active=!0,this.labelEnergyRecoverTime.string=ul.format("%d:%02d",t,o)}else this.labelEnergyRecoverTime.node.active=!1}},t.prototype.refreshData=function(){var e=l.default.getItemAmountStr(l.default.getItemAmount(s.default.ITEM_ID_RMB));this.labelRmb.string=e;var t=l.default.getItemAmountStr(l.default.getItemAmount(s.default.ITEM_ID_GOLD));if(this.labelGold.string=t,this.labelEnergy){var o=l.default.getItemAmount(s.default.ITEM_ID_ENERGY),n=l.default.getItemAmount(s.default.ITEM_ID_MAX_ENERGY);this.labelEnergy.getComponent(cc.Label).string=ul.format("%d/%d",o,n)}this.refreshTime()},t.prototype.playActionIn=function(){},t.prototype.playActionOut=function(){},t.prototype.setItemNodePos=function(){if(this.isResourceLoaded()&&this.context.bSetGoldNodePos){var e=this.nodeGold.parent.convertToWorldSpace(this.nodeGold.position);l.default.setHudItemNodePos(s.default.ITEM_ID_GOLD,e),e=this.nodeRmb.parent.convertToWorldSpace(this.nodeRmb.position),l.default.setHudItemNodePos(s.default.ITEM_ID_RMB,e)}},t.prototype.onTouchButtonAddRmb=function(e){e.isClick()&&u.default.showRouterTargetWithDialog(106,"\u70b9\u51fb_\u52a0\u53f7",{bFromTitleBar:!0})},t.prototype.onTouchButtonAddGold=function(e){e.isClick()&&u.default.showRouterTargetWithDialog(107,"\u70b9\u51fb_\u52a0\u53f7",{bFromTitleBar:!0})},t.prototype.onTouchButtonAddEnergy=function(e){e.isClick()&&u.default.showRouterTargetWithDialog(108,"\u70b9\u51fb_\u52a0\u53f7",{bFromTitleBar:!0})},t.prototype.onMsgItemAmountChanged=function(e){0==this.nodeGold.getNumberOfRunningActions()&&(this.nodeEnergy&&0!=this.nodeEnergy.getNumberOfRunningActions()||(this.refreshData(),this.refreshTime()))},t.prototype.onMsgRollTitleBarItemAmount=function(e){this.refreshData(),this.refreshTime();var t=e.itemId;if(t==s.default.ITEM_ID_GOLD&&this.labelGold.node.getNumberOfRunningActions()<=0){this.labelGold.node.runAction(cc.sequence(cc.scaleTo(.2,1.3,1.3),cc.scaleTo(.2,1,1)));var o=this.nodeGoldIcon._originScale;this.nodeGoldIcon.runAction(cc.sequence(cc.scaleTo(.2,1.3*o,1.3*o),cc.scaleTo(.2,o,o)))}if(t==s.default.ITEM_ID_RMB&&this.labelRmb.node.getNumberOfRunningActions()<=0){this.labelRmb.node.runAction(cc.sequence(cc.scaleTo(.2,1.3,1.3),cc.scaleTo(.2,1,1)));o=this.nodeRmbIcon._originScale;this.nodeRmbIcon.runAction(cc.sequence(cc.scaleTo(.2,1.3*o,1.3*o),cc.scaleTo(.2,o,o)))}},r([i.default.requireResourceLoaded],t.prototype,"setItemNodePos",null),t=r([f],t)}(i.default);o.default=g,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrAlu":"mgrAlu","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrPool":"mgrPool","../../manager/mgrSdk":"mgrSdk","../../manager/mgrShop":"mgrShop"}],vCountBadge:[function(e,t,o){"use strict";cc._RF.push(t,"f277cUxBn5M5aCSJd91qaxu","vCountBadge");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/view/ViewBase"),l=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"node/vCountBadge"},t.prototype._getResourceBindingConfig=function(){return{CC_labelCount:[cc.Label]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.setCount=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){return this.currCount=e,this.fillCount(),[2]})})},t.prototype.fillCount=function(){this.labelCount.string=(this.currCount||"").toString()},r([s.default.requireResourceLoaded],t.prototype,"fillCount",null),t=r([l],t)}(s.default);o.default=c,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase"}],vDailyQuestDialog:[function(e,t,o){"use strict";cc._RF.push(t,"164feixp4JADbLj/AqerduC","vDailyQuestDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../../ulframework/view/ReuseLayouterVGrid"),l=e("../../../ulframework/view/ReuseList"),c=e("../../Const"),u=e("../../manager/mgrCfg"),d=e("../../manager/mgrDailyQuest"),p=e("../../manager/mgrTip"),h=e("../node/vDailyQuestListItem"),f=e("../../manager/mgrAd"),g=e("../../manager/mgrDirector"),m=e("../../manager/mgrPlayer"),_=e("../../manager/mgrAchievement"),v=e("../../../ulframework/utils/Tools"),y=e("../../../ulframework/utils/Timer"),C=e("../node/vCommonTitleBarRmbGold"),S=e("../../manager/mgrGuide"),b=e("../../manager/mgrSound"),R=e("../../manager/mgrEffect"),T=e("../../manager/mgrPool"),A=e("../../manager/mgrChannel"),D=e("../../manager/mgrSdk"),I=e("../../manager/mgrI18n"),w=cc._decorator.ccclass,L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registerCount=0,t.buttonClose=null,t.buttonRewardPower=null,t.labelPower=null,t.labelPowerReward=null,t.labelProcessPower=null,t.nodeBannerArea=null,t.nodeBgParticle1=null,t.nodeBgParticle2=null,t.nodeBottom=null,t.nodeCurrPowerAmount=null,t.nodeEffectPower=null,t.nodeLayoutContent=null,t.nodeList=null,t.nodeParticle=null,t.nodeProgressPowerFlag=null,t.nodeRewardPower=null,t.nodeTitle=null,t.nodeTitleBar=null,t.nodeUIRoot=null,t.progressBarPower=null,t.spriteArt07=null,t.spriteTuzi=null,t.AD_QUEST_POWER_DOUBLE_REWARD="video_quest_power_dobule_reward",t.AD_INTER_VIEW_NAME="inter_daily_quest_dialog",t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vDailyQuestDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_buttonRewardPower:[a.default,"onTouchButtonRewardPower"],CC_labelPower:[cc.Label],CC_labelPowerReward:[cc.Label],CC_labelProcessPower:[cc.Label],CC_nodeBannerArea:[cc.Node],CC_nodeBgParticle1:[cc.Node],CC_nodeBgParticle2:[cc.Node],CC_nodeBottom:[cc.Node],CC_nodeCurrPowerAmount:[cc.Node],CC_nodeEffectPower:[cc.Node],CC_nodeLayoutContent:[cc.Node],CC_nodeList:[cc.Node],CC_nodeParticle:[cc.Node],CC_nodeProgressPowerFlag:[cc.Node],CC_nodeRewardPower:[cc.Node],CC_nodeTitle:[cc.Node],CC_nodeTitleBar:[cc.Node],CC_nodeUIRoot:[cc.Node],CC_progressBarPower:[cc.ProgressBar],CC_spriteArt07:[cc.Sprite],CC_spriteTuzi:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){if(e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(g.default.size),this.setContentSize(g.default.size),A.default.isCanShowMidAutumn()&&(this.spriteArt07.node.active=!1,this.spriteTuzi.node.active=!0),f.default.isBannerAdValid()){var t=f.default.getBannerHeight();console.log("------isBannerAdValid =yes height=",t);var o=this.nodeUIRoot.getComponent(cc.Widget);o.bottom=t,o.updateAlignment(),f.default.showViewEnterAd(this.nodeResource,null,this.AD_INTER_VIEW_NAME,"ad_banner_daily_quest_dialog")}else console.log("------isBannerAdValid =no try show int"),f.default.showIntAd(null,this.AD_INTER_VIEW_NAME);this.playUIActionIn()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){var o=this;if(e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.nodeProgressPowerFlag.x=this.progressBarPower.progress*this.progressBarPower.node.width-this.progressBarPower.node.width/2,this.nodeProgressPowerFlag.opacity=0!=this.progressBarPower.progress?255:0,p.default.isAllGotItemTipDisplayed()&&this.flyPowerWorldPos)){var n=this.nodeCurrPowerAmount.parent.convertToNodeSpaceAR(this.flyPowerWorldPos),r=this.nodeCurrPowerAmount.position;this.flyPowerWorldPos=null,this.nodeEffectPower.stopAllActions(),this.nodeEffectPower.opacity=255,this.nodeEffectPower.scale=1,this.nodeEffectPower.position=n,this.nodeEffectPower.runAction(cc.sequence(cc.delayTime(.5),cc.jumpTo(.5,r,100,1),cc.spawn(cc.scaleTo(.3,.5,.5),cc.fadeOut(.3)),cc.callFunc(function(){var e=u.default.get("quest_power_config",1);m.default.addItemAmount(c.default.ITEM_ID_QUEST_POWER,e.perQuestCompleteRewardNum||1,"\u5b8c\u6210\u4efb\u52a1"),o.fillPower(),o.fillQuests(),o.nodeCurrPowerAmount.runAction(cc.sequence(cc.scaleTo(.2,1.1,1.1),cc.scaleTo(.2,1,1)))})))}},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.animNode&&(this.animNode.removeFromParent(),T.default.put(this.animNode),this.animNode=null)},t.prototype.onOpenDialogCompleted=function(){var e=this;y.default.callLater(.5,function(){e.nodeResource&&cc.isValid(e.nodeResource)&&e.onLoadedInit()},this)},t.prototype.onCloseDialogStart=function(){f.default.isFullGameBanner()||f.default.closeBannerAd()},t.prototype.playUIActionIn=function(e){for(var t=[],o=[this.nodeTitleBar,this.buttonClose.node,this.nodeTitle],n=0;n<o.length;n++){(r=o[n])._originPos=r._originPos||r.position,r.active&&t.push({node:r,beginPos:cc.v2(r.x,r.y+500),endPos:r._originPos,delayTime:.01*v.default.random(5),dur:.3})}o=[this.nodeBottom];for(n=0;n<o.length;n++){var r;(r=o[n])._originPos=r._originPos||r.position,r.active&&t.push({node:r,beginPos:cc.v2(r.x,r.y-500),endPos:r._originPos,delayTime:.01*v.default.random(5),dur:.3})}R.default.playMoveToActionArr(t,1,e)},t.prototype.onLoadedInit=function(){var e=this;b.default.play(732);var t=new C.default({bHideEnergy:!0});t.parent=this.nodeTitleBar,this.titleBar=t,this.buttonClose.node.opacity=0,this.buttonClose.node.active=!0,this.buttonClose.node.runAction(cc.sequence(cc.delayTime(1),cc.fadeIn(.3)));var o=this.nodeList,n=new l.default;n.setLayouter((new s.default).setCols(1).setCellSize(560,114).setGap(4,4).setPending(0)),n.setCreator(function(t){var o=new h.default({fOnClickGo:e.onClickGo.bind(e),fOnClickReward:e.onClickReward.bind(e),fRegisterGuideNode:e.registerGuideNode.bind(e),fOnGuideReward:e.onGuideReward.bind(e)});o.parent=t,t.item=o}),n.setSetter(function(e,t){e.item.fillById(t.type,t.id)}),n.parent=o,n.setContentSize(o.getContentSize()),n.setAnchorPoint(0,0),this.listPart=n,this.fillQuests(),this.fillPower(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd.bind(this),MSG_AD_EVENT_FAILD:this.onMsgAdEventFaild.bind(this),MSG_AD_EVENT_CANCELED:this.onMsgAdEventCanceled.bind(this)}),this.actionIn()},t.prototype.actionIn=function(){for(var e=this,t=this.listPart.getActiveCellsByFilter(function(){return!0}),o=t.length,n=function(e){var o=t[e];o.item&&(o.item._originPos=o.item.position,o.item.x+=g.default.size.width,o.item.runAction(cc.sequence(cc.delayTime(.35*e),cc.moveTo(.7,o.item._originPos).easing(cc.easeElasticOut(1.2)),cc.callFunc(function(){o.item&&cc.isValid(o.item)&&o.item.tryActionRewardButton()}))))},r=0;r<o;r++)n(r);this.context.bGuide&&this.runAction(cc.sequence(cc.delayTime(.7),cc.callFunc(function(){e.sendMsg("MSG_GUIDE_POINT",{id:"vDailyQuestDialog.guideGoButton"})})))},t.prototype.fillQuests=function(){var e=[],t=d.default.getDailyQuestArr();for(var o in t){var n=t[o];e.push({type:c.QuestType.daily,id:n.id,state:n.state==c.QuestState.finished?10:n.state})}t=_.default.getQuestAchievementArr();for(var o in t){n=t[o];e.push({type:c.QuestType.achievement,id:n.id,state:n.state==c.QuestState.finished?10:n.state})}e=v.default.sortArrayByField(e,["-state","type"]),this.listPart.setDatas(e)},t.prototype.fillPower=function(){var e=u.default.get("quest_power_config",1);this.labelPower.string=ul.format("*%s",m.default.getItemAmount(c.default.ITEM_ID_QUEST_POWER)),this.labelPowerReward.string=ul.format("*%s",e.powerFullRewardNum||1),this.progressBarPower.progress=m.default.getItemAmount(c.default.ITEM_ID_QUEST_POWER)/(e.perPowerFullNum||1),this.labelProcessPower.string=ul.format("%s/%s",m.default.getItemAmount(c.default.ITEM_ID_QUEST_POWER),e.perPowerFullNum||1),this.progressBarPower.progress>=1?this.nodeRewardPower.getNumberOfRunningActions()<=0&&(b.default.play(735),this.nodeRewardPower.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.1,1.1),cc.scaleTo(.6,.9,.9),cc.scaleTo(.3,1.1,1.1))))):(this.nodeRewardPower.stopAllActions(),this.nodeRewardPower.scale=1)},t.prototype.registerGuideNode=function(e){this.registerCount++,this.registerCount},t.prototype.onClickGo=function(e,t){var o="vHudDialog",n=null;if(e==c.QuestType.daily)o=(r=u.default.get("daily_quest_template_db",t)).viewName,n=r.subViewName&&""!=r.subViewName?r.subViewName:null;else if(e==c.QuestType.achievement){var r;o=(r=_.default.getAchievement(t).template).viewName,n=r.subViewName&&""!=r.subViewName?r.subViewName:null}g.default.warpDialogWithEffect(o,{gotoNextDialogName:n})},t.prototype.doReceivePowerReward=function(e){var t=u.default.get("quest_power_config",1),o=t.powerFullRewardNum;o=e?2*o:o,m.default.addItemAmount(c.default.ITEM_ID_QUEST_POWER,-t.perPowerFullNum,"\u4efb\u52a1\u9886\u53d6\u52cb\u7ae0\u5956\u52b1"),m.default.addItemAmount(t.powerFullRewardItemId,o,"\u4efb\u52a1\u9886\u53d6\u52cb\u7ae0\u5956\u52b1"),p.default.addGotItemTip(t.powerFullRewardItemId,o),this.fillPower()},t.prototype.onClickReward=function(e,t,o){var n=0;if(e==c.QuestType.daily){var r=d.default.receiveDailyQuest(t);if(!r||!r[0])return void(r&&r[1]&&p.default.showMsgTip(ul.format("%s",r[1])));n=r[2]}else if(e==c.QuestType.achievement){var a=_.default.obtainReward(t,"");a[0];n=a[1]||0}m.default.addItemAmount(c.default.ITEM_ID_GOLD,n,"\u6bcf\u65e5\u4efb\u52a1\u5956\u52b1"),p.default.addGotItemTip(c.default.ITEM_ID_GOLD,n),this.flyPowerWorldPos=o},t.prototype.onGuideReward=function(e){this.bGuided||(this.bGuided=!0,S.default.registerGuideNode("vDailyQuestListItem.buttonReward",e.buttonReward.node),this.sendMsg("MSG_GUIDE_POINT",{id:"vDailyQuestListItem.filledQuest"}),cc.log("--------mgrguide dailyquest"))},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonRewardPower=function(e){var t=this;if(e.isClick()){var o=u.default.get("quest_power_config",1);if(m.default.getItemAmount(c.default.ITEM_ID_QUEST_POWER)<(o.perPowerFullNum||1))p.default.showMsgTip(I.default.getText("vDailyQuestDialog.2"));else{var n=this.AD_QUEST_POWER_DOUBLE_REWARD;if(f.default.preCheckCanTriggerAdEvent(n)){var r={itemId:o.powerFullRewardItemId,amount:o.powerFullRewardNum,times:2,isShowProgress:1==D.default.getCopNumberValueByKey("b_show_ad_reward_dialog_count_down"),fOnClickRefused:function(){t.doReceivePowerReward()},fOnClickVideo:function(){f.default.triggerAdEvent(n,null,!0)}};g.default.warpDialogWithSmallEffect("vPromptAdRewardDialog",r)}else this.doReceivePowerReward()}}},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onMsgAdEventSuccessd=function(e){e.adEventId==this.AD_QUEST_POWER_DOUBLE_REWARD&&this.doReceivePowerReward(!0)},t.prototype.onMsgAdEventFaild=function(e){e.adEventId==this.AD_QUEST_POWER_DOUBLE_REWARD&&this.doReceivePowerReward()},t.prototype.onMsgAdEventCanceled=function(e){this.onMsgAdEventFaild(e)},t=r([w],t)}(i.default);o.default=L,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../../ulframework/view/ReuseLayouterVGrid":"ReuseLayouterVGrid","../../../ulframework/view/ReuseList":"ReuseList","../../Const":"Const","../../manager/mgrAchievement":"mgrAchievement","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrChannel":"mgrChannel","../../manager/mgrDailyQuest":"mgrDailyQuest","../../manager/mgrDirector":"mgrDirector","../../manager/mgrEffect":"mgrEffect","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrPool":"mgrPool","../../manager/mgrSdk":"mgrSdk","../../manager/mgrSound":"mgrSound","../../manager/mgrTip":"mgrTip","../node/vCommonTitleBarRmbGold":"vCommonTitleBarRmbGold","../node/vDailyQuestListItem":"vDailyQuestListItem"}],vDailyQuestListItem:[function(e,t,o){"use strict";cc._RF.push(t,"eef763r3IRMaaCqD/2vsyOu","vDailyQuestListItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrCfg"),l=e("../../manager/mgrDailyQuest"),c=e("../../manager/mgrPlayer"),u=e("../../Const"),d=e("../../manager/mgrAchievement"),p=cc._decorator,h=p.ccclass,f=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonGo=null,t.buttonReward=null,t.labelPowerAmount=null,t.labelProgress=null,t.labelRewardAmount=null,t.labelTitle=null,t.nodeBg=null,t.nodePower=null,t.nodeRewardAmount=null,t.progressBar=null,t.spriteReceived=null,t.spriteRewardUnit=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vDailyQuestListItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonGo:[a.default,"onTouchButtonGo"],CC_buttonReward:[a.default,"onTouchButtonReward"],CC_labelPowerAmount:[cc.Label],CC_labelProgress:[cc.Label],CC_labelRewardAmount:[cc.Label],CC_labelTitle:[cc.Label],CC_nodeBg:[cc.Node],CC_nodePower:[cc.Node],CC_nodeRewardAmount:[cc.Node],CC_progressBar:[cc.ProgressBar],CC_spriteReceived:[cc.Sprite],CC_spriteRewardUnit:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.registerListeners({MSG_DAILY_QUEST_STATUS_CHANGED:this.onMsgDailyQuestStatusChanged.bind(this),MSG_ACHIEVEMENT_STATE_CHANGED:this.onMsgAchievementStatusChanged.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillById=function(e,t){cc.log("---type-id",e,t),this.questType=e,this.questId=t,e==u.QuestType.daily?this.fillDailyQuest(this.questId):e==u.QuestType.achievement&&this.fillAchievement(this.questId)},t.prototype.fillDailyQuest=function(e){var t=l.default.getDailyQuest(this.questId),o=s.default.get("daily_quest_template_db",this.questId);cc.log("--quest-template=",o),this.labelTitle.setLocalizedString(o.desc);var n=c.default.getItemDailyGotAmount(o.checkItemId),r=n/(o.targetItemAmount||1);this.progressBar.progress=r,this.labelProgress.string=ul.format("%s/%s",c.default.getItemAmountStr(Math.min(n,o.targetItemAmount||1)),c.default.getItemAmountStr(o.targetItemAmount||1));var a=c.default.getBascRewardGold(),i=Math.floor(a*(o.factor/100));this.labelRewardAmount.string=ul.format("%s",c.default.getItemAmountStr(i)),this.buttonGo.node.active=!1,this.buttonReward.node.active=!1,this.spriteReceived.node.active=!1,t.state==u.QuestState.normal?this.buttonGo.node.active=!0:t.state==u.QuestState.finished?this.buttonReward.node.active=!0:this.spriteReceived.node.active=!0},t.prototype.fillAchievement=function(e){var t=d.default.getAchievement(e),o=t.template;this.labelTitle.setLocalizedString(o.desc);var n=t.count/(t.maxCount||1);this.progressBar.progress=n,this.labelProgress.string=ul.format("%s/%s",c.default.getItemAmountStr(t.count),c.default.getItemAmountStr(t.maxCount||1)),this.buttonGo.node.active=!1,this.buttonReward.node.active=!1,this.spriteReceived.node.active=!1,t.state==u.QuestState.normal?this.buttonGo.node.active=!0:t.state==u.QuestState.finished?this.buttonReward.node.active=!0:this.spriteReceived.node.active=!0,this.labelRewardAmount.string=ul.format("%s",c.default.getItemAmountStr(o.rewardAmount||0)),this.buttonReward.node.active&&this.context.fOnGuideReward&&this.context.fOnGuideReward(this)},t.prototype.tryActionRewardButton=function(){this.buttonReward&&this.buttonReward.node&&cc.isValid(this.buttonReward.node)&&this.buttonReward.node.active&&this.buttonReward.node.runAction(cc.sequence(cc.scaleTo(.2,1.3,1.3),cc.scaleTo(.2,1,1)))},t.prototype.onTouchButtonGo=function(e){e.isClick()&&this.context.fOnClickGo&&this.context.fOnClickGo(this.questType,this.questId)},t.prototype.onTouchButtonReward=function(e){if(e.isClick()){this.sendMsg("MSG_GUIDE_POINT",{id:"vDailyQuestListItem.buttonReward.click"});var t=this.nodePower.parent.convertToWorldSpaceAR(this.nodePower.position);this.context.fOnClickReward&&this.context.fOnClickReward(this.questType,this.questId,t)}},t.prototype.onMsgDailyQuestStatusChanged=function(e){e.id==this.questId&&this.fillDailyQuest(this.questId)},t.prototype.onMsgAchievementStatusChanged=function(e){e.achievementId==this.questId&&this.fillAchievement(this.questId)},r([i.default.requireResourceLoaded],t.prototype,"fillById",null),t=r([h],t)}(i.default));o.default=f,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrAchievement":"mgrAchievement","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDailyQuest":"mgrDailyQuest","../../manager/mgrPlayer":"mgrPlayer"}],vDebugInfoDialog:[function(e,t,o){"use strict";cc._RF.push(t,"b6f53YJ8HhFf6PwAj0uPObJ","vDebugInfoDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/view/DialogBase"),l=e("../../manager/mgrDirector"),c=e("../../../ulframework/view/DebugMenu"),u=e("../../../ulframework/view/ReuseList"),d=e("../../../ulframework/view/ReuseLayouterVBox"),p=e("../../manager/mgrPlayer"),h=e("../../Const"),f=e("../../manager/mgrAlu"),g=e("../../manager/mgrSdk"),m=e("../../manager/mgrCop"),_=e("../../../ulframework/utils/Tools"),v=e("../../manager/mgrTip"),y=e("../../manager/mgrRecord"),C=e("../../manager/mgrDebug"),S=e("../../../ulframework/utils/Timer"),b=e("../../manager/mgrShop"),R=cc._decorator.ccclass,T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vDebugInfoDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_nodeInfo:[cc.Node],CC_nodeMenu:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(l.default.size),this.nodeInfo.getComponent(cc.Widget).updateAlignment(),this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isShadowEnabled=function(){return!1},t.prototype.buildUi=function(){var e=this,t=new c.default([["\u5173\u95ed",function(){e.closeDialog(!0)}],["devtest",function(){}],["\u4e00\u952e\u5f00\u5e7f\u544aCOP",function(){e.changeAdEventDbCopValue(100)}]],150,50,4);t.parent=this.nodeMenu,t.x=0,t.y=-5;var o=new c.default([["\u6d4b\u8bd5SDK",function(){}],["\u4f7f\u7528\u6d4b\u8bd5Patch",function(){var e=cc.sys.localStorage.getItem("PATCH_CHANNEL");if(e&&""!=e){var t=ul.format("%s_test_patch",e);cc.sys.localStorage.setItem(h.default.FORCE_PATCH_CHANNEL_NAME_KEY,t||"")}else v.default.showMsgTip("\u672a\u627e\u5230\u6b63\u5e38PATCH CHANNEL\u503c")}],["\u91cd\u7f6e\u5b58\u6863",function(){v.default.alertPrompt2("\u8b66\u544a","\u6e05\u7406\u5b58\u6863\u540e\u65e0\u6cd5\u6062\u590d\uff0c\u5e76\u4e14\u9700\u8981\u91cd\u542f\uff01\uff01\uff01","\u53d6\u6d88","\u6e05\u7406",null,function(){y.default.resetRecord(),v.default.showMsgTip("ojbk"),S.default.callLater(.5,function(){cc.game.restart()})})}]],150,50,4);o.parent=this.nodeMenu,o.x=160,o.y=-5;var n=new c.default([["log->info",function(){cc.log=console.log}],["unlock all",function(){v.default.showMsgTip("show me the money!"),C.default.bUnlockAllStage=!0}],["\u4e00\u952e\u5173\u5e7f\u544aCOP",function(){e.changeAdEventDbCopValue(0)}]],120,50,4);n.parent=this.nodeMenu,n.x=320,n.y=-5;var r=this.nodeInfo,s=new u.default;s.parent=r,s.setLayouter((new d.default).setCellSize(r.getContentSize().width-8,32).setGap(10).setPending(10)),s.setCreator(function(t){return a(e,void 0,void 0,function(){var e,o;return i(this,function(n){return(e=new cc.Node).parent=t,(o=e.addComponent(cc.Label)).fontSize=16,o.lineHeight=16,o.horizontalAlign=cc.Label.HorizontalAlign.LEFT,o.verticalAlign=cc.Label.VerticalAlign.CENTER,o.overflow=cc.Label.Overflow.SHRINK,e.setContentSize(t.getContentSize()),t.label=o,[2]})})}),s.setSetter(function(e,t){e.label.string=t}),s.setContentSize(r.getContentSize());var l=s.addComponent(cc.Widget);l.top=0,l.bottom=0,l.right=0,l.left=0,l.alignMode=cc.Widget.AlignMode.ALWAYS,this.reuseList=s,this.fillData()},t.prototype.fillData=function(){var e=["\u8c03\u8bd5\u4fe1\u606f\uff1a"];h.default.LOCAL_PATCH_INFO?(e.push(ul.format("[LOCAL_PATCH_INFO.CHANNEL] = [%s]",h.default.LOCAL_PATCH_INFO.CHANNEL)),h.default.LOCAL_PATCH_INFO.CONF?(e.push(ul.format("[LOCAL_PATCH_INFO.CONF.B_SKIP_PAYMENT] = [%s]",h.default.LOCAL_PATCH_INFO.CONF.B_SKIP_PAYMENT)),e.push(ul.format("[LOCAL_PATCH_INFO.CONF.B_DISABLE_DEVTEST_BUTTON] = [%s]",h.default.LOCAL_PATCH_INFO.CONF.B_DISABLE_DEVTEST_BUTTON)),e.push(ul.format("[LOCAL_PATCH_INFO.CONF.PUBLISH_CHANNEL] = [%s]",h.default.LOCAL_PATCH_INFO.CONF.PUBLISH_CHANNEL))):e.push("Const.LOCAL_PATCH_INFO.CONF\u672a\u627e\u5230\uff01")):e.push("Const.LOCAL_PATCH_INFO\u672a\u627e\u5230\uff01"),e.push(ul.format("GAME_VERSION = [%s]",h.default.GAME_VERSION)),e.push(ul.format("uid = [%s]",p.default.getUid())),e.push(ul.format("mgrAlu.getCheckPayChannel = [%s]",f.default.getCheckPayChannel())),e.push(ul.format("mgrAlu.getCheckPlatform = [%s]",f.default.getCheckPlatform())),e.push(ul.format("ANDROID_SWITCH_MORE_GAME = [%s]",h.default.ANDROID_SWITCH_MORE_GAME)),e.push(ul.format("ANDROID_SWITCH_ABOUT = [%s]",h.default.ANDROID_SWITCH_ABOUT)),e.push(ul.format("ANDROID_SWITCH_THIRD_EXIT = [%s]",h.default.ANDROID_SWITCH_THIRD_EXIT)),e.push(ul.format("ANDROID_SWITCH_MUSIC_ENABLED = [%s]",h.default.ANDROID_SWITCH_MUSIC_ENABLED)),e.push(ul.format("sdcardPath = [%s]",g.default.sdcardPath));var t=m.default.getCops(),o=Object.keys(t);o.sort(),e.push("cop:");for(var n=0;n<o.length;n++){var r=o[n],a=t[r];e.push(ul.format("  [%s] = [%s]",r,a))}var i=[];_.default.forEachMap(b.default.banShopIds,function(e,t){t&&i.push(e)}),e.push(ul.format("banShopIds = [%s]",i.join(","))),e.push(""),e.push("ultralisk \u6210\u90fd\u96f7\u517d\u4e92\u52a8 \u7248\u6743\u6240\u6709"),this.reuseList.setDatas(e)},t.prototype.changeAdEventDbCopValue=function(e){m.default.processAdCopDebug(e),this.fillData()},t=r([R],t)}(s.default);o.default=T,cc._RF.pop()},{"../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DebugMenu":"DebugMenu","../../../ulframework/view/DialogBase":"DialogBase","../../../ulframework/view/ReuseLayouterVBox":"ReuseLayouterVBox","../../../ulframework/view/ReuseList":"ReuseList","../../Const":"Const","../../manager/mgrAlu":"mgrAlu","../../manager/mgrCop":"mgrCop","../../manager/mgrDebug":"mgrDebug","../../manager/mgrDirector":"mgrDirector","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrRecord":"mgrRecord","../../manager/mgrSdk":"mgrSdk","../../manager/mgrShop":"mgrShop","../../manager/mgrTip":"mgrTip"}],vDecorationGroup:[function(e,t,o){"use strict";cc._RF.push(t,"6ad5clDfdhDj4C274b06Ftd","vDecorationGroup");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/view/ViewBase"),i=e("../../manager/mgrCfg"),s=e("../../manager/mgrCosmetic"),l=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"node/vDecorationGroup"},t.prototype._getResourceBindingConfig=function(){return{}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.unloadNodes()},t.prototype.buildUi=function(){this.loadNodes()},t.prototype.loadNodes=function(){var e=this.context.groupId,t=[],o=i.default.get("cosmetic_decoration_group_db",e).layouts;for(var n in o){var r=o[n],a=i.default.get("cosmetic_decoration_db",r.decorationId)||{},l=new cc.Node;l.parent=this,l.setPosition(r.pos),l.rotation=r.rotate,l.setScaleX(r.scaleX||1),l.setScaleY(r.scaleY||1),l.zIndex=r.order;var c=[],u=a.resources;for(var d in u){var p=u[d],h=p[0],f=p[0],g=s.default.createResNode(h,f);g.parent=l,c.push(g)}l.resNodes=c,t.push(l)}this.nodes=t},t.prototype.unloadNodes=function(){if(this.nodes){for(var e in this.nodes){var t=this.nodes[e];for(var o in t.resNodes){var n=t.resNodes[o];s.default.removeResNode(n)}t.resNodes=null,t.removeFromParent()}this.nodes=null}},t=r([l],t)}(a.default);o.default=c,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrCosmetic":"mgrCosmetic"}],vEventNpc:[function(e,t,o){"use strict";cc._RF.push(t,"0baecKDnYRHZbYx0TLV0kDm","vEventNpc");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/view/ViewBase"),i=e("../../manager/mgrPool"),s=e("../../../ulframework/utils/Tools"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeEventFlag=null,t.nodeUnit=null,t.NPC_SPINE_ARR=["eventnpc1","eventnpc2","eventnpc3","eventnpc4"],t}return n(t,e),t.prototype._getResourceName=function(){return"node/vEventNpc"},t.prototype._getResourceBindingConfig=function(){return{CC_nodeEventFlag:[cc.Node],CC_nodeUnit:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.spine&&(i.default.put(this.spine),this.spine.removeFromParent(),this.spine=null)},t.prototype.changeScaleX=function(e){this.scaleX=e},t.prototype.onLoadedInit=function(){this.nodeEventFlag._originPos=this.nodeEventFlag.position;var e=this.context.spineId||this.NPC_SPINE_ARR[s.default.random(0,this.NPC_SPINE_ARR.length-1)],t=i.default.get("spine",e);t&&(t.parent=this.nodeUnit,t.play("mov_1",!0)),this.spine=t,this.nodeUnit.scale=this.context.initUnitScale||1,this.nodeEventFlag.y=this.nodeEventFlag._originPos.y*this.nodeUnit.scale},t.prototype.setUnitScale=function(e){this.nodeUnit.scale=(e||1)*(this.context.initUnitScale||1),this.nodeEventFlag.y=this.nodeEventFlag._originPos.y*this.nodeUnit.scale},t.prototype.showEventFlag=function(){var e=this;this.nodeEventFlag.scale=0,this.nodeEventFlag.active=!0,this.nodeEventFlag.runAction(cc.sequence(cc.scaleTo(.8,1,1).easing(cc.easeElasticOut(.8)),cc.delayTime(1),cc.callFunc(function(){e.hideEventFlag()})))},t.prototype.hideEventFlag=function(){this.nodeEventFlag.runAction(cc.scaleTo(.8,0,0).easing(cc.easeElasticOut(.8)))},r([a.default.requireResourceLoaded],t.prototype,"setUnitScale",null),t=r([c],t)}(a.default));o.default=u,cc._RF.pop()},{"../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrPool":"mgrPool"}],vFindMeBaiduDialog:[function(e,t,o){"use strict";cc._RF.push(t,"1e358IdbmxNs4dZ8a7i59eW","vFindMeBaiduDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrAd"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vFindMeBaiduDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),s.default.showViewEnterAd(this.nodeResource,null,null,"ad_banner_find_me_dialog")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onCloseDialogStart=function(){s.default.closeBannerAd()},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t=r([c],t)}(i.default));o.default=u,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd"}],vFindMeDouyinDialog:[function(e,t,o){"use strict";cc._RF.push(t,"f60cb3datZASpRqljJnV00O","vFindMeDouyinDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrAd"),l=e("../../manager/mgrChannel"),c=e("../../manager/mgrDirector"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.labelTitle=null,t.spriteIcon1=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vFindMeDouyinDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_labelTitle:[cc.Label],CC_spriteIcon1:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),s.default.showViewEnterAd(this.nodeResource,null,null,"ad_banner_find_me_dialog");for(var t=[this.spriteIcon1],o=0;o<t.length;o++){t[o].node.opacity=0}l.default.findmeImageUrl&&c.default.loadRes(l.default.findmeImageUrl,null,function(e,o){if(console.log("---------down int image completed"),e)console.warn(e);else for(var n=0;n<t.length;n++){var r=t[n];cc.isValid(r)&&(r.setSpriteFrameAndKeepSize(o),r.node.opacity=255)}})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onCloseDialogStart=function(){s.default.closeBannerAd()},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t=r([d],t)}(i.default));o.default=p,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrChannel":"mgrChannel","../../manager/mgrDirector":"mgrDirector"}],vFindMeToutiaoDialog:[function(e,t,o){"use strict";cc._RF.push(t,"0a32c/tAyZEk4BLaNx1dpSG","vFindMeToutiaoDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrAd"),l=e("../../manager/mgrChannel"),c=e("../../manager/mgrDirector"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.labelTitle=null,t.spriteIcon1=null,t.spriteIcon2=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vFindMeToutiaoDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_labelTitle:[cc.Label],CC_spriteIcon1:[cc.Sprite],CC_spriteIcon2:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),s.default.showViewEnterAd(this.nodeResource,null,null,"ad_banner_find_me_dialog");for(var t=[this.spriteIcon1,this.spriteIcon2],o=0;o<t.length;o++){t[o].node.opacity=0}l.default.findmeImageUrl&&c.default.loadRes(l.default.findmeImageUrl,null,function(e,o){if(console.log("---------down int image completed"),e)console.warn(e);else for(var n=0;n<t.length;n++){var r=t[n];cc.isValid(r)&&(r.setSpriteFrameAndKeepSize(o),r.node.opacity=255)}})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onCloseDialogStart=function(){s.default.closeBannerAd()},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t=r([d],t)}(i.default));o.default=p,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrChannel":"mgrChannel","../../manager/mgrDirector":"mgrDirector"}],vFindMeWechatDialog:[function(e,t,o){"use strict";cc._RF.push(t,"4c881qy2TNK2IIptHAn1tsc","vFindMeWechatDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrAd"),l=e("../../manager/mgrChannel"),c=e("../../manager/mgrDirector"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.labelTitle=null,t.spriteIcon1=null,t.spriteIcon2=null,t.spriteIcon3=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vFindMeWechatDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_labelTitle:[cc.Label],CC_spriteIcon1:[cc.Sprite],CC_spriteIcon2:[cc.Sprite],CC_spriteIcon3:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),s.default.showViewEnterAd(this.nodeResource,null,null,"ad_banner_find_me_dialog");for(var t=[this.spriteIcon1,this.spriteIcon2,this.spriteIcon3],o=0;o<t.length;o++){t[o].node.opacity=0}l.default.findmeImageUrl&&c.default.loadRes(l.default.findmeImageUrl,null,function(e,o){if(console.log("---------down int image completed"),e)console.warn(e);else for(var n=0;n<t.length;n++){var r=t[n];cc.isValid(r)&&(r.setSpriteFrameAndKeepSize(o),r.node.opacity=255)}})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onCloseDialogStart=function(){s.default.closeBannerAd()},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t=r([d],t)}(i.default));o.default=p,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrChannel":"mgrChannel","../../manager/mgrDirector":"mgrDirector"}],vGoldRainDialog:[function(e,t,o){"use strict";cc._RF.push(t,"f910dShurZIv6e+OqNCiyz0","vGoldRainDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrDirector"),l=e("../../../ulframework/utils/Tools"),c=e("../../manager/mgrTip"),u=e("../../../ulframework/utils/Timer"),d=e("../../manager/mgrPlayer"),p=e("../../manager/mgrAd"),h=e("../../manager/mgrCop"),f=e("../../manager/mgrGoldRain"),g=e("../../manager/mgrI18n"),m=cc._decorator,_=m.ccclass,v=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonOpen=null,t.buttonShake=null,t.nodeClickAnimAnchor=null,t.nodeGoldRain=null,t.nodeTipRain=null,t.spriteGoldRain=null,t.spriteTip=null,t.shakeCount=0,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vGoldRainDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_buttonOpen:[a.default,"onTouchButtonOpen"],CC_buttonShake:[a.default,"onTouchButtonShake"],CC_nodeClickAnimAnchor:[cc.Node],CC_nodeGoldRain:[cc.Node],CC_nodeTipRain:[cc.Node],CC_spriteGoldRain:[cc.Sprite],CC_spriteTip:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buttonShake.node.active=!1,p.default.showBannerAd(this.nodeResource,"ad_banner_gold_rain_dialog"),this.buttonOpen.node.y=-s.default.height/2+this.buttonOpen.node.height/2+h.default.getNumberValue("ui_banner_height")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.spriteTip&&this.buttonOpen&&(this.spriteTip.node.active=!this.buttonOpen.node.active)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onCloseDialogStart=function(){p.default.closeBannerAd(),f.default.refreshOpenGoldRainTime()},t.prototype.isClickShadowClose=function(){return!1},t.prototype.playClickAnim=function(){var e=this.spriteGoldRain.node;e.stopAllActions(),e.x=0,e.runAction(cc.sequence(cc.rotateBy(.1,15),cc.rotateBy(.2,-30),cc.rotateBy(.1,15)));for(var t=l.default.random(5,10),o=[],n=function(e){o[e]=s.default.createSpriteNode("2d/icon/icon_gold_hd"),o[e].parent=r,o[e].setPosition(r.convertToNodeSpaceAR(r.nodeClickAnimAnchor.convertToWorldSpaceAR(cc.v2(0,0))));for(var t=0;Math.abs(t)<100;)t=l.default.random(-250,250);var n=l.default.random(150,250);o[e].runAction(cc.sequence(cc.spawn(cc.jumpBy(.4,cc.v2(t,0),n,1),cc.sequence(cc.delayTime(.3),cc.fadeOut(.1))),cc.callFunc(function(){o[e].removeFromParent(),o[e].destroy()})))},r=this,a=0;a<t;a++)n(a)},t.prototype.showResult=function(){var e=Math.floor(d.default.getBascRewardGold()/10*this.shakeCount);e>2*d.default.getBascRewardGold()&&(e=2*d.default.getBascRewardGold()),s.default.openDialog("vPromptGoldRainDialog",{amount:e})},t.prototype.onTouchButtonClose=function(e){var t=this;e.isClick()&&(this.time?(this.time.stop(),c.default.alertPrompt2(g.default.getText("vGoldRainDialog.5"),g.default.getText("vGoldRainDialog.6"),g.default.getText("vGoldRainDialog.7"),g.default.getText("vGoldRainDialog.8"),function(){t.time.start(),t.shakeCount=0},function(){t.closeDialog()})):this.closeDialog())},t.prototype.onTouchButtonShake=function(e){e.isClick()&&(this.shakeCount++,this.playClickAnim())},t.prototype.onTouchButtonOpen=function(e){var t=this;if(e.isClick()){p.default.closeBannerAd(),this.nodeTipRain.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){t.nodeTipRain.active=!1}))),this.buttonOpen.node.active=!1,this.buttonShake.node.active=!0;var o=l.default.random(3,6);this.time=u.default.callLoop(1,function(e){e.count>=o&&(t.shakeCount<3?s.default.openDialog("vPromptGoldRainDialog",{amount:0}):t.showResult(),t.closeDialog(),e.stop())},this)}},t=r([_],t)}(i.default));o.default=v,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrCop":"mgrCop","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGoldRain":"mgrGoldRain","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrTip":"mgrTip"}],vGotCoinDialog:[function(e,t,o){"use strict";cc._RF.push(t,"71dedNZYfNCT4etCCHWjrw7","vGotCoinDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/utils/Tools"),c=e("../../../ulframework/view/DialogBase"),u=e("../../manager/mgrCfg"),d=e("../../manager/mgrSound"),p=e("../../manager/mgrTip"),h=e("../../manager/mgrEffect"),f=e("../../manager/mgrPlayer"),g=e("../../Const"),m=cc._decorator.ccclass,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonAddGold=null,t.labelAmount=null,t.labelCoin=null,t.labelName=null,t.nodeCoin=null,t.nodeCoinParticle=null,t.nodeContent=null,t.nodeEffect=null,t.nodeShine=null,t.spriteCoin=null,t.spriteIcon=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vGotCoinDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonAddGold:[s.default,"onTouchButtonAddGold"],CC_labelAmount:[cc.Label],CC_labelCoin:[cc.Label],CC_labelName:[cc.Label],CC_nodeCoin:[cc.Node],CC_nodeCoinParticle:[cc.Node],CC_nodeContent:[cc.Node],CC_nodeEffect:[cc.Node],CC_nodeShine:[cc.Node],CC_spriteCoin:[cc.Sprite],CC_spriteIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.getShadowOpacity=function(){return this.context.shadowOpacity||l.default.isZero(this.context.shadowOpacity)?this.context.shadowOpacity:e.prototype.getShadowOpacity.call(this)},t.prototype.onLoadedInit=function(){if(this.nodeContent.active=!0,this.nodeContent.y+=this.context.contentOffsetY||0,this.fillData(),this.context.bDisableSound||d.default.play(103),!this.context.bDisableOpenEffect){var e=this.nodeEffect.convertToWorldSpaceAR(cc.v2(0,0));p.default.playParticleOnce("result_bao1",e.x,e.y),p.default.playParticleOnce("result_bao2",e.x,e.y),this.nodeShine.runAction(cc.repeatForever(cc.sequence(cc.rotateBy(5,180),cc.rotateBy(5,180))))}},t.prototype.onOpenDialogCompleted=function(){var e=this;this.context.autoCloseDialogDelayTime&&this.nodeResource.runAction(cc.sequence(cc.delayTime(this.context.autoCloseDialogDelayTime),cc.callFunc(function(){e.closeDialog(!0)})))},t.prototype.getItemId=function(){return this.context.itemId},t.prototype.getIconUIData=function(){if(this.isResourceLoaded())return{worldPos:this.spriteIcon.node.parent.convertToWorldSpaceAR(this.spriteIcon.node.position),scale:this.spriteIcon.node.scale}},t.prototype.fillData=function(){var e=this.context.itemId,t=this.context.amount,o=u.default.get("item_template_db",e);o&&(this.spriteIcon.loadSpriteFrameAndKeepSize(o.icon),this.labelAmount.string=t>1?ul.format("%s",f.default.getItemAmountStr(t)):"",this.labelName.string=o.name||"")},t.prototype.closeDialog=function(t,o){return void 0===t&&(t=!1),a(this,void 0,void 0,function(){var n,r,a,s,l=this;return i(this,function(i){return this.context.bDetail||(n=function(){d.default.play(111),l.sendMsg("MSG_ROLL_TITLE_BAR_ITEM_AMOUNT",{itemId:l.context.itemId,delayTime:0})},r=Math.min(Math.floor((this.context.amount||1)/1e3)||1,g.default.MAX_FLY_GOT_COUNT),a=this.spriteIcon.node.parent.convertToWorldSpaceAR(this.spriteIcon.node.position),s={endWorldPos:null,pNode:null,bOffsetPos:!0,startFlyOffScale:1,completedCallback:n,bDisableParticle:!1,bForceFlyOne:!1,flyCount:r},h.default.tryFlyGotItem(this.context.itemId,this.context.amount||1,a,s)),e.prototype.closeDialog.call(this,t,o),[2]})})},t.prototype.onTouchButtonAddGold=function(e){},t.prototype.isClickShadowClose=function(){return!this.context.autoCloseDialogDelayTime},t=r([m],t)}(c.default);o.default=_,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../Const":"Const","../../manager/mgrCfg":"mgrCfg","../../manager/mgrEffect":"mgrEffect","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrSound":"mgrSound","../../manager/mgrTip":"mgrTip"}],vGotItemDialog:[function(e,t,o){"use strict";cc._RF.push(t,"9be8cUZ+ZpNc5Y5fKTUokiH","vGotItemDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/utils/Tools"),c=e("../../../ulframework/view/DialogBase"),u=e("../../Const"),d=e("../../manager/mgrCfg"),p=e("../../manager/mgrGuide"),h=e("../../manager/mgrPlayer"),f=e("../../manager/mgrPool"),g=e("../../manager/mgrSdk"),m=e("../../manager/mgrShop"),_=e("../../manager/mgrSound"),v=e("../../manager/mgrTip"),y=e("../node/vLevelBar"),C=e("../../manager/mgrAd"),S=e("../../manager/mgrGoldRain"),b=cc._decorator.ccclass,R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBuy=null,t.buttonClose=null,t.buttonOpenSource=null,t.buttonReceive=null,t.buttonVideoAd=null,t.buttonVideoNormal=null,t.labelAmount=null,t.labelButtonBuy=null,t.labelButtonVideo=null,t.labelBuyPrice=null,t.labelDesc=null,t.labelExchangeAmount=null,t.labelExchangeTitle=null,t.labelExchangedCoinAmount=null,t.labelExchangedCoinName=null,t.labelName=null,t.labelSourceDesc=null,t.labelTabTip=null,t.labelVideoNormalPrice=null,t.labelVideoTip=null,t.nodeBuy=null,t.nodeBuyVideo=null,t.nodeContent=null,t.nodeEffect=null,t.nodeExchange=null,t.nodeExchangedCoin=null,t.nodeGotItemEffect=null,t.nodeGotItemEffectShine=null,t.nodeGuide=null,t.nodeLevel=null,t.nodePartContent=null,t.nodePetSkill=null,t.nodePriceBuy=null,t.nodeSource=null,t.nodeSubject=null,t.spriteExchangeIcon=null,t.spriteExchangedCoinIcon=null,t.spriteIcon=null,t.spriteOwnFlag=null,t.spritePriceUnit=null,t.spritePriceUnitVideoNormal=null,t.spriteSubject=null,t.MAX_SHOW_SUBJECT_NUM=3,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vGotItemDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBuy:[s.default,"onTouchButtonBuy"],CC_buttonClose:[s.default,"onTouchButtonClose"],CC_buttonOpenSource:[s.default,"onTouchButtonOpenSource"],CC_buttonReceive:[s.default,"onTouchButtonReceive"],CC_buttonVideoAd:[s.default,"onTouchButtonVideoAd"],CC_buttonVideoNormal:[s.default,"onTouchButtonVideoNormal"],CC_labelAmount:[cc.Label],CC_labelButtonBuy:[cc.Label],CC_labelButtonVideo:[cc.Label],CC_labelBuyPrice:[cc.Label],CC_labelDesc:[cc.Label],CC_labelExchangeAmount:[cc.Label],CC_labelExchangeTitle:[cc.Label],CC_labelExchangedCoinAmount:[cc.Label],CC_labelExchangedCoinName:[cc.Label],CC_labelName:[cc.Label],CC_labelSourceDesc:[cc.Label],CC_labelTabTip:[cc.Label],CC_labelVideoNormalPrice:[cc.Label],CC_labelVideoTip:[cc.Label],CC_nodeBuy:[cc.Node],CC_nodeBuyVideo:[cc.Node],CC_nodeContent:[cc.Node],CC_nodeEffect:[cc.Node],CC_nodeExchange:[cc.Node],CC_nodeExchangedCoin:[cc.Node],CC_nodeGotItemEffect:[cc.Node],CC_nodeGotItemEffectShine:[cc.Node],CC_nodeGuide:[cc.Node],CC_nodeLevel:[cc.Node],CC_nodePartContent:[cc.Node],CC_nodePetSkill:[cc.Node],CC_nodePriceBuy:[cc.Node],CC_nodeSource:[cc.Node],CC_nodeSubject:[cc.Node],CC_spriteExchangeIcon:[cc.Sprite],CC_spriteExchangedCoinIcon:[cc.Sprite],CC_spriteIcon:[cc.Sprite],CC_spriteOwnFlag:[cc.Sprite],CC_spritePriceUnit:[cc.Sprite],CC_spritePriceUnitVideoNormal:[cc.Sprite],CC_spriteSubject:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),C.default.showIntAd(),this.onLoadedInit()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.refreshVipNode()},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.spineSuitFlag&&(f.default.put(this.spineSuitFlag),this.spineSuitFlag.removeFromParent(),this.spineSuitFlag=null),this.animNodeGot&&(f.default.put(this.animNodeGot),this.animNodeGot.removeFromParent(),this.animNodeGot=null)},t.prototype.onCloseDialogStart=function(){C.default.closeBannerAd()},t.prototype.onTouchButtonBuy=function(e){e.isClick()&&m.default.requestBuy(this.context.itemId,1,"\u70b9\u51fb_\u83b7\u5f97\u7269\u54c1\u754c\u9762")},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonVideoAd=function(e){e.isClick()&&(C.default.triggerAdEvent(this.context.videoBuyEventId,null,!0),this.closeDialog())},t.prototype.onTouchButtonVideoNormal=function(e){this.onTouchButtonBuy(e)},t.prototype.onTouchButtonReceive=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonOpenSource=function(e){if(e.isClick()){var t=m.default.getBuySource(this.context.itemId);m.default.openBuySource(t)}},t.prototype.getShadowOpacity=function(){return this.context.shadowOpacity||l.default.isZero(this.context.shadowOpacity)?this.context.shadowOpacity:e.prototype.getShadowOpacity.call(this)},t.prototype.onLoadedInit=function(){this.nodeContent.active=!0,this.nodeContent.y+=this.context.contentOffsetY||0;var e=new y.default;if(e.parent=this.nodeLevel,this.levelBar=e,this.fillData(),this.context.bDisableSound||(this.bShowImageExchange?_.default.play(721):_.default.play(103)),!this.context.bDisableOpenEffect){var t=this.nodeEffect.convertToWorldSpaceAR(cc.v2(0,0));v.default.playParticleOnce("result_bao1",t.x,t.y,1.2),v.default.playParticleOnce("result_bao2",t.x,t.y,1.2)}C.default.showBannerAd(this.nodeResource,"ad_banner_got_item_dialog"),this.registerListeners({MSG_ITEM_BUY_SUCCESSED:this.onMsgItemBuySuccessd.bind(this)}),S.default.openGoldRain(0)},t.prototype.onOpenDialogCompleted=function(){this.context.bDetail||this.bShowImageExchange||(this.bAddedJumpBanner=v.default.addJumpOtherGameBannerItem(this.nodeResource,cc.v2(0,800))),p.default.registerGuideNode("vGotItemDialog.nodeGuide",this.nodeGuide),this.sendMsg("MSG_GUIDE_POINT",{id:"vGotItemDialog.onOpenDialogCompleted"})},t.prototype.fillData=function(){return a(this,void 0,void 0,function(){var e,t,o,n,r,a,s,l,c,u;return i(this,function(i){return e=this.context.itemId,t=this.context.amount,cc.log("----itemId=",e),(o=d.default.get("item_template_db",e)||{}).icon&&this.spriteIcon.loadSpriteFrameAndKeepSize(o.icon||""),this.labelAmount.string=t>1?ul.format("%s",h.default.getItemAmountStr(t)):"",this.labelDesc.string=o.desc||"",this.labelName.string=o.name||"",this.levelBar.setLevel(5,o.level||0),this.nodePetSkill.removeAllChildren(),this.tryAddSubject(e),!this.context.bDetail&&o.id&&0!=o.sellItemId&&0!=o.sellItemAmount&&h.default.isDisplayedGotItem(e)?(this.spriteOwnFlag.node.active=!0,this.nodeExchange.active=!0,this.spriteExchangeIcon.loadSpriteFrameAndKeepSize(d.default.get("item_template_db",o.sellItemId,"icon")),this.labelExchangeAmount.string=ul.format(" *%d",o.sellItemAmount),this.labelExchangedCoinName.string=d.default.get("item_template_db",o.sellItemId,"name")||"",this.labelExchangedCoinAmount.string=this.labelExchangeAmount.string,this.spriteExchangedCoinIcon.loadSpriteFrameAndKeepSize(d.default.get("item_template_db",o.sellItemId,"icon"))):(this.spriteOwnFlag.node.active=!1,this.nodeExchange.active=!1),this.bShowImageExchange=this.nodeExchange.active,n=!1,r=!1,a=!1,this.context.bDetail?this.context.bCanBuy&&h.default.getItemAmount(e)<=0&&(c=d.default.get("shop_template_db",e),u=!1,c?(this.context.videoBuyEventId&&C.default.isAdEventHasChanceTrigger(this.context.videoBuyEventId)?(r=!0,this.labelVideoTip.string=this.context.labelVideoTip||this.labelVideoTip.string,this.labelButtonVideo.string=this.context.videoBuyButtonStr||this.labelButtonVideo.string):n=!0,this.labelVideoNormalPrice.string=ul.format("%s",h.default.getItemAmountStr(c.price)),this.spritePriceUnitVideoNormal.loadSpriteFrameAndKeepSize(h.default.getIcon(c.priceUnit)),this.labelBuyPrice.string=ul.format("%s",h.default.getItemAmountStr(c.price)),this.spritePriceUnit.loadSpriteFrameAndKeepSize(h.default.getIcon(c.priceUnit))):u?a=!0:cc.log("---no shopdata shopId=",e)):((s=f.default.get("animNode","41_jiesuan_glow_loop"))&&((l=new cc.Node).parent=this.spriteIcon.node,s.parent=l,l.scale=1,s.play(),this.animNodeGot=s),this.nodeGotItemEffect.active=!0,this.nodeGotItemEffectShine.active=!0,this.nodeGotItemEffectShine.runAction(cc.repeatForever(cc.sequence(cc.rotateBy(5,180),cc.rotateBy(5,180)))),h.default.markDisplayedGotItem(this.context.itemId),this.tryRunExchangeAction()),this.nodeBuy.active=n,this.nodeBuyVideo.active=r,this.nodeSource.active=a,n||r||a||this.context.bDetail?(this.buttonClose.node.active=!0,this.buttonReceive.node.active=!1):(this.buttonClose.node.active=!1,this.buttonReceive.node.active=!0),this.nodeBuy.opacity=this.nodeBuy.active?255:0,this.nodeSource.opacity=this.nodeSource.active?255:0,this.nodeBuyVideo.opacity=this.nodeBuyVideo.active?255:0,[2]})})},t.prototype.tryAddSubject=function(e){var t=d.default.get("cosmetic_part_db",e),o=0,n=0,r=d.default.getDb("cosmetic_subject_tag_db");if(t)for(var a in r){var i=r[a],s=t[i.id];o<s&&(n=i.id,o=s)}if(n){var l=d.default.get("cosmetic_subject_tag_db",n);this.spriteSubject.loadSpriteFrameAndKeepSize(l.texture)}else this.nodeSubject.active=!1},t.prototype.tryRunExchangeAction=function(){if(this.bShowImageExchange){this.nodeExchangedCoin.scale=0,this.nodeExchangedCoin.active=!0;this.nodePartContent.runAction(cc.sequence(cc.delayTime(1),cc.spawn(cc.scaleTo(.3,.5,.5),cc.moveBy(.3,cc.v2(-50,0))),cc.spawn(cc.scaleTo(.3,0,0),cc.moveBy(.3,cc.v2(50,0))))),this.nodeExchangedCoin.runAction(cc.sequence(cc.delayTime(1),cc.spawn(cc.scaleTo(.3,.5,.5),cc.moveBy(.3,cc.v2(50,0))),cc.spawn(cc.scaleTo(.3,1,1),cc.moveBy(.3,cc.v2(-50,0))))),this.nodeSubject.runAction(cc.sequence(cc.delayTime(1),cc.scaleTo(.3,0,0)))}},t.prototype.getItemId=function(){return this.context.itemId},t.prototype.getIconUIData=function(){if(this.isResourceLoaded())return{worldPos:this.spriteIcon.node.parent.convertToWorldSpaceAR(this.spriteIcon.node.position),scale:this.spriteIcon.node.scale}},t.prototype.isExchanged=function(){return this.bShowImageExchange},t.prototype.refreshVipNode=function(){this.isResourceLoaded()&&(this.bShowGuideVip=this.context.bShowGuideVip&&1==g.default.getCopNumberValueByKey("b_guide_buy_vip")&&this.context.itemId&&this.context.itemId==u.default.ITEM_ID_GOLD,this.bShowGuideVip?(this.nodeExchange.active=!1,this.buttonClose.node.active=!0):(this.nodeExchange.active=this.bShowImageExchange,this.buttonClose.node.active=!1))},t.prototype.onMsgItemBuySuccessd=function(e){if(this.context.bDetail){e&&e.shopId==this.context.itemId&&this.closeDialog(!0)}},t.prototype.closeDialog=function(t,o){return void 0===t&&(t=!1),a(this,void 0,void 0,function(){return i(this,function(n){return e.prototype.closeDialog.call(this,t,o),[2]})})},t.prototype.onTouchButtonAch=function(e){e.isClick()},t=r([b],t)}(c.default);o.default=R,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrGoldRain":"mgrGoldRain","../../manager/mgrGuide":"mgrGuide","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrPool":"mgrPool","../../manager/mgrSdk":"mgrSdk","../../manager/mgrShop":"mgrShop","../../manager/mgrSound":"mgrSound","../../manager/mgrTip":"mgrTip","../node/vLevelBar":"vLevelBar"}],vGuideArrow:[function(e,t,o){"use strict";cc._RF.push(t,"7b093bfVUBO/oYIm4UPAvoW","vGuideArrow");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/view/ViewBase"),i=cc._decorator.ccclass,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"node/vGuideArrow"},t.prototype._getResourceBindingConfig=function(){return{}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t=r([i],t)}(a.default);o.default=s,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase"}],vGuideMask:[function(e,t,o){"use strict";cc._RF.push(t,"442b9acV/JKOp9mJ1AihuMs","vGuideMask");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/utils/Tools"),l=e("../../../ulframework/view/ViewBase"),c=e("../../Const"),u=e("../../manager/mgrDirector"),d=e("../../manager/mgrGuide"),p=e("../../manager/mgrSound"),h=cc._decorator.ccclass,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rect=null,t.maskType=c.GuideMaskType.none_passAll,t.bFadeIn=!1,t.maskSoundId=0,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vGuideMask"},t.prototype._getResourceBindingConfig=function(){return{CC_nodeLeftBottom:[cc.Node],CC_spriteBlockBottom:[cc.Sprite],CC_spriteBlockLeft:[cc.Sprite],CC_spriteBlockRight:[cc.Sprite],CC_spriteBlockTop:[cc.Sprite],CC_spriteHole:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.setMaskType=function(e,t){this.maskType=e,this.updateMask(),this.updateListeners(),this.maskSoundId=t},t.prototype.setRect=function(e){this.rect=e,this.updateMask()},t.prototype.updateListeners=function(){return a(this,void 0,void 0,function(){var e;return i(this,function(t){return e=this.maskType,s.default.unregisterTouchHandler(this.spriteHole.node),s.default.unregisterTouchHandler(this.spriteBlockLeft.node),s.default.unregisterTouchHandler(this.spriteBlockRight.node),s.default.unregisterTouchHandler(this.spriteBlockTop.node),s.default.unregisterTouchHandler(this.spriteBlockBottom.node),e==c.GuideMaskType.mask_passAll||e==c.GuideMaskType.none_passAll||(e==c.GuideMaskType.mask_blockAll||e==c.GuideMaskType.none_blockkAll?(s.default.registerTouchHandler(this.spriteHole.node,this.onTouchMask.bind(this),!0),s.default.registerTouchHandler(this.spriteBlockLeft.node,this.onTouchMask.bind(this),!0),s.default.registerTouchHandler(this.spriteBlockRight.node,this.onTouchMask.bind(this),!0),s.default.registerTouchHandler(this.spriteBlockTop.node,this.onTouchMask.bind(this),!0),s.default.registerTouchHandler(this.spriteBlockBottom.node,this.onTouchMask.bind(this),!0)):e!=c.GuideMaskType.mask_passHole&&e!=c.GuideMaskType.none_passHole||(s.default.registerTouchHandler(this.spriteBlockLeft.node,this.onTouchMask.bind(this),!0),s.default.registerTouchHandler(this.spriteBlockRight.node,this.onTouchMask.bind(this),!0),s.default.registerTouchHandler(this.spriteBlockTop.node,this.onTouchMask.bind(this),!0),s.default.registerTouchHandler(this.spriteBlockBottom.node,this.onTouchMask.bind(this),!0))),[2]})})},t.prototype.updateMask=function(){return a(this,void 0,void 0,function(){var e,t,o,n,r;return i(this,function(a){return cc.isValid(this.nodeResource)?(this.nodeResource.setContentSize(u.default.size),this.nodeLeftBottom.getComponent(cc.Widget).updateAlignment(),e=this.nodeResource.getContentSize(),t=this.rect,o=this.maskType,n=o==c.GuideMaskType.mask_blockAll||o==c.GuideMaskType.mask_passAll||o==c.GuideMaskType.mask_passHole,t?(this.spriteHole.node.x=t.x,this.spriteHole.node.y=t.y,this.spriteHole.node.setContentSize(t.size),(r=this.spriteBlockLeft.getComponent(cc.Widget)).left=0,r.right=e.width-t.x,r.top=-100,r.bottom=-100,r.updateAlignment(),(r=this.spriteBlockRight.getComponent(cc.Widget)).left=t.xMax,r.right=0,r.top=-100,r.bottom=-100,r.updateAlignment(),(r=this.spriteBlockTop.getComponent(cc.Widget)).left=t.x,r.right=e.width-t.xMax,r.top=-100,r.bottom=t.yMax,r.updateAlignment(),this.spriteBlockBottom.enabled=!0,(r=this.spriteBlockBottom.getComponent(cc.Widget)).left=t.x,r.right=e.width-t.xMax,r.top=e.height-t.y,r.bottom=-100,r.updateAlignment()):((r=this.spriteBlockLeft.getComponent(cc.Widget)).left=0,r.right=0,r.top=-100,r.bottom=-100,r.updateAlignment()),n?t?(this.spriteHole.enabled=!0,this.spriteBlockLeft.enabled=!0,this.spriteBlockRight.enabled=!0,this.spriteBlockTop.enabled=!0,this.spriteBlockBottom.enabled=!0):(this.spriteHole.enabled=!1,this.spriteBlockLeft.enabled=!0,this.spriteBlockRight.enabled=!1,this.spriteBlockTop.enabled=!1,this.spriteBlockBottom.enabled=!1):(this.spriteHole.enabled=!1,this.spriteBlockLeft.enabled=!1,this.spriteBlockRight.enabled=!1,this.spriteBlockTop.enabled=!1,this.spriteBlockBottom.enabled=!1),[2]):[2]})})},t.prototype.fadeIn=function(){return a(this,void 0,void 0,function(){var e;return i(this,function(t){return this.bFadeIn=!0,e=this.nodeLeftBottom,cc.isValid(e)?(e.opacity=0,e.stopAllActions(),e.runAction(cc.fadeIn(.3)),[2]):[2]})})},t.prototype.fadeOut=function(){return a(this,void 0,void 0,function(){var e;return i(this,function(t){return this.bFadeIn=!1,e=this.nodeLeftBottom,cc.isValid(e)?(e.stopAllActions(),e.runAction(cc.fadeOut(.3)),[2]):[2]})})},t.prototype.onTouchMask=function(e){this.onTouchNodeBg(e),e.isClick()&&this.sendMsg("MSG_GUIDE_POINT",{id:"vGuideMask.click"}),this.maskSoundId&&this.maskSoundId>0&&p.default.play(this.maskSoundId)},t.prototype.onTouchNodeBg=function(e){if("began"==e.name)this._b_drag_to_right=!0,this._turn_count=0,this._b_poped=!1;else if("moved"==e.name){var t=e.getStartLocation(),o=e.getLocation();this._b_drag_to_right?o.x<t.x-20&&(this._b_drag_to_right=!1,this._turn_count++):o.x>t.x+20&&(this._b_drag_to_right=!0,this._turn_count++),this._b_poped||this._turn_count>=40&&(d.default._debugCancelDebug(),this._b_poped=!0)}},r([l.default.requireResourceLoaded],t.prototype,"updateListeners",null),r([l.default.requireResourceLoaded],t.prototype,"updateMask",null),r([l.default.requireResourceLoaded],t.prototype,"fadeIn",null),r([l.default.requireResourceLoaded],t.prototype,"fadeOut",null),t=r([h],t)}(l.default);o.default=f,cc._RF.pop()},{"../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGuide":"mgrGuide","../../manager/mgrSound":"mgrSound"}],vGuideTip:[function(e,t,o){"use strict";cc._RF.push(t,"55dbeRreJVMgL9OUPGzlC2u","vGuideTip");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/view/ViewBase"),l=e("../../manager/mgrCfg"),c=e("../../manager/mgrPool"),u=cc._decorator.ccclass,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelContent=null,t.nodeArrow=null,t.nodeSpine=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vGuideTip"},t.prototype._getResourceBindingConfig=function(){return{CC_labelContent:[cc.Label],CC_nodeArrow:[cc.Node],CC_nodeSpine:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.spine&&(c.default.put(this.spine),this.spine.removeFromParent(),this.spine=null)},t.prototype.buildUi=function(){var e=this.context.guideId,t=this.context.step,o=l.default.get("guide_db",e,t),n=o.tipContent;this.labelContent.string=n,this.nodeArrow.active=!o.bTipArrowDisabled;var r=c.default.get("spine","jiesuanwawa");r&&(r.play("mov_1",!0),r.parent=this.nodeSpine,this.spine=r)},t.prototype.setAnchorPoint=function(e,t){return a(this,void 0,void 0,function(){return i(this,function(o){return this.nodeResource.setAnchorPoint(e,t),[2]})})},r([s.default.requireResourceLoaded],t.prototype,"setAnchorPoint",null),t=r([u],t)}(s.default);o.default=d,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrPool":"mgrPool"}],vGuideView:[function(e,t,o){"use strict";cc._RF.push(t,"2b1faf9VKRPI7N5R02SOacQ","vGuideView");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../manager/mgrCfg"),i=e("../../manager/mgrGuide"),s=e("../../manager/mgrPool"),l=e("./vGuideMask"),c=e("./vGuideTip"),u=e("./vGuideArrow"),d=e("../../../ulframework/view/ViewBase"),p=e("../../manager/mgrSound"),h=e("../../../ulframework/utils/Timer"),f=e("../../../ulframework/utils/Tools"),g=cc._decorator.ccclass,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bHide=!1,t.slideIndex=0,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.updatePos()},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.bHide||i.default.cancelGuide(),cc.isValid(this.spineClick0)&&(s.default.put(this.spineClick0),this.spineClick0.removeFromParent(),this.spineClick0=null)},t.prototype.buildUi=function(){var e=this.context.guideId,t=this.context.step,o=a.default.get("guide_db",e,t);cc.isValid(this.mask)&&(this.mask.destroy(),this.mask=null),cc.isValid(this.tip)&&(this.tip.destroy(),this.tip=null),cc.isValid(this.arrow)&&(this.arrow.destroy(),this.arrow=null),this.mask=new l.default,this.mask.parent=this,this.mask.setMaskType(o.maskType),o.tipContent&&(this.tip=new c.default({guideId:e,step:t}),this.tip.parent=this);var n=o.bFlipArrow?-1:1;if("click"==o.arrowType){var r=new cc.Node;r.parent=this,r.scaleX=n,r.rotation=o.arrowRotate,this.nodeSpine0=r;var i=s.default.get("spine","guide_click");if(i.parent=r,i.play("mov_1",!0),this.spineClick0=i,o.bDoubleNodeClickGuide){var d=new cc.Node;d.parent=this,d.scaleX=n,d.rotation=o.arrowRotate,this.nodeSpine1=d;var p=s.default.get("spine","guide_click");p.parent=d,p.play("mov_1",!0),this.spineClick1=p}}else"slide"==o.arrowType&&(this.arrow=new u.default,this.arrow.parent=this,this.arrow.scaleX=n,this.playSlideArrowAction())},t.prototype.playSlideArrowAction=function(){var e=this.context.guideId,t=this.context.step,o=a.default.get("guide_db",e,t),n=i.default.getGuideNodes(o.nodeNames);if(n.length<2)return this.arrow.destroy(),void(this.arrow=null);var r=this.slideIndex%n.length,s=n[r],l=f.default.convertRectToNodeSpace(this,f.default.calcNodeBoundingBoxToWorld(s,o.nodeExt));if(0==r)this.arrow.setPosition(l.center),this.arrow.opacity=0,this.arrow.runAction(cc.sequence(cc.fadeIn(.3),cc.callFunc(this.playSlideArrowAction.bind(this))));else if(r==n.length-1){var c=f.default.pDistance(this.arrow.position,l.center)/450;this.arrow.runAction(cc.sequence(cc.moveTo(c,l.center),cc.fadeOut(.3),cc.callFunc(this.playSlideArrowAction.bind(this))))}else{c=f.default.pDistance(this.arrow.position,l.center)/450;this.arrow.runAction(cc.sequence(cc.moveTo(c,l.center),cc.callFunc(this.playSlideArrowAction.bind(this))))}this.slideIndex++},t.prototype.show=function(){this.buildUi();var e=this.context.guideId,t=this.context.step,o=a.default.get("guide_db",e,t);(e||0).toString(),(t||0).toString();o.soundId&&p.default.play(o.soundId),this.mask&&this.mask.fadeIn(),this.arrow&&(this.arrow.stopActionByTag(1),this.arrow.opacity=0,this.arrow.runAction(cc.fadeIn(.3)).setTag(1)),this.nodeSpine0&&(this.nodeSpine0.stopActionByTag(1),this.nodeSpine0.opacity=0,this.nodeSpine0.runAction(cc.fadeIn(.3)).setTag(1)),this.nodeSpine1&&(this.nodeSpine1.stopActionByTag(1),this.nodeSpine1.opacity=0,this.nodeSpine1.runAction(cc.fadeIn(.3)).setTag(1)),this.tip&&(this.tip.stopActionByTag(1),this.tip.opacity=0,this.tip.runAction(cc.fadeIn(.3)).setTag(1))},t.prototype.hideAndRemove=function(){var e=this;this.bHide=!0,cc.isValid(this.mask)&&this.mask.fadeOut(),cc.isValid(this.arrow)&&(this.arrow.stopAllActions(),this.arrow.runAction(cc.fadeOut(.3))),cc.isValid(this.nodeSpine0)&&(this.nodeSpine0.stopAllActions(),this.nodeSpine0.runAction(cc.fadeOut(.3))),cc.isValid(this.nodeSpine1)&&(this.nodeSpine1.stopAllActions(),this.nodeSpine1.runAction(cc.fadeOut(.3))),cc.isValid(this.tip)&&(this.tip.stopAllActions(),this.tip.runAction(cc.fadeOut(.3))),h.default.callLater(.3,function(){e.destroy()},this)},t.prototype.updatePos=function(){var e=this.context.guideId,t=this.context.step,o=a.default.get("guide_db",e,t),n=this.calcNodeRect(0),r=f.default.convertRectToNodeSpace(this,n);if(this.mask&&this.mask.setRect(n),this.tip&&(r?(this.tip.setAnchorPoint(.5,.5),this.tip.x=o.tipOffset[0]||0,this.tip.y=r.center.y-100+(o.tipOffset[1]||0)):(this.tip.setAnchorPoint(.5,.5),this.tip.x=o.tipOffset[0]||0,this.tip.y=o.tipOffset[1]||0)),this.nodeSpine0&&"click"==o.arrowType&&(r&&cc.isValid(this.nodeSpine0)&&this.nodeSpine0.setPosition(r.center),o.bDoubleNodeClickGuide&&this.nodeSpine1)){var i=this.calcNodeRect(1),s=f.default.convertRectToNodeSpace(this,i);s&&cc.isValid(this.nodeSpine1)&&this.nodeSpine1.setPosition(s.center)}},t.prototype.calcNodeRect=function(e){void 0===e&&(e=0);var t=this.context.guideId,o=this.context.step,n=a.default.get("guide_db",t,o),r=n.nodeNames[e||0];if(!r)return null;var s=i.default.getGuideNode(r);return s?f.default.calcNodeBoundingBoxToWorld(s,n.nodeExt):null},t=r([g],t)}(d.default);o.default=m,cc._RF.pop()},{"../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrGuide":"mgrGuide","../../manager/mgrPool":"mgrPool","../../manager/mgrSound":"mgrSound","./vGuideArrow":"vGuideArrow","./vGuideMask":"vGuideMask","./vGuideTip":"vGuideTip"}],vHappyFiveOneDialog:[function(e,t,o){"use strict";cc._RF.push(t,"189c9hlrEBJVodMaWXVXtNK","vHappyFiveOneDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../../ulframework/component/ToggleButton"),l=e("../../manager/mgrAd"),c=e("../../../ulframework/utils/Timer"),u=e("../../manager/mgrEffect"),d=e("../../../ulframework/utils/Tools"),p=e("../node/vCommonTitleBarRmbGold"),h=e("../../../ulframework/view/ReuseList"),f=e("../../../ulframework/view/ReuseLayouterVGrid"),g=e("../node/vHappyFiveOneQuestItem"),m=e("../node/vHappyFiveOneExchangeItem"),_=e("../../manager/mgrDirector"),v=e("../../manager/mgrCfg"),y=e("../../manager/mgrHappyFiveOne"),C=e("../../manager/mgrTip"),S=e("../../manager/mgrPlayer"),b=e("../../Const"),R=e("../../struct/sAvatar"),T=e("../node/vAvatar"),A=cc._decorator,D=A.ccclass,I=(A.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.labelStarNum=null,t.nodeAvatar=null,t.nodeContentMask=null,t.nodeListExchange=null,t.nodeListQuest=null,t.nodeStar=null,t.nodeTab=null,t.nodeTitleBar=null,t.nodeUIContent=null,t.toggleButtonTab1=null,t.toggleButtonTab2=null,t.TAB_QUEST=1,t.TAB_EXCHANGE=2,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vHappyFiveOneDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_toggleButtonTab1:[s.default,"onTouchToggleButtonTab1"],CC_toggleButtonTab2:[s.default,"onTouchToggleButtonTab2"],CC_labelStarNum:[cc.Label],CC_nodeAvatar:[cc.Node],CC_nodeContentMask:[cc.Node],CC_nodeListExchange:[cc.Node],CC_nodeListQuest:[cc.Node],CC_nodeStar:[cc.Node],CC_nodeTab:[cc.Node],CC_nodeTitleBar:[cc.Node],CC_nodeUIContent:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),l.default.showViewEnterAd(this.nodeResource)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onOpenDialogCompleted=function(){var e=this;c.default.callLater(.5,function(){e.onLoadedInit()})},t.prototype.onCloseDialogStart=function(){l.default.closeBannerAd()},t.prototype.playUIActionIn=function(e){u.default.playComebackTogetherAction([this.nodeTitleBar],0,300,.6),u.default.playComebackTogetherAction([this.nodeUIContent],0,-1e3,0,.8,e)},t.prototype.onLoadedInit=function(){var e=this;this.nodeUIContent.opacity=255,new p.default({bHideEnergy:!0}).parent=this.nodeTitleBar;var t=this.nodeListQuest,o=new h.default;o.setLayouter((new f.default).setCols(1).setCellSize(240,70).setGap(4,4).setPending(0)),o.setCreator(function(t){var o=new g.default({fOnClickGo:e.onClickGo.bind(e),fOnClickReward:e.onClickReward.bind(e)});o.parent=t,t.item=o}),o.setSetter(function(e,t){e.item.fillById(t.id)}),o.parent=t,o.setContentSize(t.getContentSize()),o.setAnchorPoint(0,0),this.listHappyQuest=o,t=this.nodeListExchange,(o=new h.default).setLayouter((new f.default).setCellSize(100,126).setGap(10,10).setCols(2).setPending(0)),o.setCreator(function(e){var t=new m.default({});t.parent=e,e.item=t}),o.setSetter(function(e,t){e.item.fillByPartId(t)}),o.parent=t,o.setContentSize(t.getContentSize()),o.setAnchorPoint(0,0),this.listHappyExchange=o;var n=v.default.get("happy_five_one_config_db",1),r=v.default.get("suit_db",n.suitId);this.suitData=r;var a=new R.default,i=new T.default({structAvatar:a});i.parent=this.nodeAvatar,a.fillByPartIds(r.displayIds),i.refreshAll(),i.scale=1,this.nodeAvatar.runAction(cc.sequence(cc.delayTime(.5),cc.fadeIn(.5))),this.refreshStarAmount(),this.changeTab(this.context.focusTab||this.TAB_QUEST),this.playUIActionIn(function(){e.nodeContentMask.active=!1}),this.registerListeners({MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this),MSG_ITEM_BUY_SUCCESSED:this.onMsgItemBuySuccessd.bind(this)})},t.prototype.changeTab=function(e){var t=this.selectedTab;if(this.selectedTab=e||this.TAB_QUEST,t&&t!=this.selectedTab){var o=this["toggleButtonTab"+t],n=this["toggleButtonTab"+this.selectedTab];o.setPressStatus(!1),n.setPressStatus(!0)}else{var r=this["toggleButtonTab"+this.TAB_QUEST],a=this["toggleButtonTab"+this.TAB_EXCHANGE];r.setPressStatus(this.selectedTab==this.TAB_QUEST),a.setPressStatus(this.selectedTab==this.TAB_EXCHANGE)}this.fillList(),this.refreshBadge()},t.prototype.fillList=function(){var e=[];if(this.selectedTab==this.TAB_QUEST){var t=y.default.getDailyQuestArr();for(var o in t){var n=t[o];e.push({id:n.id,order:n.state==b.QuestState.finished?-1:n.state})}e=d.default.sortArrayByField(e,["order"]),this.listHappyQuest.setDatas(e)}else e=this.suitData.displayIds,this.listHappyExchange.setDatas(e);this.listHappyQuest.x=this.selectedTab!=this.TAB_QUEST?1e4:0,this.listHappyExchange.x=this.selectedTab!=this.TAB_EXCHANGE?1e4:0,this.nodeListQuest.opacity=this.selectedTab!=this.TAB_QUEST?0:255,this.nodeListExchange.opacity=this.selectedTab!=this.TAB_EXCHANGE?0:255},t.prototype.refreshStarAmount=function(){this.labelStarNum.string=ul.format("%s",S.default.getItemAmount(b.default.ITEM_ID_HAPPY_FIVE_ONE_EXCHANGE_ITEM))},t.prototype.refreshBadge=function(){var e=y.default.getFinishedCount();if(C.default.setBadgeEnabled(this.toggleButtonTab1.node,e>0,-50,-30),this.suitData){var t=!1;e=S.default.getItemAmount(b.default.ITEM_ID_HAPPY_FIVE_ONE_EXCHANGE_ITEM);for(var o in this.suitData.displayIds){var n=this.suitData.displayIds[o];if(S.default.getItemAmount(n)<=0){var r=v.default.get("shop_template_db",n);if(r&&r.priceUnit==b.default.ITEM_ID_HAPPY_FIVE_ONE_EXCHANGE_ITEM&&e>=r.price){t=e>0;break}}}C.default.setBadgeEnabled(this.toggleButtonTab2.node,t,-50,-30)}},t.prototype.onClickGo=function(e){cc.log("-----questId=",e);var t,o,n=v.default.get("happy_five_one_quest_db",e);t=n.viewName,o=n.subViewName&&""!=n.subViewName?n.subViewName:null,"vHudDialog"==t?o?(_.default.warpDialogWithSmallEffect(o),this.closeDialog(!0)):this.closeDialog():_.default.warpDialogWithEffect(t,{gotoNextDialogName:o})},t.prototype.onClickReward=function(e,t){var o=this,n=y.default.receiveDailyQuest(e);if(n&&n[0]){var r=n[2],a=n[3];S.default.addItemAmount(r,a,"\u4e94\u4e00\u4efb\u52a1\u5956\u52b1"),C.default.addGotItemTip(r,a),c.default.callLater(.5,function(){o.fillList()})}else n&&n[1]&&C.default.showMsgTip(ul.format("%s",n[1]))},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchToggleButtonTab1=function(e){e.isClick()&&this.changeTab(1)},t.prototype.onTouchToggleButtonTab2=function(e){e.isClick()&&this.changeTab(2)},t.prototype.onMsgItemAmountChanged=function(e){this.refreshStarAmount(),this.refreshBadge()},t.prototype.onMsgItemBuySuccessd=function(e){this.fillList()},t.prototype.isClickShadowClose=function(){return!1},t=r([D],t)}(i.default));o.default=I,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/component/ToggleButton":"ToggleButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../../ulframework/view/ReuseLayouterVGrid":"ReuseLayouterVGrid","../../../ulframework/view/ReuseList":"ReuseList","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDirector":"mgrDirector","../../manager/mgrEffect":"mgrEffect","../../manager/mgrHappyFiveOne":"mgrHappyFiveOne","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrTip":"mgrTip","../../struct/sAvatar":"sAvatar","../node/vAvatar":"vAvatar","../node/vCommonTitleBarRmbGold":"vCommonTitleBarRmbGold","../node/vHappyFiveOneExchangeItem":"vHappyFiveOneExchangeItem","../node/vHappyFiveOneQuestItem":"vHappyFiveOneQuestItem"}],vHappyFiveOneExchangeItem:[function(e,t,o){"use strict";cc._RF.push(t,"82b7b7e5ydFMb6zXcLPftfA","vHappyFiveOneExchangeItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrCfg"),l=e("../../manager/mgrPlayer"),c=e("../../manager/mgrTip"),u=e("../../Const"),d=cc._decorator,p=d.ccclass,h=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBg=null,t.labelPrice=null,t.nodeOwned=null,t.nodePrice=null,t.spriteBg=null,t.spriteIcon=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vHappyFiveOneExchangeItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBg:[a.default,"onTouchButtonBg"],CC_labelPrice:[cc.Label],CC_nodeOwned:[cc.Node],CC_nodePrice:[cc.Node],CC_spriteBg:[cc.Sprite],CC_spriteIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){},t.prototype.fillByPartId=function(e){this.context.partId=e;var t=s.default.get("cosmetic_part_db",e);t&&t.icon&&this.spriteIcon.loadSpriteFrameAndKeepSize(t.icon),this.nodeOwned.active=l.default.getItemAmount(e)>0,this.nodePrice.active=!this.nodeOwned.active;var o=s.default.get("shop_template_db",e),n=!1;this.nodeOwned.active||o&&(this.labelPrice.string=ul.format("%s",o.price||0),n=l.default.getItemAmount(u.default.ITEM_ID_HAPPY_FIVE_ONE_EXCHANGE_ITEM)>=(o.price||0)),this.labelPrice.node.opacity=o?255:0,c.default.setBadgeEnabled(this.buttonBg.node,n,-40,-46)},t.prototype.onTouchButtonBg=function(e){e.isClick()&&this.context.partId&&c.default.showItemDetailDialog(this.context.partId,1,{bCanBuy:!0,reason:"\u70b9\u51fb_51\u6d3b\u52a8\u754c\u9762\u8d2d\u4e70\u90e8\u4ef6"})},r([i.default.requireResourceLoaded],t.prototype,"fillByPartId",null),t=r([p],t)}(i.default));o.default=h,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrCfg":"mgrCfg","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrTip":"mgrTip"}],vHappyFiveOneQuestItem:[function(e,t,o){"use strict";cc._RF.push(t,"509d2r24tNIpZVsnm2OZSc1","vHappyFiveOneQuestItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrCfg"),l=e("../../manager/mgrHappyFiveOne"),c=e("../../manager/mgrPlayer"),u=e("../../Const"),d=e("../../manager/mgrTip"),p=cc._decorator,h=p.ccclass,f=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonGo=null,t.buttonReward=null,t.labelPowerAmount=null,t.labelProgressFinish=null,t.labelProgressNormal=null,t.labelRewardAmount=null,t.labelTitle=null,t.nodeBg=null,t.nodePower=null,t.nodeReceived=null,t.nodeRewardAmount=null,t.spriteRewardUnit=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vHappyFiveOneQuestItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonGo:[a.default,"onTouchButtonGo"],CC_buttonReward:[a.default,"onTouchButtonReward"],CC_labelPowerAmount:[cc.Label],CC_labelProgressFinish:[cc.Label],CC_labelProgressNormal:[cc.Label],CC_labelRewardAmount:[cc.Label],CC_labelTitle:[cc.Label],CC_nodeBg:[cc.Node],CC_nodePower:[cc.Node],CC_nodeReceived:[cc.Node],CC_nodeRewardAmount:[cc.Node],CC_spriteRewardUnit:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.registerListeners({MSG_DAILY_QUEST_STATUS_CHANGED:this.onMsgDailyQuestStatusChanged.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillById=function(e){this.questId=e;var t=l.default.getDailyQuest(this.questId),o=s.default.get("happy_five_one_quest_db",this.questId);this.labelPowerAmount.string=ul.format("%s",o.rewardItemAmount||0),this.labelTitle.string=o.desc;var n=t.state>=u.QuestState.finished?o.targetItemAmount||1:c.default.getItemDailyGotAmount(o.checkItemId);this.labelProgressNormal.node.opacity=0,this.labelProgressFinish.node.opacity=0,this.labelProgressNormal.string=ul.format("%s/%s",c.default.getItemAmountStr(Math.min(n,o.targetItemAmount||1)),c.default.getItemAmountStr(o.targetItemAmount||1)),this.labelProgressFinish.string=ul.format("%s/%s",c.default.getItemAmountStr(Math.min(n,o.targetItemAmount||1)),c.default.getItemAmountStr(o.targetItemAmount||1)),this.buttonGo.node.active=!1,this.buttonReward.node.active=!1,this.nodeReceived.active=!1,d.default.setBadgeEnabled(this.buttonReward.node,t.state==u.QuestState.finished,-50,-20),t.state==u.QuestState.normal?(this.buttonGo.node.active=!0,this.labelProgressNormal.node.opacity=255):t.state==u.QuestState.finished?(this.buttonReward.node.active=!0,this.labelProgressFinish.node.opacity=255):(this.nodeReceived.active=!0,this.labelProgressFinish.node.opacity=255)},t.prototype.tryActionRewardButton=function(){this.buttonReward&&this.buttonReward.node&&cc.isValid(this.buttonReward.node)&&this.buttonReward.node.active&&this.buttonReward.node.runAction(cc.sequence(cc.scaleTo(.2,1.3,1.3),cc.scaleTo(.2,1,1)))},t.prototype.onTouchButtonGo=function(e){e.isClick()&&this.context.fOnClickGo&&this.context.fOnClickGo(this.questId)},t.prototype.onTouchButtonReward=function(e){if(e.isClick()){this.sendMsg("MSG_GUIDE_POINT",{id:"vHappyFiveOneQuestItem.buttonReward.click"});var t=this.nodePower.parent.convertToWorldSpaceAR(this.nodePower.position);this.context.fOnClickReward&&this.context.fOnClickReward(this.questId,t)}},t.prototype.onMsgDailyQuestStatusChanged=function(e){e.id==this.questId&&this.fillById(this.questId)},r([i.default.requireResourceLoaded],t.prototype,"fillById",null),t=r([h],t)}(i.default));o.default=f,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrCfg":"mgrCfg","../../manager/mgrHappyFiveOne":"mgrHappyFiveOne","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrTip":"mgrTip"}],vHudDialog:[function(e,t,o){"use strict";cc._RF.push(t,"259eb77ljtJJZQNIiTCwlPu","vHudDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/utils/Tools"),s=e("../../../ulframework/view/DialogBase"),l=e("../../Const"),c=e("../../manager/mgrAd"),u=e("../../manager/mgrDailyQuest"),d=e("../../manager/mgrDirector"),p=e("../../manager/mgrEffect"),h=e("../../manager/mgrGuide"),f=e("../../manager/mgrOnline"),g=e("../../manager/mgrPlayer"),m=e("../../manager/mgrPool"),_=e("../../manager/mgrSdk"),v=e("../../manager/mgrSign"),y=e("../../manager/mgrSound"),C=e("../../manager/mgrStage"),S=e("../../manager/mgrTip"),b=e("../node/vHudJumpGameNode"),R=e("../../manager/mgrEmployee"),T=e("../node/vHudStaffUnit"),A=e("../node/vEventNpc"),D=e("../node/vShoper"),I=e("../../manager/mgrBuildingStore"),w=e("../../manager/mgrDebug"),L=e("../node/vOrderIcon"),P=e("../../../ulframework/utils/Timer"),k=e("../../manager/mgrAchievement"),E=e("../../../ulframework/view/ViewBase"),N=e("../../manager/mgrOfflinePvp"),O=e("./vPromptOpenStoreDialog"),M=e("../node/vCommonTitleBarRmbGold"),B=e("../../manager/mgrChannel"),U=e("./vPromptHudCrazyDialog"),x=e("../../manager/mgrPkMirror"),G=e("../../manager/mgrNative"),F=e("../node/vItemAmountNode"),V=e("../../manager/mgrOpNcov"),j=e("../node/vJumpOtherGameSidebarItem"),H=e("../../manager/mgrHappyFiveOne"),K=e("../../manager/mgrVideoRecorder"),z=e("../../manager/mgrOpMidAutumnLottery"),W=e("../../manager/mgrI18n"),q=cc._decorator.ccclass,Y=function(e){function t(){var t,o=null!==e&&e.apply(this,arguments)||this;return o.speededCount=0,o.lastPopFlowerPowerTime=0,o.popedFlowerPowerNum=0,o.speedProgressPercent=0,o.nodeStreetHolders=[],o.nodeHolderNpcs=[],o.staffId2UnitDict={},o.npcUnits=[],o.shoperUnit=[],o.lastClickSpeedTime=0,o.lastRandomAddStaffTime=0,o.addedShoperNum=0,o.lastOperationTime=0,o.lastFromGenHolderToShopTime=0,o.circlePosIndex2ArrDict={},o.canRandomData=[],o.poolItemAmountNodeArr=[],o.nodePowerFlyIconArr=[],o.button51Happy=null,o.buttonAdH5=null,o.buttonAddShortCut=null,o.buttonBuildingStore=null,o.buttonDailyQuest=null,o.buttonDesign=null,o.buttonDoubleSpeed=null,o.buttonFindMeBaidu=null,o.buttonFindMeDouyin=null,o.buttonFindMeToutiao=null,o.buttonFindMeWeiXin=null,o.buttonFreeGold=null,o.buttonFreeRmb=null,o.buttonJumpOtherGame2=null,o.buttonMall=null,o.buttonMidAutumnLottery=null,o.buttonMiniGameDouyin=null,o.buttonMoreGame=null,o.buttonMoreGameBox=null,o.buttonMoreWonderful=null,o.buttonNotice=null,o.buttonOpNcov=null,o.buttonPkMirror=null,o.buttonPvp=null,o.buttonRank=null,o.buttonSetting=null,o.buttonShare=null,o.buttonSharebak=null,o.buttonShop=null,o.buttonShortCutDouyin=null,o.buttonSign=null,o.buttonSpeed=null,o.buttonSuit=null,o.buttonVideoRecorder=null,o.buttonWelfare=null,o.buttonWish=null,o.labelBuildingStoreOrder=null,o.labelDoubleSpeedLeftTime=null,o.labelRmbCount=null,o.labelVideoRecordRewardTips=null,o.node51HappyBadge=null,o.nodeBaiduMoreGame1=null,o.nodeBaiduMoreGame2=null,o.nodeBuildingHouse1=null,o.nodeBuildingHouse2=null,o.nodeBuildingHouse3=null,o.nodeBuildingHouse4=null,o.nodeBuildingRank=null,o.nodeBuildingShop1=null,o.nodeBuildingShop2=null,o.nodeBuildingStore=null,o.nodeBuildingStoreLight=null,o.nodeBuildingStoreOrder=null,o.nodeButtonSpeedLight=null,o.nodeButtonSpeedSun=null,o.nodeDouble=null,o.nodeDoublePop1=null,o.nodeDoublePop2=null,o.nodeDoublePop3=null,o.nodeFindedMe=null,o.nodeFrontContent=null,o.nodeHudUI=null,o.nodeHudUIRoot=null,o.nodeJumpGame=null,o.nodeLayoutContent=null,o.nodeLeftDown=null,o.nodeLeftTop=null,o.nodeLeftTop2=null,o.nodeMall=null,o.nodeMallLight=null,o.nodeMap=null,o.nodeMask=null,o.nodeNpc1=null,o.nodeNpc2=null,o.nodeNpc3=null,o.nodeNpc4=null,o.nodeParticle=null,o.nodeRightBottom=null,o.nodeRightDown=null,o.nodeRightTop=null,o.nodeRightTop2=null,o.nodeShare=null,o.nodeSharePop1=null,o.nodeSharePop2=null,o.nodeSharePop3=null,o.nodeShop=null,o.nodeShoperEnterMapStartHolder1=null,o.nodeShoperEnterMapStartHolder2=null,o.nodeShoperEnterMapStartHolder3=null,o.nodeSideBarMask=null,o.nodeSpeedShine=null,o.nodeStreetBuildingHolder11_12=null,o.nodeStreetBuildingHolder12_13=null,o.nodeStreetBuildingHolder19_20=null,o.nodeStreetBuildingHolder20_21=null,o.nodeStreetBuildingHolder3_4=null,o.nodeStreetBuildingHolder5_6=null,o.nodeStreetBuildingHolder6_7=null,o.nodeStreetBuildingHolder8_9=null,o.nodeStreetBuildingHolder9_10=null,o.nodeStreetHolder1=null,o.nodeStreetHolder10=null,o.nodeStreetHolder11=null,o.nodeStreetHolder12=null,o.nodeStreetHolder13=null,o.nodeStreetHolder14=null,o.nodeStreetHolder15=null,o.nodeStreetHolder16=null,o.nodeStreetHolder17=null,o.nodeStreetHolder18=null,o.nodeStreetHolder19=null,o.nodeStreetHolder2=null,o.nodeStreetHolder20=null,o.nodeStreetHolder21=null,o.nodeStreetHolder3=null,o.nodeStreetHolder4=null,o.nodeStreetHolder5=null,o.nodeStreetHolder6=null,o.nodeStreetHolder7=null,o.nodeStreetHolder8=null,o.nodeStreetHolder9=null,o.nodeSun=null,o.nodeSunMoveHolder1=null,o.nodeSunMoveHolder2=null,o.nodeTitleBar=null,o.nodeTouTiaoMoreGame=null,o.nodeVideoRecordRewardTips=null,o.nodeWater4399=null,o.progressBarSpeed=null,o.spriteArt05MidAutumn=null,o.spriteArt05Normal=null,o.spriteBgMap=null,o.spriteBuildingHouse1MidAutumn=null,o.spriteBuildingHouse1Normal=null,o.spriteBuildingHouse2MidAutumn=null,o.spriteBuildingHouse2Normal=null,o.spriteBuildingHouse3MidAutumn=null,o.spriteBuildingHouse3Normal=null,o.spriteBuildingHouse4MidAutumn=null,o.spriteBuildingHouse4Normal=null,o.spriteButtonVideoRecorder=null,o.spriteFinger=null,o.spriteMidAutumnBg=null,o.spriteNormalBg=null,o.spriteViodeRecordRewardTips=null,o.SPEED_FULL_COUNT=50,o.PER_POP_FLOWER_POWER_GAP=.4,o.MAX_POP_FLOWER_POWER_TIME=15,o.SPEED_PROGRESS_CHANGE_STEP=.003,o.TEMP_SPEED_LAST_TIME=.5,o.POP_POWER_ADD_STAFF_GAP_TIME=5,o.SPEED_COUNT_ADD_STAFF_DICT=((t={})[3]=!0,t[8]=!0,t),o.RATIO_GEN_SHOPER_POPING=100,o.RATIO_GEN_SHOPER_NORMAL=60,o.AD_POP_SUNSHINE_MORE_TIME_NAME="video_hud_pop_sunshine_more_time",o.AD_VIDEO_DOUBLE_EMPLOYEE_FOOT_REWARD_NAME="video_double_employee_foot_reward",o.AD_VIDEO_FREE_GOLD_NAME="video_free_gold_name",o.AD_VIDEO_ADD_ORDER="video_add_order",o.STAFF_SPEED_MOVE_FPS_SCALE=5,o.PER_UNIT_LEAFLET_TIME_GAP=5,o.ACTION_TAG_LEAFLET=998,o.ACTION_TAG_RUN=999,o.SHOPER_MOVE_TO_SHOP_FPS=150,o.SHOPER_MOVE_TO_SHOPER_HOLDER_FPS=80,o.STAFF_UNIT_INIT_SCALE=.7,o.NPC_UNIT_INIT_SCALE=.7,o.SHOPER_UNIT_INIT_SCALE=.35,o.SHOPER_STATUS_GENING=1,o.SHOPER_STATUS_STANDING=2,o.SHOPER_STATUS_ENTERING=3,o.INIT_STAFF_NUM=2,o.NOT_POP_FLOWER_MAP_SHOPER_NUM=2,o.ON_POP_FLOWER_MAP_SHOPER_NUM=4,o.ON_POP_FLOWER_MAP_EMPLOYEE_NUM=4,o.SHOPER_TO_SHOP_HOLDER_WORD_ARR=["\u51fa\u6765\u901b\u901b\u8857","\u60f3\u597d\u597d\u73a9\u4e0b","\u5929\u6c14\u771f\u597d","\u53f6\u7f57\u4e3d\u5a03\u5a03?","\u5728\u54ea\u4e70\u5a03\u5a03?"],o.SHOPER_TO_SHOP_WORD_ARR=["\u8d70,\u53bb\u770b\u770b","\u597d\u671f\u5f85\u5440","\u53f6\u7f57\u4e3d\u5a03\u5a03?","\u6211\u4e5f\u597d\u60f3\u8981\u554a\uff01","\u5feb\u5feb\u5feb\uff01","\u5a03\u5a03\u5e97\u8425\u4e1a\u5566"],o.AD_INTER_VIEW_NAME="inter_hud_dialog",o.nodeJumpOtherGameSideBar=null,o.bHideumpOtherGameSideBar=!0,o}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vHudDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button51Happy:[a.default,"onTouchButton51Happy"],CC_buttonAdH5:[a.default,"onTouchButtonAdH5"],CC_buttonAddShortCut:[a.default,"onTouchButtonAddShortCut"],CC_buttonBuildingStore:[a.default,"onTouchButtonBuildingStore"],CC_buttonDailyQuest:[a.default,"onTouchButtonDailyQuest"],CC_buttonDesign:[a.default,"onTouchButtonDesign"],CC_buttonDoubleSpeed:[a.default,"onTouchButtonDoubleSpeed"],CC_buttonFindMeBaidu:[a.default,"onTouchButtonFindMeBaidu"],CC_buttonFindMeDouyin:[a.default,"onTouchButtonFindMeDouyin"],CC_buttonFindMeToutiao:[a.default,"onTouchButtonFindMeToutiao"],CC_buttonFindMeWeiXin:[a.default,"onTouchButtonFindMeWeiXin"],CC_buttonFreeGold:[a.default,"onTouchButtonFreeGold"],CC_buttonFreeRmb:[a.default,"onTouchButtonFreeRmb"],CC_buttonJumpOtherGame2:[a.default,"onTouchButtonJumpOtherGame2"],CC_buttonMall:[a.default,"onTouchButtonMall"],CC_buttonMidAutumnLottery:[a.default,"onTouchButtonMidAutumnLottery"],CC_buttonMiniGameDouyin:[a.default,"onTouchButtonMiniGameDouyin"],CC_buttonMoreGame:[a.default,"onTouchButtonMoreGame"],CC_buttonMoreGameBox:[a.default,"onTouchButtonMoreGameBox"],CC_buttonMoreWonderful:[a.default,"onTouchButtonMoreWonderful"],CC_buttonNotice:[a.default,"onTouchButtonNotice"],CC_buttonOpNcov:[a.default,"onTouchButtonOpNcov"],CC_buttonPkMirror:[a.default,"onTouchButtonPkMirror"],CC_buttonPvp:[a.default,"onTouchButtonPvp"],CC_buttonRank:[a.default,"onTouchButtonRank"],CC_buttonSetting:[a.default,"onTouchButtonSetting"],CC_buttonShare:[a.default,"onTouchButtonShare"],CC_buttonSharebak:[a.default,"onTouchButtonSharebak"],CC_buttonShop:[a.default,"onTouchButtonShop"],CC_buttonShortCutDouyin:[a.default,"onTouchButtonShortCutDouyin"],CC_buttonSign:[a.default,"onTouchButtonSign"],CC_buttonSpeed:[a.default,"onTouchButtonSpeed"],CC_buttonSuit:[a.default,"onTouchButtonSuit"],CC_buttonVideoRecorder:[a.default,"onTouchButtonVideoRecorder"],CC_buttonWelfare:[a.default,"onTouchButtonWelfare"],CC_buttonWish:[a.default,"onTouchButtonWish"],CC_labelBuildingStoreOrder:[cc.Label],CC_labelDoubleSpeedLeftTime:[cc.Label],CC_labelRmbCount:[cc.Label],CC_labelVideoRecordRewardTips:[cc.Label],CC_node51HappyBadge:[cc.Node],CC_nodeBaiduMoreGame1:[cc.Node],CC_nodeBaiduMoreGame2:[cc.Node],CC_nodeBuildingHouse1:[cc.Node],CC_nodeBuildingHouse2:[cc.Node],CC_nodeBuildingHouse3:[cc.Node],CC_nodeBuildingHouse4:[cc.Node],CC_nodeBuildingRank:[cc.Node],CC_nodeBuildingShop1:[cc.Node],CC_nodeBuildingShop2:[cc.Node],CC_nodeBuildingStore:[cc.Node],CC_nodeBuildingStoreLight:[cc.Node],CC_nodeBuildingStoreOrder:[cc.Node],CC_nodeButtonSpeedLight:[cc.Node],CC_nodeButtonSpeedSun:[cc.Node],CC_nodeDouble:[cc.Node],CC_nodeDoublePop1:[cc.Node],CC_nodeDoublePop2:[cc.Node],CC_nodeDoublePop3:[cc.Node],CC_nodeFindedMe:[cc.Node],CC_nodeFrontContent:[cc.Node],CC_nodeHudUI:[cc.Node],CC_nodeHudUIRoot:[cc.Node],CC_nodeJumpGame:[cc.Node],CC_nodeLayoutContent:[cc.Node],CC_nodeLeftDown:[cc.Node],CC_nodeLeftTop:[cc.Node],CC_nodeLeftTop2:[cc.Node],CC_nodeMall:[cc.Node],CC_nodeMallLight:[cc.Node],CC_nodeMap:[cc.Node],CC_nodeMask:[cc.Node],CC_nodeNpc1:[cc.Node],CC_nodeNpc2:[cc.Node],CC_nodeNpc3:[cc.Node],CC_nodeNpc4:[cc.Node],CC_nodeParticle:[cc.Node],CC_nodeRightBottom:[cc.Node],CC_nodeRightDown:[cc.Node],CC_nodeRightTop:[cc.Node],CC_nodeRightTop2:[cc.Node],CC_nodeShare:[cc.Node],CC_nodeSharePop1:[cc.Node],CC_nodeSharePop2:[cc.Node],CC_nodeSharePop3:[cc.Node],CC_nodeShop:[cc.Node],CC_nodeShoperEnterMapStartHolder1:[cc.Node],CC_nodeShoperEnterMapStartHolder2:[cc.Node],CC_nodeShoperEnterMapStartHolder3:[cc.Node],CC_nodeSideBarMask:[cc.Node],CC_nodeSpeedShine:[cc.Node],CC_nodeStreetBuildingHolder11_12:[cc.Node],CC_nodeStreetBuildingHolder12_13:[cc.Node],CC_nodeStreetBuildingHolder19_20:[cc.Node],CC_nodeStreetBuildingHolder20_21:[cc.Node],CC_nodeStreetBuildingHolder3_4:[cc.Node],CC_nodeStreetBuildingHolder5_6:[cc.Node],CC_nodeStreetBuildingHolder6_7:[cc.Node],CC_nodeStreetBuildingHolder8_9:[cc.Node],CC_nodeStreetBuildingHolder9_10:[cc.Node],CC_nodeStreetHolder1:[cc.Node],CC_nodeStreetHolder10:[cc.Node],CC_nodeStreetHolder11:[cc.Node],CC_nodeStreetHolder12:[cc.Node],CC_nodeStreetHolder13:[cc.Node],CC_nodeStreetHolder14:[cc.Node],CC_nodeStreetHolder15:[cc.Node],CC_nodeStreetHolder16:[cc.Node],CC_nodeStreetHolder17:[cc.Node],CC_nodeStreetHolder18:[cc.Node],CC_nodeStreetHolder19:[cc.Node],CC_nodeStreetHolder2:[cc.Node],CC_nodeStreetHolder20:[cc.Node],CC_nodeStreetHolder21:[cc.Node],CC_nodeStreetHolder3:[cc.Node],CC_nodeStreetHolder4:[cc.Node],CC_nodeStreetHolder5:[cc.Node],CC_nodeStreetHolder6:[cc.Node],CC_nodeStreetHolder7:[cc.Node],CC_nodeStreetHolder8:[cc.Node],CC_nodeStreetHolder9:[cc.Node],CC_nodeSun:[cc.Node],CC_nodeSunMoveHolder1:[cc.Node],CC_nodeSunMoveHolder2:[cc.Node],CC_nodeTitleBar:[cc.Node],CC_nodeTouTiaoMoreGame:[cc.Node],CC_nodeVideoRecordRewardTips:[cc.Node],CC_nodeWater4399:[cc.Node],CC_progressBarSpeed:[cc.ProgressBar],CC_spriteArt05MidAutumn:[cc.Sprite],CC_spriteArt05Normal:[cc.Sprite],CC_spriteBgMap:[cc.Sprite],CC_spriteBuildingHouse1MidAutumn:[cc.Sprite],CC_spriteBuildingHouse1Normal:[cc.Sprite],CC_spriteBuildingHouse2MidAutumn:[cc.Sprite],CC_spriteBuildingHouse2Normal:[cc.Sprite],CC_spriteBuildingHouse3MidAutumn:[cc.Sprite],CC_spriteBuildingHouse3Normal:[cc.Sprite],CC_spriteBuildingHouse4MidAutumn:[cc.Sprite],CC_spriteBuildingHouse4Normal:[cc.Sprite],CC_spriteButtonVideoRecorder:[cc.Sprite],CC_spriteFinger:[cc.Sprite],CC_spriteMidAutumnBg:[cc.Sprite],CC_spriteNormalBg:[cc.Sprite],CC_spriteViodeRecordRewardTips:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(d.default.size),this.setContentSize(d.default.size),this.refreshBuildOrderData(),_.default.getShortcutState(),P.default.callLoop(.5,this.updateVideoRecordBtnImgs.bind(this),this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){if(e.prototype.update.call(this,t),this.isResourceLoaded())try{this.onEnterFrame(t)}catch(e){}},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),cc.log("----huddialog destroy"),_.default.closeCrossRecommend(),this.animNode&&(this.animNode.removeFromParent(),m.default.put(this.animNode),this.animNode=null)},t.prototype.onOpenDialogCompleted=function(){(this.onLoadedInit(),this.preloadOtherRes(),c.default.isBannerAdValid()&&c.default.isFullGameBanner())?(this.nodeHudUI.getComponent(cc.Widget).bottom=c.default.getBannerHeight(),this.context.bFromSplash?c.default.showBannerAd(this.nodeResource,"ad_banner_hud_dialog"):c.default.showViewEnterAd(this.nodeResource,null,this.AD_INTER_VIEW_NAME,"ad_banner_hud_dialog")):this.context.bFromSplash||(c.default.closeBannerAd(),c.default.showIntAd("\u4e3b\u754c\u9762",this.AD_INTER_VIEW_NAME))},t.prototype.sunStartPopFlowerAction=function(){var e=this;this.nodeMask.active=!0;var t=this.nodeSunMoveHolder1,o=t.parent.convertToWorldSpaceAR(t.position),n=this.buttonSpeed.node.parent.convertToNodeSpaceAR(o);o=(t=this.nodeSunMoveHolder2).parent.convertToWorldSpaceAR(t.position);var r=this.buttonSpeed.node.parent.convertToNodeSpaceAR(o);this.buttonSpeed.node.stopAllActions(),this.buttonSpeed.node.runAction(cc.sequence(cc.spawn(cc.moveTo(.1,n),cc.scaleTo(.1,1.3,1.3)),cc.moveTo(1,r),cc.callFunc(function(){e.buttonSpeed.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.4,1.4),cc.scaleTo(.6,1.2,1.2),cc.scaleTo(.3,1.3,1.3))))}))),this.nodeButtonSpeedLight.active=!0,this.nodeButtonSpeedLight.runAction(cc.repeatForever(cc.rotateBy(4,360))),this.bDisableLayoutButtons=!0,this.playSunPopPowerActionOut()},t.prototype.sunStopPopFlowerAction=function(){this.nodeMask.active=!1,this.buttonSpeed.node.stopAllActions(),this.buttonSpeed.node.runAction(cc.spawn(cc.moveTo(.05,this.buttonSpeed.node._originPos),cc.scaleTo(.05,1,1))),this.nodeButtonSpeedLight.stopAllActions(),this.nodeButtonSpeedLight.active=!1,this.playSunPopPowerActionIn(),this.bDisableLayoutButtons=!1,this.layoutButtons()},t.prototype.onEnterFrame=function(e){this.tryUpdateNodeZIndex(),this.bCompleteActionIn?(this.trySpeedUnits(),this.tryMoveStaff(e),this.bStartPopFlowerPower||this.tryAllStaffRunMap(),this.trySyncSunProgress()):this.lastOperationTime=i.default.time()},t.prototype.onTimerHandler=function(){this.isResourceLoaded()&&this.bCompleteActionIn&&(this.tryShoperEnterMap(),this.tryShowNodePop(),this.updateUIInfo(),this.tryReceiveNoPopFootReward())},t.prototype.tryTipGuidePlay=function(){var e=this;if(s.default.GLOBAL_DIALOG_COUNT>=2)this.lastOperationTime=i.default.time();else if(i.default.time()-this.lastOperationTime>30&&!h.default.isGuiding()&&!this.bShowedNoOpGuide){this.bShowedNoOpGuide=!0;var t=[{tipStr:"\u53f6\u7f57\u4e3d\u9080\u8bf7\u60a8\u4f53\u9a8c\u3010\u5bf9\u6218\u3011\uff0c\u70b9\u51fb\u540e\u8fdb\u5165\u64c2\u53f0\u754c\u9762",func:function(){d.default.warpDialogWithEffect("vPkMirrorDialog")}},{tipStr:"\u53f6\u7f57\u4e3d\u9080\u8bf7\u60a8\u4f53\u9a8c\u3010\u5546\u5e97\u8425\u4e1a\u3011\uff0c\u70b9\u51fb\u540e\u8fdb\u5165\u5546\u5e97\u754c\u9762",func:function(){d.default.warpDialogWithEffect("vBuildingStoreDialog")}}],o=t[i.default.random(0,t.length-1)];S.default.alertPrompt2("\u63d0\u793a",o.tipStr,"\u53d6\u6d88","\u8fdb\u5165",function(){e.bShowedNoOpGuide=!1},function(){e.bShowedNoOpGuide=!1,o.func()},"ad_banner_invite_experience_dialog")}},t.prototype.tryReceiveNoPopFootReward=function(){if(!this.bStartPopFlowerPower)for(var e in this.staffId2UnitDict){var t=this.staffId2UnitDict[e],o=t.lastReceiveNoPopFootRewardTime||0;if(!o||i.default.time()>o){if(t.lastReceiveNoPopFootRewardTime=i.default.time()+i.default.random(4,10),!o)continue;var n=t.parent.convertToWorldSpaceAR(t.position);this.receiveFootReward(n)}}},t.prototype.updateUIInfo=function(){var e=R.default.getDoubleFootRewardLeftTime();this.labelDoubleSpeedLeftTime.string=ul.format("%s",g.default.getFormatedTimeStr(e)),this.labelDoubleSpeedLeftTime.node.opacity=e?255:0},t.prototype.trySyncSunProgress=function(){if(this.progressBarSpeed.progress!=this.speedProgressPercent){var e=0;if(this.progressBarSpeed.progress>this.speedProgressPercent)if(1==this.progressBarSpeed.progress&&this.speedProgressPercent>.9)e=1;else e=(t=this.progressBarSpeed.progress-this.SPEED_PROGRESS_CHANGE_STEP)<this.speedProgressPercent?this.speedProgressPercent:t;else if(this.speedProgressPercent>.9)e=this.speedProgressPercent;else{var t;e=(t=this.progressBarSpeed.progress+this.SPEED_PROGRESS_CHANGE_STEP)>this.speedProgressPercent?this.speedProgressPercent:t}this.progressBarSpeed.progress=e}},t.prototype.tryShowNodePop=function(){g.default.getItemAmount(l.default.ITEM_ID_AVATAR_ORDER)>=g.default.getItemAmount(l.default.ITEM_ID_MAX_AVATAR_ORDER)?this.showNodePop("nodeBuildingStore",0):this.stopNodePop("nodeBuildingStore")},t.prototype.trySpeedUnits=function(){var e=this;if(this.bStartPopFlowerPower){if(this.buttonSpeed.setActionEnable(!1),this.tryAllStaffRunMap(),!this.popFlowerPowerStartTime){this.popFlowerPowerStartTime=i.default.time(),this.lastPlayPetSoundTime=i.default.time(),this.sunStartPopFlowerAction();var t=m.default.get("animNode","70_bao");t&&t.runAction(cc.sequence(cc.delayTime(2*i.default.random()),cc.callFunc(function(){t.parent=e.buttonSpeed.node,t.play(),t.registerEventCallback(function(e){"finished"==e.name&&(t.removeFromParent(),m.default.put(t),t=null)})})))}var o=this.bDoublePopFlowerPower?2*this.MAX_POP_FLOWER_POWER_TIME:this.MAX_POP_FLOWER_POWER_TIME;if(i.default.time()-this.popFlowerPowerStartTime>=o&&(this.bStartPopFlowerPower=!1,this.popFlowerPowerStartTime=0,this.speedProgressPercent=0,this.nodeButtonSpeedSun.rotation=0,this.bDoublePopFlowerPower=!1,this.sunStopPopFlowerAction(),this.popOrderToShop(),this.normalAllEmployeeTimeScale(),y.default.stop(113)),!this.lastPopFlowerPowerTime||i.default.time()-this.lastPopFlowerPowerTime>=this.PER_POP_FLOWER_POWER_GAP){this.lastPopFlowerPowerTime=i.default.time(),this.startPopFlowerPower();var n=o/this.PER_POP_FLOWER_POWER_GAP;this.speedProgressPercent=Math.max(0,this.speedProgressPercent-1/n),this.nodeButtonSpeedSun.runAction(cc.sequence(cc.rotateTo(.03,15),cc.rotateTo(.06,-15),cc.rotateTo(.03,0),cc.rotateTo(.03,15),cc.rotateTo(.06,-15),cc.rotateTo(.03,0),cc.rotateTo(.03,15),cc.rotateTo(.06,-15),cc.rotateTo(.03,0)))}}else this.buttonSpeed.setActionEnable(!0);if(this.nodeSpeedShine.active=!0,this.nodeSpeedShine.rotation=360*this.progressBarSpeed.progress,!this.lastPlayPetSoundTime||i.default.time()>this.lastPlayPetSoundTime){var r=null;if(this.bStartPopFlowerPower)r=[113],this.lastPlayPetSoundTime=i.default.time()+this.MAX_POP_FLOWER_POWER_TIME+2;else{r=[603,602];for(var a in l.default.PET_ID_2_SOUND_ID_DICT)r.push(l.default.PET_ID_2_SOUND_ID_DICT[a]);this.lastPlayPetSoundTime=i.default.time()+i.default.random(5,10)}r&&y.default.play(r[i.default.random(0,r.length-1)])}},t.prototype.tryShoperEnterMap=function(e){var t=this,o=this.nodeEnterBuildingHolders,n=function(){var e=[],n=0;for(var r in o){var a=o[r];a._shoper?n+=1:e.push(a)}if(!(n>=(t.bStartPopFlowerPower?t.ON_POP_FLOWER_MAP_SHOPER_NUM:t.NOT_POP_FLOWER_MAP_SHOPER_NUM)))return e.length<=1?e[0]:(e=i.default.randomGotArrayDatas(e,1))[0]}();if(n){var r=this.nodeShoperEnterMapStartHolders[i.default.random(0,this.nodeShoperEnterMapStartHolders.length-1)],a=function(){if(t.canRandomData.length<=0){var o=I.default.getBuildingStore(),n=Math.min(o.template.entertainMaxOrderNum||l.default.SHOPER_SPINE_ARR.length);t.canRandomData=ul.clone(l.default.SHOPER_SPINE_ARR.slice(0,n))}var a=i.default.randomRemoveArrayDatas(t.canRandomData,1)[0],s=new D.default({mov:e?"mov_1":"mov_2",id:t.addedShoperNum+1,initUnitScale:t.SHOPER_UNIT_INIT_SCALE,spineData:a});return s.parent=t.nodeMap,s.position=r.node.position,s.setTimeScale(1.5),s};if(this.bStartPopFlowerPower){if(this.lastFromGenHolderToShopTime+2>i.default.time())return;this.lastFromGenHolderToShopTime=i.default.time();var s=a();return this.shoperMoveToShop(s,r.firstPathHolderIndex,r.node.position),void this.shoperUnit.push(s)}var c=a();n._shoperStatus=this.SHOPER_STATUS_GENING,n._shoper=c,c.setShoperHolder(n),this.shoperUnit.push(c),this.moveShoperToShoperHolder(c,r.firstPathHolderIndex,n,e)}},t.prototype.moveShoperToShoperHolder=function(e,t,o,n){var r=this,a=function(){e.idle(),e.changeScaleX(o.scaleX),o._shoperStatus=r.SHOPER_STATUS_STANDING},s=o._holderIndex,l=this[ul.format("nodeStreetBuildingHolder%s_%s",s,s+1)];if(n)return e.position=l.position,void a();var c=this.getStreetHolderRangePosArr(t-1,(t>s?s+1:s)-1);l&&c.push({pos:l.position});var u=[],d=c.length,p=e.position,h=null;if(this.bStartPopFlowerPower)h=this.SHOPER_MOVE_TO_SHOP_FPS;else{var f=i.default.random(100)>50?1:-1;h=this.SHOPER_MOVE_TO_SHOPER_HOLDER_FPS+i.default.random(50)*f}for(var g=function(t){var o=c[t].pos,n=p.sub(o).mag()/h;u.push(cc.callFunc(function(){e.changeScaleX(o.x<e.position.x?-1:1)})),u.push(cc.moveTo(n,o)),p=o,n},m=0;m<d;m++)g(m);u.push(cc.callFunc(a)),e.runAction(cc.sequence(u));this.SHOPER_TO_SHOP_HOLDER_WORD_ARR},t.prototype.tryUpdateNodeZIndex=function(){for(var e=[],t=this.nodeMap.children,o=0;o<t.length;o++){(r=t[o])._b_disable_auto_zindex||e.push(r)}var n=(e=i.default.sortArrayByField(e,["-y","x"])).length;for(o=0;o<n;o++){var r;(r=e[o]).zIndex=500+o}},t.prototype.tryBackStaffToShop=function(e){var t=this.staffId2UnitDict[e];if(t&&!(t.getNumberOfRunningActions()>0)){this.staffId2MovingPosDict[e]=null;for(var o=[this.nodeBuildingShop2.position,this.nodeBuildingShop1.position],n=!!(t._tempPopFlowerPowerCompletedTime&&i.default.time()<t._tempPopFlowerPowerCompletedTime),r=!(!this.bStartPopFlowerPower&&!n),a=t.getFps(),s=r?a*this.STAFF_SPEED_MOVE_FPS_SCALE:a,l=[],c=null,u=function(e){var n=o[e],r=(c||t.position).sub(n).mag()/s;l.push(cc.callFunc(function(){t.changeScaleX(n.x<t.position.x?-1:1)})),l.push(cc.moveTo(r,n)),c=n},d=0;d<o.length;d++)u(d);l.push(cc.fadeOut(.1)),l.push(cc.delayTime(.5)),l.push(cc.callFunc(function(){t.setOuting(!1)})),t.runAction(cc.sequence(l)).setTag(999)}},t.prototype.tryMoveStaff=function(e){var t=this,o=function(o){var r=parseInt(o),a=n.staffId2UnitDict[o],s=n.staffId2MovingPosDict[o];if(!s||s.length<=0){if(!a.isStayForever()&&!n.bStartPopFlowerPower)return n.tryBackStaffToShop(r),"continue";n.staffId2MovingPosDict[o]=n.getActionCirclePosArr(),s=n.staffId2MovingPosDict[o]}var l=!!(a._tempPopFlowerPowerCompletedTime&&i.default.time()<a._tempPopFlowerPowerCompletedTime),c=!(!n.bStartPopFlowerPower&&!l),u=function(e){var o=a.getFps(),n=c?o*t.STAFF_SPEED_MOVE_FPS_SCALE:o;return Math.abs(a.position.sub(e).mag())/n};if(a._targetPos)a._bSpeed!=c&&(a._startPos=a.position,a._dur=u(a._targetPos),a._passTime=0);else{var d=s.shift();a._targetPos=d.pos,a._nodeShoperHolder=d.nodeHolder,a._startPos=a.position,a._dur=u(a._targetPos),a._passTime=0}a._bSpeed=c;var p=a._targetPos||null;if(!p)return"continue";0==a._passTime&&(a.setTimeScale(c?n.STAFF_SPEED_MOVE_FPS_SCALE:1),a.changeScaleX(p.x<a.position.x?-1:1),c?a.run():a.walk());var h=null,f=1,g=a._dur||0;if(g<=0)h=p;else{var m=a._startPos||a.position,_=a._passTime||0;f=(_+e)/g,h=m.lerp(p,f),a._passTime=_+e}a.position=h,f>=1&&(a._targetPos=null,a._nodeShoperHolder&&n.tryGenShoperToShop(a._nodeShoperHolder)),n.employeeLeafletAction(a)},n=this;for(var r in this.staffId2UnitDict)o(r)},t.prototype.tryGenShoperToShop=function(e){if(e){var t=this.bStartPopFlowerPower?this.RATIO_GEN_SHOPER_POPING:this.RATIO_GEN_SHOPER_NORMAL;if(!(i.default.random(100)>t)){var o=e;if(o._shoperStatus&&o._shoperStatus==this.SHOPER_STATUS_STANDING){o._shoperStatus=this.SHOPER_STATUS_ENTERING;var n=o._holderIndex,r=o._shoper;this.shoperMoveToShop(r,n),o._shoper=null}}}},t.prototype.shoperMoveToShop=function(e,t,o){var n=this;if(e){var r=e.position,a=this.getShoperToShopPosArr(t);o&&a.unshift({pos:o,delayTime:0});var s=[];s.push(cc.delayTime(i.default.random(5)/10));for(var c=a.length,u=r,d=i.default.random(100)>50?1:-1,p=this.SHOPER_MOVE_TO_SHOP_FPS+i.default.random(50)*d,h=function(t){var o=a[t].pos,n=u.sub(o).mag()/p;s.push(cc.callFunc(function(){e.changeScaleX(o.x<e.position.x?-1:1)})),s.push(cc.moveTo(n,o)),u=o,n},f=0;f<c;f++)h(f);s.push(cc.fadeOut(.1)),s.push(cc.callFunc(function(){var t=g.default.getItemAmount(l.default.ITEM_ID_MAX_AVATAR_ORDER)-g.default.getItemAmount(l.default.ITEM_ID_AVATAR_ORDER),o=I.default.getBuildingStore(),r=o.template.perShoperRandomMinOrderNum||1,a=o.template.perShoperRandomMaxOrderNum||3,s=Math.min(t,r),c=Math.min(t,a),u=Math.min(i.default.random(s,c),t);if(u>0){var d=n.nodeBuildingShop1.parent.convertToWorldSpace(n.nodeBuildingShop1.position);new L.default({count:u}).play(cc.v2(d.x,d.y+100)),I.default.addShopOrderNum(u)}for(var p=n.shoperUnit.length,h=0;h<p;h++){if(n.shoperUnit[h].context.id==e.context.id){n.shoperUnit.splice(h,1);break}}})),s.push(cc.removeSelf(!0)),e.setTimeScale(2),e.walk(),e.runAction(cc.sequence(s));this.SHOPER_TO_SHOP_WORD_ARR}},t.prototype.employeeLeafletAction=function(e){if(!(e._nextLeafletActionTime&&i.default.time()<e._nextLeafletActionTime)){var t=this.bStartPopFlowerPower?1/this.STAFF_SPEED_MOVE_FPS_SCALE:1;e._nextLeafletActionTime=i.default.time()+(this.PER_UNIT_LEAFLET_TIME_GAP+i.default.random(0,3))*t,e.leaflet();for(var o=e.position,n=function(e){var t=m.default.get("spine","leaflet");if(!t)return{value:void 0};var n=i.default.random(100)>50?1:-1,a=cc.v2(o.x+i.default.random(5,10)*n,o.y+100);t.setTimeScale(i.default.random(1,3)),t.zIndex=1e3,t._b_disable_auto_zindex=!0,t.scale=i.default.random(2,4)/10,t.rotation=i.default.random(360),t.position=a,t.parent=r.nodeMap,t.play(i.default.random(100)>50?"mov_1":"mov_2",!0),t.opacity=0,t.runAction(cc.sequence(cc.delayTime(.05*e),cc.callFunc(function(){t.opacity=255}),cc.spawn(cc.jumpTo(1,cc.v2(a.x+i.default.random(0,80)*n,a.y-i.default.random(80,120)),i.default.random(80,150),1),cc.sequence(cc.delayTime(.8),cc.fadeOut(.1))),cc.callFunc(function(){m.default.put(t),t.removeFromParent()})))},r=this,a=0;a<5;a++){var s=n(a);if("object"==typeof s)return s.value}}},t.prototype.normalAllEmployeeTimeScale=function(){var e=this.staffId2UnitDict||[];for(var t in e){e[t].setTimeScale(1)}},t.prototype.updateOnlineButton=function(){},t.prototype.showNodePop=function(e,t){var o=this[e];this.showNodePopByNode(o,t);var n=this[e+"Light"];n.active=!0,n&&n.getNumberOfRunningActions()<=0&&n.runAction(cc.repeatForever(cc.sequence(cc.rotateBy(5,360),cc.rotateBy(5,360))))},t.prototype.showNodePopByNode=function(e,t){e._bPoping||(t=t||.1,e._bPoping=!0,e.active=!0,e._originScale=e._originScale||e.scale,e.runAction(cc.sequence(cc.delayTime(t),cc.scaleTo(.1,1.2*e._originScale,1.2*e._originScale),cc.callFunc(function(){e.stopAllActions(),e.runAction(cc.repeatForever(cc.sequence(cc.rotateBy(.3,-5),cc.rotateBy(.6,10),cc.rotateBy(.3,-5))))}))))},t.prototype.stopNodePop=function(e){var t=this[e];this.stopNodePopByNode(t);var o=this[e+"Light"];o.stopAllActions(),o.active=!1},t.prototype.stopNodePopByNode=function(e){e._bPoping&&(e.stopAllActions(),e._bPoping=!1,e.scale=e._originScale||1,e.rotation=0,e.active=!0)},t.prototype.showNodeFlyPop=function(e,t){t=t||1;var o=this[e];o._bPoping=!0;var n=this[ul.format("%sPop1",e)],r=this[ul.format("%sPop2",e)],a=this[ul.format("%sPop3",e)];n.scale=0,r.scale=0,a.scale=0,o.active=!0,n.runAction(cc.sequence(cc.delayTime(t),cc.scaleTo(.15,1,1),cc.callFunc(function(){r.runAction(cc.sequence(cc.scaleTo(.15,1,1),cc.callFunc(function(){a.runAction(cc.sequence(cc.scaleTo(.8,1,1).easing(cc.easeElasticOut(.3)),cc.callFunc(function(){p.default.floatNode(n,1),p.default.floatNode(r,2),p.default.floatNode(a)})))})))})))},t.prototype.preloadOtherRes=function(){for(var e=["view/node/vMsgTip","view/dialog/vGotItemDialog","view/dialog/vGotCoinDialog","view/dialog/vPromptDialog"],t=0;t<e.length;t++){var o=e[t];d.default.preloadRes(o,cc.Prefab)}},t.prototype.onLoadedInit=function(){var e=this;B.default.isCanShowMidAutumn()&&this.tryChangeMidAutumnUi();var t=new Date,o=t.getDate()-t.getDay();cc.log("-------------testtime=",t.getFullYear(),t.getMonth(),t.getDate(),t.getDay(),o);var n=new Date(2020,4,1,0,0,0);cc.log("----beginTime0=",n);var r=new Date(2020,4,11,0,0,0);cc.log("----endTime=",r),f.default.tryRefreshDailyData(),this.nodeWater4399.active=!!B.default._is4399Watermark,this.buttonSpeed.setSingleTouchGap(.02),this.buttonSpeed.setSoundEnable(!1),y.default.play(1),!this.context.bFromSplash&&i.default.random(100)>50&&y.default.play(708),this.setContentSize(d.default.size),this.initHolderInfo(),this.buildUi(),this.staffId2MovingPosDict={},this.initNpcs(),this.initStaffs(),this.initShopers(),this.layoutButtons(),this.playUIActionIn(function(){e.layoutButtons(),e._showCrossRecommend(),P.default.callLater(i.default.random(1,3),function(){e.nodeResource&&cc.isValid(e.nodeResource)&&K.default.tryStartRecordGameVideo()}),e.titleBar.setItemNodePos(),e.bCompleteActionIn=!0}),P.default.callLoop(.12,this.onTimerHandler.bind(this),this),this.registerListeners({MSG_ITEM_BUY_SUCCESSED:this.onMsgItemBuySuccessd.bind(this),MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this),MSG_PK_MIRROR_DAILY_INFO_REFRESHED:this.onMsgPkMirrorDailyInfoRefreshed.bind(this),MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd.bind(this),MSG_AD_EVENT_FAILD:this.onMsgAdEventFaild.bind(this),MSG_AD_EVENT_CANCELED:this.onMsgAdEventCanceled.bind(this),MSG_GUIDE_FLOWER_SPEED:this.onMsgGuideFlowerSpeed.bind(this),MSG_PVP_PK_LVUP_GARDEN:this.onMsgPvpPkLvupGarden.bind(this),MSG_RECEIVED_OFFLINE_REWARD:this.onMsgReceivedOfflineReward.bind(this),MSG_ON_BUTTON_TOUCHED:this.onButtonTouched.bind(this),MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc.bind(this)}),this.onEnterTransitionFinish()},t.prototype.tryChangeMidAutumnUi=function(){this.spriteNormalBg.node.active=!1,this.spriteMidAutumnBg.node.active=!0,this.spriteBuildingHouse1Normal.node.active=!1,this.spriteBuildingHouse1MidAutumn.node.active=!0,this.spriteBuildingHouse2Normal.node.active=!1,this.spriteBuildingHouse2MidAutumn.node.active=!0,this.spriteBuildingHouse3Normal.node.active=!1,this.spriteBuildingHouse3MidAutumn.node.active=!0,this.spriteBuildingHouse4Normal.node.active=!1,this.spriteBuildingHouse4MidAutumn.node.active=!0,this.spriteArt05Normal.node.active=!1,this.spriteArt05MidAutumn.node.active=!0},t.prototype.initHolderInfo=function(){for(var e=[],t=[],o=[],n=1;n<100;n++){if(!(r=this["nodeStreetHolder"+n]))break;r._holderIndex=n-1,e.push(r)}for(n=1;n<100;n++){if(!(r=this["nodeNpc"+n]))break;t.push(r)}for(n=1;n<100;n++){var r;(r=this[ul.format("nodeStreetBuildingHolder%s_%s",n,n+1)])&&(r._holderIndex=n,o.push(r))}var a=[{node:this.nodeShoperEnterMapStartHolder1,firstPathHolderIndex:6},{node:this.nodeShoperEnterMapStartHolder2,firstPathHolderIndex:15},{node:this.nodeShoperEnterMapStartHolder3,firstPathHolderIndex:2}];this.nodeStreetHolders=e,this.nodeHolderNpcs=t,this.nodeEnterBuildingHolders=o,this.nodeShoperEnterMapStartHolders=a},t.prototype.initNpcs=function(){for(var e=["eventnpc2","eventnpc3","eventnpc4"],t=[],o=1;o<=1;o++){var n=this["nodeNpc"+o];if(!n)return;var r=null;if(1==o)r="eventnpc1";else r=i.default.randomRemoveArrayDatas(e,1)[0];var a=new A.default({initUnitScale:this.NPC_UNIT_INIT_SCALE,spineId:r});a.parent=this.nodeMap,a.scaleX=n.scaleX,a.scaleY=n.scaleY,a.position=n.position,t.push(a)}this.npcUnits=t},t.prototype.initStaffs=function(){},t.prototype.initShopers=function(){this.tryShoperEnterMap(!0)},t.prototype.tryAllStaffRunMap=function(){this.lastRandomAddStaffTime&&i.default.time()-this.lastRandomAddStaffTime<=this.POP_POWER_ADD_STAFF_GAP_TIME||(this.lastRandomAddStaffTime=i.default.time(),this.randomAddStaffFromShop())},t.prototype.randomAddStaffFromShop=function(){var e=0,t=[],o=R.default.getEmployees();for(var n in o){var r=o[n],a=this.staffId2UnitDict[r.id];a&&a.isOuting()||t.push(r.id),a&&a.isOuting()&&(e+=1)}if(!(!t||t.length<=0||e>=this.ON_POP_FLOWER_MAP_EMPLOYEE_NUM)){var s=i.default.randomGotArrayDatas(t,1)[0];this.addStaff(s,!0,!0)}},t.prototype.addStaff=function(e,t,o){void 0===t&&(t=!1),void 0===o&&(o=!1);var n=this.getActionCirclePosArr();o&&(n.unshift({pos:this.nodeBuildingShop2.position,delayTime:0}),n.unshift({pos:this.nodeBuildingShop1.position,delayTime:0}));var r=this.staffId2UnitDict[e];r||((r=new T.default({staffId:e,bStayMapForever:t,initUnitScale:this.STAFF_UNIT_INIT_SCALE,fReceiveFootReward:this.receiveFootReward.bind(this)})).parent=this.nodeMap),r.stopAllActions(),r.setOuting(!0),r.opacity=255,n&&n[0]&&n[0].pos&&(r.position=n[0].pos),r.scale=.5,r.runAction(cc.scaleTo(.2,1,1)),this.staffId2UnitDict[e]=r,this.staffId2MovingPosDict[e]=n},t.prototype.receiveFootReward=function(e){var t=this,o=l.default.ITEM_ID_GOLD,n=Math.ceil(g.default.getBascRewardGold()/2e3);n=this.bStartPopFlowerPower?2*n:n;var r=!!R.default.getDoubleFootRewardLeftTime();r&&(n*=2);var a=g.default.getItemAmount(o),s=a+n,c=!!this.bStartPopFlowerPower||!(i.default.random(100)<30);this.tryFlyGotItem(o,n,e,c,function(){g.default.addItemAmount(o,n,r?"\u4e3b\u754c\u9762\u5458\u5de5\u6b65\u6570_\u5e7f\u544a":"\u4e3b\u754c\u9762\u5458\u5de5\u6b65\u6570"),y.default.play(111),t.sendMsg("MSG_ROLL_TITLE_BAR_ITEM_AMOUNT",{itemId:o,oldAmount:a,newAmount:s,delayTime:0})})},t.prototype.tryFlyGotItem=function(e,t,o,n,r){var a=this,s=this.nodeFrontContent,l=s.convertToNodeSpaceAR(o),c=new cc.Node;c.position=l,c.scale=.6,c.parent=s;var u=null;if(u=this.poolItemAmountNodeArr.length>0?this.poolItemAmountNodeArr.shift():new F.default({itemId:e,amount:t}),!n){var d=m.default.get("particle","cursor");d&&(d.parent=c,d.zIndex=-1,d.scale=1.3,c._particleTail=d)}if(u.parent=c,c._nodeItem=u,!this.receiveFootRewardEndPos){var p=g.default.getHudItemNodePos(e);if(!p)return;this.receiveFootRewardEndPos=s.convertToNodeSpaceAR(p)}var h=[l,cc.v2(l.x+(l.x>0?-1:1)*i.default.random(200),l.y+(this.receiveFootRewardEndPos.y-l.y)/2),this.receiveFootRewardEndPos],f=c.scale;c.runAction(cc.sequence(cc.delayTime(.1),cc.spawn(cc.sequence(cc.scaleTo(.7*.95,2*f,2*f),cc.scaleTo(.7*.05,.2*f,.2*f)),cc.bezierTo(.7,h)),cc.callFunc(function(){c._particleTail&&(m.default.put(c._particleTail),c._particleTail.stop(),c._particleTail.removeFromParent(),c._particleTail=null),c._nodeItem&&(c._nodeItem.removeFromParent(),a.poolItemAmountNodeArr.push(c._nodeItem),c._nodeItem=null),r&&r()}),cc.removeSelf()))},t.prototype.getActionCirclePosArr=function(e){if(e=e||0,this.circlePosIndex2ArrDict[e])return ul.clone(this.circlePosIndex2ArrDict[e]);for(var t=[],o=this.nodeStreetHolders,n=o.length,r=this.nodeEnterBuildingHolders,a=function(e){for(var o in r){var n=r[o];if(n._holderIndex-1==e){t.push({pos:n.position,delayTime:.3+.1*i.default.random(3,5),nodeHolder:n,targetHolderIndex:e>4?e+1:e});break}}},s=0;s<n;s++)if(!(s<e)){var l=(i.default.random(100)>50?1:-1)*i.default.random(5,10),c=o[s];t.push({pos:cc.v2(c.position.x+l,c.position.y),delayTime:0}),a(s)}var u=o[0];return t.push({pos:u.position,delayTime:0}),this.circlePosIndex2ArrDict[e]=ul.clone(t),t},t.prototype.getStreetHolderRangePosArr=function(e,t){var o=[],n=this.nodeStreetHolders;if(e==t){var r=(i.default.random(100)>50?1:-1)*i.default.random(5,10),a=n[e];o.push({pos:cc.v2(a.position.x+r,a.position.y)})}else{var s=function(e){var t=(i.default.random(100)>50?1:-1)*i.default.random(5,10),r=n[e];o.push({pos:cc.v2(r.position.x+t,r.position.y+0)})};if(e>t)for(var l=e;l>=t;l--)s(l);else for(l=e;l<=t;l++)s(l)}return o},t.prototype.getShoperToShopPosArr=function(e){var t=[],o=this.nodeStreetHolders,n=o.length;if(e>8){for(var r=e;r<n;r++){var a=(i.default.random(100)>50?1:-1)*i.default.random(5,10),s=o[r];t.push({pos:cc.v2(s.position.x+a,s.position.y),delayTime:0})}var l=(i.default.random(100)>50?1:-1)*i.default.random(10,20),c=(i.default.random(100)>50?1:-1)*i.default.random(10,20),u=o[0];t.push({pos:cc.v2(u.position.x+l,u.position.y+c),delayTime:0})}else for(r=e;r>=0;r--){l=(i.default.random(100)>50?1:-1)*i.default.random(5,10),c=0,u=o[r];0==r&&(l=(i.default.random(100)>50?1:-1)*i.default.random(10,20),c=(i.default.random(100)>50?1:-1)*i.default.random(10,20)),t.push({pos:cc.v2(u.position.x+l,u.position.y+c),delayTime:0})}return t.push({pos:this.nodeBuildingShop2.position,delayTime:0}),t.push({pos:this.nodeBuildingShop1.position,delayTime:0}),t},t.prototype.onEnterTransitionFinish=function(){if(this.context.gotoNextDialogName&&""!=this.context.gotoNextDialogName)d.default.warpDialogWithSmallEffect(this.context.gotoNextDialogName,this.context.gotoNextDialogContext);else{this._tryGuide(),this._tryOpenSomeDialog();var e=function(){};if(this.context.bFromSplash){if(!h.default.isGuiding()){var t=g.default.receiveOfflineReward();t&&d.default.warpDialogWithSmallEffect("vOfflineRewardDialog",{amount:t.amount,time:t.time,fOnDialogClose:e})}}else c.default.showIntAd("\u4e3b\u754c\u9762",this.AD_INTER_VIEW_NAME);this.tryShowSignOrQuestDialog(),this.tryShowNcovTip(),this.tryShowOpMidAutumnLotteryDialog()}},t.prototype._tryGuide=function(){h.default.registerGuideNode("vHudDialog.buttonSpeed",this.buttonSpeed.node),h.default.registerGuideNode("vHudDialog.buttonBuildingStore",this.buttonBuildingStore.node),h.default.registerGuideNode("vHudDialog.buttonPkMirror",this.buttonPkMirror.node),h.default.registerGuideNode("vHudDialog.buttonPvp",this.buttonPvp.node),h.default.registerGuideNode("vHudDialog.buttonSign",this.buttonSign.node),h.default.registerGuideNode("vHudDialog.buttonDailyQuest",this.buttonDailyQuest.node),h.default.registerGuideNode("vHudDialog.buttonDesign",this.buttonDesign.node),this.sendMsg("MSG_GUIDE_POINT",{id:"vHudDialog.onEnterTransitionFinish",bOpenedShopFlag:g.default.getItemAmount(l.default.ITEM_ID_OPEN_SHOP_COUNT)>0?1:0,bResearchCompleted:g.default.getItemAmount(924)>0?1:0,productResultCount:g.default.getItemAmount(l.default.ITEM_ID_ENTER_PRODUCT_RESULT_COUNT),bContainPvpData:N.default.getPlayerData()?1:0})},t.prototype.tryShowOpMidAutumnLotteryDialog=function(){if(!h.default.isGuiding()){var e=_.default.getCopNumberValueByKey("show_mid_autumn_lottery_dialog_ratio"),t=_.default.getCopNumberValueByKey("show_mid_autumn_lottery_dialog_cd");B.default.isCanShowMidAutumn()&&z.default.lotteryedNum<l.default.MID_AUTUMN_LOTTERY_MAX_COUNT&&i.default.random(100)>e&&i.default.time()>t+z.default.lastShowOpMidAutumnLotteryDialogTime&&d.default.warpDialogWithSmallEffect("vOpMidAutumnLotteryDialog")}},t.prototype._tryOpenSomeDialog=function(){h.default.isGuiding()||B.default.isInstallShortCutTipShowed()||(B.default.markInstallShortCutTipShowed(),B.default.tryShowFindMeOrShortCut())},t.prototype.playUIActionIn=function(e){this.nodeHudUI.active=!0;for(var t=[],o=[this.nodeTitleBar,this.buttonSetting.node,this.buttonDoubleSpeed.node],n=0;n<o.length;n++){(r=o[n])._originPos=r._originPos||r.position,r.active&&t.push({node:r,beginPos:cc.v2(r.x,r.y+500),endPos:r._originPos,delayTime:.01*i.default.random(5),dur:.3})}o=[this.buttonSuit.node,this.buttonPkMirror.node,this.buttonSpeed.node,this.buttonDesign.node,this.buttonPvp.node];for(n=0;n<o.length;n++){(r=o[n])._originPos=r._originPos||r.position,r.active&&t.push({node:r,beginPos:cc.v2(r.x,r.y-500),endPos:r._originPos,delayTime:.01*i.default.random(5),dur:.3})}o=[this.buttonAdH5.node,this.buttonSign.node,this.nodeFindedMe,this.buttonAddShortCut.node,this.buttonOpNcov.node,this.buttonWish.node];for(n=0;n<o.length;n++){(r=o[n])._originPos=r._originPos||r.position,r.active&&t.push({node:r,beginPos:cc.v2(r.x+300,r.y),endPos:r._originPos,delayTime:.01*n,dur:.3})}o=[this.buttonDailyQuest.node,this.buttonWelfare.node,this.buttonMoreGame.node,this.buttonMoreGameBox.node,this.nodeJumpGame,this.buttonShare.node,this.button51Happy.node,this.buttonMoreWonderful.node,this.buttonMidAutumnLottery.node];for(n=0;n<o.length;n++){var r;(r=o[n])._originPos=r._originPos||r.position,r.active&&t.push({node:r,beginPos:cc.v2(r.x-300,r.y),endPos:r._originPos,delayTime:.01*n,dur:.3})}p.default.playMoveToActionArr(t,1,null),this.nodeHudUI.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){e&&e()})))},t.prototype.playSunPopPowerActionIn=function(){var e=[this.buttonSetting.node,this.nodeLeftTop,this.nodeRightTop,this.nodeLeftDown,this.nodeRightDown,this.nodeRightTop2,this.buttonSuit.node,this.buttonDailyQuest.node,this.buttonPkMirror.node,this.buttonPvp.node,this.buttonDesign.node];for(var t in e){e[t].runAction(cc.fadeIn(.3))}e=[this.nodeShop,this.nodeMall,this.nodeBuildingRank];for(var t in e){e[t].runAction(cc.scaleTo(.3,1,1))}},t.prototype.playSunPopPowerActionOut=function(){var e=[this.buttonSetting.node,this.nodeLeftTop,this.nodeRightTop,this.nodeLeftDown,this.nodeRightDown,this.nodeRightTop2,this.buttonSuit.node,this.buttonDailyQuest.node,this.buttonPkMirror.node,this.buttonPvp.node,this.buttonDesign.node];for(var t in e){e[t].runAction(cc.fadeOut(.3))}e=[this.nodeShop,this.nodeMall,this.nodeBuildingRank];for(var t in e){e[t].runAction(cc.scaleTo(.3,0,0))}},t.prototype.updateVideoRecordBtnImgs=function(){if(g.default.getItemAmount(l.default.ITEM_ID_VIDEO_SHARE_COUNT)>0&&Math.ceil(g.default.getBascRewardGold())>0){var e=Math.ceil(g.default.getBascRewardGold());this.labelVideoRecordRewardTips.string="+"+g.default.getItemAmountStr(e),this.nodeVideoRecordRewardTips.active=!0}else this.nodeVideoRecordRewardTips.active=!1;K.default.recordStatus==K.default.PRE_RECORD?this.spriteButtonVideoRecorder.loadSpriteFrame("2d/ui/video_recorder/start.png"):K.default.recordStatus==K.default.RECORDING?this.spriteButtonVideoRecorder.loadSpriteFrame("2d/ui/video_recorder/recording.png"):K.default.recordStatus==K.default.RECORD_FINISH&&(this.spriteButtonVideoRecorder.loadSpriteFrame("2d/ui/video_recorder/record_share.png"),B.default.isShowVideoRecorderFinger()&&(this.spriteFinger.node.active=!0,this.spriteFinger.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.2).easing(cc.easeBackOut()),cc.scaleTo(.5,.8).easing(cc.easeBackOut()))))))},t.prototype.buildUi=function(){this.nodeHudUI.active=!0;var e=new M.default({bSetGoldNodePos:!0});e.parent=this.nodeTitleBar,this.titleBar=e,(new b.default).parent=this.nodeJumpGame;var t=new j.default({fOnClickSwitch:this.onClickSwitch.bind(this)});t.parent=this.buttonJumpOtherGame2.node,this.nodeJumpOtherGameSideBar=t,i.default.registerTouchHandler(this.nodeSideBarMask,this.onTouchSideBarMask.bind(this)),this.nodeSideBarMask.active=!1,i.default.registerTouchHandler(this.nodeMask,this.onTouchHandler.bind(this))},t.prototype.onTouchSideBarMask=function(e){this.onClickSwitch()},t.prototype.onClickSwitch=function(){this.bHideumpOtherGameSideBar?this.nodeJumpOtherGameSideBar&&(_.default.closeCrossRecommend(),this.nodeJumpOtherGameSideBar.runAction(cc.moveTo(.5,378,0).easing(cc.easeBackInOut())),this.bHideumpOtherGameSideBar=!1,this.nodeSideBarMask.active=!0,_.default.openJump("70","list"),c.default.showViewEnterAd(this.nodeResource,null,null,"ad_banner_more_game_dialog")):this.nodeJumpOtherGameSideBar&&(this.nodeJumpOtherGameSideBar.runAction(cc.moveTo(.5,0,0).easing(cc.easeBackInOut())),this.bHideumpOtherGameSideBar=!0,this.nodeSideBarMask.active=!1,c.default.closeBannerAd(),this._showCrossRecommend())},t.prototype._doLayout=function(e,t,o){o=o||0;var n=e.children||[];if("hcenter"==t)i.default.layoutNodesHorizonCenter(n,o);else if("vcenter"==t)i.default.layoutNodesVerticalCenter(n,o);else for(var r=0,a=0,s=0,l=n.length,c=0;c<l;c++){var u=n[c];if(u.active){var d=u.getContentSize();"left"==t?(u.setPosition(r,a),r=r-d.width-o):"right"==t?(u.setPosition(r,a),r=r+d.width+o):"up"==t?0==s?(u.setPosition(0,0),a+=u.height/2):(a+=o+u.height/2,u.setPosition(r,a),a+=u.height/2):"down"==t&&(0==s?(u.setPosition(0,0),a-=u.height/2):(a-=o+u.height/2,u.setPosition(r,a),a-=u.height/2)),s+=1}}},t.prototype.updateButtonState=function(){this.buttonNotice.node.active=!1,this.buttonFreeRmb.node.active=!1,this.buttonFreeGold.node.active=!1;var e=v.default.getState();this.buttonSign.node.active=!0,S.default.setBadgeEnabled(this.buttonSign.node,e==l.SignState.canSign?1:0,-35,-35),this.updateOnlineButton();var t=k.default.getQuestAchievementCanRewardCount()+u.default.getFinishedCount();S.default.setBadgeEnabled(this.buttonDailyQuest.node,t>0,-35,-35),this.buttonDoubleSpeed.node.active=!1;var o=g.default.hasSuitCanReward();S.default.setBadgeEnabled(this.buttonSuit.node,o,-35,-35);var n=l.default.ITEM_ID_PKMIRROR_COUNT,r=g.default.getItemAmount(n),a=x.default.canRewardLevel();S.default.setBadgeEnabled(this.buttonPkMirror.node,a||r>0,-35,-35);var i=N.default.getBadgeCount();if(S.default.setBadgeEnabled(this.buttonPvp.node,i>0,-35,-35),this.buttonShare.node.active=g.default.canShare(),this.buttonRank.node.active=!!B.default.isRankEnabled(),this.buttonOpNcov.node.active=1==_.default.getCopNumberValueByKey("b_ncov_tip"),S.default.setBadgeEnabled(this.buttonOpNcov.node,V.default.canReceive(),-35,-35),this.buttonFindMeBaidu.node.active=!1,this.buttonFindMeToutiao.node.active=(w.default.ENABLE_CC_DEUBG,B.default._isSupportFindMinigames&&B.default.isChannelPlatformToutiao()),this.buttonFindMeDouyin.node.active=(w.default.ENABLE_CC_DEUBG,B.default._isSupportFindMinigames&&B.default.isChannelPlatformDouyin()),this.buttonFindMeWeiXin.node.active=(w.default.ENABLE_CC_DEUBG,B.default._isSupportFindMinigames&&B.default.isChannelWeixin()),this.buttonShortCutDouyin.node.active=B.default.isChannelPlatformDouyin(),this.buttonMiniGameDouyin.node.active=B.default.isChannelPlatformDouyin(),this.nodeFindedMe.active=!(!B.default._isSupportFindMinigames||!(this.buttonFindMeBaidu.node.active||this.buttonFindMeToutiao.node.active||this.buttonFindMeDouyin.node.active||this.buttonFindMeWeiXin.node.active)),this.buttonAdH5.node.active=!!B.default._isShowUrlAdIcon,this.nodeJumpGame.active=B.default.canGameInterPush1(),this.buttonJumpOtherGame2.node.active=B.default.canGameInterPush2(),this.buttonMoreGame.node.active=cc.sys.isNative&&!G.default._temp_isH5()&&""!=_.default.getCopByKey("url_more_game"),this.buttonMoreGameBox.node.active=!!B.default._isSupportChannelMoreGameBox&&1==_.default.getCopNumberValueByKey("b_more_game_box"),this.buttonWelfare.node.active=B.default.canGameInterPush(),this.nodeTouTiaoMoreGame.active=!!B.default.isChannelHeadline(),this.nodeBaiduMoreGame1.active=!!B.default.isChannelBaidu(),this.buttonMidAutumnLottery.node.active=B.default.isCanShowMidAutumn(),this.buttonMidAutumnLottery.node.active){var s=z.default.lotteryedNum<l.default.MID_AUTUMN_LOTTERY_MAX_COUNT;S.default.setBadgeEnabled(this.buttonMidAutumnLottery.node,s,-35,-35)}_.default.isOpenVideoRecord()?this.buttonVideoRecorder.node.active=!0:this.buttonVideoRecorder.node.active=!1,this.buttonAddShortCut.node.active=!B.default.isTakedInstallShortCutReward()&&B.default._isSupportInstallShortcut,this.buttonAddShortCut.node.active&&this.buttonAddShortCut.node.getNumberOfRunningActions()<=0&&(this.buttonAddShortCut.node.rotation=0,this.buttonAddShortCut.node.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1),cc.rotateBy(.1,-10),cc.rotateBy(.2,20),cc.rotateBy(.1,-10))))),S.default.setBadgeEnabled(this.buttonAddShortCut.node,!0,-35,-35),S.default.setBadgeEnabled(this.buttonWish.node,c.default.preCheckCanTriggerAdEvent("video_free_wish")&&c.default.getAdEventRemainCount("video_free_wish")>0,-35,-35),this.buttonMoreWonderful.node.active=l.default.IS_SHOW_MORE_WONDERFUL,this.button51Happy.node.active=H.default.isOpening(),S.default.setBadgeParticleEnabled(this.button51Happy.node,!!this.button51Happy.node.active),this.button51Happy.node.active&&this.node51HappyBadge.getNumberOfRunningActions()<=0&&(this.node51HappyBadge.rotation=0,this.node51HappyBadge.runAction(cc.repeatForever(cc.sequence(cc.delayTime(.1),cc.rotateBy(.1,-5),cc.rotateBy(.2,10),cc.rotateBy(.1,-5)))))},t.prototype.layoutButtons=function(e){void 0===e&&(e=!1),this.bDisableLayoutButtons||(e||this.updateButtonState(),this._doLayout(this.nodeLeftTop,"down",6),this._doLayout(this.nodeRightTop,"down",6),this._doLayout(this.nodeLeftTop2,"right",6),this._doLayout(this.nodeRightTop2,"left",6))},t.prototype._showCrossRecommend=function(){if(B.default._isSupportRecommendationBtn){var e=cc.view.getFrameSize(),t=null;if(this.nodeTouTiaoMoreGame.active&&B.default.isChannelHeadline()?t=this.nodeTouTiaoMoreGame:this.nodeBaiduMoreGame1.active&&B.default.isChannelBaidu()&&(t=this.nodeBaiduMoreGame1),t){var o=t.x-t.width/2,n=t.y+t.height/2,r=t.parent.convertToWorldSpaceAR(cc.v2(o,n)),a=cc.v2(10,e.height-(r.y-50)/d.default.size.height*e.height);_.default.openCrossRecommend(a.x,a.y,0)}}},t.prototype.refreshBuildOrderData=function(){if(this.labelBuildingStoreOrder){var e=g.default.getItemAmount(l.default.ITEM_ID_AVATAR_ORDER),t=g.default.getItemAmount(l.default.ITEM_ID_MAX_AVATAR_ORDER);e=Math.min(e,t),this.labelBuildingStoreOrder.getComponent(cc.Label).string=ul.format("%d/%d",e,t)}},t.prototype.onTouchButtonNotice=function(e){e.isClick()&&S.default.showMsgTip("\u529f\u80fd\u672a\u5f00\u653e")},t.prototype.onTouchButtonFreeRmb=function(e){e.isClick()&&d.default.warpDialogWithEffect("vHudAdItemDialog",{bRmb:!0})},t.prototype.onTouchButtonFreeGold=function(e){e.isClick()&&d.default.warpDialogWithEffect("vHudAdItemDialog",{bRmb:!1})},t.prototype.onTouchButtonPvp=function(e){e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"DailyQuestGuideClick"}),d.default.warpDialogWithEffect("vPvpPkDialog",null,function(){}))},t.prototype.onTouchButtonSetting=function(e){e.isClick()&&d.default.warpDialogWithSmallEffect("vSettingDialog")},t.prototype.onTouchButtonSign=function(e){e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"DailyQuestGuideClick"}),d.default.warpDialogWithSmallEffect("vSignDialog"))},t.prototype.onTouchButtonPkMirror=function(e){var t=this;e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"DailyQuestGuideClick"}),d.default.warpDialogWithEffect("vPkMirrorDialog",null,function(){t.closeDialog(!0)}))},t.prototype.flagStartPopSunShine=function(e){this.speededCount=0,this.bStartPopFlowerPower=!0,this.bDoublePopFlowerPower=!!e},t.prototype.onTouchButtonSpeed=function(e){var t=this;if(e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"DailyQuestGuideClick"}),!this.bStartPopFlowerPower))if(y.default.play(109),g.default.addItemAmount(922,1,"\u4efb\u52a1\u7269\u54c1"),this.lastClickSpeedTime=i.default.time(),this.speededCount++,this.speedProgressPercent=Math.min(this.speededCount/this.SPEED_FULL_COUNT,1),1==this.speedProgressPercent)this.sendMsg("MSG_GUIDE_POINT",{id:"vHudDialog.buttonSpeed.fullPercent"}),this.flagStartPopSunShine(),this.bTriggeredCrazyTimeAd=!1;else if(this.startPopFlowerPower(1),this.SPEED_COUNT_ADD_STAFF_DICT[this.speededCount]&&this.randomAddStaffFromShop(),!h.default.isGuiding()&&this.speededCount%10==0){this.bTriggeredCrazyTimeAd=!0;var o=this.AD_POP_SUNSHINE_MORE_TIME_NAME;if(c.default.preCheckCanTriggerAdEvent(o)){var n=W.default.getText("vHudDialog.1");y.default.play(508),new U.default({contentStr:n,btnRefuseStr:W.default.getText("vHudDialog.2"),btnVideoStr:W.default.getText("vHudDialog.3"),bShowBanner:!0,fOnClickVideo:function(){c.default.triggerAdEvent(o,null,!0)}}).openDialog()}else{if(g.default.getItemAmount(l.default.ITEM_ID_AVATAR_ORDER)<g.default.getItemAmount(l.default.ITEM_ID_MAX_AVATAR_ORDER)&&c.default.preCheckCanTriggerAdEvent(this.AD_VIDEO_ADD_ORDER)){n=W.default.getText("vHudDialog.4");new U.default({contentStr:n,btnRefuseStr:W.default.getText("vHudDialog.2"),btnVideoStr:W.default.getText("vHudDialog.5"),bShowBanner:!0,bShowOrderNum:!0,currOrderNum:g.default.getItemAmount(l.default.ITEM_ID_AVATAR_ORDER),fOnClickVideo:function(){c.default.triggerAdEvent(t.AD_VIDEO_ADD_ORDER,null,!0)}}).openDialog()}}}},t.prototype.startPopFlowerPower=function(e){var t=this,o=e||i.default.random(2,this.ON_POP_FLOWER_MAP_EMPLOYEE_NUM);if(!this.popFlowerPowerStartPos){var n=this.buttonSpeed.node.parent.convertToWorldSpace(this.buttonSpeed.node.position);this.popFlowerPowerStartPos=this.nodeLayoutContent.convertToNodeSpaceAR(n)}var r=this.staffId2UnitDict||{},a=[];for(var s in r){var l=r[s];if(l&&cc.isValid(l)&&l.isOuting()){n=l.parent.convertToWorldSpace(l.position);var c=this.nodeLayoutContent.convertToNodeSpaceAR(n);l._effectNodePos=cc.v2(c.x,c.y+120),a.push(l)}}o=Math.min(a.length,o);for(var u=function(e){var o=i.default.randomRemoveArrayDatas(a,1)[0];if(!o||!cc.isValid(o))return"continue";p.bStartPopFlowerPower||y.default.play(109);var n=o._effectNodePos,r=null;(r=p.nodePowerFlyIconArr.length<=0?d.default.createSpriteNode("2d/ui/hud/img_flower_pop"):p.nodePowerFlyIconArr.shift()).parent=p.nodeLayoutContent,r.scale=.8,r.position=p.popFlowerPowerStartPos,r.runAction(cc.sequence(cc.spawn(cc.jumpTo(.5,n,100,1),cc.sequence(cc.delayTime(.4),cc.scaleTo(.1,.8,.8))),cc.callFunc(function(){r.stopAllActions();var e=r.parent.convertToWorldSpaceAR(r.position),n=o.convertToNodeSpaceAR(e);r.parent=o,r.position=n,r.runAction(cc.sequence(cc.spawn(cc.moveTo(.3,cc.v2(0,50)),cc.scaleTo(.3,0,0)),cc.callFunc(function(){o._tempPopFlowerPowerCompletedTime=i.default.time()+t.TEMP_SPEED_LAST_TIME,o.tryGenFootGold&&o.tryGenFootGold(o._tempPopFlowerPowerCompletedTime),r.removeFromParent(),t.nodePowerFlyIconArr.push(r)})))})))},p=this,h=0;h<o;h++)u()},t.prototype.popOrderToShop=function(){var e=this,t=function(){if(!(e.bAlertOpenStore||(e.bAlertOpenStore=!0,g.default.getItemAmount(l.default.ITEM_ID_ALERT_OPEN_SHOP_COUNT)<=0))){g.default.addItemAmount(l.default.ITEM_ID_ALERT_OPEN_SHOP_COUNT,-1,"\u4e3b\u754c\u9762");var t=W.default.getText("vHudDialog.6"),o=[],n=[];g.default.getItemAmount(l.default.ITEM_ID_OPEN_SHOP_COUNT)<2?(o=[W.default.getText("vHudDialog.7")],n=[function(){d.default.warpDialogWithEffect("vBuildingStoreDialog")}]):(o=[W.default.getText("vHudDialog.8"),W.default.getText("vHudDialog.7")],n=[null,function(){d.default.warpDialogWithEffect("vBuildingStoreDialog")}]),y.default.play(508);var r=new O.default({content:t,btnTexts:o,callbacks:n,bShowBanner:!0});return r.openDialog(),r}},o=g.default.getItemAmount(l.default.ITEM_ID_MAX_AVATAR_ORDER)-g.default.getItemAmount(l.default.ITEM_ID_AVATAR_ORDER);if(o<=0)t();else{var n=this.nodeBuildingStoreOrder;if(n&&cc.isValid(n)){var r=this.buttonSpeed.node.parent.convertToWorldSpace(this.buttonSpeed.node.position),a=this.nodeLayoutContent.convertToNodeSpaceAR(r),i=n.parent.convertToWorldSpaceAR(n.position),s=this.nodeLayoutContent.convertToNodeSpaceAR(i);if(h.default.isGuiding()||this.bAutoFullOrderNum||g.default.getItemAmount(l.default.ITEM_ID_OPEN_SHOP_COUNT)<2){this.bAutoFullOrderNum=!1,this.nodeMask.active=!0;var c=new L.default({count:o});c.scale=2,c.parent=this.nodeLayoutContent,c.position=a,c.runAction(cc.sequence(cc.jumpTo(1,s,100,1),cc.scaleTo(.3,0,0),cc.callFunc(function(){I.default.addShopOrderNum(o)}),cc.delayTime(1),cc.callFunc(function(){e.nodeMask.active=!1,t()}),cc.delayTime(.5),cc.removeSelf(!0)))}else t()}else t()}},t.prototype.tryShowSignOrQuestDialog=function(){h.default.isGuiding()||(v.default.hasCanRewardSign()?d.default.warpDialogWithSmallEffect("vSignDialog"):k.default.getQuestAchievementCanRewardCount()+u.default.getFinishedCount()>0&&d.default.warpDialogWithSmallEffect("vDailyQuestDialog"))},t.prototype.tryShowNcovTip=function(){return!h.default.isGuiding()&&(!!V.default.canReceive()&&(this.showNcovTip(),!0))},t.prototype.showNcovTip=function(){d.default.openDialog("vOpNcovTipDialog")},t.prototype.onTouchButtonDailyQuest=function(e){e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"vHudDialog.buttonDailyQuest.click"}),d.default.warpDialogWithSmallEffect("vDailyQuestDialog"))},t.prototype.onTouchButtonRank=function(e){e.isClick()&&d.default.warpDialogWithEffect("vHudRankDialog")},t.prototype.onTouchButtonShare=function(e){e.isClick()&&g.default.tryShowShare(null)},t.prototype.onTouchButtonAdH5=function(e){e.isClick()&&c.default.triggerAdEvent("ad_h5",null,!0)},t.prototype.onTouchButtonFindMeBaidu=function(e){e.isClick()&&d.default.warpDialogWithSmallEffect("vFindMeBaiduDialog")},t.prototype.onTouchButtonFindMeDouyin=function(e){e.isClick()&&d.default.warpDialogWithSmallEffect("vFindMeDouyinDialog")},t.prototype.onTouchButtonFindMeToutiao=function(e){e.isClick()&&d.default.warpDialogWithSmallEffect("vFindMeToutiaoDialog")},t.prototype.onTouchButtonFindMeWeiXin=function(e){e.isClick()&&d.default.warpDialogWithSmallEffect("vFindMeWechatDialog")},t.prototype.onTouchButtonJumpOtherGame2=function(e){e.isClick()&&d.default.warpDialogWithSmallEffect("vJumpOtherGameDialog")},t.prototype.onTouchButtonDoubleSpeed=function(e){e.isClick()},t.prototype.onTouchButtonBuildingStore=function(e){e.isClick()&&d.default.warpDialogWithEffect("vBuildingStoreDialog")},t.prototype.onTouchButtonDesign=function(e){e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"vHudDialog.buttonDesign.click"}),C.default.beginStage(2001,{backSceneName:"vHudDialog"}))},t.prototype.onTouchButtonSuit=function(e){e.isClick()&&d.default.warpDialogWithEffect("vSubjectSuitDressDialog",{bFromHud:!0})},t.prototype.onTouchButtonSharebak=function(e){},t.prototype.onTouchButtonAddShortCut=function(e){e.isClick()&&_.default.installShortcut()},t.prototype.onTouchButtonMall=function(e){e.isClick()&&d.default.warpDialogWithSmallEffect("vMallDialog",{bFromHud:!0})},t.prototype.onTouchButtonShop=function(e){e.isClick()&&d.default.warpDialogWithSmallEffect("vShopDialog",{bFromHud:!0})},t.prototype.onTouchButtonOpNcov=function(e){e.isClick()&&this.showNcovTip()},t.prototype.onTouchButtonWelfare=function(e){e.isClick()&&d.default.warpDialogWithSmallEffect("vWelfareDialog")},t.prototype.onTouchButtonWish=function(e){var t=this;if(e.isClick()){_.default.closeCrossRecommend();d.default.warpDialogWithSmallEffect("vWishDialog",{callback:function(){t._showCrossRecommend()}})}},t.prototype.onTouchButtonMoreGame=function(e){e.isClick()&&cc.sys.isNative&&!G.default._temp_isH5()&&_.default.openULMoreGame()},t.prototype.onTouchButtonMoreGameBox=function(e){e.isClick()&&_.default.openChannelMoreGameBox()},t.prototype.onTouchButton51Happy=function(e){var t=this;if(e.isClick()){_.default.closeCrossRecommend();d.default.warpDialogWithSmallEffect("vHappyFiveOneDialog",{callback:function(){t._showCrossRecommend()}})}},t.prototype.onTouchButtonMoreWonderful=function(e){e.isClick()&&_.default.openMoreWonderful()},t.prototype.onTouchButtonMiniGameDouyin=function(e){e.isClick()&&d.default.openDialog("vMiniGameDouyinDialog")},t.prototype.onTouchButtonShortCutDouyin=function(e){e.isClick()&&d.default.openDialog("vShortCutDouyinDialog")},t.prototype.onTouchButtonMidAutumnLottery=function(e){e.isClick()&&d.default.openDialog("vOpMidAutumnLotteryDialog")},t.prototype.onTouchButtonVideoRecorder=function(e){e.isClick()&&(K.default.recordStatus!=K.default.PRE_RECORD?K.default.recordStatus!=K.default.RECORDING?K.default.recordStatus!=K.default.RECORD_FINISH||_.default.shareGameVideo("","\u4e3b\u754c\u9762"):K.default.stopRecordGameVideo():K.default.tryStartRecordGameVideo())},t.prototype.onMsgItemBuySuccessd=function(e){this.layoutButtons()},t.prototype.onMsgItemAmountChanged=function(e){this.layoutButtons();var t=e.itemId;if(!this.context.bDisableAutoRefresh&&t==l.default.ITEM_ID_AVATAR_ORDER){if(this.refreshBuildOrderData(),!this.nodeBuildingStoreOrder||!cc.isValid(this.nodeBuildingStoreOrder)||0!=this.nodeBuildingStoreOrder.getNumberOfRunningActions())return;this.nodeBuildingStoreOrder.runAction(cc.sequence(cc.scaleTo(.2,1.3,1.3),cc.scaleTo(.2,1,1)))}},t.prototype.onMsgPkMirrorDailyInfoRefreshed=function(e){this.layoutButtons()},t.prototype.onMsgAdEventSuccessd=function(e){var t=e.adEventId;if(this.lastOperationTime=i.default.time(),t==this.AD_POP_SUNSHINE_MORE_TIME_NAME)this.speededCount=this.SPEED_FULL_COUNT,this.speedProgressPercent=Math.min(this.speededCount/this.SPEED_FULL_COUNT,1),this.flagStartPopSunShine(),this.bTriggeredCrazyTimeAd=!1,this.bAutoFullOrderNum=!0;else if(t==this.AD_VIDEO_DOUBLE_EMPLOYEE_FOOT_REWARD_NAME)R.default.flagDoubleFootReward();else if(t==this.AD_VIDEO_FREE_GOLD_NAME);else if(t==this.AD_VIDEO_ADD_ORDER){var o=g.default.getItemAmount(l.default.ITEM_ID_MAX_AVATAR_ORDER)-g.default.getItemAmount(l.default.ITEM_ID_AVATAR_ORDER);g.default.addItemAmount(l.default.ITEM_ID_AVATAR_ORDER,o,"\u4e3b\u754c\u9762\u52a0\u6ee1\u8ba2\u5355"),S.default.showMsgTip(W.default.getText("vHudDialog.9"))}},t.prototype.onMsgAdEventFaild=function(e){e.adEventId;this.lastOperationTime=i.default.time()},t.prototype.onMsgAdEventCanceled=function(e){this.onMsgAdEventFaild(e)},t.prototype.onMsgGuideFlowerSpeed=function(){this.speededCount=this.SPEED_FULL_COUNT-3,this.speedProgressPercent=Math.min(this.speededCount/this.SPEED_FULL_COUNT,1),this.MAX_POP_FLOWER_POWER_TIME/=3,this.SPEED_PROGRESS_CHANGE_STEP*=5},t.prototype.onMsgPvpPkLvupGarden=function(e){},t.prototype.onMsgReceivedOfflineReward=function(){},t.prototype.onButtonTouched=function(){this.lastOperationTime=i.default.time()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.layoutButtons()},t.prototype.onTouchHandler=function(e){e.name},t.prototype.isClickShadowClose=function(){return!1},r([E.default.requireResourceLoaded],t.prototype,"tryUpdateNodeZIndex",null),t=r([q],t)}(s.default);o.default=Y,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrAchievement":"mgrAchievement","../../manager/mgrAd":"mgrAd","../../manager/mgrBuildingStore":"mgrBuildingStore","../../manager/mgrChannel":"mgrChannel","../../manager/mgrDailyQuest":"mgrDailyQuest","../../manager/mgrDebug":"mgrDebug","../../manager/mgrDirector":"mgrDirector","../../manager/mgrEffect":"mgrEffect","../../manager/mgrEmployee":"mgrEmployee","../../manager/mgrGuide":"mgrGuide","../../manager/mgrHappyFiveOne":"mgrHappyFiveOne","../../manager/mgrI18n":"mgrI18n","../../manager/mgrNative":"mgrNative","../../manager/mgrOfflinePvp":"mgrOfflinePvp","../../manager/mgrOnline":"mgrOnline","../../manager/mgrOpMidAutumnLottery":"mgrOpMidAutumnLottery","../../manager/mgrOpNcov":"mgrOpNcov","../../manager/mgrPkMirror":"mgrPkMirror","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrPool":"mgrPool","../../manager/mgrSdk":"mgrSdk","../../manager/mgrSign":"mgrSign","../../manager/mgrSound":"mgrSound","../../manager/mgrStage":"mgrStage","../../manager/mgrTip":"mgrTip","../../manager/mgrVideoRecorder":"mgrVideoRecorder","../node/vCommonTitleBarRmbGold":"vCommonTitleBarRmbGold","../node/vEventNpc":"vEventNpc","../node/vHudJumpGameNode":"vHudJumpGameNode","../node/vHudStaffUnit":"vHudStaffUnit","../node/vItemAmountNode":"vItemAmountNode","../node/vJumpOtherGameSidebarItem":"vJumpOtherGameSidebarItem","../node/vOrderIcon":"vOrderIcon","../node/vShoper":"vShoper","./vPromptHudCrazyDialog":"vPromptHudCrazyDialog","./vPromptOpenStoreDialog":"vPromptOpenStoreDialog"}],vHudFreeGoldDialog:[function(e,t,o){"use strict";cc._RF.push(t,"2a1d2wkjA9KioPXEX8nxp4W","vHudFreeGoldDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrPlayer"),l=e("../../Const"),c=e("../../manager/mgrTip"),u=e("../../manager/mgrAd"),d=e("../../../ulframework/component/ToggleButton"),p=cc._decorator,h=p.ccclass,f=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.button2=null,t.buttonClose=null,t.labelAmount=null,t.labelButton1=null,t.labelButton2=null,t.labelTitle=null,t.layoutOnline=null,t.nodeAdButtonFlag=null,t.nodeTitle=null,t.toggleTipSelect=null,t.AD_VIDEO_FREE_GOLD_NAME="video_free_gold_name",t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vHudFreeGoldDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[a.default,"onTouchButton1"],CC_button2:[a.default,"onTouchButton2"],CC_buttonClose:[a.default,"onTouchButtonClose"],CC_toggleTipSelect:[d.default,"onTouchToggleTipSelect"],CC_labelAmount:[cc.Label],CC_labelButton1:[cc.Label],CC_labelButton2:[cc.Label],CC_labelTitle:[cc.Label],CC_layoutOnline:[cc.Layout],CC_nodeAdButtonFlag:[cc.Node],CC_nodeTitle:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this);var t=s.default.getBascRewardGold();this.rewardAmount=Math.ceil(1.8*t),this.labelAmount.string=ul.format("%s",s.default.getItemAmountStr(this.rewardAmount)),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd.bind(this),MSG_AD_EVENT_FAILD:this.onMsgAdEventFaild.bind(this),MSG_AD_EVENT_CANCELED:this.onMsgAdEventCanceled.bind(this)}),u.default.showIntAd(),this.adaptAdMode(),u.default.showBannerAd(this.nodeResource,"ad_banner_hud_free_gold_dialog")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onOpenDialogCompleted=function(){c.default.addJumpOtherGameBannerItem(this.nodeResource)},t.prototype.onCloseDialogStart=function(){u.default.closeBannerAd()},t.prototype.adaptAdMode=function(){this.layoutOnline.node.active=!1,this.button1.node.active=!1,u.default.isOnline()?this.toggleTipSelect.isPressed()?(this.labelButton2.setLocalizedString("vBuildStoreResultDialog.5"),this.nodeAdButtonFlag.active=!0):(this.labelButton2.setLocalizedString("vBuildStoreResultDialog.15"),this.nodeAdButtonFlag.active=!1):this.buttonClose.node.active=!0},t.prototype.onTouchButton1=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButton2=function(e){e.isClick()&&(!u.default.isOnline()||this.toggleTipSelect.isPressed()?u.default.triggerAdEvent(this.AD_VIDEO_FREE_GOLD_NAME,null,!0):this.closeDialog())},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchToggleTipSelect=function(e){e.isClick()&&this.adaptAdMode()},t.prototype.onMsgAdEventSuccessd=function(e){var t=e;cc.log("---offline onMsgAdEventSuccessd data=",t),t.adEventId==this.AD_VIDEO_FREE_GOLD_NAME&&(s.default.addItemAmount(l.default.ITEM_ID_GOLD,this.rewardAmount,"\u514d\u8d39\u91d1\u5e01_\u5e7f\u544a"),c.default.addGotItemTip(l.default.ITEM_ID_GOLD,this.rewardAmount),this.closeDialog())},t.prototype.onMsgAdEventFaild=function(e){e.adEventId;this.AD_VIDEO_FREE_GOLD_NAME},t.prototype.onMsgAdEventCanceled=function(e){this.onMsgAdEventFaild(e)},t.prototype.isClickShadowClose=function(){return!1},t=r([h],t)}(i.default));o.default=f,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/component/ToggleButton":"ToggleButton","../../../ulframework/view/DialogBase":"DialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrTip":"mgrTip"}],vHudFreeRmbDialog:[function(e,t,o){"use strict";cc._RF.push(t,"f3cdbhAHBZIEoGpD4OvAfSN","vHudFreeRmbDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrPlayer"),l=e("../../Const"),c=e("../../manager/mgrTip"),u=e("../../manager/mgrAd"),d=e("../../../ulframework/component/ToggleButton"),p=cc._decorator,h=p.ccclass,f=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.button2=null,t.buttonClose=null,t.labelAmount=null,t.labelButton1=null,t.labelButton2=null,t.labelTitle=null,t.layoutOnline=null,t.nodeAdButtonFlag=null,t.nodeTitle=null,t.toggleTipSelect=null,t.AD_VIDEO_FREE_RMB_NAME="video_free_rmb_name",t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vHudFreeRmbDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[a.default,"onTouchButton1"],CC_button2:[a.default,"onTouchButton2"],CC_buttonClose:[a.default,"onTouchButtonClose"],CC_toggleTipSelect:[d.default,"onTouchToggleTipSelect"],CC_labelAmount:[cc.Label],CC_labelButton1:[cc.Label],CC_labelButton2:[cc.Label],CC_labelTitle:[cc.Label],CC_layoutOnline:[cc.Layout],CC_nodeAdButtonFlag:[cc.Node],CC_nodeTitle:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.rewardAmount=50,this.labelAmount.string=ul.format("%s",s.default.getItemAmountStr(this.rewardAmount)),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd.bind(this),MSG_AD_EVENT_FAILD:this.onMsgAdEventFaild.bind(this),MSG_AD_EVENT_CANCELED:this.onMsgAdEventCanceled.bind(this)}),u.default.showIntAd(),this.adaptAdMode()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onOpenDialogCompleted=function(){c.default.addJumpOtherGameBannerItem(this.nodeResource)},t.prototype.adaptAdMode=function(){this.layoutOnline.node.active=!1,this.button1.node.active=u.default.isMcprc(),u.default.isOnline()?this.toggleTipSelect.isPressed()?(this.labelButton2.string="\u9886\u53d6",this.nodeAdButtonFlag.active=!0):(this.labelButton2.string="\u4e0d\u4e86",this.nodeAdButtonFlag.active=!1):this.buttonClose.node.active=!1},t.prototype.onTouchButton1=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButton2=function(e){e.isClick()&&(!u.default.isOnline()||this.toggleTipSelect.isPressed()?u.default.triggerAdEvent(this.AD_VIDEO_FREE_RMB_NAME,null,!0):this.closeDialog())},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchToggleTipSelect=function(e){e.isClick()&&this.adaptAdMode()},t.prototype.onMsgAdEventSuccessd=function(e){var t=e;cc.log("---offline onMsgAdEventSuccessd data=",t),t.adEventId==this.AD_VIDEO_FREE_RMB_NAME&&(s.default.addItemAmount(l.default.ITEM_ID_RMB,this.rewardAmount,"\u514d\u8d39\u94bb\u77f3_\u5e7f\u544a"),c.default.addGotItemTip(l.default.ITEM_ID_RMB,this.rewardAmount),this.closeDialog())},t.prototype.onMsgAdEventFaild=function(e){e.adEventId;this.AD_VIDEO_FREE_RMB_NAME},t.prototype.onMsgAdEventCanceled=function(e){this.onMsgAdEventFaild(e)},t.prototype.isClickShadowClose=function(){return!1},t=r([h],t)}(i.default));o.default=f,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/component/ToggleButton":"ToggleButton","../../../ulframework/view/DialogBase":"DialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrTip":"mgrTip"}],vHudJumpGameNode:[function(e,t,o){"use strict";cc._RF.push(t,"4e6d4f4iTlGwpesDClL1WuJ","vHudJumpGameNode");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrSdk"),l=e("../../manager/mgrChannel"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currIndex=-1,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vHudJumpGameNode"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonJump:[a.default,"onTouchButtonJump"],CC_spriteIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit(),this.setContentSize(this.nodeResource.getContentSize())},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onLoadedInit=function(){this.changeIndex(),this.runItemAction()},t.prototype.runItemAction=function(){var e=this;this.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1.5),cc.rotateTo(.125,15).easing(cc.easeOut(1.5)),cc.rotateTo(.25,-15).easing(cc.easeInOut(1.5)),cc.rotateTo(.25,15).easing(cc.easeInOut(1.5)),cc.rotateTo(.25,-15).easing(cc.easeInOut(1.5)),cc.rotateTo(.125,0).easing(cc.easeIn(1.5)),cc.delayTime(1.5),cc.callFunc(function(){e.changeIndex()}))))},t.prototype.changeIndex=function(){s.default.openJump("70","single"),this.currIndex=this.currIndex+1;var e=l.default.getInterPushConfig(),t=e[this.currIndex];t&&t.gameId||(this.currIndex=0,t=e[this.currIndex]),t&&t.gameId&&this.spriteIcon.loadSpriteFrameAndKeepSize(t.url)},t.prototype.onTouchButtonJump=function(e){if(e.isClick()){var t=l.default.getInterPushConfig(),o=t[this.currIndex];if(o&&o.gameId||(o=t[0]),o&&o.gameId){var n=o.gameId;s.default.jumpOtherGame(n,"single")}}},t=r([u],t)}(i.default));o.default=d,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrChannel":"mgrChannel","../../manager/mgrSdk":"mgrSdk"}],vHudRankDialog:[function(e,t,o){"use strict";cc._RF.push(t,"d90b7uuaMZHlpxck05wsvHn","vHudRankDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/utils/Tools"),s=e("../../../ulframework/view/ReuseLayouterVBox"),l=e("../../../ulframework/view/ReuseLayouterVGrid"),c=e("../../../ulframework/view/ReuseList"),u=e("../../../ulframework/view/DialogBase"),d=e("../../manager/mgrAd"),p=e("../../manager/mgrDirector"),h=e("../../manager/mgrOfflinePvp"),f=e("../../manager/mgrPlayer"),g=e("../../manager/mgrTip"),m=e("../../struct/sAvatar"),_=e("../node/vAvatar"),v=e("../node/vPartRankItem"),y=e("../node/vRankItem"),C=e("../../Const"),S=e("../../manager/mgrPkMirror"),b=e("../node/vPkMirrorRankListItem"),R=e("../../../ulframework/component/ToggleButton"),T=e("../../../ulframework/utils/Timer"),A=e("../../manager/mgrEffect"),D=e("../../manager/mgrOfflineStoreRank"),I=e("../node/vStoreRankListItem"),w=e("../../manager/mgrSound"),L=e("../../manager/mgrI18n"),P=cc._decorator.ccclass,k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonGoPkMirror=null,t.buttonGoPvp=null,t.buttonMyRankPkMirror=null,t.buttonMyRankPvp=null,t.buttonMyRankSell=null,t.labelNamePkMirror=null,t.labelNamePvp=null,t.labelNameSell=null,t.labelOffsetTipPvp=null,t.labelOffsetTipSell=null,t.labelRankPkMirror=null,t.labelRankPvp=null,t.labelRankSell=null,t.labelScorePkMirror=null,t.labelScorePvp=null,t.labelScoreSell=null,t.nodeAvatar=null,t.nodeBannerArea=null,t.nodeBgParticle1=null,t.nodeBgParticle2=null,t.nodeLayoutContent=null,t.nodeLight=null,t.nodeMyRankPkMirror=null,t.nodeMyRankPvp=null,t.nodeNoRankPkMirror=null,t.nodeNoRankPvp=null,t.nodeNoRankSell=null,t.nodePartList=null,t.nodePkPvp=null,t.nodeRankBase=null,t.nodeRankList=null,t.nodeRankListBase=null,t.nodeRankSellList=null,t.nodeRankedPkMirror=null,t.nodeRankedPvp=null,t.nodeRankedSell=null,t.nodeSell=null,t.nodeUIRoot=null,t.toggleButtonPkMirror=null,t.toggleButtonPvp=null,t.toggleButtonSell=null,t.players=[],t.listPvpRank=null,t.listPart=null,t.MAX_RANK_ITEM_COUNT=100,t.bFocusedSelf=!1,t.TAB_PVP=0,t.TAB_PKMIRROR=1,t.TAB_SELL=2,t.selectedTab=0,t.AD_INTER_VIEW_NAME="inter_hud_rank_dialog",t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vHudRankDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_buttonGoPkMirror:[a.default,"onTouchButtonGoPkMirror"],CC_buttonGoPvp:[a.default,"onTouchButtonGoPvp"],CC_buttonMyRankPkMirror:[a.default,"onTouchButtonMyRankPkMirror"],CC_buttonMyRankPvp:[a.default,"onTouchButtonMyRankPvp"],CC_buttonMyRankSell:[a.default,"onTouchButtonMyRankSell"],CC_toggleButtonPkMirror:[R.default,"onTouchToggleButtonPkMirror"],CC_toggleButtonPvp:[R.default,"onTouchToggleButtonPvp"],CC_toggleButtonSell:[R.default,"onTouchToggleButtonSell"],CC_labelNamePkMirror:[cc.Label],CC_labelNamePvp:[cc.Label],CC_labelNameSell:[cc.Label],CC_labelOffsetTipPvp:[cc.Label],CC_labelOffsetTipSell:[cc.Label],CC_labelRankPkMirror:[cc.Label],CC_labelRankPvp:[cc.Label],CC_labelRankSell:[cc.Label],CC_labelScorePkMirror:[cc.Label],CC_labelScorePvp:[cc.Label],CC_labelScoreSell:[cc.Label],CC_nodeAvatar:[cc.Node],CC_nodeBannerArea:[cc.Node],CC_nodeBgParticle1:[cc.Node],CC_nodeBgParticle2:[cc.Node],CC_nodeLayoutContent:[cc.Node],CC_nodeLight:[cc.Node],CC_nodeMyRankPkMirror:[cc.Node],CC_nodeMyRankPvp:[cc.Node],CC_nodeNoRankPkMirror:[cc.Node],CC_nodeNoRankPvp:[cc.Node],CC_nodeNoRankSell:[cc.Node],CC_nodePartList:[cc.Node],CC_nodePkPvp:[cc.Node],CC_nodeRankBase:[cc.Node],CC_nodeRankList:[cc.Node],CC_nodeRankListBase:[cc.Node],CC_nodeRankSellList:[cc.Node],CC_nodeRankedPkMirror:[cc.Node],CC_nodeRankedPvp:[cc.Node],CC_nodeRankedSell:[cc.Node],CC_nodeSell:[cc.Node],CC_nodeUIRoot:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(p.default.size),this.setContentSize(p.default.size);var t=p.default.size.height-1024;if(d.default.isBannerAdValid()){var o=d.default.getBannerHeight(),n=this.nodeRankBase.height;this.nodeRankBase.height=n+t-o,this.nodeSell.height=this.nodeSell.height+t-o,d.default.showViewEnterAd(this.nodeResource,null,this.AD_INTER_VIEW_NAME,"ad_banner_hud_rank_dialog")}else{n=this.nodeRankBase.height;this.nodeRankBase.height=n+t,this.nodeSell.height=this.nodeSell.height+t,d.default.showIntAd(null,this.AD_INTER_VIEW_NAME)}w.default.play(712)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onOpenDialogCompleted=function(){var e=this;T.default.callLater(.5,function(){e.onLoadedInit()}),this.playUIActionIn()},t.prototype.onCloseDialogStart=function(){this.context.backSceneName&&""!=this.context.backSceneName?d.default.showBannerAd(this.nodeResource,"ad_banner_hud_rank_dialog"):d.default.closeBannerAd()},t.prototype.onLoadedInit=function(){var e=this;this.selectedTab=this.context.selectedTab||0,this.buildUi();var t=this.nodeSell.getComponent(cc.Widget);this.nodeSell._originWidgetTop=t.top,t=this.nodePkPvp.getComponent(cc.Widget),this.nodePkPvp._originWidgetTop=t.top,this.refreshRankView(),this.nodeLight.runAction(cc.sequence(cc.delayTime(.3),cc.callFunc(function(){e.nodeLight.stopAllActions(),e.nodeLight.runAction(cc.repeatForever(cc.sequence(cc.fadeIn(2),cc.fadeOut(2))))}))),this.registerListeners({MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this)})},t.prototype.refreshRankView=function(){(this.refreshMyRank(),this.selectedTab==this.TAB_SELL)?(this.nodeSell.getComponent(cc.Widget).top=this.nodeSell._originWidgetTop,this.nodePkPvp.getComponent(cc.Widget).top=-1e4):(this.nodeSell.getComponent(cc.Widget).top=1e4,this.nodePkPvp.getComponent(cc.Widget).top=this.nodePkPvp._originWidgetTop,this.fillAvatar());this.fillRank(),this.nodePkPvp.opacity=255,this.nodeSell.opacity=255,this.updateButtonStatus()},t.prototype.updateButtonStatus=function(){this.toggleButtonPkMirror.setPressStatus(this.selectedTab==this.TAB_PKMIRROR),this.toggleButtonPvp.setPressStatus(this.selectedTab==this.TAB_PVP),this.toggleButtonSell.setPressStatus(this.selectedTab==this.TAB_SELL)},t.prototype.buildUi=function(){var e=this;this.labelNamePvp.node._originPos=this.labelNamePvp.node.position,this.labelNamePkMirror.node._originPos=this.labelNamePkMirror.node.position,this.nodeAvatar._originPos=this.nodeAvatar.position;var t=new m.default;this.structAvatar=t,this.viewAvatar=new _.default({structAvatar:this.structAvatar}),this.viewAvatar.parent=this.nodeAvatar,this.viewAvatar.refreshAll(),this.viewAvatar.setPreloadDelayRefresh(!0);var o=this.nodeRankList,n=new c.default;n.setLayouter((new s.default).setCellSize(486,80).setGap(0).setPending(10)),n.setCreator(function(t){var o=new y.default({fOnClick:e.onClickRankPlayer.bind(e)});o.parent=t,t.item=o}),n.setSetter(function(t,o){var n=t.item;n.fillByPlayer(o),n.setSelected(!(!e.selectedPvpPlayer||!o||e.selectedPvpPlayer.uid!=o.uid))}),n.parent=o,n.setContentSize(o.getContentSize()),n.setAnchorPoint(0,0),this.listPvpRank=n,(n=new c.default).setLayouter((new s.default).setCellSize(486,80).setGap(0).setPending(10)),n.setCreator(function(t){var o=new b.default({fOnClick:e.onClickRankPlayer.bind(e)});o.parent=t,t.item=o}),n.setSetter(function(t,o){var n=t.item;n.fillByPlayer(o),n.setSelected(e.selectedPkMirrorPlayer==o)}),n.parent=o,n.setContentSize(o.getContentSize()),n.setAnchorPoint(0,0),this.listPkMirrorRank=n,o=this.nodeRankSellList,(n=new c.default).setLayouter((new s.default).setCellSize(459,80).setGap(0).setPending(10)),n.setCreator(function(t){var o=new I.default({fOnClick:e.onClickRankPlayer.bind(e)});o.parent=t,t.item=o}),n.setSetter(function(t,o){var n=t.item;n.fillByPlayer(o),n.setSelected(!(!e.selectedSellPlayer||!o||e.selectedSellPlayer.uid!=o.uid))}),n.parent=o,n.setContentSize(o.getContentSize()),n.setAnchorPoint(0,0),this.listSellRank=n,o=this.nodePartList,(n=new c.default).setLayouter((new l.default).setCellSize(100,120).setGap(10,10).setCols(2).setPending(0)),n.setCreator(function(t){var o=new v.default({fOnClick:e.onClickCollectionItem.bind(e)});o.parent=t,t.item=o}),n.setSetter(function(e,t){e.item.fillByPartId(t.id)}),n.parent=o,n.setContentSize(o.getContentSize()),n.setAnchorPoint(0,0),this.listPart=n},t.prototype.playUIActionIn=function(){for(var e=[],t=[this.buttonClose.node,this.toggleButtonPvp.node,this.toggleButtonPkMirror.node,this.toggleButtonSell.node],o=0;o<t.length;o++){var n=t[o];n.active=!0,e.push({node:n,beginPos:cc.v2(n.x-300,n.y),endPos:n._originPos,delayTime:1.5+.01*o,dur:.3})}A.default.playMoveToActionArr(e,0,null)},t.prototype.fillRank=function(){this.selectedTab==this.TAB_PVP?this.fillPvpRank():this.selectedTab==this.TAB_PKMIRROR?this.fillPkMirrorRank():this.fillSellRank()},t.prototype.refreshMyRank=function(){this.buttonMyRankPvp.node.active=this.selectedTab==this.TAB_PVP,this.buttonMyRankPkMirror.node.active=this.selectedTab==this.TAB_PKMIRROR,this.buttonMyRankSell.node.active=this.selectedTab==this.TAB_SELL,this.listPvpRank.scale=this.selectedTab==this.TAB_PVP?1:1e-7,this.listPkMirrorRank.scale=this.selectedTab==this.TAB_PKMIRROR?1:1e-7,this.nodeMyRankPvp.active=this.selectedTab==this.TAB_PVP,this.nodeMyRankPkMirror.active=this.selectedTab==this.TAB_PKMIRROR,this.selectedTab==this.TAB_PVP?this.refreshMyPvpRank():this.selectedTab==this.TAB_PKMIRROR?this.refreshMyPkMirrorRank():this.refreshMySellRank()},t.prototype.refreshMyPvpRank=function(){this.nodeNoRankPvp.active=!1,this.nodeRankedPvp.active=!1;var e=!0,t=h.default.getPlayerData();if(t)if(!t.rank||t.rank<=0)this.nodeNoRankPvp.active=!0;else{e=!1;var o=this.listPvpRank.getDatas();if(o.length>=this.MAX_RANK_ITEM_COUNT){o[o.length-1].score,t.score;var n=L.default.getText("vHudRankDialog.1");this.labelOffsetTipPvp.string=n,this.labelOffsetTipPvp.node.active=!0,this.labelRankPvp.node.active=!1}else this.labelOffsetTipPvp.node.active=!1,this.labelRankPvp.node.active=!0;this.labelRankPvp.string=ul.format("%s",t.rank.toString()),this.labelNamePvp.string=ul.format("%s",t.name.toString()),this.labelScorePvp.string=ul.format("%s",t.score.toString()),this.nodeRankedPvp.active=!0}else this.nodeNoRankPvp.active=!0;this.buttonGoPvp.node.active=e},t.prototype.refreshMyPkMirrorRank=function(){this.nodeNoRankPkMirror.active=!1,this.nodeRankedPkMirror.active=!1;var e=!0,t=S.default.getPlayerData();if(t)if(!t.rank||t.rank<=0)this.nodeNoRankPkMirror.active=!0;else{e=!1;var o=t.score||0,n=o-S.default.getLevelTemplateByStar(o).basicStarNum;this.labelRankPkMirror.string=ul.format("%s",t.rank.toString()),this.labelNamePkMirror.string=ul.format("%s",t.name.toString()),this.labelScorePkMirror.string=ul.format("%s",n.toString()),i.default.layoutNodesHorizonCenter(this.labelScorePkMirror.node.parent.children,20),this.nodeRankedPkMirror.active=!0}else this.nodeNoRankPkMirror.active=!0;this.buttonGoPkMirror.node.active=e},t.prototype.refreshMySellRank=function(){this.nodeNoRankSell.active=!1,this.nodeRankedSell.active=!1;var e=D.default.getPlayerData();if(e)if(!e.rank||e.rank<=0)this.nodeNoRankSell.active=!0;else{var t=this.listSellRank.getDatas();if(t.length>=this.MAX_RANK_ITEM_COUNT){t[t.length-1].score,e.score;var o=L.default.getText("vHudRankDialog.1");this.labelOffsetTipSell.string=o,this.labelOffsetTipSell.node.active=!0,this.labelRankSell.node.active=!1}else this.labelOffsetTipSell.node.active=!1,this.labelRankSell.node.active=!0;this.labelRankSell.string=ul.format("%s",e.rank.toString()),this.labelNameSell.string=ul.format("%s",e.name.toString()),this.labelScoreSell.string=ul.format("%s",f.default.getItemAmountStr(e.score)),this.nodeRankedSell.active=!0}else this.nodeNoRankSell.active=!0},t.prototype.fillPvpRank=function(){for(var e=[],t=null,o=h.default.getPvpDatas(),n=i.default.getTableCount(o),r=0;r<n;r++){var a=o[r];e.push(a),t||(t=a)}if(this.listPvpRank.setDatas(e),this.selectedPvpPlayer)this.selectPlayer(this.selectedPvpPlayer);else{var s=Math.min(e.length,this.MAX_RANK_ITEM_COUNT),l=!1,c=h.default.getPlayerData();if(!this.bFocusedSelf&&c&&c.rank<=s&&(l=!0,this.bFocusedSelf=!0),l)for(var u=f.default.getUid(),d=0;d<e.length;d++){if((p=e[d]).uid==u){this.selectPlayer(p,!0);break}}if(!this.selectedPvpPlayer&&t){var p=t;this.selectPlayer(p)}}this.refreshMyRank()},t.prototype.fillPkMirrorRank=function(){for(var e=[],t=null,o=S.default.getPvpDatas(),n=i.default.getTableCount(o),r=0;r<n;r++){var a=o[r];e.push(a),t||(t=a)}if(this.listPkMirrorRank.setDatas(e),this.selectedPkMirrorPlayer)this.selectPlayer(this.selectedPkMirrorPlayer);else{var s=Math.min(e.length,this.MAX_RANK_ITEM_COUNT),l=!1,c=S.default.getPlayerData();if(!this.bFocusedSelf&&c&&c.rank<=s&&(l=!0,this.bFocusedSelf=!0),l)for(var u=f.default.getUid(),d=0;d<e.length;d++){if((p=e[d]).uid==u){this.selectPlayer(p,!0);break}}if(!this.selectedPkMirrorPlayer&&t){var p=t;this.selectPlayer(p)}}this.refreshMyRank()},t.prototype.fillSellRank=function(){for(var e=[],t=null,o=D.default.getPvpDatas(),n=i.default.getTableCount(o),r=0;r<n;r++){var a=o[r];e.push(a),t||(t=a)}if(this.listSellRank.setDatas(e),this.selectedSellPlayer)this.selectPlayer(this.selectedSellPlayer);else{var s=Math.min(e.length,this.MAX_RANK_ITEM_COUNT),l=!1,c=D.default.getPlayerData();if(!this.bFocusedSelf&&c&&c.rank<=s&&(l=!0,this.bFocusedSelf=!0),l)for(var u=f.default.getUid(),d=0;d<e.length;d++){if((p=e[d]).uid==u){this.selectPlayer(p,!0);break}}if(!this.selectedSellPlayer&&t){var p=t;this.selectPlayer(p)}}this.refreshMyRank()},t.prototype.fillAvatar=function(){var e=this,t=null;if(this.selectedTab==this.TAB_PVP?t=this.selectedPvpPlayer:this.selectedTab==this.TAB_PKMIRROR&&(t=this.selectedPkMirrorPlayer),t){this.structAvatar.fillBySerializeText(t.data),this.nodeAvatar.scale=1.3;var o=this.nodeAvatar._originPos;this.nodeAvatar.stopAllActions(),this.nodeAvatar.runAction(cc.sequence(cc.moveTo(.2,cc.v2(o.x-400,o.y)),cc.callFunc(function(){e.viewAvatar.refreshAll()}),cc.delayTime(.2),cc.moveTo(.2,o).easing(cc.easeBackOut())));for(var n=this.structAvatar.getUsedPartIds(),r=[],a=0;a<n.length;a++){var i=n[a];r.push({id:i,index:r.length})}this.listPart.setDatas(r)}},t.prototype.selectPlayer=function(e,t){void 0===t&&(t=!1),e&&(this.selectedTab==this.TAB_PVP?(this.selectedPvpPlayer=e,this.listPvpRank.refreshActiveCells(),t&&this.listPvpRank.jumpToData(e)):this.selectedTab==this.TAB_PKMIRROR?(this.selectedPkMirrorPlayer=e,this.listPkMirrorRank.refreshActiveCells(),t&&this.listPkMirrorRank.jumpToData(e)):(this.selectedSellPlayer=e,this.listSellRank.refreshActiveCells(),t&&this.listSellRank.jumpToData(e)),this.fillAvatar())},t.prototype.onTouchButtonClose=function(e){e.isClick()&&(this.context.backSceneName&&""!=this.context.backSceneName?p.default.warpDialogWithEffect(this.context.backSceneName):p.default.warpDialogWithEffect("vHudDialog"))},t.prototype.onTouchButtonMyRankPkMirror=function(e){if(e.isClick()){var t=S.default.getPlayerData();t&&this.selectPlayer(t)}},t.prototype.onTouchButtonMyRankPvp=function(e){if(e.isClick()){var t=h.default.getPlayerData();t&&this.selectPlayer(t)}},t.prototype.onTouchToggleButtonPkMirror=function(e){e.isClick()&&(this.selectedTab=this.TAB_PKMIRROR,this.refreshRankView())},t.prototype.onTouchToggleButtonPvp=function(e){e.isClick()&&(this.selectedTab=this.TAB_PVP,this.refreshRankView())},t.prototype.onTouchButtonMyRankSell=function(e){},t.prototype.onTouchToggleButtonSell=function(e){e.isClick()&&(this.selectedTab=this.TAB_SELL,this.refreshRankView())},t.prototype.onTouchButtonGoPkMirror=function(e){e.isClick()&&p.default.warpDialogWithEffect("vPkMirrorDialog")},t.prototype.onTouchButtonGoPvp=function(e){e.isClick()&&p.default.warpDialogWithEffect("vPvpPkDialog")},t.prototype.onClickCollectionItem=function(e){g.default.showItemDetailDialog(e,1,{bCanBuy:!0,reason:"\u70b9\u51fb_\u5468\u8d5b\u6392\u884c\u754c\u9762\u8d2d\u4e70\u90e8\u4ef6"})},t.prototype.onClickRankPlayer=function(e){this.selectPlayer(e)},t.prototype.onMsgItemAmountChanged=function(e){e&&e.itemId&&e.itemId!=C.default.ITEM_ID_GOLD&&this.fillAvatar()},t.prototype.isClickShadowClose=function(){return!1},t=r([P],t)}(u.default);o.default=k,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/component/ToggleButton":"ToggleButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../../ulframework/view/ReuseLayouterVBox":"ReuseLayouterVBox","../../../ulframework/view/ReuseLayouterVGrid":"ReuseLayouterVGrid","../../../ulframework/view/ReuseList":"ReuseList","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrDirector":"mgrDirector","../../manager/mgrEffect":"mgrEffect","../../manager/mgrI18n":"mgrI18n","../../manager/mgrOfflinePvp":"mgrOfflinePvp","../../manager/mgrOfflineStoreRank":"mgrOfflineStoreRank","../../manager/mgrPkMirror":"mgrPkMirror","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrSound":"mgrSound","../../manager/mgrTip":"mgrTip","../../struct/sAvatar":"sAvatar","../node/vAvatar":"vAvatar","../node/vPartRankItem":"vPartRankItem","../node/vPkMirrorRankListItem":"vPkMirrorRankListItem","../node/vRankItem":"vRankItem","../node/vStoreRankListItem":"vStoreRankListItem"}],vHudStaffUnit:[function(e,t,o){"use strict";cc._RF.push(t,"35fbcqmtc1MAJJYyJ13PABY","vHudStaffUnit");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/view/ViewBase"),i=e("../../manager/mgrEmployee"),s=e("../../manager/mgrPool"),l=e("../../../ulframework/utils/Tools"),c=e("../../../ulframework/utils/Timer"),u=cc._decorator.ccclass,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.genFootGoldTimeArr=[],t.nodeFlag=null,t.nodeFlagContent=null,t.nodeUnit=null,t.SPINE_MOV_IDLE="mov_1",t.SPINE_MOV_WALK="mov_2",t.SPINE_MOV_RUN="mov_3",t.SPINE_MOV_WORK="mov_4",t.GEN_GOLD_TIME_GAP=.05,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vHudStaffUnit"},t.prototype._getResourceBindingConfig=function(){return{CC_nodeFlag:[cc.Node],CC_nodeFlagContent:[cc.Node],CC_nodeUnit:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.tryGenFootGoldEnterFrame=function(){var e=this.genFootGoldTimeArr[0];if(e&&!(l.default.time()<e||this.lastGenGoldTime+this.GEN_GOLD_TIME_GAP>l.default.time())){this.lastGenGoldTime=l.default.time(),this.genFootGoldTimeArr.shift();var t=this.parent.convertToWorldSpaceAR(this.position);this.context.fReceiveFootReward(t)}},t.prototype.tryUpdateUIInfo=function(){this.isResourceLoaded()&&(this.nodeFlagContent.scaleX=this.scaleX>0?Math.abs(this.nodeFlagContent.scaleX):-Math.abs(this.nodeFlagContent.scaleX))},t.prototype.changeScaleX=function(e){this.scaleX=e,this.tryUpdateUIInfo()},t.prototype.onTimerHandler=function(){this.tryGenFootGoldEnterFrame()},t.prototype.onLoadedInit=function(){this.nodeFlag._originPos=this.nodeFlag.position;var e=this.getStaff(),t=s.default.get("spine",e.template.spineId);t&&(t.parent=this.nodeUnit,t.play(this.context.mov||"mov_1",!0)),this.spine=t,this.nodeUnit.scale=this.context.initUnitScale||1,this.nodeFlag.y=this.nodeFlag._originPos.y*this.nodeUnit.scale,c.default.callLoop(.12,this.onTimerHandler.bind(this),this)},t.prototype.setUnitScale=function(e){this.nodeUnit.scale=(e||1)*(this.context.initUnitScale||1),this.nodeFlag.y=this.nodeFlag._originPos.y*this.nodeUnit.scale},t.prototype.idle=function(){this.doSpineMov(this.SPINE_MOV_IDLE)},t.prototype.walk=function(){this.doSpineMov(this.SPINE_MOV_WALK)},t.prototype.run=function(){this.doSpineMov(this.SPINE_MOV_RUN)},t.prototype.work=function(){this.doSpineMov(this.SPINE_MOV_WORK)},t.prototype.leaflet=function(){this.spine&&(this.spine.play([this.SPINE_MOV_RUN,this.SPINE_MOV_WALK],!0),this.currSpineMov=this.SPINE_MOV_WALK)},t.prototype.workOnce=function(){this.spine&&(this.spine.play([this.SPINE_MOV_WORK,this.SPINE_MOV_IDLE],!0),this.currSpineMov=this.SPINE_MOV_WALK)},t.prototype.doSpineMov=function(e){this.spine&&this.currSpineMov!=e&&(this.spine.play(e,!0),this.currSpineMov=e)},t.prototype.setTimeScale=function(e){this.spine&&this.spine.setTimeScale(e)},t.prototype.isStayForever=function(){return this.context.bStayMapForever},t.prototype.getStaff=function(){var e=this.context.staffId;return i.default.getEmployee(e)},t.prototype.getFps=function(){var e=this.getStaff();return e&&e.template.fpsMap||100},t.prototype.setOuting=function(e){this.bOuting=e},t.prototype.isOuting=function(){return this.bOuting},t.prototype.tryGenFootGold=function(e){this.genFootGoldTimeArr.push(e)},r([a.default.requireResourceLoaded],t.prototype,"setUnitScale",null),t=r([u],t)}(a.default);o.default=d,cc._RF.pop()},{"../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrEmployee":"mgrEmployee","../../manager/mgrPool":"mgrPool"}],vInputNameDialog:[function(e,t,o){"use strict";cc._RF.push(t,"29534RC0KhD87O72v62tUiI","vInputNameDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrPlayer"),l=e("../../manager/mgrI18n"),c=cc._decorator.ccclass,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonConfrim=null,t.buttonRandom=null,t.labelDisplay=null,t.labelName=null,t.labelTitle=null,t.layoutBg=null,t.layoutVersion=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vInputNameDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonConfrim:[a.default,"onTouchButtonConfrim"],CC_buttonRandom:[a.default,"onTouchButtonRandom"],CC_labelDisplay:[cc.Label],CC_labelName:[cc.Label],CC_labelTitle:[cc.Label],CC_layoutBg:[cc.Layout],CC_layoutVersion:[cc.Layout]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onLoadedInit=function(){this._execRandomName(),this.shakeRandomButton(!0)},t.prototype.shakeRandomButton=function(e){e?this.buttonRandom.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.1),cc.scaleTo(.6,.9),cc.scaleTo(.3,1)))):(this.buttonRandom.node.stopAllActions(),this.buttonRandom.node.setScale(1))},t.prototype._execRandomName=function(){var e=s.default.createRandomName(l.default.getLanguage());this._setNameText(e)},t.prototype._setNameText=function(e){e||(e=""),this.labelName.string=e,this.shakeRandomButton(e.length<1)},t.prototype.onTouchButtonConfrim=function(e){if(e.isClick()&&!this.bCommiting){var t=this.labelName.string;if(t.length>1){this.bCommiting=!0,s.default.setName(t);this.closeDialog()}else this._setNameText("")}},t.prototype.onTouchButtonRandom=function(e){e.isClick()&&this._execRandomName()},t.prototype.isClickShadowClose=function(){return!1},t=r([c],t)}(i.default);o.default=u,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPlayer":"mgrPlayer"}],vInstallShortCutComfirmDialog:[function(e,t,o){"use strict";cc._RF.push(t,"16772y0dblAnIJ028f3lM8D","vInstallShortCutComfirmDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrSdk"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonOk=null,t.nodeLeftTop=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vInstallShortCutComfirmDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_buttonOk:[a.default,"onTouchButtonOk"],CC_nodeLeftTop:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.registerListeners({MSG_SDK_INSTALL_SHORT_CUT_SUC:this.onMsgSdkInstallShortCutSuc})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonOk=function(e){e.isClick()&&s.default.installShortcut()},t.prototype.onMsgSdkInstallShortCutSuc=function(){this.closeDialog()},t=r([c],t)}(i.default));o.default=u,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrSdk":"mgrSdk"}],vItemAmountNode:[function(e,t,o){"use strict";cc._RF.push(t,"1fe0cN5St1H+Yt/tRe9ZGLW","vItemAmountNode");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/view/ViewBase"),i=e("../../manager/mgrPlayer"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelCount=null,t.spriteIcon=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vItemAmountNode"},t.prototype._getResourceBindingConfig=function(){return{CC_labelCount:[cc.Label],CC_spriteIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onLoadedInit=function(){this.spriteIcon.loadSpriteFrameAndKeepSize(i.default.getIcon(this.context.itemId)),this.labelCount.string=ul.format("+%s",i.default.getItemAmountStr(this.context.amount||0))},t=r([l],t)}(a.default));o.default=c,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrPlayer":"mgrPlayer"}],vItemIcon:[function(e,t,o){"use strict";cc._RF.push(t,"f88a7oxw6NAT59j3gHGuWwB","vItemIcon");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/ViewBase"),c=e("../../../ulframework/utils/Tools"),u=e("../../manager/mgrTip"),d=e("../../manager/mgrCfg"),p=e("../../manager/mgrPlayer"),h=e("./vLevelBar"),f=cc._decorator.ccclass,g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"node/vItemIcon"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBg:[s.default,"onTouchButtonBg"],CC_labelName:[cc.Label],CC_nodeIcon:[cc.Node],CC_nodeLevel:[cc.Node],CC_spriteBg:[cc.Sprite],CC_spriteFlag:[cc.Sprite],CC_spriteIcon:[cc.Sprite],CC_spriteLockFlag:[cc.Sprite],CC_spriteOwnFlag:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouchButtonBg=function(e){if(e.isClick()&&!(c.default.pDistance(e.getStartLocation(),e.getLocation())>=20)&&(this.context.fOnClick&&this.context.fOnClick(this.itemId),this.context.autoShowDetailContext)){var t=c.default.clone(this.context.autoShowDetailContext);u.default.showItemDetailDialog(this.itemId,this.amount,t)}},t.prototype.onLoadedInit=function(){if(this.spriteFlag.node.active=!1,this.spriteLockFlag.node.active=!1,this.spriteOwnFlag.node.active=!1,this.context.bShowLevel){var e=new h.default;e.parent=this.nodeLevel,this.levelBar=e}},t.prototype.fillByItemId=function(e,t){return void 0===t&&(t=1),a(this,void 0,void 0,function(){var o,n;return i(this,function(r){return t=t||1,this.itemId=e,this.amount=t,o=d.default.get("item_template_db",this.itemId)||{},this.spriteIcon.loadSpriteFrameAndKeepSize(o.icon||"2d/icon/unknown.png"),this.context.bShowLock&&p.default.getItemAmount(this.itemId)<=0?this.spriteLockFlag.node.active=!0:this.spriteLockFlag.node.active=!1,this.context.bShowLevel&&this.levelBar.setLevel(5,o.level||0),n="",this.context.bShowName&&(n=o.name||"\u672a\u77e5"),this.context.bShowAmount&&this.amount>1&&(n=ul.format("%s+%d",n,this.amount)),""!=n?(this.labelName.node.active=!0,this.labelName.string=n):this.labelName.node.active=!1,this.context.bShowOwn&&p.default.getItemAmount(this.itemId)>0?this.spriteOwnFlag.node.active=!0:this.spriteOwnFlag.node.active=!1,[2]})})},t.prototype.setFlagTexture=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){return this.spriteFlag.node?(null!=e?(this.spriteFlag.loadSpriteFrame(e),this.spriteFlag.node.active=!0):this.spriteFlag.node.active=!1,[2]):[2]})})},t.prototype.setBgTexture=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){return this.spriteBg.node?(null!=e?(this.spriteBg.loadSpriteFrame(e),this.spriteBg.node.active=!0):this.spriteBg.node.active=!1,[2]):[2]})})},t.prototype.setBgTextureOpacity=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){return this.spriteBg.node?(this.spriteBg.node.opacity=e,[2]):[2]})})},t.prototype.setName=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){return this.labelName.node?(null!=e?(this.labelName.string=e,this.labelName.node.active=!0):this.labelName.node.active=!1,[2]):[2]})})},t.prototype.setIconTexture=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){return this.spriteIcon.node?(null!=e?(this.spriteIcon.loadSpriteFrameAndKeepSize(e),this.spriteIcon.node.active=!0):this.spriteIcon.node.active=!1,[2]):[2]})})},t.prototype.updateLabel=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){return e.appendPos&&(this.labelName.node.position=cc.v2(this.labelName.node.x+e.appendPos.x,this.labelName.node.y+e.appendPos.y)),e.fontColor&&(this.labelName.node.color=e.fontColor),e.outColor&&(this.labelName.node.getComponent(cc.LabelOutline).color=e.outColor),e.outWidth&&(this.labelName.node.getComponent(cc.LabelOutline).width=e.outWidth),e.appendLevelPos&&(this.nodeLevel.position=cc.v2(this.nodeLevel.x+e.appendLevelPos.x,this.nodeLevel.y+e.appendLevelPos.y)),e.scaleIcon&&(this.nodeIcon.scale=e.scaleIcon),e.scaleLevel&&(this.levelBar.scale=e.scaleLevel),this.labelName.fontSize=e.fontSize||20,this.labelName.lineHeight=this.labelName.fontSize+2*this.labelName.node.getComponent(cc.LabelOutline).width,[2]})})},t.prototype.getNameLabelNode=function(){return this.labelName},t.prototype.disableTouch=function(){return a(this,void 0,void 0,function(){return i(this,function(e){return this.buttonBg.node.removeComponent(s.default),[2]})})},r([l.default.requireResourceLoaded],t.prototype,"fillByItemId",null),r([l.default.requireResourceLoaded],t.prototype,"setFlagTexture",null),r([l.default.requireResourceLoaded],t.prototype,"setBgTexture",null),r([l.default.requireResourceLoaded],t.prototype,"setBgTextureOpacity",null),r([l.default.requireResourceLoaded],t.prototype,"setName",null),r([l.default.requireResourceLoaded],t.prototype,"setIconTexture",null),r([l.default.requireResourceLoaded],t.prototype,"updateLabel",null),r([l.default.requireResourceLoaded],t.prototype,"disableTouch",null),t=r([f],t)}(l.default);o.default=g,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrTip":"mgrTip","./vLevelBar":"vLevelBar"}],vJumpGameItem:[function(e,t,o){"use strict";cc._RF.push(t,"c5314mx+6pJLYXWfk4a2jOI","vJumpGameItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrSdk"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"node/vJumpGameItem"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[a.default,"onTouchButton1"],CC_spriteIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.setContentSize(this.nodeResource.getContentSize())},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(e){this.gameId=e.gameId,this.spriteIcon.loadSpriteFrameAndKeepSize(e.url)},t.prototype.onTouchButton1=function(e){e.isClick()&&s.default.jumpOtherGame(this.gameId,"list")},r([i.default.requireResourceLoaded],t.prototype,"fillData",null),t=r([c],t)}(i.default));o.default=u,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrSdk":"mgrSdk"}],vJumpOtherGameBannerItem:[function(e,t,o){"use strict";cc._RF.push(t,"7b528fCoHtI+KVw2IcCZ551","vJumpOtherGameBannerItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/view/ReuseList"),i=e("./../../../ulframework/view/ReuseLayouterHBox"),s=e("../../../ulframework/utils/Tools"),l=e("../../../ulframework/view/ViewBase"),c=e("./../../manager/mgrChannel"),u=e("../../manager/mgrSdk"),d=e("../../../ulframework/utils/Timer"),p=cc._decorator,h=p.ccclass,f=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeList=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vJumpOtherGameBannerItem"},t.prototype._getResourceBindingConfig=function(){return{CC_nodeList:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){var t=this;e.prototype.onResourceLoaded.call(this),u.default.openJump("70","list"),this.buildUi(),this.fillData(),this.context.index=0;var o=1;this.context.scroolTimer=d.default.callLoop(2,function(){if(t.list){t.context.index+=o;var e=t.list.getDatas().length;(t.context.index<=0||t.context.index>=e-5)&&(o=-o),t.list.scrollToIndex(t.context.index,cc.v2(),2,!1)}},this),s.default.registerTouchHandler(this.list,function(e){if("began"==e.name?t.context.scroolTimer.stop():"ended"!=e.name&&"cancelled"!=e.name||t.context.scroolTimer.start(!1),e.isClick())for(var o=t.list.getActiveCellsByFilter(function(){return!0}),n=0;n<o.length;n++){var r=o[n];if(s.default.isWorldLocaInNode(r,e.getLocation())){var a=r.item;u.default.jumpOtherGame(a.gameId,"list")}}})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=new a.default;e.setLayouter((new i.default).setCellSize(69,90).setGap(15).setPending(5)),e.setCreator(function(e){var t=new g({});t.parent=e,e.item=t}),e.setSetter(function(e,t){e.item.fillByGameData(t)}),e.parent=this.nodeList,e.setContentSize(this.nodeList.getContentSize()),this.list=e},t.prototype.fillData=function(){this.list.setDatas(c.default.getInterPushConfig())},t=r([h],t)}(l.default));o.default=f;var g=function(e){function t(t){var o=e.call(this,t)||this;o.setContentSize(69,90);var n=new cc.Node;return n.parent=o,n.setContentSize(69,90),o.spriteIcon=n.addComponent(cc.Sprite),o}return n(t,e),t.prototype.fillByGameData=function(e){this.gameId=e.gameId,this.spriteIcon.loadSpriteFrameAndKeepSize(e.url)},t}(l.default);cc._RF.pop()},{"../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ReuseList":"ReuseList","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrSdk":"mgrSdk","./../../../ulframework/view/ReuseLayouterHBox":"ReuseLayouterHBox","./../../manager/mgrChannel":"mgrChannel"}],vJumpOtherGameDialog:[function(e,t,o){"use strict";cc._RF.push(t,"8e09d6PCfRDpJZWx/OAsOUA","vJumpOtherGameDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../node/vJumpGameItem"),l=e("../../manager/mgrChannel"),c=e("../../manager/mgrAd"),u=e("../../manager/mgrSdk"),d=cc._decorator,p=d.ccclass,h=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.labelTitle=null,t.nodeList=null,t.spriteMidAutumn=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vJumpOtherGameDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_labelTitle:[cc.Label],CC_nodeList:[cc.Node],CC_spriteMidAutumn:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),u.default.openJump("70","list"),c.default.showViewEnterAd(this.nodeResource,null,null,"ad_banner_more_game_dialog")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onCloseDialogStart=function(){c.default.closeBannerAd()},t.prototype.buildUi=function(){l.default.isCanShowMidAutumn()&&(this.spriteMidAutumn.node.active=!0);for(var e=l.default.getInterPushConfig(),t=0;t<e.length;t++){var o=e[t],n=new s.default(o);if(n.setContentSize(92,120),n.parent=this.nodeList,t>=8)break}},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t=r([p],t)}(i.default));o.default=h,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrChannel":"mgrChannel","../../manager/mgrSdk":"mgrSdk","../node/vJumpGameItem":"vJumpGameItem"}],vJumpOtherGameSidebarItem:[function(e,t,o){"use strict";cc._RF.push(t,"b6461k/YpZKMpVloxShKIWZ","vJumpOtherGameSidebarItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("./vJumpGameItem"),l=e("../../manager/mgrChannel"),c=e("../../../ulframework/view/ReuseList"),u=e("../../../ulframework/view/ReuseLayouterVGrid"),d=cc._decorator,p=d.ccclass,h=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonSwitch=null,t.nodeList=null,t.listItem=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vJumpOtherGameSidebarItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonSwitch:[a.default,"onTouchButtonSwitch"],CC_nodeList:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.fillData()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=new c.default;e.setLayouter((new u.default).setCellSize(92,120).setCols(3).setGap(20,20).setPending(5)),e.setCreator(function(e){var t=new s.default({});t.parent=e,e.item=t}),e.setSetter(function(e,t){e.item.fillData(t)}),e.parent=this.nodeList,e.setContentSize(this.nodeList.getContentSize()),this.listItem=e},t.prototype.fillData=function(){this.listItem.setDatas(l.default.getInterPushConfig())},t.prototype.onTouchButtonSwitch=function(e){e.isClick()&&this.context.fOnClickSwitch&&this.context.fOnClickSwitch()},t=r([p],t)}(i.default));o.default=h,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ReuseLayouterVGrid":"ReuseLayouterVGrid","../../../ulframework/view/ReuseList":"ReuseList","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrChannel":"mgrChannel","./vJumpGameItem":"vJumpGameItem"}],vJumpOtherGame:[function(e,t,o){"use strict";cc._RF.push(t,"d8ffeD4i4VGw6ASZfE0gmsb","vJumpOtherGame");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrCfg"),l=e("../../manager/mgrSdk"),c=["55","57","53","63","62","61","49","60","54"],u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonIcon=null,t.spriteIcon=null,t.showIndex=-1,t.dbData=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vJumpOtherGame"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonIcon:{varname:"buttonIcon",vartype:a.default,events:[{bindMethod:"registerOnTouchCallback",method:"onTouchButtonIcon"}]},CC_spriteIcon:{varname:"spriteIcon",vartype:cc.Sprite}}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.changeIndex(),this.repeatAction()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.repeatAction=function(){var e=this;this.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1.5),cc.rotateTo(.125,15).easing(cc.easeOut(1.5)),cc.rotateTo(.25,-15).easing(cc.easeInOut(1.5)),cc.rotateTo(.25,15).easing(cc.easeInOut(1.5)),cc.rotateTo(.25,-15).easing(cc.easeInOut(1.5)),cc.rotateTo(.125,0).easing(cc.easeIn(1.5)),cc.delayTime(1.5),cc.callFunc(function(){e.changeIndex()}))))},t.prototype.changeIndex=function(){var e=this;this.showIndex++,this.showIndex>=c.length&&(this.showIndex=0),this.dbData=null;var t="game"+c[this.showIndex];if(s.default.forDb_from_jump_other_game_db(function(o,n){if(t==n.name)return e.dbData=n,!0}),!this.dbData)return this.stopAllActions(),this.spriteIcon.spriteFrame=null,void(this.active=!1);this.spriteIcon.loadSpriteFrame(this.dbData.icon)},t.prototype.onTouchButtonIcon=function(e){e.isClick()&&this.dbData&&l.default.jumpOtherGame(this.dbData.gameIndex,"single")},t=r([d],t)}(i.default));o.default=p,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrSdk":"mgrSdk"}],vLevelBar:[function(e,t,o){"use strict";cc._RF.push(t,"eb4dfWhyBJKe7IXFamKbQWk","vLevelBar");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../manager/mgrDirector"),l=cc._decorator.ccclass,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maxLevel=5,t.curLevel=5,t.itemScale=.6,t.space=-22,t.itemPath="2d/icon/icon_item_level",t.layoutStyle=cc.Layout.Type.HORIZONTAL,t.levelSprites={},t}return n(t,e),t.prototype.setItemPath=function(e){this.itemPath=e},t.prototype.setLevel=function(e,t){this.maxLevel=e,this.curLevel=t,this.generate()},t.prototype.setLayoutStyle=function(e){this.layoutStyle=e},t.prototype.setSpace=function(e){this.space=e},t.prototype.setItemScale=function(e){this.itemScale=e},t.prototype.generate=function(){return a(this,void 0,void 0,function(){var e,t,o,n,r,a;return i(this,function(i){switch(i.label){case 0:null,e=0,i.label=1;case 1:return e<this.maxLevel?null!=(a=this.levelSprites[e])?[3,3]:((a=new cc.Node).parent=this,this.levelSprites[e]=a,t=a.addComponent(cc.Sprite),[4,s.default.promiseLoadRes(this.itemPath,cc.SpriteFrame)]):[3,5];case 2:if(o=i.sent(),!cc.isValid(t))return[2];t.spriteFrame=o,a.scale=this.itemScale,a.setContentSize(o.getOriginalSize()),i.label=3;case 3:a.getContentSize(),i.label=4;case 4:return e++,[3,1];case 5:for(null==(n=this.getComponent(cc.Layout))&&((n=this.addComponent(cc.Layout)).type=this.layoutStyle,n.resizeMode=cc.Layout.ResizeMode.CONTAINER,this.layoutStyle==cc.Layout.Type.HORIZONTAL?n.spacingX=this.space:n.spacingY=this.space,this.setAnchorPoint(.5,.5)),r=this.maxLevel;r>0;r--)a=this.levelSprites[r-1],r>this.curLevel?a.active=!1:a.active=!0;return n.updateLayout(),[2]}})})},t=r([l],t)}(cc.Node);o.default=c,cc._RF.pop()},{"../../manager/mgrDirector":"mgrDirector"}],vLoadingDialog:[function(e,t,o){"use strict";cc._RF.push(t,"4e313ALgctCmKSoQzjiax0F","vLoadingDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s,l=e("../../../ulframework/component/ScleableButton"),c=e("../../../ulframework/manager/Manager"),u=e("../../../ulframework/utils/LoadingTask"),d=e("../../../ulframework/utils/Tools"),p=e("../../../ulframework/view/DialogBase"),h=e("../../manager/mgrCfg"),f=e("../../manager/mgrDirector"),g=e("../../manager/mgrSdk"),m=e("../../manager/mgrSound"),_=e("../../../ulframework/updater/UpdaterScript"),v=e("../../manager/mgrNative"),y=e("../../manager/mgrI18n"),C=cc._decorator.ccclass;(function(e){e[e.unknown=0]="unknown",e[e.updater=1]="updater",e[e.loading=2]="loading",e[e.splash=3]="splash"})(s=o.StartPageTypeEnum||(o.StartPageTypeEnum={}));var S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pageType=0,t.labelProcess=null,t.nodeBigBg=null,t.nodeGameInfo=null,t.nodeMask=null,t.nodeProgressFlag=null,t.nodeWordTip=null,t.progressBar=null,t.spriteLogo=null,t.loadingTasks=[],t.completedCount=0,t.frameBeginTime=0,t.loadingBeginTime=0,t.runningTaskCount=0,t.bStartedGame=!1,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vLoadingDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_labelProcess:[cc.Label],CC_nodeBigBg:[cc.Node],CC_nodeGameInfo:[cc.Node],CC_nodeMask:[cc.Node],CC_nodeProgressFlag:[cc.Node],CC_nodeWordTip:[cc.Node],CC_progressBar:[cc.ProgressBar],CC_spriteLogo:[cc.Sprite]}},t.prototype.onLoad=function(){return a(this,void 0,void 0,function(){return i(this,function(t){return e.prototype.onLoad.call(this),cc.debug.setDisplayStats(!1),[2]})})},t.prototype.startLoading=function(){var e=this;this.startLoadFaceBg(function(){e.labelProcess.setLocalizedString("vLoadingDialog.1");h.default.downloadDataFiles(function(){e.startLoadingGame()},function(t,o){e.progressBar&&cc.isValid(e.progressBar)&&(e.progressBar.progress=t/(o||1))})})},t.prototype.startLoadFaceBg=function(e){var t=this,o=0,n=function(){f.default.loadRes("2d/loadingbig/bg",cc.SpriteFrame,function(r,a){if(r)return console.log("load face bg error"),void((o+=1)<=1e3?n():e&&e());var i=new cc.Node;i.addComponent(cc.Sprite).spriteFrame=a,i.parent=t.nodeBigBg,e&&e()})};n()},t.prototype.startLoadingGame=function(){var e=this;this.pageType=s.loading;var t=[];(t=h.default.getLoadingTasks()).push(new u.LoadingTask("\u52a0\u8f7d",function(t){e.loadLocalPatchInfo(),l.default.setSoundPlayHandler(function(){m.default.play(101)}),l.default.setTouchListenerHandler(function(){f.default.sendMsg("MSG_ON_BUTTON_TOUCHED")}),c.default.loadAllManagers(),t.triggerCompleted()}));for(var o=["2d/animation/defaultDialogOpen","2d/animation/defaultDialogClose"],n=function(e){var n=o[e];t.push(new u.LoadingTask("\u9884\u52a0\u8f7d\u52a8\u753b\u8d44\u6e90",function(e){f.default.preloadRes(n,cc.AnimationClip,function(){e.triggerCompleted()})}))},r=0;r<o.length;r++)n(r);var a=["view/dialog/vHudDialog","view/node/vShoper","view/node/vHudStaffUnit","view/dialog/vNativeDialog","view/dialog/vNativeDialog1","view/node/vWarpSceneNode","view/node/vGuideMask","view/node/vGuideTip","view/node/vWarpSmallDialogNode"],i=function(e){var o=a[e];t.push(new u.LoadingTask("\u9884\u52a0\u8f7d\u754c\u9762\u8d44\u6e90",function(e){f.default.preloadRes(o,cc.Prefab,function(){e.triggerCompleted()})}))};for(r=0;r<a.length;r++)i(r);var p=["2d/icon/tag_1","2d/icon/tag_2","2d/icon/tag_3","2d/icon/tag_4","2d/icon/tag_5","2d/icon/tag_6"],_=function(e){var o=p[e];t.push(new u.LoadingTask("\u9884\u52a0\u8f7d\u56fe\u7247\u8d44\u6e90",function(e){f.default.preloadRes(o,cc.SpriteFrame,function(){e.triggerCompleted()})}))};for(r=0;r<p.length;r++)_(r);var v=["guide_click","jiesuanwawa"],y=function(e){var o=v[e];t.push(new u.LoadingTask("\u9884\u52a0\u8f7d\u52a8\u753b\u8d44\u6e90",function(e){f.default.preloadRes(o,sp.Skeleton,function(){e.triggerCompleted()})}))};for(r=0;r<v.length;r++)y(r);t.push(new u.LoadingTask("\u52a0\u8f7d\u5b8c\u6bd5",function(e){g.default.onLoadingComplete(),e.triggerCompleted()}));for(r=0;r<t.length;r++){t[r].setCompletedCallback(this.onLoadingTaskCompleted.bind(this))}this.loadingTasks=t,this.completedCount=0,this.runningTaskCount=0,this.loadingBeginTime=d.default.time()},t.prototype.isShowLicenceInfo=function(){return!1},t.prototype.onResourceLoaded=function(){(e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(f.default.size),this.setContentSize(f.default.size),this.progressBar.node.active=!0,this.nodeProgressFlag.runAction(cc.repeatForever(cc.sequence(cc.rotateBy(5,180),cc.rotateBy(5,180)))),this.registerListeners({MSG_SDK_CHANNEL_INFO_RESULT:this.onMsgChannelInfoResult}),cc.sys.isNative&&!v.default._temp_isH5())?new _.default(this,this.onUiMsg.bind(this)).startUpdate():(this.bH5=!0,this.startLoading());this.nodeGameInfo.opacity=this.isShowLicenceInfo()?255:0},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.pageType==s.loading&&(this.frameBeginTime=d.default.time(),this.tryRunTask(),this.progressBar.progress=this.completedCount/(this.loadingTasks.length||1)),this.nodeProgressFlag.x=this.progressBar.progress*this.progressBar.node.width-this.progressBar.node.width/2)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.tryRunTask=function(){if(!(this.completedCount>=this.loadingTasks.length))for(var e=this.loadingTasks,t=0;t<e.length;t++){var o=e[t];if(o.isPending()){if(!o.bMultithreading&&this.runningTaskCount>0)return;if(this.runningTaskCount>=10)return;this.runningTaskCount++,o.run()}}},t.prototype.startGame=function(){this.bStartedGame||(this.bStartedGame=!0,console.log("---2--\u8fdb\u5165Splash"),this.startSplash())},t.prototype.loadLocalPatchInfo=function(){cc.sys.isNative},t.prototype.onLoadingTaskCompleted=function(e){this.completedCount++,this.runningTaskCount--,d.default.time()-this.frameBeginTime<1/60&&this.tryRunTask()},t.prototype.onUiMsg=function(e,t){if("UPDATER_UI_MSG_GET_VERSION"==e)this.progressBar.progress=0,this.labelProcess.setLocalizedString("vLoadingDialog.1");else if("UPDATER_UI_MSG_DOWNLOAD_PROGRESS"==e){if(!t)return;var o=d.default.clampf(t.bytePercent||0,0,1),n=(d.default.clampf(t.filePercent||0,0,1),t.patchCount||1),r=t.patchIdx||0,a=d.default.clampf((o+r)/(n||1),0,1);this.progressBar.progress=a,this.labelProcess.setLocalizedString("vLoadingDialog.1")}else"UPDATER_UI_MSG_DOWNLOAD_SUCCESS"==e?(this.progressBar.progress=1,this.labelProcess.setLocalizedString("vLoadingDialog.2")):"UPDATER_UI_MSG_ENTER_NEXT_SCENE"==e?this.startLoading():"UPDATER_UI_MSG_PLAY_LOGO_BEGIN"==e?this.nodeResource.active=!1:"UPDATER_UI_MSG_PLAY_LOGO_END"==e&&(this.nodeResource.active=!0)},t.prototype.startSplash=function(){var e=this;this.pageType,s.splash,this.progressBar.node.active=!1,this.bH5?this.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){e.splashEnterGame()}))):(this.nodeMask.active=!0,this.nodeWordTip.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1),cc.fadeOut(.5),cc.fadeIn(.5),cc.delayTime(2)))),d.default.registerTouchHandler(this.nodeMask,this.onTouchHandler.bind(this)))},t.prototype.splashEnterGame=function(){var e=this;this.bEnteredGame||(this.bEnteredGame=!0,this.nodeResource.stopAllActions(),this.nodeResource.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){y.default.hasRecordLanguage()?(f.default.openDialog("vHudDialog",{bFromSplash:!0},!0),e.closeDialog(!0)):f.default.openDialog("vSetLanguageDialog",{fOnDialogClose:function(){y.default.hasRecordLanguage()||y.default.defaultSetLanguage(),f.default.openDialog("vHudDialog",{bFromSplash:!0},!0),e.closeDialog(!0)}})}))))},t.prototype.onTouchHandler=function(e){"ended"==e.name&&(d.default.unregisterTouchHandler(this.nodeMask),this.splashEnterGame())},t.prototype.onMsgChannelInfoResult=function(e){console.log("---onMsgChannelInfoResult"),this.startGame()},t.prototype.isClickShadowClose=function(){return!1},t=r([C],t)}(p.default);o.default=S,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/manager/Manager":"Manager","../../../ulframework/updater/UpdaterScript":"UpdaterScript","../../../ulframework/utils/LoadingTask":"LoadingTask","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDirector":"mgrDirector","../../manager/mgrI18n":"mgrI18n","../../manager/mgrNative":"mgrNative","../../manager/mgrSdk":"mgrSdk","../../manager/mgrSound":"mgrSound"}],vMallDialog:[function(e,t,o){"use strict";cc._RF.push(t,"4eab3zsnntM2KZ/R7wLPGp5","vMallDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/DialogBase"),c=e("../../manager/mgrDirector"),u=e("../../manager/mgrShop"),d=e("../../../ulframework/utils/Tools"),p=e("../node/ListView"),h=e("../../../ulframework/view/ViewBase"),f=e("../../../ulframework/utils/Timer"),g=e("../node/vCommonTitleBarRmbGold"),m=e("../../manager/mgrAd"),_=e("../../manager/mgrChannel"),v=cc._decorator,y=v.ccclass,C=(v.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.nodeList=null,t.nodeTitleBar=null,t.nodeUIContent=null,t.spriteMidAutumn=null,t.spriteTuzi=null,t.TAB_GIFT=1,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vMallDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[s.default,"onTouchButtonClose"],CC_nodeList:[cc.Node],CC_nodeTitleBar:[cc.Node],CC_nodeUIContent:[cc.Node],CC_spriteMidAutumn:[cc.Sprite],CC_spriteTuzi:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),_.default.isCanShowMidAutumn()&&(this.spriteMidAutumn.node.active=!0,this.spriteTuzi.node.active=!0),this.setContentSize(c.default.size),this.nodeResource.setContentSize(c.default.size),m.default.showViewEnterAd(this.nodeResource,null,null,"ad_banner_mall_dialog")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onOpenDialogCompleted=function(){return a(this,void 0,void 0,function(){var e=this;return i(this,function(t){return f.default.callLater(.5,function(){e.nodeResource&&cc.isValid(e.nodeResource)&&e.onLoadedInit()},this),[2]})})},t.prototype.onCloseDialogStart=function(){m.default.closeBannerAd()},t.prototype.onLoadedInit=function(){this.buildUi(),this.fillTab(),this.registerListeners({MSG_ITEM_BUY_SUCCESSED:this.onMsgItemBuySuccessed.bind(this),MSG_SHOP_AD_SUCCESSED:this.onMsgItemADSuccessed.bind(this),MSG_REFRESH_MALL_DATA:this.onMsgRefreshMallData.bind(this),MSG_SDK_ADV_VALID_COUNT:this.onMsgAdvValidCount.bind(this)})},t.prototype.buildUi=function(){this.nodeTitleBar.active=!1,(new g.default).parent=this.nodeTitleBar;var e=this.nodeList,t=new p.default;t.parent=e,t.setAnchorPoint(0,0),t.setContentSize(e.getContentSize()),t.setDirection(!1),t.setGaps(10,10),t.setDebugLineEnabled(!1);var o=t.addComponent(cc.Widget);o.top=0,o.bottom=0,o.left=0,o.right=0,o.isAlignOnce=!1,this.listView=t},t.prototype.changeTab=function(e){this.selectedTab=e||this.TAB_GIFT},t.prototype.fillTab=function(){var e=this;this.changeTab(this.TAB_GIFT),f.default.callLater(.05,function(){e&&cc.isValid(e)&&e.nodeResource&&cc.isValid(e.nodeResource)&&e.fillList(!0)},this)},t.prototype.fillList=function(e){for(var t=this.selectedTab,o=u.default.getCanbuyShopItemListByCategory([t]),n=o.length-1;n>=0;n--){var r=o[n];r.adEventId&&!m.default.isAdEventHasChanceTrigger(r.adEventId)&&o.splice(n,1)}o=d.default.sortArrayByField(o,["-order","id"]),this.shopDatas=o,cc.log("----shopDatas=",o),this.listItems=[];var a=this.listView.getScrollOffset(),i=this.listView.getGaps();this.listView.removeAllItems();var s=this.listView.getContentSize(),l=0;for(n=0;n<o.length;n++)if(l>0)l-=1;else{var p=o[n],h=p.uiViewName,f=p.uiViewSize,g=new cc.Node;g.setContentSize(s.width,f[1]||100),this.listView.pushItem(g);var _=c.default.createView(h,{shopId:p.id,fOnClickBuy:this.onClickBuy.bind(this),delayTimeEnter:.6});_.setAnchorPoint(.5,.5),_.parent=g,this.listItems.push(_);var v=o[n+1];if(v){var y=v.uiViewName,C=c.default.createView(y,{shopId:v.id,fOnClickBuy:this.onClickBuy.bind(this)});C.setAnchorPoint(.5,.5),C.parent=g,this.listItems.push(C);var S=f[0]/2+i[0]/2;_.x=-S,C.x=S,l=1}}this.listView.setScrollOffset(a)},t.prototype.focusItem=function(e){},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onClickBuy=function(e){u.default.requestBuy(e,1,"\u5546\u57ce")},t.prototype.onMsgItemBuySuccessed=function(e){var t=e.shopId,o=null,n=!1,r=this.shopDatas||[];for(var a in r){var i=r[a];if(i.id==t){n=!0,o=i;break}}this.currBoughtShopIdDict=this.currBoughtShopIdDict||{},this.currBoughtShopIdDict[t]=!0,n&&o.rebuyCheckMode&&this.fillList()},t.prototype.onMsgItemADSuccessed=function(e){},t.prototype.onMsgRefreshMallData=function(e){var t=this;f.default.callLater(.1,function(){t.fillList()},this)},t.prototype.onMsgAdvValidCount=function(e){var t=this;f.default.callLater(.1,function(){t.fillList()},this)},r([h.default.requireResourceLoaded],t.prototype,"onOpenDialogCompleted",null),t=r([y],t)}(l.default));o.default=C,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrAd":"mgrAd","../../manager/mgrChannel":"mgrChannel","../../manager/mgrDirector":"mgrDirector","../../manager/mgrShop":"mgrShop","../node/ListView":"ListView","../node/vCommonTitleBarRmbGold":"vCommonTitleBarRmbGold"}],vMallItemCoin:[function(e,t,o){"use strict";cc._RF.push(t,"342eecvnOBPlYf9kKhUv7Ja","vMallItemCoin");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/ViewBase"),c=e("../../manager/mgrCfg"),u=e("../../manager/mgrPlayer"),d=cc._decorator,p=d.ccclass,h=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBuy=null,t.labelAmount=null,t.labelButtonBuy=null,t.labelName=null,t.spriteBgIcon=null,t.spriteIcon=null,t.spritePriceUnit=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vMallItemCoin"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBuy:[s.default,"onTouchButtonBuy"],CC_labelAmount:[cc.Label],CC_labelButtonBuy:[cc.Label],CC_labelName:[cc.Label],CC_spriteBgIcon:[cc.Sprite],CC_spriteIcon:[cc.Sprite],CC_spritePriceUnit:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onLoadedInit=function(){this.setContentSize(this.nodeResource.getContentSize()),this.fillByShopId(this.context.shopId)},t.prototype.fillByShopId=function(e){return a(this,void 0,void 0,function(){var t,o,n;return i(this,function(r){return this.shopId=e,this.shopId?(e=this.shopId,t=c.default.get("shop_template_db",e),cc.log("shopid: ",e),this.spriteIcon.loadSpriteFrameAndKeepSize(t.icons[0][0]),t.items&&t.items[0]&&t.items[0][1]&&(this.labelAmount.string=ul.format("%s",t.items[0][1])),this.labelName.string=t.name||" ",this.spritePriceUnit.node.active=0!=t.priceUnit,o="",0==t.priceUnit?o=ul.format("%s%s",t.price,"\u5143"):(o=ul.format("%s",t.price),n=u.default.getIcon(t.priceUnit),this.spritePriceUnit.loadSpriteFrameAndKeepSize(n)),this.labelButtonBuy.string=ul.format("%s",o),[2]):[2]})})},t.prototype.onTouchButtonBuy=function(e){e.isClick()&&this.context.fOnClickBuy&&this.context.fOnClickBuy(this.shopId)},t.prototype.onTouchToggleBuy=function(e){this.onTouchButtonBuy(e)},t.prototype.onTouchButtonVideo=function(e){},r([l.default.requireResourceLoaded],t.prototype,"fillByShopId",null),t=r([p],t)}(l.default));o.default=h,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrPlayer":"mgrPlayer"}],vMallItemFreeGold:[function(e,t,o){"use strict";cc._RF.push(t,"8fb2d11hvJKNYb/UN/h4DEq","vMallItemFreeGold");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrPlayer"),l=e("../../manager/mgrAd"),c=e("../../manager/mgrTip"),u=e("../../Const"),d=cc._decorator,p=d.ccclass,h=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBuy=null,t.buttonVideo=null,t.labelAmount=null,t.labelButton2=null,t.labelButtonBuy=null,t.labelName=null,t.spriteBgIcon=null,t.spriteIcon=null,t.spritePriceUnit=null,t.AD_VIDEO_FREE_GOLD_NAME="video_free_gold_name",t}return n(t,e),t.prototype._getResourceName=function(){return"node/vMallItemFreeGold"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBuy:[a.default,"onTouchButtonBuy"],CC_buttonVideo:[a.default,"onTouchButtonVideo"],CC_labelAmount:[cc.Label],CC_labelButton2:[cc.Label],CC_labelButtonBuy:[cc.Label],CC_labelName:[cc.Label],CC_spriteBgIcon:[cc.Sprite],CC_spriteIcon:[cc.Sprite],CC_spritePriceUnit:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onLoadedInit=function(){var e=s.default.getBascRewardGold();this.rewardAmount=Math.ceil(1.8*e),this.labelAmount.string=ul.format("%s",s.default.getItemAmountStr(this.rewardAmount)),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd.bind(this),MSG_AD_EVENT_FAILD:this.onMsgAdEventFaild.bind(this),MSG_AD_EVENT_CANCELED:this.onMsgAdEventCanceled.bind(this)})},t.prototype.onTouchButtonVideo=function(e){e.isClick()&&l.default.triggerAdEvent(this.AD_VIDEO_FREE_GOLD_NAME,null,!0)},t.prototype.onMsgAdEventSuccessd=function(e){var t=e;cc.log("---offline onMsgAdEventSuccessd data=",t),t.adEventId==this.AD_VIDEO_FREE_GOLD_NAME&&(s.default.addItemAmount(u.default.ITEM_ID_GOLD,this.rewardAmount,"\u5546\u57ce\u514d\u8d39\u91d1\u5e01_\u5e7f\u544a"),c.default.addGotItemTip(u.default.ITEM_ID_GOLD,this.rewardAmount))},t.prototype.onMsgAdEventFaild=function(e){e.adEventId;this.AD_VIDEO_FREE_GOLD_NAME},t.prototype.onMsgAdEventCanceled=function(e){this.onMsgAdEventFaild(e)},t=r([p],t)}(i.default));o.default=h,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrTip":"mgrTip"}],vMallItemFreeRmb:[function(e,t,o){"use strict";cc._RF.push(t,"51ed3vspXdByLVKUhLlquxW","vMallItemFreeRmb");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrPlayer"),l=e("../../Const"),c=e("../../manager/mgrAd"),u=e("../../manager/mgrTip"),d=cc._decorator,p=d.ccclass,h=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonVideo=null,t.labelAmount=null,t.labelButton2=null,t.labelName=null,t.AD_VIDEO_FREE_RMB_NAME="video_free_rmb_name",t}return n(t,e),t.prototype._getResourceName=function(){return"node/vMallItemFreeRmb"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonVideo:[a.default,"onTouchButtonVideo"],CC_labelAmount:[cc.Label],CC_labelButton2:[cc.Label],CC_labelName:[cc.Label]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.rewardAmount=50,this.labelAmount.string=ul.format("%s",s.default.getItemAmountStr(this.rewardAmount)),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd.bind(this),MSG_AD_EVENT_FAILD:this.onMsgAdEventFaild.bind(this),MSG_AD_EVENT_CANCELED:this.onMsgAdEventCanceled.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouchButtonVideo=function(e){e.isClick()&&c.default.triggerAdEvent(this.AD_VIDEO_FREE_RMB_NAME,null,!0)},t.prototype.onMsgAdEventSuccessd=function(e){var t=e;cc.log("---offline onMsgAdEventSuccessd data=",t),t.adEventId==this.AD_VIDEO_FREE_RMB_NAME&&(s.default.addItemAmount(l.default.ITEM_ID_RMB,this.rewardAmount,"\u5546\u57ce\u514d\u8d39\u94bb\u77f3_\u5e7f\u544a"),u.default.addGotItemTip(l.default.ITEM_ID_RMB,this.rewardAmount))},t.prototype.onMsgAdEventFaild=function(e){e.adEventId;this.AD_VIDEO_FREE_RMB_NAME},t.prototype.onMsgAdEventCanceled=function(e){this.onMsgAdEventFaild(e)},t=r([p],t)}(i.default));o.default=h,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrTip":"mgrTip"}],vMallItemStoreReward3:[function(e,t,o){"use strict";cc._RF.push(t,"1a2c8oPtQNAv7BxB1fhNhJl","vMallItemStoreReward3");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/ViewBase"),c=e("../../manager/mgrCfg"),u=e("../../manager/mgrPlayer"),d=e("../../Const"),p=e("../../manager/mgrTip"),h=e("../../manager/mgrShop"),f=cc._decorator,g=f.ccclass,m=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBuy=null,t.labelAmount=null,t.labelButtonBuy=null,t.labelName=null,t.spriteBgIcon=null,t.spriteIcon=null,t.spritePriceUnit=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vMallItemStoreReward3"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBuy:[s.default,"onTouchButtonBuy"],CC_labelAmount:[cc.Label],CC_labelButtonBuy:[cc.Label],CC_labelName:[cc.Label],CC_spriteBgIcon:[cc.Sprite],CC_spriteIcon:[cc.Sprite],CC_spritePriceUnit:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onLoadedInit=function(){this.setContentSize(this.nodeResource.getContentSize()),this.fillByShopId(this.context.shopId)},t.prototype.fillByShopId=function(e){return a(this,void 0,void 0,function(){var t,o,n,r;return i(this,function(a){return this.shopId=e,this.shopId?(e=this.shopId,t=c.default.get("shop_template_db",e),cc.log("shopid: ",e),this.labelName.string=t.name||" ",this.spritePriceUnit.node.active=0!=t.priceUnit,o="",0==t.priceUnit?o=ul.format("%s%s",t.price,"\u5143"):(o=ul.format("%s",t.price),n=u.default.getIcon(t.priceUnit),this.spritePriceUnit.loadSpriteFrameAndKeepSize(n)),this.labelButtonBuy.string=ul.format("%s",o),r=3*u.default.getBascRewardGold(),this.labelAmount.string=ul.format("%s",u.default.getItemAmountStr(r)),[2]):[2]})})},t.prototype.onTouchButtonBuy=function(e){if(e.isClick()){var t=c.default.get("shop_template_db",this.shopId),o=t.priceUnit,n=t.price,r=c.default.get("item_template_db",o);if(r)if(u.default.getItemAmount(o)>=n){u.default.addItemAmount(o,-n,"\u5546\u57ce_\u8d2d\u4e70");var a=3*u.default.getBascRewardGold();u.default.addItemAmount(d.default.ITEM_ID_GOLD,a,"\u5546\u57ce_\u8d2d\u4e70"),p.default.addGotItemTip(d.default.ITEM_ID_GOLD,a)}else h.default.onCostNotEnought(r.id);else console.log(ul.format("\u8d27\u5e01\u5355\u4f4d\u9519\u8bef\uff01shopId = %d",this.shopId))}},r([l.default.requireResourceLoaded],t.prototype,"fillByShopId",null),t=r([g],t)}(l.default));o.default=m,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrCfg":"mgrCfg","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrShop":"mgrShop","../../manager/mgrTip":"mgrTip"}],vMallItemStoreReward:[function(e,t,o){"use strict";cc._RF.push(t,"5da45d1/MxJeI16VnZUl7xX","vMallItemStoreReward");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/ViewBase"),c=e("../../manager/mgrCfg"),u=e("../../manager/mgrPlayer"),d=e("../../Const"),p=e("../../manager/mgrTip"),h=e("../../manager/mgrShop"),f=cc._decorator,g=f.ccclass,m=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBuy=null,t.labelAmount=null,t.labelButtonBuy=null,t.labelName=null,t.spriteBgIcon=null,t.spriteIcon=null,t.spritePriceUnit=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vMallItemStoreReward"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBuy:[s.default,"onTouchButtonBuy"],CC_labelAmount:[cc.Label],CC_labelButtonBuy:[cc.Label],CC_labelName:[cc.Label],CC_spriteBgIcon:[cc.Sprite],CC_spriteIcon:[cc.Sprite],CC_spritePriceUnit:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onLoadedInit=function(){this.setContentSize(this.nodeResource.getContentSize()),this.fillByShopId(this.context.shopId)},t.prototype.fillByShopId=function(e){return a(this,void 0,void 0,function(){var t,o,n,r;return i(this,function(a){return this.shopId=e,this.shopId?(e=this.shopId,t=c.default.get("shop_template_db",e),cc.log("shopid: ",e),this.labelName.string=t.name||" ",this.spritePriceUnit.node.active=0!=t.priceUnit,o="",0==t.priceUnit?o=ul.format("%s%s",t.price,"\u5143"):(o=ul.format("%s",t.price),n=u.default.getIcon(t.priceUnit),this.spritePriceUnit.loadSpriteFrameAndKeepSize(n)),this.labelButtonBuy.string=ul.format("%s",o),r=u.default.getBascRewardGold(),this.labelAmount.string=ul.format("%s",u.default.getItemAmountStr(r)),[2]):[2]})})},t.prototype.onTouchButtonBuy=function(e){if(e.isClick()){var t=c.default.get("shop_template_db",this.shopId),o=t.priceUnit,n=t.price,r=c.default.get("item_template_db",o);if(r)if(u.default.getItemAmount(o)>=n){u.default.addItemAmount(o,-n,"\u5546\u57ce_\u8d2d\u4e70");var a=u.default.getBascRewardGold();u.default.addItemAmount(d.default.ITEM_ID_GOLD,a,"\u5546\u57ce_\u8d2d\u4e70"),p.default.addGotItemTip(d.default.ITEM_ID_GOLD,a)}else h.default.onCostNotEnought(r.id);else console.log(ul.format("\u8d27\u5e01\u5355\u4f4d\u9519\u8bef\uff01shopId = %d",this.shopId))}},r([l.default.requireResourceLoaded],t.prototype,"fillByShopId",null),t=r([g],t)}(l.default));o.default=m,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrCfg":"mgrCfg","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrShop":"mgrShop","../../manager/mgrTip":"mgrTip"}],vMiniGameDouyinDialog:[function(e,t,o){"use strict";cc._RF.push(t,"06e77UBn8ZAyaOobprvRt9g","vMiniGameDouyinDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrAd"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.labelTitle=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vMiniGameDouyinDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_labelTitle:[cc.Label]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),s.default.showViewEnterAd(this.nodeResource,null,null,"ad_banner_find_me_dialog")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onCloseDialogStart=function(){s.default.closeBannerAd()},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t=r([c],t)}(i.default));o.default=u,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd"}],vMirrorLevelBar:[function(e,t,o){"use strict";cc._RF.push(t,"f209f+91AZNCpzf5StPbvGz","vMirrorLevelBar");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/utils/Tools"),i=cc._decorator.ccclass,s=function(e){function t(t){void 0===t&&(t={});var o=e.call(this)||this;return o.context={},o.spriteLevels=[],o.spriteGreyLevels=[],o.greyNodes=[],o.brightNodes=[],o.ICON_SCALE=.4,o.ICON_SIZE=cc.size(117,114),o.ICON_GAP=16,o.context=t,o}return n(t,e),t.prototype.setLevel=function(e,t){e=e||0,t=t||0;var o=this.ICON_GAP;if(this.levelGrey!=e){this.levelGrey=e;for(var n=this.spriteGreyLevels,r=[],i=Math.max(n.length,e),s=0;s<i;s++){var l=n[s];if(s<=e){if(l)l.active=!0;else(l=new cc.Node).setContentSize(cc.size(this.ICON_SIZE.width*this.ICON_SCALE,this.ICON_SIZE.height*this.ICON_SCALE)),l.setAnchorPoint(.5,.5),l.parent=this,l.addComponent(cc.Sprite).loadSpriteFrameAndKeepSize("2d/icon/icon_mirror_item_grey_hd.png"),n.push(l);r.push(l)}else l&&(l.active=!1)}a.default.layoutNodesHorizonCenter(r,o),this.greyNodes=r}if(this.levelBright!=t){this.levelBright=t;var c=this.spriteLevels,u=[];for(i=Math.max(c.length,t),s=0;s<i;s++){l=c[s];if(s<=t){if(l)l.active=!0;else(l=new cc.Node).setContentSize(cc.size(this.ICON_SIZE.width*this.ICON_SCALE,this.ICON_SIZE.height*this.ICON_SCALE)),l.setAnchorPoint(.5,.5),l.zIndex=100,l.parent=this,l.addComponent(cc.Sprite).loadSpriteFrameAndKeepSize("2d/icon/icon_mirror_item_hd.png"),c.push(l);u.push(l)}else l&&(l.active=!1)}var d=u.length;for(s=0;s<d;s++){var p=u[s],h=this.greyNodes[s];h&&(p.position=h.position)}this.brightNodes=u}return this},t.prototype.getStarGreyNode=function(e){if(this.greyNodes)return this.greyNodes[e]},t.prototype.getStarBrightNode=function(e){if(this.brightNodes)return this.brightNodes[e]},t=r([i],t)}(cc.Node);o.default=s,cc._RF.pop()},{"../../../ulframework/utils/Tools":"Tools"}],vMsgTip:[function(e,t,o){"use strict";cc._RF.push(t,"28b6bigiGVDxof2ibGfJVU/","vMsgTip");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/view/ViewBase"),l=e("../../manager/mgrTip"),c=e("../../manager/mgrDirector"),u=cc._decorator.ccclass,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelContent=null,t.nodeBg=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vMsgTip"},t.prototype._getResourceBindingConfig=function(){return{CC_labelContent:[cc.Label],CC_nodeBg:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.bInitCompleted=!0},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.bInitCompleted&&this.nodeResource&&cc.isValid(this.nodeResource)&&this.nodeBg&&cc.isValid(this.nodeBg)&&(this.nodeBg._originWidth=this.nodeBg._originWidth||this.nodeBg.width,this.nodeBg.width=Math.min(this.nodeBg._originWidth+this.labelContent.node.width,576),this.nodeBg.opacity=255)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){this.labelContent.node.width=.9*c.default.width},t.prototype.setText=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){return this.labelContent.string=e,[2]})})},t.prototype.setColorEx=function(e,t){return a(this,void 0,void 0,function(){var o;return i(this,function(n){return this.labelContent.node.color=e,o=this.labelContent.getComponent(cc.LabelOutline),t?(o.enabled=!0,o.color=t):o.enabled=!1,[2]})})},t.prototype.play=function(e){this.parent=l.default.getTipRootNode();var t=e||c.default.center,o=cc.v2(t.x,t.y+50);t=this.parent.convertToNodeSpace(t),o=this.parent.convertToNodeSpace(o),this.scale=0,this.setPosition(t),this.stopAllActions(),this.runAction(cc.spawn(cc.scaleTo(.15,1).easing(cc.easeIn(2)),cc.moveTo(1.1,o).easing(cc.easeOut(1.2)),cc.sequence(cc.fadeIn(.15).easing(cc.easeIn(2)),cc.delayTime(.65),cc.fadeOut(.3),cc.removeSelf())))},r([s.default.requireResourceLoaded],t.prototype,"setText",null),r([s.default.requireResourceLoaded],t.prototype,"setColorEx",null),t=r([u],t)}(s.default);o.default=d,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrDirector":"mgrDirector","../../manager/mgrTip":"mgrTip"}],vNativeBanner:[function(e,t,o){"use strict";cc._RF.push(t,"944e7yB/0ZIAL7vW0X+RIXQ","vNativeBanner");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrAdNative"),l=e("../../manager/mgrDirector"),c=e("./../../manager/mgrTip"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonGo=null,t.labelDesc=null,t.labelTargetTitle=null,t.labelTitle=null,t.spriteIcon=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vNativeBanner"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_buttonGo:[a.default,"onTouchButtonGo"],CC_labelDesc:[cc.Label],CC_labelTargetTitle:[cc.Label],CC_labelTitle:[cc.Label],CC_spriteIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.width=l.default.width,this.spriteIcon.node._orgSize=this.spriteIcon.node.getContentSize(),s.default.registerNativeBannerRefreshFun(this.context.adEventId,this.refreAd.bind(this),this),this.nodeResource.opacity=0},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.refreAd=function(e){if(console.log("vNativeBanner.refreshAd",e),e){if(this.labelTitle.string=e.title,this.labelDesc.string=e.desc,this.labelTargetTitle.string=e.targetTitle,this.spriteIcon.node.active=!0,this.spriteIcon.setSpriteFrameAndKeepSize(e.spriteFrame),this.nodeResource.opacity=255,e.spriteFrame&&e.spriteFrame.getOriginalSize){var t=this.spriteIcon.node._orgSize,o=t.height,n=t.width,r=e.spriteFrame.getOriginalSize(),a=r.width,i=r.height,s=n/a,l=o/i,c=Math.min(s,l);this.spriteIcon.node.setContentSize(cc.size(c*a,c*i))}}else this.labelTitle.string="",this.spriteIcon.node.active=!1,this.labelDesc.string="",this.labelTargetTitle.string="",this.nodeResource.opacity=0},t.prototype.onTouchButtonGo=function(e){e.isClick()&&s.default.clickNative(this.context.adEventId)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&(s.default.markManualCloseNative(this.context.adEventId),c.default.hideNativeBanner())},t=r([d],t)}(i.default));o.default=p,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrAdNative":"mgrAdNative","../../manager/mgrDirector":"mgrDirector","./../../manager/mgrTip":"mgrTip"}],vNativeDialog1:[function(e,t,o){"use strict";cc._RF.push(t,"a9a77m7LaJK+a5CgBBQg0Lw","vNativeDialog1");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("./vNativeDialog"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonContent=null,t.buttonFullScreen=null,t.buttonGo=null,t.buttonSafeContent=null,t.labelDesc=null,t.labelTargetTitle=null,t.labelTitle=null,t.spriteButtonClose=null,t.spriteIcon=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vNativeDialog1"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_buttonContent:[a.default,"onTouchButtonContent"],CC_buttonFullScreen:[a.default,"onTouchButtonFullScreen"],CC_buttonGo:[a.default,"onTouchButtonGo"],CC_buttonSafeContent:[a.default,"onTouchButtonSafeContent"],CC_labelDesc:[cc.Label],CC_labelTargetTitle:[cc.Label],CC_labelTitle:[cc.Label],CC_spriteButtonClose:[cc.Sprite],CC_spriteIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouchButtonClose=function(t){e.prototype.onTouchButtonClose.call(this,t)},t.prototype.onTouchButtonContent=function(t){e.prototype.onTouchButtonContent.call(this,t)},t.prototype.onTouchButtonFullScreen=function(t){e.prototype.onTouchButtonFullScreen.call(this,t)},t.prototype.onTouchButtonGo=function(t){e.prototype.onTouchButtonGo.call(this,t)},t.prototype.onTouchButtonSafeContent=function(t){e.prototype.onTouchButtonSafeContent.call(this,t)},t=r([l],t)}(i.default));o.default=c,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","./vNativeDialog":"vNativeDialog"}],vNativeDialog2:[function(e,t,o){"use strict";cc._RF.push(t,"4c8a0p7tPJHhaO1ruKxEHWK","vNativeDialog2");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("./vNativeDialog"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonContent=null,t.buttonFullScreen=null,t.buttonGo=null,t.buttonSafeContent=null,t.labelDesc=null,t.labelTargetTitle=null,t.labelTitle=null,t.spriteButtonClose=null,t.spriteIcon=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vNativeDialog2"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_buttonContent:[a.default,"onTouchButtonContent"],CC_buttonFullScreen:[a.default,"onTouchButtonFullScreen"],CC_buttonGo:[a.default,"onTouchButtonGo"],CC_buttonSafeContent:[a.default,"onTouchButtonSafeContent"],CC_labelDesc:[cc.Label],CC_labelTargetTitle:[cc.Label],CC_labelTitle:[cc.Label],CC_spriteButtonClose:[cc.Sprite],CC_spriteIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onTouchButtonClose=function(t){e.prototype.onTouchButtonClose.call(this,t)},t.prototype.onTouchButtonContent=function(t){e.prototype.onTouchButtonContent.call(this,t)},t.prototype.onTouchButtonFullScreen=function(t){e.prototype.onTouchButtonFullScreen.call(this,t)},t.prototype.onTouchButtonGo=function(t){e.prototype.onTouchButtonGo.call(this,t)},t.prototype.onTouchButtonSafeContent=function(t){e.prototype.onTouchButtonSafeContent.call(this,t)},t=r([l],t)}(i.default));o.default=c,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","./vNativeDialog":"vNativeDialog"}],vNativeDialog:[function(e,t,o){"use strict";cc._RF.push(t,"5491fb/ESRG4rgoPgTn4mkB","vNativeDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/DialogBase"),c=e("./../../manager/mgrAdNative"),u=e("./../../manager/mgrSdk"),d=e("../../manager/mgrAd"),p=e("../../manager/mgrEffect"),h=e("../../Const"),f=cc._decorator,g=f.ccclass,m=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonContent=null,t.buttonFullScreen=null,t.buttonGo=null,t.buttonSafeContent=null,t.labelDesc=null,t.labelTargetTitle=null,t.labelTitle=null,t.spriteButtonClose=null,t.spriteIcon=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vNativeDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[s.default,"onTouchButtonClose"],CC_buttonContent:[s.default,"onTouchButtonContent"],CC_buttonFullScreen:[s.default,"onTouchButtonFullScreen"],CC_buttonGo:[s.default,"onTouchButtonGo"],CC_buttonSafeContent:[s.default,"onTouchButtonSafeContent"],CC_labelDesc:[cc.Label],CC_labelTargetTitle:[cc.Label],CC_labelTitle:[cc.Label],CC_spriteButtonClose:[cc.Sprite],CC_spriteIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),d.default.isMcprc()&&d.default.closeBannerAd()},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.active=!1,this.adEventId=this.context.adEventId,this.userData=this.context.userData,this.spriteIcon.node._orgSize=this.spriteIcon.node.getContentSize(),this.fillData(),this.registerListeners({MSG_NATIVE_AD_SDK_CLICK_SUCCESS:this.onMsgNativeAdSdkClickSuccess})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),c.default.onNativeAdViewClenup(this.context.adEventId)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.fillData=function(){var e=c.default.getNativeDataByAdEventId(this.adEventId);if(e)if(this.nodeResource.active=!0,this.labelTitle.string=e.title,this.labelDesc.string=e.desc,this.labelTargetTitle.string=e.targetTitle,e.spriteFrame){this.spriteIcon.setSpriteFrameAndKeepSize(e.spriteFrame),this.spriteIcon.node.stopAllActions(),this.spriteIcon.node.rotation=0;var t=this.spriteIcon.node._orgSize,o=t.height,n=t.width,r=e.spriteFrame.getOriginalSize(),a=r.width,i=r.height,s=n/a,l=o/i,h=Math.min(s,l);this.spriteIcon.node.setContentSize(cc.size(h*a,h*i))}else this.spriteIcon.loadSpriteFrame("2d/ui/loading/loading"),p.default.rotateForever(this.spriteIcon.node);else console.log("\u53d1\u751f\u4e86\u4e0d\u53ef\u9884\u77e5\u7684\u9519\u8bef, \u8fd9\u4e2a\u4e0d\u5e94\u8be5\u5f39\u51fa\u7684!!!"),this.closeDialog(!0);var f=u.default.getCopNumberValueByKey("native_insert_mode");this.buttonContent.node.active=2==f,this.buttonFullScreen.node.active=3==f,this.buttonSafeContent.node.active=4==f,d.default.todayNativeInsertScaleCount<u.default.getCopNumberValueByKey("native_insert_scale_close_count")&&(d.default.todayNativeInsertScaleIntervalCount>=u.default.getCopNumberValueByKey("native_insert_scale_close_interval")?(d.default.todayNativeInsertScaleIntervalCount=0,d.default.todayNativeInsertScaleCount++,this.buttonClose.node.setContentSize(cc.size(30,30))):(this.buttonClose.node.setContentSize(cc.size(50,50)),d.default.todayNativeInsertScaleIntervalCount++),d.default.saveRecord());var g=u.default.getCopNumberValueByKey("native_insert_close_size_mode");1==g?(this.buttonClose.node.setContentSize(cc.size(50,50)),this.spriteButtonClose.node.setContentSize(cc.size(50,50))):2==g?(this.buttonClose.node.setContentSize(cc.size(80,80)),this.spriteButtonClose.node.setContentSize(cc.size(80,80))):3==g&&(this.buttonClose.node.setContentSize(cc.size(80,80)),this.spriteButtonClose.node.setContentSize(cc.size(50,50)))},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonGo=function(e){e.isClick()&&c.default.clickNative(this.adEventId)},t.prototype.onTouchButtonContent=function(e){e.isClick()&&c.default.clickNative(this.adEventId)},t.prototype.onTouchButtonFullScreen=function(e){e.isClick()&&c.default.clickNative(this.adEventId)},t.prototype.onTouchButtonSafeContent=function(e){e.isClick()&&c.default.clickNative(this.adEventId)},t.prototype.onMsgNativeAdSdkClickSuccess=function(){this.closeDialog()},t.prototype.openDialog=function(t){return void 0===t&&(t=!1),a(this,void 0,void 0,function(){return i(this,function(o){return this.context.globalDialogzIndex=h.default.GLOBAL_ORDER_NATIVE_VIEW,e.prototype.openDialog.call(this,t),[2]})})},t=r([g],t)}(l.default));o.default=m,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrEffect":"mgrEffect","./../../manager/mgrAdNative":"mgrAdNative","./../../manager/mgrSdk":"mgrSdk"}],vNetworkFaildDialog:[function(e,t,o){"use strict";cc._RF.push(t,"0ff2dQvgLhB/Li7J2rJ0jeQ","vNetworkFaildDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrNetwork"),l=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vPromptDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[a.default,"onTouchButton1"],CC_button2:[a.default,"onTouchButton2"],CC_button3:[a.default,"onTouchButton3"],CC_buttonClose:[a.default,"onTouchButtonClose"],CC_labelButton1:[cc.Label],CC_labelButton2:[cc.Label],CC_labelButton3:[cc.Label],CC_labelContent:[cc.Label],CC_labelTitle:[cc.Label],CC_layoutBg:[cc.Layout]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.registerListeners({MSG_NETWORK_CLOSE_FAILD:this.onMsgNetworkCloseFaild.bind(this)})},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.labelTitle.setLocalizedString("vNetworkFaildDialog.1"),this.labelContent.setLocalizedString("vNetworkFaildDialog.2"),this.button1.node.getComponentInChildren(cc.Label).setLocalizedString("vNetworkFaildDialog.3"),this.button2.node.getComponentInChildren(cc.Label).setLocalizedString("vNetworkFaildDialog.4"),this.button3.node.active=!1},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onTouchButton1=function(e){e.isClick()&&s.default.stopAllTasks()},t.prototype.onTouchButton2=function(e){e.isClick()&&s.default.retryCurrentTask()},t.prototype.onTouchButton3=function(e){},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onMsgNetworkCloseFaild=function(){this.closeDialog(!0)},t=r([l],t)}(i.default);o.default=c,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrNetwork":"mgrNetwork"}],vNetworkWaitingDialog:[function(e,t,o){"use strict";cc._RF.push(t,"0dc74vppS9Dkp2s/jYOA0fS","vNetworkWaitingDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/DialogBase"),c=e("../../../ulframework/utils/Timer"),u=e("../../manager/mgrNetwork"),d=cc._decorator.ccclass,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vPromptDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[s.default,"onTouchButton1"],CC_button2:[s.default,"onTouchButton2"],CC_button3:[s.default,"onTouchButton3"],CC_buttonClose:[s.default,"onTouchButtonClose"],CC_labelButton1:[cc.Label],CC_labelButton2:[cc.Label],CC_labelButton3:[cc.Label],CC_labelContent:[cc.Label],CC_labelTitle:[cc.Label],CC_layoutBg:[cc.Layout]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.registerListeners({MSG_NETWORKE_CLOSE_WAITING:this.onMsgNetworkCloseWaiting.bind(this)})},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.labelTitle.setLocalizedString("vNetworkWaitingDialog.1"),this.labelContent.setLocalizedString("vNetworkWaitingDialog.2"),this.button1.node.x=0,this.button1.node.getComponentInChildren(cc.Label).setLocalizedString("vNetworkWaitingDialog.3"),this.button2.node.active=!1,this.button3.node.active=!1},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.openDialog=function(){return a(this,void 0,void 0,function(){var t=this;return i(this,function(o){return e.prototype.openDialog.call(this,!0),this.waitLoadingFinished(function(){var e=t.getCurrentAsyncValue("nodeResource"),o=t.layerShadow;cc.isValid(o)&&(o.opacity=0,e.active=!1,c.default.callLater(1,function(){cc.isValid(o)&&(o.runAction(cc.fadeTo(.2,t.getShadowOpacity())),e.active=!0)},t))}),[2]})})},t.prototype.onTouchButton1=function(e){e.isClick()&&u.default.stopAllTasks()},t.prototype.onTouchButton2=function(e){},t.prototype.onTouchButton3=function(e){},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onMsgNetworkCloseWaiting=function(){this.closeDialog(!0)},t=r([d],t)}(l.default);o.default=p,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrNetwork":"mgrNetwork"}],vOfflineRewardDialog:[function(e,t,o){"use strict";cc._RF.push(t,"0d12aW2CqdIQYN7KvLGmn+G","vOfflineRewardDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ToggleButton"),i=e("../../../ulframework/component/ScleableButton"),s=e("../../../ulframework/view/DialogBase"),l=e("../../manager/mgrTip"),c=e("../../Const"),u=e("../../manager/mgrPlayer"),d=e("../../manager/mgrAd"),p=e("../../../ulframework/utils/Tools"),h=e("../../manager/mgrGuide"),f=e("../../manager/mgrChannel"),g=cc._decorator,m=g.ccclass,_=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonNeedAdv=null,t.buttonNoNeedAdv=null,t.buttonReward=null,t.buttonVideo=null,t.labelButtonReward=null,t.labelButtonVideo=null,t.labelGoneTime=null,t.labelNeedAdv=null,t.labelNoNeedAdv=null,t.labelRewardAmount=null,t.labelRewardVideoAmount=null,t.layoutOnline=null,t.nodeAdButtonFlag=null,t.nodeContent=null,t.nodeGouMode=null,t.nodeReward=null,t.nodeRewardVideo=null,t.nodeTipNormal=null,t.nodeTipOverEightHour=null,t.nodeVideoFlagDoubleFlag1=null,t.nodeVideoFlagDoubleFlag2=null,t.spriteNeedGou=null,t.spriteNoNeedGou=null,t.toggleTipSelect=null,t.AD_OFFLINE_DOUBLE_REWARD="video_offline_dobule_reward",t.isNeedAdv=!0,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vOfflineRewardDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonNeedAdv:[i.default,"onTouchButtonNeedAdv"],CC_buttonNoNeedAdv:[i.default,"onTouchButtonNoNeedAdv"],CC_buttonReward:[i.default,"onTouchButtonReward"],CC_buttonVideo:[i.default,"onTouchButtonVideo"],CC_toggleTipSelect:[a.default,"onTouchToggleTipSelect"],CC_labelButtonReward:[cc.Label],CC_labelButtonVideo:[cc.Label],CC_labelGoneTime:[cc.Label],CC_labelNeedAdv:[cc.Label],CC_labelNoNeedAdv:[cc.Label],CC_labelRewardAmount:[cc.Label],CC_labelRewardVideoAmount:[cc.Label],CC_layoutOnline:[cc.Layout],CC_nodeAdButtonFlag:[cc.Node],CC_nodeContent:[cc.Node],CC_nodeGouMode:[cc.Node],CC_nodeReward:[cc.Node],CC_nodeRewardVideo:[cc.Node],CC_nodeTipNormal:[cc.Node],CC_nodeTipOverEightHour:[cc.Node],CC_nodeVideoFlagDoubleFlag1:[cc.Node],CC_nodeVideoFlagDoubleFlag2:[cc.Node],CC_spriteNeedGou:[cc.Sprite],CC_spriteNoNeedGou:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit(),this.adaptAdMode(),this.adaptTickModeUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onCloseDialogStart=function(){d.default.closeBannerAd()},t.prototype.adaptTickModeUi=function(){this.nodeGouMode.active=!1,this.buttonNeedAdv.node.active=!1,this.buttonNoNeedAdv.node.active=!1,!h.default.isGuiding()&&f.default.isCanVideoTick()&&this.nodeRewardVideo.active&&(this.nodeGouMode.active=!0,this.layoutOnline.node.active=!1,this.nodeReward.active=!0,this.randomNeedAdv()?(this.buttonNeedAdv.node.active=!0,this.labelButtonReward.setLocalizedString("vOfflineRewardDialog.1")):(this.buttonNoNeedAdv.node.active=!0,this.labelButtonReward.setLocalizedString("vOfflineRewardDialog.5")))},t.prototype.randomNeedAdv=function(){return p.default.random(100)>50?(this.isNeedAdv=!0,!0):(this.isNeedAdv=!1,!1)},t.prototype.adaptAdMode=function(){if(!d.default.preCheckCanTriggerAdEvent(this.AD_OFFLINE_DOUBLE_REWARD))return this.layoutOnline.node.active=!1,void(this.nodeReward.active=!0);this.layoutOnline.node.active=d.default.isOnline(),this.nodeReward.active=d.default.isMcprc(),d.default.isOnline()&&(this.toggleTipSelect.isPressed()?(this.labelButtonVideo.setLocalizedString("vOfflineRewardDialog.6"),this.nodeAdButtonFlag.active=!0,this.nodeVideoFlagDoubleFlag1.active=!0,this.nodeVideoFlagDoubleFlag2.active=!1):(this.labelButtonVideo.setLocalizedString("vOfflineRewardDialog.7"),this.nodeAdButtonFlag.active=!1,this.nodeVideoFlagDoubleFlag1.active=!1,this.nodeVideoFlagDoubleFlag2.active=!1))},t.prototype.onLoadedInit=function(){var e=this;cc.log("----this.context.time=",this.context.time),this.setClickShadowClose(!1);if(this.nodeTipOverEightHour.active=this.context.time>=480,this.nodeTipNormal.active=!this.nodeTipOverEightHour.active,this.context.time<480){var t=Math.floor(this.context.time/60),o=Math.floor(this.context.time%60),n="";t&&(n=ul.format("%s\u5c0f\u65f6",t)),o&&(n=ul.format("%s%s\u5206\u949f",n,o)),cc.log("-------time,hour,min",this.context.time,t,o,n),this.labelGoneTime.string=ul.format("%s",n),this.labelGoneTime.node.runAction(cc.sequence(cc.delayTime(.3),cc.callFunc(function(){p.default.layoutNodesHorizonCenter(e.labelGoneTime.node.parent.children,4)})))}this.labelRewardVideoAmount.string=ul.format("%s",u.default.getItemAmountStr(this.context.amount)),this.labelRewardAmount.string=ul.format("%s",u.default.getItemAmountStr(this.context.amount)),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd.bind(this),MSG_AD_EVENT_FAILD:this.onMsgAdEventFaild.bind(this),MSG_AD_EVENT_CANCELED:this.onMsgAdEventCanceled.bind(this)}),d.default.preCheckCanTriggerAdEvent(this.AD_OFFLINE_DOUBLE_REWARD)?this.nodeRewardVideo.active=!0:(this.nodeRewardVideo.active=!1,this.nodeReward.y=0)},t.prototype.doReceiveOnlineReward=function(e){e?u.default.addItemAmount(c.default.ITEM_ID_GOLD,2*this.context.amount,"\u79bb\u7ebf\u5956\u52b1_\u5e7f\u544a"):u.default.addItemAmount(c.default.ITEM_ID_GOLD,this.context.amount,"\u79bb\u7ebf\u5956\u52b1"),l.default.addGotItemTip(c.default.ITEM_ID_GOLD,e?2*this.context.amount:this.context.amount),h.default.isGuiding()||this.sendMsg("MSG_RECEIVED_OFFLINE_REWARD"),f.default.tryShowFindMeOrShortCut(),this.closeDialog()},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.onTouchButtonReward(e)},t.prototype.onTouchButtonReward=function(e){if(e.isClick()){if(!h.default.isGuiding()&&f.default.isCanVideoTick()&&this.nodeGouMode.active&&this.nodeRewardVideo.active){if(this.isNeedAdv&&this.buttonNeedAdv.node.active&&this.spriteNeedGou.node.active)return void d.default.triggerAdEvent(this.AD_OFFLINE_DOUBLE_REWARD,null,!0);if(!this.isNeedAdv&&this.buttonNoNeedAdv.node.active&&!this.spriteNoNeedGou.node.active)return void d.default.triggerAdEvent(this.AD_OFFLINE_DOUBLE_REWARD,null,!0)}this.doReceiveOnlineReward()}},t.prototype.onTouchButtonVideo=function(e){e.isClick()&&(!d.default.isOnline()||this.toggleTipSelect.isPressed()?d.default.triggerAdEvent(this.AD_OFFLINE_DOUBLE_REWARD,null,!0):this.doReceiveOnlineReward(!1))},t.prototype.onTouchToggleTipSelect=function(e){e.isClick()&&this.adaptAdMode()},t.prototype.onTouchButtonNeedAdv=function(e){e.isClick()&&(this.spriteNeedGou.node.active?(this.spriteNeedGou.node.active=!1,this.labelButtonReward.setLocalizedString("vOfflineRewardDialog.5")):(this.spriteNeedGou.node.active=!0,this.labelButtonReward.setLocalizedString("vOfflineRewardDialog.1")))},t.prototype.onTouchButtonNoNeedAdv=function(e){e.isClick()&&(this.spriteNoNeedGou.node.active?(this.spriteNoNeedGou.node.active=!1,this.labelButtonReward.setLocalizedString("vOfflineRewardDialog.1")):(this.spriteNoNeedGou.node.active=!0,this.labelButtonReward.setLocalizedString("vOfflineRewardDialog.5")))},t.prototype.onMsgAdEventSuccessd=function(e){var t=e;cc.log("---offline onMsgAdEventSuccessd data=",t),t.adEventId==this.AD_OFFLINE_DOUBLE_REWARD&&this.doReceiveOnlineReward(!0)},t.prototype.onMsgAdEventFaild=function(e){e.adEventId==this.AD_OFFLINE_DOUBLE_REWARD&&this.doReceiveOnlineReward()},t.prototype.onMsgAdEventCanceled=function(e){this.onMsgAdEventFaild(e)},t.prototype.isClickShadowClose=function(){return!1},t=r([m],t)}(s.default));o.default=_,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/component/ToggleButton":"ToggleButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrChannel":"mgrChannel","../../manager/mgrGuide":"mgrGuide","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrTip":"mgrTip"}],vOpMidAutumnLotteryDialog:[function(e,t,o){"use strict";cc._RF.push(t,"c269a0qcalPF4HU1gZTa7my","vOpMidAutumnLotteryDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/utils/Tools"),s=e("../../../ulframework/view/DialogBase"),l=e("../../Const"),c=e("../../manager/mgrAd"),u=e("../../manager/mgrCfg"),d=e("../../manager/mgrDirector"),p=e("../../manager/mgrPlayer"),h=e("../../manager/mgrTip"),f=e("../../struct/sAvatar"),g=e("../node/vAvatar"),m=e("../node/vOpMidAutumnLotteryItem"),_=e("../../manager/mgrSound"),v=e("../node/vCommonTitleBarRmbGold"),y=e("../../manager/mgrSdk"),C=e("../../manager/mgrOpMidAutumnLottery"),S=cc._decorator.ccclass,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectedSuitItemIndex=0,t.buttonBack=null,t.buttonBuy=null,t.buttonClose=null,t.labelStart=null,t.labelSurplusCount=null,t.labelSurplusCountTip=null,t.labelTime=null,t.labelTitle=null,t.nodeAdFlag=null,t.nodeArrow=null,t.nodeAvatar=null,t.nodeBannerArea=null,t.nodeBottomBuy=null,t.nodeBuy=null,t.nodeCenter=null,t.nodeFinishTip=null,t.nodeItem1=null,t.nodeItem10=null,t.nodeItem11=null,t.nodeItem12=null,t.nodeItem2=null,t.nodeItem3=null,t.nodeItem4=null,t.nodeItem5=null,t.nodeItem6=null,t.nodeItem7=null,t.nodeItem8=null,t.nodeItem9=null,t.nodeItems=null,t.nodeLayoutContent=null,t.nodeStartTip=null,t.nodeSurplusCount=null,t.nodeTitle=null,t.nodeTitleBar=null,t.nodeUIRoot=null,t.LOTTERY_ITEM_NUM=12,t.AD_FREE_LOTTERY_NAME="video_mid_autumn_lottery",t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vOpMidAutumnLotteryDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBack:[a.default,"onTouchButtonBack"],CC_buttonBuy:[a.default,"onTouchButtonBuy"],CC_buttonClose:[a.default,"onTouchButtonClose"],CC_labelStart:[cc.Label],CC_labelSurplusCount:[cc.Label],CC_labelSurplusCountTip:[cc.Label],CC_labelTime:[cc.Label],CC_labelTitle:[cc.Label],CC_nodeAdFlag:[cc.Node],CC_nodeArrow:[cc.Node],CC_nodeAvatar:[cc.Node],CC_nodeBannerArea:[cc.Node],CC_nodeBottomBuy:[cc.Node],CC_nodeBuy:[cc.Node],CC_nodeCenter:[cc.Node],CC_nodeFinishTip:[cc.Node],CC_nodeItem1:[cc.Node],CC_nodeItem10:[cc.Node],CC_nodeItem11:[cc.Node],CC_nodeItem12:[cc.Node],CC_nodeItem2:[cc.Node],CC_nodeItem3:[cc.Node],CC_nodeItem4:[cc.Node],CC_nodeItem5:[cc.Node],CC_nodeItem6:[cc.Node],CC_nodeItem7:[cc.Node],CC_nodeItem8:[cc.Node],CC_nodeItem9:[cc.Node],CC_nodeItems:[cc.Node],CC_nodeLayoutContent:[cc.Node],CC_nodeStartTip:[cc.Node],CC_nodeSurplusCount:[cc.Node],CC_nodeTitle:[cc.Node],CC_nodeTitleBar:[cc.Node],CC_nodeUIRoot:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),c.default.showViewEnterAd(this.nodeResource,null,"inter_mid_autumn_lottery_dialog","ad_banner_mid_autumn_dialog")},t.prototype.onResourceLoaded=function(){(e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(d.default.size),this.setContentSize(d.default.size),this.setShadowOpacity(200),c.default.isBannerAdValid())&&(this.nodeUIRoot.getComponent(cc.Widget).bottom=c.default.getBannerHeight());this.bVideoLottery=c.default.isAdEventHasChanceTrigger(this.AD_FREE_LOTTERY_NAME);var t=y.default.getCopNumberValueByKey("mid_autumn_start_time"),o=y.default.getCopNumberValueByKey("mid_autumn_end_time"),n=new Date(1e3*t).getMonth()+1,r=new Date(1e3*t).getDate(),a=new Date(1e3*o).getMonth()+1,s=new Date(1e3*o).getDate();this.labelTime.string=n+"\u6708"+r+"\u65e5-"+a+"\u6708"+s+"\u65e5",C.default.lastShowOpMidAutumnLotteryDialogTime=i.default.time()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onOpenDialogCompleted=function(){this.onLoadedInit()},t.prototype.onCloseDialogStart=function(){},t.prototype.onLoadedInit=function(){var e=this,t=new f.default;this.structAvatar=t,this.viewAvatar=new g.default({structAvatar:this.structAvatar}),this.viewAvatar.parent=this.nodeAvatar;var o=u.default.get("suit_db",6009);this.viewAvatar.setScale(.95),this.structAvatar.fillByPartIds(o.displayIds),this.viewAvatar.refreshAll(),this.setClickShadowClose(!1),this.initData(),this.buildUi(),this.fillLotteryDatas(),this.refreshPrice(),this.playUIActionOut(1e-5),this.actionInAvatar(!1,null,.5),this.nodeBuy._buyAction=function(){e.nodeBuy.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.1,1.1),cc.scaleTo(.6,.9,.9),cc.scaleTo(.3,1,1))))},this.registerListeners({MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this),MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd.bind(this),MSG_AD_EVENT_FAILD:this.onMsgAdEventFaild.bind(this),MSG_AD_EVENT_CANCELED:this.onMsgAdEventCanceled.bind(this),MSG_RESET_SUIT_BACK_SCENE:this.onMsgResetSuitBackScene.bind(this)})},t.prototype.refreshPrice=function(){0==C.default.lotteryedNum||1==C.default.lotteryedNum&&this.bVideoLottery?this.nodeBuy._buyAction&&this.nodeBuy._buyAction():(this.buttonBuy.node.stopAllActions(),this.buttonBuy.node.scale=1,this.nodeFinishTip.active=!0,this.nodeFinishTip.opacity=255,this.nodeStartTip.active=!1),this.nodeAdFlag.active=!!(C.default.lotteryedNum>=1&&this.bVideoLottery)},t.prototype.buildUi=function(){this.nodeStartTip.active=!0,new v.default({bHideEnergy:!0}).parent=this.nodeTitleBar;for(var e=[],t=1;t<=this.LOTTERY_ITEM_NUM;t++){var o=this["nodeItem"+t];if(o){o._position||(o._position=o.position),o.scale=0;var n=new m.default({fOnClick:this.onClickItem.bind(this),index:t-1});n.parent=o,e.push(n)}}this.suitItems=e,this.buttonBack.node.active=1==y.default.getCopNumberValueByKey("ad_dialog_mode"),this.labelSurplusCount.string=""+(l.default.MID_AUTUMN_LOTTERY_MAX_COUNT-C.default.lotteryedNum)},t.prototype.fillLotteryDatas=function(){var e=C.default.lotteryedNum,t=[],o=-1;u.default.forDb("mid_autumn_lottery_item_db",function(e,n){var r=parseInt(e);r>o&&(o=r,t=n)});var n=u.default.get("mid_autumn_lottery_item_db",e+1)||t;cc.log("  lotteryedNum",e),this.lotteryDatas=n,console.log("fillLotteryDatas===",this.lotteryDatas);for(var r=0;r<n.length;r++){var a=n[r];this.suitItems[r].fillData(a.rewardItemId,a.rewardAmount)}},t.prototype.initData=function(){},t.prototype.playUIActionIn=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!1),this.actionInAvatar(t,e)},t.prototype.playUIActionOut=function(e,t,o){void 0===e&&(e=null),void 0===t&&(t=null),void 0===o&&(o=!0),this.actionOutAvatar(o,t,e)},t.prototype.actionOutAvatar=function(e,t,o){void 0===t&&(t=null),void 0===o&&(o=.3),o=o||.3;var n=null;n=e?cc.v2(this.nodeAvatar._position.x+d.default.size.width,this.nodeAvatar._position.y):cc.v2(this.nodeAvatar._position.x-d.default.size.width,this.nodeAvatar._position.y),this.nodeAvatar.position=this.nodeAvatar._position,this.nodeAvatar.stopAllActions(),this.nodeAvatar.runAction(cc.sequence(cc.moveTo(o,n),cc.callFunc(function(){t&&t()}))),this.nodeTitle.stopAllActions(),this.nodeTitle.runAction(cc.fadeOut(o));for(var r=1;r<=this.LOTTERY_ITEM_NUM;r++){var a=this["nodeItem"+r];a&&(a.stopAllActions(),a.runAction(cc.scaleTo(o>.01?.03*r:o,0,0)))}},t.prototype.actionInAvatar=function(e,t,o){void 0===t&&(t=null),void 0===o&&(o=.3),o=o||.3;var n=this.nodeAvatar._position;cc.v2(0,0);e?cc.v2(this.nodeAvatar._position.x+d.default.size.width,this.nodeAvatar._position.y):cc.v2(this.nodeAvatar._position.x-d.default.size.width,this.nodeAvatar._position.y),this.nodeAvatar.stopAllActions(),this.nodeAvatar.runAction(cc.sequence(cc.moveTo(o,n),cc.callFunc(function(){t&&t()}))),this.nodeTitle.stopAllActions(),this.nodeTitle.runAction(cc.fadeIn(o));for(var r=1;r<=this.LOTTERY_ITEM_NUM;r++){var a=this["nodeItem"+r];a&&a.runAction(cc.scaleTo(.05*r,1,1))}},t.prototype.doButtonBuy=function(){if(!this.lotteryingData){var e=[],t=this.lotteryDatas;console.log("doButtonBuy.arr===",t);var o=null;for(var n in t){var r=t[n];console.log("data====",r),r.bDefault&&(o=r),r.bCheckUnown&&p.default.getItemAmount(r.rewardItemId)>0||e.push(r)}console.log("doButtonBuy.validDatas==",e),console.log("doButtonBuy.defaultData==",o);var a=i.default.calcWheelTarget(e,"weight")||o;console.log("doButtonBuy.lotteryingData==",a),a?(this.lotteryingData=a,this.refreshPrice(),this.doLottery()):h.default.showMsgTip("\u5df2\u7ecf\u6ca1\u6709\u5566")}},t.prototype.selectSuitItem=function(e){for(var t=this.suitItems||[],o=t.length,n=0;n<o;n++){var r=t[n];console.log("selectSuitItem====",n,e),r.setSelected(n==e)}this.selectedSuitItemIndex=e},t.prototype.getSuitItem=function(e){return(this.suitItems||[])[e]},t.prototype.rewardLottery=function(){var e=this;this.bAction=!1;var t=this.lotteryingData;cc.log("---lotteryingData=",this.lotteryingData);t&&(C.default.markLotteryed(),p.default.addItemAmount(t.rewardItemId,t.rewardAmount,"\u4e2d\u79cb\u6d3b\u52a8"),h.default.addGotItemTip(t.rewardItemId,t.rewardAmount,null,{fOnDialogClose:function(){e.closeDialog()}}),this.lotteryingData=null),this.refreshPrice(),this.fillLotteryDatas()},t.prototype.doLottery=function(){var e=this;this.bAction=!0,this.selectSuitItem(this.selectedSuitItemIndex);var t=this.selectedSuitItemIndex,o=this.suitItems||[];console.log("doLottery.this.selectedSuitItemIndex==",this.selectedSuitItemIndex),console.log("doLottery.lotteryItems==",o);var n=this.lotteryingData.itemIndex;this.buttonClose.node.scale=1e-5,this.buttonBuy.node.stopAllActions();var r=360/this.LOTTERY_ITEM_NUM,a=t*r,s=360*i.default.random(3,5)+n*r;cc.log("---",o.length,s),cc.log("-----startLotteryIndex,targetLotteryIndex=",t,n),this.nodeAvatar.runAction(cc.sequence(ul.actionFloat(3,a,s,function(t){var o=Math.floor(t%360/r);console.log("=====index=====",o),cc.log("---index=",o),e.__last_index!=o&&(e.__last_index=o,cc.log("--------------index=",o),_.default.play(110),e.selectSuitItem(o))}),cc.callFunc(function(){e.rewardLottery(),e.buttonClose.node.scale=1})))},t.prototype.onClickItem=function(e,t,o){this.bActioning||h.default.showItemDetailDialog(e,1,{bCanBuy:!1,reason:"\u70b9\u51fb_\u5957\u88c5\u754c\u9762\u8d2d\u4e70\u90e8\u4ef6"})},t.prototype.onTouchButtonClose=function(e){!e.isClick()||i.default.pDistance(e.getStartLocation(),e.getLocation())>100||this.closeDialog()},t.prototype.onTouchButtonBuy=function(e){if(e.isClick())if(this.bAction)cc.log("\u8fd8\u5728\u8f6c\uff0c\u4e0d\u8981\u614c");else{if(console.log("mgrOpMidAutumnLottery.lotteryedNum===",C.default.lotteryedNum),C.default.lotteryedNum>=l.default.MID_AUTUMN_LOTTERY_MAX_COUNT||1==C.default.lotteryedNum&&!this.bVideoLottery)return h.default.showMsgTip("\u660e\u65e5\u518d\u6765\u5427"),void this.closeDialog(!0);1!=C.default.lotteryedNum?this.doButtonBuy():c.default.triggerAdEvent(this.AD_FREE_LOTTERY_NAME,null,!0)}},t.prototype.onTouchButtonBack=function(e){this.onTouchButtonClose(e)},t.prototype.onMsgItemAmountChanged=function(e){var t=e.itemId;if(t){var o=u.default.get("item_template_db",t);o&&o.flag==l.default.ITEM_FLAG_PART&&this.refreshPrice()}},t.prototype.onMsgAdEventSuccessd=function(e){e.adEventId==this.AD_FREE_LOTTERY_NAME&&this.doButtonBuy()},t.prototype.onMsgAdEventFaild=function(e){e.adEventId},t.prototype.onMsgAdEventCanceled=function(e){this.onMsgAdEventFaild(e)},t.prototype.onMsgResetSuitBackScene=function(e){var t=e;t.backScene&&(this.context.backScene=t.backScene)},t=r([S],t)}(s.default);o.default=b,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDirector":"mgrDirector","../../manager/mgrOpMidAutumnLottery":"mgrOpMidAutumnLottery","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrSdk":"mgrSdk","../../manager/mgrSound":"mgrSound","../../manager/mgrTip":"mgrTip","../../struct/sAvatar":"sAvatar","../node/vAvatar":"vAvatar","../node/vCommonTitleBarRmbGold":"vCommonTitleBarRmbGold","../node/vOpMidAutumnLotteryItem":"vOpMidAutumnLotteryItem"}],vOpMidAutumnLotteryItem:[function(e,t,o){"use strict";cc._RF.push(t,"2a6cbyFgg1KSLZy3BXYjsTY","vOpMidAutumnLotteryItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/ViewBase"),c=e("../../manager/mgrCfg"),u=e("../../manager/mgrPlayer"),d=e("./vLevelBar"),p=e("../../manager/mgrStage"),h=cc._decorator.ccclass,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBg=null,t.labelAmount=null,t.labelCondition=null,t.labelIndex=null,t.nodeBgNormal=null,t.nodeBgSelected=null,t.nodeCondition=null,t.nodeIcon=null,t.nodeLevel=null,t.nodeOwnedFlag=null,t.spriteIcon=null,t.spriteLockFlag=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vOpMidAutumnLotteryItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBg:[s.default,"onTouchButtonBg"],CC_labelAmount:[cc.Label],CC_labelCondition:[cc.Label],CC_labelIndex:[cc.Label],CC_nodeBgNormal:[cc.Node],CC_nodeBgSelected:[cc.Node],CC_nodeCondition:[cc.Node],CC_nodeIcon:[cc.Node],CC_nodeLevel:[cc.Node],CC_nodeOwnedFlag:[cc.Node],CC_spriteIcon:[cc.Sprite],CC_spriteLockFlag:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=new d.default;e.parent=this.nodeLevel,this.levelBar=e,this.registerListeners({MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this)})},t.prototype.isLotteryValid=function(){return!0},t.prototype.getIndex=function(){return this.context.index},t.prototype.trySelectByIndex=function(e){this.setSelected(e==this.context.index)},t.prototype.setSelected=function(e){this.nodeBgNormal.active=!e,this.nodeBgSelected.active=!!e},t.prototype.setReverseSelected=function(){return a(this,void 0,void 0,function(){return i(this,function(e){return[2]})})},t.prototype.refresh=function(){this.fillData(this.itemId,this.itemNum)},t.prototype.fillData=function(e,t){this.itemId=e,this.itemNum=t,this.labelIndex.string=this.context.index;var o=c.default.quietGet("cosmetic_part_db",this.itemId);if(!o)return this.nodeOwnedFlag.active=!1,this.spriteLockFlag.node.active=!1,this.nodeCondition.active=!1,this.nodeLevel.active=!1,this.spriteIcon.node.active=!0,this.spriteIcon.loadSpriteFrameAndKeepSize(u.default.getIcon(e)),this.spriteIcon.node.scale=.6,this.labelAmount.node.opacity=255,void(this.labelAmount.string=ul.format("*%s",this.itemNum));if(this.labelAmount.node.opacity=0,this.nodeLevel.active=!0,this.spriteIcon.node.active=!!o.icon,o.icon&&this.spriteIcon.loadSpriteFrameAndKeepSize(o.icon),this.nodeCondition.active=!1,u.default.getItemAmount(this.itemId)<=0){if(this.nodeOwnedFlag.active=!1,o.unlockStageId){var n=!0;o.unlockStageId&&!p.default.isStageUnlocked(o.unlockStageId)&&(this.labelCondition.string=ul.format("\u7b2c%s\u5173\u89e3\u9501",o.unlockStageId),n=!1),this.nodeCondition.active=!n}}else this.nodeOwnedFlag.active=!0},t.prototype.onTouchButtonBg=function(e){if(e.isClick()&&this.context.fOnClick){var t=this.spriteIcon.node.parent.convertToWorldSpaceAR(this.spriteIcon.node.position);this.context.fOnClick(this.itemId,this.itemNum,t)}},t.prototype.onMsgItemAmountChanged=function(e){var t=e.itemId;this.itemId&&t&&t==this.itemId&&this.refresh()},r([l.default.requireResourceLoaded],t.prototype,"trySelectByIndex",null),r([l.default.requireResourceLoaded],t.prototype,"setSelected",null),r([l.default.requireResourceLoaded],t.prototype,"setReverseSelected",null),r([l.default.requireResourceLoaded],t.prototype,"fillData",null),t=r([h],t)}(l.default);o.default=f,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrStage":"mgrStage","./vLevelBar":"vLevelBar"}],vOpNcovTipDialog:[function(e,t,o){"use strict";cc._RF.push(t,"692a95k3BhBFLLMynvZdI9X","vOpNcovTipDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrOpNcov"),l=e("../../manager/mgrCfg"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonNext=null,t.buttonReward=null,t.labelRewardAmount=null,t.layoutBg=null,t.nodeButton=null,t.nodeImage=null,t.spriteImage1=null,t.spriteImage2=null,t.spriteImage3=null,t.spriteRewardIcon=null,t.bBanButton=!1,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vOpNcovTipDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonNext:[a.default,"onTouchButtonNext"],CC_buttonReward:[a.default,"onTouchButtonReward"],CC_labelRewardAmount:[cc.Label],CC_layoutBg:[cc.Layout],CC_nodeButton:[cc.Node],CC_nodeImage:[cc.Node],CC_spriteImage1:[cc.Sprite],CC_spriteImage2:[cc.Sprite],CC_spriteImage3:[cc.Sprite],CC_spriteRewardIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.spriteImages=[this.spriteImage1,this.spriteImage2,this.spriteImage3],this.currIndex=0,this.imageCount=this.spriteImages.length,this.fillData(),this.nodeButton.runAction(cc.sequence(cc.fadeOut(0),cc.moveTo(0,0,0),cc.delayTime(1),cc.fadeIn(.5)))},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.fillData=function(){cc.log("vOpNcovTip.fillData"),cc.log("  currIndex",this.currIndex),cc.log("  imageCount",this.imageCount);for(var e=0;e<this.spriteImages.length;e++){this.spriteImages[e].node.active=e==this.currIndex}if(this.buttonNext.node.opacity=0,this.buttonReward.node.opacity=0,this.currIndex>=this.imageCount-1&&s.default.canReceive()){var t=l.default.get("op_ncov_module_config_db",1);if(t&&t.rewards&&t.rewards.length>=1){var o=t.rewards[0],n=o[0],r=o[1],a=l.default.get("item_template_db",n);a&&(this.spriteRewardIcon.loadSpriteFrameAndKeepSize(a.icon),this.labelRewardAmount.string=ul.format("%d",r),this.buttonReward.node.opacity=255)}}this.buttonNext.node.opacity=0==this.buttonReward.node.opacity?255:0},t.prototype.playNextAction=function(){var e=this,t=this.spriteImages[this.currIndex-1],o=this.spriteImages[this.currIndex];t.node.runAction(cc.moveBy(.5,-400,0).easing(cc.easeIn(1.5))),this.bBanButton=!0,this.nodeButton.runAction(cc.sequence(cc.fadeOut(.3),cc.moveTo(0,0,0),cc.delayTime(1),cc.fadeIn(.5))),o.node.active=!0,o.node.x=400,o.node.runAction(cc.sequence(cc.moveBy(.5,-400,0).easing(cc.easeIn(1.5)),cc.scaleTo(.1,1.05).easing(cc.easeInOut(1.5)),cc.scaleTo(.5,1).easing(cc.easeBackOut()),cc.callFunc(function(){e.fillData(),e.bBanButton=!1})))},t.prototype.doNext=function(){this.currIndex>=this.imageCount-1?s.default.canReceive()?(s.default.tryReceive(),this.closeDialog()):this.closeDialog():(this.currIndex++,this.playNextAction())},t.prototype.onTouchButtonNext=function(e){cc.log("onTouchButtonNext",e.name,e.getLocationX(),e.getLocationY()),e.isClick()&&(this.bBanButton||this.doNext())},t.prototype.onTouchButtonReward=function(e){e.isClick()&&(this.bBanButton||this.doNext())},t=r([u],t)}(i.default));o.default=d,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrOpNcov":"mgrOpNcov"}],vOrderIcon:[function(e,t,o){"use strict";cc._RF.push(t,"bc1e68+laZN/oQLwM2aepKu","vOrderIcon");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/view/ViewBase"),i=e("../../manager/mgrTip"),s=e("../../manager/mgrDirector"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelCount=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vOrderIcon"},t.prototype._getResourceBindingConfig=function(){return{CC_labelCount:[cc.Label]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.context.count&&(this.labelCount.string=ul.format("%s",this.context.count))},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.play=function(e){this.parent=i.default.getTipRootNode();var t=e||s.default.center,o=cc.v2(t.x,t.y+50);t=this.parent.convertToNodeSpace(t),o=this.parent.convertToNodeSpace(o),this.scale=0,this.setPosition(t),this.stopAllActions(),this.runAction(cc.spawn(cc.scaleTo(.15,1).easing(cc.easeIn(2)),cc.moveTo(1.1,o).easing(cc.easeOut(1.2)),cc.sequence(cc.fadeIn(.15).easing(cc.easeIn(2)),cc.delayTime(.65),cc.fadeOut(.3),cc.removeSelf())))},t=r([c],t)}(a.default));o.default=u,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrDirector":"mgrDirector","../../manager/mgrTip":"mgrTip"}],vOrderTitleBar:[function(e,t,o){"use strict";cc._RF.push(t,"b6db0QSUTpKd5kLL7SNknfC","vOrderTitleBar");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/view/ViewBase"),i=e("../../Const"),s=e("../../manager/mgrPlayer"),l=e("../../manager/mgrPool"),c=cc._decorator.ccclass,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelEnergy=null,t.labelEnergyRecoverTime=null,t.labelProcess=null,t.nodeEnergy=null,t.nodeEnergyParticle=null,t.progressBarOrder=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vOrderTitleBar"},t.prototype._getResourceBindingConfig=function(){return{CC_labelEnergy:[cc.Label],CC_labelEnergyRecoverTime:[cc.Label],CC_labelProcess:[cc.Label],CC_nodeEnergy:[cc.Node],CC_nodeEnergyParticle:[cc.Node],CC_progressBarOrder:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.initData()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.refreshTime()},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.initData=function(){var e=[this.nodeEnergyParticle];for(var t in e){var o=e[t];l.default.get("spine","shan_xx").parent=o}this.registerListeners({MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this)}),this.refreshData()},t.prototype.refreshTime=function(){},t.prototype.refreshData=function(){if(this.labelEnergy){var e=s.default.getItemAmount(i.default.ITEM_ID_AVATAR_ORDER);this.context.fGetOrderAmountFunc&&(e=this.context.fGetOrderAmountFunc());var t=s.default.getItemAmount(i.default.ITEM_ID_MAX_AVATAR_ORDER);e=Math.min(e,t),this.labelEnergy.getComponent(cc.Label).string=ul.format("%d/%d",e,t)}this.refreshTime()},t.prototype.playActionIn=function(){},t.prototype.playActionOut=function(){},t.prototype.onTouchButtonAddEnergy=function(e){e.isClick()},t.prototype.onTouchButtonAddGold=function(e){e.isClick()},t.prototype.onMsgItemAmountChanged=function(e){var t=e.itemId;if(!this.context.bDisableAutoRefresh&&t==i.default.ITEM_ID_AVATAR_ORDER){if(this.refreshData(),this.refreshTime(),!this.labelEnergy||0!=this.labelEnergy.node.getNumberOfRunningActions())return;this.labelEnergy.node.runAction(cc.sequence(cc.scaleTo(.2,1.3,1.3),cc.scaleTo(.2,1,1)))}},t=r([c],t)}(a.default);o.default=u,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrPool":"mgrPool"}],vPackingAvatar:[function(e,t,o){"use strict";cc._RF.push(t,"b468dIYT89EzYdA4cXzt61b","vPackingAvatar");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../struct/sAvatar"),l=e("../../manager/mgrDirector"),c=e("../../manager/mgrPacking"),u=e("../../manager/mgrCosmetic"),d=e("../../manager/mgrCfg"),p=e("../../manager/mgrPlayer"),h=cc._decorator,f=h.ccclass,g=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBg=null,t.labelSuggestPrice=null,t.nodeAddFlag=null,t.nodeAvatar=null,t.nodeChangeFlag=null,t.nodeLevel=null,t.nodeLocked=null,t.nodePrice=null,t.nodePriceBase=null,t.nodeSubject=null,t.spriteIconAdd=null,t.spritePacking=null,t.spritePackingFront=null,t.spriteSubject=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vPackingAvatar"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBg:[a.default,"onTouchButtonBg"],CC_labelSuggestPrice:[cc.Label],CC_nodeAddFlag:[cc.Node],CC_nodeAvatar:[cc.Node],CC_nodeChangeFlag:[cc.Node],CC_nodeLevel:[cc.Node],CC_nodeLocked:[cc.Node],CC_nodePrice:[cc.Node],CC_nodePriceBase:[cc.Node],CC_nodeSubject:[cc.Node],CC_spriteIconAdd:[cc.Sprite],CC_spritePacking:[cc.Sprite],CC_spritePackingFront:[cc.Sprite],CC_spriteSubject:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onLoadedInit=function(){this.buttonBg.setActionEnable(!this.context.bDisableButtonAction),this.buttonBg.setSingleTouchGap(.1),this.spriteIconAdd.node.active=!this.context.bDisableButtonAction,this.refresh(),this.refreshPacking(),this.registerListeners({MSG_PACKING_AVATAR_CHANGED:this.onMsgPackingAvatarChanged.bind(this),MSG_PACKING_LEVEL_CHANGED:this.onMsgPackingLevelChanged.bind(this)})},t.prototype.refreshPacking=function(){var e=this.context.packing;e&&(this.spritePacking.loadSpriteFrameAndKeepSize(e.template.texture),this.spritePackingFront.loadSpriteFrameAndKeepSize(e.template.textureFront),this.context.bDisableZeroPacking&&0==e.level?(this.spritePacking.node.active=!1,this.spritePackingFront.node.active=!1):(this.spritePacking.node.active=!0,this.spritePackingFront.node.active=!0))},t.prototype.refresh=function(){var e=this.context.packing;if(e){var t=e.level>0;if(this.nodeAvatar.active=t,this.nodeLocked.active=!t,this.nodeChangeFlag.active=t&&!this.context.bDisableChange,t&&!this.viewAvatar){var o=new s.default;this.structAvatar=o,this.viewAvatar=l.default.createView("vAvatar",{structAvatar:this.structAvatar,bDisableSpine:!0}),this.viewAvatar.parent=this.nodeAvatar,this.viewAvatar.setScale(.3)}this.nodeSubject.active=!0;var n=u.default.getSubjectByPackingId(e.id),r=d.default.get("cosmetic_subject_tag_db",n);this.spriteSubject.loadSpriteFrameAndKeepSize(r.texture);var a=c.default.getPackingAvatarStr(e.id);if(a&&""!=a){this.nodeAddFlag.active=!1,this.nodePriceBase.active=!!this.context.bEnableShowPrice,this.nodePrice.active=!!this.context.bEnableShowPrice,this.structAvatar.fillBySerializeText(a),this.viewAvatar.refreshAll();var i=u.default.getAvatarScoreBySubjectId(this.structAvatar,n);this.labelSuggestPrice.string=ul.format("%s",p.default.getItemAmountStr(Math.ceil(i+e.template.productGoldNumRatio/1e4*i)))}else this.nodeChangeFlag.active=!1,this.nodeAvatar.active=!1,this.nodeAddFlag.active=!!t,this.nodePriceBase.active=!1,this.nodePrice.active=!1}},t.prototype.getPacking=function(){return this.context.packing},t.prototype.getPackingId=function(){return this.context.packing.id},t.prototype.setDisableChange=function(){this.context.bDisableChange=!0;var e=this.context.packing.level>0;this.nodeChangeFlag.active=e&&!this.context.bDisableChange},t.prototype.fillByPacking=function(e){this.context.packing=e,this.refresh(),this.refreshPacking()},t.prototype.onTouchButtonBg=function(e){if(e.isClick()){var t=this.context.packing;t&&this.context.fOnClick&&this.context.fOnClick(t.id)}},t.prototype.onMsgPackingAvatarChanged=function(e){var t=e.packingId,o=this.context.packing;o&&t&&t==o.id&&this.refresh()},t.prototype.onMsgPackingLevelChanged=function(e){var t=e.packingId,o=this.context.packing;cc.log("-----",t,o.id),o&&t&&t==o.id&&(this.refresh(),this.refreshPacking())},r([i.default.requireResourceLoaded],t.prototype,"fillByPacking",null),t=r([f],t)}(i.default));o.default=g,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrCosmetic":"mgrCosmetic","../../manager/mgrDirector":"mgrDirector","../../manager/mgrPacking":"mgrPacking","../../manager/mgrPlayer":"mgrPlayer","../../struct/sAvatar":"sAvatar"}],vPackingLvupDialog:[function(e,t,o){"use strict";cc._RF.push(t,"b78261RAZJPUKjOfRp1f2I8","vPackingLvupDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../../ulframework/view/ReuseList"),l=e("../../../ulframework/view/ReuseLayouterVBox"),c=e("../node/vPackingLvupListItem"),u=e("../../manager/mgrPacking"),d=e("../../manager/mgrDirector"),p=e("../../manager/mgrTimer"),h=e("../../manager/mgrAd"),f=e("../node/vCommonTitleBarRmbGold"),g=cc._decorator,m=g.ccclass,_=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.labelTitle=null,t.nodeContent=null,t.nodeList=null,t.nodeTitle=null,t.nodeTitleBar=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vPackingLvupDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_labelTitle:[cc.Label],CC_nodeContent:[cc.Node],CC_nodeList:[cc.Node],CC_nodeTitle:[cc.Node],CC_nodeTitleBar:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){var t=this;e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(d.default.size),this.setContentSize(d.default.size),h.default.isMcprc()?h.default.showIntAd():h.default.showViewEnterAd(this.nodeResource,null,null,"ad_banner_packing_lvup_dialog"),this.context.fOnDialogClose=function(){t.sendMsg("MSG_GUIDE_POINT",{id:"vPackingLvupDialog.closeDialog"})}},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onOpenDialogCompleted=function(){this.onLoadedInit()},t.prototype.onCloseDialogStart=function(){h.default.closeBannerAd()},t.prototype.onLoadedInit=function(){(new f.default).parent=this.nodeTitleBar;var e=this.nodeList,t=new s.default;t.setLayouter((new l.default).setCellSize(450,200).setGap(10).setPending(10)),t.setCreator(function(e){var t=new c.default({});t.parent=e,e.item=t}),t.setSetter(function(e,t){e.item.fillPacking(t)}),t.parent=e,t.setContentSize(e.getContentSize()),t.setAnchorPoint(0,0),this.listPacking=t,this.fillList()},t.prototype.fillList=function(){var e=this,t=u.default.getSortedPackings();this.listPacking.setDatas(t),p.default.callLater(.5,function(){if(e.context.packingId){var t=u.default.getPacking(e.context.packingId);e.listPacking.scrollToData(t),p.default.callLater(.5,function(){e.sendMsg("MSG_FOCUS_PACKING_LIST_ITEM",{packingId:e.context.packingId}),e.context.packingId=null})}})},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t=r([m],t)}(i.default));o.default=_,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../../ulframework/view/ReuseLayouterVBox":"ReuseLayouterVBox","../../../ulframework/view/ReuseList":"ReuseList","../../manager/mgrAd":"mgrAd","../../manager/mgrDirector":"mgrDirector","../../manager/mgrPacking":"mgrPacking","../../manager/mgrTimer":"mgrTimer","../node/vCommonTitleBarRmbGold":"vCommonTitleBarRmbGold","../node/vPackingLvupListItem":"vPackingLvupListItem"}],vPackingLvupListItem:[function(e,t,o){"use strict";cc._RF.push(t,"36c3eYeLpJAjJFcvTUyQ1qj","vPackingLvupListItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrPacking"),l=e("../../manager/mgrDirector"),c=e("../../manager/mgrTip"),u=e("./vPackingAvatar"),d=e("../../manager/mgrAd"),p=e("../../manager/mgrPlayer"),h=e("../../Const"),f=e("../../manager/mgrGuide"),g=e("../../manager/mgrSound"),m=e("../../manager/mgrPool"),_=e("../../manager/mgrGoldRain"),v=e("../../manager/mgrI18n"),y=cc._decorator,C=y.ccclass,S=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonLvup=null,t.labelCurrLvDesc=null,t.labelCurrLvGoldDesc=null,t.labelLvup=null,t.labelLvupCost=null,t.labelNextLvDesc=null,t.labelNextLvGoldDesc=null,t.labelTitle=null,t.nodeAvatar=null,t.nodeBg=null,t.nodeButtons=null,t.nodeMaxLvTip=null,t.nodeNextInfo=null,t.AD_VIDEO_LVUP_PACKING_NAME="video_lvup_packing",t}return n(t,e),t.prototype._getResourceName=function(){return"node/vPackingLvupListItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonLvup:[a.default,"onTouchButtonLvup"],CC_labelCurrLvDesc:[cc.Label],CC_labelCurrLvGoldDesc:[cc.Label],CC_labelLvup:[cc.Label],CC_labelLvupCost:[cc.Label],CC_labelNextLvDesc:[cc.Label],CC_labelNextLvGoldDesc:[cc.Label],CC_labelTitle:[cc.Label],CC_nodeAvatar:[cc.Node],CC_nodeBg:[cc.Node],CC_nodeButtons:[cc.Node],CC_nodeMaxLvTip:[cc.Node],CC_nodeNextInfo:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd.bind(this),MSG_AD_EVENT_FAILD:this.onMsgAdEventFaild.bind(this),MSG_AD_EVENT_CANCELED:this.onMsgAdEventCanceled.bind(this),MSG_FOCUS_PACKING_LIST_ITEM:this.onMsgOnFocusPackingListItem.bind(this)})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillPacking=function(e){this.packing=e,this.nodeAvatar.removeAllChildren(),new u.default({bDisableButtonAction:!0,packing:e,bEnableShowPrice:!1,bDisableChange:!0}).parent=this.nodeAvatar,this.nodeAvatar.scale=1,this.refresh(),501==e.id&&f.default.registerGuideNode("vPackingLvupListItem.buttonLvup",this.buttonLvup.node)},t.prototype.refresh=function(){var e=this.packing,t=e.getNextTemplate();this.labelLvup.string=e.level<=0?v.default.getText("vPackingLvupListItem.5"):v.default.getText("vPackingLvupListItem.6"),this.labelCurrLvDesc.string=ul.format("%s",e.level),this.labelCurrLvGoldDesc.string=ul.format("+%s%%",e.template.productGoldNumRatio/100),this.nodeNextInfo.active=!0,this.nodeMaxLvTip.active=!1,this.nodeButtons.active=!0,t?(this.labelNextLvDesc.string=ul.format("%s",e.level+1),this.labelNextLvGoldDesc.string=ul.format("+%s%%",(t.productGoldNumRatio||0)/100)):(this.nodeNextInfo.active=!1,this.nodeMaxLvTip.active=!0,this.nodeButtons.active=!1),this.labelLvupCost.string=ul.format("%s",p.default.getItemAmountStr(e.template.upgradeCostGoldNum));var o=s.default.isMaxLv(e.id);this.labelNextLvDesc.node.active=!o},t.prototype.doUnlock=function(e){var t=this.packing,o=t.level,n=s.default.upgrade(t.id,e);if(n){if(n.bSuccess){o<=0?c.default.showMsgTip(v.default.getText("vPackingLvupListItem.7")):c.default.showMsgTip(v.default.getText("vPackingLvupListItem.8")),this.nodeAvatar._originScale=this.nodeAvatar._originScale||this.nodeAvatar.scale;var r=this.nodeAvatar._originScale;this.nodeAvatar.runAction(cc.sequence(cc.scaleTo(.1,1.2*r,1.2*r),cc.scaleTo(.1,r,r))),g.default.play(107);var a=m.default.get("particle","bao_2");if(!a)return;a.scale=.4,a.parent=this.nodeAvatar,a.setAutoRemoveOnFinish(!0),_.default.openGoldRain(2)}else n.tip&&""!=n.tip&&c.default.showMsgTip(n.tip);return this.refresh(),n.bSuccess}},t.prototype.onTouchButtonLvup=function(e){var t=this;if(e.isClick())if(this.buttonLvup.node.stopActionByTag(999),f.default.isGuiding()||!d.default.preCheckCanTriggerAdEvent(this.AD_VIDEO_LVUP_PACKING_NAME))this.sendMsg("MSG_GUIDE_POINT",{id:"vPackingLvupListItem.buttonLvup.click"}),this.doUnlock(!1);else{var o=this.packing,n={itemId:h.default.ITEM_ID_GOLD,amount:o.template.upgradeCostGoldNum,contentStr:v.default.getText("vPackingLvupListItem.9"),btnVideoStr:v.default.getText("vPackingLvupListItem.10"),btnRefuseStr:null,fOnClickRefused:function(){t.doUnlock(!1)},fOnClickVideo:function(){d.default.triggerAdEvent(t.AD_VIDEO_LVUP_PACKING_NAME,{packingId:t.packing.id},!0)}};l.default.warpDialogWithSmallEffect("vPromptAdSelectDialog",n)}},t.prototype.onMsgAdEventSuccessd=function(e){var t=e;this.packing&&t.userData&&t.userData.packingId&&t.userData.packingId==this.packing.id&&(t.adEventId==this.AD_VIDEO_LVUP_PACKING_NAME&&this.doUnlock(!0))},t.prototype.onMsgAdEventFaild=function(e){},t.prototype.onMsgAdEventCanceled=function(e){this.onMsgAdEventFaild(e)},t.prototype.onMsgOnFocusPackingListItem=function(e){var t=e.packingId;this.packing&&t&&this.packing.id==t&&this.buttonLvup.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.1,1.1),cc.scaleTo(.6,.9,.9),cc.scaleTo(.3,1,1)))).setTag(999)},r([i.default.requireResourceLoaded],t.prototype,"fillPacking",null),t=r([C],t)}(i.default));o.default=S,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGoldRain":"mgrGoldRain","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPacking":"mgrPacking","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrPool":"mgrPool","../../manager/mgrSound":"mgrSound","../../manager/mgrTip":"mgrTip","./vPackingAvatar":"vPackingAvatar"}],vPageDotIndicator:[function(e,t,o){"use strict";cc._RF.push(t,"66069k+vt9B4LFel6UD6YkD","vPageDotIndicator");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/view/ViewBase"),l=e("../../../ulframework/utils/Tools"),c=cc._decorator.ccclass,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"node/vPageDotIndicator"},t.prototype._getResourceBindingConfig=function(){return{CC_nodeBgs:[cc.Node],CC_nodeFills:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onLoadedInit=function(){this.setPageSize(this.context.pageSize||0),this.setPageIndex(this.context.pageIndex||0)},t.prototype.setPageSize=function(e){return a(this,void 0,void 0,function(){var t,o,n,r,a,s,c,u;return i(this,function(i){for(t=[],o=[],n=this.nodeBgs.children,r=this.nodeFills.children,a=n.length,s=0;s<a;s++)(c=n[s]).active=s<e,(u=r[s])&&(u.active=s<e,u.opacity=0,u.active&&o.push(u)),c.active&&t.push(c);return l.default.layoutNodesHorizonCenter(t,6),l.default.layoutNodesHorizonCenter(o,6),[2]})})},t.prototype.setPageIndex=function(e){return void 0===e&&(e=0),a(this,void 0,void 0,function(){var t,o,n;return i(this,function(r){for([],t=this.nodeFills.children,o=t.length,n=0;n<o;n++)t[n].opacity=n==e?255:0;return[2]})})},r([s.default.requireResourceLoaded],t.prototype,"setPageSize",null),r([s.default.requireResourceLoaded],t.prototype,"setPageIndex",null),t=r([c],t)}(s.default);o.default=u,cc._RF.pop()},{"../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ViewBase":"ViewBase"}],vPartRankItem:[function(e,t,o){"use strict";cc._RF.push(t,"91e51MWAOlF6L+P5lvAoq15","vPartRankItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/ViewBase"),c=e("../../manager/mgrCfg"),u=e("../../manager/mgrPlayer"),d=e("../../manager/mgrShop"),p=e("./vLevelBar"),h=cc._decorator.ccclass,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBg=null,t.labelPrice=null,t.labelSource=null,t.nodeIcon=null,t.nodeLevel=null,t.nodeOwned=null,t.nodePrice=null,t.nodeSource=null,t.spriteBg=null,t.spriteIcon=null,t.spriteLockFlag=null,t.spritePriceUnit=null,t.spriteSelected=null,t.spriteUsed=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vPartRankItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBg:[s.default,"onTouchButtonBg"],CC_labelPrice:[cc.Label],CC_labelSource:[cc.Label],CC_nodeIcon:[cc.Node],CC_nodeLevel:[cc.Node],CC_nodeOwned:[cc.Node],CC_nodePrice:[cc.Node],CC_nodeSource:[cc.Node],CC_spriteBg:[cc.Sprite],CC_spriteIcon:[cc.Sprite],CC_spriteLockFlag:[cc.Sprite],CC_spritePriceUnit:[cc.Sprite],CC_spriteSelected:[cc.Sprite],CC_spriteUsed:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=new p.default;e.parent=this.nodeLevel,this.levelBar=e},t.prototype.fillByPartId=function(e){return a(this,void 0,void 0,function(){var t,o,n;return i(this,function(r){return this.partId=e,t=c.default.get("cosmetic_part_db",this.partId)||{},this.spriteIcon.loadSpriteFrameAndKeepSize(t.icon),this.levelBar.setLevel(5,c.default.get("item_template_db",this.partId,"level")),u.default.getItemAmount(this.partId)<=0?(this.spriteLockFlag.node.active=!0,this.nodePrice.opacity=0,this.nodeSource.opacity=0,this.nodeOwned.opacity=0,o=c.default.get("shop_template_db",this.partId),n=d.default.getBuySource(this.partId),o?(this.nodePrice.opacity=255,this.labelPrice.string=ul.format("%s",u.default.getItemAmountStr(o.price)),this.spritePriceUnit.loadSpriteFrameAndKeepSize(u.default.getIcon(o.priceUnit))):n&&(this.nodeSource.opacity=255,this.labelSource.string=n.desc)):(this.spriteLockFlag.node.active=!1,this.nodePrice.opacity=0,this.nodeOwned.opacity=255),[2]})})},t.prototype.showDebugScore=function(e){return a(this,void 0,void 0,function(){return i(this,function(e){return[2]})})},t.prototype.hideDebugScore=function(){return a(this,void 0,void 0,function(){return i(this,function(e){return[2]})})},t.prototype.onTouchButtonBg=function(e){e.isClick()&&this.context.fOnClick&&this.context.fOnClick(this.partId)},r([l.default.requireResourceLoaded],t.prototype,"fillByPartId",null),t=r([h],t)}(l.default);o.default=f,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrShop":"mgrShop","./vLevelBar":"vLevelBar"}],vPkMirrorAdventureDialog:[function(e,t,o){"use strict";cc._RF.push(t,"78704oVybJPBbQkfIUeJM3J","vPkMirrorAdventureDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/utils/Tools"),s=e("../../../ulframework/view/DialogBase"),l=e("../../manager/mgrCfg"),c=e("../../manager/mgrDirector"),u=e("../../manager/mgrPkMirror"),d=e("../../manager/mgrTip"),p=e("../../manager/mgrAd"),h=e("../../manager/mgrPlayer"),f=e("../../../ulframework/component/ToggleButton"),g=e("../../manager/mgrGuide"),m=e("../../manager/mgrChannel"),_=e("../../manager/mgrI18n"),v=cc._decorator.ccclass,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonNeedAdv=null,t.buttonNext=null,t.buttonNoNeedAdv=null,t.buttonPre=null,t.buttonReward=null,t.buttonVideo=null,t.labelAmount=null,t.labelAmount1=null,t.labelButtonReward=null,t.labelButtonSignVideo=null,t.labelName=null,t.labelNeedAdv=null,t.labelNoNeedAdv=null,t.labelTitle=null,t.layoutOnline=null,t.nodeAdButtonFlag=null,t.nodeAvatar=null,t.nodeBannerAreaBottom=null,t.nodeBannerAreaTop=null,t.nodeButtonNext=null,t.nodeButtonPre=null,t.nodeContent=null,t.nodeEffect=null,t.nodeGotItemEffectShine=null,t.nodeGouMode=null,t.nodeLayoutContent=null,t.nodeLevelContent=null,t.nodeReceived1=null,t.nodeReceived2=null,t.nodeReward=null,t.nodeReward1=null,t.nodeReward2=null,t.nodeUIRoot=null,t.nodeUnArrived=null,t.spriteIcon=null,t.spriteIcon1=null,t.spriteIcon2=null,t.spriteNeedGou=null,t.spriteNoNeedGou=null,t.toggleTipSelect=null,t.AD_PKMIRROR_ADVENTURE_NAME="video_pkmirror_adventure_reward",t.isNeedAdv=!0,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vPkMirrorAdventureDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_buttonNeedAdv:[a.default,"onTouchButtonNeedAdv"],CC_buttonNext:[a.default,"onTouchButtonNext"],CC_buttonNoNeedAdv:[a.default,"onTouchButtonNoNeedAdv"],CC_buttonPre:[a.default,"onTouchButtonPre"],CC_buttonReward:[a.default,"onTouchButtonReward"],CC_buttonVideo:[a.default,"onTouchButtonVideo"],CC_toggleTipSelect:[f.default,"onTouchToggleTipSelect"],CC_labelAmount:[cc.Label],CC_labelAmount1:[cc.Label],CC_labelButtonReward:[cc.Label],CC_labelButtonSignVideo:[cc.Label],CC_labelName:[cc.Label],CC_labelNeedAdv:[cc.Label],CC_labelNoNeedAdv:[cc.Label],CC_labelTitle:[cc.Label],CC_layoutOnline:[cc.Layout],CC_nodeAdButtonFlag:[cc.Node],CC_nodeAvatar:[cc.Node],CC_nodeBannerAreaBottom:[cc.Node],CC_nodeBannerAreaTop:[cc.Node],CC_nodeButtonNext:[cc.Node],CC_nodeButtonPre:[cc.Node],CC_nodeContent:[cc.Node],CC_nodeEffect:[cc.Node],CC_nodeGotItemEffectShine:[cc.Node],CC_nodeGouMode:[cc.Node],CC_nodeLayoutContent:[cc.Node],CC_nodeLevelContent:[cc.Node],CC_nodeReceived1:[cc.Node],CC_nodeReceived2:[cc.Node],CC_nodeReward:[cc.Node],CC_nodeReward1:[cc.Node],CC_nodeReward2:[cc.Node],CC_nodeUIRoot:[cc.Node],CC_nodeUnArrived:[cc.Node],CC_spriteIcon:[cc.Sprite],CC_spriteIcon1:[cc.Sprite],CC_spriteIcon2:[cc.Sprite],CC_spriteNeedGou:[cc.Sprite],CC_spriteNoNeedGou:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),p.default.showViewEnterAd(this.nodeResource,null,null,"ad_banner_pk_reward_dialog"),this.onLoadedInit(),this.adaptAdMode(),this.adaptTickModeUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onCloseDialogStart=function(){p.default.showBannerAd(this.nodeResource,"ad_banner_pk_reward_dialog")},t.prototype.onOpenDialogCompleted=function(){},t.prototype.adaptTickModeUi=function(){this.nodeGouMode.active=!1,this.buttonNeedAdv.node.active=!1,this.buttonNoNeedAdv.node.active=!1,!g.default.isGuiding()&&m.default.isCanVideoTick()&&this.buttonVideo.node.active&&(this.nodeGouMode.active=!0,this.layoutOnline.node.active=!1,this.buttonReward.node.active=!0,this.buttonClose.node.active=!1,this.randomNeedAdv()?(this.buttonNeedAdv.node.active=!0,this.labelButtonReward.setLocalizedString("vPkMirrorAdventureDialog.6")):(this.buttonNoNeedAdv.node.active=!0,this.labelButtonReward.setLocalizedString("vPkMirrorAdventureDialog.7")))},t.prototype.randomNeedAdv=function(){return i.default.random(100)>50?(this.isNeedAdv=!0,!0):(this.isNeedAdv=!1,!1)},t.prototype.adaptAdMode=function(){if(this.refreshAdUI(),this.nodeReward.active&&255==this.nodeReward.opacity){var e=this.levelTemplates[this.selectedLevelIndex];if(e){var t=u.default.isReward1Level(e.id);u.default.isReward2Level(e.id);if(!this.buttonVideo.node.active)return this.layoutOnline.node.active=!1,this.buttonReward.node.active=!t,void this.labelButtonReward.setLocalizedString("vPkMirrorAdventureDialog.6");this.layoutOnline.node.active=p.default.isOnline(),p.default.isOnline()?this.toggleTipSelect.isPressed()?(this.labelButtonSignVideo.setLocalizedString("vPkMirrorAdventureDialog.8"),this.nodeAdButtonFlag.active=!0):(this.labelButtonSignVideo.setLocalizedString("vPkMirrorAdventureDialog.9"),this.nodeAdButtonFlag.active=!1,t&&this.labelButtonSignVideo.setLocalizedString("vPkMirrorAdventureDialog.10")):(this.labelButtonReward.setLocalizedString("vPkMirrorAdventureDialog.9"),this.labelButtonSignVideo.setLocalizedString("vPkMirrorAdventureDialog.8")),this.buttonReward.node.active=!t}}},t.prototype.onLoadedInit=function(){this.setClickShadowClose(!1),this.nodeAvatar._originPos=this.nodeAvatar.position;var e=c.default.createView("vPkMirrorLevelItem",{template:null,star:null});e.parent=this.nodeAvatar,e._originPos=e.position,this.levelItem=e,this.nodeReward._originPos=this.nodeReward.position,this.buttonReward.node._originPos=this.buttonReward.node.position,this.buttonVideo.node._originPos=this.buttonVideo.node.position;var t=l.default.getDb("pkmirror_level_db")||{},o=[];for(var n in t)o.push(t[n]);this.levelTemplates=i.default.sortArrayByField(o,"id"),this.selectedLevelIndex=0,this.refreshLevelItem(),this.refreshPNBtns(),this.refreshAdUI(),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd.bind(this),MSG_AD_EVENT_FAILD:this.onMsgAdEventFaild.bind(this),MSG_AD_EVENT_CANCELED:this.onMsgAdEventCanceled.bind(this)})},t.prototype.refreshAdUI=function(){var e=p.default.preCheckCanTriggerAdEvent(this.AD_PKMIRROR_ADVENTURE_NAME);this.buttonVideo.node.active=e,this.nodeReward2.active=e},t.prototype.refreshPNBtns=function(){this.nodeButtonPre.active=!!this.selectedLevelIndex,this.nodeButtonNext.active=!this.selectedLevelIndex||this.selectedLevelIndex!=this.levelTemplates.length-1},t.prototype.refreshLevelItem=function(){cc.log("----refreshLevelItem index=",this.selectedLevelIndex);var e=this.levelTemplates[this.selectedLevelIndex];if(e){this.labelTitle.string=e.name||"",this.levelItem.updateByTemplate(e);var t=u.default.isReward1Level(e.id),o=u.default.isReward2Level(e.id),n=u.default.isAchieveLevel(e.id);cc.log("---bRewarded1=",t),cc.log("---bRewarded2=",o),cc.log("---bAchieved=",n),this.nodeReward.active=!!(!t&&n||!o&&n),this.nodeReward.opacity=255,this.nodeReceived1.opacity=t?255:0,this.nodeReceived2.opacity=o?255:0,this.nodeUnArrived.opacity=n?0:255,t&&(this.buttonReward.node.active=!1),this.spriteIcon1.loadSpriteFrameAndKeepSize(h.default.getIcon(e.rewardItemId1)),this.spriteIcon2.loadSpriteFrameAndKeepSize(h.default.getIcon(e.rewardItemId2)),this.labelAmount1.string=ul.format("*%s",e.rewardItemAmount1),!t&&n||!o&&n?(this.nodeGotItemEffectShine.active=!0,this.nodeGotItemEffectShine.opacity=255,this.nodeGotItemEffectShine.runAction(cc.repeatForever(cc.sequence(cc.rotateBy(5,180),cc.rotateBy(5,180))))):this.nodeGotItemEffectShine.opacity=0,this.adaptAdMode()}},t.prototype.moveToNext=function(){var e=this;this.nodeAvatar.getNumberOfRunningActions()>0||(this.selectedLevelIndex>=this.levelTemplates.length-1?this.selectedLevelIndex=this.levelTemplates.length-1:(this.selectedLevelIndex+=1,this.nodeLevelContent.runAction(cc.sequence(cc.scaleTo(.15,1,0),cc.callFunc(function(){e.refreshLevelItem()}),cc.scaleTo(.15,1,1))),this.refreshPNBtns()))},t.prototype.moveToPre=function(){var e=this;this.nodeAvatar.getNumberOfRunningActions()>0||(this.selectedLevelIndex<=0?this.selectedLevelIndex=0:(this.selectedLevelIndex-=1,this.nodeLevelContent.runAction(cc.sequence(cc.scaleTo(.15,1,0),cc.callFunc(function(){e.refreshLevelItem()}),cc.scaleTo(.15,1,1))),this.refreshPNBtns()))},t.prototype.tryReward=function(e){var t=this.levelTemplates[this.selectedLevelIndex],o=u.default.isReward1Level(t.id);e?o?(h.default.addItemAmount(t.rewardItemId2,t.rewardItemAmount2,e?"\u6bb5\u4f4d\u5956\u52b1_\u5e7f\u544a":"\u6bb5\u4f4d\u5956\u52b1"),d.default.addGotItemTip(t.rewardItemId2,t.rewardItemAmount2),u.default.markReward2Level(t.id),this.refreshLevelItem()):(h.default.addItemAmount(t.rewardItemId1,t.rewardItemAmount1,e?"\u6bb5\u4f4d\u5956\u52b1_\u5e7f\u544a":"\u6bb5\u4f4d\u5956\u52b1"),d.default.addGotItemTip(t.rewardItemId1,t.rewardItemAmount1),h.default.addItemAmount(t.rewardItemId2,t.rewardItemAmount2,e?"\u6bb5\u4f4d\u5956\u52b1_\u5e7f\u544a":"\u6bb5\u4f4d\u5956\u52b1"),d.default.addGotItemTip(t.rewardItemId2,t.rewardItemAmount2),u.default.markReward1Level(t.id),u.default.markReward2Level(t.id),this.refreshLevelItem()):(o?d.default.showMsgTip(_.default.getText("vPkMirrorAdventureDialog.10")):(h.default.addItemAmount(t.rewardItemId1,t.rewardItemAmount1,e?"\u6bb5\u4f4d\u5956\u52b1_\u5e7f\u544a":"\u6bb5\u4f4d\u5956\u52b1"),d.default.addGotItemTip(t.rewardItemId1,t.rewardItemAmount1)),u.default.markReward1Level(t.id),this.refreshLevelItem())},t.prototype.onTouchButtonNext=function(e){e.isClick()&&(this.moveToNext(),this.toggleTipSelect.setPressStatus(!0),this.adaptAdMode())},t.prototype.onTouchButtonPre=function(e){e.isClick()&&(this.moveToPre(),this.toggleTipSelect.setPressStatus(!0),this.adaptAdMode())},t.prototype.onTouchButtonReward=function(e){if(e.isClick()){if(!g.default.isGuiding()&&m.default.isCanVideoTick()&&this.nodeGouMode.active&&this.buttonVideo.node.active){if(this.isNeedAdv&&this.buttonNeedAdv.node.active&&this.spriteNeedGou.node.active)return void p.default.triggerAdEvent(this.AD_PKMIRROR_ADVENTURE_NAME,null,!0);if(!this.isNeedAdv&&this.buttonNoNeedAdv.node.active&&!this.spriteNoNeedGou.node.active)return void p.default.triggerAdEvent(this.AD_PKMIRROR_ADVENTURE_NAME,null,!0)}this.tryReward()}},t.prototype.onTouchButtonVideo=function(e){e.isClick()&&(!p.default.preCheckCanTriggerAdEvent(this.AD_PKMIRROR_ADVENTURE_NAME)||p.default.isOnline()&&!this.toggleTipSelect.isPressed()?this.onTouchButtonReward(e):p.default.triggerAdEvent(this.AD_PKMIRROR_ADVENTURE_NAME,null,!0))},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchToggleTipSelect=function(e){e.isClick()&&this.adaptAdMode()},t.prototype.onTouchButtonNeedAdv=function(e){e.isClick()&&(this.spriteNeedGou.node.active?(this.spriteNeedGou.node.active=!1,this.labelButtonReward.setLocalizedString("vPkMirrorAdventureDialog.7")):(this.spriteNeedGou.node.active=!0,this.labelButtonReward.setLocalizedString("vPkMirrorAdventureDialog.6")))},t.prototype.onTouchButtonNoNeedAdv=function(e){e.isClick()&&(this.spriteNoNeedGou.node.active?(this.spriteNoNeedGou.node.active=!1,this.labelButtonReward.setLocalizedString("vPkMirrorAdventureDialog.6")):(this.spriteNoNeedGou.node.active=!0,this.labelButtonReward.setLocalizedString("vPkMirrorAdventureDialog.7")))},t.prototype.onMsgAdEventSuccessd=function(e){e.adEventId==this.AD_PKMIRROR_ADVENTURE_NAME&&this.tryReward(!0)},t.prototype.onMsgAdEventFaild=function(e){e.adEventId;this.AD_PKMIRROR_ADVENTURE_NAME},t.prototype.onMsgAdEventCanceled=function(e){this.onMsgAdEventFaild(e)},t=r([v],t)}(s.default);o.default=y,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/component/ToggleButton":"ToggleButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrChannel":"mgrChannel","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPkMirror":"mgrPkMirror","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrTip":"mgrTip"}],vPkMirrorDialog:[function(e,t,o){"use strict";cc._RF.push(t,"f6f6djwWnVJ2r9XS7ENpzPA","vPkMirrorDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/utils/Tools"),s=e("../../../ulframework/view/DialogBase"),l=e("../../Const"),c=e("../../manager/mgrAd"),u=e("../../manager/mgrCountBuy"),d=e("../../manager/mgrDebug"),p=e("../../manager/mgrDirector"),h=e("../../manager/mgrPkMirror"),f=e("../../manager/mgrPlayer"),g=e("../../manager/mgrShop"),m=e("../../manager/mgrSound"),_=e("../../manager/mgrStage"),v=e("../../manager/mgrTip"),y=e("../../struct/sAvatar"),C=e("../../manager/mgrSdk"),S=e("../../manager/mgrChannel"),b=e("../../manager/mgrVideoRecorder"),R=e("../../manager/mgrI18n"),T=cc._decorator.ccclass,A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBack=null,t.buttonExchange=null,t.buttonLoin=null,t.buttonRank=null,t.buttonReward=null,t.buttonStartGame=null,t.labelButton1=null,t.labelEnemyName=null,t.labelJiFen=null,t.labelLeftDay=null,t.labelLeftDayHead=null,t.labelLeftDayTimeUnit=null,t.labelLeftRecoverTime=null,t.labelPlayerName=null,t.labelRank=null,t.labelTitle=null,t.labelVideoButtonStart=null,t.nodeBannerArea=null,t.nodeBottomCenter=null,t.nodeCenter=null,t.nodeCoinButtonStart=null,t.nodeEnemy=null,t.nodeFinded=null,t.nodeLayoutContent=null,t.nodeLeftDay=null,t.nodeLeftTop=null,t.nodeLightLeft=null,t.nodeLightRight=null,t.nodeNormalButtonStart=null,t.nodeParticleVs=null,t.nodePkRole=null,t.nodePlayer=null,t.nodeQuickBuy=null,t.nodeQuickBuy2=null,t.nodeRecover=null,t.nodeReward=null,t.nodeSeachMirror=null,t.nodeSearching=null,t.nodeSelf=null,t.nodeSubject=null,t.nodeTitle=null,t.nodeUIRoot=null,t.nodeVideoButtonStart=null,t.nodeVs=null,t.spriteBgBottom=null,t.spriteTuzi=null,t.AD_JOIN_COUNT_NAME="video_pkmirror_time",t.AD_INTER_VIEW_NAME="inter_pk_mirror_dialog",t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vPkMirrorDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBack:[a.default,"onTouchButtonBack"],CC_buttonExchange:[a.default,"onTouchButtonExchange"],CC_buttonLoin:[a.default,"onTouchButtonLoin"],CC_buttonRank:[a.default,"onTouchButtonRank"],CC_buttonReward:[a.default,"onTouchButtonReward"],CC_buttonStartGame:[a.default,"onTouchButtonStartGame"],CC_labelButton1:[cc.Label],CC_labelEnemyName:[cc.Label],CC_labelJiFen:[cc.Label],CC_labelLeftDay:[cc.Label],CC_labelLeftDayHead:[cc.Label],CC_labelLeftDayTimeUnit:[cc.Label],CC_labelLeftRecoverTime:[cc.Label],CC_labelPlayerName:[cc.Label],CC_labelRank:[cc.Label],CC_labelTitle:[cc.Label],CC_labelVideoButtonStart:[cc.Label],CC_nodeBannerArea:[cc.Node],CC_nodeBottomCenter:[cc.Node],CC_nodeCenter:[cc.Node],CC_nodeCoinButtonStart:[cc.Node],CC_nodeEnemy:[cc.Node],CC_nodeFinded:[cc.Node],CC_nodeLayoutContent:[cc.Node],CC_nodeLeftDay:[cc.Node],CC_nodeLeftTop:[cc.Node],CC_nodeLightLeft:[cc.Node],CC_nodeLightRight:[cc.Node],CC_nodeNormalButtonStart:[cc.Node],CC_nodeParticleVs:[cc.Node],CC_nodePkRole:[cc.Node],CC_nodePlayer:[cc.Node],CC_nodeQuickBuy:[cc.Node],CC_nodeQuickBuy2:[cc.Node],CC_nodeRecover:[cc.Node],CC_nodeReward:[cc.Node],CC_nodeSeachMirror:[cc.Node],CC_nodeSearching:[cc.Node],CC_nodeSelf:[cc.Node],CC_nodeSubject:[cc.Node],CC_nodeTitle:[cc.Node],CC_nodeUIRoot:[cc.Node],CC_nodeVideoButtonStart:[cc.Node],CC_nodeVs:[cc.Node],CC_spriteBgBottom:[cc.Sprite],CC_spriteTuzi:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),S.default.isCanShowMidAutumn()&&(this.spriteBgBottom.node.active=!1,this.spriteTuzi.node.active=!0),this.nodeResource.setContentSize(p.default.size),this.setContentSize(p.default.size);var t=p.default.size.height;if(c.default.isBannerAdValid()){t-=c.default.getBannerHeight();var o=this.nodeUIRoot.getComponent(cc.Widget);o.bottom=c.default.getBannerHeight(),o.updateAlignment(),c.default.showViewEnterAd(this.nodeResource,null,this.AD_INTER_VIEW_NAME,"ad_banner_pk_mirror_dialog")}else c.default.showIntAd(null,this.AD_INTER_VIEW_NAME);this.nodePkRole.scale=Math.min(t/1024,1.2),this.nodePlayer.x+=this.nodePkRole.scale>1?40:0,this.nodeEnemy.x-=this.nodePkRole.scale>1?40:0,this.refreshRewardBadge(),cc.log("-----scale=",this.nodePkRole.scale),this.buttonRank.node.active=!!S.default.isRankEnabled()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.onEnterFrame()},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onOpenDialogCompleted=function(){this.onLoadedInit()},t.prototype.onCloseDialogStart=function(){c.default.closeBannerAd()},t.prototype.onEnterFrame=function(){this.isResourceLoaded()&&this.bInited&&(this.refreshStartTime(),h.default.getBadgeCount()>0&&h.default.getAdCount()>=h.default.getBadgeCount()?(this.nodeVideoButtonStart.active=!0,this.nodeNormalButtonStart.active=!1):(this.nodeVideoButtonStart.active=!1,this.nodeNormalButtonStart.active=!0))},t.prototype.refreshRewardBadge=function(){var e=h.default.canRewardLevel();cc.log("canReward",e),v.default.setBadgeEnabled(this.buttonReward.node,e,-80,-24),v.default.setBadgeParticleEnabled(this.buttonReward.node,e)},t.prototype.refreshStartTime=function(){if(this.buttonStartGame.node.active){var e=l.default.ITEM_ID_PKMIRROR_COUNT,t=f.default.getItemAmount(e),o=f.default.getRecoverRemainTime(e);if(v.default.setCountBadgeValue(this.buttonStartGame.node,t),v.default.setBadgeParticleEnabled(this.buttonStartGame.node,t>0),this.nodeRecover.active=!1,t<=0&&o){this.labelLeftRecoverTime.node.parent.active=!0,this.labelLeftRecoverTime.string=i.default.formatTime(o,"%M:%S"),this.labelLeftRecoverTime.node._originPos=this.labelLeftRecoverTime.node._originPos||this.labelLeftRecoverTime.node.position;var n=l.default.ITEM_ID_PKMIRROR_COUNT,r=this.AD_JOIN_COUNT_NAME;u.default.canBuyPlayCount(n,r)?(this.labelLeftRecoverTime.node.position=this.labelLeftRecoverTime.node._originPos,this.nodeQuickBuy.active=!0):(this.labelLeftRecoverTime.node.position=cc.v2(0,0),this.nodeQuickBuy.active=!1)}}},t.prototype.onLoadedInit=function(){var e=this;m.default.play(11),b.default.stopRecordGameVideo(),this.context.bFromGame||m.default.play(160),this.initUi(),g.default.showRouterTargetWithDialog(119,"\u4e3b\u63a8_\u955c\u50cf\u754c\u9762"),this.context.gotoNextDialogName&&""!=this.context.gotoNextDialogName&&p.default.warpDialogWithSmallEffect(this.context.gotoNextDialogName),f.default.getName()?this.joinBuTai():p.default.warpDialogWithSmallEffect("vInputNameDialog",{fOnDialogClose:function(){e.joinBuTai()}}),this.playUIActionIn(),this.registerListeners({MSG_ITEM_BUY_SUCCESSED:this.onMsgItemBuySuccessed.bind(this),MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd.bind(this),MSG_PLAYER_NAME_CHANGED:this.onMsgPlayerNameChanged.bind(this),MSG_PK_MIRROR_REWARD_RECEIVED:this.onMsgPkMirrorRewardReceived.bind(this)}),this.bInited=!0},t.prototype.playUIActionIn=function(){},t.prototype.initUi=function(){this.buttonExchange.node.active=!1,this.nodeSelf._originPos=this.nodeSelf.position,this.nodeFinded._originPos=this.nodeFinded.position,this.nodeVs._originPos=this.nodeVs.position,this.buttonBack.node._originPos=this.buttonBack.node.position,this.nodeBottomCenter._originPos=this.nodeBottomCenter.position,this.nodeTitle._originPos=this.nodeTitle.position,this.nodePkRole.active=!1,this.nodeBottomCenter.y-=500;var e=h.default.getPlayerData();this.labelRank.string=e?ul.format("\u540d\u6b21\uff1a%s",e.rank||0):"\u672a\u4e0a\u699c",this.nodeSeachMirror.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.3,10,0),cc.moveBy(.6,-20,0),cc.moveBy(.3,10,0))));h.default.getShowLevelTemplate();var t=h.default.getPlayerData()||{};this.selfMirrorData={name:f.default.getName(),score:f.default.getItemAmount(l.default.ITEM_ID_MIRROR_STAR),data:t.data},this.levelItemPlayer=p.default.createView("vPkMirrorPkItem",{player:this.selfMirrorData,bEnemy:!1,bDisableLevelItem:!0}),this.levelItemPlayer.parent=this.nodePlayer,this.addSubjects()},t.prototype.addSubjects=function(){_.default.addStageSubject(h.default.seasonSubjectStageId,this.nodeSubject)},t.prototype._getLeftSeasonTime=function(){var e=h.default.seasonEndTime-i.default.time();if(e<=0)return[null,"\u5df2\u7ed3\u675f",null];var t=Math.floor(e/24/60/60);if(t<=0){var o=Math.floor(e/60/60);return o<=0?[null,"\u5373\u5c06\u7ed3\u675f",null]:["\u5f53\u524d\u8d5b\u5b63\u5269\u4f59",ul.format("%d",o),"\u5c0f\u65f6"]}return["\u5f53\u524d\u8d5b\u5b63\u5269\u4f59",ul.format("%d",t),"\u5929"]},t.prototype.refreshTarget=function(){this.levelItemEnemy&&this.levelItemEnemy.destroy(),this.levelItemEnemy=null,this.levelItemEnemy&&(this.levelItemEnemy.removeFromParent(),this.levelItemEnemy=null),this.pkTarget=h.default.getPkTarget(),this.levelItemEnemy=p.default.createView("vPkMirrorPkItem",{player:this.pkTarget,bEnemy:!0}),this.levelItemEnemy.parent=this.nodeEnemy},t.prototype.joinBuTai=function(){var e=this;this.bSearching||(this.bSearching=!0,this.buttonLoin.node.color=cc.color(127,127,127),this.nodeSelf.x=this.nodeSelf._originPos.x-p.default.size.width,this.nodeFinded.x=this.nodeFinded._originPos.x+p.default.size.width,this.nodeVs.y=this.nodeVs.y+1e3,this.nodePkRole.active=!0,this.nodeSelf.active=!1,this.nodeFinded.active=!1,this.nodeSearching.active=!0,this.nodeVs.active=!0,this.nodeSearching.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){e.nodeSelf.active=!0,e.nodeFinded.active=!0,e.nodeSelf.runAction(cc.sequence(cc.moveTo(.3,e.nodeSelf._originPos),cc.callFunc(function(){e.levelItemPlayer.levelItemActionIn(cc.v2(-200,0))}))),e.nodeFinded.runAction(cc.sequence(cc.moveTo(.3,e.nodeFinded._originPos),cc.callFunc(function(){e.levelItemEnemy.levelItemActionIn(cc.v2(200,0)),m.default.play(161),e.bSearching=!1}))),e.nodeVs.runAction(cc.sequence(cc.delayTime(.5),cc.moveTo(.5,e.nodeVs._originPos).easing(cc.easeElasticOut(.8)),cc.callFunc(function(){e.nodeParticleVs.getComponent(cc.ParticleSystem).stopSystem()}))),e.nodeSearching.active=!1,e.nodeSearching.x+=100,e.buttonLoin.node.stopAllActions(),e.buttonLoin.node.setScale(1),e.buttonLoin.node.active=!1,e.nodeTitle.y+=200,e.nodeTitle.active=!0,e.nodeTitle.runAction(cc.sequence(cc.delayTime(1),cc.moveTo(.5,e.nodeTitle._originPos).easing(cc.easeElasticOut(1.2)))),e.nodeBottomCenter.y=e.nodeBottomCenter._originPos.y-500,e.nodeBottomCenter.runAction(cc.sequence(cc.delayTime(1),cc.moveTo(.5,e.nodeBottomCenter._originPos).easing(cc.easeElasticOut(1.2)),cc.callFunc(function(){e.buttonStartGame.node.active=!0,e.buttonStartGame.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.1,1.1),cc.scaleTo(.6,.9,.9),cc.scaleTo(.3,1,1)))),e.buttonBack.node.active=!0,e.buttonBack.node.opacity=0,e.buttonBack.node.runAction(cc.fadeIn(.3))}))),e.refreshTarget()}))))},t.prototype.doStart=function(){C.default.isOpenVideoRecord()&&b.default.tryStartRecordGameVideo();var e=h.default.seasonSubjectStageId;e||(e=2011);var t=new y.default;t.fillBySerializeText(this.pkTarget.data);var o={targetName:this.pkTarget.name,targetStruct:t,targetWeight:this.pkTarget.weight,target:this.pkTarget};_.default.beginStage(e,o)},t.prototype.onTouchButtonBack=function(e){e.isClick()&&p.default.warpDialogWithEffect("vHudDialog")},t.prototype.onTouchButtonExchange=function(e){e.isClick()},t.prototype.onTouchButtonLoin=function(e){e.isClick()&&this.joinBuTai()},t.prototype.onTouchButtonRank=function(e){e.isClick()&&p.default.warpDialogWithEffect("vHudRankDialog",{selectedTab:1,backSceneName:"vPkMirrorDialog"})},t.prototype.onTouchButtonStartGame=function(e){if(e.isClick()&&!this.bSearching){if(!d.default.bUnlockAll){var t=h.default.getBadgeCount();if(t<=0)return v.default.showMsgTip(R.default.getText("vPkMirrorDialog.5")),void m.default.play(726);var o=h.default.getAdCount();if(o&&o>=t)return void c.default.triggerAdEvent(this.AD_JOIN_COUNT_NAME,null,!0)}this.doStart()}},t.prototype.doChangeEmemy=function(){var e=this;if(!this.bSearching){this.bSearching=!0;var t=cc.v2(this.nodeFinded._originPos.x+p.default.size.width,this.nodeFinded._originPos.y);this.nodeFinded.runAction(cc.sequence(cc.moveTo(.3,t),cc.callFunc(function(){e.nodeSearching.active=!0,e.nodeSearching.runAction(cc.sequence(cc.delayTime(i.default.random(2,4)),cc.callFunc(function(){e.nodeFinded.active=!0,e.nodeFinded.runAction(cc.sequence(cc.moveTo(.3,e.nodeFinded._originPos),cc.callFunc(function(){m.default.play(161),e.bSearching=!1}))),e.nodeSearching.active=!1,e.refreshTarget()})))})))}},t.prototype.onTouchButtonReward=function(e){e.isClick()&&p.default.warpDialogWithSmallEffect("vPkMirrorAdventureDialog")},t.prototype.onMsgItemBuySuccessed=function(e){},t.prototype.onMsgAdEventSuccessd=function(e){e.adEventId==this.AD_JOIN_COUNT_NAME&&this.doStart()},t.prototype.onMsgPlayerNameChanged=function(e){this.levelItemPlayer&&this.levelItemPlayer.setPlayerName(f.default.getName())},t.prototype.onMsgPkMirrorRewardReceived=function(e){this.refreshRewardBadge()},t.prototype.isClickShadowClose=function(){return!1},t=r([T],t)}(s.default);o.default=A,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrChannel":"mgrChannel","../../manager/mgrCountBuy":"mgrCountBuy","../../manager/mgrDebug":"mgrDebug","../../manager/mgrDirector":"mgrDirector","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPkMirror":"mgrPkMirror","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrSdk":"mgrSdk","../../manager/mgrShop":"mgrShop","../../manager/mgrSound":"mgrSound","../../manager/mgrStage":"mgrStage","../../manager/mgrTip":"mgrTip","../../manager/mgrVideoRecorder":"mgrVideoRecorder","../../struct/sAvatar":"sAvatar"}],vPkMirrorLevelBar:[function(e,t,o){"use strict";cc._RF.push(t,"a0732TZ+UtKgps4aDXenV3J","vPkMirrorLevelBar");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/view/ViewBase"),i=cc._decorator,s=i.ccclass,l=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeBrightStart1=null,t.nodeBrightStart2=null,t.nodeBrightStart3=null,t.nodeBrightStart4=null,t.nodeBrightStart5=null,t.nodeGreyStart1=null,t.nodeGreyStart2=null,t.nodeGreyStart3=null,t.nodeGreyStart4=null,t.nodeGreyStart5=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vPkMirrorLevelBar"},t.prototype._getResourceBindingConfig=function(){return{CC_nodeBrightStart1:[cc.Node],CC_nodeBrightStart2:[cc.Node],CC_nodeBrightStart3:[cc.Node],CC_nodeBrightStart4:[cc.Node],CC_nodeBrightStart5:[cc.Node],CC_nodeGreyStart1:[cc.Node],CC_nodeGreyStart2:[cc.Node],CC_nodeGreyStart3:[cc.Node],CC_nodeGreyStart4:[cc.Node],CC_nodeGreyStart5:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.setLevel=function(e){e=e||0;for(var t=1;t<=5;t++)this["nodeBrightStart"+t].active=t<=e},t.prototype.getStarGreyNode=function(e){return this["nodeGreyStart"+(e+1)]},t.prototype.getStarBrightNode=function(e){return this["nodeBrightStart"+(e+1)]},r([a.default.requireResourceLoaded],t.prototype,"setLevel",null),r([a.default.requireResourceLoaded],t.prototype,"getStarGreyNode",null),r([a.default.requireResourceLoaded],t.prototype,"getStarBrightNode",null),t=r([s],t)}(a.default));o.default=l,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase"}],vPkMirrorLevelItem:[function(e,t,o){"use strict";cc._RF.push(t,"ae51fkgoLJEBLOCDRIB4nnU","vPkMirrorLevelItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrPkMirror"),l=e("../../manager/mgrPool"),c=e("./vPkMirrorLevelBar"),u=cc._decorator.ccclass,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.greyStarNum=5,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vPkMirrorLevelItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonContent:[a.default,"onTouchButtonContent"],CC_labelName:[cc.Label],CC_nodeStar:[cc.Node],CC_spriteStageIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.particle&&(l.default.put(this.particle),this.particle.removeFromParent(),this.particle=null)},t.prototype.onLoadedInit=function(){this.setContentSize(this.nodeResource.getContentSize()),this.particle=l.default.get("particle","nail_light1"),this.particle&&(this.particle.parent=this),this.refreshUI()},t.prototype.refreshUI=function(){if(this.isResourceLoaded()){var e=this.context.star||0,t=this.context.template||{};this.labelName.string=t.name||" ";var o=0;if(t&&!this.context.bDisableStar){var n;if(this.levelBar||(this.levelBar=new c.default,this.levelBar.parent=this.nodeStar),0==t.basicStarNum)(n=e-t.basicStarNum)>0&&(o=n);else(n=e-t.basicStarNum)>0&&(o=n),o+=1;this.levelBar.setLevel(o||0)}this.spriteStageIcon.loadSpriteFrameAndKeepSize(t.icon||""),this.star=e,this.brightStarNum=o}},t.prototype.getShowingTemplate=function(){return this.context.template},t.prototype.addBrightStar=function(e){var t=(this.star||this.context.star||0)+e;this.updateByStar(t)},t.prototype.updateByStar=function(e){var t=s.default.getLevelTemplateByStar(e);this.context.template=t,this.context.star=e,this.refreshUI()},t.prototype.updateByTemplate=function(e){this.context.template=e,this.context.star=e.basicStarNum+e.starNum,cc.log("----template=",e),cc.log("----star=",this.context.star),this.refreshUI()},t.prototype.getShowingStarNum=function(){return[this.brightStarNum||0,this.greyStarNum||0]},t.prototype.getStarGreyNode=function(e){if(this.levelBar)return this.levelBar.getStarGreyNode(e)},t.prototype.getStarBrightNode=function(e){if(this.levelBar)return this.levelBar.getStarBrightNode(e)},t.prototype.hideStar=function(){return this.nodeStar.active=!1,this},t.prototype.onTouchButtonContent=function(e){},t=r([u],t)}(i.default);o.default=d,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrPkMirror":"mgrPkMirror","../../manager/mgrPool":"mgrPool","./vPkMirrorLevelBar":"vPkMirrorLevelBar"}],vPkMirrorPkItem:[function(e,t,o){"use strict";cc._RF.push(t,"015b3ShIslLSqWjs2dqceb4","vPkMirrorPkItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/view/ViewBase"),l=e("../../manager/mgrDirector"),c=e("../../manager/mgrEffect"),u=e("../../manager/mgrPkMirror"),d=e("../../struct/sAvatar"),p=cc._decorator.ccclass,h=function(e){function t(){var t,o=null!==e&&e.apply(this,arguments)||this;return o.B_ENEMY_2_DATA=((t={})[0]={modalOffsetX:0,avatarScaleX:1},t[1]={modalOffsetX:0,avatarScaleX:-1},t),o}return n(t,e),t.prototype._getResourceName=function(){return"node/vPkMirrorPkItem"},t.prototype._getResourceBindingConfig=function(){return{CC_labelName:[cc.Label],CC_nodeAvatar:[cc.Node],CC_nodeName:[cc.Node],CC_nodePkMirrorLevelItem:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onLoadedInit=function(){var e=this.context.bEnemy?1:0,t=this.B_ENEMY_2_DATA[e];this.nodeAvatar.scaleX*=t.avatarScaleX||1,this.nodePkMirrorLevelItem.x=t.modalOffsetX||0;var o=this.context.nameOffsetPos||cc.v2(0,0);this.nodeName.x+=o.x,this.nodeName.y+=o.y;var n=this.context.player,r=n.data,a=n.score||0;this.labelName.string=n.name||"";var i=u.default.getLevelTemplateByStar(a),s=new d.default;s.fillBySerializeText(r),this.structAvatar=s,this.viewAvatar=l.default.createView("vAvatar",{structAvatar:this.structAvatar}),this.viewAvatar.parent=this.nodeAvatar,this.viewAvatar.refreshAll(),this.viewAvatar.setPreloadDelayRefresh(!0),l.default.createView("vPkMirrorLevelItem",{template:i,star:a}).parent=this.nodePkMirrorLevelItem,this.nodePkMirrorLevelItem.active=!this.context.bDisableLevelItem,this.nodePkMirrorLevelItem._originPos=this.nodePkMirrorLevelItem.position},t.prototype.smile=function(){return a(this,void 0,void 0,function(){return i(this,function(e){return this.viewAvatar.onCmd("CMD_AVATAR_HAPPY"),[2]})})},t.prototype.sad=function(){return a(this,void 0,void 0,function(){return i(this,function(e){return this.viewAvatar.onCmd("CMD_AVATAR_SAD"),[2]})})},t.prototype.setPlayerName=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){return this.context.player.name=e||"",this.labelName.string=e||"",[2]})})},t.prototype.levelItemActionIn=function(e){return a(this,void 0,void 0,function(){var t;return i(this,function(o){return t=[{node:this.nodePkMirrorLevelItem,beginPos:cc.v2(this.nodePkMirrorLevelItem._originPos.x+e.x,this.nodePkMirrorLevelItem._originPos.y+e.y),endPos:this.nodePkMirrorLevelItem._originPos,delayTime:0,dur:.6}],c.default.playMoveToActionArr(t,null,null),[2]})})},r([s.default.requireResourceLoaded],t.prototype,"smile",null),r([s.default.requireResourceLoaded],t.prototype,"sad",null),r([s.default.requireResourceLoaded],t.prototype,"setPlayerName",null),r([s.default.requireResourceLoaded],t.prototype,"levelItemActionIn",null),t=r([p],t)}(s.default);o.default=h,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrDirector":"mgrDirector","../../manager/mgrEffect":"mgrEffect","../../manager/mgrPkMirror":"mgrPkMirror","../../struct/sAvatar":"sAvatar"}],vPkMirrorRankListItem:[function(e,t,o){"use strict";cc._RF.push(t,"e87efm1fNNI24Jp95RwHD4a","vPkMirrorRankListItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/ViewBase"),c=e("../../manager/mgrDirector"),u=e("../../manager/mgrI18n"),d=e("../../manager/mgrPkMirror"),p=cc._decorator.ccclass,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBg=null,t.labelNameNormal=null,t.labelNameSelected=null,t.labelRankNormal=null,t.labelRankSelected=null,t.labelScoreNormal=null,t.labelScoreSelected=null,t.nodeLevelItem=null,t.nodeNormal=null,t.nodeRank1=null,t.nodeSelected=null,t.player=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vPkMirrorRankListItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBg:[s.default,"onTouchButtonBg"],CC_labelNameNormal:[cc.Label],CC_labelNameSelected:[cc.Label],CC_labelRankNormal:[cc.Label],CC_labelRankSelected:[cc.Label],CC_labelScoreNormal:[cc.Label],CC_labelScoreSelected:[cc.Label],CC_nodeLevelItem:[cc.Node],CC_nodeNormal:[cc.Node],CC_nodeRank1:[cc.Node],CC_nodeSelected:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onLoadedInit=function(){var e=c.default.createView("vPkMirrorLevelItem");e.parent=this.nodeLevelItem,this.levelItem=e,this.refreshLevel()},t.prototype.refreshLevel=function(){this.player&&this.levelItem&&this.levelItem.updateByStar(this.player.score||0)},t.prototype.fillByPlayer=function(e){return a(this,void 0,void 0,function(){var t;return i(this,function(o){return this.player=e,this.buttonBg.node.active=!0,e=this.player,t=e.rank||0,this.nodeRank1.active=1==t,this.labelRankSelected.node.active=1!=t,d.default.getLevelTemplateByStar(e.score),this.labelRankSelected.string=t.toString(),this.labelNameSelected.string=e.name,this.labelScoreSelected.string=ul.format(u.default.getText("vPkMirrorRankListItem.1"),e.score),this.labelRankNormal.string=t.toString(),this.labelNameNormal.string=e.name,this.labelScoreNormal.string=ul.format(u.default.getText("vPkMirrorRankListItem.1"),e.score),this.refreshLevel(),this.setNo1(1==t),[2]})})},t.prototype.setSelected=function(e){return a(this,void 0,void 0,function(){var t;return i(this,function(o){return t=this.player,t.rank||0,this.nodeNormal.active=!e,this.nodeSelected.active=e,[2]})})},t.prototype.setNo1=function(e){return a(this,void 0,void 0,function(){var t;return i(this,function(o){return t=this.player,t.rank||0,this.nodeNormal.active=!e,this.nodeSelected.active=e,[2]})})},t.prototype.onTouchButtonBg=function(e){e.isClick()&&this.context.fOnClick&&this.context.fOnClick(this.player)},r([l.default.requireResourceLoaded],t.prototype,"fillByPlayer",null),r([l.default.requireResourceLoaded],t.prototype,"setSelected",null),r([l.default.requireResourceLoaded],t.prototype,"setNo1",null),t=r([p],t)}(l.default);o.default=h,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrDirector":"mgrDirector","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPkMirror":"mgrPkMirror"}],vPkMirrorResultDialog:[function(e,t,o){"use strict";cc._RF.push(t,"40109LL+6dFhKPXwpxV/kVi","vPkMirrorResultDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/utils/Tools"),i=e("../../../ulframework/view/FSMDialogBase"),s=e("../../manager/mgrCfg"),l=e("../../manager/mgrDirector"),c=e("../../manager/mgrPkMirror"),u=e("../../manager/mgrPlayer"),d=e("../../manager/mgrPool"),p=e("../../manager/mgrSdk"),h=e("../../manager/mgrSound"),f=e("../../manager/mgrTip"),g=e("../../manager/mgrAd"),m=e("../../manager/mgrStatics"),_=e("../../../ulframework/component/ScleableButton"),v=e("../../manager/mgrGuide"),y=e("../../manager/mgrVideoRecorder"),C=e("../../Const"),S=e("../../../ulframework/utils/Timer"),b=e("../../manager/mgrChannel"),R=cc._decorator.ccclass,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonComfirm=null,t.buttonVideoShare=null,t.buttonVideoShareClose=null,t.buttonVideoShareContent=null,t.labelButtonComfirm=null,t.labelScoreLeft=null,t.labelScoreRight=null,t.labelVideoShare=null,t.labelVideoShareClose=null,t.labelVideoShareTipNum=null,t.nodeAvatarLeft=null,t.nodeAvatarRight=null,t.nodeBannerArea=null,t.nodeBgParticle1=null,t.nodeBgParticle2=null,t.nodeButtonComfirm=null,t.nodeFaildResult=null,t.nodeFaildStar=null,t.nodeLayoutContent=null,t.nodeLeft=null,t.nodeLevelItem=null,t.nodeLevelItemArrow=null,t.nodeLevelItemShadow=null,t.nodeLevelItem_bak=null,t.nodeLightLeft=null,t.nodeLightRight=null,t.nodeNowLevelItem=null,t.nodeNowLevelItemStayHolder=null,t.nodeOldLevelItem=null,t.nodePillarLeft=null,t.nodePillarRight=null,t.nodeRight=null,t.nodeSuccessResult=null,t.nodeSuccessStar=null,t.nodeSuccessStarRoad1=null,t.nodeSuccessStarRoad2=null,t.nodeSuccessStarRoad3=null,t.nodeTopEffect=null,t.nodeUIRoot=null,t.nodeVideoShare=null,t.nodeVideoShareTips=null,t.ST_INIT=1,t.ST_FADE_IN=2,t.ST_ADD_SCORE=3,t.ST_RATING=4,t.ST_REWARD=5,t.ST_GIFT=6,t.ST_FINISH=7,t.ST_LIGHT=8,t.STATE_CLICK_ROUTER={},t.TIME_OF_ADD_SCORE=2,t.MAX_PILLAR_CHANGE_HEIGHT=150,t.ACTION_SCALE_SCORE=2345,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vPkMirrorResultDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonComfirm:[_.default,"onTouchButtonComfirm"],CC_buttonVideoShare:[_.default,"onTouchButtonVideoShare"],CC_buttonVideoShareClose:[_.default,"onTouchButtonVideoShareClose"],CC_buttonVideoShareContent:[_.default,"onTouchButtonVideoShareContent"],CC_labelButtonComfirm:[cc.Label],CC_labelScoreLeft:[cc.Label],CC_labelScoreRight:[cc.Label],CC_labelVideoShare:[cc.Label],CC_labelVideoShareClose:[cc.Label],CC_labelVideoShareTipNum:[cc.Label],CC_nodeAvatarLeft:[cc.Node],CC_nodeAvatarRight:[cc.Node],CC_nodeBannerArea:[cc.Node],CC_nodeBgParticle1:[cc.Node],CC_nodeBgParticle2:[cc.Node],CC_nodeButtonComfirm:[cc.Node],CC_nodeFaildResult:[cc.Node],CC_nodeFaildStar:[cc.Node],CC_nodeLayoutContent:[cc.Node],CC_nodeLeft:[cc.Node],CC_nodeLevelItem:[cc.Node],CC_nodeLevelItemArrow:[cc.Node],CC_nodeLevelItemShadow:[cc.Node],CC_nodeLevelItem_bak:[cc.Node],CC_nodeLightLeft:[cc.Node],CC_nodeLightRight:[cc.Node],CC_nodeNowLevelItem:[cc.Node],CC_nodeNowLevelItemStayHolder:[cc.Node],CC_nodeOldLevelItem:[cc.Node],CC_nodePillarLeft:[cc.Node],CC_nodePillarRight:[cc.Node],CC_nodeRight:[cc.Node],CC_nodeSuccessResult:[cc.Node],CC_nodeSuccessStar:[cc.Node],CC_nodeSuccessStarRoad1:[cc.Node],CC_nodeSuccessStarRoad2:[cc.Node],CC_nodeSuccessStarRoad3:[cc.Node],CC_nodeTopEffect:[cc.Node],CC_nodeUIRoot:[cc.Node],CC_nodeVideoShare:[cc.Node],CC_nodeVideoShareTips:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){(e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(l.default.size),this.setContentSize(l.default.size),g.default.isBannerAdValid())?(this.nodeUIRoot.getComponent(cc.Widget).bottom=g.default.getBannerHeight(),g.default.showViewEnterAd(this.nodeResource,null,null,"ad_banner_pk_result_dialog")):g.default.showIntAd();this.nodeVideoShare.active=!1,this.buttonComfirm.node.active=!1},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.animNode&&(d.default.put(this.animNode),this.animNode.removeFromParent(),this.animNode=null)},t.prototype.onOpenDialogCompleted=function(){this.onLoadedInit()},t.prototype.videoShareAdapt=function(){var e=this;if(this.context.result.bSuccess&&!v.default.isGuiding()&&p.default.isOpenVideoRecord()&&y.default.recordStatus==y.default.RECORD_FINISH&&y.default.lastRecordVideoTime>y.default.minRecordTime){if(this.nodeVideoShare.active=!0,this.buttonVideoShareClose.node.active=!1,b.default.isCanClickVideoShareDialogContent()&&(this.buttonVideoShareContent.node.active=!0),u.default.getItemAmount(C.default.ITEM_ID_VIDEO_SHARE_COUNT)>0){var t=Math.ceil(u.default.getBascRewardGold());this.labelVideoShareTipNum.string="*"+t,this.nodeVideoShareTips.active=!0}else this.nodeVideoShareTips.active=!1;var o=p.default.getCopNumberValueByKey("pk_mirror_result_dialog_video_share_cancel_delay_time")||0,n=p.default.getCopNumberValueByKey("pk_mirror_result_dialog_video_share_cancel_delay_ratio")||0;a.default.random(100)<=n?S.default.callLater(o,function(){e.buttonVideoShareClose.node.active=!0},this):this.buttonVideoShareClose.node.active=!0}else this.buttonComfirm.node.active=!0},t.prototype.onLoadedInit=function(){h.default.play(723),this.setContentSize(l.default.size),this.nodeLightLeft._originPos=this.nodeLightLeft.position,this.nodeLightRight._originPos=this.nodeLightRight.position,this.nodeLightLeft.active=!1,this.nodeLightRight.active=!1;var e=this.context.result.stageId,t=(this.context.result.score,this.context.result.bSuccess);ul.format("\u5b8c\u6210\u5173\u5361\u6362\u88c5_\u955c\u50cf");m.default.statisOnStageEnd(e,t),this.registerState(this.ST_INIT,"onEnterInit",null,null),this.registerState(this.ST_FADE_IN,"onEnterFadeIn","onExecuteFadeIn","onLeaveFadeIn"),this.registerState(this.ST_ADD_SCORE,"onEnterAddScore","onExecuteAddScore","onLeaveAddScore"),this.registerState(this.ST_LIGHT,"onEnterLight","onExecuteLight","onLeaveLight"),this.registerState(this.ST_RATING,"onEnterRating","onExecuteRating","onLeaveRating"),this.registerState(this.ST_REWARD,"onEnterReward","onExecuteReward",null),this.registerState(this.ST_GIFT,"onEnterGift","onExecuteGift",null),this.registerState(this.ST_FINISH,"onEnterFinish",null,null),this.setNextState(this.ST_INIT),a.default.registerTouchHandler(this,this.onTouchHandler.bind(this)),this.registerListeners({MSG_DEBUG_KEY_DOWN:this.onMsgDebugKeyDown.bind(this),MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult.bind(this)})},t.prototype.onEnterInit=function(){this.nodeLeft._originPos=this.nodeLeft.position,this.nodeRight._originPos=this.nodeRight.position,this.nodeLevelItem._originPos=this.nodeLevelItem.position,this.nodeOldLevelItem._originPos=this.nodeOldLevelItem.position,this.nodeNowLevelItem._originPos=this.nodeNowLevelItem.position,this.nodePillarLeft._originSize=this.nodePillarLeft.getContentSize(),this.nodePillarRight._originSize=this.nodePillarRight.getContentSize(),this.nodeLeft.x-=l.default.size.width,this.nodeRight.x+=l.default.size.width,this.pkResult=this.context.result,this.initUi(),this.setNextState(this.ST_FADE_IN)},t.prototype.onEnterFadeIn=function(){var e=this;this.nodeLeft.runAction(cc.moveTo(.3,this.nodeLeft._originPos)),this.nodeRight.runAction(cc.sequence(cc.moveTo(.3,this.nodeRight._originPos),cc.delayTime(.6),cc.callFunc(function(){e.setNextState(e.ST_ADD_SCORE)})))},t.prototype.onExecuteFadeIn=function(e){},t.prototype.onLeaveFadeIn=function(){},t.prototype.onEnterAddScore=function(){this.selfScore=this.pkResult.score||0,this.targetScore=this.pkResult.scoreTarget||0,this.selfAddScoreUseTime=Math.max(this.selfScore/100,1)*this.TIME_OF_ADD_SCORE,this.targetAddScoreUseTime=Math.max(this.targetScore/100,1)*this.TIME_OF_ADD_SCORE,this._remainTime=0,this._passTime=0;var e=this.selfAddScoreUseTime/(this.selfScore||1),t=this.targetAddScoreUseTime/(this.targetScore||1),o=this.selfAddScoreUseTime>this.targetAddScoreUseTime;this.labelScoreLeft.node._originScale=this.labelScoreLeft.node.scale,this.labelScoreRight.node._originScale=this.labelScoreRight.node.scale,this.labelScoreLeft.node.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){o&&h.default.play(162)}),cc.scaleTo(e/2,this.labelScoreLeft.node._originScale+.2,this.labelScoreLeft.node._originScale+.2),cc.scaleTo(e/2,this.labelScoreLeft.node._originScale,this.labelScoreLeft.node._originScale)))).setTag(this.ACTION_SCALE_SCORE),this.labelScoreRight.node.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){o||h.default.play(162)}),cc.scaleTo(t/2,this.labelScoreRight.node._originScale+.2,this.labelScoreRight.node._originScale+.2),cc.scaleTo(t/2,this.labelScoreRight.node._originScale,this.labelScoreRight.node._originScale)))).setTag(this.ACTION_SCALE_SCORE)},t.prototype.onExecuteAddScore=function(e){this._passTime=this._passTime+e;Math.max(Math.max(this.selfScore,this.targetScore),100);var t=this._passTime/this.selfAddScoreUseTime;t>=1&&(t=1),this.labelScoreLeft.string=Math.floor(t*this.selfScore).toString();var o=this._passTime/this.targetAddScoreUseTime;o>=1&&(o=1),this.labelScoreRight.string=Math.floor(o*this.targetScore).toString(),t>=1&&o>=1&&(this.labelScoreLeft.node.stopAllActions(),this.labelScoreRight.node.stopAllActions(),this.labelScoreLeft.node.scale=this.labelScoreLeft.node._originScale,this.labelScoreRight.node.scale=this.labelScoreRight.node._originScale,this.setNextState(this.ST_LIGHT),this.update(0))},t.prototype.onLeaveAddScore=function(){},t.prototype.onEnterLight=function(){var e=null,t=null;this.pkResult.bSuccess?(e=this.nodeLightLeft,t=this.labelScoreLeft.node,this.nodeLeft,this.levelItemPlayer.smile(),h.default.play(713),h.default.play(201),h.default.play(204)):(e=this.nodeLightRight,t=this.labelScoreRight.node,this.nodeRight,this.levelItemPlayer.sad(),h.default.play(714),h.default.play(203),h.default.play(207)),e.opacity=0,e.active=!0;e.runAction(cc.sequence(cc.fadeIn(.6),cc.callFunc(function(){e.runAction(cc.repeatForever(cc.sequence(cc.rotateTo(.5,3),cc.rotateTo(1,-3),cc.rotateTo(.5,0))))}))),t.runAction(cc.sequence(cc.callFunc(function(){var e=t.parent.convertToWorldSpaceAR(t.position);f.default.playParticleOnce("click_xingxing2",e.x,e.y)}),cc.scaleTo(.3,1.2*t._originScale,1.2*t._originScale))),this._remainTime=2},t.prototype.onExecuteLight=function(e){this._remainTime-=e,this._remainTime<=0&&(this.setNextState(this.ST_RATING),this.update(0))},t.prototype.onLeaveLight=function(){},t.prototype.onEnterRating=function(){var e=this,t=this.nodeRight.position;this.nodeRight.runAction(cc.sequence(cc.delayTime(1),cc.moveTo(.3,cc.v2(t.x+l.default.size.width/2,t.y)),cc.fadeOut(.1))),this.nodeLightRight.runAction(cc.sequence(cc.delayTime(1),cc.moveTo(.3,cc.v2(this.nodeLightRight.x+l.default.size.width/2,this.nodeLightRight.y)),cc.fadeOut(.1)));var o=this.nodeLeft.position;this.nodeLeft.runAction(cc.sequence(cc.delayTime(1),cc.moveTo(.3,cc.v2(0,o.y)),cc.callFunc(function(){e.ratingResultEff()}))),this.nodeLightLeft.runAction(cc.sequence(cc.delayTime(1),cc.moveTo(.3,cc.v2(0,this.nodeLightLeft.y))))},t.prototype.onExecuteRating=function(e){},t.prototype.onLeaveRating=function(){this.nodeLevelItemShadow.stopAllActions(),this.nodeLevelItemShadow.runAction(cc.fadeOut(.1))},t.prototype.onEnterReward=function(){this.setNextState(this.ST_GIFT)},t.prototype.onExecuteReward=function(e){},t.prototype.onLeaveReward=function(){},t.prototype.onEnterGift=function(){this.setNextState(this.ST_FINISH)},t.prototype.onExecuteGift=function(e){},t.prototype.onLeaveGift=function(){},t.prototype.onEnterFinish=function(){s.default.get("stage_db",this.pkResult.stageId).script.onResultSceneFinished(this)},t.prototype.onExecuteFinish=function(e){},t.prototype.onLeaveFinish=function(){},t.prototype.initUi=function(){var e=this.context.structAvatar,t=this.context.targetStruct,o={name:u.default.getName(),data:e.serializeToText()},n=l.default.createView("vPkMirrorPkItem",{player:o,bEnemy:!1,bDisableLevelItem:!0,nameOffsetPos:cc.v2(0,-60)});n.scale=.8,n.parent=this.nodeAvatarLeft;var r={name:this.context.targetName,data:t.serializeToText()},a=l.default.createView("vPkMirrorPkItem",{player:r,bEnemy:!0,bDisableLevelItem:!0,nameOffsetPos:cc.v2(0,-60)});a.scale=.8,a.parent=this.nodeAvatarRight;var i=this.pkResult.newStarNum,s=c.default.getLevelTemplateByStar(i),d=l.default.createView("vPkMirrorLevelItem",{template:s,star:i});d.parent=this.nodeNowLevelItem,d.opacity=0,this.mirrorLevelItemNow=d,this.levelItemPlayer=n},t.prototype.ratingResultEff=function(){var e=this;if(this.pkResult.bSuccess){h.default.play(168);var t=this.nodeSuccessResult.position;this.nodeSuccessResult.y=l.default.size.height,this.nodeSuccessResult.active=!0,this.nodeSuccessResult.runAction(cc.sequence(cc.moveTo(.6,t).easing(cc.easeElasticInOut(1.2)),cc.callFunc(function(){e.mirrorLevelItemNow.active=!0,e.mirrorLevelItemNow.runAction(cc.fadeIn(.5));var t=d.default.get("animNode","69_huanzhuang2");t&&(t.parent=e.nodeAvatarLeft,t.scale=.8,t.position=cc.v2(0,150),t.play(),e.animNode=t)}),cc.delayTime(2),cc.callFunc(function(){p.default.isOpenVideoRecord()&&y.default.stopRecordGameVideo(),e.videoShareAdapt()})))}else{h.default.play(169);t=this.nodeFaildResult.position;this.nodeFaildResult.y=l.default.size.height,this.nodeFaildResult.active=!0,this.nodeFaildResult.runAction(cc.sequence(cc.moveTo(.6,t).easing(cc.easeElasticInOut(1.5)),cc.delayTime(2),cc.callFunc(function(){p.default.isOpenVideoRecord()&&y.default.stopRecordGameVideo(),e.videoShareAdapt()})))}},t.prototype.onTouchButtonComfirm=function(e){e.isClick()&&this.setNextState(this.ST_REWARD)},t.prototype.onTouchButtonVideoShare=function(e){e.isClick()&&p.default.shareGameVideo()},t.prototype.onTouchButtonVideoShareClose=function(e){e.isClick()&&this.setNextState(this.ST_REWARD)},t.prototype.onTouchButtonVideoShareContent=function(e){e.isClick()&&p.default.shareGameVideo()},t.prototype.onTouchHandler=function(e){if(e.isClick()&&!(20<a.default.pDistance(e.getStartLocation(),e.getLocation()))){var t=this.getState(),o=this.STATE_CLICK_ROUTER[t];o&&this.setNextState(o)}},t.prototype.onMsgDebugKeyDown=function(e){e.data},t.prototype.onMsgSdkShareVideoResult=function(e){this.buttonComfirm.node.active=!0,this.nodeVideoShare.active=!1},t.prototype.isClickShadowClose=function(){return!1},t=r([R],t)}(i.default);o.default=T,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/FSMDialogBase":"FSMDialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrChannel":"mgrChannel","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGuide":"mgrGuide","../../manager/mgrPkMirror":"mgrPkMirror","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrPool":"mgrPool","../../manager/mgrSdk":"mgrSdk","../../manager/mgrSound":"mgrSound","../../manager/mgrStatics":"mgrStatics","../../manager/mgrTip":"mgrTip","../../manager/mgrVideoRecorder":"mgrVideoRecorder"}],vPricePromoteAdDialog:[function(e,t,o){"use strict";cc._RF.push(t,"79647Eo9spBGYyV0xoV2/+q","vPricePromoteAdDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrChannel"),l=e("../node/vPackingAvatar"),c=e("../../manager/mgrPlayer"),u=cc._decorator.ccclass,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonClose2=null,t.buttonContent=null,t.buttonVideo=null,t.labelButton1=null,t.labelButton2=null,t.labelContent=null,t.labelPriceNum=null,t.labelTitle=null,t.layoutBg=null,t.nodeAdButtonFlag=null,t.nodeAvatar=null,t.nodeTitle=null,t.spriteItem=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vPricePromoteAdDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_buttonClose2:[a.default,"onTouchButtonClose2"],CC_buttonContent:[a.default,"onTouchButtonContent"],CC_buttonVideo:[a.default,"onTouchButtonVideo"],CC_labelButton1:[cc.Label],CC_labelButton2:[cc.Label],CC_labelContent:[cc.Label],CC_labelPriceNum:[cc.Label],CC_labelTitle:[cc.Label],CC_layoutBg:[cc.Layout],CC_nodeAdButtonFlag:[cc.Node],CC_nodeAvatar:[cc.Node],CC_nodeTitle:[cc.Node],CC_spriteItem:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit(),this.adaptAdMode()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onLoadedInit=function(){if(this.labelContent.string=this.context.contentStr||this.labelContent.string,this.labelButton1.string=this.context.btnRefuseStr||this.labelButton1.string,this.labelButton2.string=this.context.btnVideoStr||this.labelButton2.string,this.labelPriceNum.string=c.default.getItemAmountStr(this.context.price),this.context.packingData){var e=new l.default({bDisableChange:!0});e.parent=this.nodeAvatar,e.fillByPacking(this.context.packingData)}s.default.isCanClickVideoDialogContent()&&(this.buttonContent.node.active=!0)},t.prototype.adaptAdMode=function(){},t.prototype.onTouchButtonClose=function(e){e.isClick()&&(this.context.fOnClickRefused&&this.context.fOnClickRefused(),this.closeDialog())},t.prototype.onTouchButtonVideo=function(e){e.isClick()&&(this.context.fOnClickVideo&&this.context.fOnClickVideo(),this.closeDialog())},t.prototype.onTouchButtonClose2=function(e){this.onTouchButtonClose(e)},t.prototype.onTouchButtonContent=function(e){e.isClick()&&(this.context.fOnClickVideo&&this.context.fOnClickVideo(),this.closeDialog())},t.prototype.isClickShadowClose=function(){return!1},t=r([u],t)}(i.default);o.default=d,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrChannel":"mgrChannel","../../manager/mgrPlayer":"mgrPlayer","../node/vPackingAvatar":"vPackingAvatar"}],vProductResultDialog:[function(e,t,o){"use strict";cc._RF.push(t,"7afday2lWtKl4hwm+E7c+qd","vProductResultDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrCosmetic"),l=e("../../manager/mgrDirector"),c=e("../../manager/mgrCfg"),u=e("../../manager/mgrPacking"),d=e("../../manager/mgrTip"),p=e("../../struct/sAvatar"),h=e("../../manager/mgrSound"),f=e("../../manager/mgrPool"),g=e("../../../ulframework/utils/Tools"),m=e("../../Const"),_=e("../../manager/mgrPlayer"),v=e("../../manager/mgrSdk"),y=e("../../manager/mgrGuide"),C=e("../../manager/mgrAd"),S=e("../../manager/mgrChannel"),b=e("../../manager/mgrVideoRecorder"),R=e("../../../ulframework/utils/Timer"),T=e("../../manager/mgrI18n"),A=cc._decorator,D=A.ccclass,I=(A.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBack=null,t.buttonShare=null,t.buttonShowing=null,t.buttonVideoShare=null,t.buttonVideoShareClose=null,t.buttonVideoShareContent=null,t.labelSuggestPrice=null,t.labelVideoShare=null,t.labelVideoShareClose=null,t.labelVideoShareTipNum=null,t.nodeAvatar=null,t.nodeCard=null,t.nodeCardBack=null,t.nodeCardFront=null,t.nodeCardShine=null,t.nodeCenterEffect=null,t.nodeEvent=null,t.nodeLayoutContent=null,t.nodeMask=null,t.nodeNewFlag=null,t.nodePrice=null,t.nodeShare=null,t.nodeTitleBar=null,t.nodeUIRoot=null,t.nodeVideoShare=null,t.nodeVideoShareTips=null,t.spriteSubject=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vProductResultDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBack:[a.default,"onTouchButtonBack"],CC_buttonShare:[a.default,"onTouchButtonShare"],CC_buttonShowing:[a.default,"onTouchButtonShowing"],CC_buttonVideoShare:[a.default,"onTouchButtonVideoShare"],CC_buttonVideoShareClose:[a.default,"onTouchButtonVideoShareClose"],CC_buttonVideoShareContent:[a.default,"onTouchButtonVideoShareContent"],CC_labelSuggestPrice:[cc.Label],CC_labelVideoShare:[cc.Label],CC_labelVideoShareClose:[cc.Label],CC_labelVideoShareTipNum:[cc.Label],CC_nodeAvatar:[cc.Node],CC_nodeCard:[cc.Node],CC_nodeCardBack:[cc.Node],CC_nodeCardFront:[cc.Node],CC_nodeCardShine:[cc.Node],CC_nodeCenterEffect:[cc.Node],CC_nodeEvent:[cc.Node],CC_nodeLayoutContent:[cc.Node],CC_nodeMask:[cc.Node],CC_nodeNewFlag:[cc.Node],CC_nodePrice:[cc.Node],CC_nodeShare:[cc.Node],CC_nodeTitleBar:[cc.Node],CC_nodeUIRoot:[cc.Node],CC_nodeVideoShare:[cc.Node],CC_nodeVideoShareTips:[cc.Node],CC_spriteSubject:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(l.default.size),this.setContentSize(l.default.size),this.buttonShowing.node.active=!1,this.nodeShare.active=!1,C.default.showViewEnterAd(this.nodeResource,null,null,"ad_banner_product_result_dialog"),this.nodeVideoShare.active=!1},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.animNode&&(f.default.put(this.animNode),this.animNode.removeFromParent(),this.animNode=null),this.animNodeBorder&&(f.default.put(this.animNodeBorder),this.animNodeBorder.removeFromParent(),this.animNodeBorder=null)},t.prototype.onOpenDialogCompleted=function(){this.onLoadedInit()},t.prototype.onCloseDialogStart=function(){C.default.closeBannerAd()},t.prototype.videoShareAdapt=function(){var e=this;if(this.nodeVideoShare.active=!1,!y.default.isGuiding()&&v.default.isOpenVideoRecord()&&b.default.recordStatus==b.default.RECORD_FINISH&&b.default.lastRecordVideoTime>b.default.minRecordTime){if(this.nodeVideoShare.active=!0,this.buttonVideoShareClose.node.active=!1,S.default.isCanClickVideoShareDialogContent()&&(this.buttonVideoShareContent.node.active=!0),_.default.getItemAmount(m.default.ITEM_ID_VIDEO_SHARE_COUNT)>0){var t=Math.ceil(_.default.getBascRewardGold());this.labelVideoShareTipNum.string="*"+t,this.nodeVideoShareTips.active=!0}else this.nodeVideoShareTips.active=!1;var o=v.default.getCopNumberValueByKey("build_store_result_dialog_video_share_cancel_delay_time")||0,n=v.default.getCopNumberValueByKey("build_store_result_dialog_video_share_cancel_delay_ratio")||0;g.default.random(100)<=n?R.default.callLater(o,function(){e.buttonVideoShareClose.node.active=!0},this):this.buttonVideoShareClose.node.active=!0}},t.prototype.onLoadedInit=function(){var e=this;y.default.registerGuideNode("vProductResult.buttonBack",this.buttonBack.node),this.sendMsg("MSG_GUIDE_POINT",{id:"vProductResult.onEnterTransitionFinish",productResultCount:_.default.getItemAmount(m.default.ITEM_ID_ENTER_PRODUCT_RESULT_COUNT)}),_.default._setItemAmount(m.default.ITEM_ID_ENTER_PRODUCT_RESULT_COUNT,1);var t=s.default.getSubjectByPackingId(this.context.packingId),o=s.default.getAvatarScoreBySubjectId(this.context.structAvatar,t),n=c.default.get("cosmetic_subject_tag_db",t);this.spriteSubject.loadSpriteFrameAndKeepSize(n.texture);var r=u.default.getPacking(this.context.packingId);this.labelSuggestPrice.string=ul.format("%s",_.default.getItemAmountStr(Math.ceil(o+r.template.productGoldNumRatio/1e4*o)));var a=new p.default;this.structAvatar=a,this.viewAvatar=l.default.createView("vAvatar",{structAvatar:this.structAvatar}),this.viewAvatar.parent=this.nodeAvatar,this.viewAvatar.refreshAll(),this.nodeAvatar.scale=1.5;var i=this.context.structAvatar;this.partIds=i.getUsedPartIds(),this.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){e.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){e.onTimerLoop()}),cc.delayTime(.6))))}))),this.registerListeners({MSG_SDK_SHARE_VIDEO_RESULT:this.onMsgSdkShareVideoResult.bind(this),MSG_SDK_SHARE_RESULT:this.onMsgShareResult.bind(this)})},t.prototype.onTimerLoop=function(){var e=this;if(!this.partIds||0==this.partIds.length)return this.stopAllActions(),void this.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){e.nodeCardBack.active=!0,e.nodeCardBack.opacity=0,e.nodeCardFront.active=!0,e.nodeCardFront.scale=0;var t=e.nodeCardBack.position;e.nodeCardBack.y=2*l.default.size.height,e.nodeCardBack.opacity=255;var o=f.default.get("animNode","70_kapai_bian");o&&(o.parent=e.nodeCardBack,o.scale=1,o.position=cc.v2(0,50),o.play(),e.animNodeBorder=o);var n=function(){e.buttonShowing.node.scale=0,e.buttonShowing.node.active=!e.context.packingId&&!e.nodeVideoShare.active,e.buttonShowing.node.active&&e.buttonShowing.node.runAction(cc.sequence(cc.delayTime(.5),cc.scaleTo(.2,1,1)));v.default.isOpenVideoRecord()&&v.default.getLastRecordVideoTime()>=10&&S.default._isSupportRecordShare,1!=v.default.getCopNumberValueByKey("b_share")||S.default._isShareEnabled;e.nodeShare.scale=0,e.nodeShare.active=!1,e.nodeShare.active&&(b.default.stopRecordGameVideo(),e.nodeShare.runAction(cc.sequence(cc.delayTime(.5),cc.scaleTo(.2,1,1)))),e.sendMsg("MSG_GUIDE_POINT",{id:"vProductResult.onDressEffectCompleted"}),e.buttonBack.node.active=!e.nodeVideoShare.active,e.buttonBack.node.opacity=0,e.buttonBack.node.runAction(cc.sequence(cc.delayTime(.3),cc.fadeIn(.1),cc.callFunc(function(){e.nodeShare.active||e.buttonShowing.node.active||g.default.registerTouchHandler(e,e.onTouchHandler.bind(e))})))};e.nodeCardBack.runAction(cc.sequence(cc.moveTo(1.2,t).easing(cc.easeElasticInOut(.8)),cc.callFunc(function(){h.default.play(612),e.nodeAvatar.runAction(cc.sequence(cc.scaleTo(.5,1.3,1.3),cc.callFunc(function(){var t=f.default.get("animNode","69_huanzhuang2");t&&(t.parent=e.nodeAvatar,t.scale=.6,t.position=cc.v2(0,150),t.play(),e.animNode=t)}),cc.delayTime(.6),cc.callFunc(function(){e.nodeCardShine.runAction(cc.repeatForever(cc.sequence(cc.spawn(cc.sequence(cc.scaleTo(1,1.1,1.1),cc.scaleTo(1,1,1)),cc.sequence(cc.fadeIn(1),ul.actionFloat(1,255,100,function(t){e.nodeCardShine.opacity=t}))),cc.callFunc(function(){})))),v.default.isOpenVideoRecord()&&b.default.stopRecordGameVideo(),e.nodeCardFront.runAction(cc.sequence(cc.scaleTo(.8,1,1).easing(cc.easeElasticInOut(.9)),cc.callFunc(function(){e.nodeNewFlag.active=!0,e.nodeNewFlag.scale=0,e.nodeNewFlag.runAction(cc.sequence(cc.scaleTo(.2,1.3,1.3),cc.scaleTo(.1,1,1),cc.callFunc(function(){var t=f.default.get("particle","result_bao2");t&&(t.scale=1,t.parent=e.nodeNewFlag,t.setAutoRemoveOnFinish(!0),e.videoShareAdapt())})))})))}),cc.delayTime(1.5),cc.callFunc(n)))})))}),cc.delayTime(2)));var t=this.partIds.shift();this.startDress(t)},t.prototype.startDress=function(e){var t=this,o=new cc.Node;o.parent=this.nodeAvatar,o.scale=this.viewAvatar.scale;this._createResNodes(e,!1,o);var n=cc.v2(o.x,o.y-300),r=o.position,a=[n,cc.v2(n.x-80,(r.y-n.y)/2),r];o.position=n,o.runAction(cc.sequence(cc.bezierTo(1,a),cc.fadeOut(.1),cc.callFunc(function(){for(var n=c.default.get("cosmetic_part_db",e),r=0;r<n.typeData.fixedPartCount;r++)t.structAvatar.onCmd("CMD_AVATAR_PART_REPLACE",{partType:n.type,index:r,partId:n.id}),t.viewAvatar.onCmd("CMD_AVATAR_PART_REPLACE",{partType:n.type,index:r,partId:n.id});h.default.play(611);var a=f.default.get("particle","bao_2");a&&(a.scale=.9,a.parent=t.nodeAvatar,a.position=cc.v2(0,180),a.setAutoRemoveOnFinish(!0),t._removeResNodes(o.children))})))},t.prototype._createResNodes=function(e,t,o){var n=c.default.get("cosmetic_part_db",e);if(!n)return null;for(var r=[],a=n.resources,i=n.resourceOffset||[0,0],l=n.resourcePoses,u=n.typeData.orders,d=0;d<a.length;d++){var p=a[d],h=p[0],f=l[d];f=cc.v2(f.x+i[0],f.y+i[1]);var g=s.default.createResNode(p[0],p[1],!0);t?(h==m.CPartResType.SPRITE&&g.setPosition(-f.x,f.y),g.setScale(-1,1),g.setPosition(g.x,g.y)):g.setPosition(f.x,f.y),g.parent=o,g.zIndex=u[d]+500,g._normalPos=g.position,g._bFlip=t,g._resType=h,r.push(g)}return r},t.prototype._removeResNodes=function(e){if(e)for(var t in e){var o=e[t];s.default.removeResNode(o)}},t.prototype.doClose=function(){this.sendMsg("MSG_GUIDE_POINT",{id:"vProductResult.buttonBack.click"}),this.nodeShare.active&&b.default.tryStartRecordGameVideo(),v.default.addGameToMyFavorite(0,"\u4e00\u952e\u6dfb\u52a0\u5230\u6211\u7684\u5c0f\u7a0b\u5e8f"),this.setShadowOpacity(0),this.nodeMask.active=!0,this.nodeShare.active=!1,this.buttonBack.node.active=!1,this.nodeNewFlag.active=!1,c.default.get("stage_db",this.context.stageId).script.onResultSceneFinished(this)},t.prototype.getCardNode=function(){return this.nodeCard},t.prototype.onTouchButtonShowing=function(e){var t=this;if(e.isClick()){for(var o=this.context.structAvatar.serializeToText(),n=u.default.getSortedPackings(),r=n.length,a=0;a<r;a++){var i=n[a];if(!(i.level<=0)){var s=u.default.getPackingAvatarStr(i.id);if(!s||""==s)return u.default.isUnpackAvatar(o)?void(u.default.setPackingAvatar(i.id,o)?(d.default.showMsgTip(T.default.getText("vProductResultDialog.4")),this.nodeShare?(this.nodeShare.stopAllActions(),this.nodeShare.scale=1,this.nodeShare.runAction(cc.sequence(cc.moveTo(.3,cc.v2(0,this.nodeShare.y)),cc.callFunc(function(){t.nodeShare.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.1,1.1),cc.scaleTo(1,.9,.9),cc.scaleTo(.5,1,1))))})))):this.doClose()):d.default.showMsgTip(T.default.getText("vProductResultDialog.5"))):void d.default.showMsgTip(T.default.getText("vProductResultDialog.3"))}}l.default.warpDialogWithSmallEffect("vSelectPackingDialog",{avatarStr:o})}},t.prototype.onTouchButtonBack=function(e){e.isClick()&&this.doClose()},t.prototype.onTouchButtonShare=function(e){if(e.isClick()){var t=!!(v.default.isOpenVideoRecord()&&v.default.getLastRecordVideoTime()>=10&&S.default._isSupportRecordShare),o=!(1!=v.default.getCopNumberValueByKey("b_share")||!S.default._isShareEnabled);t?v.default.shareGameVideo("","\u5a03\u5a03\u5236\u4f5c\u5b8c\u6210\u754c\u9762"):o&&_.default.tryNoRewardShare("\u5a03\u5a03\u5236\u4f5c\u5b8c\u6210\u754c\u9762"),this.nodeShare.stopAllActions(),this.nodeShare.runAction(cc.scaleTo(.3,1,1)),this.buttonShare.node._originActive=!0,this.buttonShare.node.active=!1}},t.prototype.onTouchButtonVideoShare=function(e){e.isClick()&&v.default.shareGameVideo()},t.prototype.onTouchButtonVideoShareClose=function(e){e.isClick()&&(this.nodeVideoShare.active=!1,this.buttonShowing.node.active=!this.context.packingId,this.buttonBack.node.active=!0,this.buttonBack.node.opacity=255,this.doClose())},t.prototype.onTouchButtonVideoShareContent=function(e){e.isClick()&&v.default.shareGameVideo()},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onTouchHandler=function(e){"ended"!=e.name&&"cancelled"!=e.name||this.doClose()},t.prototype.onMsgSdkShareVideoResult=function(e){this.nodeVideoShare.active=!1,this.buttonShowing.node.active=!this.context.packingId,this.buttonBack.node.active=!0,this.buttonBack.node.opacity=255},t.prototype.onMsgShareResult=function(e){},t=r([D],t)}(i.default));o.default=I,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrChannel":"mgrChannel","../../manager/mgrCosmetic":"mgrCosmetic","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPacking":"mgrPacking","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrPool":"mgrPool","../../manager/mgrSdk":"mgrSdk","../../manager/mgrSound":"mgrSound","../../manager/mgrTip":"mgrTip","../../manager/mgrVideoRecorder":"mgrVideoRecorder","../../struct/sAvatar":"sAvatar"}],vPromptAdDialog:[function(e,t,o){"use strict";cc._RF.push(t,"f61c2UDZ/9IEKqAcH4eqF2e","vPromptAdDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrAd"),l=e("../../../ulframework/component/ToggleButton"),c=e("../../manager/mgrPool"),u=e("../../manager/mgrChannel"),d=e("../../manager/mgrGuide"),p=e("../../../ulframework/utils/Tools"),h=cc._decorator.ccclass,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonClose2=null,t.buttonContent=null,t.buttonNeedAdv=null,t.buttonNoNeedAdv=null,t.buttonVideo=null,t.labelButton1=null,t.labelButton2=null,t.labelContent=null,t.labelNeedAdv=null,t.labelNoNeedAdv=null,t.labelTitle=null,t.layoutBg=null,t.layoutOnline=null,t.nodeAdButtonFlag=null,t.nodeGouMode=null,t.nodeSpine=null,t.nodeTitle=null,t.spriteNeedGou=null,t.spriteNoNeedGou=null,t.toggleTipSelect=null,t.isNeedAdv=!0,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vPromptAdDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_buttonClose2:[a.default,"onTouchButtonClose2"],CC_buttonContent:[a.default,"onTouchButtonContent"],CC_buttonNeedAdv:[a.default,"onTouchButtonNeedAdv"],CC_buttonNoNeedAdv:[a.default,"onTouchButtonNoNeedAdv"],CC_buttonVideo:[a.default,"onTouchButtonVideo"],CC_toggleTipSelect:[l.default,"onTouchToggleTipSelect"],CC_labelButton1:[cc.Label],CC_labelButton2:[cc.Label],CC_labelContent:[cc.Label],CC_labelNeedAdv:[cc.Label],CC_labelNoNeedAdv:[cc.Label],CC_labelTitle:[cc.Label],CC_layoutBg:[cc.Layout],CC_layoutOnline:[cc.Layout],CC_nodeAdButtonFlag:[cc.Node],CC_nodeGouMode:[cc.Node],CC_nodeSpine:[cc.Node],CC_nodeTitle:[cc.Node],CC_spriteNeedGou:[cc.Sprite],CC_spriteNoNeedGou:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit(),this.adaptAdMode(),this.adaptTickModeUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.spine||(c.default.put(this.spine),this.spine.removeFromParent(),this.spine=null)},t.prototype.adaptTickModeUi=function(){this.nodeGouMode.active=!1,this.buttonNeedAdv.node.active=!1,this.buttonNoNeedAdv.node.active=!1,!d.default.isGuiding()&&u.default.isCanVideoTick()&&this.buttonVideo.node.active&&(this.nodeGouMode.active=!0,this.layoutOnline.node.active=!1,this.buttonClose.node.active=!0,this.buttonClose2.node.active=!1,this.randomNeedAdv()?(this.buttonNeedAdv.node.active=!0,this.labelButton1.setLocalizedString("vPromptAdDialog.4")):(this.buttonNoNeedAdv.node.active=!0,this.labelButton1.setLocalizedString("vPromptAdDialog.8")))},t.prototype.randomNeedAdv=function(){return p.default.random(100)>50?(this.isNeedAdv=!0,!0):(this.isNeedAdv=!1,!1)},t.prototype.onLoadedInit=function(){this.labelContent.string=this.context.contentStr||this.labelContent.string,this.labelButton1.string=this.context.btnRefuseStr||this.labelButton1.string,this.labelButton2.string=this.context.btnVideoStr||this.labelButton2.string;var e=c.default.get("spine","jiesuanwawa");e&&(e.play("mov_1",!0),e.parent=this.nodeSpine,this.spine=e),u.default.isCanClickVideoDialogContent()&&!u.default.isCanVideoTick()&&(this.buttonContent.node.active=!0)},t.prototype.adaptAdMode=function(){this.layoutOnline.node.active=s.default.isOnline()&&!this.context.bNotShowOnline,this.buttonClose.node.active=s.default.isMcprc(),s.default.isOnline()?(this.labelButton2._oldString=this.labelButton2._oldString||this.labelButton2.string,this.toggleTipSelect.isPressed()?(this.labelButton2.string=this.labelButton2._oldString,this.nodeAdButtonFlag.active=!0):(this.labelButton2.setLocalizedString("vPromptAdDialog.3"),this.nodeAdButtonFlag.active=!1)):this.buttonClose.node.active=!1},t.prototype.onTouchButtonClose=function(e){if(e.isClick()){if(!d.default.isGuiding()&&u.default.isCanVideoTick()&&this.nodeGouMode.active&&this.buttonVideo.node.active){if(this.isNeedAdv&&this.buttonNeedAdv.node.active&&this.spriteNeedGou.node.active)return this.context.fOnClickVideo&&this.context.fOnClickVideo(),void this.closeDialog();if(!this.isNeedAdv&&this.buttonNoNeedAdv.node.active&&!this.spriteNoNeedGou.node.active)return this.context.fOnClickVideo&&this.context.fOnClickVideo(),void this.closeDialog()}this.context.fOnClickRefused&&this.context.fOnClickRefused(),this.closeDialog()}},t.prototype.onTouchButtonVideo=function(e){e.isClick()&&(!s.default.isOnline()||this.toggleTipSelect.isPressed()?this.context.fOnClickVideo&&this.context.fOnClickVideo():this.context.fOnClickRefused&&this.context.fOnClickRefused(),this.closeDialog())},t.prototype.onTouchToggleTipSelect=function(e){e.isClick()&&this.adaptAdMode()},t.prototype.onTouchButtonClose2=function(e){this.onTouchButtonClose(e)},t.prototype.onTouchButtonContent=function(e){e.isClick()&&(this.context.fOnClickVideo&&this.context.fOnClickVideo(),this.closeDialog())},t.prototype.onTouchButtonNeedAdv=function(e){e.isClick()&&(this.spriteNeedGou.node.active?(this.spriteNeedGou.node.active=!1,this.labelButton1.setLocalizedString("vPromptAdDialog.8")):(this.spriteNeedGou.node.active=!0,this.labelButton1.setLocalizedString("vPromptAdDialog.4")))},t.prototype.onTouchButtonNoNeedAdv=function(e){e.isClick()&&(this.spriteNoNeedGou.node.active?(this.spriteNoNeedGou.node.active=!1,this.labelButton1.setLocalizedString("vPromptAdDialog.4")):(this.spriteNoNeedGou.node.active=!0,this.labelButton1.setLocalizedString("vPromptAdDialog.8")))},t.prototype.isClickShadowClose=function(){return!1},t=r([h],t)}(i.default);o.default=f,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/component/ToggleButton":"ToggleButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrChannel":"mgrChannel","../../manager/mgrGuide":"mgrGuide","../../manager/mgrPool":"mgrPool"}],vPromptAdRewardDialog:[function(e,t,o){"use strict";cc._RF.push(t,"ede6bMaLUFMJYdHLv9ehxtM","vPromptAdRewardDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrPlayer"),l=e("../../Const"),c=e("../../../ulframework/component/ToggleButton"),u=e("../../manager/mgrAd"),d=e("../../../ulframework/utils/Timer"),p=e("../../manager/mgrChannel"),h=e("../../../ulframework/utils/Tools"),f=e("../../manager/mgrGuide"),g=e("../../manager/mgrI18n"),m=cc._decorator,_=m.ccclass,v=(m.property,function(e){function t(){var t,o=null!==e&&e.apply(this,arguments)||this;return o.button1=null,o.button2=null,o.buttonClose2=null,o.buttonContent=null,o.buttonNeedAdv=null,o.buttonNoNeedAdv=null,o.labelButton1=null,o.labelButton2=null,o.labelContent=null,o.labelNeedAdv=null,o.labelNoNeedAdv=null,o.labelReward1=null,o.labelReward2=null,o.labelTitle=null,o.layoutBg=null,o.layoutOnline=null,o.nodeAdButtonFlag=null,o.nodeGoldImg=null,o.nodeGouMode=null,o.nodeReward1=null,o.nodeReward2=null,o.nodeRmbImg=null,o.nodeTitle=null,o.progressBarCountDown=null,o.spriteDoubleIcon=null,o.spriteNeedGou=null,o.spriteNoNeedGou=null,o.spriteRewardIcon1=null,o.spriteRewardIcon2=null,o.spriteThreeIcon=null,o.toggleTipSelect=null,o.TIME_STR_DICT=((t={})[1]=g.default.getText("vPromptAdRewardDialog.8"),t[2]=g.default.getText("vPromptAdRewardDialog.9"),t[3]=g.default.getText("vPromptAdRewardDialog.10"),t[4]=g.default.getText("vPromptAdRewardDialog.11"),t[5]=g.default.getText("vPromptAdRewardDialog.12"),t),o.isNeedAdv=!0,o}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vPromptAdRewardDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[a.default,"onTouchButton1"],CC_button2:[a.default,"onTouchButton2"],CC_buttonClose2:[a.default,"onTouchButtonClose2"],CC_buttonContent:[a.default,"onTouchButtonContent"],CC_buttonNeedAdv:[a.default,"onTouchButtonNeedAdv"],CC_buttonNoNeedAdv:[a.default,"onTouchButtonNoNeedAdv"],CC_toggleTipSelect:[c.default,"onTouchToggleTipSelect"],CC_labelButton1:[cc.Label],CC_labelButton2:[cc.Label],CC_labelContent:[cc.Label],CC_labelNeedAdv:[cc.Label],CC_labelNoNeedAdv:[cc.Label],CC_labelReward1:[cc.Label],CC_labelReward2:[cc.Label],CC_labelTitle:[cc.Label],CC_layoutBg:[cc.Layout],CC_layoutOnline:[cc.Layout],CC_nodeAdButtonFlag:[cc.Node],CC_nodeGoldImg:[cc.Node],CC_nodeGouMode:[cc.Node],CC_nodeReward1:[cc.Node],CC_nodeReward2:[cc.Node],CC_nodeRmbImg:[cc.Node],CC_nodeTitle:[cc.Node],CC_progressBarCountDown:[cc.ProgressBar],CC_spriteDoubleIcon:[cc.Sprite],CC_spriteNeedGou:[cc.Sprite],CC_spriteNoNeedGou:[cc.Sprite],CC_spriteRewardIcon1:[cc.Sprite],CC_spriteRewardIcon2:[cc.Sprite],CC_spriteThreeIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),p.default.isCanClickVideoDialogContent()&&!p.default.isCanVideoTick()&&(this.buttonContent.node.active=!0),this.buttonClose2.node.active=!1,this.context.itemId=this.context.itemId||l.default.ITEM_ID_GOLD;var t=this.context.itemId,o=this.context.amount,n=this.context.times||1,r=s.default.getIcon(t);this.spriteRewardIcon1.loadSpriteFrameAndKeepSize(r),this.spriteRewardIcon2.loadSpriteFrameAndKeepSize(r),this.labelReward1.string=ul.format("%s",s.default.getItemAmountStr(o)),this.labelReward2.string=ul.format("%s",s.default.getItemAmountStr(o*n)),this.labelButton2.string=ul.format("%s",this.TIME_STR_DICT[n]||g.default.getText("vPromptAdRewardDialog.13")),t==l.default.ITEM_ID_GOLD?(this.nodeGoldImg.active=!0,this.labelContent.node.opacity=0,this.labelTitle.string=this.labelContent.string):t==l.default.ITEM_ID_RMB?(this.nodeRmbImg.active=!0,this.labelContent.node.opacity=0,this.labelTitle.string=this.labelContent.string):this.labelContent.string=ul.format(g.default.getText("vPromptAdRewardDialog.14"),this.TIME_STR_DICT[n]||g.default.getText("vPromptAdRewardDialog.13")),this.adaptAdMode(),this.adaptTickModeUi(),u.default.showBannerAd(this.nodeResource,"ad_banner_prompt_ad_reward_dialog")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onCloseDialogStart=function(){u.default.closeBannerAd()},t.prototype.adaptTickModeUi=function(){this.nodeGouMode.active=!1,this.buttonNeedAdv.node.active=!1,this.buttonNoNeedAdv.node.active=!1,!f.default.isGuiding()&&p.default.isCanVideoTick()&&this.button2.node.active&&(this.nodeGouMode.active=!0,this.layoutOnline.node.active=!1,this.button1.node.active=!0,this.buttonClose2.node.active=!1,this.randomNeedAdv()?(this.buttonNeedAdv.node.active=!0,this.labelButton1.setLocalizedString("vPromptAdRewardDialog.4")):(this.buttonNoNeedAdv.node.active=!0,this.labelButton1.setLocalizedString("vPromptAdRewardDialog.15")))},t.prototype.randomNeedAdv=function(){return h.default.random(100)>50?(this.isNeedAdv=!0,!0):(this.isNeedAdv=!1,!1)},t.prototype.adaptAdMode=function(){if(this.layoutOnline.node.active=u.default.isOnline(),this.button1.node.active=u.default.isMcprc(),u.default.isOnline())if(this.toggleTipSelect.isPressed()){this.labelButton2.setLocalizedString("vPromptAdRewardDialog.4"),this.nodeAdButtonFlag.active=!0;var e=this.context.amount,t=this.context.times||1;this.labelButton2.string=ul.format("%s",this.TIME_STR_DICT[t]||g.default.getText("vPromptAdRewardDialog.13")),this.labelReward2.string=ul.format("%s",s.default.getItemAmountStr(e*t))}else this.labelButton2.setLocalizedString("vPromptAdRewardDialog.3"),this.nodeAdButtonFlag.active=!1,this.labelReward2.string=this.labelReward1.string;else this.buttonClose2.node.active=!1;this.context.isShowProgress?(this.toggleTipSelect.node.active=!1,this.buttonClose2.node.active=!0,3==this.context.times?(this.spriteDoubleIcon.node.active=!1,this.spriteThreeIcon.node.active=!0):(this.spriteDoubleIcon.node.active=!0,this.spriteThreeIcon.node.active=!1),this.nodeReward2.active=!1,this.progressBarCountDown.node.active=!0,this.button1.node.active=!1,this.nodeReward1.active=!1,this.startCountDown()):(3==this.context.times?(this.spriteDoubleIcon.node.active=!1,this.spriteThreeIcon.node.active=!0):(this.spriteDoubleIcon.node.active=!0,this.spriteThreeIcon.node.active=!1),this.spriteDoubleIcon.node.active=!1,this.progressBarCountDown.node.active=!1)},t.prototype.startCountDown=function(){d.default.callLoop(1,this.refreshProgress.bind(this),!1)},t.prototype.refreshProgress=function(){if(this.progressBarCountDown.progress>=1)return this.progressBarCountDown.node.active=!1,this.buttonClose2.node.active=!1,this.spriteDoubleIcon.node.active=!1,this.nodeReward2.active=!0,this.button1.node.active=!0,void(this.nodeReward1.active=!0);this.progressBarCountDown.progress+=.2},t.prototype.onTouchButton1=function(e){if(e.isClick()){if(!f.default.isGuiding()&&p.default.isCanVideoTick()&&this.nodeGouMode.active&&this.button2.node.active){if(this.isNeedAdv&&this.buttonNeedAdv.node.active&&this.spriteNeedGou.node.active)return this.context.fOnClickVideo&&this.context.fOnClickVideo(),void this.closeDialog();if(!this.isNeedAdv&&this.buttonNoNeedAdv.node.active&&!this.spriteNoNeedGou.node.active)return this.context.fOnClickVideo&&this.context.fOnClickVideo(),void this.closeDialog()}this.context.fOnClickRefused&&this.context.fOnClickRefused(),this.closeDialog()}},t.prototype.onTouchButton2=function(e){e.isClick()&&(!u.default.isOnline()||this.toggleTipSelect.isPressed()?this.context.fOnClickVideo&&this.context.fOnClickVideo():this.context.fOnClickRefused&&this.context.fOnClickRefused(),this.closeDialog())},t.prototype.onTouchButtonClose2=function(e){this.onTouchButton1(e)},t.prototype.onTouchToggleTipSelect=function(e){e.isClick()&&this.adaptAdMode()},t.prototype.onTouchButtonContent=function(e){e.isClick()&&(this.context.fOnClickVideo&&this.context.fOnClickVideo(),this.closeDialog())},t.prototype.onTouchButtonNeedAdv=function(e){e.isClick()&&(this.spriteNeedGou.node.active?(this.spriteNeedGou.node.active=!1,this.labelButton1.setLocalizedString("vPromptAdRewardDialog.15")):(this.spriteNeedGou.node.active=!0,this.labelButton1.setLocalizedString("vPromptAdRewardDialog.4")))},t.prototype.onTouchButtonNoNeedAdv=function(e){e.isClick()&&(this.spriteNoNeedGou.node.active?(this.spriteNoNeedGou.node.active=!1,this.labelButton1.setLocalizedString("vPromptAdRewardDialog.4")):(this.spriteNoNeedGou.node.active=!0,this.labelButton1.setLocalizedString("vPromptAdRewardDialog.15")))},t.prototype.isClickShadowClose=function(){return!1},t=r([_],t)}(i.default));o.default=v,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/component/ToggleButton":"ToggleButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrChannel":"mgrChannel","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPlayer":"mgrPlayer"}],vPromptAdSelectDialog:[function(e,t,o){"use strict";cc._RF.push(t,"aff1fv/v1JMqoDBLTDqX0Nn","vPromptAdSelectDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrPlayer"),l=e("../../../ulframework/component/ToggleButton"),c=e("../../manager/mgrAd"),u=e("../../manager/mgrI18n"),d=cc._decorator,p=d.ccclass,h=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.button2=null,t.buttonClose2=null,t.labelButton1=null,t.labelButton2=null,t.labelContent=null,t.labelReward1=null,t.labelReward2=null,t.labelReward2Price=null,t.labelTitle=null,t.layoutBg=null,t.layoutOnline=null,t.nodeAdButtonFlag=null,t.nodeReward1=null,t.nodeReward2=null,t.nodeReward2Price=null,t.nodeTitle=null,t.spriteItemIcon1=null,t.spriteItemIcon2=null,t.toggleTipSelect=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vPromptAdSelectDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[a.default,"onTouchButton1"],CC_button2:[a.default,"onTouchButton2"],CC_buttonClose2:[a.default,"onTouchButtonClose2"],CC_toggleTipSelect:[l.default,"onTouchToggleTipSelect"],CC_labelButton1:[cc.Label],CC_labelButton2:[cc.Label],CC_labelContent:[cc.Label],CC_labelReward1:[cc.Label],CC_labelReward2:[cc.Label],CC_labelReward2Price:[cc.Label],CC_labelTitle:[cc.Label],CC_layoutBg:[cc.Layout],CC_layoutOnline:[cc.Layout],CC_nodeAdButtonFlag:[cc.Node],CC_nodeReward1:[cc.Node],CC_nodeReward2:[cc.Node],CC_nodeReward2Price:[cc.Node],CC_nodeTitle:[cc.Node],CC_spriteItemIcon1:[cc.Sprite],CC_spriteItemIcon2:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this);var t=this.context.amount;if(this.labelReward1.string=ul.format("%s",s.default.getItemAmountStr(t)),this.labelReward2Price.string=this.labelReward1.string,this.labelContent.string=ul.format("%s",this.context.contentStr||u.default.getText("vPromptAdSelectDialog.6")),this.labelButton2.string=this.context.btnVideoStr||this.labelButton2.string,this.context.itemId){var o=s.default.getIcon(this.context.itemId);this.spriteItemIcon1.loadSpriteFrameAndKeepSize(o),this.spriteItemIcon2.loadSpriteFrameAndKeepSize(o)}this.adaptAdMode()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.adaptAdMode=function(){this.layoutOnline.node.active=c.default.isOnline(),this.button1.node.active=!1,c.default.isOnline()&&(this.labelButton2._oldString=this.labelButton2._oldString||this.labelButton2.string,this.toggleTipSelect.isPressed()?(this.labelButton2.string=this.labelButton2._oldString,this.nodeReward2Price.opacity=0,this.nodeReward2.opacity=255,this.nodeAdButtonFlag.active=!0):(this.labelButton2.setLocalizedString("vPromptAdSelectDialog.4"),this.nodeReward2Price.opacity=255,this.nodeReward2.opacity=0,this.nodeAdButtonFlag.active=!1))},t.prototype.onTouchButton1=function(e){e.isClick()&&(this.context.fOnClickRefused&&this.context.fOnClickRefused(),this.closeDialog())},t.prototype.onTouchButton2=function(e){e.isClick()&&(!c.default.isOnline()||this.toggleTipSelect.isPressed()?this.context.fOnClickVideo&&this.context.fOnClickVideo():this.context.fOnClickRefused&&this.context.fOnClickRefused(),this.closeDialog())},t.prototype.onTouchButtonClose2=function(e){this.onTouchButton1(e)},t.prototype.onTouchToggleTipSelect=function(e){e.isClick()&&this.adaptAdMode()},t.prototype.isClickShadowClose=function(){return!1},t=r([p],t)}(i.default));o.default=h,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/component/ToggleButton":"ToggleButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPlayer":"mgrPlayer"}],vPromptDialog:[function(e,t,o){"use strict";cc._RF.push(t,"ba562iYgrxHlqWAV9OI0rKz","vPromptDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../../ulframework/utils/Tools"),l=e("../../manager/mgrGuide"),c=e("../../manager/mgrAd"),u=e("../../manager/mgrI18n"),d=cc._decorator.ccclass,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.button2=null,t.button3=null,t.buttonClose=null,t.labelButton1=null,t.labelButton2=null,t.labelButton3=null,t.labelContent=null,t.labelTitle=null,t.layoutBg=null,t.nodeTitle=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vPromptDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[a.default,"onTouchButton1"],CC_button2:[a.default,"onTouchButton2"],CC_button3:[a.default,"onTouchButton3"],CC_buttonClose:[a.default,"onTouchButtonClose"],CC_labelButton1:[cc.Label],CC_labelButton2:[cc.Label],CC_labelButton3:[cc.Label],CC_labelContent:[cc.Label],CC_labelTitle:[cc.Label],CC_layoutBg:[cc.Layout],CC_nodeTitle:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buttonClose.node.active=!1,this.labelTitle.string=this.context.title||u.default.getText("vPromptDialog.1"),this.labelContent.string=this.context.content||u.default.getText("vPromptDialog.2"),cc.log("---this.context.content =",this.context.content||"");for(var t=[],o=this.context.btnTexts||[],n=0;n<3;n++){var r=this["button"+(n+1)],a=r.node.getComponentInChildren(cc.Label);null!=o[n]?(a.string=o[n],t.push(r.node)):r.node.active=!1}s.default.layoutNodesHorizonCenter(t,10),c.default.showIntAd(null,"inter_prompt_dialog"),this.context.adEventId&&c.default.showBannerAd(this.nodeResource,this.context.adEventId),l.default.registerGuideNode("vPromptDialog.button1",this.button1.node),l.default.registerGuideNode("vPromptDialog.button2",this.button2.node),this.sendMsg("MSG_GUIDE_POINT",{id:"vPromptDialog.onResourceLoaded"})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onCloseDialogStart=function(){c.default.closeBannerAd()},t.prototype.isClickShadowClose=function(){return this.context.btnTexts.length<=0},t.prototype.triggerCallback=function(e){var t=(this.context.callbacks||[])[e];null!=t&&t()||this.closeDialog()},t.prototype.onTouchButton1=function(e){e.isClick()&&this.triggerCallback(0)},t.prototype.onTouchButton2=function(e){e.isClick()&&this.triggerCallback(1)},t.prototype.onTouchButton3=function(e){e.isClick()&&this.triggerCallback(2)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t=r([d],t)}(i.default);o.default=p,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n"}],vPromptGoldRainDialog:[function(e,t,o){"use strict";cc._RF.push(t,"2bf22FiiQJPpYsFXFSk5fQ7","vPromptGoldRainDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrPlayer"),l=e("../../manager/mgrTip"),c=e("../../Const"),u=e("../../manager/mgrAd"),d=e("../../manager/mgrGoldRain"),p=e("../../manager/mgrI18n"),h=cc._decorator,f=h.ccclass,g=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.button2=null,t.buttonClose=null,t.labelButton1=null,t.labelButton2=null,t.labelContent=null,t.labelTitle=null,t.layoutBg=null,t.nodeTitle=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vPromptGoldRainDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[a.default,"onTouchButton1"],CC_button2:[a.default,"onTouchButton2"],CC_buttonClose:[a.default,"onTouchButtonClose"],CC_labelButton1:[cc.Label],CC_labelButton2:[cc.Label],CC_labelContent:[cc.Label],CC_labelTitle:[cc.Label],CC_layoutBg:[cc.Layout],CC_nodeTitle:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),0==this.context.amount?(this.button1.node.active=!0,this.button2.node.active=!1,this.labelContent.setLocalizedString("vPromptGoldRainDialog.4")):(this.button1.node.active=!1,this.button2.node.active=!0,this.labelContent.string=ul.format(p.default.getText("vPromptGoldRainDialog.5"),this.context.amount)),u.default.showBannerAd(this.nodeResource,"ad_banner_gold_rain_dialog")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onCloseDialogStart=function(){u.default.closeBannerAd()},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onTouchButton1=function(e){e.isClick()&&(this.closeDialog(),d.default.refreshOpenGoldRainTime())},t.prototype.onTouchButton2=function(e){e.isClick()&&(this.closeDialog(),s.default.addItemAmount(c.default.ITEM_ID_GOLD,this.context.amount,"\u91d1\u5e01\u96e8\u5956\u52b1"),l.default.addGotItemTip(c.default.ITEM_ID_GOLD,this.context.amount),d.default.refreshOpenGoldRainTime())},t.prototype.onTouchButtonClose=function(e){e.isClick()},t=r([f],t)}(i.default));o.default=g,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrGoldRain":"mgrGoldRain","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrTip":"mgrTip"}],vPromptHudCrazyDialog:[function(e,t,o){"use strict";cc._RF.push(t,"dd37aguErJD5IgR79Ovud4Q","vPromptHudCrazyDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../../ulframework/component/ToggleButton"),l=e("../../manager/mgrPool"),c=e("../../manager/mgrAd"),u=e("../../manager/mgrDirector"),d=e("../../manager/mgrCop"),p=e("../../manager/mgrChannel"),h=e("../node/vOrderTitleBar"),f=cc._decorator,g=f.ccclass,m=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonClose2=null,t.buttonContent=null,t.buttonVideo=null,t.labelButton1=null,t.labelButton2=null,t.labelContent=null,t.layoutBg=null,t.layoutOnline=null,t.nodeAdButtonFlag=null,t.nodeOrder=null,t.nodeSpine=null,t.nodeTitle=null,t.toggleTipSelect=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vPromptHudCrazyDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_buttonClose2:[a.default,"onTouchButtonClose2"],CC_buttonContent:[a.default,"onTouchButtonContent"],CC_buttonVideo:[a.default,"onTouchButtonVideo"],CC_toggleTipSelect:[s.default,"onTouchToggleTipSelect"],CC_labelButton1:[cc.Label],CC_labelButton2:[cc.Label],CC_labelContent:[cc.Label],CC_layoutBg:[cc.Layout],CC_layoutOnline:[cc.Layout],CC_nodeAdButtonFlag:[cc.Node],CC_nodeOrder:[cc.Node],CC_nodeSpine:[cc.Node],CC_nodeTitle:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit(),this.adaptAdMode(),this.context.bShowBanner&&c.default.showBannerAd(this.nodeResource,"ad_banner_hud_crazy_dialog"),this.layoutBg.node.y=-u.default.height/2+this.layoutBg.node.height/2+d.default.getNumberValue("ui_banner_height")+50},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.spine||(l.default.put(this.spine),this.spine.removeFromParent(),this.spine=null)},t.prototype.onCloseDialogStart=function(){this.context.bShowBanner&&c.default.closeBannerAd()},t.prototype.onLoadedInit=function(){var e=this;this.labelContent.string=this.context.contentStr||this.labelContent.string,this.labelButton1.string=this.context.btnRefuseStr||this.labelButton1.string,this.labelButton2.string=this.context.btnVideoStr||this.labelButton2.string;var t=l.default.get("spine","jiesuanwawa");(t&&(t.play("mov_1",!0),t.parent=this.nodeSpine,this.spine=t),this.context.bShowOrderNum)&&(new h.default({fGetOrderAmountFunc:function(){return e.context.currOrderNum||0},bDisableAutoRefresh:!0}).parent=this.nodeOrder);p.default.isCanClickVideoDialogContent()&&(this.buttonContent.node.active=!0)},t.prototype.adaptAdMode=function(){this.layoutOnline.node.active=c.default.isOnline(),this.buttonClose.node.active=c.default.isMcprc(),c.default.isOnline()?(this.labelButton2._oldString=this.labelButton2._oldString||this.labelButton2.string,this.toggleTipSelect.isPressed()?(this.labelButton2.string=this.labelButton2._oldString,this.nodeAdButtonFlag.active=!0):(this.labelButton2.setLocalizedString("vPromptHudCrazyDialog.2"),this.nodeAdButtonFlag.active=!1)):this.buttonClose.node.active=!1},t.prototype.onTouchButtonClose=function(e){e.isClick()&&(this.context.fOnClickRefused&&this.context.fOnClickRefused(),this.closeDialog())},t.prototype.onTouchButtonVideo=function(e){e.isClick()&&(!c.default.isOnline()||this.toggleTipSelect.isPressed()?this.context.fOnClickVideo&&this.context.fOnClickVideo():this.context.fOnClickRefused&&this.context.fOnClickRefused(),this.closeDialog())},t.prototype.onTouchToggleTipSelect=function(e){e.isClick()&&this.adaptAdMode()},t.prototype.onTouchButtonClose2=function(e){this.onTouchButtonClose(e)},t.prototype.onTouchButtonContent=function(e){e.isClick()&&(this.context.fOnClickVideo&&this.context.fOnClickVideo(),this.closeDialog())},t.prototype.isClickShadowClose=function(){return!1},t=r([g],t)}(i.default));o.default=m,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/component/ToggleButton":"ToggleButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrChannel":"mgrChannel","../../manager/mgrCop":"mgrCop","../../manager/mgrDirector":"mgrDirector","../../manager/mgrPool":"mgrPool","../node/vOrderTitleBar":"vOrderTitleBar"}],vPromptImgDialog:[function(e,t,o){"use strict";cc._RF.push(t,"4619eptRe9PnZjIQy7wJCWK","vPromptImgDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../../ulframework/utils/Tools"),l=e("../../manager/mgrGuide"),c=e("../../manager/mgrAd"),u=e("../../manager/mgrI18n"),d=cc._decorator.ccclass,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.button2=null,t.button3=null,t.buttonClose=null,t.labelButton1=null,t.labelButton2=null,t.labelButton3=null,t.labelContent=null,t.labelTitle=null,t.layoutBg=null,t.nodeTitle=null,t.spriteDesc=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vPromptImgDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[a.default,"onTouchButton1"],CC_button2:[a.default,"onTouchButton2"],CC_button3:[a.default,"onTouchButton3"],CC_buttonClose:[a.default,"onTouchButtonClose"],CC_labelButton1:[cc.Label],CC_labelButton2:[cc.Label],CC_labelButton3:[cc.Label],CC_labelContent:[cc.Label],CC_labelTitle:[cc.Label],CC_layoutBg:[cc.Layout],CC_nodeTitle:[cc.Node],CC_spriteDesc:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buttonClose.node.active=!1,this.labelTitle.string=this.context.title||u.default.getText("vPromptImgDialog.1"),this.labelContent.string=this.context.content||u.default.getText("vPromptImgDialog.2"),this.context.imgPath?this.spriteDesc.loadSpriteFrame(this.context.imgPath):this.spriteDesc.node.active=!1;for(var t=[],o=this.context.btnTexts||[],n=0;n<3;n++){var r=this["button"+(n+1)],a=r.node.getComponentInChildren(cc.Label);null!=o[n]?(a.string=o[n],t.push(r.node)):r.node.active=!1}s.default.layoutNodesHorizonCenter(t,10),l.default.registerGuideNode("vPromptImgDialog.button1",this.button1.node),l.default.registerGuideNode("vPromptImgDialog.button2",this.button2.node),this.sendMsg("MSG_GUIDE_POINT",{id:"vPromptImgDialog.onResourceLoaded"}),c.default.showBannerAd(this.nodeResource,"ad_banner_share_dialog")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),c.default.closeBannerAd()},t.prototype.isClickShadowClose=function(){return this.context.btnTexts.length<=0},t.prototype.triggerCallback=function(e){var t=(this.context.callbacks||[])[e];null!=t&&t()||this.closeDialog()},t.prototype.onTouchButton1=function(e){e.isClick()&&this.triggerCallback(0)},t.prototype.onTouchButton2=function(e){e.isClick()&&this.triggerCallback(1)},t.prototype.onTouchButton3=function(e){e.isClick()&&this.triggerCallback(2)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t=r([d],t)}(i.default);o.default=p,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n"}],vPromptInputConfirmDialog:[function(e,t,o){"use strict";cc._RF.push(t,"a8a92/OPzFHKpPFqzQDgY8U","vPromptInputConfirmDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrTip"),l=cc._decorator.ccclass,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.button2=null,t.buttonClose=null,t.editboxInput=null,t.labelButton1=null,t.labelButton2=null,t.labelTitle=null,t.layoutBg=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vPromptInputConfirmDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[a.default,"onTouchButton1"],CC_button2:[a.default,"onTouchButton2"],CC_buttonClose:[a.default,"onTouchButtonClose"],CC_editboxInput:[cc.EditBox],CC_labelButton1:[cc.Label],CC_labelButton2:[cc.Label],CC_labelTitle:[cc.Label],CC_layoutBg:[cc.Layout]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onLoadedInit=function(){this.setClickShadowClose(!1)},t.prototype.onTouchButton1=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButton2=function(e){if(e.isClick()){var t=this.editboxInput.string;t.length>0?(this.context.fOnConfirm&&this.context.fOnConfirm(t),this.closeDialog()):s.default.showMsgTip("\u8bf7\u8f93\u5165")}},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t=r([l],t)}(i.default);o.default=c,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrTip":"mgrTip"}],vPromptOpenStoreDialog:[function(e,t,o){"use strict";cc._RF.push(t,"15758qN0pBK3KRKsXbG2YQg","vPromptOpenStoreDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../../ulframework/utils/Tools"),l=e("../../manager/mgrGuide"),c=e("../../manager/mgrPool"),u=e("../../manager/mgrAd"),d=e("../../manager/mgrAdNative"),p=e("../../manager/mgrI18n"),h=cc._decorator.ccclass,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.button2=null,t.button3=null,t.buttonClose=null,t.labelAdContent=null,t.labelAdTarget=null,t.labelAdTitle=null,t.labelButton1=null,t.labelButton2=null,t.labelButton3=null,t.labelContent=null,t.layoutBg=null,t.nodeAdImg=null,t.nodeNative=null,t.nodeParent=null,t.nodeSpine=null,t.nodeTitle=null,t.spriteAd=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vPromptOpenStoreDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[a.default,"onTouchButton1"],CC_button2:[a.default,"onTouchButton2"],CC_button3:[a.default,"onTouchButton3"],CC_buttonClose:[a.default,"onTouchButtonClose"],CC_labelAdContent:[cc.Label],CC_labelAdTarget:[cc.Label],CC_labelAdTitle:[cc.Label],CC_labelButton1:[cc.Label],CC_labelButton2:[cc.Label],CC_labelButton3:[cc.Label],CC_labelContent:[cc.Label],CC_layoutBg:[cc.Layout],CC_nodeAdImg:[cc.Node],CC_nodeNative:[cc.Node],CC_nodeParent:[cc.Node],CC_nodeSpine:[cc.Node],CC_nodeTitle:[cc.Node],CC_spriteAd:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buttonClose.node.active=!1,this.labelContent.string=this.context.content||p.default.getText("vPromptOpenStoreDialog.1"),cc.log("---this.context.content =",this.context.content||"");for(var t=[],o=this.context.btnTexts||[],n=0;n<3;n++){var r=this["button"+(n+1)],a=r.node.getComponentInChildren(cc.Label);null!=o[n]?(a.string=o[n],t.push(r.node)):r.node.active=!1}s.default.layoutNodesHorizonCenter(t,10),l.default.registerGuideNode("vPromptOpenStoreDialog.button1",this.button1.node),l.default.registerGuideNode("vPromptOpenStoreDialog.button2",this.button2.node),this.sendMsg("MSG_GUIDE_POINT",{id:"vPromptOpenStoreDialog.onResourceLoaded"});var i=c.default.get("spine","jiesuanwawa");i&&(i.play("mov_1",!0),i.parent=this.nodeSpine,this.spine=i),u.default.showIntAd(null,"inter_open_store_dialog"),this.context.bShowBanner&&u.default.showBannerAd(this.nodeResource,"ad_banner_open_store_dialog"),d.default.registerNativeBannerRefreshFun("ad_native_open_store_dialog",this.adaptNativeAd.bind(this),this.nodeNative)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.spine&&(c.default.put(this.spine),this.spine.removeFromParent(),this.spine=null)},t.prototype.isClickShadowClose=function(){return this.context.btnTexts.length<=0},t.prototype.onCloseDialogStart=function(){this.context.bShowBanner&&u.default.closeBannerAd()},t.prototype.triggerCallback=function(e){var t=(this.context.callbacks||[])[e];null!=t&&t()||this.closeDialog()},t.prototype.adaptNativeAd=function(e){cc.log(e),e?(this.nodeNative.active=!0,this.nodeParent.height=500,this.labelAdTitle.string=e.title||"",this.labelAdContent.string=e.desc||"",this.labelAdTarget.string=e.targetTitle||"",this.spriteAd.spriteFrame=e.spriteFrame,this.spriteAd.node.scale=Math.min(this.nodeAdImg.height/this.spriteAd.node.height,this.nodeAdImg.width/this.spriteAd.node.width)):(this.nodeNative.active=!1,this.nodeParent.height=350)},t.prototype.onTouchButton1=function(e){e.isClick()&&this.triggerCallback(0)},t.prototype.onTouchButton2=function(e){e.isClick()&&this.triggerCallback(1)},t.prototype.onTouchButton3=function(e){e.isClick()&&this.triggerCallback(2)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonAdNative=function(e){},t=r([h],t)}(i.default);o.default=f,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd","../../manager/mgrAdNative":"mgrAdNative","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPool":"mgrPool"}],vPvpPkDialog:[function(e,t,o){"use strict";cc._RF.push(t,"aacab549Q1BPbD7ZLruXMps","vPvpPkDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/utils/Timer"),s=e("../../../ulframework/view/FSMDialogBase"),l=e("../../Const"),c=e("../../manager/mgrAd"),u=e("../../manager/mgrCfg"),d=e("../../manager/mgrDirector"),p=e("../../manager/mgrGuide"),h=e("../../manager/mgrOfflinePvp"),f=e("../../manager/mgrPlayer"),g=e("../../manager/mgrPool"),m=e("../../manager/mgrSound"),_=e("../../manager/mgrStage"),v=e("../../manager/mgrTip"),y=e("../node/vPvpPKItemLeft"),C=e("../node/vPvpPKItemRight"),S=e("../node/vPvpPkItemCenter"),b=e("../../manager/mgrSdk"),R=e("../../manager/mgrChannel"),T=e("../../manager/mgrVideoRecorder"),A=e("../../manager/mgrI18n"),D=cc._decorator.ccclass,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pkPlayerArr=[],t.buttonClose=null,t.buttonRank=null,t.buttonReward=null,t.buttonStart=null,t.labelLikeCount=null,t.labelLikeCountTime=null,t.labelLikeCountTitle=null,t.labelProcessReward=null,t.labelRewardAmount=null,t.labelSubject=null,t.labelTip=null,t.nodeAvatar=null,t.nodeAvatarArea=null,t.nodeBannerArea=null,t.nodeBgParticle1=null,t.nodeBgParticle2=null,t.nodeBottomInfo=null,t.nodeDecorSpecial=null,t.nodeFreeVideoFlag=null,t.nodeGuideLike=null,t.nodeLayoutContent=null,t.nodeParticle=null,t.nodeParticleLeft=null,t.nodeParticleRight=null,t.nodeParticleTop=null,t.nodeParticles=null,t.nodeProgressRewardFlag=null,t.nodeReward=null,t.nodeRewardPower=null,t.nodeSubject=null,t.nodeSubjectContent=null,t.nodeTitle=null,t.nodeUIRoot=null,t.nodeVote=null,t.progressBarReward=null,t.ST_REQUEST_COMMON=1,t.ST_WAIT=2,t.ST_IN=3,t.ST_CHOOSE=4,t.ST_CHOOSE_EFF=5,t.ST_RESULT=6,t.ST_REWARD=7,t.ST_OUT=8,t.ST_NO_DATA=9,t._remainTime=0,t.AD_LIKE_COUNT_NAME="video_pvp_like_time",t.AD_PVP_VOTE_NAME="video_pvpvote_reward",t.AD_INTER_VIEW_NAME="inter_pvp_pk_dialog",t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vPvpPkDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_buttonRank:[a.default,"onTouchButtonRank"],CC_buttonReward:[a.default,"onTouchButtonReward"],CC_buttonStart:[a.default,"onTouchButtonStart"],CC_labelLikeCount:[cc.Label],CC_labelLikeCountTime:[cc.Label],CC_labelLikeCountTitle:[cc.Label],CC_labelProcessReward:[cc.Label],CC_labelRewardAmount:[cc.Label],CC_labelSubject:[cc.Label],CC_labelTip:[cc.Label],CC_nodeAvatar:[cc.Node],CC_nodeAvatarArea:[cc.Node],CC_nodeBannerArea:[cc.Node],CC_nodeBgParticle1:[cc.Node],CC_nodeBgParticle2:[cc.Node],CC_nodeBottomInfo:[cc.Node],CC_nodeDecorSpecial:[cc.Node],CC_nodeFreeVideoFlag:[cc.Node],CC_nodeGuideLike:[cc.Node],CC_nodeLayoutContent:[cc.Node],CC_nodeParticle:[cc.Node],CC_nodeParticleLeft:[cc.Node],CC_nodeParticleRight:[cc.Node],CC_nodeParticleTop:[cc.Node],CC_nodeParticles:[cc.Node],CC_nodeProgressRewardFlag:[cc.Node],CC_nodeReward:[cc.Node],CC_nodeRewardPower:[cc.Node],CC_nodeSubject:[cc.Node],CC_nodeSubjectContent:[cc.Node],CC_nodeTitle:[cc.Node],CC_nodeUIRoot:[cc.Node],CC_nodeVote:[cc.Node],CC_progressBarReward:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){if(e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(d.default.size),this.setContentSize(d.default.size),c.default.isBannerAdValid()){var t=this.nodeUIRoot.getComponent(cc.Widget);t.bottom=c.default.getBannerHeight(),t.updateAlignment(),c.default.showViewEnterAd(this.nodeResource,null,this.AD_INTER_VIEW_NAME,"ad_banner_pvp_pk_dialog")}else c.default.showIntAd(null,this.AD_INTER_VIEW_NAME);this.buttonRank.node.active=!!R.default.isRankEnabled()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t),this.isResourceLoaded()&&(this.refreshRewards(),this.refreshTime())},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.animNode&&(this.animNode.removeFromParent(),g.default.put(this.animNode),this.animNode=null)},t.prototype.onOpenDialogCompleted=function(){this.onLoadedInit()},t.prototype.onCloseDialogStart=function(){c.default.closeBannerAd()},t.prototype.onLoadedInit=function(){this.uiFadeIn(),this.buildUi(),this.registerState(this.ST_REQUEST_COMMON,"onEnterRequestCommon","onExecuteRequestCommon","onLeaveRequestCommon"),this.registerState(this.ST_WAIT,"onEnterWait","onExecuteWait","onLeaveWait"),this.registerState(this.ST_IN,"onEnterIn","onExecuteIn","onLeaveIn"),this.registerState(this.ST_CHOOSE,"onEnterChoose","onExecuteChoose","onLeaveChoose"),this.registerState(this.ST_CHOOSE_EFF,"onEnterChooseEff","onExecuteChooseEff","onLeaveChooseEff"),this.registerState(this.ST_RESULT,"onEnterResult","onExecuteResult","onLeaveResult"),this.registerState(this.ST_REWARD,"onEnterReward","onExecuteReward","onLeaveReward"),this.registerState(this.ST_OUT,"onEnterOut","onExecuteOut","onLeaveOut"),this.registerState(this.ST_NO_DATA,"onEnterNoData","onExecuteNoData","onLeaveNoData"),this.registerListeners({MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this),MSG_PVP_LIKE_SUCCESS:this.onMsgPvpLikeSuccess.bind(this),MSG_PVP_PLAYER_COUNT_CHANGED:this.onMsgPvpPlayerCountChanged.bind(this),MSG_PVP_SELF_DATA_CHANGED:this.onMsgPvpSelfDataChanged.bind(this),MSG_PVP_SUBJECT_CHANGED:this.onMsgPvpSubjectChanged.bind(this),MSG_PVP_UPLOAD_SUCCESS:this.onMsgPvpUploadSuccess.bind(this),MSG_PVP_NO_DATA:this.onMsgPvpNoData.bind(this),MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd.bind(this),MSG_AD_EVENT_FAILD:this.onMsgAdEventFaild.bind(this),MSG_AD_EVENT_CANCELED:this.onMsgAdEventCanceled.bind(this)});""==(f.default.getName()||"")&&d.default.warpDialogWithSmallEffect("vInputNameDialog",{fOnDialogClose:function(){}}),m.default.play(7),m.default.play(706),T.default.stopRecordGameVideo(),this.playUIActionIn(),p.default.registerGuideNode("vPvpPkDialog.nodeReward",this.nodeReward),p.default.registerGuideNode("vPvpPkDialog.buttonStart",this.buttonStart.node),p.default.registerGuideNode("vPvpPkDialog.nodeAvatarArea",this.nodeAvatarArea)},t.prototype.playUIActionIn=function(){var e=this;this.nodeSubject._originPos=this.nodeSubject.position,this.nodeBottomInfo._originPos=this.nodeBottomInfo.position,this.nodeSubject.y+=300,this.nodeSubject.opacity=255,this.nodeSubject.runAction(cc.sequence(cc.delayTime(1),cc.moveTo(.5,this.nodeSubject._originPos).easing(cc.easeElasticOut(1.2)))),this.nodeBottomInfo.y=-500,this.nodeBottomInfo.active=!0,this.nodeBottomInfo.runAction(cc.sequence(cc.delayTime(1),cc.moveTo(.5,this.nodeBottomInfo._originPos).easing(cc.easeElasticOut(1.2)),cc.callFunc(function(){e.buttonStart.node.active=!0,p.default.isGuiding()||e.buttonStart.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.1,1.1),cc.scaleTo(.6,.9,.9),cc.scaleTo(.3,1,1)))),e.buttonClose.node.active=!0,e.buttonClose.node.opacity=0,e.buttonClose.node.runAction(cc.fadeIn(.3))})))},t.prototype.uiFadeIn=function(){var e=this;i.default.callLater(.1,function(){i.default.callLater(.5,function(){e.setNextState(e.ST_REQUEST_COMMON)},e)})},t.prototype.buildUi=function(){this.pkItemLeft=new y.default({fOnClickLike:this.onClickLikeButton.bind(this)}),this.pkItemLeft.parent=this.nodeAvatar,this.pkItemLeft.x=-200,this.pkItemLeft.active=!1,this.pkItemLeft.scale=(c.default.isBannerAdValid(),1),this.pkItemLeft.originPos=this.pkItemLeft.position,this.pkItemRight=new C.default({fOnClickLike:this.onClickLikeButton.bind(this)}),this.pkItemRight.parent=this.nodeAvatar,this.pkItemRight.x=208,this.pkItemRight.active=!1,this.pkItemRight.scale=(c.default.isBannerAdValid(),1),this.pkItemRight.originPos=this.pkItemRight.position,this.pkItemCenter=new S.default({fOnClickLike:this.onClickLikeButton.bind(this)}),this.pkItemCenter.parent=this.nodeAvatar,this.pkItemCenter.y=100,this.pkItemCenter.active=!1,this.pkItemCenter.scale=(c.default.isBannerAdValid(),1),this.pkItemCenter.originPos=this.pkItemCenter.position,this.pkItemCenter.zIndex=-100,this.nodeGuideLike.position=cc.v2(this.pkItemCenter.x,this.pkItemCenter.y-78)},t.prototype.fillData=function(){this.refreshRewards(),this.refreshSubject(),this.refreshTime()},t.prototype.refreshRewards=function(){var e=h.default.getBadgeCount(),t=f.default.getItemAmount(l.default.ITEM_ID_PVP_REWARD_CURR_NUM),o=u.default.get("pvp_like_reward_db",1);o.count;this.progressBarReward.progress=t/o.count,this.labelProcessReward.string=ul.format("%d/%d",t,o.count),this.labelRewardAmount.string=ul.format("%s",o.rewardAmount||0);var n=h.default.getAdLikeCount();this.labelLikeCount.string=n&&n>=e?"5":""+h.default.getLikeCount()[0],this.nodeProgressRewardFlag.x=this.progressBarReward.progress*this.progressBarReward.node.width-this.progressBarReward.node.width/2,this.nodeProgressRewardFlag.opacity=0!=this.progressBarReward.progress?255:0},t.prototype.refreshSubject=function(){if(this.nodeSubjectContent.removeAllChildren(),h.default.seasonSubjectId){var e=u.default.get("pvp_offline_subject_db",h.default.seasonSubjectId)||{};this.labelSubject.string=ul.format("\u672c\u5468\u4e3b\u9898:%s",e.name||"")}else this.labelSubject.string=ul.format("\u5468\u6bd4\u8d5b")},t.prototype.refreshTime=function(){var e=h.default.getBadgeCount(),t=h.default.getAdLikeCount();if(t&&t>=e?(this.nodeFreeVideoFlag.active=!0,this.labelLikeCountTitle.setLocalizedString("vPvpPkDialog.4")):(this.nodeFreeVideoFlag.active=!1,this.labelLikeCountTitle.setLocalizedString("vPvpPkDialog.1")),this.labelLikeCountTime.string="",e<=0){var o=h.default.getLikeCount(),n=o[0];o[1];this.labelLikeCountTime.node.active=!n;var r=f.default.getRecoverRemainTime(l.default.ITEM_ID_PVP_LIKE_COUNT);if(r){var a=Math.floor(r/60),i=r%60;this.labelLikeCountTime.string=ul.format("( %d:%02d )",a,i)}else this.labelLikeCountTime.string=""}},t.prototype.prepareEnterIn=function(){return!(!this.pkPlayerArr||this.pkPlayerArr.length<=0)&&(this.fillPlayers(this.pkPlayerArr),this.setNextState(this.ST_IN),!0)},t.prototype.fillPlayers=function(e){this.pkItemLeft.fillByPlayer(e[0]),this.pkItemCenter.fillByPlayer(e[1]),this.pkItemRight.fillByPlayer(e[2])},t.prototype.onEnterRequestCommon=function(){this.labelTip.setLocalizedString("vPvpPkDialog.5"),this.labelTip.node.active=!0,this.fillData(),this.setNextState(this.ST_REWARD)},t.prototype.onExecuteRequestCommon=function(e){},t.prototype.onLeaveRequestCommon=function(){this.labelTip.node.active=!1},t.prototype.onEnterWait=function(){this.fillPlayers([]),this.labelTip.setLocalizedString("vPvpPkDialog.5"),this.labelTip.node.active=!0,this.pkPlayerArr=h.default.getPkList(),this.prepareEnterIn()},t.prototype.onExecuteWait=function(e){},t.prototype.onLeaveWait=function(){this.labelTip.node.active=!1},t.prototype.onEnterIn=function(){var e=this,t=this.pkItemLeft;t.active=!0,t.position=cc.v2(t.originPos.x-d.default.size.width,0),t.runAction(cc.sequence(cc.delayTime(.2),cc.moveTo(.3,t.originPos).easing(cc.easeBackOut()),cc.callFunc(function(){m.default.play(154),e.setNextState(e.ST_CHOOSE)}))),t.setButtonLikeText("+1"),(t=this.pkItemCenter).active=!0,t.position=cc.v2(t.originPos.x-d.default.size.width,t.originPos.y),t.runAction(cc.sequence(cc.delayTime(.1),cc.moveTo(.3,t.originPos).easing(cc.easeBackOut()),cc.callFunc(function(){m.default.play(154)}))),t.setButtonLikeText("+1"),(t=this.pkItemRight).active=!0,t.position=cc.v2(t.originPos.x+d.default.size.width,0),t.runAction(cc.sequence(cc.delayTime(.2),cc.moveTo(.3,t.originPos).easing(cc.easeBackOut()),cc.callFunc(function(){m.default.play(154)}))),t.setButtonLikeText("+1")},t.prototype.onExecuteIn=function(e){},t.prototype.onLeaveIn=function(){},t.prototype.onEnterChoose=function(){},t.prototype.onExecuteChoose=function(e){f.default.getName()&&!this.bGuided&&(this.bGuided=!0,p.default.registerGuideNode("vPvpPkDialog.centerAvatar",this.nodeGuideLike),this.sendMsg("MSG_GUIDE_POINT",{id:"vPvpPkDialog.onJageButtonEntered"}))},t.prototype.onLeaveChoose=function(){},t.prototype.onEnterChooseEff=function(){this.pkItemLeft.setFollowFlag(!0),this.pkItemCenter.setFollowFlag(!0),this.pkItemRight.setFollowFlag(!0),this.pkItemLeft.player.uid==this._lastRequestLikePlayer.uid?this.pkItemLeft.happy():this.pkItemRight.player.uid==this._lastRequestLikePlayer.uid?this.pkItemRight.happy():this.pkItemCenter.happy(),this.requestServerPvpLike(this._lastRequestLikePlayer.uid),this._remainTime=0},t.prototype.onExecuteChooseEff=function(e){},t.prototype.onLeaveChooseEff=function(){},t.prototype.onEnterResult=function(){this.tryTriggerLikeAd();var e=this.pkItemLeft;e.player.score=e.player.score||0,e.player.uid==this._lastRequestLikePlayer?(e.player.score++,e.setButtonLikeText(e.player.score.toString())):e.setButtonLikeText(e.player.score.toString()),e.setFollowFlag(!0),(e=this.pkItemCenter).player.score=e.player.score||0,e.player.uid==this._lastRequestLikePlayer?(e.player.score++,e.setButtonLikeText(e.player.score.toString())):e.setButtonLikeText(e.player.score.toString()),e.setFollowFlag(!0),(e=this.pkItemRight).player.score=e.player.score||0,e.player.uid==this._lastRequestLikePlayer?(e.player.score++,e.setButtonLikeText(e.player.score.toString())):e.setButtonLikeText(e.player.score.toString()),e.setFollowFlag(!0),this._remainTime=1},t.prototype.onExecuteResult=function(e){this._remainTime=this._remainTime-e,this._remainTime<=0&&this.setNextState(this.ST_REWARD)},t.prototype.onLeaveResult=function(){},t.prototype.doReceiveVoteReward=function(e){void 0===e&&(e=!1);var t=u.default.get("pvp_like_reward_db",1),o={rewardItemId:t.rewardItemId,rewardAmount:t.rewardAmount};e&&(o.rewardAmount*=3),f.default.addItemAmount(o.rewardItemId,o.rewardAmount,e?"\u5468\u6bd4\u8d5b\u6295\u7968_\u5e7f\u544a":"\u5468\u6bd4\u8d5b\u6295\u7968"),v.default.addGotItemTip(o.rewardItemId,o.rewardAmount),this.nodeRewardPower.stopAllActions(),this.nodeRewardPower.scale=1},t.prototype.onEnterReward=function(){cc.log("vPvpPkDialog.onEnterReward"),u.default.get("pvp_like_reward_db",1).count<=f.default.getItemAmount(l.default.ITEM_ID_PVP_REWARD_CURR_NUM)?this.nodeRewardPower.getNumberOfRunningActions()<=0&&(m.default.play(735),this.nodeRewardPower.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.1,1.1),cc.scaleTo(.6,.9,.9),cc.scaleTo(.3,1,1))))):(this.nodeRewardPower.stopAllActions(),this.nodeRewardPower.scale=1),this.setNextState(this.ST_OUT)},t.prototype.onExecuteReward=function(e){},t.prototype.onLeaveReward=function(){},t.prototype.onEnterOut=function(){var e=this;if(this.pkItemLeft.active){m.default.play(155);var t=this.pkItemLeft;t.active=!0,t.runAction(cc.sequence(cc.moveTo(.3,cc.v2(t.originPos.x-d.default.size.width,0)).easing(cc.easeOut(1.5)),cc.callFunc(function(){m.default.play(156),e.setNextState(e.ST_WAIT)}))),(t=this.pkItemCenter).active=!0,t.runAction(cc.sequence(cc.moveTo(.3,cc.v2(t.originPos.x+d.default.size.width,t.originPos.y)).easing(cc.easeOut(1.5)),cc.callFunc(function(){m.default.play(156)}))),(t=this.pkItemRight).active=!0,t.runAction(cc.sequence(cc.moveTo(.3,cc.v2(t.originPos.x+d.default.size.width,0)).easing(cc.easeOut(1.5)),cc.callFunc(function(){m.default.play(156)})))}else this.setNextState(this.ST_WAIT)},t.prototype.onExecuteOut=function(e){},t.prototype.onLeaveOut=function(){},t.prototype.onEnterNoData=function(){this.labelTip.setLocalizedString("vPvpPkDialog.6"),this.labelTip.node.active=!0},t.prototype.onExecuteNoData=function(e){},t.prototype.onLeaveNoData=function(){this.labelTip.node.active=!1},t.prototype.addChooseEffect=function(e){var t=g.default.get("particle","41_water_boom");t&&(t.parent=e.parent,t.position=e.position,t.setAutoRemoveOnFinish(!0));var o=g.default.get("particle","result_bao2");o&&(o.parent=e.parent,o.position=e.position,o.setAutoRemoveOnFinish(!0));g.default.get("animNode","41_zhadan_boom")},t.prototype.onClickLikeButton=function(e,t){var o=this;this.sendMsg("MSG_GUIDE_POINT",{id:"vPvpPkDialog.buttonLike.click"});var n=h.default.getBadgeCount();if(n<=0)return v.default.showMsgTip(A.default.getText("vPvpPkDialog.7")),void m.default.play(726);f.default.addItemAmount(914,1,"\u4efb\u52a1\u7269\u54c1"),t&&t(),m.default.play(151),this._lastRequestLikePlayer=e;var r=h.default.getAdLikeCount();if(r&&r>=n){var a={contentStr:A.default.getText("vPvpPkDialog.8"),btnVideoStr:A.default.getText("vPvpPkDialog.9"),btnRefuseStr:null,fOnClickRefused:function(){},fOnClickVideo:function(){c.default.triggerAdEvent(o.AD_LIKE_COUNT_NAME,null,!0)},bNotShowOnline:!0};d.default.warpDialogWithSmallEffect("vPromptAdDialog",a)}else this.setNextState(this.ST_CHOOSE_EFF)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&d.default.warpDialogWithEffect("vHudDialog")},t.prototype.onTouchButtonRank=function(e){if(e.isClick()){var t=h.default.getPvpDatas();!t||t.length<=0?v.default.showMsgTip(A.default.getText("vPvpPkDialog.10")):d.default.warpDialogWithEffect("vHudRankDialog",{backSceneName:"vPvpPkDialog"})}},t.prototype.onTouchButtonStart=function(e){e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"vPvpPkDialog.buttonStart.click"}),_.default.beginStage(2001,{backSceneName:"vPvpPkDialog"}))},t.prototype.onTouchButtonReward=function(e){var t=this;if(e.isClick()){this.sendMsg("MSG_GUIDE_POINT",{id:"vPvpPkDialog.buttonReward.click"});var o=u.default.get("pvp_like_reward_db",1);if(o.count<=f.default.getItemAmount(l.default.ITEM_ID_PVP_REWARD_CURR_NUM))if(h.default.reduceRewardCount(o.count),c.default.preCheckCanTriggerAdEvent(this.AD_PVP_VOTE_NAME)){var n=o.rewardAmount,r={itemId:o.rewardItemId,amount:n,times:3,isShowProgress:1==b.default.getCopNumberValueByKey("b_show_ad_reward_dialog_count_down"),fOnClickRefused:function(){t.doReceiveVoteReward()},fOnClickVideo:function(){c.default.triggerAdEvent(t.AD_PVP_VOTE_NAME,null,!0)}};d.default.warpDialogWithSmallEffect("vPromptAdRewardDialog",r)}else this.doReceiveVoteReward();else v.default.showMsgTip(A.default.getText("vPvpPkDialog.11"))}},t.prototype.tryTriggerLikeAd=function(){},t.prototype.requestServerPvpLike=function(e){h.default.like(e),this.onMsgPvpLikeSuccess({})},t.prototype.onMsgItemAmountChanged=function(e){},t.prototype.onMsgPvpLikeSuccess=function(e){this.setNextState(this.ST_RESULT)},t.prototype.onMsgPvpPlayerCountChanged=function(e){this.getState()==this.ST_NO_DATA&&(this.setNextState(this.ST_REQUEST_COMMON),this.update(0))},t.prototype.onMsgPvpSelfDataChanged=function(e){},t.prototype.onMsgPvpSubjectChanged=function(e){this.refreshSubject()},t.prototype.onMsgPvpUploadSuccess=function(e){},t.prototype.onMsgPvpNoData=function(e){this.setNextState(this.ST_NO_DATA)},t.prototype.onMsgAdEventSuccessd=function(e){var t=e.adEventId;t==this.AD_LIKE_COUNT_NAME?h.default.addLikeCount(5,"\u770b\u5e7f\u544a"):t==this.AD_PVP_VOTE_NAME&&this.doReceiveVoteReward(!0)},t.prototype.onMsgAdEventFaild=function(e){var t=e.adEventId;t==this.AD_LIKE_COUNT_NAME||t==this.AD_PVP_VOTE_NAME&&this.doReceiveVoteReward()},t.prototype.onMsgAdEventCanceled=function(e){this.onMsgAdEventFaild(e)},t.prototype.isClickShadowClose=function(){return!1},t=r([D],t)}(s.default);o.default=I,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/view/FSMDialogBase":"FSMDialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrChannel":"mgrChannel","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n","../../manager/mgrOfflinePvp":"mgrOfflinePvp","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrPool":"mgrPool","../../manager/mgrSdk":"mgrSdk","../../manager/mgrSound":"mgrSound","../../manager/mgrStage":"mgrStage","../../manager/mgrTip":"mgrTip","../../manager/mgrVideoRecorder":"mgrVideoRecorder","../node/vPvpPKItemLeft":"vPvpPkItemLeft","../node/vPvpPKItemRight":"vPvpPkItemRight","../node/vPvpPkItemCenter":"vPvpPkItemCenter"}],vPvpPkItemCenter:[function(e,t,o){"use strict";cc._RF.push(t,"19766pzBD1C/rZzPWGNlp+2","vPvpPkItemCenter");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./vPvpPkItemLeft"),i=cc._decorator.ccclass,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"node/vPvpPkItemCenter"},t=r([i],t)}(a.default);o.default=s,cc._RF.pop()},{"./vPvpPkItemLeft":"vPvpPkItemLeft"}],vPvpPkItemLeft:[function(e,t,o){"use strict";cc._RF.push(t,"38ac7l2BuBAmbxu3N2/IUib","vPvpPkItemLeft");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/ViewBase"),c=e("../../manager/mgrDirector"),u=e("../../struct/sAvatar"),d=e("../../manager/mgrPool"),p=e("../../manager/mgrI18n"),h=cc._decorator.ccclass,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.player=null,t.structAvatar=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vPvpPkItemLeft"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonLike:[s.default,"onTouchButtonLike"],CC_labelName:[cc.Label],CC_labelScore:[cc.Label],CC_nodeAvatar:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buttonLike.setSingleTouchGap(2),this.nodeAvatar.scaleX*=1.3,this.nodeAvatar.scaleY*=1.3},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillByPlayer=function(e){return a(this,void 0,void 0,function(){var t;return i(this,function(o){return this.bFollowed=!1,this.player=e,this.nodeAvatar.active=!0,this.player?(this.structAvatar||(t=new u.default,this.structAvatar=t,this.viewAvatar=c.default.createView("vAvatar",{structAvatar:this.structAvatar}),this.viewAvatar.parent=this.nodeAvatar,this.viewAvatar.setPreloadDelayRefresh(!0)),this.structAvatar.fillBySerializeText(this.player.data),this.viewAvatar.refreshAll(),this.labelName.string=this.player.name||p.default.getText("vPvpPkItemLeft.1"),[2]):(this.nodeAvatar.active=!1,[2])})})},t.prototype.happy=function(){this.viewAvatar.onCmd("CMD_AVATAR_HAPPY")},t.prototype.sad=function(){this.viewAvatar.onCmd("CMD_AVATAR_SAD")},t.prototype.setButtonLikeText=function(e){this.context.buttonlabel=e,e=this.context.buttonlabel,this.labelScore.string=e},t.prototype.setFollowFlag=function(e){this.bFollowed=e},t.prototype.playLikeEffect=function(){var e=d.default.get("animNode","69_huanzhuang2");e&&(e.parent=this.nodeAvatar,e.scale=.6,e.position=cc.v2(0,150),e.play(),e.registerEventCallback(function(t){"finished"==t.name&&(e.removeFromParent(),d.default.put(e),e=null)}))},t.prototype.onTouchButtonLike=function(e){var t=this;e.isClick()&&!this.bFollowed&&this.context.fOnClickLike&&this.context.fOnClickLike(this.player,function(){t.playLikeEffect()})},r([l.default.requireResourceLoaded],t.prototype,"fillByPlayer",null),r([l.default.requireResourceLoaded],t.prototype,"setButtonLikeText",null),t=r([h],t)}(l.default);o.default=f,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrDirector":"mgrDirector","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPool":"mgrPool","../../struct/sAvatar":"sAvatar"}],vPvpPkItemRight:[function(e,t,o){"use strict";cc._RF.push(t,"7c1e5K48dJNhKVqYuNMeKIq","vPvpPkItemRight");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./vPvpPkItemLeft"),i=cc._decorator.ccclass,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"node/vPvpPkItemRight"},t=r([i],t)}(a.default);o.default=s,cc._RF.pop()},{"./vPvpPkItemLeft":"vPvpPkItemLeft"}],vRankItem:[function(e,t,o){"use strict";cc._RF.push(t,"adafahrLExF2YizKcICZJuh","vRankItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/ViewBase"),c=cc._decorator.ccclass,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBg=null,t.labelNameNormal=null,t.labelNameSelected=null,t.labelRankNormal=null,t.labelRankSelected=null,t.labelScoreNormal=null,t.labelScoreSelected=null,t.nodeNormal=null,t.nodeRank1=null,t.nodeSelected=null,t.player=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vRankItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBg:[s.default,"onTouchButtonBg"],CC_labelNameNormal:[cc.Label],CC_labelNameSelected:[cc.Label],CC_labelRankNormal:[cc.Label],CC_labelRankSelected:[cc.Label],CC_labelScoreNormal:[cc.Label],CC_labelScoreSelected:[cc.Label],CC_nodeNormal:[cc.Node],CC_nodeRank1:[cc.Node],CC_nodeSelected:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillByPlayer=function(e){return a(this,void 0,void 0,function(){var t;return i(this,function(o){return this.player=e,this.buttonBg.node.active=!0,e=this.player,t=e.rank||0,this.nodeRank1.active=1==t,this.labelRankSelected.node.active=1!=t,this.labelRankSelected.string=t.toString(),this.labelNameSelected.string=e.name,this.labelScoreSelected.string=ul.format("%d",e.score),this.labelRankNormal.string=t.toString(),this.labelNameNormal.string=e.name,this.labelScoreNormal.string=ul.format("%d",e.score),this.setNo1(1==t),[2]})})},t.prototype.setSelected=function(e){return a(this,void 0,void 0,function(){return i(this,function(e){return[2]})})},t.prototype.setNo1=function(e){return a(this,void 0,void 0,function(){var t;return i(this,function(o){return t=this.player,t.rank||0,this.nodeNormal.active=!e,this.nodeSelected.active=e,[2]})})},t.prototype.onTouchButtonBg=function(e){e.isClick()&&this.context.fOnClick&&this.context.fOnClick(this.player)},r([l.default.requireResourceLoaded],t.prototype,"fillByPlayer",null),r([l.default.requireResourceLoaded],t.prototype,"setSelected",null),r([l.default.requireResourceLoaded],t.prototype,"setNo1",null),t=r([c],t)}(l.default);o.default=u,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase"}],vResearchStaffHead:[function(e,t,o){"use strict";cc._RF.push(t,"4640dMGdj5PmZ0Ym4ARwg6J","vResearchStaffHead");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrBuildingResearch"),l=e("../../../ulframework/utils/Timer"),c=e("../../manager/mgrPlayer"),u=e("../../manager/mgrTip"),d=cc._decorator,p=d.ccclass,h=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonHead=null,t.labelRemainTime=null,t.nodeLock=null,t.nodeRemainTime=null,t.spriteIcon=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vResearchStaffHead"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonHead:[a.default,"onTouchButtonHead"],CC_labelRemainTime:[cc.Label],CC_nodeLock:[cc.Node],CC_nodeRemainTime:[cc.Node],CC_spriteIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onLoadedInit=function(){this.spriteIcon.loadSpriteFrameAndKeepSize(this.context.employee.template.icon),this.onTimerLoop(),this.registerListeners({MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged}),l.default.callLoop(1,this.onTimerLoop.bind(this),this)},t.prototype.onTimerLoop=function(){var e=this.context.employee.level>0;this.nodeLock.active=!e;var t=s.default.getResearchRemainTime(this.context.employee.id);this.nodeRemainTime.active=!!(e&&t&&t>0),this.labelRemainTime.string=c.default.getFormatedTimeStr(t);var o=s.default.getStaffResearchBadgeCount(this.context.employee.id)>0;u.default.setBadgeEnabled(this,o,30,30),u.default.setBadgeParticleEnabled(this,o)},t.prototype.onMsgItemAmountChanged=function(e){},t.prototype.onTouchButtonHead=function(e){e.isClick()&&this.context.fOnClick&&this.context.fOnClick(this.context.employee.id)},t=r([p],t)}(i.default));o.default=h,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrBuildingResearch":"mgrBuildingResearch","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrTip":"mgrTip"}],vRoomDialog:[function(e,t,o){"use strict";cc._RF.push(t,"6e750CZizlLfpSkToCQL379","vRoomDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/component/ToggleButton"),s=e("../../../ulframework/utils/Timer"),l=e("../../../ulframework/utils/Tools"),c=e("../../../ulframework/view/DialogBase"),u=e("../../../ulframework/view/ReuseLayouterVGrid"),d=e("../../../ulframework/view/ReuseList"),p=e("../../Const"),h=e("../../manager/mgrAd"),f=e("../../manager/mgrCfg"),g=e("../../manager/mgrCosmetic"),m=e("../../manager/mgrDirector"),_=e("../../manager/mgrGuide"),v=e("../../manager/mgrOfflinePvp"),y=e("../../manager/mgrPacking"),C=e("../../manager/mgrPlayer"),S=e("../../manager/mgrPool"),b=e("../../manager/mgrSdk"),R=e("../../manager/mgrShop"),T=e("../../manager/mgrSound"),A=e("../../manager/mgrStatics"),D=e("../../manager/mgrTip"),I=e("../../struct/sAvatar"),w=e("../node/vRoomListItemPart"),L=e("../../manager/mgrEffect"),P=e("../../manager/mgrChannel"),k=e("../../manager/mgrVideoRecorder"),E=e("../../manager/mgrI18n"),N=cc._decorator.ccclass,O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.trialStandbyPartDict={},t.trialingPartDict={},t.TRIAL_PART_NUM=4,t.lastPlayCommentSoundTime=0,t.bannerOpenedFlag=1,t.buttonAlubm=null,t.buttonBack=null,t.buttonMoreGameBox=null,t.buttonShare=null,t.buttonShop=null,t.buttonSubmit=null,t.labelButtonSubmit=null,t.labelDebugTip=null,t.labelName=null,t.labelOriginPrice=null,t.labelProgressSubjectTag1=null,t.labelProgressSubjectTag2=null,t.labelProgressSubjectTag3=null,t.labelProgressSubjectTag4=null,t.labelProgressSubjectTag5=null,t.labelProgressSubjectTag6=null,t.labelSubjectTemplate=null,t.labelSuggestPrice=null,t.labelTitle=null,t.nodeAvatar=null,t.nodeAvatarBase=null,t.nodeBannerArea=null,t.nodeBaseType11=null,t.nodeBaseType13=null,t.nodeBaseType14=null,t.nodeBaseType15=null,t.nodeBaseType16=null,t.nodeBaseType17=null,t.nodeBrush=null,t.nodeBrushAnchor=null,t.nodeCenterTop=null,t.nodeCompleteCamera=null,t.nodeLayoutContent=null,t.nodeLeftTop=null,t.nodeLight=null,t.nodeListPart=null,t.nodeNoPart=null,t.nodePartSubjectInfo=null,t.nodePartSubjectInfoGuide=null,t.nodePartSubjectInfobak=null,t.nodePartType1=null,t.nodePartType2=null,t.nodeParticle=null,t.nodeRightBottom=null,t.nodeRootPart=null,t.nodeSubject=null,t.nodeSubjectArea=null,t.nodeSubjectContent=null,t.nodeSubjectMode=null,t.nodeSubjectModeBase=null,t.nodeTitle=null,t.nodeTypeDressedFlag11=null,t.nodeTypeDressedFlag13=null,t.nodeTypeDressedFlag14=null,t.nodeTypeDressedFlag15=null,t.nodeTypeDressedFlag16=null,t.nodeTypeDressedFlag17=null,t.nodeUIRoot=null,t.nodeWater4399=null,t.progressBarSubjectTag1=null,t.progressBarSubjectTag2=null,t.progressBarSubjectTag3=null,t.progressBarSubjectTag4=null,t.progressBarSubjectTag5=null,t.progressBarSubjectTag6=null,t.spriteBg=null,t.spriteSubmitNormal=null,t.spriteSubmitPvp=null,t.toggleButtonType11=null,t.toggleButtonType13=null,t.toggleButtonType14=null,t.toggleButtonType15=null,t.toggleButtonType16=null,t.toggleButtonType17=null,t.AD_TRIAL_NAME="video_room_trail_part",t.AD_INTER_VIEW_NAME="inter_room_dialog",t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vRoomDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonAlubm:[a.default,"onTouchButtonAlubm"],CC_buttonBack:[a.default,"onTouchButtonBack"],CC_buttonMoreGameBox:[a.default,"onTouchButtonMoreGameBox"],CC_buttonShare:[a.default,"onTouchButtonShare"],CC_buttonShop:[a.default,"onTouchButtonShop"],CC_buttonSubmit:[a.default,"onTouchButtonSubmit"],CC_toggleButtonType11:[i.default,"onTouchToggleButtonType11"],CC_toggleButtonType13:[i.default,"onTouchToggleButtonType13"],CC_toggleButtonType14:[i.default,"onTouchToggleButtonType14"],CC_toggleButtonType15:[i.default,"onTouchToggleButtonType15"],CC_toggleButtonType16:[i.default,"onTouchToggleButtonType16"],CC_toggleButtonType17:[i.default,"onTouchToggleButtonType17"],CC_labelButtonSubmit:[cc.Label],CC_labelDebugTip:[cc.Label],CC_labelName:[cc.Label],CC_labelOriginPrice:[cc.Label],CC_labelProgressSubjectTag1:[cc.Label],CC_labelProgressSubjectTag2:[cc.Label],CC_labelProgressSubjectTag3:[cc.Label],CC_labelProgressSubjectTag4:[cc.Label],CC_labelProgressSubjectTag5:[cc.Label],CC_labelProgressSubjectTag6:[cc.Label],CC_labelSubjectTemplate:[cc.Label],CC_labelSuggestPrice:[cc.Label],CC_labelTitle:[cc.Label],CC_nodeAvatar:[cc.Node],CC_nodeAvatarBase:[cc.Node],CC_nodeBannerArea:[cc.Node],CC_nodeBaseType11:[cc.Node],CC_nodeBaseType13:[cc.Node],CC_nodeBaseType14:[cc.Node],CC_nodeBaseType15:[cc.Node],CC_nodeBaseType16:[cc.Node],CC_nodeBaseType17:[cc.Node],CC_nodeBrush:[cc.Node],CC_nodeBrushAnchor:[cc.Node],CC_nodeCenterTop:[cc.Node],CC_nodeCompleteCamera:[cc.Node],CC_nodeLayoutContent:[cc.Node],CC_nodeLeftTop:[cc.Node],CC_nodeLight:[cc.Node],CC_nodeListPart:[cc.Node],CC_nodeNoPart:[cc.Node],CC_nodePartSubjectInfo:[cc.Node],CC_nodePartSubjectInfoGuide:[cc.Node],CC_nodePartSubjectInfobak:[cc.Node],CC_nodePartType1:[cc.Node],CC_nodePartType2:[cc.Node],CC_nodeParticle:[cc.Node],CC_nodeRightBottom:[cc.Node],CC_nodeRootPart:[cc.Node],CC_nodeSubject:[cc.Node],CC_nodeSubjectArea:[cc.Node],CC_nodeSubjectContent:[cc.Node],CC_nodeSubjectMode:[cc.Node],CC_nodeSubjectModeBase:[cc.Node],CC_nodeTitle:[cc.Node],CC_nodeTypeDressedFlag11:[cc.Node],CC_nodeTypeDressedFlag13:[cc.Node],CC_nodeTypeDressedFlag14:[cc.Node],CC_nodeTypeDressedFlag15:[cc.Node],CC_nodeTypeDressedFlag16:[cc.Node],CC_nodeTypeDressedFlag17:[cc.Node],CC_nodeUIRoot:[cc.Node],CC_nodeWater4399:[cc.Node],CC_progressBarSubjectTag1:[cc.ProgressBar],CC_progressBarSubjectTag2:[cc.ProgressBar],CC_progressBarSubjectTag3:[cc.ProgressBar],CC_progressBarSubjectTag4:[cc.ProgressBar],CC_progressBarSubjectTag5:[cc.ProgressBar],CC_progressBarSubjectTag6:[cc.ProgressBar],CC_spriteBg:[cc.Sprite],CC_spriteSubmitNormal:[cc.Sprite],CC_spriteSubmitPvp:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(m.default.size),this.setContentSize(m.default.size),h.default.closeBannerAd(),h.default.showIntAd("\u642d\u914d\u754c\u9762",this.AD_INTER_VIEW_NAME),this.context.stageId=this.context.stageId||2003,0==C.default.getItemAmount(p.default.ITEM_ID_ENTER_PRODUCT_RESULT_COUNT)&&(this.selectedPartType=13),this.stage=f.default.get("stage_db",this.context.stageId),this.labelTitle.string=this.stage.name||this.stage.shortName||"",this.nodeSubjectModeBase.active=!1,this.genStandbyTrialParts(),this.buildUi(),this.afterInitUi(),this.playUIActionIn(),b.default.isOpenVideoRecord()&&k.default.tryStartRecordGameVideo()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.animNode&&(this.animNode.removeFromParent(),S.default.put(this.animNode),this.animNode=null)},t.prototype.onOpenDialogCompleted=function(){var e=this;s.default.callLater(.5,function(){e.onLoadedInit(),e.stage.script.isEnableRecordVideo()&&k.default.tryStartRecordGameVideo()})},t.prototype.onCloseDialogStart=function(){h.default.closeBannerAd()},t.prototype.onLoadedInit=function(){cc.log("----------vroomdialog.onloadedinit"),this.nodeWater4399.active=!!P.default._is4399Watermark,this.registerListeners({MSG_DEBUG_KEY_DOWN:this.onMsgDebugKeyDown.bind(this),MSG_NETWORKE_RESPONSE:this.onMsgNetworkResponse.bind(this),MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this),MSG_PVP_UPLOAD_SUCCESS:this.onMsgPvpUploadSuccess.bind(this),MSG_STAGE_RECOMMEND_CHANGED:this.onMsgStageRecommendChanged.bind(this),MSG_RELOAD_SPECIAL_STYLE:this.onMsgReloadSpecialStyle.bind(this),MSG_ROOM_DRESS_PARTS:this.onMsgDressParts.bind(this),MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd.bind(this),MSG_AD_EVENT_FAILD:this.onMsgAdEventFaild.bind(this),MSG_AD_EVENT_CANCELED:this.onMsgAdEventCanceled.bind(this)}),T.default.play(6),_.default.registerGuideNode("vRoomDialog.buttonShop",this.buttonShop.node),_.default.registerGuideNode("vRoomDialog.buttonSubmit",this.buttonSubmit.node),_.default.registerGuideNode("vRoomDialog.nodePartSubjectInfoGuide",this.nodePartSubjectInfoGuide),this.tryGuide(),this.updateSubjectdScoreInfo()},t.prototype.onTouchButtonBack=function(e){e.isClick()&&this.stage.script.onTouchButtonBack(this)},t.prototype.onTouchButtonShare=function(e){e.isClick()&&(C.default.addItemAmount(911,1,"\u4efb\u52a1\u7269\u54c1"),D.default.showMsgTip("\u529f\u80fd\u5f00\u53d1\u4e2d"))},t.prototype.onTouchButtonShop=function(e){e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"vRoomDialog.buttonShop.click"}),this.stage.script.showShopDialog(this))},t.prototype.onTouchButtonSubmit=function(e){e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"vRoomDialog.buttonSubmit.click"}),this.finishGame())},t.prototype.onTouchButtonSkill1=function(e){var t=this;if(e.isClick()&&this.selectedPetId){var o={bEnabledShaodow:!0,petId:this.selectedPetId,fOnDialogClose:function(){t.hoverDialog=null}};m.default.openDialog("vRoomPetDetailDialog",o)}},t.prototype.onTouchButtonSkill2=function(e){var t=this;if(e.isClick()&&this.selectedPetId){var o={bEnabledShaodow:!0,petId:this.selectedPetId,fOnDialogClose:function(){t.hoverDialog=null}};m.default.openDialog("vRoomPetDetailDialog",o)}},t.prototype.onTouchButtonAlubm=function(e){e.isClick()&&m.default.warpDialogWithSmallEffect("vSubjectSuitDressDialog",{packingId:this.context.packingId,bFromRoom:!0})},t.prototype.onTouchToggleButtonType11=function(e){e.isClick()&&this.onClickPartType(11)},t.prototype.onTouchToggleButtonType13=function(e){e.isClick()&&this.onClickPartType(13)},t.prototype.onTouchToggleButtonType14=function(e){e.isClick()&&this.onClickPartType(14)},t.prototype.onTouchToggleButtonType15=function(e){e.isClick()&&this.onClickPartType(15)},t.prototype.onTouchToggleButtonType16=function(e){e.isClick()&&this.onClickPartType(16)},t.prototype.onTouchToggleButtonType17=function(e){e.isClick()&&this.onClickPartType(17)},t.prototype.onTouchButtonBackResult=function(e){e.isClick()&&this.stage.script.onResultSceneFinished(this)},t.prototype.onTouchButtonShowing=function(e){if(e.isClick()){for(var t=this.context.structAvatar.serializeToText(),o=y.default.getSortedPackings(),n=o.length,r=0;r<n;r++){var a=o[r];if(!(a.level<=0)){var i=y.default.getPackingAvatarStr(a.id);if(!i||""==i)return y.default.isUnpackAvatar(t)?void(y.default.setPackingAvatar(a.id,t)?D.default.showMsgTip("vRoomDialog.12"):D.default.showMsgTip("vRoomDialog.13")):void D.default.showMsgTip("vRoomDialog.11")}}m.default.warpDialogWithSmallEffect("vSelectPackingDialog",{avatarStr:t})}},t.prototype.onTouchButtonMoreGameBox=function(e){e.isClick()&&b.default.openChannelMoreGameBox()},t.prototype.refreshPartTypeStatus=function(e){var t={11:this.toggleButtonType11,13:this.toggleButtonType13,14:this.toggleButtonType14,15:this.toggleButtonType15,16:this.toggleButtonType16,17:this.toggleButtonType17};for(var o in t){t[o].setPressStatus(!1)}var n=t[e];n.setPressStatus(!0),n.node.runAction(cc.sequence(cc.scaleTo(.1,1.2,1.2),cc.scaleTo(.1,1,1)))},t.prototype.updateSubjectdScoreInfo=function(){if(this.nodePartSubjectInfo.opacity=0,this.nodePartSubjectInfobak.opacity=0,this.context.packingId){this.nodePartSubjectInfo.opacity=255;var e=y.default.getPacking(this.context.packingId),t=g.default.getSubjectByPackingId(this.context.packingId),o=g.default.getAvatarScoreBySubjectId(this.structAvatar,t);this.labelSuggestPrice.string=ul.format("%s",C.default.getItemAmountStr(Math.ceil(o+e.template.productGoldNumRatio/1e4*o)));var n=new I.default;n.fillBySerializeText(this.context.avatarStr);var r=g.default.getAvatarScoreBySubjectId(n,t);this.labelOriginPrice.string=ul.format(E.default.getText("vRoomDialog.5"),C.default.getItemAmountStr(Math.ceil(r+e.template.productGoldNumRatio/1e4*r)))}if("StageScriptPvp"==this.stage.scriptName||"StageScriptPkMirror"==this.stage.scriptName){this.nodePartSubjectInfobak.opacity=255;var a=f.default.getDb("cosmetic_subject_tag_db");for(var i in a){t=a[i].id;var s=(o=g.default.getAvatarScoreBySubjectId(this.structAvatar,t))/1500,l=this["progressBarSubjectTag"+t],c=this["labelProgressSubjectTag"+t];l&&c&&(l.progress=Math.min(1,s),c.string=ul.format("%s",Math.floor(100*s)))}}},t.prototype.afterInitUi=function(){this.stage.script.onRoomSceneLoaded(this),this.labelButtonSubmit.string=this.stage.script.getCommitButtonText(),R.default.showRouterTargetWithDialog(101,"\u4e3b\u63a8_\u642d\u914d\u754c\u9762"),A.default.statisOnStageStart(this.context.stageId),this.buttonBack.node.parent.active=!0},t.prototype.onCleanup=function(){this.petSpine&&(S.default.put(this.petSpine),this.petSpine.removeFromParent(),this.petSpine=null),this.lightParticle&&(S.default.put(this.lightParticle),this.lightParticle.removeFromParent(),this.lightParticle=null),this.lightSpine&&(S.default.put(this.lightSpine),this.lightSpine.removeFromParent(),this.lightSpine=null)},t.prototype.playUIActionIn=function(e){for(var t=[],o=[this.buttonBack.node,this.nodeCenterTop],n=0;n<o.length;n++){(r=o[n])._originPos=r._originPos||r.position,r.active&&t.push({node:r,beginPos:cc.v2(r.x,r.y+500),endPos:r._originPos,delayTime:.01*l.default.random(5),dur:.3})}o=[];for(n=0;n<o.length;n++){(r=o[n])._originPos=r._originPos||r.position,r.active&&t.push({node:r,beginPos:cc.v2(r.x,r.y-500),endPos:r._originPos,delayTime:.01*l.default.random(5),dur:.3})}o=[this.nodePartSubjectInfo,this.buttonAlubm.node,this.buttonSubmit.node];for(n=0;n<o.length;n++){(r=o[n])._originPos=r._originPos||r.position,r.active&&t.push({node:r,beginPos:cc.v2(r.x+300,r.y),endPos:r._originPos,delayTime:.01*n,dur:.3})}o=[this.buttonShop.node];for(n=0;n<o.length;n++){var r;(r=o[n])._originPos=r._originPos||r.position,r.active&&t.push({node:r,beginPos:cc.v2(r.x-300,r.y),endPos:r._originPos,delayTime:.01*n,dur:.3})}L.default.playMoveToActionArr(t,1,null)},t.prototype.setEditorStageId=function(e){this.stage=f.default.get("stage_db",e),this.updateDefaultAvatar(),this.refreshListType(),this.listPart.refreshActiveCells()},t.prototype.onMsgReloadSpecialStyle=function(e){var t=e.style;this.structAvatar.fillByPartIds(t),this.viewAvatar.refreshAll(),this.reloadListType(),this.reloadListPart(),this.refreshDebugScore()},t.prototype.onMsgDressParts=function(e){var t=e.partIds;this.structAvatar.fillByPartIds(t,!0),this.viewAvatar.refreshAll(),this.reloadListPart(),this.onPartChanged()},t.prototype.onMsgAdEventSuccessd=function(e){e.adEventId==this.AD_TRIAL_NAME&&this.lastSelectPartId&&(this.trialingPartDict[this.lastSelectPartId]=!0,this.fillListPart(),this.selectPart(this.lastSelectPartId),this.onPartChanged()),k.default.tryStartRecordGameVideo()},t.prototype.onMsgAdEventFaild=function(e){e.adEventId==this.AD_TRIAL_NAME&&k.default.tryStartRecordGameVideo()},t.prototype.onMsgAdEventCanceled=function(e){this.onMsgAdEventFaild(e)},t.prototype.updateDefaultAvatar=function(){this.viewAvatar&&(this.viewAvatar.removeFromParent(),this.viewAvatar=null);var e=new I.default;if(cc.log("-------------------context=",this.context),this.context.bFirstOpenShop){cc.log(this.stage);var t=this.stage.defaultPartIds;for(var o in t){var n=t[o],r=f.default.get("cosmetic_part_db",n);if(r)for(var a=0;a<r.typeData.fixedPartCount;a++)e.onCmd("CMD_AVATAR_PART_REPLACE",{partType:r.type,index:a,partId:n})}}this.structAvatar=e,this.viewAvatar=m.default.createView("vAvatar",{structAvatar:this.structAvatar}),this.viewAvatar.parent=this.nodeAvatar,this.viewAvatar.refreshAll(),this.nodeAvatar.scale=1.5},t.prototype.buildUi=function(){var e=this;this.buttonShare.node.active=!1,this.buttonMoreGameBox.node.active=!!P.default._isSupportChannelMoreGameBox&&1==b.default.getCopNumberValueByKey("b_more_game_box"),this.buttonAlubm.node.active=!0,this.nodeBrushAnchor.x=this.nodeBrushAnchor.x+(m.default.size.width-576),this.updateDefaultAvatar();var t=f.default.get("cosmetic_background_db",this.stage.backgroundId);t&&t.texture&&this.spriteBg.loadSpriteFrameAndKeepSize(t.texture);var o=this.nodeListPart,n=new d.default;n.setLayouter((new u.default).setCols(5).setCellSize(100,100).setGap(10,25).setPending(0)),n.setCreator(function(t){var o=new w.default({fOnClick:e.onClickPart.bind(e),fOnOpenHover:e.onOpenHoverPart.bind(e),fOnCloseHover:e.onCloseHoverPart.bind(e),bDisableSubject:e.stage.bDisableSubject});o.parent=t,o.setAnchorPoint(.5,.5),t.item=o}),n.setSetter(function(t,o){t.item.fillByPartId(o.id,o.__b_trial_using,o.__b_trial_standby),t.item.setSelected(e.selectedPartId==o.id),t.item.setUsed(!o.bIgnoreInGrade&&e.structAvatar.getPartId(o.type,0)==o.id),e._b_debug_score?t.item.showDebugScore(e.stage.id):t.item.hideDebugScore(),_.default.registerGuideNode(ul.format("vRoomDialog.nodePart%d",o.id),t)}),n.parent=o,n.setContentSize(o.getContentSize()),this.listPart=n,this.fillListType()},t.prototype._doLayout=function(e,t,o){o=o||0;var n=e.children||[];if("hcenter"==t)l.default.layoutNodesHorizonCenter(n,o);else if("vcenter"==t)l.default.layoutNodesVerticalCenter(n,o);else{var r=0,a=0;for(var i in n){var s=n[i];if(s.active){s.setPosition(r,a);var c=s.getContentSize();"left"==t?r=r-c.width-o:"right"==t?r=r+c.width+o:"up"==t?a=a+c.height+o:"down"==t&&(a=a-c.height-o)}}}},t.prototype.fillListType=function(){var e=this.refreshListType();this.selectedPartType?this.onClickPartType(this.selectedPartType,!0):e.length>0&&this.onClickPartType(e[0].id),this.typeDatas=e,this.stage.script.onListTypeLoaded(this)},t.prototype.refreshListType=function(){var e=[],t=f.default.getDb("cosmetic_part_type_db");for(var o in t){var n=t[o];n.listOrder>0&&e.push(n)}return e=l.default.sortArrayByField(e,"listOrder")},t.prototype.genStandbyTrialParts=function(){if(this.stage&&!this.stage.bDisableTrial&&h.default.preCheckCanTriggerAdEvent(this.AD_TRIAL_NAME)){var e={},t=f.default.getDb("cosmetic_part_type_db");for(var o in t){var n=t[o];if(n.listOrder>0){var r=this._genStandbyPartsByPartType(n.id);if(r)for(var a in r){e[r[a]]=!0}}}this.trialStandbyPartDict=e}},t.prototype._genStandbyPartsByPartType=function(e){var t,o=this.context.banPartIds||{},n=((t={})[e]=!0,t),r=f.default.get("cosmetic_part_type_db",e,"subTypes");for(var a in r){n[r[a]]=!0}var i=[],s=f.default.getDb("cosmetic_part_db");for(var c in s){var u=s[c];!n[u.type]||u.bIgnoreInGrade||o[u.id]||C.default.getItemAmount(u.id)<=0&&i.push(u.id)}return l.default.randomGotArrayDatas(i,this.TRIAL_PART_NUM)},t.prototype.fillListPart=function(){var e,t=this.selectedPartType,o=this.context.banPartIds||{},n=((e={})[t]=!0,e),r=f.default.get("cosmetic_part_type_db",t,"subTypes");for(var a in r){n[r[a]]=!0}var i=[],s=f.default.getDb("cosmetic_part_db");for(var c in s){var u=s[c];!n[u.type]||u.bIgnoreInGrade||o[u.id]||(g.default.isPartUnlocked(u.id)||this.trialStandbyPartDict[u.id]||this.trialingPartDict[u.id])&&(u.__b_owned=g.default.isPartUnlocked(u.id)?1:0,u.__b_trial_standby=this.trialStandbyPartDict[u.id]?1:0,u.__b_trial_using=this.trialingPartDict[u.id]?1:0,i.push(u))}if(i=l.default.sortArrayByField(i,["__b_owned","-level","id"]),this.listPart.setDatas(i),this.listPart.jumpToHead(),this.nodeNoPart.active=!i||0==i.length,this.stage.script.isAutoSelectPart()&&i.length>=1){var d=this.structAvatar.getPartId(t,0);(d=d||i[0].id)&&f.default.get("cosmetic_part_db",d,"bIgnoreInGrade")&&(d=i[0].id);for(var p in i){if(i[p].id==d){this.listPart.jumpToIndex(parseInt(p),cc.v2(0,-50));break}}}this.stage.script.onListPartLoaded(this)},t.prototype.reloadListType=function(){this.refreshListType()},t.prototype.reloadListPart=function(){this.listPart.refreshActiveCells()},t.prototype.selectPart=function(e){cc.log("---partId=",e),this.doSelectPart(e)},t.prototype.doSelectPart=function(e){if(this.lastSelectPartId=e,!this.stage.script.onSelectPartAmountCheck(this,e)&&!this.stage.script.onBeforeSelectPart(this,e)){var t=f.default.get("cosmetic_part_db",e);if(this.selectedPartId=null,this.structAvatar.isPartUsed(e))for(var o=0;o<t.typeData.fixedPartCount;o++)this.structAvatar.onCmd("CMD_AVATAR_PART_REMOVE",{partType:t.type,index:o}),this.viewAvatar.onCmd("CMD_AVATAR_PART_REPLACE",{partType:t.type,index:o});else{for(o=0;o<t.typeData.fixedPartCount;o++)this.structAvatar.onCmd("CMD_AVATAR_PART_REPLACE",{partType:t.type,index:o,partId:t.id}),this.viewAvatar.onCmd("CMD_AVATAR_PART_REPLACE",{partType:t.type,index:o,partId:t.id});T.default.play(105),this.playCommentSoundByPartId(e);var n=S.default.get("particle","result_bao2");if(!n)return;n.scale=1,n.parent=this.nodeAvatar,n.position=cc.v2(0,200),n.setAutoRemoveOnFinish(!0)}this.onPartChanged(),this.reloadListPart(),this.stage.script.onPartSelected(this,e)}},t.prototype.selectPartType=function(e,t){if(t||e!=this.selectedPartType){this.selectedPartType=e;f.default.get("cosmetic_part_type_db",e);this.reloadListType(),this.listPart.active=!0,this.fillListPart(),this.stage.script.onTypeSelected(this,e)}},t.prototype.finishGame=function(){var e=this;if(this.structAvatar.isAllUsedPartIsDefault())return T.default.play(601),void D.default.alertPrompt(E.default.getText("vRoomDialog.6"),E.default.getText("vRoomDialog.7"),E.default.getText("vRoomDialog.8"),function(){e.nodeBaseType11.runAction(cc.sequence(cc.callFunc(function(){D.default.playParticleOnce("result_bao1",0,0,.6,0,e.nodeBaseType11)}),cc.scaleTo(.15,1.4,1.4),cc.scaleTo(.15,1,1),cc.delayTime(.1),cc.callFunc(function(){D.default.playParticleOnce("result_bao1",0,0,.6,0,e.nodeBaseType11)}),cc.scaleTo(.15,1.4,1.4),cc.scaleTo(.15,1,1)))},"ad_banner_room_dialog");if(this.structAvatar.isEmptyPartType(p.CPartType.UP,!0))return T.default.play(601),void D.default.alertPrompt(E.default.getText("vRoomDialog.6"),E.default.getText("vRoomDialog.9"),E.default.getText("vRoomDialog.8"),function(){e.nodeBaseType13.runAction(cc.sequence(cc.callFunc(function(){D.default.playParticleOnce("result_bao1",0,0,.6,0,e.nodeBaseType13)}),cc.scaleTo(.15,1.4,1.4),cc.scaleTo(.15,1,1),cc.delayTime(.1),cc.callFunc(function(){D.default.playParticleOnce("result_bao1",0,0,.6,0,e.nodeBaseType13)}),cc.scaleTo(.15,1.4,1.4),cc.scaleTo(.15,1,1)))},"ad_banner_room_dialog_dress");if(!this.stage.script.checkSellPacking(this)){if(this.context.packingId){var t=this.structAvatar.serializeToText();y.default.setPackingAvatar(this.context.packingId,t)}this.stage.script.onRoomSceneFinishStage(this)}},t.prototype.playCommentSoundByPartId=function(e){if(this.stage&&!this.stage.bDisableSubject&&e){var t=this.stage.gradeIds||[],o=l.default.getTableCount(t),n=f.default.get("cosmetic_part_db",e);if(n&&0!=o){var r=n.topSubjectIds||[],a=0;for(var i in t){var s=t[p=parseInt(i)];for(var c in r){s==r[c]&&(a+=1)}}var u=!1,d=null;if(0==a?d=[730,731]:a==o&&(d=[728,729],u=!0),d&&l.default.random(100)<33&&l.default.time()-this.lastPlayCommentSoundTime>5){var p=l.default.random(0,d.length-1);T.default.play(d[p]),u?this.viewAvatar.onCmd("CMD_AVATAR_HAPPY"):this.viewAvatar.onCmd("CMD_AVATAR_SAD"),this.lastPlayCommentSoundTime=l.default.time()}}}},t.prototype.onClickPartType=function(e,t){this.refreshPartTypeStatus(e),this.selectPartType(e,t)},t.prototype.onClickPart=function(e){this.selectPart(e)},t.prototype.onMsgDebugKeyDown=function(e){var t=e.keyDesc;"shift_w"==t?this.stage.script.onRoomSceneFinishStage(this,60):"shift_f"==t&&this.stage.script.onRoomSceneFinishStage(this,0)},t.prototype.onPartChanged=function(){this.updateSubjectdScoreInfo(),this.labelDebugTip.enabled&&this.refreshDebugScore(),this.refreshListType(),this.listPart.refreshActiveCells(),this.sendMsg("MSG_ON_AVATAR_CHANGED")},t.prototype.refreshDebugScore=function(){},t.prototype.onOpenHoverPart=function(e){var t=this,o={itemId:e,fOnDialogClose:function(){t.hoverDialog=null}},n=D.default.showItemDetailDialog(e,1,o);this.hoverDialog=n},t.prototype.onCloseHoverPart=function(){this.hoverDialog&&this.hoverDialog.closeDialog(!0)},t.prototype.onMsgNetworkResponse=function(e){this.stage.script.onMsgNetworkResponse(this,e)},t.prototype.onMsgItemAmountChanged=function(e){var t=e.itemId,o=f.default.get("item_template_db",t);o&&o.flag==p.default.ITEM_FLAG_PART&&this.fillListPart()},t.prototype.onMsgStageRecommendChanged=function(e){this.fillListPart()},t.prototype.onMsgPvpUploadSuccess=function(e){var t=this;D.default.alertPrompt(E.default.getText("vRoomDialog.6"),E.default.getText("vRoomDialog.10"),E.default.getText("vRoomDialog.8"),function(){var e=t.stage;A.default.statisOnStageEnd(e.id,!0),P.default.isRankEnabled()?m.default.warpDialogWithEffect("vHudRankDialog",{backSceneName:"vPvpPkDialog"}):m.default.warpDialogWithEffect("vPvpPkDialog")},"ad_banner_room_dialog_pk")},t.prototype.tryGuide=function(){cc.log("__---tryGuide-------11111"),this.sendMsg("MSG_GUIDE_POINT",{id:"vRoomDialog.onEnterTransitionFinish",productResultCount:C.default.getItemAmount(p.default.ITEM_ID_ENTER_PRODUCT_RESULT_COUNT),guidePartNum:C.default.getItemAmount(12127)>0?1:0,bContainPvpData:v.default.getPlayerData()?1:0}),cc.log("__---tryGuide-------22222")},t.prototype.isClickShadowClose=function(){return!1},t=r([N],t)}(c.default);o.default=O,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/component/ToggleButton":"ToggleButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../../ulframework/view/ReuseLayouterVGrid":"ReuseLayouterVGrid","../../../ulframework/view/ReuseList":"ReuseList","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrChannel":"mgrChannel","../../manager/mgrCosmetic":"mgrCosmetic","../../manager/mgrDirector":"mgrDirector","../../manager/mgrEffect":"mgrEffect","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n","../../manager/mgrOfflinePvp":"mgrOfflinePvp","../../manager/mgrPacking":"mgrPacking","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrPool":"mgrPool","../../manager/mgrSdk":"mgrSdk","../../manager/mgrShop":"mgrShop","../../manager/mgrSound":"mgrSound","../../manager/mgrStatics":"mgrStatics","../../manager/mgrTip":"mgrTip","../../manager/mgrVideoRecorder":"mgrVideoRecorder","../../struct/sAvatar":"sAvatar","../node/vRoomListItemPart":"vRoomListItemPart"}],vRoomListItemPart:[function(e,t,o){"use strict";cc._RF.push(t,"6af78zfCJtBZZGc9Er3Dbnk","vRoomListItemPart");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/ViewBase"),c=e("../../manager/mgrCfg"),u=e("../../manager/mgrPlayer"),d=e("../../../ulframework/utils/Timer"),p=e("../../../ulframework/utils/Tools"),h=e("./vLevelBar"),f=cc._decorator.ccclass,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBg=null,t.labelPrice=null,t.nodeIcon=null,t.nodeLevel=null,t.nodePrice=null,t.spriteBg=null,t.spriteIcon=null,t.spriteLockFlag=null,t.spritePriceUnit=null,t.spriteSelected=null,t.spriteSubject=null,t.spriteUsed=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vRoomListItemPart"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBg:[s.default,"onTouchButtonBg"],CC_labelPrice:[cc.Label],CC_nodeIcon:[cc.Node],CC_nodeLevel:[cc.Node],CC_nodePrice:[cc.Node],CC_spriteBg:[cc.Sprite],CC_spriteIcon:[cc.Sprite],CC_spriteLockFlag:[cc.Sprite],CC_spritePriceUnit:[cc.Sprite],CC_spriteSelected:[cc.Sprite],CC_spriteSubject:[cc.Sprite],CC_spriteUsed:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=new h.default;e.parent=this.nodeLevel,this.levelBar=e,this.nodeLevel.scale=.8,this.nodeLevel._originPos=this.nodeLevel.position,this.nodePrice._originPos=this.nodePrice.position,this.registerListeners({MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this)})},t.prototype.fillByPartId=function(e,t,o){return a(this,void 0,void 0,function(){var n=this;return i(this,function(r){return this.partId=e,this.waitLoadingFinished(function(){n.nodeLevel.opacity=255;var e=c.default.get("cosmetic_part_db",n.partId),r={};for(var a in e.topSubjectIds){r[e.topSubjectIds[a]]={score:100-parseInt(a)}}n.spriteIcon.loadSpriteFrameAndKeepSize(e.icon),n.spriteLockFlag.node.active=!(t||u.default.getItemAmount(n.partId)>0),n.nodePrice.active=!!n.spriteLockFlag.node.active,n.levelBar.setLevel(5,c.default.get("item_template_db",n.partId,"level"));var i=c.default.get("shop_template_db",n.partId);o?(n.labelPrice.setLocalizedString("vRoomListItemPart.1"),n.spritePriceUnit.loadSpriteFrameAndKeepSize("2d/ui/ad/img_ad_flag.png")):i?(n.labelPrice.string=ul.format("%s",u.default.getItemAmountStr(i.price)),n.spritePriceUnit.loadSpriteFrameAndKeepSize(u.default.getIcon(i.priceUnit))):n.nodePrice.active=!1;var s=0,l=0,d=c.default.getDb("cosmetic_subject_tag_db");for(var a in d){var p=d[a],h=e[p.id];s<h&&(l=p.id,s=h)}if(l){var f=c.default.get("cosmetic_subject_tag_db",l);n.spriteSubject.loadSpriteFrameAndKeepSize(f.texture),n.spriteSubject.node.active=!0}else n.spriteSubject.node.active=!1}),[2]})})},t.prototype.setSelected=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){return this.spriteSelected.node.active=e,[2]})})},t.prototype.setUsed=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){return this.spriteUsed.node.active=e,[2]})})},t.prototype.showDebugScore=function(e){return a(this,void 0,void 0,function(){return i(this,function(e){return[2]})})},t.prototype.hideDebugScore=function(){return a(this,void 0,void 0,function(){return i(this,function(e){return this.labelDebugScore&&(this.labelDebugScore.removeFromParent(),this.labelDebugScore=null),[2]})})},t.prototype.onTouchButtonBg=function(e){var t=this;if("began"==e.name){this.timer&&(this.timer.stop(),this.timer=null);var o=new d.default(.5,-1,function(){t.timer.stop(),t.timer=null,t.bHover=!0,t.context.fOnOpenHover&&t.context.fOnOpenHover(t.partId)});o.startAndBindToNode(this),this.timer=o}else if("moved"==e.name){20<=p.default.pDistance(e.getStartLocation(),e.getLocation())&&(this.timer&&(this.timer.stop(),this.timer=null),this.bHover&&(this.bHover=!1,this.context.fOnCloseHover&&this.context.fOnCloseHover()))}else if("ended"==e.name){this.timer&&(this.timer.stop(),this.timer=null),p.default.pDistance(e.getStartLocation(),e.getLocation())<20&&!this.bHover&&this.context.fOnClick&&this.context.fOnClick(this.partId),this.bHover&&(this.bHover=!1,this.context.fOnCloseHover&&this.context.fOnCloseHover())}},t.prototype.onMsgItemAmountChanged=function(e){e.itemId==this.partId&&this.fillByPartId(this.partId)},r([l.default.requireResourceLoaded],t.prototype,"setSelected",null),r([l.default.requireResourceLoaded],t.prototype,"setUsed",null),r([l.default.requireResourceLoaded],t.prototype,"showDebugScore",null),t=r([f],t)}(l.default);o.default=g,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrPlayer":"mgrPlayer","./vLevelBar":"vLevelBar"}],vRoomListItemType:[function(e,t,o){"use strict";cc._RF.push(t,"eb608qQgK9PIof6M2+CKKNF","vRoomListItemType");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/ViewBase"),c=e("../../manager/mgrCfg"),u=e("../../manager/mgrDebug"),d=e("../../../ulframework/utils/Tools"),p=cc._decorator.ccclass,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"node/vRoomListItemType"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBg:[s.default,"onTouchButtonBg"],CC_labelName:[cc.Label],CC_spriteBgNormal:[cc.Sprite],CC_spriteBgSelected:[cc.Sprite],CC_spriteIcon:[cc.Sprite],CC_spriteUsed:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){this.setContentSize(this.nodeResource.getContentSize()),this.context.fOnResourceLoaded&&this.context.fOnResourceLoaded()},t.prototype.fillByType=function(e){return a(this,void 0,void 0,function(){var t=this;return i(this,function(o){return this.type=e,this.waitLoadingFinished(function(){var e=c.default.get("cosmetic_part_type_db",t.type);u.default.bUnlockAll&&(t.labelName.node.active=!0,t.labelName.string=e.name||"\u672a\u77e5"),t.spriteIcon.loadSpriteFrame(e.icon)}),[2]})})},t.prototype.setSelected=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){return this.spriteBgNormal.node.active=!e,this.spriteBgSelected.node.active=e,[2]})})},t.prototype.setUsed=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){return this.spriteUsed.node.active=e,[2]})})},t.prototype.onTouchButtonBg=function(e){e.isClick()&&(d.default.pDistance(e.getStartLocation(),e.getLocation())>=20||this.context.fOnClick&&this.context.fOnClick(this.type))},r([l.default.requireResourceLoaded],t.prototype,"setSelected",null),r([l.default.requireResourceLoaded],t.prototype,"setUsed",null),t=r([p],t)}(l.default);o.default=h,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDebug":"mgrDebug"}],vSelectPackingDialog:[function(e,t,o){"use strict";cc._RF.push(t,"cf3b6+2kBNIq4EHjQxr7oDS","vSelectPackingDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/DialogBase"),c=e("../../manager/mgrPacking"),u=e("../node/vPackingAvatar"),d=e("../../manager/mgrTip"),p=e("../../manager/mgrDirector"),h=e("../../manager/mgrI18n"),f=cc._decorator,g=f.ccclass,m=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.labelTitle=null,t.nodeAvatar1=null,t.nodeAvatar2=null,t.nodeAvatar3=null,t.nodeAvatar4=null,t.nodeAvatar5=null,t.nodeUIContent=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vSelectPackingDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[s.default,"onTouchButtonClose"],CC_labelTitle:[cc.Label],CC_nodeAvatar1:[cc.Node],CC_nodeAvatar2:[cc.Node],CC_nodeAvatar3:[cc.Node],CC_nodeAvatar4:[cc.Node],CC_nodeAvatar5:[cc.Node],CC_nodeUIContent:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(p.default.size),this.setContentSize(p.default.size)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onOpenDialogCompleted=function(){this.onLoadedInit()},t.prototype.onLoadedInit=function(){this.initAvatar();var e=this.nodeUIContent.position;this.nodeUIContent.y=-500,this.nodeUIContent.opacity=255,this.nodeUIContent.runAction(cc.moveTo(.5,e))},t.prototype.initAvatar=function(){for(var e=[],t=c.default.getSortedPackings(),o=t.length,n=0;n<o;n++){var r=t[n],a=this["nodeAvatar"+(n+1)],i=new u.default({index:n,packing:r,fOnClick:this.onClickAvatarItem.bind(this),bDisableChange:!0});i.parent=a,e.push(i)}},t.prototype.onClickAvatarItem=function(e){var t=c.default.getPacking(e);!t||t.level<=0?d.default.showMsgTip(h.default.getText("vSelectPackingDialog.2")):c.default.setPackingAvatar(e,this.context.avatarStr)&&(d.default.showMsgTip(h.default.getText("vSelectPackingDialog.3")),this.closeDialog())},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.openDialog=function(t){return void 0===t&&(t=!1),a(this,void 0,void 0,function(){return i(this,function(t){return e.prototype.openDialog.call(this,!0),[2]})})},t.prototype.closeDialog=function(t,o){return void 0===t&&(t=!1),a(this,void 0,void 0,function(){return i(this,function(t){return e.prototype.closeDialog.call(this,!0,o),[2]})})},t=r([g],t)}(l.default));o.default=m,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrDirector":"mgrDirector","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPacking":"mgrPacking","../../manager/mgrTip":"mgrTip","../node/vPackingAvatar":"vPackingAvatar"}],vSellMoneyNode:[function(e,t,o){"use strict";cc._RF.push(t,"60f5azQdHJOXbof34jhn6L8","vSellMoneyNode");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/view/ViewBase"),i=e("../../manager/mgrPlayer"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelCount=null,t.nodeMoneyBig=null,t.nodeMoneySmall=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vSellMoneyNode"},t.prototype._getResourceBindingConfig=function(){return{CC_labelCount:[cc.Label],CC_nodeMoneyBig:[cc.Node],CC_nodeMoneySmall:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onLoadedInit=function(){this.nodeMoneyBig.active=!!this.context.bRight,this.nodeMoneySmall.active=!this.context.bRight,this.labelCount.string=ul.format("+%s",i.default.getItemAmountStr(this.context.amount||0))},t.prototype.play=function(){this.labelCount.node.runAction(cc.spawn(cc.moveBy(.5,cc.v2(0,50)),cc.sequence(cc.delayTime(.3),cc.fadeOut(.2))))},r([a.default.requireResourceLoaded],t.prototype,"play",null),t=r([l],t)}(a.default));o.default=c,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrPlayer":"mgrPlayer"}],vServiceDialog:[function(e,t,o){"use strict";cc._RF.push(t,"d86a2k3jMpC+qR3Rf0Lezl3","vServiceDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=cc._decorator.ccclass,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vServiceDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonCallPhone:[a.default,"onTouchButtonCallPhone"],CC_buttonClose:[a.default,"onTouchButtonClose"],CC_labelLine1:[cc.Label],CC_labelLine2:[cc.Label],CC_labelLine3:[cc.Label],CC_labelTip:[cc.Label],CC_labelTitle:[cc.Label]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouchButtonCallPhone=function(e){},t.prototype.onTouchButtonClose=function(e){},t=r([s],t)}(i.default);o.default=l,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase"}],vSetLanguageDialog:[function(e,t,o){"use strict";cc._RF.push(t,"73e65Bn72tAZqPyiFpxs0MC","vSetLanguageDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../../ulframework/view/ReuseLayouterVBox"),l=e("../../../ulframework/view/ReuseList"),c=e("../node/vSetLanguageItem"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.nodeList=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vSetLanguageDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_nodeList:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),this.registerListeners({MSG_CLOSE_LABGUAGE_VIEW:this.onCloseDialog})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=this.nodeList,t=new l.default;t.setLayouter((new s.default).setCellSize(460,80).setGap(5).setPending(10)),t.setCreator(function(e){var t=new c.default;t.parent=e,e.item=t}),t.setSetter(function(e,t){e.item.fillData(t.text,t.value)}),t.parent=e,t.setContentSize(e.getContentSize()),t.setDatas([{text:"English",value:"en"},{text:"Orang indonesia",value:"id"},{text:"Ti\u1ebfng vi\u1ec7t",value:"vi"},{text:"Portugu\xeas",value:"pt"},{text:"\u4e2d\u6587",value:"zhcn"}])},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onCloseDialog=function(){this.closeDialog()},t.prototype.isClickShadowClose=function(){return!1},t=r([d],t)}(i.default));o.default=p,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../../ulframework/view/ReuseLayouterVBox":"ReuseLayouterVBox","../../../ulframework/view/ReuseList":"ReuseList","../node/vSetLanguageItem":"vSetLanguageItem"}],vSetLanguageItem:[function(e,t,o){"use strict";cc._RF.push(t,"a50f6xjPz5MjYkmnRlA10KX","vSetLanguageItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrI18n"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonChangeLanguage=null,t.labelDesc=null,t.nodeBg1=null,t.nodeBg2=null,t.nodeChoice=null,t.spriteIcon=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vSetLanguageItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonChangeLanguage:[a.default,"onTouchButtonChangeLanguage"],CC_labelDesc:[cc.Label],CC_nodeBg1:[cc.Node],CC_nodeBg2:[cc.Node],CC_nodeChoice:[cc.Node],CC_spriteIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeBg2.active=!1,this.nodeChoice.active=!1},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(e,t){if(this.title=e,this.imageName=t,this.isResourceLoaded()&&this.imageName&&this.title){this.language=s.default.getLanguage();var o="2d/ui/language_icon/"+this.imageName+".png";this.spriteIcon.loadSpriteFrame(o),this.labelDesc.string=this.title,this.language==this.imageName?(this.nodeChoice.active=!0,this.nodeBg1.active=!1,this.nodeBg2.active=!0,this.labelDesc.node.getComponent(cc.LabelOutline).color=cc.color(255,87,193)):(this.nodeChoice.active=!1,this.nodeBg1.active=!0,this.nodeBg2.active=!1,this.labelDesc.node.getComponent(cc.LabelOutline).color=cc.color(64,149,254))}},t.prototype.onTouchButtonChangeLanguage=function(e){e.isClick()&&(console.log("\u70b9\u51fb\u9009\u62e9\u8bed\u8a00\uff1a",this.imageName),s.default.setLanguage(this.imageName),this.sendMsg("MSG_CLOSE_LABGUAGE_VIEW"))},r([i.default.requireResourceLoaded],t.prototype,"fillData",null),t=r([c],t)}(i.default));o.default=u,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrI18n":"mgrI18n"}],vSettingDialog:[function(e,t,o){"use strict";cc._RF.push(t,"0fc953J/xtFXqKTrDbaX1vr","vSettingDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/utils/Timer"),s=e("../../../ulframework/utils/Tools"),l=e("../../../ulframework/view/DialogBase"),c=e("../../Const"),u=e("../../manager/mgrDirector"),d=e("../../manager/mgrSdk"),p=e("../../manager/mgrSound"),h=e("../../manager/mgrAd"),f=cc._decorator.ccclass,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonAbout=null,t.buttonBgm=null,t.buttonCdk=null,t.buttonClose=null,t.buttonMoreGame=null,t.buttonSetLanguage=null,t.buttonSfx=null,t.buttonVideoRecord=null,t.labelKefu=null,t.labelTitle=null,t.labelVersion=null,t.nodeBg=null,t.nodeBgmOff=null,t.nodeBgmOn=null,t.nodeLayoutCdk=null,t.nodeLayoutContent=null,t.nodeLayoutCtcc=null,t.nodeLayoutKefu=null,t.nodeLayoutSetLanguage=null,t.nodeLayoutSound=null,t.nodeLayoutSoundVideo=null,t.nodeLayoutVersion=null,t.nodeLayoutVideo=null,t.nodeSfxOff=null,t.nodeSfxOn=null,t.nodeTitle=null,t.nodeVideoRecordOff=null,t.nodeVideoRecordOn=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vSettingDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonAbout:[a.default,"onTouchButtonAbout"],CC_buttonBgm:[a.default,"onTouchButtonBgm"],CC_buttonCdk:[a.default,"onTouchButtonCdk"],CC_buttonClose:[a.default,"onTouchButtonClose"],CC_buttonMoreGame:[a.default,"onTouchButtonMoreGame"],CC_buttonSetLanguage:[a.default,"onTouchButtonSetLanguage"],CC_buttonSfx:[a.default,"onTouchButtonSfx"],CC_buttonVideoRecord:[a.default,"onTouchButtonVideoRecord"],CC_labelKefu:[cc.Label],CC_labelTitle:[cc.Label],CC_labelVersion:[cc.Label],CC_nodeBg:[cc.Node],CC_nodeBgmOff:[cc.Node],CC_nodeBgmOn:[cc.Node],CC_nodeLayoutCdk:[cc.Node],CC_nodeLayoutContent:[cc.Node],CC_nodeLayoutCtcc:[cc.Node],CC_nodeLayoutKefu:[cc.Node],CC_nodeLayoutSetLanguage:[cc.Node],CC_nodeLayoutSound:[cc.Node],CC_nodeLayoutSoundVideo:[cc.Node],CC_nodeLayoutVersion:[cc.Node],CC_nodeLayoutVideo:[cc.Node],CC_nodeSfxOff:[cc.Node],CC_nodeSfxOn:[cc.Node],CC_nodeTitle:[cc.Node],CC_nodeVideoRecordOff:[cc.Node],CC_nodeVideoRecordOn:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onCloseDialogStart=function(){h.default.closeBannerAd()},t.prototype.onLoadedInit=function(){var e=this;this.loadDefault(),i.default.callLoop(2,function(){e.copClickNumber=0},this),h.default.showBannerAd(this.nodeResource,"ad_banner_setting_dialog")},t.prototype.loadDefault=function(){this.updateButton(),this.fillKeFu(),this.labelVersion.string=c.default.GAME_VERSION;var e=1==d.default.getCopNumberValueByKey("b_cdk"),t=d.default.isCopOpenVideoRecord(),o=0;this.nodeLayoutCdk.active=e&&!1,this.nodeLayoutVideo.active=t,t&&(o+=this.nodeLayoutVideo.getContentSize().height,this.nodeLayoutSoundVideo.height+=this.nodeLayoutVideo.getContentSize().height),e&&(this.nodeLayoutCdk.y=-this.nodeLayoutSoundVideo.height,o+=this.nodeLayoutCdk.getContentSize().height),this.nodeLayoutSetLanguage.y=-this.nodeLayoutSoundVideo.height,s.default.registerTouchHandler(this.nodeBg,this.onTouchNodeBg.bind(this));var n=cc.size(this.nodeResource.getContentSize().width,this.nodeResource.getContentSize().height+o);this.nodeResource.setContentSize(n),this.setContentSize(n)},t.prototype.fillKeFu=function(){},t.prototype.updateButton=function(){this.nodeSfxOff.active=p.default.getEffectVolume()<=0,this.nodeSfxOn.active=p.default.getEffectVolume()>0,this.nodeBgmOff.active=p.default.getMusicVolmue()<=0,this.nodeBgmOn.active=p.default.getMusicVolmue()>0,this.nodeVideoRecordOff.active=!c.default.IS_OPEN_VIDEO_RECORD,this.nodeVideoRecordOn.active=!!c.default.IS_OPEN_VIDEO_RECORD},t.prototype.onTouchButtonAbout=function(e){e.isClick()},t.prototype.onTouchButtonBgm=function(e){e.isClick()&&(p.default.getMusicVolmue()>0?p.default.setMusicVomue(0):p.default.setMusicVomue(1),this.updateButton())},t.prototype.onTouchButtonCdk=function(e){e.isClick()&&u.default.warpDialogWithSmallEffect("vCdkDialog")},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonMoreGame=function(e){e.isClick()},t.prototype.onTouchButtonSfx=function(e){e.isClick()&&(p.default.getEffectVolume()>0?p.default.setEffectVolume(0):p.default.setEffectVolume(1),this.updateButton())},t.prototype.onTouchButtonCop=function(e){this.onTouchNodeBg(e)},t.prototype.onTouchButtonVideoRecord=function(e){e.isClick()&&(c.default.IS_OPEN_VIDEO_RECORD=!c.default.IS_OPEN_VIDEO_RECORD,this.updateButton())},t.prototype.onTouchButtonSetLanguage=function(e){e.isClick()&&(this.closeDialog(),u.default.openDialog("vSetLanguageDialog"))},t.prototype.onTouchNodeBg=function(e){var t=this;if("began"==e.name)this._b_drag_to_right=!0,this._turn_count=0,this._b_poped=!1;else if("moved"==e.name){var o=e.getStartLocation(),n=e.getLocation();if(this._b_drag_to_right?n.x<o.x-20&&(this._b_drag_to_right=!1,this._turn_count++):n.x>o.x+20&&(this._b_drag_to_right=!0,this._turn_count++),!this._b_poped&&this._turn_count>=40){this._b_poped=!0;u.default.openDialog("vPromptInputConfirmDialog",{fOnConfirm:function(e){e&&"game70"==e?u.default.openDialog("vDebugInfoDialog",null,!0):t._b_poped=!1}})}}},t=r([f],t)}(l.default);o.default=g,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrDirector":"mgrDirector","../../manager/mgrSdk":"mgrSdk","../../manager/mgrSound":"mgrSound"}],vShareDialog:[function(e,t,o){"use strict";cc._RF.push(t,"f3a89cUe5dK560LP5dNlKxX","vShareDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vShareDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_buttonReward:[a.default,"onTouchButtonReward"],CC_labelRewardAmount:[cc.Label],CC_nodeBg:[cc.Node],CC_nodeLayoutContent:[cc.Node],CC_nodeTitle:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouchButtonClose=function(e){},t.prototype.onTouchButtonReward=function(e){},t=r([l],t)}(i.default));o.default=c,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase"}],vShareShowDialog:[function(e,t,o){"use strict";cc._RF.push(t,"65298sCYc1Lk5Cgs0p4mWbE","vShareShowDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vShareShowDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonShare:[a.default,"onTouchButtonShare"],CC_labelButtonShare:[cc.Label],CC_labelContent:[cc.Label],CC_labelTabTip:[cc.Label],CC_labelTitle:[cc.Label],CC_nodeBg:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.labelContent.string=this.context.contentStr||"",this.context.titleStr&&""!=this.context.titleStr&&(this.labelTitle.string=this.context.titleStr||""),this.context.btnStr&&""!=this.context.btnStr&&(this.labelButtonShare.string=this.context.btnStr||"")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouchButtonShare=function(e){e.isClick()&&(this.context.fOnClickShare&&this.context.fOnClickShare(),this.closeDialog())},t=r([l],t)}(i.default));o.default=c,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase"}],vShopDialog:[function(e,t,o){"use strict";cc._RF.push(t,"6357bOSGwhK/5jtjTQyrix3","vShopDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/DialogBase"),c=e("../../../ulframework/utils/Timer"),u=e("../../../ulframework/view/ReuseList"),d=e("../../Const"),p=e("../../manager/mgrCfg"),h=e("../../../ulframework/utils/Tools"),f=e("../../manager/mgrShop"),g=e("../../manager/mgrStage"),m=e("../../../ulframework/view/ReuseLayouterVGrid"),_=e("../node/vShopItemNormal"),v=e("../node/vShopItemDiscount"),y=e("../node/vLevelBar"),C=e("../../manager/mgrDebug"),S=e("../../manager/mgrAchievement"),b=e("../../manager/mgrDirector"),R=e("../../manager/mgrSound"),T=e("../../manager/mgrEffect"),A=e("../../manager/mgrGuide"),D=e("../../struct/sAvatar"),I=e("../../manager/mgrStatics"),w=e("../../../ulframework/component/ToggleButton"),L=e("../../manager/mgrAd"),P=e("../node/vCommonTitleBarRmbGold"),k=e("../../manager/mgrPool"),E=cc._decorator,N=E.ccclass,O=(E.property,function(e){function t(t){var o=e.call(this,t)||this;return o.buttonBuy=null,o.buttonClose=null,o.labelCondition=null,o.labelDesc=null,o.labelDiscountTime=null,o.labelName=null,o.nodeAvatar=null,o.nodeAvatarBase=null,o.nodeBuy=null,o.nodeClose=null,o.nodeCondition=null,o.nodeDiscount=null,o.nodeDiscountTime=null,o.nodeInfo=null,o.nodeLayoutContent=null,o.nodeLevel=null,o.nodeListDiscount=null,o.nodeListNormal=null,o.nodeNormal=null,o.nodePart=null,o.nodeSubjects=null,o.nodeTitleBar=null,o.nodeTop=null,o.nodeUIRoot=null,o.spriteSubject=null,o.toggleButtonType11=null,o.toggleButtonType13=null,o.toggleButtonType14=null,o.toggleButtonType15=null,o.toggleButtonType16=null,o.toggleButtonType17=null,o.toggleButtonType998=null,o.registeredNodes={},o.reuseListDiscount=null,o.reuseListNormal=null,o.selectedShopId=0,o.selectedPartType=0,o.levelBar=null,o._lastBuyIndex=0,o.OFFSET_MENU=10,o.defaulPartIds=[],o.DEFAULT_AVATAR_SCALE=.8,o.context.bImmediately=!0,o}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vShopDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBuy:[s.default,"onTouchButtonBuy"],CC_buttonClose:[s.default,"onTouchButtonClose"],CC_toggleButtonType11:[w.default,"onTouchToggleButtonType11"],CC_toggleButtonType13:[w.default,"onTouchToggleButtonType13"],CC_toggleButtonType14:[w.default,"onTouchToggleButtonType14"],CC_toggleButtonType15:[w.default,"onTouchToggleButtonType15"],CC_toggleButtonType16:[w.default,"onTouchToggleButtonType16"],CC_toggleButtonType17:[w.default,"onTouchToggleButtonType17"],CC_toggleButtonType998:[w.default,"onTouchToggleButtonType998"],CC_labelCondition:[cc.Label],CC_labelDesc:[cc.Label],CC_labelDiscountTime:[cc.Label],CC_labelName:[cc.Label],CC_nodeAvatar:[cc.Node],CC_nodeAvatarBase:[cc.Node],CC_nodeBuy:[cc.Node],CC_nodeClose:[cc.Node],CC_nodeCondition:[cc.Node],CC_nodeDiscount:[cc.Node],CC_nodeDiscountTime:[cc.Node],CC_nodeInfo:[cc.Node],CC_nodeLayoutContent:[cc.Node],CC_nodeLevel:[cc.Node],CC_nodeListDiscount:[cc.Node],CC_nodeListNormal:[cc.Node],CC_nodeNormal:[cc.Node],CC_nodePart:[cc.Node],CC_nodeSubjects:[cc.Node],CC_nodeTitleBar:[cc.Node],CC_nodeTop:[cc.Node],CC_nodeUIRoot:[cc.Node],CC_spriteSubject:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){return a(this,void 0,void 0,function(){return i(this,function(t){return e.prototype.onResourceLoaded.call(this),this.setContentSize(b.default.size),this.nodeResource.setContentSize(b.default.size),this.nodePart.height+=(b.default.height-1024)/2,L.default.closeBannerAd(),L.default.showIntAd("\u670d\u9970\u5546\u5e97"),this.playUIActionIn(),[2]})})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.viewAvatar&&(this.viewAvatar.destroy(),this.viewAvatar=null),this.reuseListDiscount&&cc.isValid(this.reuseListDiscount)&&(this.reuseListDiscount.destroy(),this.reuseListDiscount=null),this.reuseListNormal&&cc.isValid(this.reuseListNormal)&&(this.reuseListNormal.destroy(),this.reuseListNormal=null),I.default.staticsUIDestroy(I.default.getViewNameByResourceName(this._getResourceName()),this.getViewLoadedTime())},t.prototype.onCloseDialogStart=function(){L.default.closeBannerAd()},t.prototype.onTimerLoop=function(e){var t=f.default.getDiscountRemainTime();this.labelDiscountTime.string=h.default.formatTime(t,"%h:%M:%S"),this.reuseListDiscount.setTouchScrollEnabled(!A.default.isGuiding()),this.reuseListNormal.setTouchScrollEnabled(!A.default.isGuiding())},t.prototype.onOpenDialogCompleted=function(){return a(this,void 0,void 0,function(){var e,t=this;return i(this,function(o){return e=function(){t&&cc.isValid(t)&&t.nodeResource&&cc.isValid(t.nodeResource)&&(t.onLoadedInit(),t.sendMsg("MSG_GUIDE_POINT",{id:"vShopDialog.onOpenDialogCompleted",bGuideFlag:t.context.bGuideFlag?1:0}))},c.default.callLater(.5,e,this),[2]})})},t.prototype.onLoadedInit=function(){return a(this,void 0,void 0,function(){var e,t,o=this;return i(this,function(n){return this.nodeClose.active=!0,this.nodeUIRoot.active=!0,this.nodeDiscountTime.opacity=255,A.default.registerGuideNode(ul.format("vShopDialog.nodePartType13"),this.toggleButtonType13.node),A.default.isGuiding()||R.default.play(703),this.buildUi(),this.selectedShopId=0,this.onTimerLoop(0),c.default.callLoop(1,this.onTimerLoop.bind(this),this),this.registerListeners({MSG_ITEM_BUY_SUCCESSED:this.onMsgItemBuySuccessed.bind(this),MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd.bind(this)}),e=[],f.default.getCanbuyShopItemListByCategory([d.CPartType.DISCOUNT]).length>0&&e.push({id:d.CPartType.DISCOUNT,listOrder:-1e3}),p.default.forDb("cosmetic_part_type_db",function(t,o){o.listOrder&&e.push({id:o.id,listOrder:o.listOrder})}),e=h.default.sortArrayByField(e,"listOrder"),this.shopPartTypeArr=e,c.default.callLater(.3,function(){if(o&&cc.isValid(o)&&o.nodeResource&&cc.isValid(o.nodeResource)){var e=o.findOneCanBuyPartType();if(o.context.focusPartType)f.default.getCanbuyShopItemListByCategory([o.context.focusPartType]).length>0&&(e=o.context.focusPartType);o.selectPartType(e,!0)}},this),A.default.registerGuideNode("vShopDialog.buttonClose",this.buttonClose.node),(t=g.default.getStageProgress())&&t<=2?c.default.callLater(1,function(){o&&cc.isValid(o)&&o.nodeResource&&cc.isValid(o.nodeResource)&&(o.bEnabledPartClick=!0)},this):this.bEnabledPartClick=!0,[2]})})},t.prototype.playUIActionIn=function(e){for(var t=[],o=[this.nodeTitleBar,this.buttonClose.node],n=0;n<o.length;n++){(r=o[n])._originPos=r._originPos||r.position,r.active&&t.push({node:r,beginPos:cc.v2(r.x,r.y+500),endPos:r._originPos,delayTime:.01*h.default.random(5),dur:.3})}o=[];for(n=0;n<o.length;n++){(r=o[n])._originPos=r._originPos||r.position,r.active&&t.push({node:r,beginPos:cc.v2(r.x,r.y-500),endPos:r._originPos,delayTime:.01*h.default.random(5),dur:.3})}o=[this.nodeInfo];for(n=0;n<o.length;n++){(r=o[n])._originPos=r._originPos||r.position,r.active&&t.push({node:r,beginPos:cc.v2(r.x+300,r.y),endPos:r._originPos,delayTime:.01*n,dur:.3})}o=[this.nodeAvatarBase];for(n=0;n<o.length;n++){var r;(r=o[n])._originPos=r._originPos||r.position,r.active&&t.push({node:r,beginPos:cc.v2(r.x-300,r.y),endPos:r._originPos,delayTime:.01*n,dur:.3})}T.default.playMoveToActionArr(t,1,null)},t.prototype.findOneCanBuyPartType=function(){for(var e=this.shopPartTypeArr,t=0;t<e.length;t++){var o=e[t];if(f.default.getCanbuyShopItemListByCategory([o.id]).length>0)return o.id}return d.CPartType.DISCOUNT},t.prototype.buildUi=function(){var e,t=this,o=[this.nodeInfo,this.nodeAvatar];for(var n in o){var r=o[n];e=[r.x,r.y,r.scale],r._ox=e[0],r._oy=e[1],r._os=e[2]}this.nodeAvatar._osx=this.nodeAvatar.scaleX,this.nodeAvatar._osy=this.nodeAvatar.scaleY,(new P.default).parent=this.nodeTitleBar;var a=new D.default;this.structAvatar=a,this.viewAvatar=b.default.createView("vAvatar",{structAvatar:this.structAvatar}),this.viewAvatar.parent=this.nodeAvatar,this.viewAvatar.setScale(this.DEFAULT_AVATAR_SCALE),this.viewAvatar.setPreloadDelayRefresh(!0),this.viewAvatar.refreshAll();var i=this.nodeListNormal,s=new u.default;s.setLayouter((new m.default).setCellSize(128,168).setCols(4).setGap(6,6).setPending(0)),s.setCreator(function(e){var o=new _.default({fOnClick:t.onClickShopItem.bind(t),fOnClickBuy:t.onClickBuyShopItem.bind(t)});o.parent=e,e.item=o}),s.setSetter(function(e,o){var n=e.item;n.fillByShopId(o.shopId),n.setSelected(t.selectedShopId==o.shopId),A.default.registerGuideNode(ul.format("vShopDialog.nodePart%d",o.shopId),e)}),s.parent=i,s.setContentSize(i.getContentSize()),s.setAnchorPoint(.5,1),this.reuseListNormal=s,i=this.nodeListDiscount,(s=new u.default).setLayouter((new m.default).setCellSize(128,168).setCols(4).setGap(6,6).setPending(0)),s.setCreator(function(e){var o=new v.default({fOnClick:t.onClickShopItem.bind(t),fOnClickBuy:t.onClickBuyShopItem.bind(t)});o.parent=e,e.item=o}),s.setSetter(function(e,o){var n=e.item;n.fillByShopId(o.shopId),n.setSelected(t.selectedShopId==o.shopId),A.default.registerGuideNode(ul.format("vShopDialog.nodePart%d",o.shopId),e)}),s.parent=i,s.setContentSize(i.getContentSize()),s.setAnchorPoint(.5,1),this.reuseListDiscount=s,this.levelBar=new y.default,this.levelBar.parent=this.nodeLevel,this.labelName.string="",this.buttonBuy.node.active=!1},t.prototype.fillDiscount=function(e,t){for(var o=f.default.getCanbuyShopItemListByCategory([d.CPartType.DISCOUNT]),n=[],r=0;r<o.length;r++){var a=o[r];n.push({shopId:a.id,index:r})}if(this.reuseListDiscount.setDatas(n),!t){this.reuseListDiscount.jumpToHead();var i=n[0]||{};this.selectShopItem(i.shopId,e,!0)}},t.prototype.fillNormal=function(e,t){cc.log("---fillNormal");var o=p.default.get("cosmetic_part_type_db",this.selectedPartType),n=[this.selectedPartType],r=o.subTypes;for(var a in r)n.push(r[a]);for(var i=f.default.getCanbuyShopItemListByCategory(n),s=[],l=0;l<i.length;l++){var c=i[l];this.context.disableSpecialType&&c.specialPartType||s.push({shopId:c.id,index:l,order:c.order,level:p.default.get("cosmetic_part_db",c.id,"level")||0,bLimitOwn:c.bLimitOwn})}if(s=h.default.sortArrayByField(s,["-order","level"]),this.reuseListNormal.setDatas(s),!t){this.reuseListNormal.jumpToHead();var u=s[0]||{};this.selectShopItem(u.shopId,e,!0),cc.log("----fillNormal")}},t.prototype.fillShopItem=function(e){var t=this,o=this.selectedShopId;if(this.structAvatar.fillByPartIds(this.defaulPartIds),o){this.nodeAvatar.active=!0,this.buttonBuy.node.active=!0,this.spriteSubject.node.active=!0,A.default.registerGuideNode("vShopDialog.buttonBuy",this.nodeBuy);var n=p.default.get("shop_template_db",o),r=n.items[0][0],a=p.default.get("item_template_db",r)||{};if(this.labelName.string=a.name||"",this.labelDesc.string=a.desc||"",this.levelBar.setLevel(5,a.level||0),a&&a.flag==d.default.ITEM_FLAG_PART){var i=p.default.get("cosmetic_part_db",r),s=0,l=0,u=p.default.getDb("cosmetic_subject_tag_db");for(var h in u){var f=u[h],g=i[f.id];s<g&&(l=f.id,s=g)}if(l){var m=p.default.get("cosmetic_subject_tag_db",l);this.spriteSubject.loadSpriteFrameAndKeepSize(m.texture)}var _=i.typeData.shopAvatarOffset,v=[this.nodeAvatar._ox,this.nodeAvatar._oy],y=v[0],b=v[1],R=[this.nodeAvatar._osx,this.nodeAvatar._osy],T=R[0],D=R[1];_.offset&&(y+=_.offset[0],b+=_.offset[1]),_.scale&&(T*=_.scale,D*=_.scale),e?(this.nodeAvatar.position=cc.v2(y,b),this.nodeAvatar.setScale(T,D)):(this.nodeAvatar.stopAllActions(),this.nodeAvatar.runAction(cc.spawn(cc.moveTo(.2,cc.v2(y,b)).easing(cc.easeInOut(1.5)),cc.scaleTo(.2,T,D).easing(cc.easeInOut(1.5)))));var I=[r];if(n.shopPartIds&&n.shopPartIds.length>0)for(var w=0;w<n.shopPartIds.length;w++){var L=n.shopPartIds[w];I.push(L)}if(this.structAvatar.fillByPartIds(I),!C.default.bUnlockAllStage&&n.unlockAid&&S.default.getAchievement(n.unlockAid)&&S.default.getAchievement(n.unlockAid).state<d.QuestState.finished){this.buttonBuy.node.active=!1,this.nodeCondition.active=!0;var P=S.default.getAchievement(n.unlockAid);if(P){var E=P.maxCount-P.count,N=P.template.desc;N=N.replace("$remain_count",E.toString()),this.labelCondition.string=N}else this.labelCondition.string="unknown"}else this.nodeCondition.active=!1}}else this.nodeAvatar.active=!1,this.labelDesc.string="",this.levelBar.setLevel(5,0),this.buttonBuy.node.active=!1,this.spriteSubject.node.active=!1,this.labelName.string="";c.default.callLater(.01,function(){if(t&&cc.isValid(t)&&t.nodeResource&&cc.isValid(t.nodeResource)&&(t.viewAvatar.refreshAll(),!e)){var o=k.default.get("particle","bao_2");if(!o)return;o.scale=.6,o.parent=t.nodeAvatar,o.position=cc.v2(0,180),o.setAutoRemoveOnFinish(!0)}},this)},t.prototype.refreshPartTypeStatus=function(e){var t={998:this.toggleButtonType998,11:this.toggleButtonType11,13:this.toggleButtonType13,14:this.toggleButtonType14,15:this.toggleButtonType15,16:this.toggleButtonType16,17:this.toggleButtonType17};for(var o in t){t[o].setPressStatus(!1)}var n=t[e];n.setPressStatus(!0),n.node.runAction(cc.sequence(cc.scaleTo(.1,1.2,1.2),cc.scaleTo(.1,1,1)))},t.prototype.selectPartType=function(e,t){var o=this;this.refreshPartTypeStatus(e),this.selectedPartType!=e&&(this.selectedPartType=e,this.reuseListDiscount.active=!1,this.reuseListNormal.active=!1,this.nodeNormal.active=!1,this.nodeDiscount.active=!1,e==d.CPartType.DISCOUNT?(this.nodeDiscount.active=!0,this.reuseListDiscount.active=!0,c.default.callLater(.01,function(){o&&cc.isValid(o)&&o.nodeResource&&cc.isValid(o.nodeResource)&&o.fillDiscount(t)},this)):(this.nodeNormal.active=!0,this.reuseListNormal.active=!0,c.default.callLater(.01,function(){o&&cc.isValid(o)&&o.nodeResource&&cc.isValid(o.nodeResource)&&o.fillNormal(t)},this)))},t.prototype.selectShopItem=function(e,t,o){cc.log("---selectShopItem=",this.selectedShopId,e),this.selectedShopId!=e&&(this.selectedShopId=e,this.selectedPartType==d.CPartType.DISCOUNT?this.reuseListDiscount.refreshActiveCells():this.reuseListNormal.refreshActiveCells(),this.fillShopItem(t))},t.prototype.onClickBuyShopItem=function(e){var t=null,o="";this.selectedPartType==d.CPartType.DISCOUNT?(t=this.reuseListDiscount.getDatas(),o="\u5546\u5e97\u7279\u60e0"):(t=this.reuseListNormal.getDatas(),o="\u5546\u5e97\u666e\u901a"),this._lastBuyIndex=0,this._lastBuyShopId=e;for(var n=0;n<t.length;n++){if(t[n].shopId==e){this._lastBuyIndex=n;break}}f.default.requestBuy(e,1,o),this.sendMsg("MSG_GUIDE_POINT",{id:ul.format("vShopDialog.buyButton%d.click",e)})},t.prototype.onTouchButtonBuy=function(e){e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"vShopDialog.buttonBuy.click"}),this.onClickBuyShopItem(this.selectedShopId))},t.prototype.onTouchButtonClose=function(e){e.isClick()&&(this.sendMsg("MSG_GUIDE_POINT",{id:"vShopDialog.buttonClose.click"}),this.closeDialog())},t.prototype.onTouchToggleButtonType998=function(e){e.isClick()&&this.onClickPartType(998)},t.prototype.onTouchToggleButtonType11=function(e){e.isClick()&&this.onClickPartType(11)},t.prototype.onTouchToggleButtonType13=function(e){e.isClick()&&this.onClickPartType(13)},t.prototype.onTouchToggleButtonType14=function(e){e.isClick()&&this.onClickPartType(14)},t.prototype.onTouchToggleButtonType15=function(e){e.isClick()&&this.onClickPartType(15)},t.prototype.onTouchToggleButtonType16=function(e){e.isClick()&&this.onClickPartType(16)},t.prototype.onTouchToggleButtonType17=function(e){e.isClick()&&this.onClickPartType(17)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onClickPartType=function(e){this.bEnabledPartClick&&(this.selectPartType(e),this.sendMsg("MSG_GUIDE_POINT",{id:ul.format("vShopDialog.nodePartType%d.click",e)}))},t.prototype.onClickShopItem=function(e){this.bEnabledPartClick&&(this.selectShopItem(e),this.sendMsg("MSG_GUIDE_POINT",{id:ul.format("vShopDialog.nodePart%d.click",e)}))},t.prototype.onMsgItemBuySuccessed=function(e){var t=e.shopId;this.selectedShopId=null,this.fillShopItem(!0);var o=this._lastBuyIndex||0,n=null;this.selectedPartType==d.CPartType.DISCOUNT?(this.fillDiscount(!1,!0),n=this.reuseListDiscount):(this.fillNormal(!1,!0),n=this.reuseListNormal);var r=n.getDatas()||[];r.length>0&&(o=cc.misc.clampf(o,0,r.length-1),this.selectShopItem(r[o].shopId),n.jumpToIndex(o)),this.currBoughtShopIdDict=this.currBoughtShopIdDict||{},this.currBoughtShopIdDict[t]=!0},t.prototype.onMsgAdEventSuccessd=function(e){},t=r([N],t)}(l.default));o.default=O,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/component/ToggleButton":"ToggleButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../../ulframework/view/ReuseLayouterVGrid":"ReuseLayouterVGrid","../../../ulframework/view/ReuseList":"ReuseList","../../Const":"Const","../../manager/mgrAchievement":"mgrAchievement","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDebug":"mgrDebug","../../manager/mgrDirector":"mgrDirector","../../manager/mgrEffect":"mgrEffect","../../manager/mgrGuide":"mgrGuide","../../manager/mgrPool":"mgrPool","../../manager/mgrShop":"mgrShop","../../manager/mgrSound":"mgrSound","../../manager/mgrStage":"mgrStage","../../manager/mgrStatics":"mgrStatics","../../struct/sAvatar":"sAvatar","../node/vCommonTitleBarRmbGold":"vCommonTitleBarRmbGold","../node/vLevelBar":"vLevelBar","../node/vShopItemDiscount":"vShopItemDiscount","../node/vShopItemNormal":"vShopItemNormal"}],vShopItemDiscount:[function(e,t,o){"use strict";cc._RF.push(t,"87389Mv7rZJ2IlR6B0MMw+4","vShopItemDiscount");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/ViewBase"),c=e("../../manager/mgrCfg"),u=e("../../manager/mgrPlayer"),d=e("./vLevelBar"),p=cc._decorator,h=p.ccclass,f=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBg=null,t.labelPrice=null,t.nodeLevel=null,t.nodePrice=null,t.spriteFlag=null,t.spriteIcon=null,t.spritePriceIcon=null,t.spriteSelected=null,t.bUnlockedBuy=!1,t.bDiscountItem=!1,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vShopItemDiscount"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBg:[s.default,"onTouchButtonBg"],CC_labelPrice:[cc.Label],CC_nodeLevel:[cc.Node],CC_nodePrice:[cc.Node],CC_spriteFlag:[cc.Sprite],CC_spriteIcon:[cc.Sprite],CC_spritePriceIcon:[cc.Sprite],CC_spriteSelected:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.spriteLevels=[],this.levelBar=new d.default,this.levelBar.parent=this.nodeLevel},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillByShopId=function(e){return a(this,void 0,void 0,function(){var t,o,n,r;return i(this,function(a){this.shopId=e;try{if(e=this.shopId,!(t=c.default.get("shop_template_db",e)))return[2];if(o=t.items[0][0],!(n=c.default.get("cosmetic_part_db",o)))return[2];this.spriteIcon.loadSpriteFrameAndKeepSize(n.icon),r=u.default.getIcon(t.priceUnit),this.labelPrice.string=u.default.getItemAmountStr(t.price.toString()),this.spritePriceIcon.loadSpriteFrameAndKeepSize(r),this.bDiscountItem,t.discountData&&t.discountData.flagTexture?(this.spriteFlag.loadSpriteFrameAndKeepSize(t.discountData.flagTexture),this.spriteFlag.node.opacity=255):this.spriteFlag.node.opacity=0,this.levelBar.setLevel(5,n.level),this.nodePrice.active=t.price>0&&!t.specialPartType&&!t.limitOwnOriginShopId}catch(e){cc.log("----vShopItemDiscount fill error")}return[2]})})},t.prototype.setSelected=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){return this.context.bSelected=e,e=this.context.bSelected,this.spriteSelected.node.active=e,[2]})})},t.prototype.onTouchButtonBg=function(e){e.isClick()&&this.context.fOnClick&&this.context.fOnClick(this.shopId)},t.prototype.onTouchButtonBuy=function(e){e.isClick()&&this.context.fOnClickBuy&&this.context.fOnClickBuy(this.shopId)},r([l.default.requireResourceLoaded],t.prototype,"fillByShopId",null),r([l.default.requireResourceLoaded],t.prototype,"setSelected",null),t=r([h],t)}(l.default));o.default=f,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrPlayer":"mgrPlayer","./vLevelBar":"vLevelBar"}],vShopItemNormal:[function(e,t,o){"use strict";cc._RF.push(t,"25e394PMb5Ck6palOTH52p9","vShopItemNormal");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/ViewBase"),c=e("../../manager/mgrCfg"),u=e("../../manager/mgrPlayer"),d=e("./vLevelBar"),p=cc._decorator,h=p.ccclass,f=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBg=null,t.labelPrice=null,t.nodeLevel=null,t.nodePrice=null,t.spriteIcon=null,t.spritePriceIcon=null,t.spriteSelected=null,t.bUnlockedBuy=!1,t.bDiscountItem=!1,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vShopItemNormal"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBg:[s.default,"onTouchButtonBg"],CC_labelPrice:[cc.Label],CC_nodeLevel:[cc.Node],CC_nodePrice:[cc.Node],CC_spriteIcon:[cc.Sprite],CC_spritePriceIcon:[cc.Sprite],CC_spriteSelected:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.spriteLevels=[],this.levelBar=new d.default,this.levelBar.parent=this.nodeLevel},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillByShopId=function(e){return a(this,void 0,void 0,function(){var t,o,n,r;return i(this,function(a){this.shopId=e;try{if(e=this.shopId,!(t=c.default.get("shop_template_db",e)))return[2];if(o=t.items[0][0],!(n=c.default.get("cosmetic_part_db",o)))return[2];this.spriteIcon.loadSpriteFrameAndKeepSize(n.icon),r=u.default.getIcon(t.priceUnit),this.labelPrice.string=u.default.getItemAmountStr(t.price.toString()),this.spritePriceIcon.loadSpriteFrameAndKeepSize(r),this.bDiscountItem,this.levelBar.setLevel(5,n.level),this.nodePrice.active=t.price>0&&!t.specialPartType&&!t.limitOwnOriginShopId}catch(e){cc.log("----vShopItemNormal fill error")}return[2]})})},t.prototype.setSelected=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){return this.context.bSelected=e,e=this.context.bSelected,this.spriteSelected.node.active=e,[2]})})},t.prototype.onTouchButtonBg=function(e){e.isClick()&&this.context.fOnClick&&this.context.fOnClick(this.shopId)},t.prototype.onTouchButtonBuy=function(e){e.isClick()&&this.context.fOnClickBuy&&this.context.fOnClickBuy(this.shopId)},r([l.default.requireResourceLoaded],t.prototype,"fillByShopId",null),r([l.default.requireResourceLoaded],t.prototype,"setSelected",null),t=r([h],t)}(l.default));o.default=f,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrPlayer":"mgrPlayer","./vLevelBar":"vLevelBar"}],vShopItemType:[function(e,t,o){"use strict";cc._RF.push(t,"cccf6Ca05ZK8rRal2v35LDa","vShopItemType");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/ViewBase"),c=e("../../manager/mgrCfg"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBg=null,t.nodeSelected=null,t.spriteFlag=null,t.spriteIcon=null,t.partType=0,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vShopItemType"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBg:[s.default,"onTouchButtonBg"],CC_nodeSelected:[cc.Node],CC_spriteFlag:[cc.Sprite],CC_spriteIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buttonBg.setActionEnable(!1)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillByPartType=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){return this.partType=e,e=this.partType,this.spriteFlag.node.active=!1,this.spriteIcon.loadSpriteFrameAndKeepSize(c.default.get("cosmetic_part_type_db",e,"icon")),[2]})})},t.prototype.setSelected=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){return this.context.bSelected=e,e=this.context.bSelected,this.nodeSelected.active=e,this.spriteIcon.node.active=!e,[2]})})},t.prototype.onTouchButtonBg=function(e){e.isClick()&&this.context.fOnClick instanceof Function&&this.context.fOnClick(this.partType)},r([l.default.requireResourceLoaded],t.prototype,"fillByPartType",null),r([l.default.requireResourceLoaded],t.prototype,"setSelected",null),t=r([d],t)}(l.default));o.default=p,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg"}],vShoper:[function(e,t,o){"use strict";cc._RF.push(t,"1064bUYYTBOLIvZ0Z4XgvM4","vShoper");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/view/ViewBase"),i=e("../../manager/mgrPool"),s=e("../../../ulframework/utils/Tools"),l=e("../../manager/mgrCfg"),c=e("../../Const"),u=e("../../../ulframework/utils/Timer"),d=cc._decorator,p=d.ccclass,h=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currOrderNum=0,t.gotOrderNum=0,t.costAdditionAmount=0,t.costNormalAmount=0,t.spineParams={},t.continuesRewardAmount=0,t.labelCount=null,t.labelTip=null,t.nodeRate=null,t.nodeRateContent=null,t.nodeSubject=null,t.nodeSubjectContent=null,t.nodeTip=null,t.nodeTipContent=null,t.nodeUnit=null,t.spriteRateIcon=null,t.spriteSubject=null,t.SPINE_MOV_IDLE="mov_1",t.SPINE_MOV_WALK="mov_2",t.SPINE_MOV_RUN="mov_3",t.SPINE_MOV_WAWA="mov_4",t}return n(t,e),t.prototype._getResourceName=function(){return"node/vShoper"},t.prototype._getResourceBindingConfig=function(){return{CC_labelCount:[cc.Label],CC_labelTip:[cc.Label],CC_nodeRate:[cc.Node],CC_nodeRateContent:[cc.Node],CC_nodeSubject:[cc.Node],CC_nodeSubjectContent:[cc.Node],CC_nodeTip:[cc.Node],CC_nodeTipContent:[cc.Node],CC_nodeUnit:[cc.Node],CC_spriteRateIcon:[cc.Sprite],CC_spriteSubject:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit(),this.context.fOnRegisterShoperGuideNode&&this.context.genedShoperCount<=3&&this.context.fOnRegisterShoperGuideNode(this.context.genedShoperCount,this.nodeSubjectContent),u.default.callLoop(.12,this.onTimerHandler.bind(this),this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),cc.log("---shoper destroy"),this.spine&&(i.default.put(this.spine),this.spine.removeFromParent(),this.spine=null),this.spineRate&&(i.default.put(this.spineRate),this.spineRate.removeFromParent(),this.spineRate=null)},t.prototype.onTimerHandler=function(){this.tryUpdateAvatarPos(),this.tryUpdateUIInfo()},t.prototype.tryUpdateAvatarPos=function(){if(this.spine&&this.nodeAvatar&&this.bStartUpdateAvatarPos)try{var e=this.spine.getComponent(sp.Skeleton);e.updateWorldTransform(),this.nodeAvatar.position=cc.v2(e.findBone("box").worldX,e.findBone("box").worldY)}catch(e){}},t.prototype.tryUpdateUIInfo=function(){this.isResourceLoaded()&&(this.nodeTipContent.scaleX=this.scaleX>0?Math.abs(this.nodeTipContent.scaleX):-Math.abs(this.nodeTipContent.scaleX),this.nodeRateContent.scaleX=this.scaleX>0?Math.abs(this.nodeRateContent.scaleX):-Math.abs(this.nodeRateContent.scaleX))},t.prototype.changeScaleX=function(e){this.scaleX=e,this.tryUpdateUIInfo()},t.prototype.onLoadedInit=function(){this.nodeSubject._originScale=this.nodeSubject.scale,this.nodeRate._originPos=this.nodeRate.position;var e=new cc.Node;e.zIndex=100,e.parent=this,this.nodeAvatarRoot=e,this.nodeAvatar=new cc.Node,this.nodeAvatar.parent=e,this.nodeAvatar.position=cc.v2(30,60);var t=this.context.spineData;this.spineParams=t;var o=i.default.get("spine",t.spineId);o&&(o.parent=this.nodeUnit,o.play(this.context.mov||"mov_1",!0)),this.spine=o,this.setOrderNum(this.context.orderNum||0),this.nodeUnit.scale=this.context.initUnitScale||1,this.nodeRate.y=this.nodeRate._originPos.y*this.nodeUnit.scale},t.prototype.refreshSubject=function(){this.context.subjectId=this.context.subjectId||s.default.random(1,6);var e=l.default.get("cosmetic_subject_tag_db",this.context.subjectId);this.spriteSubject.loadSpriteFrameAndKeepSize(e.texture)},t.prototype.setShoperSubjectId=function(e){this.context.subjectId=e,this.refreshSubject()},t.prototype.getShoperSubjectId=function(){return this.context.subjectId},t.prototype.setUnitScale=function(e){this.nodeUnit.scale=(e||1)*(this.context.initUnitScale||1),this.nodeAvatarRoot.scale=e,this.nodeRate.y=this.nodeRate._originPos.y*this.nodeUnit.scale},t.prototype.setShoperHolder=function(e){this.nodeHolder=e},t.prototype.getShoperHolder=function(){return this.nodeHolder},t.prototype.isMan=function(){return!!this.spineParams&&!!this.spineParams.bMan},t.prototype.getAvatarNodeWorldPos=function(){if(!this.spine)return null;var e=this.spine.getComponent(sp.Skeleton);e.updateWorldTransform();e.findBone("box");return this.spine.convertToWorldSpaceAR(cc.v2(e.findBone("box").worldX,e.findBone("box").worldY))},t.prototype.getShoperCatchOffsetPos=function(){return this.spineParams.offsetCatchPos||cc.v2(0,0)},t.prototype.addAvatar=function(e){if(this.nodeAvatar){var t=e.parent.convertToWorldSpaceAR(e.position),o=this.nodeAvatar.convertToNodeSpaceAR(t);e.position=o,e.parent=this.nodeAvatar,this.onTimerHandler()}},t.prototype.setOrderNum=function(e){this.currOrderNum=e||0,this.context.orderNum=this.currOrderNum,this.labelCount.string=ul.format("%s",this.currOrderNum),this.labelCount.node.active=!(this.currOrderNum-this.gotOrderNum<=1)},t.prototype.getOrderNum=function(){return this.currOrderNum||this.context.orderNum||0},t.prototype.addGotOrderNum=function(e){this.gotOrderNum+=e},t.prototype.getGotOrderNum=function(){return this.gotOrderNum},t.prototype.getUncompleteOrderNum=function(){return Math.max(this.currOrderNum-this.gotOrderNum,0)},t.prototype.addContinuesRewardAmount=function(e){this.continuesRewardAmount+=e},t.prototype.getContinuesRewardAmount=function(){return this.continuesRewardAmount},t.prototype.addAdditionCostAmount=function(e){this.costAdditionAmount+=e},t.prototype.getAdditionCostAmount=function(){return this.costAdditionAmount},t.prototype.addNormalCostAmount=function(e){this.costNormalAmount+=e},t.prototype.getNormalCostAmount=function(){return this.costNormalAmount},t.prototype.getCostAmount=function(){return this.costNormalAmount+this.costAdditionAmount+this.continuesRewardAmount},t.prototype.setBought=function(){this.bBought=!0},t.prototype.isBought=function(){return this.bBought},t.prototype.boughtGo=function(){this.spine.play([this.SPINE_MOV_RUN],!0),this.bBought=!0},t.prototype.boughtCatch=function(){this.spine.play(["mov_4","mov_8"],!0),this.bBought=!0},t.prototype.idle=function(){this.doSpineMov(this.SPINE_MOV_IDLE)},t.prototype.walk=function(){this.doSpineMov(this.SPINE_MOV_WALK)},t.prototype.run=function(){this.doSpineMov(this.SPINE_MOV_WALK)},t.prototype.wawa=function(){this.doSpineMov(this.SPINE_MOV_WAWA)},t.prototype.doSpineMov=function(e){this.spine&&this.currSpineMov!=e&&(this.spine.play(e,!0),this.currSpineMov=e)},t.prototype.setTimeScale=function(e){this.spine&&this.spine.setTimeScale(e)},t.prototype.showSubject=function(){this.getShoperSubjectId()||this.setShoperSubjectId(s.default.random(1,6)),this.bStartUpdateAvatarPos=!0;var e=this.nodeSubject._originScale;this.nodeSubject.scale=0,this.nodeSubject.active=!0,this.nodeSubject.runAction(cc.sequence(cc.scaleTo(.8,e,e).easing(cc.easeElasticOut(.8)),cc.delayTime(1),cc.callFunc(function(){})))},t.prototype.hideSubject=function(){this.nodeSubject.runAction(cc.scaleTo(.8,0,0).easing(cc.easeElasticOut(.8)))},t.prototype.getSubjectNode=function(){return this.nodeSubjectContent},t.prototype.showRate=function(e){var t=this,o=i.default.get("spine","biaoqing");if(o){var n=e==c.GoodsRate.best?"mov_1":"mov_2";o.play(n,!1),o.parent=this.nodeRate,this.spineRate=o}this.nodeRate.scale=0,this.nodeRate.active=!0,this.nodeRate.runAction(cc.sequence(cc.scaleTo(.8,1,1).easing(cc.easeElasticOut(.8)),cc.delayTime(1),cc.callFunc(function(){t.hideRate()})))},t.prototype.hideRate=function(){this.nodeRate.runAction(cc.scaleTo(.2,0,0))},t.prototype.isTiping=function(){return!!this.nodeTip&&this.nodeTip.getNumberOfRunningActions()>0},t.prototype.showTip=function(e,t){var o=this;!e||""==e||!this.nodeTip||this.nodeTip.getNumberOfRunningActions()>0||(this.nodeTip.scale=0,this.nodeTip.active=!0,this.nodeTip.runAction(cc.sequence(cc.delayTime(t||0),cc.scaleTo(.8,1,1).easing(cc.easeElasticOut(.8)),cc.delayTime(1),cc.callFunc(function(){o.hideTip()}))),this.labelTip.string=e)},t.prototype.hideTip=function(){this.nodeTip.runAction(cc.scaleTo(.5,0,0).easing(cc.easeElasticIn(.8)))},r([a.default.requireResourceLoaded],t.prototype,"refreshSubject",null),r([a.default.requireResourceLoaded],t.prototype,"setUnitScale",null),t=r([p],t)}(a.default));o.default=h,cc._RF.pop()},{"../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrCfg":"mgrCfg","../../manager/mgrPool":"mgrPool"}],vShortCutDouyinDialog:[function(e,t,o){"use strict";cc._RF.push(t,"0f2e8tQerdD/q9GRPqM7VV0","vShortCutDouyinDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrAd"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.labelTitle=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vShortCutDouyinDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_labelTitle:[cc.Label]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),s.default.showViewEnterAd(this.nodeResource,null,null,"ad_banner_find_me_dialog")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onCloseDialogStart=function(){s.default.closeBannerAd()},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t=r([c],t)}(i.default));o.default=u,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrAd":"mgrAd"}],vSignDialog:[function(e,t,o){"use strict";cc._RF.push(t,"a6c8fyTbHFMlp3WH/kc/wMp","vSignDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/utils/Timer"),s=e("../../../ulframework/utils/Tools"),l=e("../../../ulframework/view/DialogBase"),c=e("../../Const"),u=e("../../manager/mgrAd"),d=e("../../manager/mgrCfg"),p=e("../../manager/mgrDirector"),h=e("../../manager/mgrNetwork"),f=e("../../manager/mgrSdk"),g=e("../../manager/mgrSign"),m=e("../../manager/mgrStage"),_=e("../../manager/mgrTip"),v=e("../../struct/sAvatar"),y=e("../node/vAvatar"),C=e("../../../ulframework/component/ToggleButton"),S=e("../../manager/mgrCop"),b=e("../../manager/mgrChannel"),R=e("../../manager/mgrGuide"),T=e("../../manager/mgrI18n"),A=cc._decorator.ccclass,D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonNeedAdv=null,t.buttonNoNeedAdv=null,t.buttonSign=null,t.buttonSignVideo=null,t.labelButtonSign=null,t.labelButtonSignVideo=null,t.labelNeedAdv=null,t.labelNoNeedAdv=null,t.layoutOnline=null,t.nodeAdButtonFlag=null,t.nodeAvatar=null,t.nodeBgParticle1=null,t.nodeBgParticle2=null,t.nodeButtonSign=null,t.nodeButtonSignVideo=null,t.nodeGouMode=null,t.nodeItem1=null,t.nodeItem2=null,t.nodeItem3=null,t.nodeItem4=null,t.nodeItem5=null,t.nodeItem6=null,t.nodeItem7=null,t.nodeItems=null,t.nodeSignBtns=null,t.nodeSigned=null,t.nodeTitle=null,t.nodeTitleBar=null,t.nodeUIRoot=null,t.spriteArt10Autumn=null,t.spriteArt10Normal=null,t.spriteNeedGou=null,t.spriteNoNeedGou=null,t.toggleTipSelect=null,t.items={},t.bNeedShowLottery=!1,t.bLoadedInit=!1,t.AD_VIDEO_DOUBLE_SIGN_NAME="video_double_sign",t.AD_INTER_VIEW_NAME="inter_sign_dialog",t.isNeedAdv=!0,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vSignDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_buttonNeedAdv:[a.default,"onTouchButtonNeedAdv"],CC_buttonNoNeedAdv:[a.default,"onTouchButtonNoNeedAdv"],CC_buttonSign:[a.default,"onTouchButtonSign"],CC_buttonSignVideo:[a.default,"onTouchButtonSignVideo"],CC_toggleTipSelect:[C.default,"onTouchToggleTipSelect"],CC_labelButtonSign:[cc.Label],CC_labelButtonSignVideo:[cc.Label],CC_labelNeedAdv:[cc.Label],CC_labelNoNeedAdv:[cc.Label],CC_layoutOnline:[cc.Layout],CC_nodeAdButtonFlag:[cc.Node],CC_nodeAvatar:[cc.Node],CC_nodeBgParticle1:[cc.Node],CC_nodeBgParticle2:[cc.Node],CC_nodeButtonSign:[cc.Node],CC_nodeButtonSignVideo:[cc.Node],CC_nodeGouMode:[cc.Node],CC_nodeItem1:[cc.Node],CC_nodeItem2:[cc.Node],CC_nodeItem3:[cc.Node],CC_nodeItem4:[cc.Node],CC_nodeItem5:[cc.Node],CC_nodeItem6:[cc.Node],CC_nodeItem7:[cc.Node],CC_nodeItems:[cc.Node],CC_nodeSignBtns:[cc.Node],CC_nodeSigned:[cc.Node],CC_nodeTitle:[cc.Node],CC_nodeTitleBar:[cc.Node],CC_nodeUIRoot:[cc.Node],CC_spriteArt10Autumn:[cc.Sprite],CC_spriteArt10Normal:[cc.Sprite],CC_spriteNeedGou:[cc.Sprite],CC_spriteNoNeedGou:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){if(e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(p.default.size),this.setContentSize(p.default.size),b.default.isCanShowMidAutumn()&&(this.spriteArt10Normal.node.active=!1,this.spriteArt10Autumn.node.active=!0),u.default.isBannerAdValid()){var t=S.default.getNumberValue("ui_banner_height"),o=this.nodeUIRoot.getContentSize(),n=(p.default.size.height-o.height)/2;if(n<t){var r=this.nodeUIRoot.getComponent(cc.Widget);r.verticalCenter+=t-n,r.updateAlignment()}u.default.showViewEnterAd(this.nodeResource,null,this.AD_INTER_VIEW_NAME,"ad_banner_sign_dialog")}else u.default.showIntAd(null,this.AD_INTER_VIEW_NAME);u.default.isAdEventHasChanceTrigger(this.AD_VIDEO_DOUBLE_SIGN_NAME)?s.default.layoutNodesHorizonCenter([this.nodeButtonSign,this.nodeButtonSignVideo],240):(this.nodeButtonSignVideo.active=!1,s.default.layoutNodesHorizonCenter([this.nodeButtonSign],240)),this.nodeUIRoot.y=-p.default.height/2+this.nodeUIRoot.height/2,this.adaptAdMode()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onOpenDialogCompleted=function(){this.onLoadedInit(),this.adaptAdMode(),this.adaptTickModeUi()},t.prototype.onCloseDialogStart=function(){u.default.closeBannerAd()},t.prototype.onTimerLoop=function(){if(this.isResourceLoaded()&&!this._bClosing&&null!=this.bClosing){if(this.fillData(),g.default.hasCanRewardSign()){this.nodeSignBtns.active=!0,this.nodeSigned.active=!1;var e=null;if(this.nodeButtonSignVideo.active?(e=this.nodeButtonSignVideo,this.nodeButtonSign.stopActionByTag(1)):(e=this.nodeButtonSign,this.nodeButtonSignVideo.stopActionByTag(1)),e&&!e.getActionByTag(1)){var t=e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.1).easing(cc.easeInOut(1.5)),cc.scaleTo(.5,1).easing(cc.easeInOut(1.5)))));t&&t.setTag(1)}}else this.nodeButtonSignVideo.stopActionByTag(1),this.nodeButtonSign.stopActionByTag(1),this.nodeSignBtns.active=!1,this.nodeSigned.active=!0;this.bNeedShowLottery&&_.default.isAllGotItemTipDisplayed()&&(this.bNeedShowLottery=!1,p.default.warpDialogWithSmallEffect("vSignLotteryDialog",{suitId:this.lotterySuitId}))}},t.prototype.adaptAdMode=function(){if(g.default.getState()==c.SignState.canSign){if(!this.nodeButtonSignVideo.active)return this.layoutOnline.node.active=!1,void(this.nodeButtonSign.active=!0);this.layoutOnline.node.active=u.default.isOnline(),this.nodeButtonSign.active=u.default.isMcprc(),u.default.isOnline()&&(this.toggleTipSelect.isPressed()?(this.labelButtonSignVideo.setLocalizedString("vSignDialog.6"),this.nodeAdButtonFlag.active=!0):(this.labelButtonSignVideo.setLocalizedString("vSignDialog.7"),this.nodeAdButtonFlag.active=!1))}else this.layoutOnline.node.active=!1},t.prototype.onLoadedInit=function(){this.buildUI(),this.fillData(),this.onTimerLoop(),i.default.callLoop(1,this.onTimerLoop.bind(this),this),this.registerListeners({MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd.bind(this),MSG_AD_EVENT_FAILD:this.onMsgAdEventFaild.bind(this),MSG_AD_EVENT_CANCELED:this.onMsgAdEventCanceled.bind(this)})},t.prototype.adaptTickModeUi=function(){this.nodeGouMode.active=!1,this.buttonNeedAdv.node.active=!1,this.buttonNoNeedAdv.node.active=!1,!R.default.isGuiding()&&b.default.isCanVideoTick()&&this.nodeButtonSignVideo.active&&(this.nodeGouMode.active=!0,this.layoutOnline.node.active=!1,this.nodeButtonSign.active=!0,this.randomNeedAdv()?(this.buttonNeedAdv.node.active=!0,this.labelButtonSign.setLocalizedString("vSignDialog.8")):(this.buttonNoNeedAdv.node.active=!0,this.labelButtonSign.setLocalizedString("vSignDialog.9")))},t.prototype.randomNeedAdv=function(){return s.default.random(100)>50?(this.isNeedAdv=!0,!0):(this.isNeedAdv=!1,!1)},t.prototype.buildUI=function(){this.buttonSign.node._originPos=this.buttonSign.node.position;for(var e={},t=1;t<=7;t++){var o=this["nodeItem"+t.toString()],n=d.default.get("sign_db",t,1),r=p.default.createView(n.viewName,{day:t,fOnClick:this.onClickItem.bind(this)});r.parent=o,e[t]=r,o.active=!0,o.scale=0,o.runAction(cc.sequence(cc.delayTime(.2*(t-1)),cc.scaleTo(.3,1,1)))}this.items=e;var a=d.default.get("suit_db",1007),i=new v.default,s=new y.default({structAvatar:i});s.parent=this.nodeAvatar,i.fillByPartIds(a.displayIds),s.refreshAll(),this.nodeAvatar.scale=1.5,this.nodeAvatar.runAction(cc.sequence(cc.delayTime(.5),cc.fadeIn(.5)))},t.prototype.fillData=function(){g.default.getSignDay();for(var e in this.items){this.items[e].fillData()}this.refresh()},t.prototype.refresh=function(){},t.prototype._sign=function(){var e=g.default.sign(null,this.bAded);e.bSuccessd&&(_.default.addGotItemTip(e.rewardItemId1,e.rewardAmount1),_.default.addGotItemTip(e.rewardItemId2,e.rewardAmount2),this.fillData(),cc.log("lottery",e.bLottery),e.bLottery&&1==f.default.getCopNumberValueByKey("b_sign_lottery")&&e.suitId&&(this.bNeedShowLottery=!0,this.lotterySuitId=e.suitId)),this.bAded=!1},t.prototype.trySign=function(){var e=this,t=g.default.getState();t==c.SignState.canSign?m.default.getStageProgress()>=3&&1==f.default.getCopNumberValueByKey("b_online_sign")?h.default.tryCheckNetwork(function(){e._sign()},function(){_.default.alertPrompt(T.default.getText("vSignDialog.10"),T.default.getText("vSignDialog.11"),T.default.getText("vSignDialog.12"),function(){},"ad_banner_sign_dialog_net")}):this._sign():t==c.SignState.signed?_.default.showMsgTip(T.default.getText("vSignDialog.13")):t==c.SignState.signOver?_.default.showMsgTip(T.default.getText("vSignDialog.14")):t==c.SignState.waitGap&&_.default.showMsgTip(T.default.getText("vSignDialog.15"))},t.prototype.getAutoReSignInfo=function(e){if(e){var t=null;return e<g.default.getSignDay()&&g.default.canReSign(e)&&(t=g.default.getSignIndex(e)),[e,t]}e=null;for(var o=null,n=1;n<=g.default.getSignDay();n++)if(n<g.default.getSignDay()&&g.default.canReSign(n)){e=n,o=g.default.getSignIndex(e);break}return[e,o]},t.prototype.onTouchButtonClose=function(e){e.isClick()&&(this._bClosing=!0,this.closeDialog())},t.prototype.onTouchButtonSign=function(e){if(e.isClick()){if(!R.default.isGuiding()&&b.default.isCanVideoTick()&&this.nodeGouMode.active&&this.nodeButtonSignVideo.active){if(this.isNeedAdv&&this.buttonNeedAdv.node.active&&this.spriteNeedGou.node.active)return void u.default.triggerAdEvent(this.AD_VIDEO_DOUBLE_SIGN_NAME,null,!0);if(!this.isNeedAdv&&this.buttonNoNeedAdv.node.active&&!this.spriteNoNeedGou.node.active)return void u.default.triggerAdEvent(this.AD_VIDEO_DOUBLE_SIGN_NAME,null,!0)}this.trySign()}},t.prototype.onTouchButtonSignVideo=function(e){e.isClick()&&(g.default.getState()!=c.SignState.canSign||u.default.isOnline()&&!this.toggleTipSelect.isPressed()?this.onTouchButtonSign(e):u.default.triggerAdEvent(this.AD_VIDEO_DOUBLE_SIGN_NAME,null,!0))},t.prototype.onTouchToggleTipSelect=function(e){e.isClick()&&this.adaptAdMode()},t.prototype.onTouchButtonNeedAdv=function(e){e.isClick()&&(this.spriteNeedGou.node.active?(this.spriteNeedGou.node.active=!1,this.labelButtonSign.setLocalizedString("vSignDialog.9")):(this.spriteNeedGou.node.active=!0,this.labelButtonSign.setLocalizedString("vSignDialog.8")))},t.prototype.onTouchButtonNoNeedAdv=function(e){e.isClick()&&(this.spriteNoNeedGou.node.active?(this.spriteNoNeedGou.node.active=!1,this.labelButtonSign.setLocalizedString("vSignDialog.8")):(this.spriteNoNeedGou.node.active=!0,this.labelButtonSign.setLocalizedString("vSignDialog.9")))},t.prototype.onClickItem=function(e){},t.prototype.onMsgAdEventSuccessd=function(e){e.adEventId==this.AD_VIDEO_DOUBLE_SIGN_NAME&&(this.bAded=!0,this.trySign())},t.prototype.onMsgAdEventFaild=function(e){},t.prototype.onMsgAdEventCanceled=function(e){this.onMsgAdEventFaild(e)},t=r([A],t)}(l.default);o.default=D,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/component/ToggleButton":"ToggleButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrChannel":"mgrChannel","../../manager/mgrCop":"mgrCop","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n","../../manager/mgrNetwork":"mgrNetwork","../../manager/mgrSdk":"mgrSdk","../../manager/mgrSign":"mgrSign","../../manager/mgrStage":"mgrStage","../../manager/mgrTip":"mgrTip","../../struct/sAvatar":"sAvatar","../node/vAvatar":"vAvatar"}],vSignItemLarge:[function(e,t,o){"use strict";cc._RF.push(t,"9bf16r2bEpO1IQx45VMba1X","vSignItemLarge");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/ViewBase"),c=e("../../manager/mgrSign"),u=e("../../manager/mgrCfg"),d=e("../../manager/mgrPlayer"),p=e("../../manager/mgrAd"),h=cc._decorator.ccclass,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBg=null,t.labelAmount1=null,t.labelAmount2=null,t.labelTime=null,t.labelTitle=null,t.nodePart=null,t.spriteBg=null,t.spriteIcon1=null,t.spriteIcon2=null,t.spriteMask=null,t.spriteReceived=null,t.levelBar=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vSignItemLarge"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBg:[s.default,"onTouchButtonBg"],CC_labelAmount1:[cc.Label],CC_labelAmount2:[cc.Label],CC_labelTime:[cc.Label],CC_labelTitle:[cc.Label],CC_nodePart:[cc.Node],CC_spriteBg:[cc.Sprite],CC_spriteIcon1:[cc.Sprite],CC_spriteIcon2:[cc.Sprite],CC_spriteMask:[cc.Sprite],CC_spriteReceived:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUI(),this.nodePart.active=p.default.isAdEventHasChanceTrigger("video_double_sign")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUI=function(){this.spriteIcon1.node._originSize=this.spriteIcon1.node.getContentSize(),this.spriteIcon2.node._originSize=this.spriteIcon2.node.getContentSize()},t.prototype.fillData=function(){return a(this,void 0,void 0,function(){var e,t,o,n;return i(this,function(r){return cc.isValid(this.nodeResource)?(e=this.context.day,t=c.default.getSignDay(),o=c.default.getSignIndex(),n=null,this.tryShowReSignFlag(),e<t?(this.setRemainTime(0),(n=u.default.quietGet("sign_db",e,c.default.getSignIndex(e)))||(n=u.default.get("sign_db",e,1))):e==t&&(n=u.default.quietGet("sign_db",e,o))?(this.setRemainTime(c.default.getRemainTime()),n=u.default.get("sign_db",e,o)):(this.setRemainTime(0),n=u.default.get("sign_db",e,1)),u.default.quietGet("cosmetic_part_db",n.rewardItemId1)?this.spriteIcon1.node.setContentSize(this.spriteIcon1.node._originSize):this.spriteIcon1.node.setContentSize(this.spriteIcon2.node._originSize),this.spriteIcon1.loadSpriteFrameAndKeepSize(d.default.getIcon(n.rewardItemId1)),this.spriteIcon2.loadSpriteFrameAndKeepSize(d.default.getIcon(n.rewardItemId2)),this.labelAmount1.string=n.rewardAmount1>1?ul.format("*%s",d.default.getItemAmountStr(n.rewardAmount1)):"",this.labelAmount2.string=n.rewardAmount2>1?ul.format("*%s",d.default.getItemAmountStr(n.rewardAmount2)):"",this.labelTitle.setLocalizedString(n.title),[2]):[2]})})},t.prototype.setRemainTime=function(e){if(this.spriteMask.node&&cc.isValid(this.spriteMask.node))if(e<=0)this.spriteMask.node.active=!!this.spriteReceived.node.active,this.labelTime.node.active=!1;else{this.spriteMask.node.active=!0,this.labelTime.node.active=!0;var t=Math.floor(e/3600),o=Math.floor(e/60)%60,n=e%60;this.labelTime.string=ul.format("%02d:%02d:%02d",t,o,n)}},t.prototype.tryShowReSignFlag=function(){this.spriteReceived.node.active=!1;var e=this.context.day,t=c.default.getSignDay();if(!(e>t)){var o=c.default.hasCanRewardSign();e<t?this.spriteReceived.node.active=!0:c.default.getRemainTime()||(this.spriteReceived.node.active=!o)}},t.prototype.onTouchButtonBg=function(e){e.isClick()&&this.context.fOnClick&&this.context.fOnClick(this.context.day)},r([l.default.requireResourceLoaded],t.prototype,"fillData",null),r([l.default.requireResourceLoaded],t.prototype,"tryShowReSignFlag",null),t=r([h],t)}(l.default);o.default=f,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrSign":"mgrSign"}],vSignItemSmall:[function(e,t,o){"use strict";cc._RF.push(t,"ce2adtIOmBGC4Si6mr4WkQc","vSignItemSmall");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/ViewBase"),c=e("../../manager/mgrSign"),u=e("../../manager/mgrCfg"),d=e("../../manager/mgrPlayer"),p=e("../../manager/mgrAd"),h=cc._decorator.ccclass,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBg=null,t.labelAmount1=null,t.labelAmount2=null,t.labelTime=null,t.labelTitle=null,t.nodePart=null,t.spriteBg=null,t.spriteIcon1=null,t.spriteIcon2=null,t.spriteMask=null,t.spriteReceived=null,t.levelBar=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vSignItemSmall"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBg:[s.default,"onTouchButtonBg"],CC_labelAmount1:[cc.Label],CC_labelAmount2:[cc.Label],CC_labelTime:[cc.Label],CC_labelTitle:[cc.Label],CC_nodePart:[cc.Node],CC_spriteBg:[cc.Sprite],CC_spriteIcon1:[cc.Sprite],CC_spriteIcon2:[cc.Sprite],CC_spriteMask:[cc.Sprite],CC_spriteReceived:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUI()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUI=function(){this.spriteIcon1.node._originSize=this.spriteIcon1.node.getContentSize(),this.spriteIcon2.node._originSize=this.spriteIcon2.node.getContentSize(),this.nodePart.active=p.default.isAdEventHasChanceTrigger("video_double_sign")},t.prototype.fillData=function(){return a(this,void 0,void 0,function(){var e,t,o,n;return i(this,function(r){return cc.isValid(this.nodeResource)?(e=this.context.day,t=c.default.getSignDay(),o=c.default.getSignIndex(),n=null,this.tryShowReSignFlag(),e<t?(this.setRemainTime(0),(n=u.default.quietGet("sign_db",e,c.default.getSignIndex(e)))||(n=u.default.get("sign_db",e,1))):e==t&&(n=u.default.quietGet("sign_db",e,o))?(this.setRemainTime(c.default.getRemainTime()),n=u.default.get("sign_db",e,o)):(this.setRemainTime(0),n=u.default.get("sign_db",e,1)),u.default.quietGet("cosmetic_part_db",n.rewardItemId1)?this.spriteIcon1.node.setContentSize(this.spriteIcon1.node._originSize):this.spriteIcon1.node.setContentSize(this.spriteIcon2.node._originSize),this.spriteIcon1.loadSpriteFrameAndKeepSize(d.default.getIcon(n.rewardItemId1)),this.spriteIcon2.loadSpriteFrameAndKeepSize(d.default.getIcon(n.rewardItemId2)),this.labelAmount1.string=n.rewardAmount1>1?ul.format("*%s",d.default.getItemAmountStr(n.rewardAmount1)):"",this.labelAmount2.string=n.rewardAmount2>1?ul.format("*%s",d.default.getItemAmountStr(n.rewardAmount2)):"",this.labelTitle.setLocalizedString(n.title),[2]):[2]})})},t.prototype.setRemainTime=function(e){if(this.spriteMask.node&&cc.isValid(this.spriteMask.node))if(e<=0)this.spriteMask.node.active=!!this.spriteReceived.node.active,this.labelTime.node.active=!1;else{this.spriteMask.node.active=!0,this.labelTime.node.active=!0;var t=Math.floor(e/3600),o=Math.floor(e/60)%60,n=e%60;this.labelTime.string=ul.format("%02d:%02d:%02d",t,o,n)}},t.prototype.tryShowReSignFlag=function(){this.spriteReceived.node.active=!1;var e=this.context.day,t=c.default.getSignDay();if(!(e>t)){var o=c.default.hasCanRewardSign();e<t?this.spriteReceived.node.active=!0:c.default.getRemainTime()||(this.spriteReceived.node.active=!o)}},t.prototype.onTouchButtonBg=function(e){e.isClick()&&this.context.fOnClick&&this.context.fOnClick(this.context.day)},r([l.default.requireResourceLoaded],t.prototype,"fillData",null),r([l.default.requireResourceLoaded],t.prototype,"tryShowReSignFlag",null),t=r([h],t)}(l.default);o.default=f,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrSign":"mgrSign"}],vSignLotteryDialog:[function(e,t,o){"use strict";cc._RF.push(t,"9321dlVECpMOK7adxWkIEKp","vSignLotteryDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/utils/Tools"),s=e("../../../ulframework/view/DialogBase"),l=e("../../Const"),c=e("../../manager/mgrAd"),u=e("../../manager/mgrCfg"),d=e("../../manager/mgrDirector"),p=e("../../manager/mgrGuide"),h=e("../../manager/mgrPlayer"),f=e("../../manager/mgrTip"),g=e("../../struct/sAvatar"),m=e("../node/vAvatar"),_=e("../node/vSignLotteryItem"),v=e("../../manager/mgrSound"),y=e("../node/vCommonTitleBarRmbGold"),C=e("../../manager/mgrI18n"),S=cc._decorator.ccclass,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectedSuitItemIndex=0,t.buttonBuy=null,t.buttonBuyVideo=null,t.buttonClose=null,t.buttonNext=null,t.buttonPrevious=null,t.labelButtonBuy=null,t.labelButtonBuyVideo=null,t.labelBuyTip=null,t.labelTitle=null,t.nodeAvatar=null,t.nodeBannerArea=null,t.nodeBottomBuy=null,t.nodeBuy=null,t.nodeCenter=null,t.nodeItem1=null,t.nodeItem10=null,t.nodeItem2=null,t.nodeItem3=null,t.nodeItem4=null,t.nodeItem5=null,t.nodeItem6=null,t.nodeItem7=null,t.nodeItem8=null,t.nodeItem9=null,t.nodeItems=null,t.nodeLayoutContent=null,t.nodeTitle=null,t.nodeTitleBar=null,t.nodeUIRoot=null,t.LOTTERY_ITEM_NUM=10,t.AD_FREE_LOTTERY_NAME="video_free_lottery",t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vSignLotteryDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBuy:[a.default,"onTouchButtonBuy"],CC_buttonBuyVideo:[a.default,"onTouchButtonBuyVideo"],CC_buttonClose:[a.default,"onTouchButtonClose"],CC_buttonNext:[a.default,"onTouchButtonNext"],CC_buttonPrevious:[a.default,"onTouchButtonPrevious"],CC_labelButtonBuy:[cc.Label],CC_labelButtonBuyVideo:[cc.Label],CC_labelBuyTip:[cc.Label],CC_labelTitle:[cc.Label],CC_nodeAvatar:[cc.Node],CC_nodeBannerArea:[cc.Node],CC_nodeBottomBuy:[cc.Node],CC_nodeBuy:[cc.Node],CC_nodeCenter:[cc.Node],CC_nodeItem1:[cc.Node],CC_nodeItem10:[cc.Node],CC_nodeItem2:[cc.Node],CC_nodeItem3:[cc.Node],CC_nodeItem4:[cc.Node],CC_nodeItem5:[cc.Node],CC_nodeItem6:[cc.Node],CC_nodeItem7:[cc.Node],CC_nodeItem8:[cc.Node],CC_nodeItem9:[cc.Node],CC_nodeItems:[cc.Node],CC_nodeLayoutContent:[cc.Node],CC_nodeTitle:[cc.Node],CC_nodeTitleBar:[cc.Node],CC_nodeUIRoot:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){if(e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(d.default.size),this.setContentSize(d.default.size),this.setShadowOpacity(200),c.default.isBannerAdValid()){var t=this.nodeUIRoot.getComponent(cc.Widget);t.bottom=c.default.getBannerHeight(),t.updateAlignment()}else{var o=this.nodeBottomBuy.getComponent(cc.Widget);o.bottom=100,o.updateAlignment()}},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onOpenDialogCompleted=function(){this.onLoadedInit()},t.prototype.onCloseDialogStart=function(){c.default.closeBannerAd()},t.prototype.onLoadedInit=function(){var e=this;c.default.showViewEnterAd(this.nodeResource,null,null,"ad_banner_sign_lottery_dialog"),this.setClickShadowClose(!1),this.initData(),this.buildUi(),this.fillSuitItemsData(),this.refreshSuit(),this.playUIActionOut(1e-5),this.actionInAvatar(!1,null,.5),this.viewAvatar.stopAllActions(),this.buttonBuy.node._buyAction=function(){e.buttonBuy.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.1,1.1),cc.scaleTo(.6,.9,.9),cc.scaleTo(.3,1,1))))},this.registerListeners({MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this),MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd.bind(this),MSG_AD_EVENT_FAILD:this.onMsgAdEventFaild.bind(this),MSG_AD_EVENT_CANCELED:this.onMsgAdEventCanceled.bind(this),MSG_RESET_SUIT_BACK_SCENE:this.onMsgResetSuitBackScene.bind(this)}),p.default.registerGuideNode("vSignLotteryDialog.buttonBuy",this.buttonBuy.node),this.sendMsg("MSG_GUIDE_POINT",{id:"vSignLotteryDialog.onLoadedInit"})},t.prototype.refreshPrice=function(){this.buttonBuy.node._buyAction&&this.buttonBuy.node._buyAction();var e=c.default.isAdEventHasChanceTrigger(this.AD_FREE_LOTTERY_NAME);this.bLotteryed&&(this.buttonBuy.node.stopAllActions(),this.buttonBuy.node.scale=1,this.buttonBuy.node.active=!0,this.buttonBuyVideo.node.active=!1,e&&!this.bAdLotteryed&&(this.buttonBuy.node.active=!1,this.buttonBuyVideo.node.active=!0)),e&&!this.bAdLotteryed?this.labelBuyTip.string=this.bLotteryed?C.default.getText("vSignLotteryDialog.3"):"":this.labelBuyTip.string=this.bLotteryed?C.default.getText("vSignLotteryDialog.4"):""},t.prototype.buildUi=function(){new y.default({bHideEnergy:!0}).parent=this.nodeTitleBar;var e=new g.default;this.structAvatar=e,this.viewAvatar=new m.default({structAvatar:this.structAvatar}),this.viewAvatar.parent=this.nodeAvatar,this.viewAvatar.setScale(.95),this.viewAvatar.refreshAll(),this.viewAvatar.setPreloadDelayRefresh(!0);for(var t=[],o=1;o<=this.LOTTERY_ITEM_NUM;o++){var n=this["nodeItem"+o];if(n){n._originPos||(n._originPos=n.position),n.scale=0;var r=new _.default({fOnClick:this.onClickItem.bind(this),index:o-1});r.parent=n,t.push(r)}}this.suitItems=t},t.prototype.fillSuitItemsData=function(){var e=[],t=[];this.suitData&&(t=this.suitData.displayIds||[]);for(var o=t.length,n=0;n<o;n++)e.push({id:parseInt(t[n]),num:1,index:0});for(n=o;n<this.LOTTERY_ITEM_NUM;n++)e.push({id:l.default.ITEM_ID_GOLD,num:i.default.random(this.minGoldNum,this.maxGoldNum),index:0});e=i.default.randomGotArrayDatas(e,e.length);for(n=0;n<this.LOTTERY_ITEM_NUM;n++)e[n].index=n;var r=this.suitItems||[],a=r.length;for(n=0;n<a;n++){var s=r[n],c=e[n];if(!s||!c)return;s.fillData(c.id,c.num)}this.selectSuitItem(this.selectedSuitItemIndex),this.lotteryDatas=e},t.prototype.initData=function(){this.minGoldNum=u.default.get("sign_suit_db","minGoldNum","value"),this.maxGoldNum=u.default.get("sign_suit_db","maxGoldNum","value");var e=this.context.suitId||0;this.suitData=u.default.get("suit_db",e),this.nodeAvatar._originPos=this.nodeAvatar.position},t.prototype.refreshSuit=function(e){var t=this.suitData;if(!t)return this.refreshPrice(),this.viewAvatar.opacity=0,void(e&&e());this.viewAvatar.opacity=255;var o=t.displayIds||[];this.structAvatar.fillByPartIds(o);this.viewAvatar.refreshAll(function(){e&&e()}),this.refreshPrice()},t.prototype.playUIActionIn=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!1),this.actionInAvatar(t,e)},t.prototype.playUIActionOut=function(e,t,o){void 0===e&&(e=null),void 0===t&&(t=null),void 0===o&&(o=!0),this.actionOutAvatar(o,t,e)},t.prototype.actionOutAvatar=function(e,t,o){void 0===t&&(t=null),void 0===o&&(o=.3),o=o||.3;var n=null;n=e?cc.v2(this.nodeAvatar._originPos.x+d.default.size.width,this.nodeAvatar._originPos.y):cc.v2(this.nodeAvatar._originPos.x-d.default.size.width,this.nodeAvatar._originPos.y),this.nodeAvatar.position=this.nodeAvatar._originPos,this.nodeAvatar.stopAllActions(),this.nodeAvatar.runAction(cc.sequence(cc.moveTo(o,n),cc.callFunc(function(){t&&t()}))),this.nodeTitle.stopAllActions(),this.nodeTitle.runAction(cc.fadeOut(o));for(var r=1;r<=this.LOTTERY_ITEM_NUM;r++){var a=this["nodeItem"+r];a&&(a.stopAllActions(),a.runAction(cc.scaleTo(o>.01?.03*r:o,0,0)))}},t.prototype.actionInAvatar=function(e,t,o){void 0===t&&(t=null),void 0===o&&(o=.3),o=o||.3;var n=this.nodeAvatar._originPos,r=cc.v2(0,0);r=e?cc.v2(this.nodeAvatar._originPos.x+d.default.size.width,this.nodeAvatar._originPos.y):cc.v2(this.nodeAvatar._originPos.x-d.default.size.width,this.nodeAvatar._originPos.y),this.nodeAvatar.position=r,this.nodeAvatar.stopAllActions(),this.nodeAvatar.runAction(cc.sequence(cc.moveTo(o,n),cc.callFunc(function(){t&&t()}))),this.nodeTitle.stopAllActions(),this.nodeTitle.runAction(cc.fadeIn(o));for(var a=1;a<=this.LOTTERY_ITEM_NUM;a++){var i=this["nodeItem"+a];i&&i.runAction(cc.scaleTo(.05*a,1,1))}},t.prototype.doButtonBuy=function(){if(!this.lotteryingData){this.sendMsg("MSG_GUIDE_POINT",{id:"vSignLotteryDialog.buttonBuy.click"});var e=[],t=this.lotteryDatas;for(var o in t){var n=t[o];(n.id==l.default.ITEM_ID_GOLD||h.default.getItemAmount(n.id)<=0)&&e.push(n)}e?(this.lotteryingData=e[i.default.random(0,e.length-1)],this.refreshPrice(),this.doLottery()):f.default.showMsgTip(C.default.getText("vSignLotteryDialog.5"))}},t.prototype.onTouchButtonClose=function(e){!e.isClick()||i.default.pDistance(e.getStartLocation(),e.getLocation())>100||(v.default.play(716),this.sendMsg("MSG_GUIDE_POINT",{id:"vSignLotteryDialog.buttonClose.click"}),d.default.warpDialogWithEffect("vHudDialog"))},t.prototype.onTouchButtonBuy=function(e){!e.isClick()||i.default.pDistance(e.getStartLocation(),e.getLocation())>100||(this.bLotteryed?f.default.showMsgTip(C.default.getText("vSignLotteryDialog.6")):(this.doButtonBuy(),this.bLotteryed=!0))},t.prototype.onTouchButtonBuyVideo=function(e){!e.isClick()||i.default.pDistance(e.getStartLocation(),e.getLocation())>100||c.default.triggerAdEvent(this.AD_FREE_LOTTERY_NAME)},t.prototype.onTouchButtonNext=function(e){},t.prototype.onTouchButtonPrevious=function(e){},t.prototype.selectSuitItem=function(e){for(var t=this.suitItems||[],o=t.length,n=0;n<o;n++){t[n].setSelected(n==e)}this.selectedSuitItemIndex=e},t.prototype.getSuitItem=function(e){return(this.suitItems||[])[e]},t.prototype.rewardLottery=function(){var e=this.lotteryingData;cc.log("---lotteryingData=",this.lotteryingData),e&&(h.default.addItemAmount(e.id,e.num,"\u7b7e\u5230\u62bd\u5956"),f.default.addGotItemTip(e.id,e.num),this.lotteryingData=null),this.refreshPrice()},t.prototype.doLottery=function(){var e=this;this.selectSuitItem(this.selectedSuitItemIndex);for(var t=0,o=this.suitItems||[],n=o.length,r=[],a=!1,s=0;s<n;s++){(l=o[s]).isLotteryValid()&&(r.push(l),a&&(t=r.length-1,a=!1)),this.selectedSuitItemIndex==s&&(a=!0)}if(1==r.length){var l=r[0];return this.selectSuitItem(l.getIndex()),void this.rewardLottery()}var c=0,u=r.length;for(s=0;s<u;s++){if((l=r[s]).getIndex()==this.lotteryingData.index){c=s;break}}var d=100*t,p=100*u*i.default.random(3,5)+100*c;cc.log("-----startLotteryIndex,targetLotteryIndex=",t,c),this.nodeAvatar.runAction(cc.sequence(ul.actionFloat(3,d,p,function(t){var o=Math.floor(t/100)%u;if(e.__last_index!=o){e.__last_index=o,v.default.play(110);var n=r[o];e.selectSuitItem(n.getIndex())}}),cc.callFunc(function(){e.rewardLottery()})))},t.prototype.onClickItem=function(e,t,o){this.bActioning||f.default.showItemDetailDialog(e,1,{bCanBuy:!1,reason:"\u70b9\u51fb_\u5957\u88c5\u754c\u9762\u8d2d\u4e70\u90e8\u4ef6"})},t.prototype.onMsgItemAmountChanged=function(e){var t=e.itemId;if(t){var o=u.default.get("item_template_db",t);o&&o.flag==l.default.ITEM_FLAG_PART&&this.refreshSuit()}},t.prototype.isAllGotAndDressed=function(e){var t=(u.default.get("suit_db",e)||{}).displayIds||[];for(var o in t){var n=t[o];if(h.default.getItemAmount(n)<=0)return!1}return!0},t.prototype.onMsgAdEventSuccessd=function(e){e.adEventId==this.AD_FREE_LOTTERY_NAME&&(this.doButtonBuy(),this.bAdLotteryed=!0)},t.prototype.onMsgAdEventFaild=function(e){e.adEventId},t.prototype.onMsgAdEventCanceled=function(e){this.onMsgAdEventFaild(e)},t.prototype.onMsgResetSuitBackScene=function(e){var t=e;t.backScene&&(this.context.backScene=t.backScene)},t=r([S],t)}(s.default);o.default=b,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDirector":"mgrDirector","../../manager/mgrGuide":"mgrGuide","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrSound":"mgrSound","../../manager/mgrTip":"mgrTip","../../struct/sAvatar":"sAvatar","../node/vAvatar":"vAvatar","../node/vCommonTitleBarRmbGold":"vCommonTitleBarRmbGold","../node/vSignLotteryItem":"vSignLotteryItem"}],vSignLotteryItem:[function(e,t,o){"use strict";cc._RF.push(t,"808e5WbWe9OWaGHmZtKjnkP","vSignLotteryItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/ViewBase"),c=e("../../manager/mgrCfg"),u=e("../../manager/mgrPlayer"),d=e("./vLevelBar"),p=e("../../manager/mgrStage"),h=e("../../Const"),f=e("../../manager/mgrI18n"),g=cc._decorator.ccclass,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBg=null,t.labelAmount=null,t.labelCondition=null,t.nodeBgNormal=null,t.nodeBgSelected=null,t.nodeCondition=null,t.nodeIcon=null,t.nodeLevel=null,t.nodeOwnedFlag=null,t.spriteIcon=null,t.spriteLockFlag=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vSignLotteryItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBg:[s.default,"onTouchButtonBg"],CC_labelAmount:[cc.Label],CC_labelCondition:[cc.Label],CC_nodeBgNormal:[cc.Node],CC_nodeBgSelected:[cc.Node],CC_nodeCondition:[cc.Node],CC_nodeIcon:[cc.Node],CC_nodeLevel:[cc.Node],CC_nodeOwnedFlag:[cc.Node],CC_spriteIcon:[cc.Sprite],CC_spriteLockFlag:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=new d.default;e.parent=this.nodeLevel,this.levelBar=e,this.registerListeners({MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this)})},t.prototype.isLotteryValid=function(){if(!this.itemId)return!1;if(this.itemId==h.default.ITEM_ID_GOLD)return!0;if(u.default.getItemAmount(this.itemId)>0)return!1;var e=c.default.get("cosmetic_part_db",this.itemId)||{},t=!0;return e.unlockStageId&&!p.default.isStageUnlocked(e.unlockStageId)&&(t=!1),t},t.prototype.getIndex=function(){return this.context.index},t.prototype.setSelected=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){return this.nodeBgNormal.active=!e,this.nodeBgSelected.active=!!e,[2]})})},t.prototype.setReverseSelected=function(){return a(this,void 0,void 0,function(){return i(this,function(e){return this.nodeBgNormal.active=!this.nodeBgNormal.active,this.nodeBgSelected.active=!this.nodeBgNormal.active,[2]})})},t.prototype.refresh=function(){this.fillData(this.itemId,this.itemNum)},t.prototype.fillData=function(e,t){return a(this,void 0,void 0,function(){var o=this;return i(this,function(n){return this.itemId=e,this.itemNum=t,this.waitLoadingFinished(function(){if(o.itemId==h.default.ITEM_ID_GOLD)return o.nodeOwnedFlag.active=!1,o.spriteLockFlag.node.active=!1,o.nodeCondition.active=!1,o.nodeLevel.active=!1,o.spriteIcon.node.active=!0,o.spriteIcon.loadSpriteFrameAndKeepSize(u.default.getIcon(h.default.ITEM_ID_GOLD)),o.labelAmount.node.opacity=255,void(o.labelAmount.string=ul.format("%s",o.itemNum));o.labelAmount.node.opacity=0,o.nodeLevel.active=!0;var e=c.default.get("cosmetic_part_db",o.itemId)||{};if(o.spriteIcon.node.active=!!e.icon,e.icon&&o.spriteIcon.loadSpriteFrameAndKeepSize(e.icon),o.levelBar.setLevel(5,c.default.get("item_template_db",o.itemId,"level")),o.spriteLockFlag.node.active=u.default.getItemAmount(o.itemId)<=0,o.nodeCondition.active=!1,u.default.getItemAmount(o.itemId)<=0){if(o.nodeOwnedFlag.active=!1,e.unlockStageId){var t=!0;e.unlockStageId&&!p.default.isStageUnlocked(e.unlockStageId)&&(o.labelCondition.string=ul.format(f.default.getText("vSignLotteryItem.1"),e.unlockStageId),t=!1),o.nodeCondition.active=!t}}else o.nodeOwnedFlag.active=!0}),[2]})})},t.prototype.onTouchButtonBg=function(e){if(e.isClick()&&this.context.fOnClick){var t=this.spriteIcon.node.parent.convertToWorldSpaceAR(this.spriteIcon.node.position);this.context.fOnClick(this.itemId,this.itemNum,t)}},t.prototype.onMsgItemAmountChanged=function(e){var t=e.itemId;this.itemId&&t&&t==this.itemId&&this.refresh()},r([l.default.requireResourceLoaded],t.prototype,"setSelected",null),r([l.default.requireResourceLoaded],t.prototype,"setReverseSelected",null),t=r([g],t)}(l.default);o.default=m,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../Const":"Const","../../manager/mgrCfg":"mgrCfg","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrStage":"mgrStage","./vLevelBar":"vLevelBar"}],vStoreRankListItem:[function(e,t,o){"use strict";cc._RF.push(t,"a130fg5cGFNt4df1EhjpiFg","vStoreRankListItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/component/ScleableButton"),l=e("../../../ulframework/view/ViewBase"),c=e("../../manager/mgrPlayer"),u=cc._decorator.ccclass,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBg=null,t.labelNameNormal=null,t.labelNameSelected=null,t.labelRankNormal=null,t.labelRankSelected=null,t.labelScoreNormal=null,t.labelScoreSelected=null,t.nodeNormal=null,t.nodeRank1=null,t.nodeSelected=null,t.player=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vStoreRankListItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBg:[s.default,"onTouchButtonBg"],CC_labelNameNormal:[cc.Label],CC_labelNameSelected:[cc.Label],CC_labelRankNormal:[cc.Label],CC_labelRankSelected:[cc.Label],CC_labelScoreNormal:[cc.Label],CC_labelScoreSelected:[cc.Label],CC_nodeNormal:[cc.Node],CC_nodeRank1:[cc.Node],CC_nodeSelected:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillByPlayer=function(e){return a(this,void 0,void 0,function(){var t,o;return i(this,function(n){return this.player=e,this.buttonBg.node.active=!0,e=this.player,t=e.rank||0,this.nodeRank1.active=1==t,this.labelRankSelected.node.active=1!=t,o=c.default.getItemAmountStr(e.score||0),this.labelRankSelected.string=t.toString(),this.labelNameSelected.string=e.name,this.labelScoreSelected.string=ul.format("%s",o),this.labelRankNormal.string=t.toString(),this.labelNameNormal.string=e.name,this.labelScoreNormal.string=ul.format("%s",o),this.setRankNo1(1==t),[2]})})},t.prototype.setSelected=function(e){return a(this,void 0,void 0,function(){return i(this,function(e){return[2]})})},t.prototype.setRankNo1=function(e){return a(this,void 0,void 0,function(){var t;return i(this,function(o){return t=this.player,t.rank||0,this.nodeNormal.active=!e,this.nodeSelected.active=e,[2]})})},t.prototype.onTouchButtonBg=function(e){e.isClick()&&this.context.fOnClick&&this.context.fOnClick(this.player)},r([l.default.requireResourceLoaded],t.prototype,"fillByPlayer",null),r([l.default.requireResourceLoaded],t.prototype,"setSelected",null),r([l.default.requireResourceLoaded],t.prototype,"setRankNo1",null),t=r([u],t)}(l.default);o.default=d,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrPlayer":"mgrPlayer"}],vStoreResultRankItem:[function(e,t,o){"use strict";cc._RF.push(t,"c52f0YXyLxAsKwc1wtr7ZhX","vStoreResultRankItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/view/ViewBase"),l=e("../../manager/mgrPlayer"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelNameNormal=null,t.labelNameSelected=null,t.labelRankNormal=null,t.labelRankSelected=null,t.labelScoreNormal=null,t.labelScoreSelected=null,t.nodeNormal=null,t.nodeRank1=null,t.nodeSelected=null,t.nodeUpFlag=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vStoreResultRankItem"},t.prototype._getResourceBindingConfig=function(){return{CC_labelNameNormal:[cc.Label],CC_labelNameSelected:[cc.Label],CC_labelRankNormal:[cc.Label],CC_labelRankSelected:[cc.Label],CC_labelScoreNormal:[cc.Label],CC_labelScoreSelected:[cc.Label],CC_nodeNormal:[cc.Node],CC_nodeRank1:[cc.Node],CC_nodeSelected:[cc.Node],CC_nodeUpFlag:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillByPlayer=function(e){return a(this,void 0,void 0,function(){var t,o;return i(this,function(n){return this.player=e,e=this.player,t=e.rank||0,this.nodeRank1.active=!1,o=l.default.getItemAmountStr(e.score||0),this.labelRankSelected.string=t.toString(),this.labelNameSelected.string=e.name,this.labelScoreSelected.string=ul.format("%s",o),this.labelRankNormal.string=t.toString(),this.labelNameNormal.string=e.name,this.labelScoreNormal.string=ul.format("%s",o),this.setSelected(e.uid==l.default.getUid()),[2]})})},t.prototype.setSelected=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){return this.nodeNormal.active=!e,this.nodeSelected.active=e,[2]})})},r([s.default.requireResourceLoaded],t.prototype,"fillByPlayer",null),r([s.default.requireResourceLoaded],t.prototype,"setSelected",null),t=r([u],t)}(s.default));o.default=d,cc._RF.pop()},{"../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrPlayer":"mgrPlayer"}],vSubjectSuitDetailDialog:[function(e,t,o){"use strict";cc._RF.push(t,"5280aYQSqJCTIMXr6gWFt+r","vSubjectSuitDetailDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../../ulframework/view/ReuseList"),l=e("../node/vPartRankItem"),c=e("../../manager/mgrTip"),u=e("../../../ulframework/view/ReuseLayouterVGrid"),d=e("../../struct/sAvatar"),p=e("../node/vAvatar"),h=e("../../manager/mgrCfg"),f=e("../../Const"),g=e("../../manager/mgrPlayer"),m=e("../../manager/mgrPool"),_=e("../../manager/mgrAd"),v=e("../../manager/mgrI18n"),y=cc._decorator,C=y.ccclass,S=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.buttonDress=null,t.labelTitle=null,t.nodeAvatar=null,t.nodeContent=null,t.nodeDressed=null,t.nodeList=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vSubjectSuitDetailDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_buttonDress:[a.default,"onTouchButtonDress"],CC_labelTitle:[cc.Label],CC_nodeAvatar:[cc.Node],CC_nodeContent:[cc.Node],CC_nodeDressed:[cc.Node],CC_nodeList:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),_.default.showViewEnterAd(this.nodeResource,null,null,"ad_banner_suit_detail_dialog")},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.animNode&&(m.default.put(this.animNode),this.animNode.removeFromParent(),this.animNode=null)},t.prototype.onOpenDialogCompleted=function(){this.onLoadedInit()},t.prototype.onLoadedInit=function(){var e=this;this.setShadowOpacity(210),this.buttonDress.node.opacity=255,this.buttonDress.node.active=!!this.context.bDress;var t=new d.default;this.structAvatar=t,this.viewAvatar=new p.default({structAvatar:this.structAvatar}),this.viewAvatar.parent=this.nodeAvatar;var o=this.nodeList,n=new s.default;n.setLayouter((new u.default).setCellSize(100,120).setGap(10,10).setCols(2).setPending(0)),n.setCreator(function(t){var o=new l.default({fOnClick:e.onClickCollectionItem.bind(e)});o.parent=t,t.item=o}),n.setSetter(function(e,t){e.item.fillByPartId(t.id)}),n.parent=o,n.setContentSize(o.getContentSize()),n.setAnchorPoint(0,0),n.setElasticEnabled(!1),this.listPart=n,this.fillData(),this.fillList();var r=m.default.get("animNode","69_huanzhuang2");r&&(r.parent=this.nodeAvatar,r.scale=.6,r.position=cc.v2(0,150),r.play(),this.animNode=r),this.registerListeners({MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this)})},t.prototype.fillData=function(){var e=this.context.suitId,t=h.default.get("suit_db",e);this.labelTitle.string=t.name||"",this.structAvatar.fillByPartIds(t.displayIds),this.viewAvatar.refreshAll(),this.suitData=t},t.prototype.fillList=function(){for(var e=this.suitData.displayIds,t=[],o=0;o<e.length;o++){var n=e[o];t.push({id:n,index:t.length})}this.listPart.setDatas(t)},t.prototype.onClickCollectionItem=function(e){c.default.showItemDetailDialog(e,1,{bCanBuy:!0,reason:"\u70b9\u51fb_\u5957\u88c5\u8be6\u60c5\u754c\u9762\u8d2d\u4e70\u90e8\u4ef6"})},t.prototype.onMsgItemAmountChanged=function(e){e&&e.itemId&&e.itemId!=f.default.ITEM_ID_GOLD&&e.itemId!=f.default.ITEM_ID_RMB&&this.fillList()},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonDress=function(e){if(e.isClick()&&this.suitData&&this.suitData.displayIds){for(var t=[],o=this.suitData.displayIds,n=0;n<o.length;n++){var r=o[n];r&&g.default.getItemAmount(r)>0&&t.push(r)}t&&t.length>0?(this.buttonDress.node.stopAllActions(),this.buttonDress.node.active=!1,this.nodeDressed.opacity=255,this.sendMsg("MSG_ROOM_DRESS_PARTS",{partIds:t}),c.default.showMsgTip(v.default.getText("vSubjectSuitDetailDialog.3"))):c.default.showMsgTip(v.default.getText("vSubjectSuitDetailDialog.4"))}},t=r([C],t)}(i.default));o.default=S,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../../ulframework/view/ReuseLayouterVGrid":"ReuseLayouterVGrid","../../../ulframework/view/ReuseList":"ReuseList","../../Const":"Const","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrPool":"mgrPool","../../manager/mgrTip":"mgrTip","../../struct/sAvatar":"sAvatar","../node/vAvatar":"vAvatar","../node/vPartRankItem":"vPartRankItem"}],vSubjectSuitDressDialog:[function(e,t,o){"use strict";cc._RF.push(t,"df1ebjpCblLxJvP3CLFdFVX","vSubjectSuitDressDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../../ulframework/view/ReuseList"),l=e("../../../ulframework/view/ReuseLayouterVGrid"),c=e("../node/vSubjectSuitDressListItem"),u=e("../../manager/mgrDirector"),d=e("../../manager/mgrCfg"),p=e("../../manager/mgrAd"),h=e("../../../ulframework/utils/Tools"),f=e("../../manager/mgrPacking"),g=e("../../../ulframework/component/ToggleButton"),m=e("../../../ulframework/utils/Timer"),_=e("../node/vCommonTitleBarRmbGold"),v=e("../../manager/mgrGuide"),y=e("../../manager/mgrPlayer"),C=e("../../manager/mgrTip"),S=e("../../manager/mgrSound"),b=e("../../manager/mgrEffect"),R=e("../../manager/mgrSubjectDress"),T=cc._decorator,A=T.ccclass,D=(T.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectedSubjectId=0,t.buttonClose=null,t.nodeLayoutContent=null,t.nodeList=null,t.nodeTab=null,t.nodeTitleBar=null,t.nodeUIRoot=null,t.toggleButtonSubject1=null,t.toggleButtonSubject2=null,t.toggleButtonSubject3=null,t.toggleButtonSubject4=null,t.toggleButtonSubject5=null,t.toggleButtonSubject6=null,t.AD_INTER_VIEW_NAME="inter_subject_suit_dress_dialog",t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vSubjectSuitDressDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_toggleButtonSubject1:[g.default,"onTouchToggleButtonSubject1"],CC_toggleButtonSubject2:[g.default,"onTouchToggleButtonSubject2"],CC_toggleButtonSubject3:[g.default,"onTouchToggleButtonSubject3"],CC_toggleButtonSubject4:[g.default,"onTouchToggleButtonSubject4"],CC_toggleButtonSubject5:[g.default,"onTouchToggleButtonSubject5"],CC_toggleButtonSubject6:[g.default,"onTouchToggleButtonSubject6"],CC_nodeLayoutContent:[cc.Node],CC_nodeList:[cc.Node],CC_nodeTab:[cc.Node],CC_nodeTitleBar:[cc.Node],CC_nodeUIRoot:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){if(e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(u.default.size),this.setContentSize(u.default.size),p.default.isBannerAdValid()){var t=p.default.getBannerHeight(),o=this.nodeUIRoot.getComponent(cc.Widget);o.bottom=t,o.updateAlignment(),p.default.showViewEnterAd(this.nodeResource,null,this.AD_INTER_VIEW_NAME,"ad_banner_suit_dialog")}else p.default.showIntAd(null,this.AD_INTER_VIEW_NAME);this.playUIActionIn()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onOpenDialogCompleted=function(){var e=this;m.default.callLater(.5,function(){e.onLoadedInit()})},t.prototype.onCloseDialogStart=function(){p.default.closeBannerAd()},t.prototype.playUIActionIn=function(e){for(var t=[],o=[this.nodeTitleBar,this.buttonClose.node,this.nodeTab],n=0;n<o.length;n++){var r=o[n];r._originPos=r._originPos||r.position,r.active&&t.push({node:r,beginPos:cc.v2(r.x,r.y+500),endPos:r._originPos,delayTime:.01*h.default.random(5),dur:.3})}b.default.playMoveToActionArr(t,1,null)},t.prototype.onLoadedInit=function(){var e=this;new _.default({bHideEnergy:!0}).parent=this.nodeTitleBar;var t=this.nodeList,o=new s.default;o.setLayouter((new l.default).setCellSize(270,424).setCols(2).setGap(0,10).setPending(10)),o.setCreator(function(t){var o=new c.default({fOnClickItem:e.onClickSuitItem.bind(e),fOnGuideReward:e.onGuideReward.bind(e)});o.parent=t,t.item=o}),o.setSetter(function(e,t){e.item.fillSubjectSuit(t.id)}),o.parent=t,o.setContentSize(t.getContentSize()),o.setAnchorPoint(0,0),o._originPos=o.position,this.listPacking=o,this.selectedSubjectId=1,this.fillList(),this.refreshBadge(),y.default.hasSuitCanReward()?S.default.play(735):S.default.play(716),this.registerListeners({MSG_SUBJECT_DRESS_REMOVED:this.onMsgSubjectDressRemoved.bind(this),MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this)})},t.prototype.refreshBadge=function(){var e=d.default.getDb("cosmetic_subject_tag_db");for(var t in e){var o=e[t],n=y.default.hasSuitCanRewardByCategory(o.id),r=this["toggleButtonSubject"+o.id].node;r&&C.default.setBadgeEnabled(r,n,-35,-35)}},t.prototype.fillList=function(){var e=[],t=d.default.getDb("suit_db");for(var o in t){var n=t[o];this.selectedSubjectId&&n.category!=this.selectedSubjectId||e.push(t[o])}e=h.default.sortArrayByField(e,["order","id"]),this.listPacking.setDatas(e);for(var r=this.selectedSubjectId?this.selectedSubjectId:0,a=0;a<=6;a++){var i=this["toggleButtonSubject"+a];i&&(i.setPressStatus(r==a),r==a&&i.node.runAction(cc.sequence(cc.scaleTo(.1,1.2,1.2),cc.scaleTo(.1,1,1))))}},t.prototype.onClickAvatarShowing=function(e){var t=e.serializeToText();f.default.setPackingAvatar(this.context.packingId,t)},t.prototype.onClickSuitItem=function(e){u.default.warpDialogWithSmallEffect("vSubjectSuitDetailDialog",{suitId:e,bDress:this.context.bFromRoom})},t.prototype.onGuideReward=function(e){this.bGuided||(this.bGuided=!0,v.default.registerGuideNode("vSubjectSuitDressListItem.buttonReward",e.buttonReward.node),this.sendMsg("MSG_GUIDE_POINT",{id:"vSubjectSuitDressListItem.filledSubjectSuit"}))},t.prototype.doChangeSubject=function(e){this.selectedSubjectId=e,R.default.setCurrSelectedSubjectId(e),this.fillList(),this.refreshBadge()},t.prototype.onTouchButtonClose=function(e){e.isClick()&&(this.context.bFromHud?u.default.warpDialogWithEffect("vHudDialog"):this.closeDialog())},t.prototype.onTouchToggleButtonSubject1=function(e){e.isClick()&&this.doChangeSubject(1)},t.prototype.onTouchToggleButtonSubject2=function(e){e.isClick()&&this.doChangeSubject(2)},t.prototype.onTouchToggleButtonSubject3=function(e){e.isClick()&&this.doChangeSubject(3)},t.prototype.onTouchToggleButtonSubject4=function(e){e.isClick()&&this.doChangeSubject(4)},t.prototype.onTouchToggleButtonSubject5=function(e){e.isClick()&&this.doChangeSubject(5)},t.prototype.onTouchToggleButtonSubject6=function(e){e.isClick()&&this.doChangeSubject(6)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.onMsgSubjectDressRemoved=function(){this.selectedSubjectId||(this.fillList(),this.refreshBadge())},t.prototype.onMsgItemAmountChanged=function(e){this.refreshBadge()},t=r([A],t)}(i.default));o.default=D,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/component/ToggleButton":"ToggleButton","../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/DialogBase":"DialogBase","../../../ulframework/view/ReuseLayouterVGrid":"ReuseLayouterVGrid","../../../ulframework/view/ReuseList":"ReuseList","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDirector":"mgrDirector","../../manager/mgrEffect":"mgrEffect","../../manager/mgrGuide":"mgrGuide","../../manager/mgrPacking":"mgrPacking","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrSound":"mgrSound","../../manager/mgrSubjectDress":"mgrSubjectDress","../../manager/mgrTip":"mgrTip","../node/vCommonTitleBarRmbGold":"vCommonTitleBarRmbGold","../node/vSubjectSuitDressListItem":"vSubjectSuitDressListItem"}],vSubjectSuitDressListItem:[function(e,t,o){"use strict";cc._RF.push(t,"c6aect0v9xA+aQjSqe85cFw","vSubjectSuitDressListItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrCfg"),l=e("../../manager/mgrPlayer"),c=e("../../struct/sAvatar"),u=e("./vAvatar"),d=e("../../manager/mgrTip"),p=e("../../manager/mgrPool"),h=e("../../manager/mgrAd"),f=e("../../manager/mgrSubjectDress"),g=cc._decorator,m=g.ccclass,_=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonContent=null,t.buttonReward=null,t.buttonRewardAd=null,t.labelAd=null,t.labelReward=null,t.labelTitle=null,t.nodeAvatar=null,t.nodeBgAllOwned=null,t.nodeBgNotAllOwned=null,t.spriteAdIcon=null,t.spriteSubject=null,t.adTrigerId="video_free_suit",t}return n(t,e),t.prototype._getResourceName=function(){return"node/vSubjectSuitDressListItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonContent:[a.default,"onTouchButtonContent"],CC_buttonReward:[a.default,"onTouchButtonReward"],CC_buttonRewardAd:[a.default,"onTouchButtonRewardAd"],CC_labelAd:[cc.Label],CC_labelReward:[cc.Label],CC_labelTitle:[cc.Label],CC_nodeAvatar:[cc.Node],CC_nodeBgAllOwned:[cc.Node],CC_nodeBgNotAllOwned:[cc.Node],CC_spriteAdIcon:[cc.Sprite],CC_spriteSubject:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.animNodeBorder&&(p.default.put(this.animNodeBorder),this.animNodeBorder.removeFromParent(),this.animNodeBorder=null)},t.prototype.onLoadedInit=function(){this.registerListeners({MSG_ITEM_AMOUNT_CHANGED:this.onMsgItemAmountChanged.bind(this)})},t.prototype.fillSubjectSuit=function(e){this.suitId=e,this.refresh()},t.prototype.refresh=function(){cc.log("vSubjectSuitDressListItem.refresh...");var e=s.default.get("suit_db",this.suitId);if(!this.structAvatar){var t=new c.default,o=new u.default({structAvatar:t});o.parent=this.nodeAvatar,this.structAvatar=t,this.avatarView=o}this.structAvatar.fillByPartIds(e.displayIds),this.avatarView.refreshAll(),this.nodeAvatar.scale=.85,this.labelTitle.string=e.name||"";var n=l.default.isSuitPartAllCollected(this.suitId);this.nodeBgAllOwned.active=n,this.nodeBgNotAllOwned.active=!n;var r=s.default.get("cosmetic_subject_tag_db",e.category);r&&this.spriteSubject.loadSpriteFrameAndKeepSize(r.texture),this.labelReward.string=ul.format("*%s",e.rewardItemAmount);var a=l.default.isRewardedSuit(e.id);if(this.buttonReward.node.active=!a,l.default.rewardedSuitIdDict[this.suitId]&&h.default.preCheckCanTriggerAdEvent(this.adTrigerId)&&1==f.default.getCurrSelectedSubjectId()?this.buttonRewardAd.node.active=!0:this.buttonRewardAd.node.active=!1,n)if(this.animNodeBorder)this.animNodeBorder.active=!0;else{var i=p.default.get("animNode","70_kapai_bian");i&&(i.parent=this.buttonContent.node,i.scale=.66,i.play(),this.animNodeBorder=i)}else this.animNodeBorder&&(this.animNodeBorder.active=!1);!a&&n?(this.buttonReward.node.getNumberOfRunningActions()<=1&&this.buttonReward.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.1,1.1),cc.scaleTo(.6,.9,.9),cc.scaleTo(.3,1.1,1.1)))),this.buttonReward.node.active&&this.context.fOnGuideReward&&this.context.fOnGuideReward(this)):(this.buttonReward.node.stopAllActions(),this.buttonReward.node.scale=1)},t.prototype.onTouchButtonShowing=function(e){e.isClick()&&this.context.fOnClickShowing&&this.context.fOnClickShowing(this.structAvatar)},t.prototype.onTouchButtonContent=function(e){e.isClick()&&this.context.fOnClickItem&&this.context.fOnClickItem(this.suitId)},t.prototype.onTouchButtonReward=function(e){if(e.isClick()){this.sendMsg("MSG_GUIDE_POINT",{id:"vSubjectSuitDressListItem.buttonReward.click"});var t=l.default.tryRewardSuit(this.suitId);t&&(t.itemId?(l.default.addItemAmount(t.itemId,t.amount,"\u9886\u53d6\u5957\u88c5\u5956\u52b1"),d.default.addGotItemTip(t.itemId,t.amount,null,{autoCloseDialogDelayTime:.8}),this.buttonReward.node.stopAllActions(),this.buttonReward.node.active=!1):t.tip&&d.default.showMsgTip(t.tip))}},t.prototype.onTouchButtonRewardAd=function(e){e.isClick()&&l.default.rewardedSuitIdDict[this.suitId]&&h.default.triggerAdEvent(this.adTrigerId,null,!0)},t.prototype.onMsgItemAmountChanged=function(e){var t=e.itemId;if(this.refresh(),s.default.quietGet("cosmetic_part_db",t)){var o=s.default.get("suit_db",this.suitId);if(o)for(var n in o.displayIds)if(t==o.displayIds[n]){this.fillSubjectSuit(this.suitId);break}}},r([i.default.requireResourceLoaded],t.prototype,"fillSubjectSuit",null),t=r([m],t)}(i.default));o.default=_,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrPool":"mgrPool","../../manager/mgrSubjectDress":"mgrSubjectDress","../../manager/mgrTip":"mgrTip","../../struct/sAvatar":"sAvatar","./vAvatar":"vAvatar"}],vSuitPartListItem:[function(e,t,o){"use strict";cc._RF.push(t,"54cf3nA2o1GWJiVixU7EeAi","vSuitPartListItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=cc._decorator.ccclass,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"node/vSuitPartListItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBg:[a.default,"onTouchButtonBg"],CC_labelPrice:[cc.Label],CC_nodeLevel:[cc.Node],CC_spriteIcon:[cc.Sprite],CC_spriteOwnFlag:[cc.Sprite],CC_spritePriceIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouchButtonBg=function(e){},t=r([s],t)}(i.default);o.default=l,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase"}],vUpdaterSceneBase:[function(e,t,o){"use strict";cc._RF.push(t,"c62363WFOdOTol2y4eu214a","vUpdaterSceneBase");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../view/SceneBase"),i=e("../utils/Timer"),s=e("../../game/Const"),l=e("../../game/manager/mgrDirector"),c=e("../../game/view/node/LayerColor"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.patchInfo=null,t.localPid=null,t.patchs=null,t.patchIdx=null,t.TIMEOUT=5,t.requestPatchInfoXhr=null,t.timeoutTimer=null,t.bNeedRestart=!1,t.bGameStarted=!1,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){var t=this;e.prototype.onResourceLoaded.call(this),jsb.fileUtils.isFileExist("src/patch_info.json")?(cc.log("\u53d1\u73b0patch_info.json\uff0c\u51c6\u5907\u66f4\u65b0"),this.needPlayLogo()?this.playLogo(function(){t.prepareUpdate()}):this.prepareUpdate()):(cc.log("patch_info.json\u672a\u627e\u5230\uff0c\u76f4\u63a5\u8fdb\u5165\u6e38\u620f"),this.startGame())},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){},t.prototype.sendUiMsg=function(e,t){this.onUiMsg(e,t)},t.prototype.onUiMsg=function(e,t){},t.prototype.needPlayLogo=function(){if("true"==cc.sys.localStorage.getItem("B_SKIP_LOGO_ONCE"))return cc.sys.localStorage.setItem("B_SKIP_LOGO_ONCE","false"),!1;var e=this.getLogoTextures();return!(!e||0==e.length)},t.prototype.getLogoTextures=function(){var e,t=jsb.fileUtils.getStringFromFile("src/patch_info.json");if(t&&(e=JSON.parse(t)),!e)return null;var o=e.CONF;if(!o)return null;var n=o.LOGO_TEXTURES;return Array.isArray(n)?n:null},t.prototype.playLogo=function(e){var t=this;cc.log("-------------------------"),cc.log("-----   playLogo    -----"),cc.log("-------------------------");for(var o=this.getLogoTextures(),n=o.length-1;n>=0;n--){var r=o[n];cc.loader._getResUuid(r)||(cc.warn(ul.format("vUpdaterSceneBase.playLogo logoTexture not found! fileName=[%s]",r)),o.splice(n,1))}if(o.length<=0)e();else{this.nodeResource.active=!1;var a=new c.default(cc.color(0,0,0,255));a.parent=this,a.setContentSize(l.default.size);for(n=0;n<o.length;n++){r=o[n];var i=l.default.createSpriteNode(r);i.parent=this,i.opacity=0;var s=[];n>0&&s.push(cc.delayTime(3*n)),s.push(cc.fadeIn(.6)),s.push(cc.delayTime(1.8)),s.push(cc.fadeOut(.6)),n==o.length-1&&s.push(cc.callFunc(function(){t.nodeResource.active=!0,a.destroy(),e()}));var u=cc.sequence(s);i.runAction(u)}}},t.prototype.startGame=function(e){if(this.bGameStarted)cc.warn("vUpdataerSceneBase.startGame already started!");else{if(this.bGameStarted=!0,e&&this.patchInfo){var t=cc.sys.localStorage.getItem("GAME_VERSION");if(t)s.default.GAME_VERSION=t;else{var o=this.patchInfo.VERSION;o&&(cc.sys.localStorage.setItem("GAME_VERSION",o),s.default.GAME_VERSION=o)}}if(this.releaseAssetsManager(),this.releaseRequestPatchInfoXhr(),this.bNeedRestart)return cc.log("-------------------------"),cc.log("-----  restarting   -----"),cc.log("-------------------------"),cc.sys.localStorage.setItem("B_SKIP_LOGO_ONCE","true"),cc.audioEngine.stopAll(),void cc.game.restart();cc.log("-------------------------"),cc.log("-----   startGame   -----"),cc.log("-------------------------"),this.sendUiMsg("UPDATER_UI_MSG_ENTER_NEXT_SCENE")}},t.prototype.resetPatch=function(e,t,o,n){cc.log("-------------------------"),cc.log("-----  resetPatch   -----"),cc.log("-------------------------"),cc.log("resetTip",e);var r=this.getPatchPath();jsb.fileUtils.isDirectoryExist(r)&&jsb.fileUtils.removeDirectory(r),cc.sys.localStorage.setItem("PATCH_BID",t.toString()),cc.sys.localStorage.setItem("PATCH_PID",o.toString()),cc.sys.localStorage.setItem("PATCH_PACKAGE_PID",o.toString()),cc.sys.localStorage.setItem("PATCH_CHANNEL",n);var a=[r];cc.sys.localStorage.setItem("UPDATER_SEARCH_PATHS",JSON.stringify(a))},t.prototype.prepareUpdate=function(){cc.log("-------------------------"),cc.log("----- prepareUpdate -----"),cc.log("-------------------------");var e,t=jsb.fileUtils.getStringFromFile("src/patch_info.json");if(t&&(e=JSON.parse(t)),!e)return cc.warn("[warn] patch_info.json \u52a0\u8f7d\u5931\u8d25\uff0c\u76f4\u63a5\u8fdb\u5165\u6e38\u620f\u3002"),void this.startGame();this.patchInfo=e;var o=cc.sys.localStorage.getItem("GAME_VERSION");o||(o=e.VERSION),s.default.GAME_VERSION=o;var n=e.B_ID,r=e.P_ID,a=e.CHANNEL,i=parseInt(cc.sys.localStorage.getItem("PATCH_BID")),l=parseInt(cc.sys.localStorage.getItem("PATCH_PID")),c=parseInt(cc.sys.localStorage.getItem("PATCH_PACKAGE_PID")),u=cc.sys.localStorage.getItem("PATCH_CHANNEL"),d=null;n!=i?d=ul.format("bid not match! package = %s, record = %d",n,i):a!=u?d=ul.format("channel not match! package = %s, record = %d",a,u):r!=c?d=ul.format("package pid not match! package = %s, record = %d",r,c):r>(isNaN(l)?0:l)&&(d=ul.format("package pid is higher! package = %s, record = %s",r,l)),d&&this.resetPatch(d,n,r,a);var p=null;(l=parseInt(cc.sys.localStorage.getItem("PATCH_PID")))?(p=l,cc.log("use record pid",p)):(p=e.P_ID||0,cc.log("use patch_info pid",p)),this.localPid=p;var h=this.getPatchPath();if(!jsb.fileUtils.createDirectory(h))return cc.log("patchPath create faild!",h),void this.startGame();this.buildUi(),this.checkNewVersion()},t.prototype.checkNewVersion=function(){var e=this;this.sendUiMsg("UPDATER_UI_MSG_GET_VERSION");var t=this.patchInfo,o=ul.format("http://%s/%s/%s/%s/%s",t.HOST,t.PATCH_PATH,t.APP,t.CHANNEL,t.PATCH_INFO_FILENAME),n=cc.loader.getXMLHttpRequest();n.onreadystatechange=function(){if(4==n.readyState)if(n.status>=200&&n.status<207){e.stopTimeoutTimer();var t=void 0;try{t=JSON.parse(n.response)}catch(t){cc.warn("vUpdaterScene.checkNewVersion remote patch_info parse except!",n.response),e.startGame()}t?(e.releaseRequestPatchInfoXhr(),e.onPatchInfoDownloadSuccess(t)):(cc.warn("vUpdaterScene.checkNewVersion remote patch_info parse faild!",n.response),e.startGame())}else cc.warn("vUpdateScene.checkNewVersion network faild."),e.startGame()};n.open("GET",o),n.timeout=1e3*this.TIMEOUT,this.requestPatchInfoXhr=n,this.startTimeoutTimer(),n.send()},t.prototype.onPatchInfoDownloadSuccess=function(e){var t=this;cc.log("onPatchInfoDownloadSuccess",e),ul.dump(e);var o=parseInt(e.P_ID)||0,n=this.localPid;cc.log("pid:",n,o),n>o&&(cc.sys.localStorage.setItem("GAME_VERSION",""),cc.warn("local version is higher than remote version"),cc.warn("stop update!"),this.startGame());for(var r=[],a=0;a<e.PATCH_LIST.length;a++){var s=e.PATCH_LIST[a];s.pid>n&&(cc.log("ADD PATCH ->",s.pid,s.version),r.push(s))}this.patchInfo=e,r.length>0?(this.patchs=r,this.patchIdx=0,i.default.callLater(.016,function(){t.downloadPatchByIndexed()})):this.startGame(!0)},t.prototype.downloadPatchByIndexed=function(){this.releaseAssetsManager(),cc.log("downloadPatchByIndexed",this.patchIdx);var e=this.patchInfo,t=this.patchs[this.patchIdx],o=ul.format("http://%s/%s/%s/%s/%s/",e.HOST_CDN||e.HOST,e.PATCH_PATH,e.APP,e.CHANNEL,e.B_ID);cc.log("packageUrl",ul.format("%s%d.zip",o,t.pid));var n={};n[ul.format("%d.zip",t.pid)]={size:0,md5:"",compressed:!0};var r=JSON.stringify({packageUrl:o,version:(this.localPid-1).toString()}),a=new jsb.Manifest(r,this.getPatchPath()),s=JSON.stringify({packageUrl:o,version:t.pid.toString(),assets:n}),l=new jsb.Manifest(s,this.getPatchPath()),c=new jsb.AssetsManager("",this.getPatchPath()),u=new jsb.EventListenerAssetsManager(c,this.onAssetsManagerEvent.bind(this));cc.eventManager.addListener(u,1),this.assetsManager=c,this.assetsManagerListener=u;var d=new i.default(.016,-1,function(){cc.isValid(c)&&c.update()});this.assetsManagerTimer=d,c.loadLocalManifest(a,this.getPatchPath()),c.loadRemoteManifest(l),c.setVersionCompareHandle(function(e,t){return parseFloat(e)-parseFloat(t)}),c.setVerifyCallback(function(e,t){return!0}),d.startAndBindToNode(this)},t.prototype.onPatchDownloadSuccess=function(){var e=this.patchs[this.patchIdx];this.localPid=e.pid,cc.sys.localStorage.setItem("PATCH_PID",this.localPid.toString()),cc.log("save PATCH_PID",this.localPid),e.version&&(cc.sys.localStorage.setItem("GAME_VERSION",e.version),cc.log("save GAME_VERSION",e.version)),this.bNeedRestart=!0,cc.log("check patchIdx",this.patchIdx,this.patchs.length),this.patchIdx<this.patchs.length-1?(this.patchIdx++,this.downloadPatchByIndexed()):(this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_SUCCESS"),this.startGame(!0))},t.prototype.onAssetsManagerEvent=function(e){switch(e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:cc.log("onAssetsManagerEvent.ERROR_NO_LOCAL_MANIFEST"),this.startGame();break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:cc.log("onAssetsManagerEvent.ERROR_DOWNLOAD_MANIFEST"),this.startGame();break;case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:cc.log("onAssetsManagerEvent.ERROR_PARSE_MANIFEST"),this.startGame();break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:cc.log("onAssetsManagerEvent.NEW_VERSION_FOUND");break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:cc.log("onAssetsManagerEvent.ALREADY_UP_TO_DATE"),this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_PROGRESS",{bytePercent:1,filePercent:1}),this.onPatchDownloadSuccess();break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:cc.log("onAssetsManagerEvent.UPDATE_PROGRESSION"),this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_PROGRESS",{bytePercent:e.getPercent()||0,filePercent:e.getPercentByFile()||0});break;case jsb.EventAssetsManager.ASSET_UPDATED:cc.log("onAssetsManagerEvent.ASSET_UPDATED");break;case jsb.EventAssetsManager.ERROR_UPDATING:cc.log("onAssetsManagerEvent.ERROR_UPDATING"),this.startGame();break;case jsb.EventAssetsManager.UPDATE_FINISHED:cc.log("onAssetsManagerEvent.UPDATE_FINISHED"),this.sendUiMsg("UPDATER_UI_MSG_DOWNLOAD_PROGRESS",{bytePercent:1,filePercent:1}),this.onPatchDownloadSuccess();break;case jsb.EventAssetsManager.UPDATE_FAILED:cc.log("onAssetsManagerEvent.UPDATE_FAILED"),this.startGame();break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:cc.log("onAssetsManagerEvent.ERROR_DECOMPRESS"),this.startGame();break;default:cc.log("onAssetsManagerEvent.unknown code",e.getEventCode()),this.startGame()}},t.prototype.getPatchPath=function(){var e=jsb.fileUtils.getWritablePath(),t=e.substr(e.length-1,1);return"/"==t||"\\"==t?e+"patch/":e+"/patch/"},t.prototype.onTimeout=function(){this.startGame()},t.prototype.startTimeoutTimer=function(){var e=this,t=new i.default(this.TIMEOUT,1,function(){e.stopTimeoutTimer(),e.onTimeout()});this.timeoutTimer=t,t.startAndBindToNode(this)},t.prototype.stopTimeoutTimer=function(){this.timeoutTimer&&(this.timeoutTimer.stop(),this.timeoutTimer=null)},t.prototype.releaseRequestPatchInfoXhr=function(){this.requestPatchInfoXhr&&(this.requestPatchInfoXhr.abort(),this.requestPatchInfoXhr=null)},t.prototype.releaseAssetsManager=function(){this.assetsManagerTimer&&(this.assetsManagerTimer.stop(),this.assetsManagerTimer=null),this.assetsManagerListener&&(cc.eventManager.removeListener(this.assetsManagerListener),this.assetsManagerListener=null),this.assetsManager&&(this.assetsManager=null)},t=r([d],t)}(a.default));o.default=p,cc._RF.pop()},{"../../game/Const":"Const","../../game/manager/mgrDirector":"mgrDirector","../../game/view/node/LayerColor":"LayerColor","../utils/Timer":"Timer","../view/SceneBase":"SceneBase"}],vWarpSceneNode:[function(e,t,o){"use strict";cc._RF.push(t,"c3d699tPUtCqYM2DBA96B0+","vWarpSceneNode");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/utils/Tools"),l=e("../../../ulframework/view/ViewBase"),c=e("../../manager/mgrCfg"),u=e("../../manager/mgrDirector"),d=e("../../../ulframework/utils/Timer"),p=cc._decorator.ccclass,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadResStartTime=0,t.MIN_WAIT_GAP=.2,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vWarpSceneNode"},t.prototype._getResourceBindingConfig=function(){return{CC_labelProcess:[cc.Label],CC_nodeBottomTips:[cc.Node],CC_nodeContainer:[cc.Node],CC_nodeFront:[cc.Node],CC_nodeLabelTips:[cc.Node],CC_nodeLogo:[cc.Node],CC_nodeRoot:[cc.Node],CC_progressBar:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.timer&&(this.timer.stop(),this.timer=null)},t.prototype.onLoadedInit=function(){this.nodeRoot.setContentSize(u.default.size),this.bUIInited=!0},t.prototype.refreshTipWord=function(){if(this.nodeLabelTips&&this.nodeLabelTips.getComponent(cc.Label)){var e=" ",t=c.default.getDb("warp_tip_db"),o=s.default.getTableCount(t);if(o>0){var n=s.default.random(o)-1;e=t[n=Math.max(n,0)].word,this.nodeLabelTips.getComponent(cc.Label).string=e,this.bSetTipWord=!0}}},t.prototype.onTimerHandler=function(){var e=this.preloadResArr.length||1,t=Math.min(this.resLoadingIndex+1,e);this.progressBar.progress=t/e,this.labelProcess.string=ul.format("%s%%",Math.floor(t/e*100)),!this.bLoadedAllResCompleted||s.default.time()-this.loadResStartTime<=this.MIN_WAIT_GAP||(this.resetLoadData(),"function"==typeof this.context.fOnResLoadCompleted&&this.context.fOnResLoadCompleted())},t.prototype.resetLoadData=function(){this.timer&&this.timer.stop(),this.bLoadedAllResCompleted=!1,this.preloadResArr=[],this.resLoadingIndex=0,this.loadResStartTime=s.default.time(),this.progressBar.node.active=!1,this.progressBar.progress=0,this.labelProcess.string="0%"},t.prototype.startLoadRes=function(){if(this.resetLoadData(),this.preloadResArr=this.context.preloadResArr||[],!this.timer){var e=new d.default(.06,-1,this.onTimerHandler.bind(this));this.timer=e}this.timer.startAndBindToNode(this),this.preloadResArr&&0!=this.preloadResArr.length?this.tryStartLoadCurrRes():this.loadAllResCompleted()},t.prototype.tryStartLoadCurrRes=function(){var e=this;this.progressBar.node.active=!0;var t=this.preloadResArr[this.resLoadingIndex],o=t.url,n=t.assetType;u.default.preloadRes(o,n,function(){e.onLoadCurrResCompleted()})},t.prototype.onLoadCurrResCompleted=function(){this.resLoadingIndex++,this.resLoadingIndex>=this.preloadResArr.length?this.loadAllResCompleted():this.tryStartLoadCurrRes()},t.prototype.loadAllResCompleted=function(){this.bLoadedAllResCompleted=!0},t.prototype.playEffectIn=function(){return a(this,void 0,void 0,function(){var e=this;return i(this,function(t){return this.bEffectingOut=!1,this.bEffectingIn=!0,this.refreshTipWord(),this.nodeContainer.active=!0,this.nodeBottomTips.active=!1,this.nodeFront.active=!0,this.nodeFront.stopAllActions(),this.nodeRoot.setContentSize(u.default.size),this.nodeLogo.active=!0,this.nodeLogo.stopAllActions(),this.nodeLogo.runAction(cc.sequence(cc.delayTime(0),cc.callFunc(function(){cc.log("---warp fade in---1"),"function"==typeof e.context.fOnFadeInCompleted&&(cc.log("---warp fade in---2"),e.context.fOnFadeInCompleted()),e.startLoadRes()}))),[2]})})},t.prototype.playEffectOut=function(){return a(this,void 0,void 0,function(){var e=this;return i(this,function(t){return this.bEffectingOut?[2]:(this.bEffectingOut=!0,this.bEffectingIn=!1,this.nodeRoot.setContentSize(u.default.size),this.nodeContainer.active=!1,this.nodeBottomTips.active=!1,this.nodeFront.stopAllActions(),this.nodeFront.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){e.nodeFront.active=!1}))),"function"==typeof this.context.fOnFadeOutCompleted&&this.context.fOnFadeOutCompleted(),[2])})})},r([l.default.requireResourceLoaded],t.prototype,"playEffectIn",null),r([l.default.requireResourceLoaded],t.prototype,"playEffectOut",null),t=r([p],t)}(l.default);o.default=h,cc._RF.pop()},{"../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrDirector":"mgrDirector"}],vWarpSmallDialogNode:[function(e,t,o){"use strict";cc._RF.push(t,"782591VWMpN8IugOv7kOhoW","vWarpSmallDialogNode");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../ulframework/utils/Tools"),l=e("../../../ulframework/view/ViewBase"),c=e("../../manager/mgrDirector"),u=e("../../../ulframework/utils/Timer"),d=cc._decorator.ccclass,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadResStartTime=0,t.MIN_WAIT_GAP=.01,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vWarpSmallDialogNode"},t.prototype._getResourceBindingConfig=function(){return{CC_labelProcess:[cc.Label],CC_nodeContainer:[cc.Node],CC_nodeFront:[cc.Node],CC_nodeRoot:[cc.Node],CC_progressBar:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.onLoadedInit()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.timer&&(this.timer.stop(),this.timer=null)},t.prototype.onLoadedInit=function(){this.nodeRoot.setContentSize(c.default.size),this.bUIInited=!0},t.prototype.onTimerHandler=function(){var e=this.preloadResArr.length||1,t=Math.min(this.resLoadingIndex+1,e);this.progressBar.progress=t/e,this.labelProcess.string=ul.format("%s%%",Math.floor(t/e*100)),!this.bLoadedAllResCompleted||s.default.time()-this.loadResStartTime<=this.MIN_WAIT_GAP||(this.resetLoadData(),"function"==typeof this.context.fOnResLoadCompleted&&this.context.fOnResLoadCompleted())},t.prototype.resetLoadData=function(){this.timer&&this.timer.stop(),this.bLoadedAllResCompleted=!1,this.preloadResArr=[],this.resLoadingIndex=0,this.loadResStartTime=s.default.time(),this.progressBar.node.active=!1,this.progressBar.progress=0,this.labelProcess.string="0%"},t.prototype.startLoadRes=function(){if(this.resetLoadData(),this.preloadResArr=this.context.preloadResArr||[],!this.timer){var e=new u.default(.06,-1,this.onTimerHandler.bind(this));this.timer=e}this.timer.startAndBindToNode(this),this.preloadResArr&&0!=this.preloadResArr.length?this.tryStartLoadCurrRes():this.loadAllResCompleted()},t.prototype.tryStartLoadCurrRes=function(){var e=this;this.progressBar.node.active=!0;var t=this.preloadResArr[this.resLoadingIndex],o=t.url,n=t.assetType;c.default.preloadRes(o,n,function(){e.onLoadCurrResCompleted()})},t.prototype.onLoadCurrResCompleted=function(){this.resLoadingIndex++,this.resLoadingIndex>=this.preloadResArr.length?this.loadAllResCompleted():this.tryStartLoadCurrRes()},t.prototype.loadAllResCompleted=function(){this.bLoadedAllResCompleted=!0},t.prototype.playEffectIn=function(){return a(this,void 0,void 0,function(){var e=this;return i(this,function(t){return this.bEffectingIn?[2]:(this.bEffectingOut=!1,this.bEffectingIn=!0,this.nodeFront.stopAllActions(),this.nodeContainer.active=!0,this.nodeFront.active=!0,this.nodeRoot.setContentSize(c.default.size),this.nodeRoot.runAction(cc.sequence(cc.delayTime(0),cc.callFunc(function(){"function"==typeof e.context.fOnFadeInCompleted&&e.context.fOnFadeInCompleted(),e.startLoadRes()}))),[2])})})},t.prototype.playEffectOut=function(){return a(this,void 0,void 0,function(){var e=this;return i(this,function(t){return this.bEffectingOut?[2]:(this.bEffectingOut=!0,this.bEffectingIn=!1,this.nodeRoot.setContentSize(c.default.size),this.nodeContainer.active=!1,this.nodeFront.runAction(cc.sequence(cc.delayTime(.1),cc.callFunc(function(){e.nodeFront.active=!1}))),"function"==typeof this.context.fOnFadeOutCompleted&&this.context.fOnFadeOutCompleted(),[2])})})},r([l.default.requireResourceLoaded],t.prototype,"playEffectIn",null),r([l.default.requireResourceLoaded],t.prototype,"playEffectOut",null),t=r([d],t)}(l.default);o.default=p,cc._RF.pop()},{"../../../ulframework/utils/Timer":"Timer","../../../ulframework/utils/Tools":"Tools","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrDirector":"mgrDirector"}],vWebScene:[function(e,t,o){"use strict";cc._RF.push(t,"6d6c4wOlahHd5dof30pnF3Y","vWebScene");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/SceneBase"),s=cc._decorator.ccclass,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"scene/vWebScene"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_labelTip:[cc.Label],CC_labelTitle:[cc.Label],CC_layoutWebView:[cc.Layout]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.onTouchButtonClose=function(e){},t=r([s],t)}(i.default);o.default=l,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/SceneBase":"SceneBase"}],vWebView:[function(e,t,o){"use strict";cc._RF.push(t,"9f5429s7Y5MsbAS/TOQ2/pi","vWebView");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrDirector"),l=e("../script/component/WebViewController"),c=cc._decorator.ccclass,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vWebView"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_labelTitle:[cc.Label],CC_nodeTitle:[cc.Node],CC_nodeWeb:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.nodeResource.setContentSize(s.default.size),this.fillData()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(e){},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(){this.nodeWeb.getComponent(l.default).webView.url=this.context.url,this.labelTitle.string=this.context.title||"webview"},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t=r([c],t)}(i.default);o.default=u,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../manager/mgrDirector":"mgrDirector","../script/component/WebViewController":"WebViewController"}],vWelfareDialog:[function(e,t,o){"use strict";cc._RF.push(t,"69fe7Phq4hAaK8BSox4bPNy","vWelfareDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../../ulframework/view/ReuseList"),l=e("../../../ulframework/view/ReuseLayouterVGrid"),c=e("../node/vWelfareItem"),u=e("../../manager/mgrSdk"),d=cc._decorator,p=d.ccclass,h=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonClose=null,t.labelTitle=null,t.nodeList=null,t.listItem=null,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vWelfareDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonClose:[a.default,"onTouchButtonClose"],CC_labelTitle:[cc.Label],CC_nodeList:[cc.Node]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi(),u.default.openJump("70","reward"),this.registerListeners({MSG_SDK_OPEN_JUMP_RESULT:this.onMsgSdkOpenJumpResult,MSG_SDK_JUMP_OTHER_GAME_REWARD_RESULT:this.onMsgSdkJumpOtherGameRewardResult})},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.buildUi=function(){var e=new s.default;e.setLayouter((new l.default).setCellSize(120,140).setCols(3).setGap(20,20).setPending(10)),e.setCreator(function(e){var t=new c.default;t.parent=e,e.item=t}),e.setSetter(function(e,t){e.item.fillData(t)}),e.parent=this.nodeList,e.setContentSize(this.nodeList.getContentSize()),this.listItem=e},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onMsgSdkOpenJumpResult=function(e){var t=e.jumpInfo;this.listItem.setDatas(t)},t.prototype.onMsgSdkJumpOtherGameRewardResult=function(e){e.bSuccessful&&u.default.openJump("70","reward")},t=r([p],t)}(i.default));o.default=h,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../../ulframework/view/ReuseLayouterVGrid":"ReuseLayouterVGrid","../../../ulframework/view/ReuseList":"ReuseList","../../manager/mgrSdk":"mgrSdk","../node/vWelfareItem":"vWelfareItem"}],vWelfareItem:[function(e,t,o){"use strict";cc._RF.push(t,"4a89e6ER7FIFYOYWjpX5LdD","vWelfareItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("../../manager/mgrCfg"),l=e("../../manager/mgrSdk"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button1=null,t.labelAmount=null,t.nodeReceived=null,t.nodeReward=null,t.spriteIcon=null,t.spriteRewardIcon=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vWelfareItem"},t.prototype._getResourceBindingConfig=function(){return{CC_button1:[a.default,"onTouchButton1"],CC_labelAmount:[cc.Label],CC_nodeReceived:[cc.Node],CC_nodeReward:[cc.Node],CC_spriteIcon:[cc.Sprite],CC_spriteRewardIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.fillData=function(e){if(this.context.jumpInfo=e,e.url&&this.spriteIcon.loadSpriteFrameAndKeepSize(e.url),e.rewards&&!e.bReceived){this.nodeReward.active=!0;var t=e.rewards[0],o=t[0],n=t[1],r=s.default.get("item_template_db",o);r&&r.icon&&this.spriteRewardIcon.loadSpriteFrameAndKeepSize(r.icon),this.labelAmount.string="*"+n.toString()}else this.nodeReward.active=!1;this.nodeReceived.active=e.bReceived,e.bReceived||this.nodeReward.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.1),cc.scaleTo(.3,1),cc.scaleTo(.3,.9),cc.scaleTo(.3,1))))},t.prototype.onTouchButton1=function(e){e.isClick()&&this.context.jumpInfo&&this.context.jumpInfo.index&&l.default.jumpOtherGame(this.context.jumpInfo.index,"reward")},r([i.default.requireResourceLoaded],t.prototype,"fillData",null),t=r([u],t)}(i.default));o.default=d,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrSdk":"mgrSdk"}],vWishDialog:[function(e,t,o){"use strict";cc._RF.push(t,"c8dd2M5TCZJ56HUvErk1pB3","vWishDialog");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/DialogBase"),s=e("../../manager/mgrPlayer"),l=e("../../manager/mgrWish"),c=e("../../manager/mgrTip"),u=e("../../manager/mgrAd"),d=e("../../../ulframework/view/ReuseList"),p=e("../../struct/sAvatar"),h=e("../node/vAvatar"),f=e("../../../ulframework/view/ReuseLayouterVGrid"),g=e("../node/vWishPartItem"),m=e("../../manager/mgrCfg"),_=e("../../manager/mgrI18n"),v=cc._decorator,y=v.ccclass,C=(v.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonAdWish=null,t.buttonClose=null,t.buttonShowLeft=null,t.buttonShowRight=null,t.buttonWish=null,t.labelAdRemain=null,t.labelCost=null,t.labelNameLeft=null,t.labelNameRight=null,t.labelSpecialWishProgress=null,t.nodeAdWish=null,t.nodeAvatarLeft=null,t.nodeAvatarRight=null,t.nodeLeft=null,t.nodeListLeft=null,t.nodeListRight=null,t.nodePartLeft=null,t.nodePartRight=null,t.nodeRight=null,t.nodeWish=null,t.progressBarBall=null,t.AD_FREE_WISH_NAME="video_free_wish",t.AD_INTER_VIEW_NAME="inter_wish_dialog",t.AD_INTER_VIEW_DETAIL_NAME="inter_wish_dialog_detail",t.bAction=!1,t}return n(t,e),t.prototype._getResourceName=function(){return"dialog/vWishDialog"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonAdWish:[a.default,"onTouchButtonAdWish"],CC_buttonClose:[a.default,"onTouchButtonClose"],CC_buttonShowLeft:[a.default,"onTouchButtonShowLeft"],CC_buttonShowRight:[a.default,"onTouchButtonShowRight"],CC_buttonWish:[a.default,"onTouchButtonWish"],CC_labelAdRemain:[cc.Label],CC_labelCost:[cc.Label],CC_labelNameLeft:[cc.Label],CC_labelNameRight:[cc.Label],CC_labelSpecialWishProgress:[cc.Label],CC_nodeAdWish:[cc.Node],CC_nodeAvatarLeft:[cc.Node],CC_nodeAvatarRight:[cc.Node],CC_nodeLeft:[cc.Node],CC_nodeListLeft:[cc.Node],CC_nodeListRight:[cc.Node],CC_nodePartLeft:[cc.Node],CC_nodePartRight:[cc.Node],CC_nodeRight:[cc.Node],CC_nodeWish:[cc.Node],CC_progressBarBall:[cc.ProgressBar]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.setShadowOpacity(210),this.buildUi(),this.fillRole(),this.fillData(),this.registerListeners({MSG_WISH_SUCCESS:this.onMsgWishSuccess,MSG_AD_EVENT_SUCCESSD:this.onMsgAdEventSuccessd}),u.default.showIntAd(null,this.AD_INTER_VIEW_NAME)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){this.context.callback&&this.context.callback(),e.prototype.onDestroy.call(this)},t.prototype.isClickShadowClose=function(){return!1},t.prototype.buildUi=function(){var e=new p.default;this.structAvatarLeft=e,this.viewAvatarLeft=new h.default({structAvatar:this.structAvatarLeft}),this.viewAvatarLeft.parent=this.nodeAvatarLeft,this.viewAvatarLeft.setScale(.9);var t=this.nodeListLeft,o=new d.default;o.setLayouter((new f.default).setCellSize(100,100).setGap(10,10).setCols(2).setPending(0)),o.setCreator(function(e){var t=new g.default;t.parent=e,e.item=t}),o.setSetter(function(e,t){e.item.fillByPartId(t)}),o.parent=t,o.setContentSize(t.getContentSize()),o.setElasticEnabled(!1),this.listPartLeft=o,e=new p.default,this.structAvatarRight=e,this.viewAvatarRight=new h.default({structAvatar:this.structAvatarRight}),this.viewAvatarRight.parent=this.nodeAvatarRight,this.viewAvatarRight.setScale(.9),t=this.nodeListRight,(o=new d.default).setLayouter((new f.default).setCellSize(100,100).setGap(10,10).setCols(2).setPending(0)),o.setCreator(function(e){var t=new g.default;t.parent=e,e.item=t}),o.setSetter(function(e,t){e.item.fillByPartId(t)}),o.parent=t,o.setContentSize(t.getContentSize()),o.setElasticEnabled(!1),this.listPartRight=o,this.nodePartLeft.active=!1,this.nodePartRight.active=!1},t.prototype.fillRole=function(){var e=m.default.get("wish_module_config_db",1);if(e){var t=e.suitIds,o=m.default.get("suit_db",t[0]||0);o&&(this.structAvatarLeft.fillByPartIds(o.displayIds),this.viewAvatarLeft.refreshAll(),this.listPartLeft.setDatas(o.displayIds),this.labelNameLeft.string=o.name);var n=m.default.get("suit_db",t[1]||0);n&&(this.structAvatarRight.fillByPartIds(n.displayIds),this.viewAvatarRight.refreshAll(),this.listPartRight.setDatas(n.displayIds),this.labelNameRight.string=n.name)}},t.prototype.fillData=function(){this.labelCost.string=s.default.getItemAmountStr(l.default.getWishCost());var e=l.default.getSpecialWishProgress(),t=e[0],o=e[1];this.labelSpecialWishProgress.string=ul.format("%d/%d",t,o),this.progressBarBall.progress=t/o;var n=u.default.getAdEventRemainCount(this.AD_FREE_WISH_NAME);this.nodeAdWish.active=u.default.preCheckCanTriggerAdEvent(this.AD_FREE_WISH_NAME)&&n>0,this.labelAdRemain.string=ul.format(_.default.getText("vWishDialog.2"),n),c.default.setBadgeEnabled(this.buttonAdWish.node,!0,-100,-35)},t.prototype.onTouchButtonClose=function(e){e.isClick()&&this.closeDialog()},t.prototype.onTouchButtonAdWish=function(e){e.isClick()&&u.default.triggerAdEvent(this.AD_FREE_WISH_NAME,null,!0)},t.prototype.onTouchButtonWish=function(e){e.isClick()&&l.default.tryWish()},t.prototype.onTouchButtonShowLeft=function(e){var t=this;e.isClick()&&(this.bShowRight||this.bAction||(this.bAction=!0,this.bShowLeft?(this.nodePartLeft.active=!0,this.nodePartLeft.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){t.nodeRight.active=!0,t.nodeRight.runAction(cc.fadeIn(.3)),t.bShowLeft=!1,t.nodePartLeft.active=!1,t.bAction=!1})))):(u.default.showIntAd(null,this.AD_INTER_VIEW_DETAIL_NAME),this.nodeRight.active=!0,this.nodeRight.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){t.nodePartLeft.active=!0,t.nodePartLeft.runAction(cc.fadeIn(.3)),t.bShowLeft=!0,t.nodeRight.active=!1,t.bAction=!1}))))))},t.prototype.onTouchButtonShowRight=function(e){var t=this;e.isClick()&&(this.bShowLeft||this.bAction||(this.bAction=!0,this.bShowRight?(this.nodePartRight.active=!0,this.nodePartRight.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){t.nodeLeft.active=!0,t.nodeLeft.runAction(cc.fadeIn(.3)),t.bShowRight=!1,t.nodePartRight.active=!1,t.bAction=!1})))):(u.default.showIntAd(null,this.AD_INTER_VIEW_DETAIL_NAME),this.nodeLeft.active=!0,this.nodeLeft.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){t.nodePartRight.active=!0,t.nodePartRight.runAction(cc.fadeIn(.3)),t.bShowRight=!0,t.nodeLeft.active=!1,t.bAction=!1}))))))},t.prototype.onMsgWishSuccess=function(e){this.fillData(),this.listPartLeft.refreshActiveCells(),this.listPartRight.refreshActiveCells()},t.prototype.onMsgAdEventSuccessd=function(e){e.adEventId==this.AD_FREE_WISH_NAME&&l.default.tryWish(!0)},t=r([y],t)}(i.default));o.default=C,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/DialogBase":"DialogBase","../../../ulframework/view/ReuseLayouterVGrid":"ReuseLayouterVGrid","../../../ulframework/view/ReuseList":"ReuseList","../../manager/mgrAd":"mgrAd","../../manager/mgrCfg":"mgrCfg","../../manager/mgrI18n":"mgrI18n","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrTip":"mgrTip","../../manager/mgrWish":"mgrWish","../../struct/sAvatar":"sAvatar","../node/vAvatar":"vAvatar","../node/vWishPartItem":"vWishPartItem"}],vWishPartItem:[function(e,t,o){"use strict";cc._RF.push(t,"c23298a78xDQJRhNJUerM8h","vWishPartItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../ulframework/component/ScleableButton"),i=e("../../../ulframework/view/ViewBase"),s=e("./vLevelBar"),l=e("../../manager/mgrCfg"),c=e("../../manager/mgrPlayer"),u=e("../../manager/mgrTip"),d=cc._decorator,p=d.ccclass,h=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBg=null,t.nodeLevel=null,t.nodeOwned=null,t.spriteBg=null,t.spriteIcon=null,t}return n(t,e),t.prototype._getResourceName=function(){return"node/vWishPartItem"},t.prototype._getResourceBindingConfig=function(){return{CC_buttonBg:[a.default,"onTouchButtonBg"],CC_nodeLevel:[cc.Node],CC_nodeOwned:[cc.Node],CC_spriteBg:[cc.Sprite],CC_spriteIcon:[cc.Sprite]}},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onResourceLoaded=function(){e.prototype.onResourceLoaded.call(this),this.buildUi()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.buildUi=function(){var e=new s.default;e.parent=this.nodeLevel,this.levelBar=e,this.nodeLevel.scale=.8},t.prototype.fillByPartId=function(e){this.context.partId=e;var t=l.default.get("cosmetic_part_db",e);t&&t.icon&&this.spriteIcon.loadSpriteFrameAndKeepSize(t.icon),this.levelBar.setLevel(5,l.default.get("item_template_db",e,"level")),this.nodeOwned.active=c.default.getItemAmount(e)>0},t.prototype.onTouchButtonBg=function(e){e.isClick()&&this.context.partId&&u.default.showItemDetailDialog(this.context.partId,1)},r([i.default.requireResourceLoaded],t.prototype,"fillByPartId",null),t=r([p],t)}(i.default));o.default=h,cc._RF.pop()},{"../../../ulframework/component/ScleableButton":"ScleableButton","../../../ulframework/view/ViewBase":"ViewBase","../../manager/mgrCfg":"mgrCfg","../../manager/mgrPlayer":"mgrPlayer","../../manager/mgrTip":"mgrTip","./vLevelBar":"vLevelBar"}],vi:[function(e,t,o){"use strict";cc._RF.push(t,"2249f8X5GZJzIgo4QFVElZd","vi"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.vi={mgrPkMirror:{1:"\u0110\xe3 nh\u1eadn r\u1ed3i",2:"C\u1ea7n c\u1ea5p cao h\u01a1n"},vSubjectSuitDetailDialog:{1:"S\u1eb5n s\xe0ng",3:"M\u1eb7c v\xe0o th\xe0nh c\xf4ng",2:"M\u1eb7c v\xe0o",4:"Kh\xf4ng c\xf3 \u0111\u1ed3 v\u1eadt kh\u1ea3 d\u1ee5ng"},vHudDialog:{1:"M\u1ed9t \u0111\u1ee3t l\u1edbn \u0111\u01a1n h\xe0ng s\u1eafp \u0111\u1ebfn!",3:"T\u0103ng t\u1ed1c",2:"Kh\xf4ng ph\u1ea3i b\xe2y gi\u1edd",5:"Th\xeam t\u1ed1i \u0111a",4:"Th\xeam t\u1ed1i \u0111a \u0111\u01a1n",7:"X\xe1c nh\u1eadn",6:"Tuy\u1ec7t! B\u1eaft \u0111\u1ea7u kinh doanh ngay!",9:"\u0110\u01a1n h\xe0ng \u0111\u1ea7y \u0111\u1ee7",8:"H\u1ee7y"},mgrAd:{1:"\u0110ang h\u1ed3i ph\u1ee5c, vui l\xf2ng th\u1eed l\u1ea1i sau",2:"Ch\u01a1i th\u1ea5t b\u1ea1i"},vPromptAdDialog:{1:"M\u1eb9o",3:"Kh\xf4ng ph\u1ea3i b\xe2y gi\u1edd",2:"Xem video",5:"Xem qu\u1ea3ng c\xe1o \u0111\u1ec3 nh\u1eadn th\u01b0\u1edfng",4:"L\u1ea5y",7:"Kh\xf4ng c\u1ea7n",6:"Ph\u1ea7n th\u01b0\u1edfng video",8:"OK"},vAdFaildDialog:{1:"M\u1eb9o",3:"H\u1ee7y",2:"K\u1ebft n\u1ed1i th\u1ea5t b\u1ea1i. H\xe3y ki\u1ec3m tra k\u1ebft n\u1ed1i m\u1ea1ng ho\u1eb7c th\u1eed l\u1ea1i sau",4:"Th\u1eed l\u1ea1i"},vDailyQuestDialog:{1:"Nhi\u1ec7m v\u1ee5",2:"Kh\xf4ng \u0111\u1ee7 huy ch\u01b0\u01a1ng, ho\xe0n th\xe0nh th\xeam m\u1ed9t s\u1ed1 nhi\u1ec7m v\u1ee5"},vPromptHudCrazyDialog:{1:"M\u1ed9t \u0111\u1ee3t l\u1edbn \u0111\u01a1n h\xe0ng s\u1eafp \u0111\u1ebfn!",3:"L\u1ea5y",2:"Kh\xf4ng ph\u1ea3i b\xe2y gi\u1edd",4:"Th\xfac gi\u1ee5c"},vProductResultDialog:{1:"B\xe1n",3:"B\xfap b\xea n\xe0y \u0111ang \u0111\u01b0\u1ee3c rao b\xe1n",2:"X\xe1c nh\u1eadn",5:"B\xe1n th\u1ea5t b\u1ea1i",4:"Rao b\xe1n th\xe0nh c\xf4ng"},vHudRankDialog:{10:"C\u1eeda h\xe0ng",1:"Ch\u01b0a x\u1ebfp h\u1ea1ng",3:"V\xe0o tr\u1eadn chi\u1ebfn",2:"\u0110i",5:"T\xean",4:"H\u1ea1ng",7:"X\u1ebfp h\u1ea1ng",6:"Doanh thu cao nh\u1ea5t",9:"Tr\u1eadn \u0111\u1ea5u",8:"Thi \u0111\u1ea5u"},mgrShop:{1:"Mua th\u1ea5t b\u1ea1i",3:"Ch\u01b0a kh\u1ea3 d\u1ee5ng",2:"Kh\xf4ng \u0111\u1ee7 [%s]"},vPartRankItem:{1:"\u0110\xe3 s\u1edf h\u1eefu"},vPackingLvupDialog:{1:"G\xf3i"},vPromptAdSelectDialog:{1:"M\u1eb9o",3:"Xem qu\u1ea3ng c\xe1o \u0111\u1ec3 nh\u1eadn mi\u1ec5n ph\xed",2:"Xem video \u0111\u1ec3 g\u1ea5p \u0111\xf4i",5:"L\u1ea5y",4:"Kh\xf4ng ph\u1ea3i b\xe2y gi\u1edd",6:"Xem qu\u1ea3ng c\xe1o \u0111\u1ec3 nh\u1eadn mi\u1ec5n ph\xed"},vOfflineRewardDialog:{1:"L\u1ea5y",3:"Ph\u1ea7n th\u01b0\u1edfng video",2:"Xem qu\u1ea3ng c\xe1o \u0111\u1ec3 nh\u1eadn ph\u1ea7n th\u01b0\u1edfng g\u1ea5p \u0111\xf4i",5:"OK",4:"Kh\xf4ng c\u1ea7n",7:"Kh\xf4ng ph\u1ea3i b\xe2y gi\u1edd",6:"Nh\u1eadn 2x"},vPkMirrorDialog:{1:"Tr\xean v\u0169 \u0111\xe0i",3:"H\xf3a trang",2:"Nh\u1eadn th\u01b0\u1edfng",5:"Kh\xf4ng \u0111\u1ee7 l\u1ea7n, vui l\xf2ng th\u1eed l\u1ea1i sau",4:"Mi\u1ec5n ph\xed"},vBuildingStoreDialog:{11:"Xem qu\u1ea3ng c\xe1o",10:"Xem qu\u1ea3ng c\xe1o \u0111\u1ec3 l\u1ea5y 2 \u0111i\u1ec3m th\u1ec3 l\u1ef1c mi\u1ec5n ph\xed",13:"M\u1eb9o",12:"Kh\xf4ng \u0111\u1ee7 th\u1ec3 l\u1ef1c",15:"H\u1ee7y",14:"B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n \u0111\xf3ng c\u1eeda h\xe0ng?",17:"\u0110\u01a1n h\xe0ng \u0111\u1ea7y \u0111\u1ee7",16:"C\xf3",18:"Kh\xf4ng th\u1ec3 thu\xea th\xeam",1:"Nh\xe0 b\xfap b\xea",3:"Kh\xf4ng \u0111\u1ee7 \u0111\u01a1n h\xe0ng. L\u1ea5y th\xeam \u0111\u01a1n h\xe0ng ngay!",2:"G\xf3i",5:"Th\xeam t\u1ed1i \u0111a",4:"Kh\xf4ng ph\u1ea3i b\xe2y gi\u1edd",7:"Kh\xf4ng c\xf2n kh\xe1ch h\xe0ng n\xe0o",6:"M\xe0n: %s",9:"M\u1edf",8:"C\xf3 g\xec \u0111\xf3 kh\xf4ng \u1ed5n?"},vAdWaitingDialog:{1:"M\u1eb9o",3:"H\u1ee7y",2:"\u0110ang k\u1ebft n\u1ed1i\u2026"},vBuildingStoreDetailDialog:{11:"\u0110\xe3 n\xe2ng c\u1ea5p th\xe0nh c\xf4ng!",10:"\u0110\xe3 m\u1edf kh\xf3a th\xe0nh c\xf4ng!",1:"M\xe0n hi\u1ec7n t\u1ea1i:",3:"M\xe0n ti\u1ebfp theo:",2:"S\u1ee9c ch\u1ee9a:",5:"N\xe2ng c\u1ea5p",4:"Nh\xe0 b\xfap b\xea",7:"Mi\u1ec5n ph\xed",6:"Xem qu\u1ea3ng c\xe1o \u0111\u1ec3 n\xe2ng c\u1ea5p mi\u1ec5n ph\xed",9:"T\u1ed1i \u0111a",8:"Kh\xf4ng ph\u1ea3i b\xe2y gi\u1edd"},vSignLotteryItem:{1:"M\u1edf kh\xf3a \u1edf c\u1ea5p %s"},daily_quest_template_db_desc:{1:"Ho\xe0n th\xe0nh tr\u1eadn chi\u1ebfn 3 l\u1ea7n",3:"Th\xedch trong tr\u1eadn \u0111\u1ea5u h\u1eb1ng tu\u1ea7n 10 l\u1ea7n",2:"Th\u1eafng tr\u1eadn 1 l\u1ea7n",5:"Nh\u1eadn ph\u1ea7n th\u01b0\u1edfng \u0111\u0103ng nh\u1eadp 1 l\u1ea7n",4:"Ho\xe0n th\xe0nh tr\u1eadn \u0111\u1ea5u h\u1eb1ng tu\u1ea7n 1 l\u1ea7n",7:"M\u1edf c\u1eeda h\xe0ng th\xe0nh c\xf4ng 2 l\u1ea7n",6:"Nh\u1eadn 1 \u0111\u1ed3 v\u1eadt m\u1edbi",8:"T\u0103ng t\u1ed1c ph\xe1t t\u1edd r\u01a1i 100 l\u1ea7n"},vDailyQuestListItem:{1:"\u0110\u1ebfn",2:"L\u1ea5y"},vWarpSmallDialogNode:{1:"\u0110ang t\u1ea3i\u2026"},vSignLotteryDialog:{1:"R\xfat th\u0103m may m\u1eafn",3:"Xem video \u0111\u1ec3 r\xfat th\u0103m may m\u1eafn mi\u1ec5n ph\xed",2:"Mi\u1ec5n ph\xed",5:"\u0110\xe3 h\u1ebft",4:"L\u1ea7n sau \u0111\u1ebfn n\u1eefa nh\xe9",6:"L\u1ea7n sau \u0111\u1ebfn n\u1eefa nh\xe9"},mgrSubjectDress:{1:"\u0110\xe3 s\u1edf h\u1eefu b\u1ed9 gi\u1ed1ng nh\u01b0 v\u1eady",2:"\u0110\xe3 l\u01b0u th\xe0nh c\xf4ng"},vPricePromoteAdDialog:{1:"M\u1eb9o",3:"Kh\xf4ng ph\u1ea3i b\xe2y gi\u1edd",2:"Xem video \u0111\u1ec3 nh\u1eadn t\u0103ng gi\xe1",4:"3x"},vSignDialog:{11:"L\xean m\u1ea1ng k\u1ebft n\u1ed1i \u0111\u1ec3 nh\u1eadn th\u01b0\u1edfng! H\xe3y ki\u1ec3m tra m\u1ea1ng v\xe0 th\u1eed l\u1ea1i",10:"M\u1eb9o",13:"\u0110\xe3 \u0111\u0103ng nh\u1eadp r\u1ed3i",12:"X\xe1c nh\u1eadn",15:"\u0110\u1ee3i",14:"Kh\xf4ng th\u1ec3 \u0111\u0103ng nh\u1eadp ngay",1:"\u0110\u0103ng nh\u1eadp",3:"Xem qu\u1ea3ng c\xe1o \u0111\u1ec3 nh\u1eadn th\u01b0\u1edfng",2:"Nh\u1eadn 2x",5:"Kh\xf4ng c\u1ea7n",4:"Ph\u1ea7n th\u01b0\u1edfng video",7:"Ch\u1ec9 c\xf3 kim c\u01b0\u01a1ng",6:"Nh\u1eadn h\u1ebft",9:"OK",8:"L\u1ea5y"},vInputNameDialog:{1:"Bi\u1ec7t danh:",3:"T\u1ea1o t\xean",2:"L\u1ea5y t\xean ng\u1eabu nhi\xean",4:"X\xe1c nh\u1eadn"},vGoldRainDialog:{1:"L\u1eafc",3:"M\u1ed9t \u0111\u1ee3t xu s\u1eafp \u0111\u1ebfn",2:"Nh\u1ea5n n\xfat \u0111\u1ec3 l\u1ea5y xu",5:"M\u1eb9o",4:"B\u1eaft \u0111\u1ea7u",7:"H\u1ee7y",6:"B\u1ea1n s\u1ebd h\u1ee5t m\u1ea5t nhi\u1ec1u xu n\u1ebfu tho\xe1t ngay, b\u1ea1n v\u1eabn mu\u1ed1n tho\xe1t?",8:"C\xf3"},vMallItemFreeRmb:{1:"Kim c\u01b0\u01a1ng mi\u1ec5n ph\xed",2:"Mi\u1ec5n ph\xed"},mgrSdk:{1:"M\u1eb9o",3:"H\u1ee7y",2:"B\u1ea1n c\xf3 mu\u1ed1n tho\xe1t ngay?",4:"Tho\xe1t tr\xf2 ch\u01a1i"},vLoadingDialog:{1:"\u0110ang t\u1ea3i\u2026",2:"Ho\xe0n t\u1ea5t"},StageScriptBase:{1:"L\xe0m",3:"M\u1eb9o",2:"\u0110\xe3 kh\xf3a",5:"H\u1ee7y",4:"Tho\xe1t ngay?",7:"B\u1ed9 n\xe0y \u0111ang b\xe1n",6:"C\xf3",8:"OK"},mgrTip:{1:"M\u1eb9o",3:"H\u1ee7y",2:"H\xe3y \u0111\u1ee3i\u2026"},vSubjectSuitDressListItem:{1:"Mi\u1ec5n ph\xed"},vPkMirrorRankListItem:{1:"Ng\xf4i sao: %d"},mgrPlayer:{1:"\u0110\u1ed3 v\u1eadt n\xe0y b\u1ecb kh\xf3a.",3:"\u0110\xe3 nh\u1eadn r\u1ed3i",2:"Tuy\u1ec7t v\u1eddi. B\u1ea1n \u0111\xe3 s\u1edf h\u1eefu t\u1ea5t c\u1ea3 \u0111\u1ed3 v\u1eadt trong b\u1ed9 n\xe0y",5:"\u0110\xe3 nh\u1eadn",4:"Ch\u01b0a thu th\u1eadp \u0111\u1ee7 h\u1ebft c\xe1c m\xf3n \u0111\u1ed3 b\u1eaft bu\u1ed9c"},vRoomDialog:{11:"B\xfap b\xea n\xe0y \u0111ang \u0111\u01b0\u1ee3c rao b\xe1n",10:"N\u1ed9p th\xe0nh c\xf4ng!",13:"B\xe1n th\u1ea5t b\u1ea1i",12:"Rao b\xe1n th\xe0nh c\xf4ng",1:"Kh\xf4ng c\xf3 \u0111\u1ed3 v\u1eadt",3:"L\xe0m",2:"Trang ph\u1ee5c",5:"Nguy\xean g\u1ed1c: %s",4:"Gi\xe1",7:"Ph\u1ea3i h\xf3a trang \u0111\xfang \u0111\u1ec3 c\xf3 th\u1ec3 n\u1ed9p",6:"M\u1eb9o",9:"Ph\u1ea3i m\u1eb7c v\xe1y \u0111\u1ec3 c\xf3 th\u1ec3 n\u1ed9p",8:"OK"},vGotItemDialog:{1:"\u0110\u1ed3 v\u1eadt \u0111\xe3 s\u1edf h\u1eefu! Chuy\u1ec3n \u0111\u1ed5i th\xe0nh:",3:"Mi\u1ec5n ph\xed",2:"Mua",5:"L\u1ea5y",4:"Xem qu\u1ea3ng c\xe1o \u0111\u1ec3 nh\u1eadn mi\u1ec5n ph\xed"},vWishDialog:{1:"Xem b\xf3i",2:"S\u1ed1 l\u01b0\u1ee3t: %d"},item_template_db_name:{1:"Kim c\u01b0\u01a1ng",2:"Xu",4:"Th\u1ec3 l\u1ef1c",16:"Ng\xf4i sao"},StageScriptFree:{1:"M\u1eb9o",3:"H\u1ee7y",2:"G\u1eedi trang ph\u1ee5c cho tr\u1eadn \u0111\u1ea5u?",5:"B\u1ea1n c\xf3 mu\u1ed1n tho\xe1t?",4:"G\u1eedi",7:"Ho\xe0n t\u1ea5t",6:"C\xf3"},StageScriptPvp:{1:"M\u1eb9o",3:"H\u1ee7y",2:"G\u1eedi trang ph\u1ee5c cho tr\u1eadn \u0111\u1ea5u?",5:"\u0110\xe3 kh\xf3a",4:"G\u1eedi",7:"C\xf3",6:"B\u1ea1n c\xf3 mu\u1ed1n tho\xe1t?",8:"Thi \u0111\u1ea5u"},vPkMirrorAdventureDialog:{10:"\u0110\xe3 nh\u1eadn",1:"C\xf3 5 sao",3:"Xem qu\u1ea3ng c\xe1o \u0111\u1ec3 nh\u1eadn th\u01b0\u1edfng",2:"C\u1ea7n c\u1ea5p cao h\u01a1n \u0111\u1ec3 nh\u1eadn",5:"Kh\xf4ng c\u1ea7n",4:"Ph\u1ea7n th\u01b0\u1edfng video",7:"OK",6:"L\u1ea5y",9:"Ch\u1ec9 c\xf3 kim c\u01b0\u01a1ng",8:"Nh\u1eadn h\u1ebft"},vShopDialog:{1:"Mua",2:"\u0110\u1eb7c bi\u1ec7t"},vMallItemFreeGold:{1:"Xu mi\u1ec5n ph\xed",2:"Mi\u1ec5n ph\xed"},vNetworkFaildDialog:{1:"M\u1eb9o",3:"H\u1ee7y",2:"Kh\xf4ng th\u1ec3 k\u1ebft n\u1ed1i, h\xe3y ki\u1ec3m tra m\u1ea1ng ho\u1eb7c quay l\u1ea1i m\xe0n trong tr\xf2 ch\u01a1i \u0111\u1ec3 ti\u1ebfp t\u1ee5c",4:"Th\u1eed l\u1ea1i"},vPromptOpenStoreDialog:{1:"N\u1ed9i dung"},mgrPacking:{1:"\u0110ang g\xf3i s\u1ea3n ph\u1ea9m",3:"Tr\u01b0\u1edbc ti\xean \u0111\xe3 m\u1edf kh\xf3a m\xe0n %s",2:"\u0110\xe3 \u0111\u1ea1t c\u1ea5p t\u1ed1i \u0111a",5:"Kh\xf4ng \u0111\u1ee7 xu",4:"N\xe2ng c\u1ea5p kh\u1ea3 d\u1ee5ng",6:"\u0110\xe3 n\xe2ng c\u1ea5p th\xe0nh c\xf4ng"},sign_db_title:{1:"Ng\xe0y 1",3:"Ng\xe0y 3",2:"Ng\xe0y 2",5:"Ng\xe0y 5",4:"Ng\xe0y 4",7:"Ng\xe0y 7",6:"Ng\xe0y 6"},vRoomListItemPart:{1:"D\xf9ng th\u1eed mi\u1ec5n ph\xed"},StageScriptPkMirror:{1:"\u0110\xe3 kh\xf3a",3:"N\u1ebfu tho\xe1t ngay, b\u1ea1n s\u1ebd thua tr\xf2 ch\u01a1i. V\u1eabn mu\u1ed1n tho\xe1t?",2:"M\u1eb9o",5:"C\xf3",4:"H\u1ee7y",6:"G\u1eedi"},vPromptGoldRainDialog:{1:"M\u1eb9o",3:"L\u1ea5y",2:"OK",5:"Th\u1eadt may m\u1eafn khi nh\u1eadn %s xu",4:"R\u1ea5t ti\u1ebfc, kh\xf4ng nh\u1eadn \u0111\u01b0\u1ee3c xu n\xe0o"},mgrDailyQuest:{1:"Ki\u1ec3m tra nhi\u1ec7m v\u1ee5 ch\u01b0a ho\xe0n th\xe0nh",2:"\u0110\xe3 nh\u1eadn ph\u1ea7n th\u01b0\u1edfng"},vPromptAdRewardDialog:{11:"4x",10:"3x",13:"Kh\u1ee7ng",12:"5x",15:"OK",14:"Xem video \u0111\u1ec3 nh\u1eadn [%s]",1:"M\u1eb9o",3:"Kh\xf4ng ph\u1ea3i b\xe2y gi\u1edd",2:"Xem video \u0111\u1ec3 g\u1ea5p \u0111\xf4i",5:"Xem qu\u1ea3ng c\xe1o \u0111\u1ec3 nh\u1eadn th\u01b0\u1edfng",4:"L\u1ea5y",7:"Kh\xf4ng c\u1ea7n",6:"Ph\u1ea7n th\u01b0\u1edfng video",9:"2x",8:"1x"},vNetworkWaitingDialog:{1:"M\u1eb9o",3:"H\u1ee7y",2:"\u0110ang k\u1ebft n\u1ed1i\u2026"},vPkMirrorResultDialog:{1:"OK"},achievement_db_desc:{42:"Th\u1eafng tr\u1eadn 100 l\u1ea7n",43:"Th\u1eafng tr\u1eadn 150 l\u1ea7n",24:"Thu th\u1eadp t\u1ed5ng c\u1ed9ng 40 b\u1ed9",25:"Tham gia 5 tr\u1eadn \u0111\u1ea5u",26:"Tham gia 10 tr\u1eadn \u0111\u1ea5u",27:"Tham gia 20 tr\u1eadn \u0111\u1ea5u",20:"Thu th\u1eadp t\u1ed5ng c\u1ed9ng 20 b\u1ed9",21:"Thu th\u1eadp t\u1ed5ng c\u1ed9ng 25 b\u1ed9",22:"Thu th\u1eadp t\u1ed5ng c\u1ed9ng 30 b\u1ed9",23:"Thu th\u1eadp t\u1ed5ng c\u1ed9ng 35 b\u1ed9",44:"Th\u1eafng tr\u1eadn 200 l\u1ea7n",28:"Tham gia 30 tr\u1eadn \u0111\u1ea5u",29:"Tham gia 50 tr\u1eadn \u0111\u1ea5u",40:"Th\u1eafng tr\u1eadn 60 l\u1ea7n",41:"Th\u1eafng tr\u1eadn 80 l\u1ea7n",1:"T\xedch l\u0169y \u0111\u01b0\u1ee3c 3000 \u0111\u1ed3ng v\xe0ng",3:"T\xedch l\u0169y \u0111\u01b0\u1ee3c 200000 \u0111\u1ed3ng v\xe0ng",2:"T\xedch l\u0169y \u0111\u01b0\u1ee3c 50000 \u0111\u1ed3ng v\xe0ng",5:"T\xedch l\u0169y \u0111\u01b0\u1ee3c 2000000 \u0111\u1ed3ng v\xe0ng",4:"T\xedch l\u0169y \u0111\u01b0\u1ee3c 700000 \u0111\u1ed3ng v\xe0ng",7:"T\xedch l\u0169y \u0111\u01b0\u1ee3c 50000000 \u0111\u1ed3ng v\xe0ng",6:"T\xedch l\u0169y \u0111\u01b0\u1ee3c 5000000 \u0111\u1ed3ng v\xe0ng",9:"Nh\u1eadn t\u1ed5ng c\u1ed9ng 100 vi\xean kim c\u01b0\u01a1ng",8:"Nh\u1eadn t\u1ed5ng c\u1ed9ng 20 vi\xean kim c\u01b0\u01a1ng",39:"Th\u1eafng tr\u1eadn 50 l\u1ea7n",38:"Th\u1eafng tr\u1eadn 30 l\u1ea7n",11:"Nh\u1eadn t\u1ed5ng c\u1ed9ng 500 vi\xean kim c\u01b0\u01a1ng",10:"Nh\u1eadn t\u1ed5ng c\u1ed9ng 200 vi\xean kim c\u01b0\u01a1ng",13:"Nh\u1eadn t\u1ed5ng c\u1ed9ng 24 vi\xean kim c\u01b0\u01a1ng",12:"Nh\u1eadn t\u1ed5ng c\u1ed9ng 1000 vi\xean kim c\u01b0\u01a1ng",15:"Nh\u1eadn t\u1ed5ng c\u1ed9ng 26 vi\xean kim c\u01b0\u01a1ng",14:"Nh\u1eadn t\u1ed5ng c\u1ed9ng 25 vi\xean kim c\u01b0\u01a1ng",17:"Thu th\u1eadp t\u1ed5ng c\u1ed9ng 7 b\u1ed9",16:"Thu th\u1eadp t\u1ed5ng c\u1ed9ng 4 b\u1ed9",19:"Thu th\u1eadp t\u1ed5ng c\u1ed9ng 15 b\u1ed9",18:"Thu th\u1eadp t\u1ed5ng c\u1ed9ng 10 b\u1ed9",31:"Tham gia 100 tr\u1eadn \u0111\u1ea5u",30:"Tham gia 70 tr\u1eadn \u0111\u1ea5u",37:"Th\u1eafng tr\u1eadn 20 l\u1ea7n",36:"Th\u1eafng tr\u1eadn 10 l\u1ea7n",35:"Th\u1eafng tr\u1eadn 5 l\u1ea7n",34:"Tham gia 500 tr\u1eadn \u0111\u1ea5u",33:"Tham gia 200 tr\u1eadn \u0111\u1ea5u",32:"Tham gia 150 tr\u1eadn \u0111\u1ea5u"},vBuildStoreResultDialog:{11:"L\u1ee3i nhu\u1eadn h\xf4m nay kh\xe1 t\u1ed1t \u0111\u1ea5y",10:"Kh\xf4ng c\u1ea7n",13:"C\u1ea7n n\u1ed7 l\u1ef1c h\u01a1n n\u1eefa",12:"C\u1ed1 g\u1eafng l\xean",15:"Kh\xf4ng ph\u1ea3i b\xe2y gi\u1edd",14:"H\xe3y thu th\u1eadp th\xeam \u0111\u1ed3 v\u1eadt",16:"OK",1:"H\u1ea1ng",3:"Doanh thu cao nh\u1ea5t",2:"T\xean",5:"L\u1ea5y",4:"Doanh thu",7:"V\xf2ng Quay May M\u1eafn",6:"2x",9:"Ph\u1ea7n th\u01b0\u1edfng video",8:"Xem qu\u1ea3ng c\xe1o \u0111\u1ec3 nh\u1eadn th\u01b0\u1edfng"},vPackingLvupListItem:{10:"Mi\u1ec5n ph\xed",1:"M\xe0n hi\u1ec7n t\u1ea1i:",3:"M\xe0n ti\u1ebfp theo:",2:"Gi\xe1",5:"M\u1edf kh\xf3a",4:"\u0110\xe3 \u0111\u1ea1t c\u1ea5p t\u1ed1i \u0111a",7:"\u0110\xe3 m\u1edf kh\xf3a th\xe0nh c\xf4ng",6:"N\xe2ng c\u1ea5p",9:"Xem video \u0111\u1ec3 n\xe2ng c\u1ea5p mi\u1ec5n ph\xed",8:"\u0110\xe3 n\xe2ng c\u1ea5p th\xe0nh c\xf4ng"},vSettingDialog:{1:"C\xe0i \u0111\u1eb7t",3:"T\u1eaft",2:"B\u1eadt",4:"Ch\u1ecdn ng\xf4n ng\u1eef"},vSelectPackingDialog:{1:"Ch\u1ecdn v\u1ecb tr\xed",3:"Thay th\u1ebf th\xe0nh c\xf4ng",2:"\u0110\xe3 kh\xf3a"},vPromptImgDialog:{1:"Danh hi\u1ec7u",2:"N\u1ed9i dung"},mgrPvp:{1:"Ch\u01b0a bi\u1ebft"},vPvpPkDialog:{11:"Ch\u01b0a th\u1ec3 nh\u1eadn th\u01b0\u1edfng",10:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u, h\xe3y v\xe0o tr\u1eadn",1:"C\xf2n l\u1ea1i:",3:"Thi \u0111\u1ea5u",2:"Xem video:",5:"\u0110ang t\u1ea3i\u2026",4:"T\u1eb7ng qu\xe0:",7:"Kh\xf4ng \u0111\u1ee7 phi\u1ebfu b\u1ea7u, vui l\xf2ng th\u1eed l\u1ea1i sau",6:"Kh\xf4ng \u0111\u1ee7 d\u1eef li\u1ec7u, kh\xf4ng th\u1ec3 th\xedch ngay",9:"Mi\u1ec5n ph\xed",8:"Xem video \u0111\u1ec3 \u0111\u01b0\u1ee3c th\xedch mi\u1ec5n ph\xed 5 l\u1ea7n"},vPromptDialog:{1:"Danh hi\u1ec7u",2:"N\u1ed9i dung"},vPvpPkItemLeft:{1:"Ch\u01b0a bi\u1ebft"}},cc._RF.pop()},{}],zhcn:[function(e,t,o){"use strict";cc._RF.push(t,"f2d2fjK079F27Nyhs4cSIDO","zhcn"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.zhcn={mgrPkMirror:{1:"\u5df2\u7ecf\u9886\u8fc7\u4e86",2:"\u7b49\u7ea7\u4e0d\u8db3"},vSubjectSuitDetailDialog:{1:"\u5df2\u7a7f\u4e0a",3:"\u6210\u529f\u7a7f\u4e0a",2:"\u7a7f\u4e0a",4:"\u6ca1\u6709\u53ef\u7a7f\u4e0a\u7684\u90e8\u4ef6"},vHudDialog:{1:"\u5927\u6ce2\u8ba2\u5355\u8702\u62e5\u800c\u6765",3:"\u52a0\u901f",2:"\u4e0d\u4e86",5:"\u52a0\u6ee1",4:"\u9a6c\u4e0a\u52a0\u6ee1\u8ba2\u5355",7:"\u786e\u5b9a",6:"\u8036\uff0c\u53ef\u4ee5\u8425\u4e1a\u5566 \uff01\uff01\uff01",9:"\u8ba2\u5355\u5df2\u52a0\u6ee1",8:"\u53d6\u6d88"},mgrAd:{1:"\u51b7\u5374\u4e2d,\u8bf7\u7a0d\u540e\u518d\u8bd5",2:"\u64ad\u653e\u5931\u8d25"},vPromptAdDialog:{1:"\u63d0\u793a",3:"\u4e0d\u4e86",2:"\u770b\u89c6\u9891",5:"\u770b\u5e7f\u544a\u9886\u53d6\u5956\u52b1",4:"\u9886\u53d6",7:"\u4e0d\u9700\u8981\u89c6\u9891\u5956\u52b1",6:"\u9700\u8981\u89c6\u9891\u5956\u52b1",8:"\u597d\u7684"},vAdFaildDialog:{1:"\u63d0\u793a",3:"\u53d6\u6d88",2:"\u65e0\u6cd5\u8fde\u63a5\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u6216\u7a0d\u540e\u518d\u8bd5",4:"\u91cd\u8bd5"},vDailyQuestDialog:{1:"\u4efb\u52a1",2:"\u52cb\u7ae0\u4e0d\u8db3,\u518d\u5b8c\u6210\u4e00\u4e9b\u4efb\u52a1\u5427"},vPromptHudCrazyDialog:{1:"\u5927\u6ce2\u8ba2\u5355\u8702\u62e5\u800c\u6765!",3:"\u9886\u53d6",2:"\u4e0d\u4e86",4:"\u770b\u5e7f\u544a\u52a0\u901f"},vProductResultDialog:{1:"\u4e0a\u67b6",3:"\u6b64\u5a03\u5a03\u5df2\u7ecf\u4e0a\u67b6\u8fc7\u5566",2:"\u786e\u5b9a",5:"\u4e0a\u67b6\u5931\u8d25",4:"\u4e0a\u67b6\u6210\u529f"},vHudRankDialog:{10:"\u8425\u4e1a",1:"\u672a\u4e0a\u699c",3:"\u53bb\u5bf9\u6218",2:"\u53bb\u53c2\u8d5b",5:"\u540d\u5b57",4:"\u6392\u540d",7:"\u6392\u884c\u699c",6:"\u6700\u9ad8\u8425\u4e1a\u989d",9:"\u5bf9\u6218",8:"\u6bd4\u8d5b"},mgrShop:{1:"\u8d2d\u4e70\u5931\u8d25",3:"\u6682\u65f6\u65e0\u6cd5\u83b7\u5f97",2:"[%s]\u4e0d\u8db3"},vPartRankItem:{1:"\u5df2\u62e5\u6709"},vPackingLvupDialog:{1:"\u5305\u88c5"},vPromptAdSelectDialog:{1:"\u63d0\u793a",3:"\u770b\u5e7f\u544a\u514d\u8d39",2:"\u770b\u89c6\u9891\u52a0\u500d",5:"\u9886\u53d6",4:"\u4e0d\u4e86",6:"\u770b\u89c6\u9891\u514d\u8d39"},vOfflineRewardDialog:{1:"\u9886\u53d6",3:"\u9700\u8981\u89c6\u9891\u5956\u52b1",2:"\u770b\u5e7f\u544a\u53cc\u500d\u5956\u52b1",5:"\u597d\u7684",4:"\u4e0d\u9700\u8981\u89c6\u9891\u5956\u52b1",7:"\u4e0d\u4e86",6:"\u53cc\u500d\u9886\u53d6"},vPkMirrorDialog:{1:"\u767b\u4e0a\u821e\u53f0",3:"\u5f00\u59cb\u88c5\u626e",2:"\u9886\u53d6\u5956\u52b1",5:"\u6b21\u6570\u4e0d\u8db3\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",4:"\u514d\u8d39"},vBuildingStoreDialog:{11:"\u770b\u5e7f\u544a",10:"\u770b\u89c6\u9891\u514d\u8d39\u83b7\u5f972\u70b9\u4f53\u529b",13:"\u63d0\u793a",12:"\u4f53\u529b\u4e0d\u8db3",15:"\u53d6\u6d88",14:"\u73b0\u5728\u8981\u7ec8\u6b62\u8425\u4e1a\u5417\uff1f",17:"\u8ba2\u5355\u5df2\u52a0\u6ee1",16:"\u7ec8\u6b62",18:"\u5df2\u7ecf\u4e0d\u80fd\u96c7\u4f63\u5566",1:"\u5e97\u94fa",3:"\u8ba2\u5355\u4e0d\u8db3\uff0c\u52a0\u6ee1\u8ba2\u5355\u5427",2:"\u5305\u88c5",5:"\u52a0\u6ee1",4:"\u4e0d\u4e86",7:"\u6ca1\u6709\u987e\u5ba2\u5566",6:"\u7b49\u7ea7:%s",9:"\u5f00\u59cb\u8425\u4e1a",8:"\u54a6\uff0c\u662f\u54ea\u91cc\u51fa\u9519\u4e86\u5462"},vAdWaitingDialog:{1:"\u63d0\u793a",3:"\u53d6\u6d88",2:"\u8fde\u63a5\u4e2d\u2026"},vBuildingStoreDetailDialog:{11:"\u8036\uff0c\u5347\u7ea7\u6210\u529f\u5566",10:"\u8036\uff0c\u89e3\u9501\u6210\u529f\u5566",1:"\u5f53\u524d\u7b49\u7ea7\uff1a",3:"\u4e0b\u4e00\u7b49\u7ea7\uff1a",2:"\u8ba2\u5355\u4e0a\u9650\uff1a",5:"\u5347\u7ea7",4:"\u5e97\u94fa",7:"\u514d\u8d39",6:"\u770b\u5e7f\u544a\u514d\u8d39\u5347\u7ea7",9:"\u6ee1\u7ea7",8:"\u4e0d\u4e86"},vSignLotteryItem:{1:"\u7b2c%s\u5173\u89e3\u9501"},daily_quest_template_db_desc:{1:"\u5b8c\u6210\u5bf9\u62183\u6b21",3:"\u5468\u6bd4\u8d5b\u70b9\u8d5e10\u6b21",2:"\u5bf9\u6218\u80dc\u52291\u6b21",5:"\u9886\u53d6\u7b7e\u5230\u5956\u52b11\u6b21",4:"\u5b8c\u6210\u5468\u6bd4\u8d5b1\u6b21",7:"\u6210\u529f\u5f00\u5e972\u6b21",6:"\u83b7\u5f971\u4e2a\u65b0\u90e8\u4ef6",8:"\u52a0\u901f\u6d3e\u4f20\u5355100\u6b21"},vDailyQuestListItem:{1:"\u524d\u5f80",2:"\u9886\u53d6"},vWarpSmallDialogNode:{1:"\u52a0\u8f7d\u4e2d"},vSignLotteryDialog:{1:"\u62bd\u5956",3:"\u770b\u89c6\u9891\u514d\u8d39\u62bd\u5956",2:"\u514d\u8d39",5:"\u5df2\u7ecf\u6ca1\u6709\u5566",4:"\u4e0b\u6b21\u518d\u6765\u5427",6:"\u4e0b\u6b21\u518d\u6765\u5427"},mgrSubjectDress:{1:"\u5df2\u6709\u76f8\u540c\u7684\u88c5\u626e",2:"\u4fdd\u5b58\u6210\u529f"},vPricePromoteAdDialog:{1:"\u63d0\u793a",3:"\u4e0d\u4e86",2:"\u770b\u89c6\u9891\u63d0\u5347\u552e\u4ef7",4:"3\u500d\u552e\u4ef7"},vSignDialog:{11:"\u8054\u7f51\u624d\u53ef\u4ee5\u83b7\u5f97\u5956\u52b1\uff01\u8bf7\u786e\u8ba4\u7f51\u7edc\u540e\u91cd\u8bd5",10:"\u63d0\u793a",13:"\u5df2\u7ecf\u7b7e\u8fc7\u4e86",12:"\u786e\u5b9a",15:"\u518d\u7b49\u7b49",14:"\u5df2\u7ecf\u4e0d\u80fd\u7b7e\u5230\u4e86",1:"\u7b7e\u5230",3:"\u770b\u5e7f\u544a\u9886\u53d6\u5956\u52b1",2:"\u53cc\u500d\u9886\u53d6",5:"\u4e0d\u9700\u8981\u89c6\u9891\u5956\u52b1",4:"\u9700\u8981\u89c6\u9891\u5956\u52b1",7:"\u53ea\u9886\u94bb\u77f3",6:"\u5168\u90e8\u9886\u53d6",9:"\u597d\u7684",8:"\u9886\u53d6"},vInputNameDialog:{1:"\u6635\u79f0\uff1a",3:"\u89d2\u8272\u53d6\u540d",2:"\u8bf7\u968f\u673a\u4e00\u4e2a\u540d\u5b57",4:"\u786e\u5b9a"},vGoldRainDialog:{1:"\u6447",3:"\u4e00\u6ce2\u91d1\u5e01\u96e8\u6765\u88ad",2:"\u70b9\u51fb\u6309\u94ae\u83b7\u5f97\u91d1\u5e01\u5427",5:"\u63d0\u793a",4:"\u5f00\u59cb",7:"\u53d6\u6d88",6:"\u9000\u51fa\u5c06\u9519\u8fc7\u6536\u83b7\u66f4\u591a\u91d1\u5e01\uff0c\u786e\u5b9a\u9000\u51fa\u5417\uff1f",8:"\u9000\u51fa"},vMallItemFreeRmb:{1:"\u514d\u8d39\u94bb\u77f3",2:"\u514d\u8d39"},mgrSdk:{1:"\u63d0\u793a",3:"\u53d6\u6d88",2:"\u662f\u5426\u9000\u51fa\u6e38\u620f",4:"\u9000\u51fa\u6e38\u620f"},vLoadingDialog:{1:"\u52a0\u8f7d\u4e2d\u2026",2:"\u5b8c\u6210"},StageScriptBase:{1:"\u5236\u4f5c",3:"\u63d0\u793a",2:"\u672a\u89e3\u9501",5:"\u53d6\u6d88",4:"\u662f\u5426\u9000\u51fa\uff1f",7:"\u8be5\u88c5\u626e\u5df2\u7ecf\u5728\u552e\u5356\u4e86",6:"\u9000\u51fa",8:"\u597d\u7684"},mgrTip:{1:"\u63d0\u793a",3:"\u53d6\u6d88",2:"\u8bf7\u7a0d\u5019\u2026"},vSubjectSuitDressListItem:{1:"\u514d\u8d39"},vPkMirrorRankListItem:{1:"\u661f:%d\u4e2a"},mgrPlayer:{1:"\u90e8\u4ef6\u8fd8\u672a\u89e3\u9501\u7684\u5462\uff0c\u5148\u95ef\u5173\u5427",3:"\u5df2\u7ecf\u9886\u53d6\u8fc7\u4e86",2:"\u4f60\u771f\u5389\u5bb3\uff0c\u5df2\u6709\u4e86\u6b64\u5957\u88c5\u5168\u90e8\u90e8\u4ef6",5:"\u9886\u53d6\u6210\u529f",4:"\u8fd8\u672a\u96c6\u9f50\u6240\u6709\u90e8\u4ef6"},vRoomDialog:{11:"\u6b64\u5a03\u5a03\u5df2\u7ecf\u4e0a\u67b6\u8fc7\u5566",10:"\u53c2\u8d5b\u63d0\u4ea4\u6210\u529f\uff01",13:"\u4e0a\u67b6\u5931\u8d25",12:"\u4e0a\u67b6\u6210\u529f",1:"\u6682\u65e0\u90e8\u4ef6",3:"\u5236\u4f5c",2:"\u5957\u88c5",5:"\u539f\u4ef7\uff1a%s",4:"\u552e\u4ef7",7:"\u5fc5\u987b\u88c5\u626e\u597d\u624d\u53ef\u4ee5\u63d0\u4ea4",6:"\u63d0\u793a",9:"\u5fc5\u987b\u7a7f\u4e0a\u88d9\u5b50\u624d\u80fd\u63d0\u4ea4",8:"\u597d\u7684"},vGotItemDialog:{1:"\u5df2\u62e5\u6709\uff01\u5151\u6362\u4e3a\uff1a",3:"\u514d\u8d39",2:"\u8d2d\u4e70",5:"\u9886\u53d6",4:"\u770b\u89c6\u9891\u514d\u8d39"},vWishDialog:{1:"\u5360\u535c",2:"\u5269\u4f59\u6b21\u6570:%d"},item_template_db_name:{1:"\u94bb\u77f3",2:"\u91d1\u5e01",4:"\u4f53\u529b",16:"\u661f\u661f"},StageScriptFree:{1:"\u63d0\u793a",3:"\u53d6\u6d88",2:"\u662f\u5426\u5c06\u6b64\u6b21\u88c5\u626e\u63d0\u4ea4\u53c2\u8d5b\uff1f",5:"\u786e\u5b9a\u8981\u9000\u51fa\u4e48\uff1f",4:"\u63d0\u4ea4",7:"\u5b8c\u6210",6:"\u9000\u51fa"},StageScriptPvp:{1:"\u63d0\u793a",3:"\u53d6\u6d88",2:"\u662f\u5426\u63d0\u4ea4\u88c5\u626e\u53c2\u52a0\u6bd4\u8d5b",5:"\u672a\u89e3\u9501",4:"\u63d0\u4ea4",7:"\u9000\u51fa",6:"\u786e\u5b9a\u8981\u73b0\u5728\u9000\u51fa\u4e48\uff1f",8:"\u53c2\u8d5b"},vPkMirrorAdventureDialog:{10:"\u94bb\u77f3\u5df2\u9886",1:"5\u661f\u53ef\u9886\u53d6",3:"\u770b\u5e7f\u544a\u9886\u53d6\u5956\u52b1",2:"\u7b49\u7ea7\u4e0d\u8db3\uff0c\u65e0\u6cd5\u9886\u53d6",5:"\u4e0d\u9700\u8981\u89c6\u9891\u5956\u52b1",4:"\u9700\u8981\u89c6\u9891\u5956\u52b1",7:"\u597d\u7684",6:"\u9886\u53d6",9:"\u53ea\u9886\u94bb\u77f3",8:"\u5168\u90e8\u9886\u53d6"},vShopDialog:{1:"\u8d2d\u4e70",2:"\u7279\u60e0:"},vMallItemFreeGold:{1:"\u514d\u8d39\u91d1\u5e01",2:"\u514d\u8d39"},vNetworkFaildDialog:{1:"\u63d0\u793a",3:"\u53d6\u6d88",2:"\u65e0\u6cd5\u8fde\u63a5\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u6216\u8fd4\u56de\u5173\u5361\u7ee7\u7eed\u6e38\u620f\u5427",4:"\u91cd\u8bd5"},vPromptOpenStoreDialog:{1:"\u5185\u5bb9"},mgrPacking:{1:"\u5305\u88c5\u751f\u4ea7\u4e2d",3:"\u9700\u8981\u5148\u89e3\u9501\u7b2c%s\u5173",2:"\u5df2\u7ecf\u662f\u6700\u9ad8\u7ea7",5:"\u91d1\u5e01\u4e0d\u8db3",4:"\u5df2\u7ecf\u53ef\u4ee5\u5347\u7ea7\u5566",6:"\u5347\u7ea7\u6210\u529f\u5566\uff01"},sign_db_title:{1:"\u7b2c\u4e00\u5929",3:"\u7b2c\u4e09\u5929",2:"\u7b2c\u4e8c\u5929",5:"\u7b2c\u4e94\u5929",4:"\u7b2c\u56db\u5929",7:"\u7b2c\u4e03\u5929",6:"\u7b2c\u516d\u5929"},vRoomListItemPart:{1:"\u8bd5\u7528"},StageScriptPkMirror:{1:"\u672a\u89e3\u9501",3:"\u9000\u51fa\u5c06\u89c6\u4e3a\u653e\u5f03\u6bd4\u8d5b,\u662f\u5426\u9000\u51fa\uff1f",2:"\u63d0\u793a",5:"\u9000\u51fa",4:"\u53d6\u6d88",6:"\u63d0\u4ea4"},vPromptGoldRainDialog:{1:"\u63d0\u793a",3:"\u9886\u53d6",2:"\u597d\u7684",5:"\u592a\u5e78\u8fd0\u4e86\u6536\u83b7\u5230%s\u91d1\u5e01",4:"\u5f88\u9057\u61be\uff0c\u6ca1\u6709\u6536\u83b7\u5230\u91d1\u5e01"},mgrDailyQuest:{1:"\u8fd8\u6ca1\u6709\u5b8c\u6210\u4efb\u52a1",2:"\u5956\u52b1\u5df2\u7ecf\u9886\u8fc7\u4e86"},vPromptAdRewardDialog:{11:"\u56db\u500d",10:"\u4e09\u500d",13:"\u4e30\u539a",12:"\u4e94\u500d",15:"\u597d\u7684",14:"\u770b\u89c6\u9891\u5f97[%s]\u5956\u52b1",1:"\u63d0\u793a",3:"\u4e0d\u4e86",2:"\u770b\u89c6\u9891\u52a0\u500d",5:"\u770b\u5e7f\u544a\u9886\u53d6\u5956\u52b1",4:"\u9886\u53d6",7:"\u4e0d\u9700\u8981\u89c6\u9891\u5956\u52b1",6:"\u9700\u8981\u89c6\u9891\u5956\u52b1",9:"\u53cc\u500d",8:"\u4e00\u500d"},vNetworkWaitingDialog:{1:"\u63d0\u793a",3:"\u53d6\u6d88",2:"\u8fde\u63a5\u4e2d\u2026"},vPkMirrorResultDialog:{1:"\u597d\u7684"},achievement_db_desc:{42:"\u5bf9\u6218\u83b7\u80dc100\u6b21",43:"\u5bf9\u6218\u83b7\u80dc150\u6b21",24:"\u7d2f\u8ba1\u6536\u96c640\u5957\u5957\u88c5",25:"\u53c2\u52a05\u6b21\u5bf9\u6218",26:"\u53c2\u52a010\u6b21\u5bf9\u6218",27:"\u53c2\u52a020\u6b21\u5bf9\u6218",20:"\u7d2f\u8ba1\u6536\u96c620\u5957\u5957\u88c5",21:"\u7d2f\u8ba1\u6536\u96c625\u5957\u5957\u88c5",22:"\u7d2f\u8ba1\u6536\u96c630\u5957\u5957\u88c5",23:"\u7d2f\u8ba1\u6536\u96c635\u5957\u5957\u88c5",44:"\u5bf9\u6218\u83b7\u80dc200\u6b21",28:"\u53c2\u52a030\u6b21\u5bf9\u6218",29:"\u53c2\u52a050\u6b21\u5bf9\u6218",40:"\u5bf9\u6218\u83b7\u80dc60\u6b21",41:"\u5bf9\u6218\u83b7\u80dc80\u6b21",1:"\u7d2f\u8ba1\u83b7\u5f973000\u91d1\u5e01",3:"\u7d2f\u8ba1\u83b7\u5f97200000\u91d1\u5e01",2:"\u7d2f\u8ba1\u83b7\u5f9750000\u91d1\u5e01",5:"\u7d2f\u8ba1\u83b7\u5f972000000\u91d1\u5e01",4:"\u7d2f\u8ba1\u83b7\u5f97700000\u91d1\u5e01",7:"\u7d2f\u8ba1\u83b7\u5f9750000000\u91d1\u5e01",6:"\u7d2f\u8ba1\u83b7\u5f975000000\u91d1\u5e01",9:"\u7d2f\u8ba1\u83b7\u5f97100\u94bb\u77f3",8:"\u7d2f\u8ba1\u83b7\u5f9720\u94bb\u77f3",39:"\u5bf9\u6218\u83b7\u80dc50\u6b21",38:"\u5bf9\u6218\u83b7\u80dc30\u6b21",11:"\u7d2f\u8ba1\u83b7\u5f97500\u94bb\u77f3",10:"\u7d2f\u8ba1\u83b7\u5f97200\u94bb\u77f3",13:"\u7d2f\u8ba1\u83b7\u5f972000\u94bb\u77f3",12:"\u7d2f\u8ba1\u83b7\u5f971000\u94bb\u77f3",15:"\u7d2f\u8ba1\u83b7\u5f975000\u94bb\u77f3",14:"\u7d2f\u8ba1\u83b7\u5f973000\u94bb\u77f3",17:"\u7d2f\u8ba1\u6536\u96c67\u5957\u5957\u88c5",16:"\u7d2f\u8ba1\u6536\u96c64\u5957\u5957\u88c5",19:"\u7d2f\u8ba1\u6536\u96c615\u5957\u5957\u88c5",18:"\u7d2f\u8ba1\u6536\u96c610\u5957\u5957\u88c5",31:"\u53c2\u52a0100\u6b21\u5bf9\u6218",30:"\u53c2\u52a070\u6b21\u5bf9\u6218",37:"\u5bf9\u6218\u83b7\u80dc20\u6b21",36:"\u5bf9\u6218\u83b7\u80dc10\u6b21",35:"\u5bf9\u6218\u83b7\u80dc5\u6b21",34:"\u53c2\u52a0500\u6b21\u5bf9\u6218",33:"\u53c2\u52a0200\u6b21\u5bf9\u6218",32:"\u53c2\u52a0150\u6b21\u5bf9\u6218"},vBuildStoreResultDialog:{11:"\u4eca\u5929\u7684\u6536\u83b7\u5f88\u5927\u5462",10:"\u4e0d\u9700\u8981\u89c6\u9891\u5956\u52b1",13:"\u8fd8\u9700\u8981\u52a0\u6cb9\u54e6",12:"\u4e0d\u9519\u4e0d\u9519,\u7ee7\u7eed\u52a0\u6cb9",15:"\u4e0d\u4e86",14:"\u591a\u6536\u96c6\u4e00\u4e9b\u90e8\u4ef6\u5427",16:"\u597d\u7684",1:"\u6392\u540d",3:"\u6700\u9ad8\u8425\u4e1a\u989d",2:"\u540d\u5b57",5:"\u9886\u53d6",4:"\u8425\u4e1a\u989d",7:"\u5e78\u8fd0\u8f6c\u76d8",6:"\u53cc\u500d",9:"\u9700\u8981\u89c6\u9891\u5956\u52b1",8:"\u770b\u5e7f\u544a\u9886\u53d6\u5956\u52b1"},vPackingLvupListItem:{10:"\u514d\u8d39",1:"\u5f53\u524d\u7b49\u7ea7:",3:"\u4e0b\u4e00\u7b49\u7ea7:",2:"\u552e\u4ef7",5:"\u89e3\u9501",4:"\u5df2\u8fbe\u5230\u6700\u9ad8\u7ea7",7:"\u89e3\u9501\u6210\u529f",6:"\u5347\u7ea7",9:"\u770b\u89c6\u9891\u514d\u8d39\u5347\u7ea7",8:"\u5347\u7ea7\u6210\u529f"},vSettingDialog:{1:"\u8bbe\u7f6e",3:"\u5173",2:"\u5f00",4:"\u9009\u62e9\u8bed\u8a00"},vSelectPackingDialog:{1:"\u9009\u62e9\u4f4d\u7f6e",3:"\u66ff\u6362\u6210\u529f",2:"\u672a\u89e3\u9501"},vPromptImgDialog:{1:"\u6807\u9898",2:"\u5185\u5bb9"},mgrPvp:{1:"\u672a\u77e5"},vPvpPkDialog:{11:"\u8fd8\u4e0d\u80fd\u9886\u53d6\u5956\u52b1\u7684",10:"\u6682\u65e0\u6570\u636e, \u8bf7\u53c2\u8d5b!!!",1:"\u5269\u4f59\u6b21\u6570:",3:"\u53c2\u8d5b",2:"\u770b\u89c6\u9891\u5f97\u6b21\u6570",5:"\u52a0\u8f7d\u4e2d\u2026",4:"\u8d60\u9001\u6b21\u6570:",7:"\u6295\u7968\u6b21\u6570\u4e0d\u8db3\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",6:"\u6570\u636e\u4e0d\u8db3\uff0c\u6682\u65f6\u65e0\u6cd5\u70b9\u8d5e",9:"\u514d\u8d39",8:"\u770b\u89c6\u9891\u514d\u8d39\u83b7\u53d6\u70b9\u8d5e5\u6b21"},vPromptDialog:{1:"\u6807\u9898",2:"\u5185\u5bb9"},vPvpPkItemLeft:{1:"\u672a\u77e5"}},cc._RF.pop()},{}]},{},["en","hi","id","pt","vi","zhcn","Const","_template","mgrAchievement","mgrAd","mgrAdNative","mgrAlu","mgrBuildingResearch","mgrBuildingStore","mgrCfg","mgrChannel","mgrCop","mgrCosmetic","mgrCountBuy","mgrDailyQuest","mgrDebug","mgrDirector","mgrEffect","mgrEmployee","mgrGoldRain","mgrGuide","mgrHappyFiveOne","mgrI18n","mgrNative","mgrNativeAdSdk","mgrNetwork","mgrOffline","mgrOfflinePvp","mgrOfflineStoreRank","mgrOnline","mgrOpMidAutumnLottery","mgrOpNcov","mgrPacking","mgrPkMirror","mgrPlayer","mgrPool","mgrPvp","mgrRandomEvent","mgrRecord","mgrSdk","mgrShader","mgrShare","mgrShop","mgrSign","mgrSound","mgrStage","mgrStatics","mgrSubjectDress","mgrTimer","mgrTip","mgrVideoRecorder","mgrWish","mgrWordFilter","PartResLoadingPipe","StageScriptBase","StageScriptFree","StageScriptGuide1","StageScriptPkMirror","StageScriptPvp","sAchievement","sAvatar","sBuildingStore","sEmployee","sPacking","sRankPlayer","vAdFaildDialog","vAdWaitingDialog","vBuildStoreResultDialog","vBuildingStoreDetailDialog","vBuildingStoreDialog","vCdkDialog","vDailyQuestDialog","vDebugInfoDialog","vFindMeBaiduDialog","vFindMeDouyinDialog","vFindMeToutiaoDialog","vFindMeWechatDialog","vGoldRainDialog","vGotCoinDialog","vGotItemDialog","vHappyFiveOneDialog","vHudDialog","vHudFreeGoldDialog","vHudFreeRmbDialog","vHudRankDialog","vInputNameDialog","vInstallShortCutComfirmDialog","vJumpOtherGameDialog","vLoadingDialog","vMallDialog","vMiniGameDouyinDialog","vNativeBanner","vNativeDialog","vNativeDialog1","vNativeDialog2","vNetworkFaildDialog","vNetworkWaitingDialog","vOfflineRewardDialog","vOpMidAutumnLotteryDialog","vOpNcovTipDialog","vPackingLvupDialog","vPkMirrorAdventureDialog","vPkMirrorDialog","vPkMirrorResultDialog","vPricePromoteAdDialog","vProductResultDialog","vPromptAdDialog","vPromptAdRewardDialog","vPromptAdSelectDialog","vPromptDialog","vPromptGoldRainDialog","vPromptHudCrazyDialog","vPromptImgDialog","vPromptInputConfirmDialog","vPromptOpenStoreDialog","vPvpPkDialog","vRoomDialog","vSelectPackingDialog","vServiceDialog","vSetLanguageDialog","vSettingDialog","vShareDialog","vShareShowDialog","vShopDialog","vShortCutDouyinDialog","vSignDialog","vSignLotteryDialog","vSubjectSuitDetailDialog","vSubjectSuitDressDialog","vWebView","vWelfareDialog","vWishDialog","LayerColor","ListView","vAvatar","vCommonTitleBar","vCommonTitleBarHorzental","vCommonTitleBarRmbGold","vCountBadge","vDailyQuestListItem","vDecorationGroup","vEventNpc","vGuideArrow","vGuideMask","vGuideTip","vGuideView","vHappyFiveOneExchangeItem","vHappyFiveOneQuestItem","vHudJumpGameNode","vHudStaffUnit","vItemAmountNode","vItemIcon","vJumpGameItem","vJumpOtherGame","vJumpOtherGameBannerItem","vJumpOtherGameSidebarItem","vLevelBar","vMallItemCoin","vMallItemFreeGold","vMallItemFreeRmb","vMallItemStoreReward","vMallItemStoreReward3","vMirrorLevelBar","vMsgTip","vOpMidAutumnLotteryItem","vOrderIcon","vOrderTitleBar","vPackingAvatar","vPackingLvupListItem","vPageDotIndicator","vPartRankItem","vPkMirrorLevelBar","vPkMirrorLevelItem","vPkMirrorPkItem","vPkMirrorRankListItem","vPvpPkItemCenter","vPvpPkItemLeft","vPvpPkItemRight","vRankItem","vResearchStaffHead","vRoomListItemPart","vRoomListItemType","vSellMoneyNode","vSetLanguageItem","vShopItemDiscount","vShopItemNormal","vShopItemType","vShoper","vSignItemLarge","vSignItemSmall","vSignLotteryItem","vStoreRankListItem","vStoreResultRankItem","vSubjectSuitDressListItem","vSuitPartListItem","vWarpSceneNode","vWarpSmallDialogNode","vWelfareItem","vWishPartItem","vWebScene","WebViewController","init","main","CascadeColor","LabelShadow","LifeCycleMonitor","ScleableButton","ToggleButton","TouchHoldButton","LabelEx","Manager","NetworkAdapterBase","NetworkAdapterHttp","NetworkAdapterHttpUlServer","NetworkManager","NetworkTask","UpdaterScript","vUpdaterSceneBase","AsyncMonitor","Base64","CfgParser","EventTouchEx","FSMObject","Grid","IAsyncMonitor","ISyncMonitor","LoadingTask","Math","MsgHandler","NodeEx","PoolManager","SpriteEx","SyncMonitor","Timer","Tools","ULNativeControllerHtml5","ul","AnimNode","DebugGrid","DebugMenu","DebugMouseControlNode","DialogBase","DraggableNode","FSMDialogBase","IReuseLayouter","Particle","ResourceNode","ReuseLayouterHBox","ReuseLayouterHGrid","ReuseLayouterVBox","ReuseLayouterVGrid","ReuseList","ReusePageView","ReusePageViewEx","SceneBase","Spine","ViewBase","ViewScript","ULConsts","cConfig","ULAdvBase","ULAdvItem","ULAdvManager","ULAdvTrimErrorManager","ULChannelInfo","ULChannelModuleBase","ULChannelModuleWebmobileBase","ULClipboardManager","ULConfig","ULCopManager","ULModuleBase","ULModuleCheckerManager","ULSdkManager","ULSdkModuleLoader","ULStatisManager","ULStorageManager","ULEvent","ULEventDispatcher","ULEventListener","ULSdkMiddleware","ULAdViewBase","ULBannerView","ULInterView","IMCPanel","MCConsts","MCItem","MCPanelCreator","MCPanelLaya","ULModuleCdk","ULModuleClipboard","ULModuleMegadata","ULModuleUserData","ULAdvFacebook","ULModuleFaceBook","ULBase64","ULMd5","ULSDK","ULTimer","ULTools","ULWebSocket","LanguageData","LocalizedLabel","LocalizedSprite","LocalizedSpriteFixedUrl","SpriteFrameSet","polyglot.min"]);